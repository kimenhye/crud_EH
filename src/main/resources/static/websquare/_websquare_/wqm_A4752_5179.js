(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[5179],{5179:(t,e,i)=>{"use strict";i.r(e),i.d(e,{wq_window:()=>p});var o=i(5405),n=i(465),s=i(5130),r=i(6146),a=i(209),d=i(6342),h=i(6247),l=i(9327),p=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(p.prototype,h.s.prototype),p.prototype.defaultOptions={pluginType:"uiplugin.window",pluginName:"window",parseChild:!0,userEvents:["onclose","onminimize","onmaximize","onrestore","ondragstart","ondragend","onwindowkeyup","onwindowmousedown","onpopup","ondrawcomplete","onwindowload","onwindowunload"],defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",windowTitle:"",windowHeaderHTML:"",nameLayerHTML:"",statusMsg:"",customMsg:"",src:"",wmode:!1,useStatusMsg:!0,useCustomMsg:!1,windowTooltipDisplay:!0,title:"",dragResizable:!0,dragResizableHeader:!1,displayParentWindowScroll:!1,disableCloseButton:!1,spa:!1,noAttatchedEvent:!1,params:"",popupParam:"",spaReplaceHistory:!1,buttonFormatter:"",foldOnMinimized:!1,useATagBtn:!1,windowDragMove:!1,windowMoveType:"restrict",frameModal:"",processMsgFrame:!1},p.prototype.initialize=function(t){try{if(this.frame=null,this.modal=null,this.windowInfo={status:this.options.parent?"maximized":"restored",drag:!this.options.parent,top:this.options.defaultTop,left:this.options.defaultLeft,defaultWidth:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",defaultHeight:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",width:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",height:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",minWidth:parseInt(this.options.minimumWidth,10)<150?"150px":this.options.minimumWidth,minHeight:parseInt(this.options.minimumHeight,10)<150?"150px":this.options.minimumHeight,minimized:this.options.minimized||!1,setInfo:function(t){this.top=t.style.top,this.left=t.style.left,this.width=t.style.width,this.height=t.style.height},getInfo:function(t,e){t.style.top=this.top,t.style.left=this.left,t.style.width="restored"===e?this.defaultWidth:this.width,t.style.height="restored"===e?this.defaultHeight:this.height}},"iframe"==this.options.frameMode||this.options.frameMode,"true"===n.v.getConfiguration("/WebSquare/spa/@value")&&(this.options.spa=!0),this.options.parent&&this.options.parent.options.hideTitleOnMaximize&&(this.hideTitleOnMaximize=!0),this.options.parent&&this.options.parent.options.usePopup&&(this.usePopup=!0),this._multiViewUUID="",this._direction=0,this.buttons=[],this.buttonInfo={},this.hasButtons=!1,this.options.buttonFormatter){var e=a.D.getGlobalFunction(this.options.buttonFormatter,this.scope_id);"function"==typeof e&&(this.hasButtons=!0,this.buttonInfo={},this.buttonInfo.buttons=e(),this.buttonInfo.alignment="right",this.buttonInfo.useButtonFormatter=!0)}this.popupIdx=0,this._isWframePopup=!1,this.options.windowDragMove||"true"!==n.v.getConfiguration("/WebSquare/window/windowDragMove/@value")||(this.options.windowDragMove=!0)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.toHTML=function(){try{var t=""==this.options.disabled?"":"disabled='true'",e=[],i="",o="",n=""==this.options.style?"":"style='"+this.options.style+"'",r="restored"===this.windowInfo.status?"w2window_restored":"w2window_maximized",d="overflow"===this.options.windowMoveType?" w2window_window_move_type":"";this.options.windowTooltipDisplay&&(o="title='"+this.options.windowTitle+"'"),
e.push("<div "+t+" id='"+this.id+"' "+n+" class='w2window "+r+" "+this.options.className+d+"' tabindex='0' role='application' >"),1==this.options.wmode&&(i=WebSquare.net.getSSLBlankPage(),e.push("<iframe frameBorder='no' title='"+this.options.title+"' class='w2window_wmode' "+i+"></iframe>"));var h="w2window_header",l="w2window_body";if(1==this.hideTitleOnMaximize&&"maximized"==this.windowInfo.status&&(h+=" w2window_header_extend",l+=" w2window_body_extend"),""==this.options.windowHeaderHTML){if(e.push("<div id='"+this.id+"_header' class='"+h+"'"+o+">"),e.push("<div id='"+this.id+"_header_icon' class='w2window_header_icon'></div>"),!0===this.options.useATagTitle?e.push("<a id='"+this.id+"_header_title' class='w2window_header_title' href='javascript:void(null);' title='"+this.options.windowTitle+"' style='text-decoration:none;'>"+this.options.windowTitle+"</a>"):e.push("<div id='"+this.id+"_header_title' class='w2window_header_title'>"+this.options.windowTitle+"</div>"),this.hasButtons){e.push("<div id='"+this.id+"_header_buttonArea' class='w2window_header_buttonArea'>");for(var p=0;p<this.buttonInfo.buttons.length;p++){var u=this.buttonInfo.buttons[p].title||"";if(this.buttonInfo.useButtonFormatter){var w=this.buttonInfo.buttons[p].className||"";e.push("<div id='"+this.id+"_header_button_"+p+"' class='w2window_header_custom_button "+w+"' btn_index='"+p+"' title='"+u+"' ></div>")}else{var c=this.buttonInfo.buttons[p].value?"<span id='"+this.id+"_header_button_"+p+"_value' class='w2window_header_button_value' title='"+u+"' btn_index='"+p+"' > "+this.buttonInfo.buttons[p].value+" </span>":"";e.push("<div id='"+this.id+"_header_button_"+p+"' class='w2window_header_button w2window_header_button_"+p+"' btn_index='"+p+"' >"),e.push("<div id='"+this.id+"_header_button_"+p+"_content' class='w2window_header_button_content w2window_header_button_content_"+p+"' btn_index='"+p+"' >"),e.push(c),e.push("</div>"),e.push("</div>")}}e.push("</div>")}var m=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+m+"'>"),e.push("<div id='"+this.id+"_minimize' class='w2window_minimize' title='"+WebSquare.language.getMessage("Window_minimize")+"'></div>"),e.push("<div id='"+this.id+"_restore' class='w2window_restore' title='"+WebSquare.language.getMessage("Window_restore")+"' ></div>");var f=this.options.disableCloseButton?" w2window_close_disabled":"";this.options.useATagBtn?a.D.isMobile()?e.push("<a id='"+this.id+"_close' role='button' class='w2window_close w2window_close_atag"+f+"' href='javascript:void(null);' >"+WebSquare.language.getMessage("Window_close")+"' </a></div>"):e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+f+"' href='javascript:void(null);' title='"+WebSquare.language.getMessage("Window_close")+"'>"+WebSquare.language.getMessage("Window_close")+"</a></div>"):e.push("<div id='"+this.id+"_close' class='w2window_close"+f+"' title='"+WebSquare.language.getMessage("Window_close")+"' ></div>"),1==this.usePopup&&e.push("<div id='"+this.id+"_popup' class='w2window_popup' title='"+WebSquare.language.getMessage("Window_popup")+"' ></div>"),e.push("</div>"),e.push("</div>")}else e.push("<div id='"+this.id+"_header' class='"+h+"'>"+this.options.windowHeaderHTML+"</div>");return this.options.useStatusMsg?e.push("<div id='"+this.id+"_body' class='"+l+"'>"):e.push("<div id='"+this.id+"_body' class='"+l+" w2window_no_status'>"),a.D.isMobile()&&this.options.useATagBtn&&e.push("<button id='"+this.id+"_start' name='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2window_popup_start'>"+WebSquare.language.getMessage("Window_popup_start")+"</button>"),e.push("<div id='"+this.id+"_content' class='w2window_content'>"),e.push("</div>"),(this.options.useStatusMsg||this.options.useCustomMsg)&&(e.push("<div id='"+this.id+"_status' class='w2window_status'>"),
this.options.useStatusMsg&&e.push("<div id='"+this.id+"_msg' class='w2window_msg'>"+this.options.statusMsg+"</div>"),this.options.useCustomMsg&&e.push("<div id='"+this.id+"_custom_msg' class='w2window_custom_msg'>"+this.options.customMsg+"</div>"),e.push("</div>")),e.push("</div>"),this.options.dragResizable&&(e.push("<div id='"+this.id+"_resize1' class='w2window_resize_right'></div>"),e.push("<div id='"+this.id+"_resize2' class='w2window_resize'></div>"),e.push("<div id='"+this.id+"_resize3' class='w2window_resize_bottom'></div>"),e.push("<div id='"+this.id+"_resize4' class='w2window_resize_bottomLeft'></div>"),e.push("<div id='"+this.id+"_resize5' class='w2window_resize_left'></div>"),this.options.dragResizableHeader&&(e.push("<div id='"+this.id+"_resize6' class='w2window_resize_upLeft'></div>"),e.push("<div id='"+this.id+"_resize7' class='w2window_resize_up'></div>"),e.push("<div id='"+this.id+"_resize8' class='w2window_resize_upRight'></div>"))),e.push("</div>"),e.join("")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setAction=function(){try{if(this.dom.header=document.getElementById(this.id+"_header"),this.dom.statusMsg=document.getElementById(this.id+"_msg"),this.dom.customMsg=document.getElementById(this.id+"_custom_msg"),this.dom.body=document.getElementById(this.id+"_body"),void 0!==this.options.useMaximize&&this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStartEvent)),a.D.isMobile()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),a.D.getBoolean(n.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)))):(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent))),this.drawFrame(this.options.src),this.hasButtons){for(var t=0;t<this.buttonInfo.buttons.length;t++){if(!this.buttonInfo.useButtonFormatter){var e=document.getElementById(this.id+"_header_button_"+t+"_content");e.style.marginTop=-e.offsetHeight/2+"px",e.style.marginLeft=-e.offsetWidth/2+"px"}if(this.buttonInfo.buttons[t].value){var i=document.getElementById(this.id+"_header_button_"+t+"_value");i.style.marginTop=-i.offsetHeight/2+"px",i.style.marginLeft=-i.offsetWidth/2+"px"}this.buttons.push({btn_index:t,disable:!1,hidden:!1,contentDom:e,valueDom:i})}if("right"==this.buttonInfo.alignment){var o=document.getElementById(this.id+"_header_control"),r=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(r,"float","right"),WebSquare.style.setStyle(r,"left","-"+o.offsetWidth+"px")}if(1==this.buttonInfo.useButtonFormatter){r=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(r,"height",r.offsetHeight-5+"px"),WebSquare.style.setStyle(r,"padding-top","5px")}}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.drawFrame=function(t,e){try{if(this.frame&&(this.removeControl(this.frame),this.frame.remove(),this.frame=null),this.options.src=t||"","iframe"==this.options.frameMode){if(!WebSquare.uiplugin.iframe)return void(o=requires("uiplugin.iframe")).then(function(t,e,i){return function(o,n){t.drawFrame(e,i)}}(this,t,e))
;this.frame=new WebSquare.uiplugin.iframe(this.id+"_iframe",{className:"w2window_iframe",src:this.options.src||"",spa:this.options.spa,title:this.options.title,params:this.options.params,popupParam:this.options.popupParam,spaReplaceHistory:this.options.spaReplaceHistory})}else if("wframe"==this.options.frameMode){var i=this.org_id||this.id;this.frame=l.D.create(i+"_wframe",{className:"w2window_wframe",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"wframe",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;var o=l.D.initAsync(),n=this.uuid;o.then((function(t,e){WebSquare.idCache[n]._activateFrame()}))}e&&e.dataObject?this.setDataObject(e.dataObject):this._dataObject&&this.setDataObject(this._dataObject);var s=this.uuid;this.frame.bind("onload",(function(){r.B.fireEvent(WebSquare.idCache[s],"ondrawcomplete")}));var h="on"+this.frame.options.pluginName+"load";this.frame.bind(h,(function(){r.B.fireEvent(WebSquare.idCache[s],"onwindowload")}));var p="on"+this.frame.options.pluginName+"unload";if(this.frame.bind(p,(function(){null!=WebSquare.idCache[s]&&r.B.fireEvent(WebSquare.idCache[s],"onwindowunload")})),"iframe"==this.options.frameMode){this._activateFrame();try{if(1!=this.options.noAttatchedEvent){n=this.uuid;this.temp_cnt=0,a.D.setInterval((function(t){try{var e=WebSquare.idCache[n];if(!e)return void a.D.clearInterval(t);e.temp_cnt++,"about:blank"!==e.frame.render.contentWindow.location.href&&e.frame.render.contentWindow.location.href!==WebSquare.net.getSSLBlankPage(!0)?(document.addEventListener&&!a.D.isIE()?(e.frame.render.contentWindow.document.addEventListener("mousedown",(function(){self.WebSquare.idCache[n].handleFrameMouseDownEvent({})})),e.frame.render.contentWindow.document.addEventListener("keyup",(function(t){self.WebSquare.idCache[n].handleFrameKeyupEvent({keyCode:t.charCode?t.charCode:t.keyCode})}))):document.attachEvent&&(e.frame.render.contentWindow.document.attachEvent("onmousedown",(function(){self.WebSquare.idCache[n].handleFrameMouseDownEvent({})})),e.frame.render.contentWindow.document.attachEvent("onkeyup",(function(t){self.WebSquare.idCache[n].handleFrameKeyupEvent({keyCode:t.charCode?t.charCode:t.keyCode})}))),a.D.clearInterval(e.id+"_drawframe")):e.temp_cnt>1200&&(a.D.clearInterval(e.id+"_drawframe"),d.k.printLog("["+e.id+"] addListener fail 1"))}catch(t){e&&e.temp_cnt>750&&a.D.clearInterval(e.id+"_drawframe")}}),{key:this.id+"_drawframe",delay:80,args:[this.id+"_drawframe"]})}}catch(t){d.k.printLog("["+this.id+"] addListener fail 3")}}else"wframe"==this.options.frameMode&&(this.frame.popupParam=this.popupParam,this.frame.popupId=this.popupId)}catch(t){d.k.printLog("error : window.drawFrame["+this.id+"]")}},p.prototype._activateFrame=function(){try{var t=this.getElementById(this.id+"_content");this.frame.writeTo(t),this.frame.activate(),this.addControl(this.frame)}catch(t){d.k.printLog("error : window.drawFrame["+this.id+"]")}},p.prototype.resizeForIE6=function(t,e,i){try{if(a.D.isIE(6)){i||(i="windowContainer"),t=parseInt(t,10),e=parseInt(e,10);var o=this.options.useStatusMsg?0:20;"windowContainer"==i&&this.setSize(t-3,e-2),this.dom.windowBody=document.getElementById(this.id+"_body"),this.dom.windowContent=document.getElementById(this.id+"_content"),this.dom.windowStatus=document.getElementById(this.id+"_status"),this.dom.header.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("height",e-27+"px"),this.dom.windowContent.style.setAttribute("width",t-11+"px"),"popup"==i?this.dom.windowContent.style.setAttribute("height",e-31+o+"px"):this.dom.windowContent.style.setAttribute("height",e-50+o+"px"),
"popup"==i?this.frame.setSize(t-11,e-31+o):this.frame.setSize(t-11,e-50+o),this.options.useStatusMsg&&this.dom.windowStatus.style.setAttribute("width",t-11+"px")}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.resizeParentGroup=function(){try{if(this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))return{width:WebSquare.style.getSize(this.parentControl.parentControl.render,"width"),height:this.parentControl.parentControl.options.nameLayerMenu?WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(document.getElementById(this.parentControl.parentControl.id+"_nameContainer"),"height"):WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(this.parentControl.parentControl.dom.toolBar,"height")}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.close=function(t){try{if(!0===this._closed)return;this._closed=!0;try{WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){s.w.printStackTrace(t,null,this)}if(t&&"object"==typeof t||(t={}),this.options.closeAction){var e=a.D.getGlobalFunction(this.options.closeAction,this.scope_id);if("function"==typeof e)if(!0!==e.call(this,this.options.title,t))return this._closed=!1,!1}return!0===t.sync?this._close(!0===t.skipRemove):a.D.setTimeout(this._close,{key:this.id+"_onwindowclosed",caller:this,delay:100,args:[{skipRemove:!0===t.skipRemove}]}),!0}catch(t){s.w.printStackTrace(t,null,this),this._closed=!1}},p.prototype.forceClose=function(){try{var t=this;setTimeout((function(){"iframe"==t.options.frameMode&&t.frame.setSrc("about:blank");var e={src:t.options.src,title:t.options.windowTitle};r.B.fireEvent(t,"onclose",e),t.remove()}),100)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.toggleMinimize=function(){if(!0===this.options.foldOnMinimized){var t=this.windowInfo.status;if(!this.windowInfo.minimized)switch(t){case"restored":this.windowInfo.setInfo(this.render);break;case"maximized":this.restore(!0),this.windowInfo.setInfo(this.render)}this.fold()}else this.minimize()},p.prototype.minimize=function(t,e){try{!0===t||0==this.windowInfo.minimized&&!1!==t?(this.setStyle("display","none"),this.windowInfo.minimized=!0):(this.setStyle("display","block"),this.windowInfo.minimized=!1),e||r.B.fireEvent(this,"onminimize")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.fold=function(){try{if(0==this.windowInfo.minimized){var t=this.options.foldSize&&this.options.foldSize.width?this.options.foldSize.width:this.dom.clientWidth;this.setStyle("height",this.dom.header.clientHeight+"px"),this.dom.body.style.display="none",this.setStyle("width",t+"px"),this.windowInfo.minimized=!0}else{var e=this.render.offsetLeft,i=this.render.offsetTop,o=this.render.clientWidth,n=this.render.clientHeight,a=this.getMaxSize(),d=a.width,h=a.height,l=parseInt(this.windowInfo.width,10)-o,p=parseInt(this.windowInfo.height,10)-n,u=e,w=i,c=0,m=0;if(this.parentControl&&(c=document.documentElement.scrollTop||document.body.scrollTop,m=document.documentElement.scrollLeft||document.body.scrollLeft),e+l<0&&(u=0),e+l>d+m?u=o<=d?d-(o+l)+m:0:m>u&&(u=m),i+p<0&&(w=0),i+p>h){if(n<=h){if((w=h-(n+p))<c)return w=c,this.setStyle("height",h-c+"px"),this.setPosition(u,w),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else if(w=0+c,n>h)return h-=c,this.setStyle("height",h+"px"),this.setPosition(u,w),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else c>w&&(w=c);this.setPosition(u,w),this.setStyle("width",this.windowInfo.width),this.setStyle("height",this.windowInfo.height),this.dom.body.style.display="block",this.windowInfo.minimized=!1}r.B.fireEvent(this,"onminimize")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.popup=function(){try{r.B.fireEvent(this,"onpopup")}catch(t){s.w.printStackTrace(t,null,this)}},
p.prototype.maximize=function(){try{if(this.removeClass(this.render,"w2window_restored"),this.addClass(this.render,"w2window_maximized"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header w2window_header_extend";var t="w2window_body w2window_body_extend";this.options.useStatusMsg||(t+=" w2window_no_status"),this.dom.body.className=t}this.dom.body.style.display="block",this.windowInfo.status="maximized",this.windowInfo.drag=!1,this.windowInfo.minimized||this.windowInfo.setInfo(this.render),this.windowInfo.minimized=!1;var e=this.getMaxSize();if(this.parentControl){var i=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft;this.render.style.left=o+"px",this.render.style.top=i+"px",this.render.style.height=e.height-i+"px",this.render.style.width=o>0?e.width+"px":""}else this.render.style.left="0px",this.render.style.top="0px",this.render.style.width="",this.render.style.height="";r.B.fireEvent(this,"onmaximize")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.restore=function(t){try{if(this.removeClass(this.render,"w2window_maximized"),this.addClass(this.render,"w2window_restored"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header";var e="w2window_body";this.options.useStatusMsg||(e+=" w2window_no_status"),this.dom.body.className=e}"none"==this.getStyle("display")&&this.setStyle("display","block"),this.dom.body.style.display="block",this.windowInfo.status="restored",this.windowInfo.drag=!0,this.windowInfo.minimized=!1,this.options.useRestoreDefaultSize?this.windowInfo.getInfo(this.render,"restored"):this.windowInfo.getInfo(this.render),t||r.B.fireEvent(this,"onrestore")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.toggleResize=function(){try{"restored"==this.windowInfo.status?this.maximize():this.restore()}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setStatusMsg=function(t){try{this.options.useStatusMsg&&(this.dom.statusMsg.innerHTML=t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setCustomMsg=function(t){try{this.options.useCustomMsg&&(this.dom.customMsg.innerHTML=t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setSrc=function(t,e){try{if(null!=this.frame)if("iframe"==this.options.frameMode)requires("uiplugin.iframe").then(function(t,e,i){return function(o,n){t.drawFrame(e,i)}}(this,t,e));else"wframe"==this.options.frameMode&&this.frame.setSrc(t,e)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.movable=function(t){try{t=a.D.getBoolean(t),this.windowInfo.drag=t}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.showModal=function(t){try{if(r.B.fireEvent(this,"ondragstart"),!this.modal){if(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",a.D.isIE(6)){this.resizeParentGroup();var e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}t&&!0===t.transparent&&(this.modal.style.backgroundColor="transparent"),this.render.appendChild(this.modal),WebSquare.style.setOpacity(this.modal,.3)}if(this.modal){if(this.modal.style.display="block",a.D.isIE(6)){this.resizeParentGroup();e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}!a.D.isMobile()&&this.options.frameModal&&this.addClass(document.documentElement,"w2modalopened_ghost")}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.hideModal=function(){try{r.B.fireEvent(this,"ondragend"),this.modal&&(this.modal.style.display="none",!a.D.isMobile()&&this.options.frameModal&&this.removeClass(document.documentElement,"w2modalopened_ghost"))}catch(t){
s.w.printStackTrace(t,null,this)}},p.prototype.setFocus=function(){try{a.D.isMobile()&&this.options.useAtagButton?document.getElementById(this.id+"_start").focus():"iframe"==this.options.frameMode?this.frame.render.contentWindow&&this.frame.render.contentWindow.focus():"wframe"==this.options.frameMode&&this.frame.focus()}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype._focus=function(){try{a.D.isMobile()&&this.options.useATagBtn?document.getElementById(this.id+"_start").focus():(this.render.setAttribute("tabindex",0),this.render.focus())}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.getMaxSize=function(){var t,e;(this.parentControl?(t=WebSquare.style.getSize(this.parentControl.render,"width"),e=WebSquare.style.getSize(this.parentControl.render,"height")+(document.documentElement.scrollTop||document.body.scrollTop)):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(a.D.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(a.D.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},p.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(a.D.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-right"),10)||0),i=i-(parseInt(a.D.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},p.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2window_close")&&!0!==this.options.disableCloseButton&&(a.D.getBoolean(n.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&r.B.stopEvent(t),this.close({isCloseButtonClick:!0}),this.options&&this.options.frameModal&&r.B.stopPropagation(t)),e.match("w2window_minimize")&&(r.B.stopEvent(t),this.toggleMinimize(),this.options.frameModal&&r.B.stopPropagation(t)),e.match("w2window_restore")&&(a.D.getBoolean(n.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&r.B.stopEvent(t),this.toggleResize(),this.options.frameModal&&r.B.stopPropagation(t)),e.match("w2window_popup")&&(r.B.stopEvent(t),this.popup());e=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleFrameMouseDownEvent=function(t){try{r.B.fireEvent(this,"onwindowmousedown",t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleDblclickEvent=function(t){try{if(r.B.stopEvent(t),!1===this.options.useMaximize)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header_button"))return;e.match("w2window_header")&&this.toggleResize()}e=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleMouseoverEvent=function(t){try{r.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2window_minimize")&&this.addClass(e.getElement(),"w2window_minimize_on"),e.match("w2window_restore")&&this.addClass(e.getElement(),"w2window_restore_on"),e.match("w2window_close")&&this.addClass(e.getElement(),"w2window_close_on"),e.match("w2window_popup")&&this.addClass(e.getElement(),"w2window_popup_on"),e.match("w2window_header_button_content")){var i=e.getElement();this.buttons[Number(i.getAttribute("btn_index"))].disable||this.addClass(i,"w2window_header_button_content_on")}
e=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleMouseoutEvent=function(t){try{r.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2window_minimize")&&this.removeClass(e.getElement(),"w2window_minimize_on"),e.match("w2window_restore")&&this.removeClass(e.getElement(),"w2window_restore_on"),e.match("w2window_close")&&this.removeClass(e.getElement(),"w2window_close_on"),e.match("w2window_popup")&&this.removeClass(e.getElement(),"w2window_popup_on"),e.match("w2window_header_button_content")){var i=e.getElement();this.buttons[Number(i.getAttribute("btn_index"))].disable||this.removeClass(i,"w2window_header_button_content_on")}e=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleMousedownEvent=function(t){try{this.resizeParentGroup();for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header")&&(!0!==this.options.enableHeaderSelect&&r.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){var i=r.B.getTarget(t);if(!i||i.id==this.id+"_minimize"||i.id==this.id+"_restore"||i.id==this.id+"_close"||i.id==this.id+"_popup")return;var o=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:5,mode:"move",makeGhostLayer:!0===this.options.windowDragMove?null:function(t){var e=WebSquare.style.getAbsoluteLeft(o.render),i=WebSquare.style.getAbsoluteTop(o.render),n=o.getElementSize(o.render),s=n.width,r=n.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.show(),t.setSize(s,r),t.setPosition(e,i),t.hide(),t},handleStart:function(){!0===o.options.windowDragMove?(o.showModal.call(o,{transparent:!0}),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()):(o.showModal.call(o),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll())},handleUpdate:function(t,e,i,n,s){if(!0!==o.options.windowDragMove){if(1==o.options.displayParentWindowScroll&&!o.options.frameModal)try{var r=a.D.getStyleProperty(document.documentElement,"overflow");if(("auto"==r||"scroll"==r)&&!o.modal)return}catch(s){}o.render.offsetLeft;var d,h,l=o.render.offsetTop,p=(o.render.clientWidth,o.render.clientHeight,(_=o.getMaxSize()).width),u=_.height,w=(v=0,0);o.parentControl&&(v=document.documentElement.scrollTop||document.body.scrollTop,w=document.documentElement.scrollLeft||document.body.scrollLeft,d=WebSquare.style.getAbsoluteLeft(o.parentControl.render),h=WebSquare.style.getAbsoluteTop(o.parentControl.render),o.frame&&"wframe"===o.frame.getPluginName()&&(d-=w,h-=v)),o.frame&&"iframe"===o.frame.getPluginName()?(s.clientX<d+40||s.clientX>p+d-40||l+n+1-v<0||s.clientY+20+v>h+u-20)&&WebSquare.dragdrop.gDragManager.finish(s):"overflow"===o.options.windowMoveType?(s.clientX<d+20&&i<0||s.clientX>p+d-20&&i>0||s.clientY+1<h||s.clientY>h+u-20&&n>0)&&WebSquare.dragdrop.gDragManager.finish(s):(s.clientX<d+20||s.clientX>p+d-20||s.clientY+1<h||s.clientY>h+u-20)&&WebSquare.dragdrop.gDragManager.finish(s)}else{var c=0,m=0;try{c=WebSquare.style.getAbsoluteLeft(o.render.parentNode),m=WebSquare.style.getAbsoluteTop(o.render.parentNode)}catch(s){}var f=Math.max(t+i-c,0),g=Math.max(e+n-m,0),y=0,b=0;if(null!=o._windowId){var _=o.getMaxSize(),v=o.parentControl?document.documentElement.scrollTop||document.body.scrollTop:0,S=_.width-o.render.offsetWidth,I=_.height-o.render.offsetHeight-v;f=Math.min(f,S),g=Math.min(g,I)}else!o.parentControl.parentControl||"tabControl"!=o.parentControl.parentControl.options.pluginName&&"tabControl"!=o.parentControl.parentControl.options.inheritFrom||(y=o.parentControl?o.parentControl.render.scrollLeft:0,
b=o.parentControl?o.parentControl.render.scrollTop:0);o.setPosition(f+y,g+b)}},handleFinish:function(t,e,i,n){if(o.hideModal.call(o),!0!==o.options.windowDragMove){var s=o.render.offsetLeft,r=o.render.offsetTop,d=o.render.clientWidth,h=o.render.clientHeight,l=o.getMaxSize(),p=l.width,u=l.height,w=s+i,c=r+n,m=0,f=0,g=0,y=0,b=0,_=0;if(o.parentControl&&(m=document.documentElement.scrollTop||document.body.scrollTop,f=document.documentElement.scrollLeft||document.body.scrollLeft,o.options.frameModal&&(b=parseInt(o.parentControl.getStyle("border-top-width"))||0,_=parseInt(o.parentControl.getStyle("border-left-width"))||0,p=o.parentControl.render.offsetWidth-_,u=o.parentControl.render.offsetHeight-b,d=o.render.offsetWidth,h=o.render.offsetHeight,o.render.offsetParent!==o.parentControl.render&&(r-=g=o.parentControl.render.offsetTop,s-=y=o.parentControl.render.offsetLeft))),1==o.options.displayParentWindowScroll&&!o.options.frameModal||"overflow"===o.options.windowMoveType)try{var v=a.D.getStyleProperty(document.documentElement,"overflow");"auto"!=v&&"scroll"!=v&&"overflow"!==o.options.windowMoveType||(p=Math.max(p,d,s+d+i),u=Math.max(u,h,r+h+n))}catch(t){}"overflow"!==o.options.windowMoveType&&s+i<0&&(w=y+_),s+d+i>p+f?w=d<=p?p-d+f+y:y:"overflow"!==o.options.windowMoveType&&f>w&&(w=f),r+n<0&&(c=g+b),r+h+n>u?h<=u?(c=u-h+g)<m&&(c=m,o.render.style.height=u-m+"px"):(c=0+m,h>u&&(u-=m,o.render.style.height=u+"px")):m>c&&(c=m),o.setPosition(w,c)}}})}if(e.match("w2window_header_button")){r.B.stopEvent(t);var n=e.getElement().getAttribute("btn_index");if(!(l=this.buttons[Number(n)]).disable)try{var d=this.buttonInfo.buttons[n].clickAction;switch(typeof d){case"function":d.apply(this,this);break;case"string":default:var h=a.D.getGlobalFunction(d,this.scope_id);"function"==typeof h&&h(this)}}catch(t){s.w.printStackTrace(t,null,this)}return}if(e.match("w2window_header_custom_button")){r.B.stopEvent(t);n=e.getElement().getAttribute("btn_index");var l=this.buttons[parseInt(n,10)],p={uniqueId:this.id,btnId:this.id+"_header_button_"+l.btn_index,btnIdx:l.btn_index,disable:l.disable,hidden:l.hidden};return void(l.disable||this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom)&&r.B.fireEvent(this.parentControl.parentControl,"onclickcustombtn",p))}var u=e.match("w2window_resize"),w=e.match("w2window_resize_bottomLeft");if((u||w)&&(r.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){o=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:u?"resize":"resize_bottomLeft",minWidth:o.windowInfo.minWidth,minHeight:o.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(o.render),i=WebSquare.style.getAbsoluteTop(o.render),n=o.getElementSize(o.render),s=n.width,r=n.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){o.showModal.call(o)},handleFinish:function(t,e,i,n,s){o.hideModal.call(o);var r="resize"===this.mode?1:-1,a=parseInt(o.getStyle("width"),10),d=parseInt(o.getStyle("height"),10),h=o.render.offsetTop,l=o.render.offsetLeft,p=a+i*r,u=d+n;p<parseInt(o.windowInfo.minWidth,10)&&(p=parseInt(o.windowInfo.minWidth,10),1===r?i+=a-p:i=a-p),u<parseInt(o.windowInfo.minHeight,10)&&(u=parseInt(o.windowInfo.minHeight,10));var w,c=o.getMaxSize(),m=c.height-h;if((w=1===r?c.width-l:Math.min(l+a,c.width))<o.render.clientWidth+i*r&&(p=w),m<o.render.clientHeight+n&&(u=m),o.setSize(p,u),-1===r){var f=Math.max(l+i,0);o.setPosition(f,null)}}})}var c=e.match("w2window_resize_right"),m=e.match("w2window_resize_left")
;if((c||m)&&(r.B.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1!==this._direction))){o=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:c?"resize_right":"resize_left",minWidth:o.windowInfo.minWidth,minHeight:o.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(o.render),i=WebSquare.style.getAbsoluteTop(o.render),n=o.getElementSize(o.render),s=n.width,r=n.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[o._multiViewUUID]||o.showModal.call(o)},handleFinish:function(t,e,i,n,s){var r="resize_right"===this.mode?1:-1;o.hideModal.call(o);var a=parseInt(o.getStyle("width"),10),d=parseInt(o.getStyle("height"),10),h=a+i*r;h<parseInt(o.windowInfo.minWidth,10)&&(h=parseInt(o.windowInfo.minWidth,10),1===r?i+=a-h:i=a-h);var l=o.getMaxSize().width;if("resize_right"===this.mode&&(l-=o.render.offsetLeft),l<o.render.clientWidth+i*r&&(h=l),WebSquare.idCache[o._multiViewUUID]&&1!==o._direction){var p=WebSquare.idCache[o._multiViewUUID],u=parseInt(p.windowInfo.minWidth,10);h>l-u&&(h=l-u),p.setSize(parseInt(p.getStyle("width"),10)-h+a,null),p.setPosition(p.getPosition("left")+h-a,null)}if(o.setSize(h,d),o.frame&&o.frame._processMsgModal&&"block"===o.frame._processMsgModal.render.style.display&&o.frame._processMsgModal.setSize(h,d),-1===r){var w=o.getPosition("left")+i;w+h>l&&(w=l-h),w=Math.max(w,0),o.setPosition(w,null)}}})}var f=e.match("w2window_resize_bottom"),g=e.match("w2window_resize_up");if((f||g&&this.options.dragResizableHeader)&&(r.B.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1===this._direction))){o=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:f?"resize_bottom":"resize_up",minWidth:o.windowInfo.minWidth,minHeight:o.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(o.render),i=WebSquare.style.getAbsoluteTop(o.render),n=o.getElementSize(o.render),s=n.width,r=n.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[o._multiViewUUID]||o.showModal.call(o)},handleFinish:function(t,e,i,n,s){var r="resize_bottom"===this.mode?1:-1;o.hideModal.call(o);var a=parseInt(o.getStyle("width"),10),d=parseInt(o.getStyle("height"),10),h=parseInt(o.getStyle("left"),10),l=parseInt(o.getStyle("top"),10),p=d+n*r;p<parseInt(o.windowInfo.minHeight,10)&&(p=parseInt(o.windowInfo.minHeight,10));var u=o.getMaxSize(),w=u.height;r||(w=l+d),1==r?w-=o.render.offsetTop:w=Math.min(l+d,u.height);var c=o.render.clientHeight+n*r;if(w<p&&(p=w,1===r&&(n+=c-p)),WebSquare.idCache[o._multiViewUUID]&&1===o._direction){var m=WebSquare.idCache[o._multiViewUUID],f=parseInt(m.windowInfo.minHeight,10);p>w-f&&(p=w-f),m.setSize(null,parseInt(m.getStyle("height"),10)-p+d),m.setPosition(null,m.getPosition("top")+p-d)}else if("resize_up"===this.mode){var g=l-n*r;g<0&&(g=0),g+p>w&&(g=w-p),o.setPosition(h,g)}o.setSize(a,p)}})}if(this.options.dragResizableHeader){var y=e.match("w2window_resize_upRight"),b=e.match("w2window_resize_upLeft");if((y||b)&&(r.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){o=this
;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:y?"resize_upRight":"resize_upLeft",minWidth:o.windowInfo.minWidth,minHeight:o.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(o.render),i=WebSquare.style.getAbsoluteTop(o.render),n=o.getElementSize(o.render),s=n.width,r=n.height;return s=s-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){o.showModal.call(o)},handleFinish:function(t,e,i,n,s){o.hideModal.call(o);var r="resize_upRight"===this.mode?1:-1,a=parseInt(o.getStyle("width"),10),d=parseInt(o.getStyle("height"),10),h=o.render.offsetTop,l=o.render.offsetLeft,p=a+i*r,u=d-n;p<parseInt(o.windowInfo.minWidth,10)&&(p=parseInt(o.windowInfo.minWidth,10),1===r?i+=a-p:i=a-p),u<parseInt(o.windowInfo.minHeight,10)&&(n=d-(u=parseInt(o.windowInfo.minHeight,10)));var w,c,m=o.getMaxSize();1===r?(w=m.width-l,c=h+d):(w=Math.min(l+a,m.width),c=Math.min(h+d,m.height));var f=d-n;w<a+i*r&&(p=w),c<f&&(u=c,1===r&&(n+=f-u)),o.setSize(p,u);var g=h+n,y=l;-1===r&&(g=Math.max(g,0),y=Math.max(l+i,0)),g+u>=m.height&&(g=m.height-u),o.setPosition(y,g)}})}}}e=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleMouseupEvent=function(t){try{r.B.stopEvent(t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.handleFrameKeyupEvent=function(t){try{r.B.fireEvent(this,"onwindowkeyup",t)}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.checkLoadEvent=function(){try{if(this.frame&&this.frame.render){var t=this.frame.render.contentWindow;t.WebSquare&&t.WebSquare.scriptSectionExcuteFlag&&"executed"===t.WebSquare.scriptSectionExcuteFlag&&(a.D.clearInterval(this.id+"_checkLoadEvent"),a.D.fullViewed&&a.D.zoomed(t.document.body,"1"))}}catch(t){}},p.prototype.handleSelectStartEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)(!0!==this.options.enableHeaderSelect&&e.match("w2window_header")||e.match("w2window_status"))&&r.B.preventDefault(t);e=null}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setWindowTitle=function(t){try{var e=document.getElementById(this.id+"_header_title");if(e){if(e.innerHTML=t,this.options.windowTitle=t,this.options.windowTooltipDisplay&&this.render)document.getElementById(this.id+"_header").setAttribute("title",t);!0===this.options.useATagTitle&&e.setAttribute("title",t)}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setWindowHeaderHTML=function(t){try{if(t){try{var e=a.D.getGlobalFunction(t,this.scope_id);"function"==typeof e?e():e}catch(e){t}var i=this.getElementById(this.id+"_header");i&&(i.innerHTML=t,this.options.windowHeaderHTML=t)}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setButtonCondition=function(t,e,i){try{var o=this.buttons[Number(e)];if(o){var n=o.contentDom;i=a.D.getBoolean(i);switch(t){case"hidden":o.visisble=i,n.parentNode.style.display=i?"none":"inline-block";break;case"disabled":o.disable=i,i?this.addClass(n,"w2window_header_button_disabled"):this.removeClass(n,"w2window_header_button_disabled")}}}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setCloseButtonStatus=function(t){try{this.options.disableCloseButton=!a.D.getBoolean(t);var e=document.getElementById(this.id+"_close");this.options.disableCloseButton?this.addClass(e,"w2window_close_disabled"):this.removeClass(e,"w2window_close_disabled")}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype.setDataObject=function(t){try{this.frame?(this.frame.setDataObject(t),this._dataObject&&delete this._dataObject):this._dataObject=t}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype._getDataObject=function(){try{return this.frame?this.frame._getDataObject():this._dataObject}catch(t){
s.w.printStackTrace(t,null,this)}},p.prototype.finalize=function(){try{h.s.prototype.finalize.call(this),!0!==this._closed&&this.close({sync:!0,skipRemove:!0})}catch(t){s.w.printStackTrace(t,null,this)}},p.prototype._close=function(t){try{if(!this.options)return;var e={src:this.options.src,title:this.options.windowTitle,id:this.id};r.B.fireEvent(this,"onbeforeclose",e);var i=this.options.parent&&this.options.parent.options.spaIframeMaxSize>this.options.parent.storedFrame.length;if("iframe"==this.options.frameMode)if(i)this.frame.setSrc(WebSquare.net.getBlankXML());else{try{var o=n.v.getConfiguration("/WebSquare/clearMemory/@value");a.D.isIEAllVersion()&&"true"==o||this.frame.getWindow().WebSquare&&this.frame.getWindow().WebSquare.clearMemory()}catch(t){}this.frame.setSrc("about:blank")}if(r.B.fireEvent(this,"onclose",e),i){this.render&&(this.render.style.display="none");for(var d=!1,h=0;h<this.options.parent.storedFrame.length;h++)if(this.options.parent.storedFrame[h]==this.id){d=!0;break}d||this.options.parent.storedFrame.push(this.id)}else this.remove&&!0!==t&&("wframe"===this.options.frameMode&&r.B.fireEvent(this,"onwindowunload"),this.remove())}catch(t){s.w.printStackTrace(t,null,this),this._closed=!1}}}}]);