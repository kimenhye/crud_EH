(function(){var __webpack_modules__={2137:function(t,e,i){"use strict";function o(t,e,i,o,s,r,a){try{var n=t[r](a),l=n.value}catch(t){return void i(t)}n.done?e(l):Promise.resolve(l).then(o,s)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(s,r){var a=t.apply(e,i);function n(t){o(a,s,r,n,l,"next",t)}function l(t){o(a,s,r,n,l,"throw",t)}n(void 0)}))}}i.d(e,{Z:function(){return s}})},484:function(t,e,i){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i.d(e,{Z:function(){return o}})},7757:function(t,e,i){t.exports=i(5666)},1477:function(t,e,i){"use strict";i.d(e,{d:function(){return l}});var o,s=i(2137),r=i(484),a=i(7757),n=i.n(a),l={};l._binitImport=!1,l.useWebSquareLicense=!0,l.excludeSet=null,l.$integrity=function(t,e,i){if(void 0===t)return WebSquare.util&&WebSquare.util.watermark&&!WebSquare.$integiry.flag&&WebSquare.util.watermark("integrity check failed!!!"),WebSquare.$integiry.flag;!0===t?WebSquare.$integiry.passed.push(e):!1===t&&(WebSquare.$integiry.flag=!1,WebSquare.$integiry.failed.push({original:e,runtime:i}))},l.setFullViewInHtml=function(t,e,i){try{var o=function(){if(!l.onResizing){var e=null,i=window.innerWidth||document.body.clientWidth,o=window.innerHeight||document.body.clientHeight;if(null!==t&&"function"==typeof t){var s=t();if(null!==s&&"object"===(0,r.Z)(s)&&s.baseHeight&&s.baseWidth){var a=i/s.baseWidth,n=o/s.baseHeight;e=a>n?n:a}}null!=e&&(l.onResizing=!0,l.zoomed(document.body,e),document.body.style.width=s.baseWidth+"px",document.body.style.height=s.baseHeight+"px",l.onResizing=!1,l.fullViewed=!0,l.fullViewRatio=e)}},s=!0===(i=i||{}).resizeOnce,a=null,n={width:window.innerWidth||document.body.clientWidth,height:window.innerHeight||document.body.clientHeight};if(null!==t&&"function"==typeof t){var h=t();if(null!==h&&"object"===(0,r.Z)(h)&&h.baseHeight&&h.baseWidth){var d=n.width/h.baseWidth,u=n.height/h.baseHeight;a=d>u?u:d}}l.fullViewed=!0;var c=window.WebSquareExternal&&WebSquareExternal.w2xPath||WebSquare.net.getParameter("w2xPath")||WebSquare.w2xPath||l.configurationJSON[0].WebSquare["welcome-file"]["@value"];if("string"==typeof c&&c.indexOf(e)>=0){l.fullViewRatio=a,function(t){var e,i="body {-webkit-transform : scale("+t+");-moz-transform : scale("+t+");-ms-transform : scale("+t+");-o-transform : scale("+t+");transform : scale("+t+");transform-origin : 0 0;-ms-transform-origin : 0 0;width : "+h.baseWidth+"px;height : "+h.baseHeight+"px;}",o=WebSquare.document.getElementsByTagName("head")[0];l.fullViewClass=!0,l.fullViewClassCssText=i,l.fullViewRatio=t,WebSquare.core.browserCheck.ie?((e=document.createElement("style")).setAttribute("type","text/css"),e.styleSheet.cssText=i,o.appendChild(e)):((e=WebSquare.document.createElementNS("http://www.w3.org/1999/xhtml","style")).appendChild(document.createTextNode(i)),o.appendChild(e))}(a);var p=function(){WebSquare&&WebSquare.scriptSectionExcuteFlag&&"executed"===WebSquare.scriptSectionExcuteFlag&&(clearInterval(g),o(),s||WebSquare.getBody().event.addListener(window,"onresize",o))};p();var g=setInterval(p,70)}}catch(t){WebSquare.exception.printStackTrace(t)}},l.zoomed=function(t,e){if(WebSquare.core.browserCheck.moz&&t&&t.style)t.style.MozTransform="scale("+e+")",t.style.MozTransformOrigin="left top",l.fullViewRatio=e;else if(t&&t.style&&(t.style["-webkit-transform"]="scale("+e+")",t.style["-moz-transform"]="scale("+e+")",t.style["-ms-transform"]="scale("+e+")",t.style["-o-transform"]="scale("+e+")",t.style.transform="scale("+e+")",t.style["transform-origin"]="top left",l.fullViewRatio=e,l.fullViewClass)){l.fullViewClass=!1;for(var i=document.getElementsByTagName("style"),o=0;o<i.length;o++)if(i[o].innerHTML==l.fullViewClassCssText){document.getElementsByTagName("head")[0].removeChild(i[o]);break}}},l.globalEval=function(t,e){var i
;return e||(i=l.configurationJSON[0].WebSquare.eval||l.configurationJSON[0].WebSquare.executeScript)&&(i=i["@value"]),l._globalEval(t,{type:i||e})},l._globalEval=function(t,e){if(t&&"string"==typeof t)try{if(null==e&&(e={}),l.fixErrorLineNumber&&"internal"==e.type||"script"===e.type){l.fixErrorLineNumber&&l.globalEvalArr.push(t);var i=document.createElement("script");i.type="text/javascript",i.charset="UTF-8",i.text=t,i.setAttribute("data-wqInternal","true"),(document.head||document.getElementsByTagName("head")[0]||document.documentElement).appendChild(i)}else window.execScript&&""!==t?window.execScript(t):new Function(t)()}catch(i){var o=[],s="\n<<Internal JavaScript Source Block";if(t)for(var r=t.split(WebSquare.scriptIdentifier),a=r.length>1?1:0,n=1,h=0;h<r.length;h++)if(""!=r[h]){var d=r[h].split("\n"),u=d[0]+"",c=u.indexOf('";');c>0&&(u=d[0].substring(0,c),d[0]=d[0].substring(c+2)),1===a?o.push("\n"+s+" ["+u+"] Start>>"):o.push("\n"+s+" Start>>");for(var p=0,g=d.length;p<g;p++)o.push("\n"),o.push("["),o.push(l.fillZero(n,4)),o.push("]"),o.push(d[p]),n++;1===a?o.push(s+" ["+u+"] End>>"):o.push(s+" End>>")}e.path&&o.push("\n","xml page url:",e.path),this.printStackTrace(i,"bootloader.globalEval:","* message     : "+i.message+o.join(""))}},l._isCache=function(t){var e=!1;if(null==l.importCache[t]?l.importCache[t]=t:e=t,!0===l.useWebSquareLicense){var i=t;if(i.indexOf("uiplugin.")>=0&&(i=(i=i.replace(".","/"))+i.substring(i.indexOf("/"))+".js",l.importCache[i]))return i;if(!l.incrementalChunkImport)for(var o=0;o<WebSquare.allPluginArr.length&&0==e;o++)if(WebSquare.allPluginArr[o]==i){e=i;break}}return e},l._getloadPath=function(t,e){var i;!0===l.useWebSquareLicense?t.indexOf("/")>-1?"engine"==t.split("/")[0]||"uiplugin"==t.split("/")[0]?(void 0===e&&l.printLog("bootloader.imports [engine/uiplugin]["+t+"]"),i=l.loadPath2(t)):(void 0===e&&l.printLog("bootloader.imports [ext]["+t+"]"),i=t):"function"!=typeof l.parseObjPath(t)&&(void 0===e&&l.printLog("bootloader.imports [object]["+t+"]"),i=l.loadPath2(t)):t.indexOf("/")>-1?i=t:"function"!=typeof l.parseObjPath(t)&&(i=l.loadPath(t));return i},l.importAsync=function(){var t=(0,s.Z)(n().mark((function t(e,i){var o,s,r,a,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=l._isCache(e))){t.next=4;break}return t.abrupt("return",l.importCache[o]);case 4:if(r=i&&!0===i.import,!0===l.useWebSquareLicense)try{if(h=e,!0===l.useWebSquareLicense&&h.indexOf("uiplugin.")>=0&&(h=(h=h.replace(".","/"))+h.substring(h.indexOf("/"))+".js"),l.incrementalChunkImport&&WebSquare.allPluginArr.indexOf(h)>-1)for(;l.currentChunkNum<l.engineChunkNum&&!l.importCache[h];)l.importChunkPlugin(l.currentChunkNum++,l.engineChunkNum);else a=l._getloadPath(h),a=l.getEngineUri(a),s=r?WebSquare._dynamicImport(a):l.writeAsync(a)}catch(t){l.printStackTrace(t,"bootloader.imports ["+e+"]")}else try{a=l._getloadPath(e),a=l.getEngineUri(a),s=r?WebSquare._dynamicImport(a):l.writeAsync(a)}catch(t){l.printStackTrace(t,"bootloader.importAsync ["+e+"]")}return l.importCache[e]=s,t.next=9,s;case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),l.write=function(t,e,i){try{var o=document.head||document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script");s.type="text/javascript",e&&(s.charset=e),s.src=t,i&&(s.onload=function(){i()}),o.appendChild(s),o=null}catch(t){this.printStackTrace(t,"bootloader.write")}},l.writeAsync=function(){var t=(0,s.Z)(n().mark((function t(e,i){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.abrupt("return",new Promise((function(t,o){var s=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");r.type="text/javascript",i&&(r.charset=i),r.src=WebSquare._getModuleSrc(e),r.onload=function(){t()},r.onerror=function(){o()},s.appendChild(r),s=null})));case 5:t.prev=5,
t.t0=t.catch(1),this.printStackTrace(t.t0,"bootloader.write");case 8:case"end":return t.stop()}}),t,this,[[1,5]])})));return function(e,i){return t.apply(this,arguments)}}(),l.importChunkPlugin=function(t,e){if(!0===l.useWebSquareLicense)try{if(t>=e)return!1;var i=WebSquare.baseServletURI+"javascriptPluginAll.wq?";e=e||1;WebSquare.engineType&&(i+=WebSquare.engineType),(i=i+"idx="+t+"&chunkNum="+e).length>3&&(i=i.indexOf(".wq")>=0?l.getEngineVersionPostfix(i):1==WebSquare.WebSquareEngineCache?l.getEngineCachePostfix(i):l.getRandomPostfix(i));var o=l.getXMLHTTPObject();return o.open("GET",i,!1),o.send(null),l.globalEval(o.responseText),!0}catch(e){"",this.printStackTrace(e,"bootloader.importChunkPlugin ["+t+"]")}},l.importPluginAll=(0,s.Z)(n().mark((function t(){var e,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0,null!=l.importCache.ALL_PLUGIN){t.next=6;break}l.importCache.ALL_PLUGIN="ALL_PLUGIN",t.next=7;break;case 6:return t.abrupt("return",e);case 7:if(!0!==l.useWebSquareLicense){t.next=27;break}if(t.prev=8,i=WebSquare.baseServletURI+"javascriptPluginAll.wq",WebSquare.engineType&&(i=i+"?"+WebSquare.engineType.substring(0,WebSquare.engineType.length-1)),"/"!=i.charAt(0)&&0!=i.search(/http(s)?:\/\//)&&(i=WebSquare.baseServletURI+i),i.length>3&&(i=i.indexOf(".wq")>=0?l.getEngineVersionPostfix(i):1==WebSquare.WebSquareEngineCache?l.getEngineCachePostfix(i):l.getRandomPostfix(i)),"all"!==WebSquare.pluginCache){t.next=18;break}null==(o=l.loadUri(i))||""==o?e=1:l.globalEval(o),t.next=21;break;case 18:return WebSquare.startApplication=function(){},t.next=21,l.writeAsync(i,void 0,(function(){l._afterEngineLoad(),window.WebSquareExternal&&!0===window.WebSquareExternal._onload&&WebSquare.startApplication()}));case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(8),e=2,l.printLog("bootloader.importPluginAll module imports failure.");case 27:return t.abrupt("return",e);case 28:case"end":return t.stop()}}),t,null,[[8,23]])}))),l.requires=function(t){try{"function"!=typeof l.parseObjPath(t)&&(1==WebSquare.hybridApp&&WebSquare.WebSquaredoc&&!0===l.useWebSquareLicense&&("string"!=typeof t||"uiplugin"!==t.slice(0,8)&&"engine"!==t.slice(0,6)||(t=l.getEngineUri("HybridPluginAll_ui_4.js"))),imports(t))}catch(t){l.printStackTrace(t,"bootloader.requires")}},l.requireAsync=function(){var t=(0,s.Z)(n().mark((function t(e){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,"string"==typeof e){t.next=4;break}return t.abrupt("return");case 4:if("uiplugin."!==(e=e.wq_trim()).slice(0,9)&&"engine."!==e.slice(0,7)){t.next=7;break}return t.abrupt("return",WebSquare._loadModuleDynamic(e));case 7:if((i=l.parseObjPath(e))&&"{}"!==JSON.stringify(i)){t.next=11;break}return t.next=11,l.importAsync(e);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),l.printStackTrace(t.t0,"bootloader.requires");case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),l.inquires=function(){var t=(0,s.Z)(n().mark((function t(e){var i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=l.parseObjPath(e),o=l.inquiresPath(e),"function"==typeof i){t.next=7;break}return t.next=7,l.importAsync(o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),l.printStackTrace(t.t0,"bootloader.inquires");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),l.inquiresPath=function(t){return WebSquare.sp5ResourcePath+"/"+t},l.parseObjPath=function(t,e){try{var i=function(t){if("object"!==(0,r.Z)(t))return!1;if(t===WebSquare||t===WebSquare.uiplugin)return!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},o=t.replace(/\//g,"."),s=null!=e?e:WebSquare,a="";a=o.startsWith("engine")?o.replace("engine.","").split("."):o.startsWith("control")?o.replace("control.","").split("."):o.startsWith("uiplugin.pivot.")?o.replace("uiplugin.pivot.","uiplugin.").split("."):o.split(".")
;for(var n=0,h=a.length;n<h&&i(s);n++)s=l.evalProp(a[n],s);return s}catch(t){this.printStackTrace(t,"bootloader.parseObjPath")}},l.loadPath=(o={},function(t){try{if(!o[t])if("js"===t.slice(-2))o[t]=t;else{var e=t.split(".");e[e.length]=e[e.length-1]+".js",o[t]=e.join("/")}return o[t]}catch(t){l.printStackTrace(t,"bootloader.loadPath")}}),l.loadPath2=function(t){try{return t}catch(t){this.printStackTrace(t,"bootloader.loadPath")}},l.evalProp=function(t,e){try{var i={};return e&&l.isDef(t,e)&&(i=e[t]),i}catch(t){this.printStackTrace(t,"bootloader.evalProp")}},l.loadUri=function(t){var e=null;try{if("false"===WebSquare.pluginCache)e=this.getText(t)||"";else if("all"===WebSquare.pluginCache)try{for(var i=self,o=0;null!=i.opener;)if(o++,i=i.opener,o>100)throw{message:"opener limit exceeded"};null==i.top[WebSquare.pluginCacheVariable]&&(i.top[WebSquare.pluginCacheVariable]={}),null==i.top[WebSquare.pluginCacheVariable][t]?(e=this.getText(t),i.top[WebSquare.pluginCacheVariable][t]=e.toString().slice(0)):e=i.top[WebSquare.pluginCacheVariable][t]}catch(i){e=this.getText(t)||""}else if(void 0===(e=l.PluginCache[t])){try{window.opener&&window.opener.WebSquare?null!=(e=window.opener.WebSquare.BootLoader.loadUri(t))&&""!=e||(e=this.getText(t)):window.parent!==window.self&&window.parent.WebSquare&&null!=(e=window.parent.WebSquare.BootLoader.loadUri(t))&&""!=e||(e=this.getText(t))}catch(i){e=this.getText(t)}null!=e&&""!=e&&l.setPluginCache(t,e)}}catch(t){this.printStackTrace(t,"bootloader.loadUri")}return e},l.getText=function(t){try{var e=t,i=this.getXMLHTTPObject();try{if(function(t,e){try{t=l.getEngineUri(t),e.open("GET",t,!1)}catch(t){}}(t,i),i.send(null),i.status>="400")return e.indexOf("uiplugin")>-1?l.printError("Plugin ["+e+"] Does not exist."):l.printError("Module ["+e+"] Does not exist."),i=null,null}catch(t){e.indexOf("uiplugin")>-1?l.printError("Plugin ["+e+"] Does not exist."):l.printError("Module ["+e+"] Does not exist.")}var o=i.responseText;return i=null,o}catch(e){this.printStackTrace(e,"bootloader.getText("+t+")")}},l.getXMLHTTPObject=function(t){try{var e=null;try{l.useActiveXObject&&!0!==t?e=new ActiveXObject(l._XMLHTTP_PROGIDS[0]):window.XMLHttpRequest&&(e=new XMLHttpRequest)}catch(t){this.printStackTrace(t,"bootloader.getXMLHTTPObject")}return void 0===e||null==e?(l.printError("This Browser does not support Ajax."),null):e}catch(t){this.printStackTrace(t,"bootloader.getXMLHTTPObject")}},l.isDef=function(t,e){try{return null==e&&(e=window),null!=e[t]&&void 0!==e[t]}catch(t){this.printStackTrace(t,"bootloader.isDef")}},l.printError=function(t){try{if(!0===WebSquare.skipLog)return;void 0!==WebSquare.logger&&void 0!==WebSquare.logger.printLog?WebSquare.logger.printLog("[WebSquare BootLoader Error]\n\n"+t):l.printLog("[WebSquare BootLoader Error]\n\n"+t)}catch(e){l.printLog("[WebSquare BootLoader Error]\n\n"+t)}},l.printStackTrace=function(t,e,i){if(!0!==WebSquare.skipLog){var o="";for(var s in t){var r=s+"               ";r=r.substring(0,15),o+="number"==s?r+":"+(65535&t[s])+"\n":r+":"+t[s]+"\n"}o=void 0===i?e+" Error occurs during the execution. \n\n"+o:e+" Error occurs during the execution.  \n"+i+"\n\n"+o;try{void 0!==WebSquare.logger&&void 0!==WebSquare.logger.printLog?(WebSquare.logger.printLog(o),t&&void 0===t.aleradyThrow&&(t.aleradyThrow="djshin")):l.printLog(o),!0===WebSquare.errorConsole&&console.error(o);var a=WebSquare.core.getConfiguration("/WebSquare/debug/@errorHandler"),n=WebSquare.util.getGlobalFunction(a);n&&n(t,t.message)}catch(t){l.printLog(o)}}},l.setPluginCache=function(t,e){l.PluginCache[t]=e},l.browserCheck=function(){return navigator.appName},l.engineLoadingMode={ie:1,moz:1,opera:1,android:1,iphone:1,blackberry:1,chrome:1,safari:1,mode:1},l.browserCheck.ie=null!=navigator.appName.match(/Explorer/i),l.browserCheck.ieAllVersion=null!=navigator.appName.match(/Explorer/i)||null!=navigator.userAgent.match(/Trident/i)||null!=navigator.userAgent.match(/MSIE/i),
l.browserCheck.moz=null!=navigator.userAgent.match(/Firefox/i)||null!=navigator.userAgent.match(/Gecko/i)&&null==navigator.userAgent.match(/AppleWebKit/i)&&null==navigator.userAgent.match(/Trident/i),l.browserCheck.opera=null!=navigator.userAgent.match(/Opera/i),l.browserCheck.android=/Android/.test(navigator.userAgent),l.browserCheck.iphone=/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform),l.browserCheck.ipad=/iPad/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!window.MSStream,l.browserCheck.ipod=/iPod/.test(navigator.userAgent),l.browserCheck.blackberry=/BlackBerry/.test(navigator.userAgent),l.browserCheck.chrome=!l.browserCheck.ie&&/Chrome/.test(navigator.userAgent),l.browserCheck.chromeEdge=!l.browserCheck.ie&&/Chrome/.test(navigator.userAgent)&&/Edg/.test(navigator.userAgent),void 0!==navigator.vendor?l.browserCheck.safari=navigator.vendor.indexOf("Apple")>-1:l.browserCheck.safari=!1,l.browserCheck.ffox=/Firefox/.test(navigator.userAgent),l.browserCheck.spartan=/Edge/.test(navigator.userAgent),l.browserVersion=function(){try{if(l.browserCheck.ieAllVersion){if(document.documentMode)return document.documentMode+"";if("2"==navigator.appVersion.charAt(0))return"2";if("3"==navigator.appVersion.charAt(0))return"3";if("4"==navigator.appVersion.charAt(0))return-1!=navigator.appVersion.indexOf("MSIE 9")?"9":-1!=navigator.appVersion.indexOf("MSIE 8")?"8":-1!=navigator.appVersion.indexOf("MSIE 7")?"7":-1!=navigator.appVersion.indexOf("MSIE 6")?"6":-1!=navigator.appVersion.indexOf("MSIE 5.5")?"5.5":-1!=navigator.appVersion.indexOf("MSIE 5.0")?"5.0":"4";if("5"==navigator.appVersion.charAt(0))return"5"}else{if(2==navigator.appVersion.charAt(0))return"2";if(3==navigator.appVersion.charAt(0))return"3";if(4==navigator.appVersion.charAt(0))return"4";if(5==navigator.appVersion.charAt(0))return"6"}return""}catch(t){this.printStackTrace(t,"bootloader.browserVersion")}},l.printLog=function(t){try{if(!0===WebSquare.skipLog||!WebSquare.logEnableFlag)return;if(!window.console){var e=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<e.length;++i)window.console[e[i]]=function(){}}WebSquare.logMsgArray.length>500&&(delete WebSquare.logMsgArray,WebSquare.logMsgArray=[],WebSquare.logMsgArray.push(l.getLogTime()+" BootLoader] Delete logs for reducing memory usage."));var o=l.getLogTime(),s=" BootLoader] "+t;WebSquare.logMsgArray.push(o+s),WebSquare.printConsole&&console.log(o+s),WebSquare.remoteConsole&&WebSquare.remoteLogMsgArray.push(o+WebSquare.logFileName+s)}catch(t){}},l.getLogTime=function(t){var e=null,i=(e="undefined"==t||null==t?new Date:new Date(t)).getTime(),o=i-WebSquare.logTime,s=l.fillZero(e.getHours(),2)+":"+l.fillZero(e.getMinutes(),2)+":"+l.fillZero(e.getSeconds(),2)+"."+l.fillZero(e.getMilliseconds(),3);return o<1e5?(WebSquare.logTotalTime+=o,s+=" "+l.fillZero(o,5)+" "+l.fillZero(WebSquare.logTotalTime,6)):s+=" 00000 000000",WebSquare.logTime=i,s},l.fillZero=function(t,e){var i,o=t+"";if(isNaN(o))return t;if(o.length>=e)return o;for(i=e-o.length;i>0;)switch(i){case 1:i=0,o="0"+o;break;case 2:i=0,o="00"+o;break;case 3:i=0,o="000"+o;break;case 4:i=0,o="0000"+o;break;case 5:i=0,o="00000"+o;break;case 6:i=0,o="000000"+o;break;case 7:i=0,o="0000000"+o;break;case 8:i=0,o="00000000"+o;break;case 9:i=0,o="000000000"+o;break;case 10:i=0,o="0000000000"+o;break;case 11:i=0,o="00000000000"+o;break;case 12:i=0,o="000000000000"+o;break;case 13:i=0,o="0000000000000"+o;break;case 14:i=0,o="00000000000000"+o;break;case 15:i=0,o="000000000000000"+o;break;default:i-=15,o="000000000000000"+o}return o},l.getParameter=function(t,e,i){try{var o=t.indexOf("?");if(o>=0)for(var s=t.substring(o+1).split("&"),r=0;r<s.length;r++){var a=s[r].split("=");if(2==a.length&&a[0]==e)return""==a[1]&&void 0!==i?i:a[1]}}catch(t){l.printStackTrace(t,"bootloader.getParameter")}
return void 0!==i?i:""},l.getSignature=function(t,e){if(void 0===e&&(e=0),e>5)return"...(omission)";if(null==t||"null"==t)return"";try{var i="";null!=t.caller&&t.toString()!=t.caller.toString()&&(i=l.getSignature(t.caller,++e));var o,s=t.toString(),r=s.indexOf('["');return-1==r?-1==(o=s.indexOf(")"))?"    at "+s+"\n"+i:"    at "+s.substring(0,o+1)+"\n"+i:-1==(o=s.indexOf('"',r+2))?"    at "+s+"\n"+i:"    at "+s.substring(r+2,o)+"\n"+i}catch(e){return t}},l.getImagePostfix=function(t){try{!0===l.useWebSquareLicense&&(t=l.getImageVersionPostfix(t))}catch(t){}return t},l.getEngineUri=function(t){return"/"!=t.charAt(0)&&0!=t.search(/http(s)?:\/\//)&&0!=t.search(/file:\/\//)&&(t=t.indexOf(".wq")>=0?WebSquare.baseServletURI+t:WebSquare.baseURI+t),1==WebSquare.hybridApp?("/"==t.charAt(0)&&""!=WebSquare.w2xDocumentRoot&&(t=WebSquare.w2xDocumentRoot+t),t):(t.length>3&&(t.indexOf(".wq")>=0?t=l.getEngineVersionPostfix(t):1==WebSquare.WebSquareEngineCache&&(t=l.getEngineCachePostfix(t))),t)},l._getEncodeURL=function(t){try{if(!WebSquare.BootLoader.browserCheck.ieAllVersion||"string"!=typeof t)return t;for(var e=t,i=0;i<t.length;i++)if(t.charCodeAt(i)>127){e=encodeURIComponent(t).replace(/%2F/g,"/");break}return e}catch(e){return t}},l.openResourceUri=function(t,e){try{if(WebSquare.isHoneyComb)e.open("GET",t,!1);else{var i=l.getResourcePostfix(t);e.open("GET",i,!1)}}catch(t){}return t},l.getResourcePostfix=function(t){try{var e=l.generateSuffixPostfix(t);e&&"object"==(0,r.Z)(WebSquare.suffix)?t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e:t=0==WebSquare.WebSquareCache?l.getRandomPostfix(t):l.getResourceCachePostfix(t)}catch(t){}return t},l.getImageVersionPostfix=function(t){try{var e=l.generateSuffixPostfix(t);e?t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e:null!=l.imageVersion&&(t.indexOf("?")>-1?t+="&postfix="+l.imageVersion:t+="?postfix="+l.imageVersion)}catch(t){}return t},l.getEngineVersionPostfix=function(t){try{t.indexOf("?")>-1?t+="&postfix="+WebSquare.ver:t+="?postfix="+WebSquare.ver,t.indexOf("?")>-1?t+="&compression="+l.compression:t+="?compression="+l.compression,WebSquare.buildID&&(t.indexOf("?")>-1?t+="&build="+WebSquare.buildID:t+="?build="+WebSquare.buildID),window.WebSquarePluginOrderHash&&(t.indexOf("?")>-1?t+="&poh="+window.WebSquarePluginOrderHash:t+="?poh="+window.WebSquarePluginOrderHash)}catch(t){}return t},l.getRandomPostfix=function(t){try{if(t.toLowerCase().indexOf("jpg")>-1||t.toLowerCase().indexOf("png")>-1||t.toLowerCase().indexOf("gif")>-1||t.toLowerCase().indexOf("jpeg")>-1)return t;t.indexOf("?")>-1?t+="&postfix="+(new Date).getTime()+1e4*Math.random():t+="?postfix="+(new Date).getTime()+1e4*Math.random()}catch(t){}return t},l.getResourceCachePostfix=function(t){try{var e=l.generateSuffixPostfix(t);if(e)t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e;else if(l.resourcePostfix){for(var i=0;i<l.resourcePostfixKey.length;i++)if(t.indexOf(l.resourcePostfixKey[i])>-1)return t.indexOf("?")>-1?t+="&postfix="+l.resourcePostfixValue[i]:t+="?postfix="+l.resourcePostfixValue[i],t;t.indexOf("?")>-1?t+="&postfix="+l.resourcePostfix:t+="?postfix="+l.resourcePostfix}}catch(t){}return t},l.getEngineCachePostfix=function(t){try{var e=l.generateSuffixPostfix(t);e?t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e:l.enginePostfix&&(t.indexOf("?")>-1?t+="&postfix="+l.enginePostfix:t+="?postfix="+l.enginePostfix)}catch(t){}return t},l.rebuildInnerHTML=function(t,e){t.innerHTML=e},l.addObjStr=function(t,e){t.insertAdjacentHTML("beforeEnd",e)},l.generateSuffixPostfix=function(t){var e="";if(WebSquare.suffix&&""!=WebSquare.suffix){if("string"==typeof WebSquare.suffix)try{var i=JSON.parse(WebSquare.suffix);if("object"!=(0,r.Z)(i))return WebSquare.suffix;WebSquare.suffix=i}catch(t){return WebSquare.suffix}try{var o=["day","week","month","year","random"],s=[],a=new Date;s.push(a.getDate()<=9?"0"+a.getDate():""+a.getDate());var n=Math.ceil((a.getDate()-a.getDay())/7);if(0==n){a.setDate(1),a.setTime(a.getTime()-864e5),
n=Math.ceil((a.getDate()-a.getDay())/7)}s.push(n),s.push(a.getMonth()<9?"0"+(a.getMonth()+1):""+(a.getMonth()+1)),s.push(a.getFullYear()),s.push(a.getTime()+1e4*Math.random());for(var l=function(t){if(t.indexOf("$")<0)return t;for(var e=0;e<o.length;e++)for(var i=t.indexOf("${"+o[e]+"}");i>=0;)i=(t=t.substring(0,i)+s[e]+t.substring(i+o[e].length+3)).indexOf("${"+o[e]+"}",i);return t},h=WebSquare.suffix.suffix,d=0;d<h.length;d++){var u=!0;if(h[d].path&&(u=!1,t.indexOf(h[d].path)>=0&&(u=!0)),u){var c="defaults",p={extension:"",defaults:""};if(h[d]){for(var g in h[d]){var m=g;if("default"===g&&(m=c),m==c&&(p[m]=l(h[d][m])),"extension"==m){var f=t.substring(t.lastIndexOf(".")+1);f.indexOf("?")>0&&(f=f.substring(0,f.indexOf("?"))),h[d].extension[f]&&(p[m]=l(h[d].extension[f]))}}e=""==p.extension&&""!=p.defaults?p.defaults:p.extension}if(e)break}}}catch(t){}}return e},l.generatePostfix=function(t){try{if(WebSquare.suffix&&""!=WebSquare.suffix&&"string"==typeof WebSquare.suffix)t=WebSquare.suffix;else if("day"==t){var e=(o=new Date).getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1),i=o.getDate()<=9?"0"+o.getDate():""+o.getDate();t=o.getFullYear()+"_"+e+"_"+i}else if("week"==t){var o=new Date,s=Math.ceil((o.getDate()-o.getDay())/7);if(0==s){o.setDate(1),o.setTime(o.getTime()-864e5),s=Math.ceil((o.getDate()-o.getDay())/7)}e=o.getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1);t=o.getFullYear()+"_"+e+"_W"+s}else if("month"==t){e=(o=new Date).getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1);t=o.getFullYear()+"_"+e}else if(t.indexOf("hour")>-1){o=new Date;var r=t.wq_replaceAll("hour","").wq_trim(),a=parseInt(r,10);o.setHours(o.getHours()+a);e=o.getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1),i=o.getDate()<=9?"0"+o.getDate():""+o.getDate();var n=o.getHours()<=9?"0"+o.getHours():""+o.getHours();t=o.getFullYear()+"_"+e+"_"+i+"_"+n}}catch(t){}return t},l.loadLanguagePack=(0,s.Z)(n().mark((function t(){var e,i,o,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.getBrowserLanguage(),"ko"==(e=WebSquare.cookie.getCookie("system_language")||e||WebSquare.core.getConfiguration("language"))?o="message/ko.js":"cn"==e||"zh"==e?o="message/cn.js":(s=WebSquare.clientLang,o=""==s?"message/en.js":"message/"+s+".js"),o=l.inquiresPath(o),!l._isCache(o)){t.next=6;break}return t.abrupt("return");case 6:return i=l._getloadPath(o),i=l.getEngineUri(i),t.next=10,l.writeAsync(i,"UTF-8");case 10:case"end":return t.stop()}}),t)}))),l.getBrowserLanguage=function(){try{var t=navigator.language||navigator.browserLanguage;return t.indexOf("-")>-1&&(t=t.substring(0,t.indexOf("-"))),t}catch(t){l.printLog("bootloader.getLanguage failure.")}},l.loadEngineModuleAsync=function(){var t=(0,s.Z)(n().mark((function t(e){var i,o,s,r,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=WebSquare.core.getChildConfiguration("/WebSquare/engine",{singleMode:!0}),o=0,s=i.length;case 2:if(!(o<s)){t.next=19;break}if(r=i[o],a=r["@src"]){t.next=7;break}return t.abrupt("continue",16);case 7:if(void 0!==WebSquare.moduleList[a]&&null!==WebSquare.moduleList[a]||(WebSquare.moduleList[a]=1),!(e&&WebSquare.moduleList[a]>1&&"false"!=r.cache)){t.next=10;break}return t.abrupt("continue",16);case 10:return"false"==WebSquare.core.getConfiguration("/WebSquare/spa/scriptCache/@value").toLowerCase()&&"true"!=r.cache||WebSquare.moduleList[a]++,"false"==r.cache&&(WebSquare.moduleList[a]=0),1==WebSquare.hybridApp&&"/"==a.charAt(0)&&""!=WebSquare.w2xDocumentRoot&&(a=WebSquare.w2xDocumentRoot+a),a=0==WebSquare.WebSquareCache?l.getRandomPostfix(a):l.getResourceCachePostfix(a),t.next=16,l.writeAsync(a,r.charset);case 16:o++,t.next=2;break;case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l.loadUdcRequires=(0,s.Z)(n().mark((function t(){var e,i,o,s,r,a,l,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=WebSquare.core.getChildConfiguration("/WebSquare/udc/requires",{singleMode:!0}),i=0,
o=e.length;case 2:if(!(i<o)){t.next=19;break}if(s=e[i],r=WebSquare.core.getPageURL(s["@src"]),a=s["@type"],l=s["@as"],"page"!==a||!l){t.next=15;break}if(null!=WebSquare.core.udcObj[l]){t.next=13;break}return h=WebSquare.core.getPageURL(r),t.next=12,WebSquare.jsLoader._loadObj(h);case 12:WebSquare.core.udcObj[l]=t.sent;case 13:t.next=16;break;case 15:WebSquare.util.loadUserComponent(r);case 16:i++,t.next=2;break;case 19:case"end":return t.stop()}}),t)}))),l.loadInheritRequires=function(){for(var t=WebSquare.core.getChildConfiguration("/WebSquare/inherit/requires",{singleMode:!0}),e=0,i=t.length;e<i;e++){var o=t[e];WebSquare.util.loadInheritComponent(o["@src"])}},l.initJSONConfig=function(){for(var t=!1,e=l.configurationJSON.length-1;e>=0;e--){var i=l.configurationJSON[e];for(var o in i.WebSquare){var s=i.WebSquare[o];if("[object Array]"===Object.prototype.toString.call(s)&&(s=s[0]),"engineCache"==o)"true"==s["@enable"]&&(WebSquare.WebSquareEngineCache=!0,l.enginePostfix=l.generatePostfix(s["@postfix"])),"false"==s["@compression"]?l.compression=!1:"always"==s["@compression"]?l.compression="always":l.compression=!0,"false"===s["@pluginCache"]?WebSquare.pluginCache="false":"all"===s["@pluginCache"]&&(WebSquare.pluginCache="all");else if("imageCache"==o&&"true"==s["@enable"])l.imageVersion=l.generatePostfix(s["@version"]),l.imageServlet=s["@serverUrl"],l.imageHostUrl=s["@hostUrl"],""==l.imageServlet&&(l.imageServlet=WebSquare.baseServletURI+"resource.wq?url="),l.imageHostUrl&&("http"==l.imageHostUrl.substring(0,4)&&(l.imageHostUrl=l.imageHostUrl.substring(7)),"/"==!l.imageHostUrl.substring(l.imageHostUrl.length-"/".length,l.imageHostUrl.length)&&(l.imageHostUrl=l.imageHostUrl+"/"));else if("license"==o)s["@value"],l.useWebSquareLicense=!0;else if("xhr"==o)t=!0,l.browserCheck.ieAllVersion&&("false"==s["@useActiveXObject"]?l.useActiveXObject=!1:l.useActiveXObject=!0),"true"==s["@useResponseXML"]&&(l.useResponseXML=!0);else if("debug"==o)"true"==s["@console"]&&window.console&&(WebSquare.printConsole=!0),"true"==s["@remoteConsole"]&&(WebSquare.remoteConsole=!0),"true"==s["@errorConsole"]&&(WebSquare.errorConsole=!0),"true"==s["@fixErrorLineNumber"]&&(l.fixErrorLineNumber=!0),"true"==s["@weinre"]&&(WebSquare.useWeinre=!0,null!=s["@weinreUrl"]&&""!=s["@weinreUrl"]&&(WebSquare.weinreUrl=s["@weinreUrl"])),"true"==s["@skipLog"]&&(WebSquare.skipLog=!0),"true"==s["@printError"]&&(WebSquare.printError=!0);else if("environment"==o){if("nocache"==s["@cache"])WebSquare.WebSquareCache=!1;else for(var r in l.resourcePostfix=l.generatePostfix(s["@postfix"]),WebSquare.WebSquareCache=!0,l.resourcePostfixKey=[],l.resourcePostfixValue=[],s){var a=s[r];"[object Array]"===Object.prototype.toString.call(a)&&(a=a[0]),"postfix"==r&&(l.resourcePostfixKey.push(a["@key"]),l.resourcePostfixValue.push(l.generatePostfix(a["@value"])))}"development"==s["@mode"]&&(window._alert=function(t){alert(t)}),s["@buildID"]&&""==WebSquare.buildID&&(WebSquare.buildID=s["@buildID"])}else if("engineLoadingMode"==o){var n={ie:parseInt(s["@ie"],10),moz:parseInt(s["@moz"],10),opera:parseInt(s["@opera"],10),android:parseInt(s["@android"],10),iphone:parseInt(s["@iphone"],10),blackberry:parseInt(s["@blackberry"],10),chrome:parseInt(s["@chrome"],10),safari:parseInt(s["@safari"],10)};for(var r in n){var h=n[r];h>=0&&h<=3&&(l.engineLoadingMode[r]=h)}}else if("engineChunkNum"==o){var d=parseInt(s["@value"],10),u=s.incremental&&"true"===s.incremental["@value"];l.engineChunkNum=d||1,l.currentChunkNum=0,l.incrementalChunkImport=u}else if("userAgentPattern"==o)for(var r in s)r.length>1&&"@"==r.charAt(0)&&s[r]&&(WebSquare.userAgentPattern[r.substring(1)]=s[r]);else if("noConflict"==o)s["@value"]&&(WebSquare.noConflict=s["@value"]),s["@function"]&&(WebSquare.noConflictFunction=s["@function"]);else if("stylesheet"==o){if("link"==s["@import"]&&(WebSquare.styleSheetEarlyImport=1,"false"!=s["@enable"]&&(WebSquare.styleSheetEarlyImport=2,
WebSquare.styleSheetEarlyImportName=s["@value"]||"stylesheet_ext.css")),s["@earlyImportList"])for(var r in WebSquare.styleSheetEarlyImportList=s["@earlyImportList"].split(","),WebSquare.styleSheetEarlyImportList)WebSquare.styleSheetEarlyImportList[r]=WebSquare.styleSheetEarlyImportList[r].wq_trim()}else"scriptLoading"==o?"false"==s["@merge"]&&(l.traceWframe=!0):"strictMode"==o||"convertPageXML"==o?s["@value"]:"pageURLPrefix"===o&&(WebSquare.pageURLPrefix=s["@value"]||"",WebSquare.pageURLPrefixType=s["@type"]||"")}}t||l.browserCheck.ieAllVersion},l.setBaseThemeURI=function(){WebSquare.w2xTheme=window.WebSquareExternal.w2xTheme||l.getParameter(location.search,"w2xTheme",""),WebSquare.w2xTheme?l.setCookie("w2xTheme",WebSquare.w2xTheme):WebSquare.w2xTheme=l.getCookie("w2xTheme");var t=WebSquare.baseURI;if(l.configurationJSON[0].WebSquare.theme){WebSquare.w2xTheme=WebSquare.w2xTheme||l.configurationJSON[0].WebSquare.theme["@default"];var e=l.configurationJSON[0].WebSquare.theme.name||[];if("[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<e.length;i++)if(e[i]["@value"]===WebSquare.w2xTheme){t=e[i]["@path"];break}}else t=e["@path"]}0===t.indexOf("/")||t.match(/^http:\/\//)?WebSquare.baseThemeURI=t:WebSquare.baseThemeURI+=t},l.mergeJSON=function(t,e){try{for(var i in e){var o=e[i];switch((0,r.Z)(t[i])){case"object":if(t[i].constructor==Array)if((WebSquare.core.getConfiguration("/WebSquare/useAppConfig/@value")||!1)&&"column"==i)for(var s=t[i],a=0;a<s.length;a++)s[a]["@inputType"]==e[i]["@inputType"]&&WebSquare.extendKeepingType(s[a],e[i]);else t[i].push(e[i]);else l.mergeJSON(t[i],o);continue}t[i]=o}return t}catch(t){this.printStackTrace(t)}},l.getCookie=function(t){try{for(var e=WebSquare.document.cookie.split("; "),i=0;i<e.length;i++){var o=e[i].split("=");if(t==o[0])return 1==o.length?"":unescape(o[1])}}catch(t){this.printStackTrace(t)}return null},l.setCookie=function(t,e){WebSquare.document.cookie=t+"="+escape(e)+";path=/"},l._afterEngineLoad=function(){var t=(0,s.Z)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.prev=1,t.next=4,l.loadEngineModuleAsync();case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:return t.next=10,l.loadUdcRequires();case 10:l.loadInheritRequires(),WebSquare._loadCSS(),t.next=17;break;case 14:t.prev=14,t.t1=t.catch(0),this.printStackTrace(t.t1);case 17:return t.abrupt("return",null);case 18:case"end":return t.stop()}}),t,this,[[0,14],[1,6]])})));return function(e){return t.apply(this,arguments)}}(),l.loadAsync=function(){var t=(0,s.Z)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){var o=l.getXMLHTTPObject();o.open("GET",e,!0);var s=function(e){4===o.readyState&&(o.status>="400"||0===o.status?i(o.statusText):t(o.responseText),o=null)};l.useActiveXObject?o.onreadystatechange=s:(o.onload=s,o.onerror=function(t){i(o.statusText),o=null}),o.send(null)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l._initSuffix=(0,s.Z)(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="suffix.txt",window.WebSquareExternal&&window.WebSquareExternal.suffixName&&(e=window.WebSquareExternal.suffixName),t.abrupt("return",new Promise((function(t,i){var o;try{o=WebSquare.BootLoader.getXMLHTTPObject();var s=WebSquare.baseURI+e+"?postfix="+(new Date).getTime()+1e4*Math.random();o.open("GET",s,!0),o.setRequestHeader("Cache-Control","no-cache"),o.onreadystatechange=function(){4==o.readyState&&(WebSquare.suffix=o.responseText.wq_trim(),t())},o.send()}catch(t){i()}})));case 3:case"end":return t.stop()}}),t)}))),l._initImport=(0,s.Z)(n().mark((function t(){var e,i,o,s,a,h,d,u,c,p;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==l._binitImport){t.next=3;break}return t.abrupt("return");case 3:l._binitImport=!0,l.PluginCache={},
l.stopCheckOpener=!1,l.stopCheckParentFrame=!1,l._XMLHTTP_PROGIDS=["Microsoft.XMLHTTP"],l._MSMXL_PROGIDS=["Microsoft.XMLDOM"],l.useActiveXObject=!1,l.useResponseXML=!1,l.useWebSquareXMLParser=!1,l.useWebSquareXPathParser=!1,l.configurationJSON=[],l.fixErrorLineNumber=!1,l.traceWframe=!1,l.globalEvalArr=[],l.performanceCheck={},void 0!==WebSquare.externalOption.startDate?l.performanceCheck.start=WebSquare.externalOption.startDate:l.performanceCheck.start=new Date,l.performanceCheck.mid1=l.performanceCheck.start,l.performanceCheck.mid2=l.performanceCheck.start,l.performanceCheck.mid3=l.performanceCheck.start,l.performanceCheck.mid4=l.performanceCheck.start,l.performanceCheck.mid5=l.performanceCheck.start,l.performanceCheck.mid6=l.performanceCheck.start,l.performanceCheck.mid7=l.performanceCheck.start,l.performanceCheck.mid8=l.performanceCheck.start,l.performanceCheck.mid9=l.performanceCheck.start,l.performanceCheck.end=l.performanceCheck.start,WebSquare.renderStartTime=l.performanceCheck.mid1,l.ifModifiedSince="Tue, 24 Jan 2006 01:13:57 GMT",function(){},window.WebSquareExternal.skipLog&&(WebSquare.skipLog=window.WebSquareExternal.skipLog),WebSquare.logEnableFlag=!0,window.WebSquareExternal.disableLog&&(WebSquare.logEnableFlag=!window.WebSquareExternal.disableLog),"file"===location.protocol&&(l.useWebSquareLicense=!1),t.next=41;break;case 38:t.prev=38,t.t0=t.catch(0),l.printStackTrace(t.t0,"Initialize baseURI");case 41:if(e=window.WebSquareExternal.useNativeParser&&l.browserCheck.ieAllVersion&&l.browserVersion()>=9,l.browserCheck.ieAllVersion&&!e){try{"object"==(0,r.Z)(window.external)&&void 0!==window.external.msActiveXFilteringEnabled&&"unknown"!=typeof window.external.msActiveXFilteringEnabled&&1==window.external.msActiveXFilteringEnabled()&&(WebSquare.msActiveXFilteringEnabled=!0)}catch(t){}try{WebSquare.msActiveXFilteringEnabled,l.useActiveXObject=!1}catch(t){l.useActiveXObject=!1}}if(WebSquare._initImportFunction(),l.importCache={},l.imageServlet=null,l.imageHostUrl=null,l.compression=!0,l.browserCheck.ie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}t.prev=49,i="./",o=!1;try{new Function("u","return import(u)"),o=!0}catch(t){}return i=!o||window.WebSquareExternal&&"dev"===window.WebSquareExternal._mode?WebSquare.baseURI:"../",i+="config.js",s=WebSquare.baseURI+"config.js","string"==typeof WebSquare.configPath&&WebSquare.configPath.indexOf("config.js")>=0&&(i=WebSquare.configPath,s=i),t.next=60,l._initSuffix();case 60:return t.next=62,WebSquare._dynamicImport(i,{altModulePath:s});case 62:if(a=t.sent,null==(h=a.default).WebSquare){for(u in(d={}).WebSquare={},h)d.WebSquare[u]=h[u];h=d}l.configurationJSON.unshift(h),l.initJSONConfig();try{l.setBaseThemeURI()}catch(t){l.printStackTrace(t,"Cannot read config.xml in theme")}1==WebSquare.hybridApp&&"file:"==location.protocol&&""==WebSquare.baseServletURI&&("string"==typeof WebSquare.hybridSubmissionURL&&""!=WebSquare.hybridSubmissionURL?WebSquare.baseServletURI=WebSquare.hybridSubmissionURL:WebSquare.baseServletURI=l.configurationJSON[0].WebSquare.hybrid.submissionURL["#text"]||"",WebSquare.baseServletURI.lastIndexOf("/")!=WebSquare.baseServletURI.length-1&&(WebSquare.baseServletURI=WebSquare.baseServletURI+"/")),t.next=74;break;case 71:t.prev=71,t.t1=t.catch(49),l.printStackTrace(t.t1,"Cannot read config.xml");case 74:if(l.useActiveXObject=!1,c=location.host.replace(/\./g,"|"),WebSquare.isLocal=c.indexOf("127|0|0|1")>-1||location.host.indexOf("localhost")>-1,WebSquare.useWeinre&&(l.browserCheck.android||l.browserCheck.iphone||l.browserCheck.ipad||l.browserCheck.ipod||l.browserCheck.blackberry)&&function(){window.document;var t=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src=WebSquare.weinreUrl,t.appendChild(e)}(),WebSquare.remoteLogMsgArray.push(""),WebSquare.remoteLogMsgArray.push(location.href),l.printLog("WebSquare Runtime Engine Version : "+WebSquare.ver),
l.printLog("    Copyright 2009  INSWAVE Systems Co., Ltd. All Rights Reserved."),l.printLog("Browser Information : "+navigator.userAgent),l.printLog("[STEP1][START] Loading Runtime Engine."),l.useWebSquareXMLParser=new RegExp(WebSquare.userAgentPattern.XMLParser).test(navigator.userAgent),l.useWebSquareXPathParser=WebSquare.userAgentPattern.XPathParser&&new RegExp(WebSquare.userAgentPattern.XPathParser).test(navigator.userAgent),!l.useWebSquareXMLParser){t.next=97;break}return l.printLog("Install JavaScript Implementation for XML & XPath. User Agent Pattern : "+WebSquare.userAgentPattern.XMLParser),t.next=90,l.writeAsync(WebSquare._resourceURI+"externalJS/xmlparser/xmlsax.js");case 90:return t.next=92,l.writeAsync(WebSquare._resourceURI+"externalJS/xmlparser/xmlw3cdom.js");case 92:return t.next=94,l.writeAsync(WebSquare._resourceURI+"externalJS/xpath/xpath.js");case 94:installXPath(new XPathParser),t.next=128;break;case 97:if(!l.useWebSquareXPathParser){t.next=110;break}return t.prev=98,l.printLog("Install XPath Implementation for not support xPath Parser."),t.next=102,l.writeAsync(WebSquare._resourceURI+"externalJS/xpath/xpath.js");case 102:installXPath(new XPathParser),t.next=108;break;case 105:t.prev=105,t.t2=t.catch(98),l.printStackTrace(t.t2,"xpath");case 108:t.next=128;break;case 110:if(!l.browserCheck.ieAllVersion||l.useActiveXObject){t.next=113;break}t.next=128;break;case 113:if(!l.browserCheck.android){t.next=128;break}if(t.prev=114,"undefined"!=typeof XMLDocument&&void 0!==XMLDocument.prototype.createNSResolver&&void 0!==XMLDocument.prototype.evaluate){t.next=122;break}return l.printLog("Install XPath Implementation for Google Android."),t.next=119,l.importAsync("externalJS/xpath/xpath.js");case 119:installXPath(new XPathParser),t.next=123;break;case 122:l.printLog("Already have a XPath Implementation.");case 123:t.next=128;break;case 125:t.prev=125,t.t3=t.catch(114),l.printStackTrace(t.t3,"xpath");case 128:return"undefined"!=typeof importAllList&&null!=importAllList?WebSquare.pluginList=importAllList:(WebSquare.pluginList=[],l.useWebSquareLicense),WebSquare.core._createGlobalVariable(),"true"!=WebSquare.core.getConfiguration("/WebSquare/localStorage/@defer")&&WebSquare.createLocalStorage(window),l.loadLanguagePack(),t.next=134,WebSquare._initModule();case 134:WebSquare.core._loadMsaServer();try{document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect?WebSquare.graphicPlatformType="svg":WebSquare.graphicPlatformType="vml","vml"===WebSquare.graphicPlatformType&&(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),WebSquare.defaultStyle=document.createStyleSheet(),WebSquare.defaultStyle.addRule("v\\:group","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:line","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:stroke","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:oval","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:rect","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:roundrect","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:image","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:roundrect","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:shape","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:path","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:fill","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:extrusion","behavior: url(#default#VML);"))}catch(t){l.printStackTrace(t,"VML Namespace")}return"true"==WebSquare.core.getConfiguration("debug")&&(WebSquare.logger.debug=!0),WebSquare.logger.debugKey=WebSquare.core.getConfiguration("debugKey"),"system"!=WebSquare.core.getConfiguration("exceptionHandler")&&!0!==WebSquare.skipLog&&WebSquare.core.browserCheck.ie,
"true"==WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@enable")&&(WebSquare.util.checkInterval=WebSquare.util.parseInt(WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@interval"),3e4),WebSquare.util.checkMode=WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@mode"),WebSquare.util.checkURL=WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@serverUrl"),""!=WebSquare.util.checkMode&&""!=WebSquare.util.checkURL||(WebSquare.util.checkMode="client"),window.setTimeout("WebSquare.util.checkUpdate()",WebSquare.util.checkInterval)),WebSquare.requestID="",""!=(p=WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@value"))&&(WebSquare.requestID=p+"="),WebSquare.core.useSubmissionGlobal=WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/submission/makeGlobalObject/@value")),WebSquare.core.useWorkflowGlobal=WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/workflow/makeGlobalObject/@value")),WebSquare.core.scriptPrecedence=!0,window.useWebSquareLicense=l.useWebSquareLicense,t.next=149,l._afterEngineLoad();case 149:0==l.engineLoadingMode.mode&&"undefined"==typeof WebSquareAllInOne||("WebSquare"!=document.title&&"NEW RENDERING"!=document.title||(document.title="WebSquare"),l.performanceCheck.mid1=new Date,l.printLog("[STEP2][ENGINE] Runtime Engine Load complete. Time:"+(l.performanceCheck.mid1.getTime()-l.performanceCheck.start.getTime())+"ms")),"default"===WebSquare.pluginCache&&window.applicationCache&&window.applicationCache.addEventListener("updateready",(function(){l.printLog("[ApplicationCache] ApplicationCache updateready"),window.applicationCache.swapCache()}),!1);case 151:case"end":return t.stop()}}),t,null,[[0,38],[49,71],[98,105],[114,125]])})))},1729:function(t,e,i){"use strict";i.d(e,{$:function(){return n}});var o=i(1974),s=i(5948),r=i(5052),a=i(9075),n=function(t,e,i){try{this.parentControl=null,this.childControlList=[]}catch(t){s.w.printStackTrace(t)}};n.prototype.initialize=function(){},n.prototype.addControl=function(t,e,i,r){try{if(!t)return;var a=this.uuid;if(!0===t._wqAsync){var n=this.childControlList.length,l=n>0?this.childControlList[n-1].uuid:1;return t.then((function(t,i){WebSquare.idCache[a].addControl(t,e,l)}))}var h=this;do{if(t==h)return void $l("cannot execute : "+this.id+".addControl("+t.id+");");h=h.parentControl}while(h);if(t.parentControl&&t.parentControl.removeControl(t),i)if(1===i)this.childControlList.unshift(t);else{for(var d=this.childControlList.length,u=0;u<this.childControlList.length;u++)if(this.childControlList[u].uuid===i){d=u+1;break}this.childControlList.splice(d,0,t)}else r&&"number"==typeof r.index?this.childControlList.splice(r.index,0,t):this.childControlList.push(t);this.render&&(t.domStatus="new"),t.parentControl=this,e&&this.refreshDom();try{if(!o.x.strictModeFrame&&null!=this.parentFrame&&o.x.idCache[this.parentFrame])t.parentFrame=this.parentFrame,WebSquare.idCache[t.parentFrame].childAllControlList.push(t.uuid);else if(null!=t.parentFrame&&WebSquare.idCache[t.parentFrame]){WebSquare.idCache[t.parentFrame].childAllControlList.push(t.uuid)}}catch(t){s.w.printStackTrace(t,null,this),s.w.printError("parentFrame is not wframe")}}catch(t){s.w.printStackTrace(t)}},n.prototype.removeControl=function(t){try{for(var e in this.childControlList)this.childControlList[e]==t&&this.childControlList.splice(e,1);t.parentControl=null}catch(t){s.w.printStackTrace(t)}},n.prototype.getParent=function(){try{return this.parentControl}catch(t){s.w.printStackTrace(t)}},n.prototype.getChild=function(t){try{for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];if(i&&i.id==t)return i}return null}catch(t){s.w.printStackTrace(t)}},n.prototype.getChildren=function(){try{return this.childControlList}catch(t){s.w.printStackTrace(t)}},n.prototype.getAllChildren=function(t){try{for(var e=this.getChildren().slice(0),i=new Array,o=e.pop();null!=o;o=e.pop()){
if(null!=WebSquare.idCache[o.uuid]&&o.options&&(o.options.pluginName||o.options.inheritedCompName)&&i.unshift(o),"true"===t)for(var r=new Array,a=o.getChildren().slice(0),n=a.pop();null!=n;n=a.pop()){var l="",h="";n._wTagName&&"column"!==n._wTagName&&!n.headerId&&(l=n._wTagName,h=n.uuid),WebSquare.componentsCache[l]&&WebSquare.componentsCache[l].indexOf(h)>=0&&r.unshift(n)}else r=o.getChildren();e=e.concat(r)}return i}catch(t){s.w.printStackTrace(t)}},n.prototype.getChildrenCount=function(){try{return this.childControlList.length}catch(t){s.w.printStackTrace(t)}},n.prototype.clearChildren=function(){try{this.childControlList=[]}catch(t){s.w.printStackTrace(t)}},n.prototype.toHTML=function(){alert("you should override 'toHTML' for "+this.id)},n.prototype.activate=function(){alert("you should override 'activate' for "+this.id)},n.prototype.setAction=function(){alert("you should override 'setAction' for "+this.id)},n.prototype.serialize=function(){return alert("you should override 'serialize for "+this.id),{}},n.prototype.restore=function(t){return alert("you should override 'restore for "+this.id),!1},n.prototype.destroy=function(t){try{if("function"==typeof this.finalize&&"finalize"!==this.activeStatus)try{this.finalize()}catch(t){a.k.printLog("[ERROR] finalize : "+this.id)}if("function"==typeof this.unbind&&this.unbind(),this.render&&"IFRAME"==this.render.nodeName){var e=this.getWindow();try{this.render.getAttribute("src")&&this.render.setAttribute("src",""),e.WebSquare&&e.WebSquare.getBody&&e.WebSquare.getBody().remove()}catch(t){}}if(this.modelControl&&(this.modelControl.unbindRef(),this.modelControl.unbindItemset()),this.childControlList)for(var i=this.childControlList.length-1;i>=0;i--){for(var o in window[WebSquare.noConflict].comp[this.childControlList[i].id]=null,delete window[WebSquare.noConflict].comp[this.childControlList[i].id],WebSquare.idCache[this.childControlList[i].uuid]=null,delete WebSquare.idCache[this.childControlList[i].uuid],this.childControlList[i].destroy(t),this.childControlList[i])this.childControlList[i][o]=null,delete this.childControlList[i][o];delete this.childControlList[i]}this.childControlList=[],this.scope_obj&&this.scope_obj.scope&&this.scope_obj.scope[this.org_id]&&delete this.scope_obj.scope[this.org_id],this.parentControl=null,window[WebSquare.noConflict].comp[this.id]=null,delete window[WebSquare.noConflict].comp[this.id],WebSquare.idToUUID[this.id]=null,delete WebSquare.idToUUID[this.id],WebSquare.idCache[this.uuid]=null,delete WebSquare.idCache[this.uuid],window[this.id]&&(window[this.id]=null);if(this.options){for(var n={secret:"input",selectbox:"select1",radio:"select1",multiselect:"select",checkbox:"select",checkcombobox:"select",switch:"Switch"}[this.options.pluginName]||this.options.pluginName,l=WebSquare.componentsCache[n]||WebSquare.componentsCache[this._wTagName]||[],h=0,d=l.length;h<d;h++)l[h]==this.uuid&&(l[h]=null,l.splice(h,1));r.v.memoryLeakComponent[n]&&(r.v.memoryLeakComponentCount+=r.v.memoryLeakComponent[n])}this.event&&(this.render&&this.event.clearElement(this.render),this.event.clearCache());var u=WebSquare.getBody();for(var i in u&&"function"==typeof u.getLayerListener&&u.getLayerListener().remove(this.id),null==this.render||t||(WebSquare.removeNode(this.render),this.render=null),this)try{"function"==typeof this[i]?this[i]=function(){}:delete this[i]}catch(t){delete this[i]}this._removed=!0}catch(t){s.w.printStackTrace(t,null,this)}}},3252:function(t,e,i){"use strict";i.d(e,{D:function(){return p}});var o=i(2137),s=i(7757),r=i.n(s),a=i(1974),n=i(5948),l=i(5052),h=i(8683),d=i(1721),u=i(2712),c=i(5784),p=function(){this.createControlHash={script:"pass",label:"pass",value:"pass",choices:"pass",item:"pass",itemset:"pass",tab:"pass",tabs:"pass",mainMenu:"pass",childMenu:"pass",node:"pass",attributes:"pass",switch:"Switch",case:"group",contents:"group",content:"group",autoFinder:"autoComplete",panelContent:"group"},this._asyncList=[],this._awaitObj={key:[],promiseObj:{}}}
;p.prototype._initImport=function(){"true"==(l.v.getConfiguration("/WebSquare/parseHtml/@script")||"false")&&(this.createControlHash.script="script")},a.x._initImportList.push("controlFactory"),p.prototype.create=function(t,e,i,o,s,r){try{return"xml"===(i?i instanceof c.D?i._elementType:l.v.isXML(i)?"xml":"json":"xml")?this.createByXML(t,e,i,o,s,r):this.createByJSON(t,e,i,o,s,r)}catch(t){n.w.printStackTrace(t)}},p.prototype.createByXML=function(t,e,i,o,s,r){try{if("self"==o)o=a=this.createControl(t,e,i,null,r,s);else var a=this.createControl(t,e,i,o,r,s);if(a&&(a.parentFrame=s,a.options&&a.options.parseChild))for(var l=i.firstChild;null!=l;l=l.nextSibling)if(!a.options.inheritedCompName||"w2:inheritOverride"!=l.nodeName&&"link"!=l.nodeName&&"style"!=l.nodeName){var h=this.createByXML(null,null,l,o,s,r);h&&a.addControl(h)}return a}catch(t){n.w.printStackTrace(t)}},p.prototype.createByJSON=function(t,e,i,o,s,r){try{var a,l=[i],h=[];for(e||(e={_idCollisionCheck:!0,_skipExtend:!0});l.length>0;){var d,p=l.pop();if(!e.pluginName)(d=p.N?u.h.dropNS(p.N):p.T)&&(e.pluginName=d);var g="w2"==(u.h.getNS(p.N)||"")||r;if("self"==o)o=f=this.createControl(t,e,p,null,g,s),e.inheritedCompName&&WebSquare.strictModeFrame&&s&&(o=WebSquare.idCache[s]);else var m=t||e.id,f=this.createControl(m,e,p,o,g,s);t=null,e={_idCollisionCheck:!0,_skipExtend:!0},r=!1;var b=h.pop();if(f&&(a||(a=f),f.parentFrame=s,b&&b.addControl(f),f.options&&f.options.parseChild))for(var y=u.h.getChildNodes(p),v=y.length-1;v>=0;v--){var w=y[v];(!f.options.inheritedCompName||"w2:inheritOverride"!=w.N&&"link"!=w.N&&"style"!=w.N)&&((w.T==c.D.type.element||w.T==c.D.type.text&&"pass"!==this.createControlHash[w.N])&&(l.push(w),h.push(f)))}}return a}catch(t){n.w.printStackTrace(t)}},p.prototype.createControl=function(t,e,i,o,s,r){try{if(!i||i instanceof c.D||(i=new c.D(i)),!s&&!i)return null;var d=null;null!=e?e._idCollisionCheck=!0:e={_idCollisionCheck:!0,_skipExtend:!0};var u=null!=o&&null!=a.x.idCache[o.uuid];if(u&&(e._scope_obj_uuid=o.uuid),null==i&&s||1==i.nodeType){var p;if(p=!0!==e.strictFrame||t?t||(i?i.getAttribute("id"):""):"",isNaN(p)||(p=""),!p&&u&&(p=a.x.UUIDPrefix+"_"+a.x.UUID),p){var g=o?o.id:"";t=(g?g+"_":"")+p}else t=p;u&&(e._scope_obj_org_id=p,e._scope_obj_runtime_id=t);var m=e&&e.pluginName?e.pluginName:c.D.api.getLocalName(i);if(null!=l.v.udcObj[m]){d=new WebSquare.uiplugin.udc({id:t,org_id:p,tagName:m,data:WebSquare.Parser.parseAttribute(i),scope_uuid:e._scope_obj_uuid,parentFrame:r});return this._asyncList.push(d.uuid),d}if(!s&&"w2"!==i.getNamespace()&&"xf"!==i.getNamespace()||"tag"==m||"style"==m)"body"==m?d=new WebSquare.uiplugin.body(t,null,i):"pass"!=this.createControlHash[m]&&(d=new WebSquare.tag(t,null,i));else{var f=this.createControlHash[m]||m;switch(f){case"pass":return null;case"secret":f="uiplugin.input",null==i&&s?(e.type="password",e.pluginName="secret"):(i.setAttribute("type","password"),i.setAttribute("pluginName","secret"));break;case"select1":"full"==(b=i.getAttribute("appearance"))?(f="uiplugin.radio",e.pluginName="radio"):(f="uiplugin.selectbox",e.pluginName="selectbox");break;case"select":var b;"full"==(b=i.getAttribute("appearance"))?(f="uiplugin.checkbox",e.pluginName="checkbox"):"checkcombobox"==b?(f="uiplugin.checkcombobox",e.pluginName="checkcombobox"):(f="uiplugin.multiselect",e.pluginName="multiselect");break;case"Switch":f="uiplugin."+f,e.pluginName="Switch";break;default:f="uiplugin."+f}try{var y=h.D.loadedUserComponentPluginName[f.slice(9)],v=h.D.loadedInheritComponentPluginName[f.slice(9)],w=y||v;if(w){var S=y?"User":"Inherit",C=h.D["loaded"+S+"Component"][w],x=c.D.api.getAttribute(C,"class"),_=[];if(null!=i&&(null==e&&(e={}),a.x.extendKeepingType(e,WebSquare.WebSquareparser.parseAttribute(i)),e._skipExtend=!1,_=i.getChildNodes()),x&&e.className?e.className=x+" "+e.className:x&&!e.className&&(e.className=x),_.length>0){C=new c.D(C).cloneNode(!0);for(var I=0;I<_.length;I++)C.appendChild(_[I]._element);C=C._element}e.pluginName=null,
"User"===S?e.udcName=f.slice(9):"Inherit"===S&&(e.inheritedCompName=f.slice(9)),e.firstTabID=c.D.api.getAttribute(C,"firstTabID")||null,t||(t=a.x.UUIDPrefix+"_"+a.x.UUID++),d=this.create(t,e,C,"self",r,s),e.style||(d.options.style=""),o=d,d.makeScope(d),r&&null!=WebSquare.idCache[r]&&WebSquare.idCache[r]._addScopeVariable(d.uuid),d.getUdcHome=function(){return y.slice(0,y.lastIndexOf("#"))},d.getPluginName=function(){return e.udcName}}else{var T=f.split("."),k=h.D.isMobile(),D=T[0],L=T[1];if(i)if("selectbox"==L){var W=i.getAttribute("renderType"),A=i.getAttribute("tableRender"),E=i.getAttribute("mobileRenderType");k&&E?W=E:W||(W=l.v.getConfiguration("/WebSquare/selectbox/renderType/@"+(k?"mobile":"value"))||"auto"),("ul"!==A||"auto"==W&&k)&&("native"==W||"select"==W||"auto"==W&&k)&&(e.renderType=W,L+="_native")}else if("treeview"==L){(W=i.getAttribute("renderType"))||(W=l.v.getConfiguration("/WebSquare/treeview/renderType/@"+(k?"mobile":"value"))||"auto"),"virtual"==W&&(e.renderType=W,L+="_virtual")}if(null==WebSquare[D][L]){var M=this._awaitObj.promiseObj[f];M||(M=a.x._loadModuleDynamic(f));var q=function(t,e,i,o,s,r,a,n,l){return function(h,d){var u=l._createComponent({id:t,element:e,engineType:i,componentName:o,options:s});if(l._createComponentAfter(u,{org_id:r,scopeObj:a,parentFrame:n}),u.options&&u.options.parseChild)for(var c=u.element.getChildNodes(),p=0;p<c.length;p++){var g=l.create(null,null,c[p],a,n);u.addControl(g)}var m=l.initAsync(!0),f=u.uuid;return m.then((function(t,e){return WebSquare.idCache[f]}))}}(t,i,D,L,e,p,o,r,this);(d=M.then(q).then((function(t,e){return t})))._wqAsync=!0,this._awaitObj.promiseObj[f]=d,this._awaitObj.key.push(f),a.x.UUID++}else d=this._createComponent({id:t,element:i,engineType:D,componentName:L,options:e})}}catch(t){return n.w.printStackTrace(t),null}}}else 3==i.nodeType?(i.T||i.getNodeValue()&&""!=i.getNodeValue().wq_trim())&&(d=new WebSquare.tag(t,null,i)):d=null;return this._createComponentAfter(d,{org_id:p,scopeObj:o,parentFrame:r}),d}catch(e){n.w.printStackTrace(e,"id ["+t+"] compName["+f+"]")}},p.prototype._createComponent=function(t){try{var e,i=t.id,o=t.element,s=t.engineType,r=t.componentName,l=t.options;if(l&&l.inheritedCompName){if(!WebSquare[s][l.inheritedCompName]){var h;if(WebSquare[s][l.inheritedCompName]=function(t,e,i){WebSquare[s][r].call(this,t,e,i)},a.x.extend(WebSquare[s][l.inheritedCompName].prototype,WebSquare[s][r].prototype),o)for(var c=o.firstChild;null!=c;c=c.nextSibling)if("w2:inheritOverride"==c.nodeName){h=c;break}if(h){var p=d.L.getCDataNodeValue(h).wq_trim();if(""!=p){var g=p.split("="),m=WebSquare[s][l.inheritedCompName],f=new Function("var superComponent = WebSquare[engineType][compName].prototype; return "+g[1]);u.h.setJSONByPath(m,g[0],f())}}for(var b in WebSquare[s][l.inheritedCompName].prototype.overrideFunc)WebSquare[s][l.inheritedCompName].prototype[b]=WebSquare[s][l.inheritedCompName].prototype.overrideFunc[b]}(e=new WebSquare[s][l.inheritedCompName](i,l,o)).options.inheritFrom=r}else e=new WebSquare[s][r](i,l,o);return e}catch(t){n.w.printStackTrace(t,"id ["+i+"] compName["+r+"]")}},p.prototype._createComponentAfter=function(t,e){try{if(!t||!e)return;var i=e.scopeObj,o=e.parentFrame,s=e.org_id;i&&(t.org_id=s,t.scope_obj=i,t.scope_id=i.id),"function"==typeof t.initAsync&&this._asyncList.push(t.uuid),o&&(t.parentFrame=o)}catch(t){n.w.printStackTrace(t)}},p.prototype.createUDC2=function(t){try{return new WebSquare.uiplugin.udc(t)}catch(t){n.w.printStackTrace(t)}},p.prototype.initAsync=function(){var t=(0,o.Z)(r().mark((function t(e){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=this.doAsync(),!0!==e&&(i=i.then((function(){return p.awaitAsync()}))),t.abrupt("return",i);case 6:t.prev=6,t.t0=t.catch(0),n.w.printStackTrace(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),p.prototype.doAsync=(0,o.Z)(r().mark((function t(){var e,i,o,s
;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,e=[];this._asyncList.length>0;)i=this._asyncList.shift(),(o=a.x.idCache[i])&&"function"==typeof o.initAsync&&e.push(o.initAsync());if(0!==e.length){t.next=5;break}return t.abrupt("return",Promise.resolve());case 5:return s=Promise.all(e).then((function(){return p.doAsync()})),t.abrupt("return",s);case 9:t.prev=9,t.t0=t.catch(0),n.w.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),p.prototype.awaitAsync=(0,o.Z)(r().mark((function t(){var e,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,e=[],i=0;i<p._awaitObj.key.length;i++)e.push(p._awaitObj.promiseObj[p._awaitObj.key[i]]);if(0!==e.length){t.next=5;break}return t.abrupt("return",Promise.resolve());case 5:return this._awaitObj={key:[],promiseObj:{}},t.abrupt("return",Promise.all(e).then((function(){return p.awaitAsync()})));case 9:t.prev=9,t.t0=t.catch(0),n.w.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),p=new p},6138:function(t,e,i){"use strict";i.d(e,{i:function(){return l}});var o=i(1974),s=i(5948),r=i(5052),a=i(8683),n=i(1454),l=function(){};l.prototype.setStyle=function(t,e){try{if(!this.render)return;WebSquare.style.setStyle(this.render,t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.setStyleAsync=function(t,e){try{if(!this.render)return;this.__setStyleAsyncPeriod||(this.__setStyleAsyncPeriod=1),r.v.setTimer((function(){r.v.measureTime((function(t){this.__setStyleAsyncPeriod=parseInt(t.aver,10)}),{key:this.id+"_setStyleAsync",caller:this}),WebSquare.style.setStyle(this.render,t,e)}),{key:this.id+"_setStyleAsync",caller:this,delay:this.__setStyleAsyncPeriod,max:this.__setStyleAsyncPeriod})}catch(t){s.w.printStackTrace(t)}},l.prototype.getStyle=function(t){try{return this.render?WebSquare.style.getStyle(this.render,t):null}catch(t){s.w.printStackTrace(t)}},l.prototype.setPosition=function(t,e,i){try{if(!this.render)return;t=parseInt(t),e=parseInt(e),"absolute"==(i=i||"absolute")?(null==t||isNaN(t)||(this.render.style.left=t+"px"),null==e||isNaN(e)||(this.render.style.top=e+"px")):"delta"==i&&(null==t||isNaN(t)||(this.render.style.left=this.render.offsetLeft+t+"px"),null==e||isNaN(e)||(this.render.style.top=this.render.offsetTop+e+"px"))}catch(t){s.w.printStackTrace(t)}},l.prototype.getPosition=function(t){try{if(!this.render)return;return"top"==(t=t.toLowerCase())?this.render.offsetTop:"left"==t?this.render.offsetLeft:void $l("getPosition : wrong positionName["+t+"]")}catch(t){s.w.printStackTrace(t)}},l.prototype.getAbsolutePosition=function(t,e){try{var i=null==e?this.render:e;return"top"==t?WebSquare.style.getAbsoluteTop(i):"left"==t?WebSquare.style.getAbsoluteLeft(i):void $l("getPosition : wrong positionName["+t+"]")}catch(t){s.w.printStackTrace(t)}},l.prototype.setSize=function(t,e){try{WebSquare.style.setSize(this.render,t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.getSize=function(t){try{return WebSquare.style.getSize(this.render,t)}catch(t){s.w.printStackTrace(t)}},l.prototype.show=function(t){try{WebSquare.style.show(this.render,t),a.D.isIE()&&parseInt(r.v.browserVersion(),10)<10||this.refreshAdaptive(),this.checkResize_recursive(this)}catch(t){s.w.printStackTrace(t)}},l.prototype.hide=function(){try{WebSquare.style.hide(this.render)}catch(t){s.w.printStackTrace(t)}},l.prototype.refreshAdaptive=function(){try{if("group"==this.options.pluginName&&"table"==this.options.tagname&&("crosstab"==this.options.adaptive||"layout"==this.options.adaptive)){var t=parseInt(this.options.adaptiveThreshold)||480;parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=t&&(this.removeAdaptive(),this.addAdaptive())}if(this.constructor===WebSquare.tag&&3!==this.element.nodeType){var e=this.element.getAttribute("adaptive");if("crosstab"==e||"layout"==e){t=parseInt(this.element.getAttribute("adaptiveThreshold"))||480
;parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=t&&(this.removeAdaptive(),this.addAdaptive())}}for(var i=0;i<this.childControlList.length;i++)this.childControlList[i].refreshAdaptive&&this.childControlList[i].refreshAdaptive()}catch(t){s.w.printStackTrace(t)}},l.prototype.setOpacity=function(t){try{this.setStyle("opacity",t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getOpacity=function(){try{return this.getStyle("opacity")}catch(t){s.w.printStackTrace(t)}},l.addClassRe=new RegExp("\\s\\s"),l.prototype.addClass=function(t){try{1===arguments.length?this.__addClass(this.render,arguments[0]):2===arguments.length&&this.__addClass(arguments[0],arguments[1])}catch(t){s.w.printStackTrace(t)}},l.prototype.__addClass=function(t,e){try{if(!t||!e)return;var i=t.className;0==this.__hasClass(t,e)&&(i=(i+=" "+e).replace(l.addClassRe," ").wq_trim(),t.className=i)}catch(t){s.w.printStackTrace(t)}},l.prototype.removeClass=function(t){try{1===arguments.length?this.__removeClass(this.render,arguments[0]):2===arguments.length&&this.__removeClass(arguments[0],arguments[1])}catch(t){s.w.printStackTrace(t)}},l.prototype.__removeClass=function(t,e){try{if(!t||!e)return;if(0==this.__hasClass(t,e))return;var i=r.v.getConfiguration("/WebSquare/style/removeDefaultClass/@value");if((""==i||"false"==i)&&1==this.__hasClass(this.options.className,e))return;var o=" "+t.className+" ";o=(o=o.replace(" "+e+" "," ")).replace(l.addClassRe," ").wq_trim(),t.className=o}catch(t){s.w.printStackTrace(t)}},l.prototype.changeClass=function(t,e){try{2===arguments.length?this.__changeClass(this.render,arguments[0],arguments[1]):3===arguments.length&&this.__changeClass(arguments[0],arguments[1],arguments[2])}catch(t){s.w.printStackTrace(t)}},l.prototype.__changeClass=function(t,e,i){try{this.removeClass(t,e),this.addClass(t,i)}catch(t){s.w.printStackTrace(t)}},l.prototype.hasClass=function(t){try{return 1===arguments.length?this.__hasClass(this.render,arguments[0]):2===arguments.length&&this.__hasClass(arguments[0],arguments[1])}catch(t){s.w.printStackTrace(t)}},l.prototype.__hasClass=function(t,e){try{return!!t&&(" "+("string"==typeof t?t||"":t.className)+" ").indexOf(" "+e+" ")>=0}catch(t){s.w.printStackTrace(t)}},l.prototype.toggleClass=function(t){try{return 1===arguments.length?this.__toggleClass(this.render,arguments[0]):2===arguments.length&&this.__toggleClass(arguments[0],arguments[1])}catch(t){s.w.printStackTrace(t)}},l.prototype.__toggleClass=function(t,e){try{this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.movable=function(t,e){try{if(!this.render)return;var i=this;if(!this.handleFinishMove){"w2drag_move","w2drag_move",e=o.x.extend({id:"w2drag_move",className:"w2drag_move",makeGhostLayer:function(t){return t.setSize(i.render.offsetWidth,i.render.offsetHeight),t},handleFinish:function(t,e,o,s){var r=parseInt(i.getStyle("left")),a=parseInt(i.getStyle("top"));i.setPosition(r+o,a+s)}},e||{}),this.handleFinishMove=function(t){n.B.stopEvent(t),WebSquare.dragdrop.gDragManager.activate(t,i.render,e)}}t?(this.event.addListener(this.render,"onmousedown",this.handleFinishMove),this.event.addListener(this.render,"ontouchstart",this.handleFinishMove)):(this.event.removeListener(this.render,"onmousedown",this.handleFinishMove),this.event.removeListener(this.render,"ontouchstart",this.handleFinishMove))}catch(t){s.w.printStackTrace(t)}},l.prototype.resizable=function(t,e){try{if(!this.render)return;var i=this;this.handleFinishResize||(this.handleFinishResize=function(t){n.B.stopEvent(t),WebSquare.dragdrop.gDragManager.activate(t,i.render,{id:"w2drag_resize",className:"w2drag_resize",mode:"resize",makeGhostLayer:function(t){return t.setSize(i.render.offsetWidth,i.render.offsetHeight),t},handleFinish:function(t,e,o,s){var r=parseInt(i.getStyle("width")),a=parseInt(i.getStyle("height"));i.setSize(r+o,a+s)}})}),
t?this.event.addListener(this.render,"onmousedown",this.handleFinishResize):this.event.removeListener(this.render,"onmousedown",this.handleFinishResize)}catch(t){s.w.printStackTrace(t)}},l.prototype.visible=function(t){try{if(!this.render)return;t=a.D.getBoolean(t);this.render.style.visibility=t?"visible":"hidden"}catch(t){s.w.printStackTrace(t)}},l.prototype.showBySize=function(){try{if(!this.render)return;this.setStyle("visibility","visible"),this.render.style.overflow="",this.render.style.width="",this.render.style.height=""}catch(t){s.w.printStackTrace(t)}},l.prototype.hideBySize=function(){try{if(!this.render)return;this.setStyle("visibility","hidden"),this.render.style.overflow="hidden",this.render.style.width="0px",this.render.style.height="0px"}catch(t){s.w.printStackTrace(t)}},l.prototype.getStyleValue=function(t){return this.getStyle(t)},l.prototype.getStyleIntValue=function(t){return parseInt(this.getStyle(t))},l.prototype.getStyleProperty=function(t){try{return this.getStyle(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getClass=function(){try{return this.options.className}catch(t){s.w.printStackTrace(t)}},l.prototype.highlight=function(t){try{if(!this.render)return;this.render.style.border=t?"solid 1px blue":""}catch(t){s.w.printStackTrace(t)}},l.prototype.getInitStyle=function(t){if(WebSquare.initStyle[this.id]){for(var e=/([\w-]*)\s*:\s*([^;]*)/g,i=[],o={};i=e.exec(WebSquare.initStyle[this.id].style);)o[i[1]]=i[2].wq_trim();return o.className=WebSquare.initStyle[this.id].className,o[t]?o[t]:o}},l.prototype.setInitStyle=function(t){if(WebSquare.initStyle[this.id]){for(var e,i=/([\w-]*)\s*:\s*([^;]*)/g,o={};e=i.exec(WebSquare.initStyle[this.id].style);)o[e[1]]=e[2].wq_trim();var s=o[t]?t:"";if(s){var r=s.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()})),a=o[s]?o[s]:o[s.toUpperCase()];document.getElementById(this.id).style[r]=a}else document.getElementById(this.id).style.cssText=WebSquare.initStyle[this.id].style;document.getElementById(this.id).className=WebSquare.initStyle[this.id].className}},l.prototype.enable=function(){},l.prototype.disable=function(){},l.prototype.hover=function(t,e){},l.prototype.checkResize_recursive=function(t){try{if("function"==typeof t.checkResize&&t.checkResize(),"inputCalendar"==t.options.pluginName&&"function"==typeof t.setSetting&&t.setSetting(),t.childControlList)for(var e=0;e<t.childControlList.length;e++)this.checkResize_recursive(t.childControlList[e])}catch(t){s.w.printStackTrace(t)}}},4748:function(t,e,i){"use strict";i.d(e,{g:function(){return s}});var o=i(5948),s=function(){};s.prototype.setClassName=function(t){try{if(!t)return;var e="w2"+this.getPluginName()+" "+t;this.setClassByElement(e)}catch(t){o.w.printStackTrace(t)}},s.prototype.addClassName=function(t){try{this.addClass(this.render,t)}catch(t){o.w.printStackTrace(t)}},s.prototype.removeClassName=function(t){try{this.removeClass(this.render,t)}catch(t){o.w.printStackTrace(t)}},s.prototype.getChildEl=function(t,e,i){try{if(this.getClassByElement(e)==t)return this.addClass(e,i),e;for(var s=0;s<e.children.length;s++)if(e.children[s].children.length>0)null!=e.children[s]?this.getChildEl(t,e.children[s],i):$l("child가 null 입니다.");else if(null!=e&&this.getClassByElement(e)==t)return e}catch(t){o.w.printStackTrace(t)}},s.prototype.removeChildEl=function(t,e,i){try{if(this.getClassByElement(e)==t)return this.removeClass(e,i),e;for(var s=0;s<e.children.length;s++)if(e.children[s].children.length>0)null!=e.children[s]?this.removeChildEl(t,e.children[s],i):$l("child가 null 입니다.");else if(null!=e&&this.getClassByElement(e)==t)return e}catch(t){o.w.printStackTrace(t)}},s.prototype.getClassByElement=function(t){try{return this.ssplit(t.className)||this.ssplit(t.getAttribute("class"))||""}catch(t){o.w.printStackTrace(t)}},s.prototype.setClassByElement=function(t){try{if(!t)return;this.render.className=t}catch(t){o.w.printStackTrace(t)}},s.prototype.ssplit=function(t){try{if(void 0===t||null==t)return t
;var e=t.split(" ");return e.length>0?e[0]:t}catch(t){o.w.printStackTrace(t)}}},5118:function(t,e,i){"use strict";i.d(e,{U:function(){return d}});var o=i(484),s=i(1477),r=i(5948),a=i(5052),n=i(8683),l=i(9075),h=i(1454),d=function(){try{this.cache=null}catch(t){r.w.printStackTrace(t)}};document.addEventListener&&!s.d.browserCheck.ie?d.prototype.addListener=function(t,e,i,o){try{if(o=o||null,"onchange"==e.toLowerCase().wq_trim())return;var s=function(e){this.getAttribute&&"disabled"===this.getAttribute("disabled")||void 0!==this.disabled&&(this.disabled||"true"==this.getAttribute("disabled"))||i.apply(t,arguments)},n=e.slice(2);"onmousewheel"==e.toLowerCase()&&a.v.browserCheck.moz&&(n="DOMMouseScroll"),t.addEventListener(n,s,o),this.setCache(t,e,s,o)}catch(t){$l(this.addListener.caller,"caller"),r.w.printStackTrace(t)}}:document.attachEvent?d.prototype.addListener=function(t,e,i,o){try{if(o=o||null,"onchange"==e.toLowerCase().wq_trim())return;var s=function(){t.getAttribute&&"disabled"===t.getAttribute("disabled")||void 0!==t.disabled&&(t.disabled||"true"==t.getAttribute("disabled"))||i.apply(t,arguments)};t.attachEvent(e,s),this.setCache(t,e,s,o)}catch(t){$l(this.addListener.caller,"caller"),r.w.printStackTrace(t)}}:d.prototype.addListener=function(){},d.prototype.addListener2=function(t,e,i,o){try{var s=function(t,e){return function(i){e.call(t,i||window.event)}}(o||t,i);t.attachEvent?t.attachEvent(e,s):t.addEventListener&&("mousewheel"==(e=e.slice(2)).wq_trim().toLowerCase()&&n.D.isFF()&&(e="DOMMouseScroll"),t.addEventListener(e,s,!1)),this.setCache(t,e,s,null)}catch(t){r.w.printStackTrace(t)}},d.prototype.removeListener=function(t,e,i,o){try{o=o||null;try{!n.D.isIE()&&t.removeEventListener?t.removeEventListener(e.slice(2),i,o):t.detachEvent&&t.detachEvent(e,i)}catch(t){}}catch(t){r.w.printStackTrace(t)}},d.prototype.setCache=function(t,e,i,o){try{this.cache||(this.cache=[]),this.cache.push([t,e,i,o])}catch(t){r.w.printStackTrace(t)}},d.prototype.clearCache=function(){try{if(!this.cache)return;for(var t=0;t<this.cache.length;t++)this.removeListener.apply(this,this.cache[t]),this.cache[t]=null;this.cache=null}catch(t){r.w.printStackTrace(t)}},d.prototype.bindAsEventListener=function(t,e,i){try{for(var s=[],a=2;a<arguments.length;a++)s.push(arguments[a]);var l=!("object"!==(0,o.Z)(i)||null==i||!0!==i.eventonreadonly);return function(i){if(i&&"click"===i.type&&t.options&&!0===t.options.preventMultipleClick)if(n.D.isIEAllVersion()&&t.options.clickInterval){var o=(new Date).getTime();if(o-t.lastClickTime<t.options.clickInterval)return void("anchor"==t.options.pluginName&&t.options.enableReadOnly&&h.B.preventDefault(i));t.lastClickTime=o}else if("number"==typeof i.detail&&i.detail>1)return void("anchor"==t.options.pluginName&&t.options.enableReadOnly&&h.B.preventDefault(i));if(!(t.__removed_object__||t.getDisabled&&1==t.getDisabled())){if(t.options&&t.options.overrideKey&&i&&(i.charCode||i.keyCode)){var r=i.charCode?i.charCode:i.keyCode,a=t.options.overrideKey.split(",");if("all"===a[0])return;for(var d=0;d<a.length;d++)if(parseInt(a[d],10)===r)return}if(i&&"resize"!=i.type&&t.options&&"gridView"!=t.options.pluginName&&"grid"!=t.options.pluginName){var u=t.getReadOnly&&1==t.getReadOnly(),c=!1;if(u&&t.options&&("input"==t.options.pluginName&&"noFormat"==t.options.copyOnReadOnly?c=n.D.isIEAllVersion()?67==i.keyCode&&(i.ctrlKey||i.metaKey):"copy"==i.type:"anchor"==t.options.pluginName&&t.options.enableReadOnly&&h.B.preventDefault(i)),u&&!c&&!l)return}return i&&"mousedown"===i.type&&WebSquare.getBody().getLayerListener().otherClick(i),e.apply(t,[i||window.event].concat(s))}}}catch(t){r.w.printStackTrace(t)}},d.prototype.clearElement=function(t){try{var e,i=0,o=0,s="";if(e=t.attributes){o=e.length;for(i=0;i<o;i++)e[i]&&"function"==typeof t[s=e[i].name]&&(t[s]=null)}}catch(t){r.w.printStackTrace(t)}},d.prototype.getTarget=function(t,e){try{e=e||"main";for(var i=h.B.getTarget(t);i;){var o=i.getAttribute("catch")
;if(o&&o.indexOf(e)>-1)break;i=i.parentNode}return i}catch(t){r.w.printStackTrace(t)}},d.prototype.getTargetIterator=function(t,e,i){try{var o=h.B.getTarget(t);return new WebSquare.targetIterator(o,e,i)}catch(t){r.w.printStackTrace(t)}},d.prototype.getChildIterator=function(t){try{return new WebSquare.childIterator(t)}catch(t){r.w.printStackTrace(t)}},d.prototype.isMe=function(t,e){try{for(var i=h.B.getTarget(t);null!=i;){if(i==e)return!0;i=i.parentNode}return!1}catch(t){r.w.printStackTrace(t)}},d.prototype.isMine=function(t,e){try{for(var i=h.B.getTarget(t);null!=i;){if(i.id&&i.id.indexOf(e.id)>=0)return!0;i=i.parentNode}return!1}catch(t){r.w.printStackTrace(t)}},d.prototype.addEvents=function(t,e){try{if(null!=t&&null!=e){for(var i=0;i<e.length;i++)if(h.B.isEventSupported(t.render,e[i].name))switch(e[i].action){case"script":if("function"!=typeof e[i].param.handler&&"string"!=typeof e[i].param.handler){l.k.printLog("Event error ["+t.id+",ev:"+e[i].name+"] : "+e[i].param.handler+" is not a function");break}if(null!=t.systemEventList[e[i].name]&&t.systemEventList[e[i].name].count>0)t.systemEventList[e[i].name].count++;else{t.systemEventList[e[i].name]={},t.systemEventList[e[i].name].count=1;var o=function(e){return function(i){"click"===i.type&&"number"==typeof i.detail&&i.detail>1&&t&&t.options&&!0===t.options.preventMultipleClick||h.B.fireEvent(t,e,i)}}(e[i].name);this.addListener(t.render,e[i].name,o,!1),t.event.cache&&(t.systemEventList[e[i].name].handler=t.event.cache[t.event.cache.length-1][2])}break;default:null!=t.systemEventList[e[i].name]&&t.systemEventList[e[i].name].count>0?t.systemEventList[e[i].name].count++:(t.systemEventList[e[i].name]={},t.systemEventList[e[i].name].count=1,t.systemEventList[e[i].name].handler=function(t,e){return function(i){h.B.fireEvent(t,e,i)}}(t,e[i].name),this.addListener(t.render,e[i].name,t.systemEventList[e[i].name].handler,!1))}t.userEventList=t.userEventList.concat(e)}}catch(t){r.w.printStackTrace(t)}},d.prototype.addUserEvents=function(t,e,i){var o=[];try{if(e){if(void 0!==i){for(var s={},a=0;a<i.length;a++)s[i[a]]="";var n=[];for(a=0;a<e.length;a++)void 0===s[e[a].name]?o.push(e[a]):n.push(e[a]);e=n}t.userEventList=t.userEventList.concat(e)}}catch(t){r.w.printStackTrace(t)}return o},d.prototype.hasEvent=function(t,e){try{if(!this.cache)return!1;for(var i=!1,o=0;o<this.cache.length;o++)if(this.cache[o][0].id===t&&this.cache[o][1]===e){i=!0;break}return i}catch(t){r.w.printStackTrace(t)}},d.prototype.removeEvent=function(t,e){try{if(!this.cache)return 0;var i=0,s=!1;"object"===(0,o.Z)(t)&&t&&1===t.nodeType&&(s=!0);for(var a=this.cache.length-1;a>=0;a--){(s?this.cache[a][0]===t:this.cache[a][0].id===t)&&this.cache[a][1]===e&&(this.removeListener.apply(this,this.cache[a]),this.cache[a]=null,this.cache.splice(a,1),i++)}return i}catch(t){r.w.printStackTrace(t)}}},5373:function(t,e,i){"use strict";i.d(e,{E:function(){return l}});var o=i(5948),s=i(5052),r=i(8683),a=i(1721),n=i(7537),l=function(){};l.prototype._setDataCollectionItemArr=function(t){try{this.itemArr=this.modelControl.getDataCollectionItemsetData(t,{visibleColumn:this.options.visibleColumn,visibleColumnFalseValue:this.options.visibleColumnFalseValue,enableColumn:this.options.enableColumn,enableColumnFalseValue:this.options.enableColumnFalseValue})||[],this.allItemArr=this.modelControl.getDataCollectionItemsetData(t,{allData:!0,visibleColumn:this.options.visibleColumn,visibleColumnFalseValue:this.options.visibleColumnFalseValue,enableColumn:this.options.enableColumn,enableColumnFalseValue:this.options.enableColumnFalseValue})||[]}catch(t){o.w.printStackTrace(t)}},l.prototype.initializeItemArr=function(t,e){var i=this.internal&&!this.modelControl.isDataCollectionItemsetBinded?this.itemsetObj:WebSquare.WebSquareparser.parseItemset(t);this.modelControl.setItemset(i.nodeset,i.label,i.value),this.itemsetObj=i,this.itemArr=[],this.allItemArr=[];var o=WebSquare.WebSquareparser.parseChoices(t,e)
;if(o.length>0)this.itemArr=o;else if(i.nodeset.match("data:")){var s=this.id;if("w2:column"==this.element.getTagName()){if(!this.comp)return;s=this.comp.id}this.modelControl.dataCollectionBindItemset(this.itemsetObj.nodeset),this._setDataCollectionItemArr(s)}else this.itemArr=this.modelControl.getItemsetData();this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr)),this.initializeFilter(t),null==this.filterFunc&&"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype.refreshItemArr=function(){this.itemArr,this.modelControl.isDataCollectionItemsetBinded?this._setDataCollectionItemArr(this.id):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr)),this.originalItemArr=this.itemArr,null!=this.filterFunc?this.filterItemArr():"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype.setNodeSet=function(t,e,i){try{this.modelControl.unbindItemset(),t=r.D.isNull(t)?this.itemsetObj.nodeset:t,e=r.D.isNull(e)?this.itemsetObj.label:e,i=r.D.isNull(i)?this.itemsetObj.value:i,this.modelControl.setItemset(t,e,i),this.itemsetObj=this.modelControl.itemsetObj,this.itemArr,this.itemsetObj.nodeset.match("data:")?this._setDataCollectionItemArr(this.id):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr)),this.originalItemArr=this.itemArr,null!=this.filterFunc&&this.filterItemArr(),"stop"!==this.activeStatus&&(this.itemsetObj.nodeset.match("data:")?this.modelControl.dataCollectionBindItemset():this.modelControl.bindItemset(),this.refreshItemset("replace"))}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setVisibleColumn=function(t,e){try{this.modelControl.isDataCollectionItemsetBinded&&(this.options.visibleColumn=t||this.options.visibleColumn,this.options.visibleColumnFalseValue=e||this.options.visibleColumnFalseValue,this._setDataCollectionItemArr(this.id),"function"==typeof this.setSelectItemArr&&this.setSelectItemArr(),this.refreshVisible())}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setEnableColumn=function(t,e){try{this.modelControl.isDataCollectionItemsetBinded&&(this.options.enableColumn=t||this.options.enableColumn,this.options.enableColumnFalseValue=e||this.options.enableColumnFalseValue,this._setDataCollectionItemArr(this.id),"function"==typeof this.setSelectItemArr&&this.setSelectItemArr(),this.refreshEnable())}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.refreshVisible=function(){try{"function"==typeof this.setSelectOptions&&this.setSelectOptions()}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.refreshEnable=function(){try{"function"==typeof this.setSelectOptions&&this.setSelectOptions()}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setGridItemset=function(t){try{if(this.modelControl.unbindItemset(),this.itemsetObj={nodeset:"",value:"",label:"",items:[]},null!=this.itemTable&&(this.itemTable.remove(),this.itemTable=null),s.v.isXML(t)){a.L.isDocument(t)&&(t=t.documentElement);var e=t.nodeName;if("w2:"===e.slice(0,3)&&(e=e.slice(3)),"gridviewitemset"!==(e=e.toLowerCase())&&"griditemset"!==e)throw{message:"Invalid XML : ["+this.id+".setGridItemset]"};var i="gridviewitemset"===e?"gridView":"grid";this.itemTableMode=i,this.initializeGridItemsetObj(t,i),this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),"gridView"===i?this.refreshGridViewItemArr():this.refreshGridItemArr()}else{var r=JSON.parse(JSON.stringify(t));"number"==typeof r.width&&(r.width=String(r.width)),"number"==typeof r.height&&(r.height=String(r.height));var n=r.item;delete r.item,this.gridViewOptions=r,
this.itemsetObj.nodeset=r.nodeset,this.itemsetObj.label=r.label,this.itemsetObj.value=r.value,this.itemsetObj.items=n,this.modelControl.setItemset(r.nodeset,r.label,r.value),this.refreshGridViewItemArr()}this.itemsetObj.nodeset.match("data:")?(this.modelControl.dataCollectionBindItemset(),this.modelControl.isDataCollectionItemsetBinded=!0):this.modelControl.bindItemset(),"stop"!==this.activeStatus&&this.refreshItemset("replace")}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.getDataListInfo=function(){try{var t=null;return this.itemsetObj&&(t={},this.itemsetObj.nodeset.match("data:")?(t.nodeset=this.itemsetObj.nodeset.slice(0),t.id=t.nodeset.wq_replaceAll("data:",""),t.value=this.itemsetObj.value,t.label=this.itemsetObj.label):(t.nodeset=this.itemsetObj.nodeset.slice(0),t.value=this.itemsetObj.value,t.label=this.itemsetObj.label)),t}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setGridNodeSet=function(t,e,i,s){try{if("grid"!=this.itemTableMode)return;var a=!1;if(e==this.itemsetObj.label&&i==this.itemsetObj.value||(a=!0),this.itemsetObj.nodeset=t,a&&(this.itemsetObj.label=e,this.itemsetObj.value=i),"[object Array]"!==Object.prototype.toString.call(s))return void $l("setGridNodeSet 함수를 실행하는 중 "+this.id+" 의 gridItemset의 컬럼에 대한 정보가 잘못되었습니다.");for(var n=0;n<this.itemsetObj.items.length;n++)this.itemsetObj.items[n]=s[n];this.modelControl.unbindItemset(),t=r.D.isNull(t)?this.itemsetObj.nodeset:t,e=r.D.isNull(e)?this.itemsetObj.label:e,i=r.D.isNull(i)?this.itemsetObj.value:i,this.modelControl.setItemset(t,e,i),this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr)),this.originalItemArr=this.itemArr,null!=this.filterFunc&&this.filterItemArr(),this.modelControl.bindItemset(),this.refreshItemset()}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.getItemArray=function(){return this.itemArr},l.prototype.getLocaleItemArr=function(t,e){void 0!==e&&null!=e||(e="label");for(var i=0;i<t.length;i++){var o=t[i],s=this.getLocaleValue(o[e]);s&&(o[e]=s)}return t},l.prototype.initializeFilter=function(t){var e=this.options.filter;this.originalItemArr=this.itemArr,this.setFilterFunc(e),this.filterItemArr()},l.prototype.setFilter=function(t){var e=this.getValue();this.setFilterFunc(t),this.filterItemArr(),this.componentRedraw(e)},l.prototype.setFilterFunc=function(t){try{if(void 0===t||null==t||""==t)this.filterFunc=null;else{var e=r.D.getGlobalFunction(t,this.scope_id);"function"==typeof e&&(this.filterFunc=e)}}catch(t){this.filterFunc=null,o.w.printStackTrace(t)}},l.prototype.filterItemArr=function(){if(null==this.filterFunc)this.itemArr=this.originalItemArr;else{this.itemArr=[];for(var t=0;t<this.originalItemArr.length;t++){var e=this.originalItemArr[t];this.match(e)&&this.itemArr.push(e)}"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()}},l.prototype.match=function(t){try{return this.filterFunc.call(this.filterFunc,t.label,t.value,t.xml)}catch(t){return o.w.printStackTrace(t),!1}},l.prototype.initializeGridItemArr=function(t,e){var i,o=requires("uiplugin.grid");this.initAsync=(i=o,function(){return i}),this.itemsetObj||(this.itemsetObj={nodeset:"",value:"",label:"",items:[]});var r=this.itemsetObj;e=e||"xf";try{var a=t.getTagName();a.indexOf(":")>=0&&(e=a.split(":")[0])}catch(t){}if(t){var n="xf"==e?s.v._XML_NAMESPACE.XFORMS:s.v._XML_NAMESPACE.W2,l=WebSquare.Elem.api.getElementsByTagName(t,"choices",n)[0];if(l){var h=WebSquare.Elem.api.getElementsByTagName(l,"gridItemset",s.v._XML_NAMESPACE.W2)[0];h&&this.initializeGridItemsetObj(h,"grid")}}this.modelControl.setItemset(r.nodeset,r.label,r.value),this.refreshGridItemArr()},l.prototype.initializeGridItemsetObj=function(t,e){try{var i=this.itemsetObj,r=WebSquare.Elem.api.getValue(t,"@nodeset");i.nodeset=null==r?"":r,"/"==i.nodeset.wq_trim().substr(-1)&&(i.nodeset=i.nodeset.wq_trim().slice(0,-1)),this[e+"Options"]=WebSquare.WebSquareparser.parseAttribute(t),
i.labelId=this[e+"Options"].labelId,i.valueId=this[e+"Options"].valueId,i.label=this[e+"Options"].label,i.value=this[e+"Options"].value;for(var a=WebSquare.Elem.api.getElementsByTagName(t,"item",s.v._XML_NAMESPACE.W2),n=[],l=0;l<a.length;l++)n.push(WebSquare.WebSquareparser.parseAttribute(a[l]));if(i.labelId||i.valueId)for(l=0;l<n.length;l++)delete n[l]["@tagName"],i.labelId&&n[l].id===i.labelId&&(i.label=n[l].ref),i.valueId&&n[l].id===i.valueId&&(i.value=n[l].ref);i.items=n}catch(t){o.w.printStackTrace(t)}},l.prototype.refreshGridItemArr=function(){this.itemArr=[],this.gridItemArr=[],this.gridRowItemArr=[];var t=this.itemsetObj;if(t.nodeset)if(t.nodeset.match("data:")){var e=this.modelControl.getDataComp();null!=e&&(this._setDataCollectionItemArr(this.modelControl.id),this.gridItemArr=e.getAllData(),this.gridOptions.dataComp=e)}else{var i=n.z.findInstanceNodes(t.nodeset,null,this.scope_id);if(i)for(var o=0;o<i.length;++o){this.itemArr.push({label:a.L.getValue(i[o],t.label),value:a.L.getValue(i[o],t.value),xml:i[o]});for(var s={},r=0;r<t.items.length;r++){t.items[r].id||(t.items[r].id=this.id+"_items"+r);var l="",h=t.items[r].ref;h&&(t.label&&h===t.label?t.labelId=t.items[r].id:t.value&&h===t.value&&(t.valueId=t.items[r].id),l=a.L.getValue(i[o],h)),this.gridItemArr.push(l),s[t.items[r].id]=l}this.gridRowItemArr.push(s)}}"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype.initializeGridViewItemArr=function(t,e){this.itemsetObj||(this.itemsetObj={nodeset:"",value:"",label:"",items:[]});var i=this.itemsetObj;e=e||"xf";try{var o=t.getTagName();o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}if(t){var r="xf"==e?s.v._XML_NAMESPACE.XFORMS:s.v._XML_NAMESPACE.W2,a=WebSquare.Elem.api.getElementsByTagName(t,"choices",r)[0];if(a){var n=WebSquare.Elem.api.getElementsByTagName(a,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0];n&&this.initializeGridItemsetObj(n,"gridView")}}if("gridViewItemset"===this.options.itemTableType){var l={};for(var h in this.options.itemSet)l[h]=this.options.itemSet[h];for(var h in this.options.gridViewOptions)l[h]=this.options.gridViewOptions[h];l.item=this.options.item,this.setGridItemset(l)}else this.modelControl.setItemset(i.nodeset,i.label,i.value),this.refreshGridViewItemArr()},l.prototype.refreshGridViewItemArr=function(){this.gridViewItemArr=[],this.gridViewRowItemArr=[];var t=this.itemsetObj;if(t.nodeset&&t.nodeset.match("data:")){var e=this.modelControl.getDataComp();if(null!=e){var i="";this.constructor!==WebSquare.uiplugin.cellInfo&&(i=this.modelControl.id),this._setDataCollectionItemArr(i),this.gridViewItemArr=this.modelControl.getDataCollectionItemsetData(i,{allColumn:!0}),this.gridViewOptions.dataComp=e}}"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype._initDisplayMode=function(){try{switch(this.options.displayMode){case"0":case"1":case"2":case"3":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;case"value":this.options.displayMode="3";break;default:this.options.displayMode="0"}}catch(t){o.w.printStackTrace(t)}},l.prototype.getItemText=function(t){try{this._initDisplayMode();var e="";if(t>-1&&t<this.getItemCount())switch(e=this.itemArr[t].label,this.options.displayMode){case"0":break;case"1":e=this.itemArr[t].value+this.options.delimiter+e;break;case"2":e=e+this.options.delimiter+this.itemArr[t].value;break;case"3":e=this.itemArr[t].value}return e}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.getItemCount=function(t){try{try{return this.itemArr.length}catch(t){o.w.printStackTrace(t,null,this)}}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.getVisibleItemCount=function(){try{var t=0;if(this.options.visibleColumn&&this.options.visibleColumnFalseValue)for(var e=0;e<this.itemArr.length;e++)!0!==this.itemArr[e]._hidden&&t++;else t=this.getItemCount();return t}catch(t){o.w.printStackTrace(t,null,this)}},l.prototype.setDisplayMode=function(t){try{
this.options.displayMode=t,this._initDisplayMode()}catch(t){o.w.printStackTrace(t)}}},1:function(t,e,i){"use strict";i.d(e,{s:function(){return b}});var o,s,r,a=i(484),n=i(1974),l=i(5948),h=i(5052),d=i(8683),u=i(1721),c=i(9075),p=i(1454),g=i(1729),m=i(6138),f=i(5118),b=function(t,e,i){try{var o=e&&!0===e.__copyOptions;if(this.parentControl=null,this.childControlList=[],this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.render=null,this.scope_obj=null,this.scope_id=null,this.defaultOptions&&null!=this.defaultOptions.escape&&(this.defaultOptions.escape="false"!==h.v.getConfiguration("/WebSquare/escape/@value")),this._eventBubbling=h.v.getConfiguration("/event.ubbling/@value"),o?this.options=e:i?(this.options=this.getConfiguredOptions(),"treeview"==this.options.pluginName&&e&&e.renderType&&"virtual"==e.renderType&&(this.options=n.x.extendKeepingType(this.options,WebSquare.uiplugin.treeview_virtual.prototype.defaultOptions)),this.options=n.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),this.options.xmlEvents=WebSquare.Parser.parseEvent(i)):this.options=this.getConfiguredOptions(),this.id||(this.id=this.options.id),this.options.id=this.id,e&&(!0===e._skipExtend||o||(this.options=n.x.extendKeepingType(this.options,e)),null==e._idCollisionCheck||o||(this.options._idCollisionCheck=e._idCollisionCheck),e._scope_obj_uuid&&(this.options._scope_obj_uuid=e._scope_obj_uuid,e._scope_obj_org_id&&(this.options._scope_obj_org_id=e._scope_obj_org_id),e._scope_obj_runtime_id&&(this.options._scope_obj_runtime_id=e._scope_obj_runtime_id),this.scope_obj=WebSquare.idCache[this.options._scope_obj_uuid],null!=this.scope_obj&&(this.scope_id=this.scope_obj.id,e._scope_obj_org_id&&e._scope_obj_runtime_id&&(this.id=this.options.id=this.options._scope_obj_runtime_id,this.org_id=this.options._scope_obj_org_id,this.scope_obj.scope||(this.scope_obj.scope={}),this.scope_obj.scope[this.org_id]=this)))),this.options.tooltip=this.options.tooltip||this.options.toolTip,this.options.tooltipSec=this.options.tooltipSec||this.options.toolTipSec,i){var s=WebSquare.Elem.api.getLocalName(i),r=n.x.componentsCache,a=r[s];a||(a=r[s]=[]),a.push(this.uuid),this._wTagName=s}if(this.id){if(null!=window[WebSquare.noConflict].comp[this.id]||null!=window[WebSquare.noConflict].data[this.id])if(this.options._idCollisionCheck)if(null!=window[WebSquare.noConflict].comp[this.id]&&window[WebSquare.noConflict].comp[this.id]._orgUUID==window[WebSquare.noConflict].comp[this.id].uuid)window[WebSquare.noConflict].comp[this.id]._orgId=null,delete window[WebSquare.noConflict].comp[this.id]._orgId;else{if(null==WebSquare.WebSquaredoc.idCollisionList[this.id]){var d=window[WebSquare.noConflict].comp[this.id]||window[WebSquare.noConflict].data[this.id];WebSquare.WebSquaredoc.idCollisionList[this.id]=[d.uuid]}WebSquare.WebSquaredoc.idCollisionList[this.id].push(this.uuid);var u=WebSquare.language.getMessage("E_comp_duplicated_Msg",t)||"id["+t+"] 가 중복사용되었습니다. 소스코드를 확인하세요.";c.k.printLog(u),alert(u)}else try{null!=(d=window[WebSquare.noConflict].comp[this.id]||window[WebSquare.noConflict].data[this.id])&&"function"==typeof d.remove&&d.remove(),c.k.printLog("["+t+"] removed")}catch(t){l.w.printStackTrace(t,null,this)}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,"false"!=h.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&"body"!=this.options.pluginName&&(window[this.id]=this),"body"!=this.options.pluginName&&(window[WebSquare.noConflict].comp[this.id]=this),"selectbox"==this.options.pluginName&&e&&e.renderType&&(this.options.renderType=e.renderType),this.dom={},this.attributes=[],!o&&i&&this.options.parseAttributes&&(this.getAttributeNode=this.getAttributeNode||WebSquare.xfControl.attributes.getAttributeNode,this.setAttributeNode=this.setAttributeNode||WebSquare.xfControl.attributes.setAttributeNode,
this.removeAttributeNode=this.removeAttributeNode||WebSquare.xfControl.attributes.removeAttributeNode),this.activeStatus="stop",this.completed=!1,this.domStatus="",this.modelControl=new WebSquare.modelControl(this.id,this.options.model,this.options.ref,this.options.bind,this.options._scope_obj_uuid),this.event=new f.U,this.initialize(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},this.dataObjInfo={}}catch(t){l.w.printStackTrace(t,null,this)}};n.x.extend(b.prototype,g.$.prototype),n.x.extend(b.prototype,m.i.prototype),b.prototype.defaultOptions={},b.prototype.configuredOptions={},b.prototype.getConfiguredOptions=function(){var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=n.x.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],systemEvents:[],xmlEvents:null,value:"",ref:"",model:"",bind:"",style:"",className:"",tabIndex:"",readOnly:!1,disabled:!1,useLocale:!1,useDefaultLabel:!1,localeRef:"",useConfig:!1,toolTip:"",tooltip:"",parentEvent:"",_idCollisionCheck:!1,_scope_obj_uuid:null,_scope_obj_org_id:"",_scope_obj_runtime_id:"",preventMultipleClick:!1},this.defaultOptions);void 0!==s.useLocale&&"true"===h.v.getConfiguration("/WebSquare/useLocale/@value")&&(s.useLocale=!0,s.useDefaultLabel="true"===h.v.getConfiguration("/WebSquare/useLocale/@useDefaultLabel"));var r=h.v.getConfiguration("/WebSquare/useItemLocale/@value");if(""!==r&&void 0!==r&&(s.useItemLocale=d.D.getBoolean(r)),s.useConfig||d.D.getBoolean(h.v.getConfiguration("/WebSquare/"+i+"/useConfig/@value"))){var a=h.v.getConfig(i);s=n.x.extendKeepingType(s,a)}for(var l in t=[],e=[],s)t.push(l),e.push(s[l]);this.configuredOptions[i]={keys:t,values:e}}for(var u=0;u<t.length;u++)o[t[u]]=e[u];return o},b.prototype.initialize=function(t){},b.prototype.finalize=function(){try{p.B.fireEvent(this,"ondestroyed")}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.applyConfigOption=function(t){try{var e=h.v.getConfig(this.options.pluginName);return t=n.x.extendKeepingType(t,e)}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.setProperty=function(t,e){try{if(this.render[t]!=e){this.render[t]=e;var i="string"==typeof t?t.toLowerCase():t;"disabled"!==i&&"readonly"!==i||(e?this.render.setAttribute(i,i):this.render.removeAttribute(i)),this.onPropertyChange(t,e)}}catch(t){l.w.printStackTrace(t)}return this},b.prototype.getProperty=function(t){try{return this.render[t]}catch(t){l.w.printStackTrace(t)}},b.prototype.setAttribute=function(t,e){try{this.options[t]!=e&&(this.options[t]=e,p.B.fireEvent(this,"onattributechanged",t,e))}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getAttribute=function(t){try{return this.options[t]}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.redraw=function(){try{if(!this.render)return;var t=this.toHTML(),e=t.match(/(\<[^<>]*\>)(.*)(\<\/.*\>)/);if(e&&4==e.length){var i=e[2];this.render.innerHTML=i}else alert("cannot redraw : "+this.id)}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.writeTo=function(t,e,i,o){try{if(this.render)return;var s=this.toHTML().wq_trim(),r=s.indexOf(">")+1,a=s.lastIndexOf("<"),n=a<r,h=s.substring(0,r).wq_trim(),d=n?"":s.substring(r,a),c=n?"":s.substring(a).wq_trim();if(""!=h&&""!=c||""!=h&&n){var p=h.match(/\<([^ \>]*)/)[1].toLowerCase();if({iframe:!0,img:!0,a:!0,source:!0,embed:!0,form:!0,frame:!0,frameset:!0,line:!0,script:!0,object:!0}[p]){h=h.replace(/&/g,"&amp;")}
var g=u.L.parse(h+c),m=WebSquare.WebSquareparser.parseAttribute(g.documentElement);if("table"===p){var f=document.createElement("div");f.innerHTML=s,this.render=f.firstChild;try{for(var b in m)"style"==b?this.render.style.cssText=m[b]:"className"==b?this.render.className=m[b]:this.render[b]=m[b]}catch(t){l.w.printStackTrace(t,null,this)}}else{this.render=document.createElement(p);try{for(var b in m)"style"==b?this.render.style.cssText=m[b]:"className"==b?this.render.className=m[b]:this.render[b]=m[b];d&&"iframe"!=p&&"input"!=p&&"img"!=p&&(this.render.innerHTML=d)}catch(t){l.w.printStackTrace(t,null,this)}}o&&"number"==typeof o.index?t.render?(t.render.insertBefore(this.render,t.render.childNodes[o.index]),this.parentControl!=t&&t.addControl(this)):t.insertBefore&&t.insertBefore(this.render,t.childNodes[o.index]):"number"==typeof e&&t.targetNode?t.render?(t.render.insertBefore(this.render,t.targetNode),this.parentControl!=t&&t.addControl(this)):t.insertBefore?t.insertBefore(this.render,t.targetNode):alert("cannot writeTo : "+this.id):t.render?(t.render.appendChild(this.render),this.parentControl!=t&&t.addControl(this)):t.appendChild?t.appendChild(this.render):alert("cannot writeTo : "+this.id)}try{null!=i&&WebSquare.idCache[i]&&(this.parentFrame=i,WebSquare.idCache[i].childAllControlList.push(this.uuid))}catch(t){l.w.printStackTrace(t,null,this),l.w.printError("parentFrame is not wframe")}}catch(t){l.w.printStackTrace(t,null,this)}},b.appendToRe1=new RegExp("[\\n\\t\\r]*","g"),b.appendToRe2=new RegExp("(^\\<[^<>]*\\>)(.*)(\\<\\/.*\\>$)"),b.appendToRe3=new RegExp("\\<([^ \\>]*)"),b.prototype.appendTo=function(t,e){try{if(this.render)return;var i="",o="",s="",r=this.toHTML().wq_trim(),a=(r=r.replace(WebSquare.xfControl.appendToRe1,"")).match(WebSquare.xfControl.appendToRe2);if(a&&4==a.length?(i=a[1],o=a[2],s=a[3]):a||"<"!=r.charAt(0)||">"!=r.charAt(r.length-1)||(i=r),""!=i){var n=u.L.parse(i+s),h=WebSquare.WebSquareparser.parseAttribute(n.documentElement),c=i.match(WebSquare.xfControl.appendToRe3)[1];this.render=document.createElement(c);try{for(var p in h)"style"!=p?"className"!=p?this.render.setAttribute(p,h[p]):this.render.className=h[p]:this.render.style.cssText=h[p]}catch(t){l.w.printStackTrace(t,null,this)}if("div"==c.toLowerCase())this.render.innerHTML=o;else{var g=u.L.parse(r).documentElement.childNodes;if(g.length>0)for(var m=0;m<g.length;m++){var f=g[m];this.render.appendChild(d.D.XMLToHTML(f))}}t.contentRender?(t.contentRender.appendChild(this.render),t.addControl(this)):t.render?(t.render.appendChild(this.render),t.addControl(this)):t.appendChild?t.appendChild(this.render):alert("cannot appendTo : "+this.id)}try{null!=e&&WebSquare.idCache[e]&&(this.parentFrame=e,WebSquare.idCache[e].childAllControlList.push(this.uuid))}catch(t){l.w.printStackTrace(t,null,this),l.w.printError("parentFrame is not wframe")}}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.appendChild=function(t){try{if(!this.render||!t)return;t.render?this.render.appendChild(t.render):this.render.appendChild(t)}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.refreshDom=function(){try{if(!this.render)return;for(var t=0;t<this.childControlList.length;t++){var e=this.childControlList[t];e.refreshDom(),"new"==e.domStatus&&(e.render?this.render.appendChild(e.render):e.writeTo(this),e.domStatus="")}}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.refresh=function(){},b.prototype.refreshItemset=function(){},b.prototype.preActivate=function(){try{if("stop"!=this.activeStatus)return void c.k.printLog("duplicated call for preActivate");this.setRender();var t=this.childControlList;"wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName||null==t[0]||(t="sync"===this.options.mode?[]:t[0].childControlList);for(var e=0;e<t.length;e++)"stop"==t[e].activeStatus&&t[e].preActivate();this.render&&(this.activeStatus="preActive",this.setPreAction&&this.setPreAction(),this.modelControl.binding())
}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.activate=function(){try{if("active"==this.activeStatus)return void $l("!!!WARNING!!! duplicate call 'activate' for : "+this.id);"stop"==this.activeStatus&&this.preActivate();var t=this.childControlList;"wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName||null==t[0]||(t=[]);for(var e=0;e<t.length;e++)"active"!=t[e].activeStatus&&t[e].activate();if(this.render){if(this.activeStatus="active",this.setUserAction(),this.setAction(),"wframe"===this.options.pluginName||this.options.udcName||"udc2"===this.options.pluginName){var i=null;if(this.options.nextTabID){i=$("#"+this.id+" *:wq:tabbable"),null==WebSquare.tabOrder[this.id]&&(WebSquare.tabOrder[this.id]={});var o=null;this.options.udcName?this.parentFrame&&void 0!==WebSquare.idCache[this.parentFrame]&&(o=WebSquare.idCache[this.parentFrame].id):o=this.scope_id;var s=null!=o?d.D.getComponentById(this.options.nextTabID,o).id:this.options.nextTabID;WebSquare.tabOrder[this.id].nextTabID=s;var r=$(i[i.length-1]).wq()[0];null!=r&&(null==WebSquare.tabOrder[s]&&(WebSquare.tabOrder[s]={}),WebSquare.tabOrder[s].preTabID=r.id,null==WebSquare.tabOrder[r.id]&&(WebSquare.tabOrder[r.id]={}),WebSquare.tabOrder[r.id].nextTabID=s)}if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var a=null;if(null!=this.options.firstTabID?a=d.D.getComponentById(this.options.firstTabID,this.id):(null==i&&(i=$("#"+this.id+" *:wq:tabbable")),a=$(i[0]).wq()[0]),null!=a){var n=WebSquare.tabOrder[this.id].preTabID;WebSquare.tabOrder[n].nextTabID=a.id,null==WebSquare.tabOrder[a.id]&&(WebSquare.tabOrder[a.id]={}),WebSquare.tabOrder[a.id].preTabID=n}}}if(this.options.tabIndex)if("uiplugin.inputCalendar"==this.options.pluginType)this.getElementById(this.id+"_input").tabIndex=this.options.tabIndex;else if("uiplugin.selectbox"==this.options.pluginType&&"native"==this.options.renderType){this.getElementById(this.id+"_input_0").tabIndex=this.options.tabIndex}else this.render.tabIndex=this.options.tabIndex;1==this.options.readOnly&&this.setReadOnly(this.options.readOnly),1==this.options.disabled&&this.setDisabled(this.options.disabled);var u=d.D.getBoolean(h.v.getConfiguration("/WebSquare/hideTooltipDisabledComp/@value"));1==this.options.disabled&&""!=this.options.tooltip&&u||""!=this.options.tooltip&&this.setToolTip(this.render,this.options.tooltip),""!=this.options.tooltipId&&this.setToolTipComp(this.render,this.options.tooltipId),p.B.fireEvent(this,"oncreated",this.options),this.modelControl.isDataCollectionRefBinded&&this.bind("onclick",this.setRefPosition),this.modelControl.isDataCollectionRefBinded}}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.deactivate=function(){try{this.activeStatus="stop";for(var t=0;t<this.childControlList.length;t++)this.childControlList[t].deactivate();this.modelControl.unbinding(),this.event.clearElement(this.render),this.event.clearCache()}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.remove=function(t){try{var e=null;null!=this.render&&(e=this.render.getAttribute("id"));var i=this.getParent();this.destroy(t);var o=null;e&&(o=document.getElementById(e)),null==o||t||(WebSquare.removeNode(o),o=null),i&&i.removeControl(this);var s=WebSquare.getBody()||{};for(var r in s.childControlList)s.childControlList[r]==this&&s.childControlList.splice(r,1)}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.empty=function(){try{return this.destroy(),void(this.render.innerHTML="")}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.adaptDocType=function(){try{if("trigger".indexOf(this.options.pluginName)>-1)return;if(this.render!=document.body){this.render.offsetWidth;var t=this.getStyle("height"),e=this.getStyle("width"),i={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,
paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0};if(t.indexOf("px")>-1){var o=(t=parseInt(t))-(i.paddingTop+i.paddingBottom+i.borderTopWidth+i.borderBottomWidth);this.setStyle("height",o+"px")}else t.indexOf("%");if(e.indexOf("px")>-1){var s=(e=parseInt(e))-(i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth);this.setStyle("width",s+"px")}else e.indexOf("%")}}catch(t){$l("error in adaptDocType : "+this.id),l.w.printStackTrace(t,null,this)}},b.prototype.setRender=function(t){try{t?(this.render&&(this.render.parentNode.insertBefore(t,this.render),this.render.parentNode.removeChild(this.render)),this.render=t):this.render&&null!=this.render.parentElement||(this.render=document.getElementById(this.id)),this.render}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getID=function(){try{return this.id}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getOriginalID=function(){try{return this.org_id?this.org_id:this.id}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.build=function(){try{this.setLayout()}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.setUserAction=function(){try{for(var t in this.options.xmlEvents&&(this.options.xmlEvents=this.event.addUserEvents(this,this.options.xmlEvents,this.options.userEvents),this.options.xmlEvents.length>0&&this.event.addEvents(this,this.options.xmlEvents)),this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.setLayout=function(){},b.prototype.onComplete=function(){if("active"==this.activeStatus&&!this.completed){var t=this.childControlList;if("wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName||null==t[0]||(t=[]),t&&t.length>0)for(var e=0;e<t.length;e++)!t[e].completed&&"function"==typeof t[e].onComplete&&t[e].getPluginName&&"multiupload"!=t[e].getPluginName()&&t[e].onComplete();this.completed=!0}},b.prototype.setToolTip=function(t){var e=this.options.tooltip||this.options.toolTip;WebSquare.getBody().setToolTip(this.render,e),""!=e&&this.render.setAttribute("aria-describedby","_balloonTip"),this.render.tooltipShow=0!=t},b.prototype.setToolTipComp=function(){WebSquare.getBody().setToolTipComp(this.render,this.options.tooltipId)},b.prototype._showTooltip=function(t,e,i){this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2"+this.getPluginName()+"_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),i=this.options.escape?u.L._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i},b.prototype.blur=function(){try{this.render.blur()}catch(t){l.w.printStackTrace(t)}},b.prototype.click=function(){try{this.render.click()}catch(t){l.w.printStackTrace(t)}},b.prototype.focus=function(){try{this.render.focus()}catch(t){l.w.printStackTrace(t)}},b.prototype.select=function(){try{this.render.select()}catch(t){l.w.printStackTrace(t)}},b.prototype.getTabIndex=function(){try{return this.options.tabIndex}catch(t){l.w.printStackTrace(t)}},b.prototype.onPropertyChange=function(t,e){},b.prototype.setDisabled=function(t){try{t=d.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t)}catch(t){l.w.printStackTrace(t)}return t},b.prototype.getDisabled=function(){try{
return this.options&&this.options.disabled}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.setReadOnly=function(t){try{t=d.D.getBoolean(t),this.options.readOnly=t,this.setProperty("readOnly",t)}catch(t){l.w.printStackTrace(t,null,this)}return t},b.prototype.getReadOnly=function(){try{return this.options.readOnly}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getRef=function(){try{return this.options.ref}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.displayLocaleValue=function(){if(this.options.useLocale&&this.options.localeRef){var t=this.getLocaleValue(this.options.localeRef);t&&this.setValue(t)}},b.prototype.getLocaleValue=function(t){if(void 0!==t&&null!=t||(t=this.options.localeRef),void 0!==t){t=t.wq_trim();var e=WebSquare.WebSquareLang[t];null==e&&(e=this.options.useDefaultLabel?"":"global_undefined")}return e},b.prototype.getDomList=function(t,e,i){return i=i||this.render,null==this.dom[t]&&(this.dom[t]=i.getElementsByTagName(e)),this.dom[t]},b.prototype.getElementById=function(t){return null==this.dom[t]&&(this.dom[t]=document.getElementById(t)),this.dom[t]},b.prototype.getPluginName=function(){return this.options.pluginName},b.prototype.toHTML=function(){alert("you should override 'toHTML' for "+this.id)},b.prototype.setAction=function(){alert("you should override 'setAction' for "+this.id)},b.prototype.childFiredEvent=function(t,e){arguments[0]=this,p.B.fireEvent.apply(null,arguments)},b.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};if(this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),"active"==this.activeStatus){var s=this.event.addUserEvents(this,[o],this.options.userEvents);s.length>0&&this.event.addEvents(this,s)}}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.bind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t){var i=(t=t.toLowerCase()).indexOf("(");i>=0&&(t=t.slice(0,i))}this.addEvent(t,e)}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.trigger=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t){var i=(t=t.toLowerCase()).indexOf("(");i>=0&&(t=t.slice(0,i))}var o=!1;if(null!=this.options.userEvents)for(var s=0;s<this.options.userEvents.length;s++)if(this.options.userEvents[s]===t){o=!0;break}if(!o&&p.B.isEventSupported(this.render,t))e&&e.constructor==Array?p.B.fireSystemEvent(this,t,e[0]):p.B.fireSystemEvent(this,t);else{var r=[this,t];r=r.concat(e),p.B.fireEvent.apply(p.B.fireEvent,r),r[0]=null}}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t){var i=(t=t.toLowerCase()).indexOf("(");i>=0&&(t=t.slice(0,i))}if("string"==typeof t&&"function"==typeof e)for(var o=this.userEventList.length-1;o>=0;o--)t===this.userEventList[o].name&&e===this.userEventList[o].param.handler&&(this.userEventList.splice(o,1),"object"===(0,a.Z)(this.systemEventList[t])&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(o=this.userEventList.length-1;o>=0;o--)t===this.userEventList[o].name&&this.userEventList.splice(o,1);"object"===(0,a.Z)(this.systemEventList[t])&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var s in this.systemEventList)this.event.removeListener(this.render,s,this.systemEventList[s].handler);this.userEventList=[],this.systemEventList={}}this.options&&this.options.xmlEvents&&this.userEventList&&(this.options.xmlEvents=this.userEventList.slice())}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0
;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},b.prototype.getGenerator=function(){for(var t=this;t.parentControl&&(!(t=t.parentControl).options||"generator"!=t.options.pluginName););return t},b.prototype.getGeneratedIndex=function(){if(!this.options)return null;for(var t=this.getGenerator(),e=0;e<t.generatedIndexSet.length;e++)if(this.options.g_index==t.generatedIndexSet[e])return e},b.prototype.getGeneratedComponent=function(t){var e=this.getGeneratedIndex();return this.getGenerator().getChild(e,t)},b.prototype.getAttributesString=function(t){try{var e,i=" ";if(t)for(var o in t)"@"!=o.charAt(0)&&(i+=o+"='"+(e=t[o]+"").wq_replaceAll("'","&#39;")+"' ");else if(this.options.parseAttributes){0==this.attributes.length&&this.element&&(this.attributes=WebSquare.Parser.parseAttributesNode(this.element));for(o=0;o<this.attributes.length;o++)e=this.attributes[o].value?this.attributes[o].value.wq_replaceAll("'","&#39;"):"",i+=this.attributes[o].name+"='"+e+"' "}return i}catch(t){return l.w.printStackTrace(t,null,this),""}},b.prototype.invoke=function(t,e,i,o){try{i=n.x.extend({excludePlugin:"",excludeId:"",includePlugin:"",includeId:""},i||{}),o=o||[];if(!this.getPluginName){if(this.childControlList)for(var s=0;s<this.childControlList.length;s++)WebSquare.xfControl.prototype.invoke.call(this.childControlList[s],t,e,i,o);return}var r={group:!0,tabContainer:!0,Switch:!0,repeat:!0};if(!r[this.getPluginName()])return void $l("The components 'invoke' is not capable of running the component["+this.id+"].");var a=this.getChildren();for(s=0;s<a.length;s++){var h=a[s];if(h.getPluginName)if(r[h.getPluginName()])h.invoke(t,e,i,o);else{if(i.includePlugin.wq_trim().length>0||i.includeId.wq_trim().length>0){if(-1===(" "+i.includePlugin+" ").indexOf(" "+h.options.pluginName+" ")&&-1===(" "+i.includeId+" ").indexOf(" "+h.id+" "))continue}else if((" "+i.excludePlugin+" ").indexOf(" "+h.options.pluginName+" ")>-1||(" "+i.excludeId+" ").indexOf(" "+h.id+" ")>-1)continue;switch(t){case"assert":if(h.getValue){var d="";if(d="function"==typeof e?e(h):e,h.getValue()==d)(u={}).id=h.id,u.org_id=h.getOriginalID(),u.result=!0,o.push(u);else(u={}).id=h.id,u.org_id=h.getOriginalID(),u.result=!1,o.push(u)}break;default:var u;if(h[t]&&"function"==typeof h[t])if("function"==typeof e)(u={}).id=h.id,u.org_id=h.getOriginalID(),u.result=h[t](e(h)),o.push(u);else(u={}).id=h.id,u.org_id=h.getOriginalID(),u.result=h[t](e),o.push(u)}}else WebSquare.xfControl.prototype.invoke.call(h,t,e,i,o)}return o}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getTitle=function(){return this.render.getAttribute("title")},b.prototype.setTitle=function(t){this.render.setAttribute("title",t)},b.prototype.makeScope=function(t){if(this.scope||(this.scope={}),t.childControlList)for(var e=0;e<t.childControlList.length;e++){var i=t.childControlList[e];i.org_id&&(this.scope[i.org_id]=i),i.options&&("wframe"===i.options.pluginName||i.options.udcName)||this.makeScope(i)}},b.attributes=(o={a:["href","target","name","title"]},s={},r=function(t){var e=s[t];if(!e){var i=o[t];if(e={},i)for(var r=0;r<i.length;r++)e[i[r]]=!0;var a=h.v.getConfig("attributes/whiteList");if(a&&a[t]){var n=a[t].split(",");for(r=0;r<n.length;r++)e[n[r]]=!0}s[t]=e}return e},{getAttributeNode:function(t){try{return this.render.getAttribute(t)}catch(t){l.w.printStackTrace(t)}},setAttributeNode:function(t,e){try{r(this.options.tagname)[t]?this.render.setAttribute(t,e):c.k.printLog("Cannot set '"+t+"' attribute node on ["+this.id+"]. See attributes configurations.")}catch(t){l.w.printStackTrace(t)}},removeAttributeNode:function(t){try{r(this.options.tagname)[t]?this.render.removeAttribute(t):c.k.printLog("Cannot remove '"+t+"' attribute node on ["+this.id+"]. See attributes configurations.")}catch(t){l.w.printStackTrace(t)}}}),b.prototype.broadcast=function(t){try{for(var e in this.dataObjInfo){var i=this.dataObjInfo[e];switch(i.initializeType){
case"linkedDataList":t.linkedDataList&&i[t.linkedDataList[0]].apply(i,t.linkedDataList[1]||[])}}this.element&&("w2:grid"!=this.element.tagName&&"w2:gridView"!=this.element.tagName||t.gridView&&this[t.gridView[0]].apply(this,t.gridView[1]))}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.rollback=function(){try{var t=this.modelControl.getData(),e=this.getValue(),i=this.options.keepValue?e:t;i!=e&&this.setValue(i)}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.setRefPosition=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t=WebSquare.DataCollection.api.getObj(this.modelControl.dataCollectionRefInfo.dataComp);if(t)switch(t.initializeType){case"dataList":if("number"==typeof t.rowPosition){var e=t.getColumnPosition(),i=this.modelControl.dataCollectionRefInfo.colID;e!=i&&t.setColumnPosition(i)}}}}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.fireRefEvent=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t=WebSquare.DataCollection.api.getObj(this.modelControl.dataCollectionRefInfo.dataComp);if(t)switch(t.initializeType){case"dataList":if("number"==typeof t.rowPosition){var e=t.getColumnPosition(),i=this.modelControl.dataCollectionRefInfo.colID,o=this.getValue();if(e==i)!1===t.fireOnBeforeColumnChangeEvent({newValue:o})&&this.rollback()}}}}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.clone=function(t,e){try{var i=this.element.cloneNode(!0);i.setAttribute("id",t);var o=d.D.dynamicCreate(t,this.options.pluginName,i,e);return o.attributes=this.attributes,o.getAttributeNode=this.getAttributeNode,o.setAttributeNode=this.setAttributeNode,o.removeAttributeNode=this.removeAttributeNode,o}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype._clone=function(t){try{var e=d.D._copyOptions(this.options);e.id=t.getAttribute("id")||null,e.g_index=t.getAttribute("g_index");var i=WebSquare.controlFactory.createControl(null,e,t,this.scope_obj,!0,this.parentFrame);return i.attributes=this.attributes,i.getAttributeNode=this.getAttributeNode,i.setAttributeNode=this.setAttributeNode,i.removeAttributeNode=this.removeAttributeNode,i}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype._cloneRecursive=function(t){try{if(!t)return;var e=this._clone(t),i=this.childControlList;if(i.length>0){for(var o=[],s=t.getChildNodes(),r=0;r<s.length;r++){var a=s[r];1===a.nodeType&&null==WebSquare.controlFactory.createControlHash[a.getLocalName()]&&o.push(a)}var n=0;for(r=0;r<i.length;r++){if("function"==typeof i[r]._cloneRecursive)e.addControl(i[r]._cloneRecursive(o[n]));else if(i[r].constructor===WebSquare.tag){var h=new WebSquare.tag(null,null,i[r].element);h.scope_id=i[r].scope_id,h.scope_obj=i[r].scope_obj,e.addControl(h),n--}n++}}return e}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getURL=function(t,e){try{var i={tempHome:this.getUdcRoot(),msaName:this._getMsaName()};for(var o in e)i[o]=e[o];return h.v.getURL(t,i)}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getImageURL=function(t,e){try{return h.v.getImageURL(t,{tempHome:this.getUdcRoot(),msaName:this._getMsaName()})}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getUdcHome=function(){},b.prototype.getUdcRoot=function(){try{if(null!=this.scope_obj&&this.scope_obj.options)return this.scope_obj.options.udcHome}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){l.w.printStackTrace(t,null,this)}},b._resizeInfo={},b.addCheckResize=function(t,e){try{WebSquare.xfControl._resizeInfo[t]=e,d.D.setInterval(WebSquare.xfControl.checkResize,{key:"WebSquare_xfControl_checkResize",delay:70})}catch(t){l.w.printStackTrace(t,null,this)}},b.removeCheckResize=function(t){try{delete WebSquare.xfControl._resizeInfo[t]}catch(t){
l.w.printStackTrace(t,null,this)}},b.checkResize=function(){try{var t=0;for(var e in WebSquare.xfControl._resizeInfo){var i=WebSquare.idCache[e];i&&(i[b._resizeInfo[e]](),t++)}0===t&&d.D.clearInterval("WebSquare_xfControl_checkResize")}catch(t){l.w.printStackTrace(t,null,this)}},b.prototype._getMsaName=function(){try{return this.scope_obj?this.scope_obj._getMsaName():""}catch(t){l.w.printStackTrace(t,null,this)}}},5784:function(t,e,i){"use strict";i.d(e,{D:function(){return o}});var o=function(t){t.constructor===Object?this._elementType="json":this._elementType="xml",this._element=t,this.nodeType=this.getNodeType()};o.prototype.create=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new WebSquare.Elem(t[i]));return e},o.prototype.getNodeType=function(){return"xml"===this._elementType?this._element.nodeType:this._element.T},o.prototype.getNodeValue=function(){var t=null;if("xml"===this._elementType)t=this._element.nodeValue;else if("json"===this._elementType){var e=this._element.T,i=3===e?"text":4===e?"cdata":7===e?"instruction":8===e?"commnet":null;t=null!==i?this._element[i]:null}return t},o.prototype.setNodeValue=function(t){if("xml"===this._elementType)this._element.nodeValue=t;else if("json"===this._elementType){var e=this._element.T,i=3===e?"text":4===e?"cdata":7===e?"instruction":8===e?"commnet":null;null!==i&&(this._element[i]=t)}},o.prototype.getElementsByTagName=function(t){var e=[];return"xml"===this._elementType?e=this._element.getElementsByTagName(t):"json"===this._elementType&&(e=WebSquare.jsonUtil.getNodesByTagName(this._element,t)),this.create(e)},o.prototype.getAttribute=function(t){return"xml"===this._elementType?this._element.getAttribute(t):WebSquare.jsonUtil.getAttribute(this._element,t)},o.prototype.getAttributes=function(){return"xml"===this._elementType?this._element.attributes:WebSquare.jsonUtil.getAttributes(this._element)},o.prototype.setAttribute=function(t,e){var i=void 0;return"xml"===this._elementType?i=this._element.setAttribute(t,e):"json"===this._elementType&&(i=WebSquare.jsonUtil.setAttribute(this._element,t,e)),i},o.prototype.removeAttribute=function(t){var e=void 0;return"xml"===this._elementType?e=this._element.removeAttribute(t):"json"===this._elementType&&(e=WebSquare.jsonUtil.removeAttribute(this._element,t)),e},o.prototype.getTagName=function(){var t="";return"xml"===this._elementType?t=this._element.nodeName:"json"===this._elementType&&(t=this._element.N),t},o.prototype.getLocalName=function(){var t=void 0;if("xml"===this._elementType){var e=this._element.nodeName.split(":");t=2===e.length?e[1]:e[0]}else"json"===this._elementType&&(t=WebSquare.jsonUtil.dropNS(this._element.N));return t},o.prototype.getNamespace=function(){var t="";if("xml"===this._elementType){var e=this._element.nodeName.split(":");t=2===e.length?e[0]:""}else"json"===this._elementType&&(t=WebSquare.jsonUtil.getNS(this._element.N));return t},o.prototype.getParentNode=function(){var t=void 0;return"xml"===this._elementType?t=this._element.parentNode:"json"===this._elementType&&(WebSquare.WebSquaredoc&&"function"==typeof WebSquare.WebSquaredoc.initParent&&WebSquare.WebSquaredoc.initParent(),t=this._element.parent),new WebSquare.Elem(t)},o.prototype.getChildNodes=function(){var t=[];return"xml"===this._elementType?t=this._element.childNodes:"json"===this._elementType&&(t=WebSquare.jsonUtil.getChildNodes(this._element)),this.create(t)},o.prototype.getValue=function(t,e){var i="";return t.startsWith("@")?i=this.getAttribute(t.substring(1)):(i=this.getElementsByTagName(t)[0],void 0!==e&&(i=i.getAttribute(e))),i},o.prototype.appendChild=function(t){return"xml"===this._elementType?this._element.appendChild(t):WebSquare.jsonUtil.appendChild(this._element,t)},o.prototype.removeChild=function(t){return"xml"===this._elementType?this._element.removeChild(t):WebSquare.jsonUtil.removeChild(this._element,t)},o.prototype.cloneNode=function(t){var e=null
;return e="xml"===this._elementType?this._element.cloneNode(t):WebSquare.jsonUtil.cloneNode(this._element,t),new WebSquare.Elem(e)},o.prototype.serialize=function(){return"xml"===this._elementType?WebSquare.xml.serialize(this._elemen):WebSquare.jsonUtil.serialize(this._element)},o.api={},o.api.create=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new WebSquare.Elem(t[i]));return e},o.api.getLocalName=function(t){var e=t;return t instanceof WebSquare.Elem||(e=new WebSquare.Elem(t)),e.getLocalName()},o.api.getElementsByTagName=function(t,e,i){var o=[],s=t;return t instanceof WebSquare.Elem||(s=new WebSquare.Elem(t)),"xml"===s._elementType?o=WebSquare.xml.getElementsByTagName(s._element,e,i):"json"===s._elementType&&(o=WebSquare.jsonUtil.getNodesByTagName(s._element,e,i)),this.create(o)},o.api.getAttribute=function(t,e){var i=t;return t instanceof WebSquare.Elem||(i=new WebSquare.Elem(t)),i.getAttribute(e)},o.api.getValue=function(t,e,i){var o=t;return t instanceof WebSquare.Elem||(o=new WebSquare.Elem(t)),o.getValue(e,i)},o.api.getCDataNodeValue=function(t){var e="",i=t;return t instanceof WebSquare.Elem||(i=new WebSquare.Elem(t)),"xml"===i._elementType?e=WebSquare.xml.getCDataNodeValue(i._element):"json"===i._elementType&&(e=WebSquare.jsonUtil.getCDataNodeValue(i._element)),e},o.api.getTextNodeValue=function(t){var e="",i=t;return t instanceof WebSquare.Elem||(i=new WebSquare.Elem(t)),"xml"===i._elementType?e=WebSquare.xml.getTextNodeValue(i._element):"json"===i._elementType&&(e=WebSquare.jsonUtil.getTextNodeValue(i._element)),e},o.api.findNodes=function(t,e){var i=[],o=t;return t instanceof WebSquare.Elem||(o=new WebSquare.Elem(t)),"xml"===o._elementType?i=WebSquare.xml.findNodes(o._element,e):"json"===o._elementType&&(i=WebSquare.jsonUtil.findNodes(o._element,e)),i},o.type={element:1,attribute:2,text:3,cdata:4,instruction:7,comment:8,document:9}},7537:function(t,e,i){"use strict";i.d(e,{z:function(){return a}});var o=i(484),s=i(5948),r=i(9075),a={setBindElement:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(i).instances[0].id;t.startsWith("instance(")||null==o?t.indexOf('"')>-1&&(t=t.replace('"',"'")):t=WebSquare.ModelUtil.concatInstanceFunction(t,o),void 0!==WebSquare.WebSquaredoc.boundElementCache[t]&&null!=WebSquare.WebSquaredoc.boundElementCache[t]||(WebSquare.WebSquaredoc.boundElementCache[t]={}),WebSquare.WebSquaredoc.boundElementCache[t][e]=e},setItemsetElement:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(i).instances[0].id;t.startsWith("instance(")||null==o?t.indexOf('"')>-1&&(t=t.replace('"',"'")):t=WebSquare.ModelUtil.concatInstanceFunction(t,o),void 0!==WebSquare.WebSquaredoc.boundElementCache[t]&&null!=WebSquare.WebSquaredoc.boundElementCache[t]||(WebSquare.WebSquaredoc.boundElementCache[t]={}),WebSquare.WebSquaredoc.boundElementCache[t][e]=e},createItemsetElement:function(t,e,i,o){try{this.nodeset=t,this.instance=WebSquare.ModelUtil.getInstanceByXPath(this.nodeset),this.filteredNodeset=WebSquare.ModelUtil.filterInstanceFunction(this.nodeset),this.id=o,this.label=e,this.value=i,this.nodeset.indexOf("/")==t.length-1&&(this.nodeset=this.nodeset.substring(0,t.length-1)),0==this.label.indexOf("/")?this.labelXPath=this.nodeset+this.label:this.labelXPath=this.nodeset+"/"+this.label,0==this.value.indexOf("/")?this.valueXPath=this.nodeset+this.value:this.valueXPath=this.nodeset+"/"+this.value}catch(t){s.w.printStackTrace(t)}},createRefElement:function(t,e){try{this.nodeset=t,this.id=e,this.instance=WebSquare.ModelUtil.getInstanceByXPath(this.nodeset),this.filteredNodeset=WebSquare.ModelUtil.filterInstanceFunction(this.nodeset)}catch(t){s.w.printStackTrace(t)}},createInstanceRefElement:function(t,e,i,o,r,a){try{this.xpath=t,this.id=e,this.baseNode=i,this.repeatNodeTagName=o,this.cellIdList=r,this.repeatxpath=t+"/"+o[0],this.scopeId=a}catch(t){s.w.printStackTrace(t)}},getBind:function(t,e){try{var i=WebSquare.ModelUtil.getModelByID(e);for(var o in i.binds){
var r=WebSquare.WebSquaredoc.models[0].binds[o];if(r.id==t)return r}return null}catch(t){s.w.printStackTrace(t)}},filterInstanceFunction:function(t){return t.startsWith("instance(")&&(t=t.substring(t.indexOf(")")+2,t.length)),t},concatInstanceFunction:function(t,e){var i=t;return t.startsWith("instance(")||(i="instance('"+e+"')/"+t),i},findInstanceNode:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._findInstanceNode(arguments[0]):this._findInstanceNode({xpath:t,modelId:e,scopeId:i})}catch(t){s.w.printStackTrace(t)}},_findInstanceNode:function(t){var e=t.xpath||"",i=t.modelId||"",o=t.scopeId||"",s=t.instanceId||"",r=s?this.getInstanceByID(s,i,o):this.getInstanceByXPath(e,i,o);return e=WebSquare.ModelUtil.filterInstanceFunction(e),WebSquare.xml.findNode(r.document,e)},findSerializedNode:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._findSerializedNode(arguments[0]):this._findSerializedNode({xpath:t,modelId:e,scopeId:i})}catch(t){s.w.printStackTrace(t)}},_findSerializedNode:function(t){try{var e=t.xpath||"",i=t.modelId||"",o=t.scopeId||"",r=t.instanceId||"";return WebSquare.xml.serialize(WebSquare.ModelUtil.findInstanceNode({xpath:e,modelId:i,scopeId:o,instanceId:r}))}catch(t){s.w.printStackTrace(t)}},findInstanceNodes:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._findInstanceNodes(arguments[0]):this._findInstanceNodes({xpath:t,modelId:e,scopeId:i})}catch(t){s.w.printStackTrace(t)}},_findInstanceNodes:function(t){try{var e=t.xpath||"",i=t.modelId||"",o=t.scopeId||"",r=t.instanceId||"",a=r?this.getInstanceByID(r,i,o):this.getInstanceByXPath(e,i,o);return WebSquare.xml.findNodes(a.document,e)}catch(t){s.w.printStackTrace(t)}},getInstanceValue:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._getInstanceValue(arguments[0]):this._getInstanceValue({xpath:t,modelId:e,scopeId:i})}catch(t){s.w.printStackTrace(t)}},_getInstanceValue:function(t){try{var e=t.xpath||"",i=t.modelId||"",o=t.scopeId||"",r=t.instanceId||"",a="",n=this.findInstanceNode({xpath:e,modelId:i,scopeId:o,instanceId:r});if(null==n)return"";if(1!=n.nodeType)return n.nodeValue;for(var l=n.firstChild;null!=l;l=l.nextSibling)3!=l.nodeType&&4!=l.nodeType||(a+=l.nodeValue);return a}catch(t){s.w.printStackTrace(t)}},setInstanceValue:function(t,e,i,r){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._setInstanceValue(arguments[0]):this._setInstanceValue({xpath:t,value:e,modelId:i,scopeId:r})}catch(t){s.w.printStackTrace(t)}},_setInstanceValue:function(t){try{var e=t.xpath||"",i=t.value,o=t.modelId||"",a=t.scopeId||"",n=t.instanceId||"",l=!!t.noRefresh,h=t.gridNoRefresh,d=this.getInstanceByID(n,o,a);if(i=void 0===i||null==i?"":i+"",-1!=e.lastIndexOf("/@")&&e.lastIndexOf("/")==e.lastIndexOf("/@")){var u=e.lastIndexOf("/@"),c=e.substring(u+2),p=e.substring(0,u),g=WebSquare.ModelUtil.findInstanceNode({xpath:p,modelId:o,scopeId:a,instanceId:n});if(null==g){if(null==(m=WebSquare.xml.createNode(d.document,p)))return!1;m.setAttribute(c,i)}else g.setAttribute(c,i);l||WebSquare.WebSquaredoc.detectChange(e,void 0,o,{op:"setInstanceValue",value:i,xpath:p,scope_id:a})}else{var m;if(null==(m=WebSquare.ModelUtil.findInstanceNode({xpath:e,modelId:o,scopeId:a,instanceId:n})))if(null==(m=WebSquare.xml.createNode(d.document,e)))return!1;if(null==m.firstChild){var f=m.ownerDocument.createTextNode(i);WebSquare.xml.appendChild(m,f)}else m.firstChild.nodeValue=i;l||WebSquare.WebSquaredoc.detectChange(e,void 0,o,{op:"setInstanceValue",value:i,xpath:e,gridNoRefresh:h,scope_id:a})}}catch(t){return r.k.printlog("ERROR["+e+"] ["+i+"] at WebSquare.ModelUtil.setInstanceValue "),s.w.printStackTrace(t),!1}return!0},setInstanceNode:function(t,e,i,s,r,a){
return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._setInstanceNode(arguments[0]):this._setInstanceNode({doc:t,xpath:e,modelID:i,mode:s,refresh:r,scopeId:a})},_setInstanceNode:function(t){var e=null;try{var i=t.doc,o=t.xpath||"",a=t.modelID||"",n=t.mode,l=t.refresh,h=t.scopeId||"",d=t.instanceId||"";9==i.nodeType&&(i=i.documentElement);try{var u=d?this.getInstanceByID(d,a,h):this.getInstanceByXPath(o,a,h),c=WebSquare.ModelUtil.filterInstanceFunction(o);e=WebSquare.xml.createNode(u.document,c)}catch(t){throw t}if(null==e){var p=new Error;throw p.number=0,p.description="[WebSquare.ModelUtil.setInstanceNode] destNode가 존재하지 않습니다.",p}var g,m,f=i.cloneNode(!0);if("replace"==n){if((g=this.getInstanceRefElementIndex(o,void 0,h))<0){m=o+"/"+i.tagName;for(var b=i;b&&!((g=this.getInstanceRefElementIndex(m,void 0,h))>=0);)m=m+"/"+b.tagName,b=b.childNodes[0]?b.childNodes[0]:null}}else g=this.getInstanceRefElementIndex(o,void 0,h);switch(n){case"append":WebSquare.xml.appendChild(e,f);break;case"insertBeforeSibling":e.parentNode.insertBefore(f,e);break;case"appendSibling":WebSquare.xml.appendChild(e.parentNode,f);break;case"replace":default:n="replace";for(var y=e.childNodes,v=y.length-1;v>=0;v--)e.removeChild(y.item(v));WebSquare.xml.appendChild(e,f)}var w=WebSquare.ModelUtil.getModelByID();WebSquare.WebSquaredoc.unrender(o);var S=WebSquare.ModelUtil._getNodePath(f);"replace"!==n&&S?w.refresh(n,o+"/"+S):w.refresh(n),0!=l&&g>=0&&WebSquare.WebSquaredoc.detectChange(o,void 0,a,{op:"setInstanceNode",node:f,replaceNode:b,type:n,xpath:o,replacexpath:m,scope_id:h})}catch(t){r.k.printlog("ERROR [xpath:"+o+"] at WebSquare.ModelUtil.setInstanceNode "),s.w.printStackTrace(t)}},setInstanceLastNodeChildNodes:function(t,e,i,s,r,a){return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._setInstanceLastNodeChildNodes(arguments[0]):this._setInstanceLastNodeChildNodes({doc:t,xpath:e,modelID:i,mode:s,refresh:r,scopeId:a})},_setInstanceLastNodeChildNodes:function(t){var e=null;try{var i=t.doc,o=t.xpath||"",a=t.modelID||"",n=t.mode,l=t.refresh,h=t.scopeId||"",d=t.instanceId||"";9==i.nodeType&&(i=i.documentElement);try{var u=d?this.getInstanceByID(d,a,h):this.getInstanceByXPath(o,a,h),c=WebSquare.ModelUtil.filterInstanceFunction(o);e=WebSquare.xml.createNode(u.document,c)}catch(t){throw t}if(null==e){var p=new Error;throw p.number=0,p.description="[WebSquare.ModelUtil.setInstanceNode] destNode가 존재하지 않습니다.",p}var g,m,f=i.cloneNode(!0),b=o.split("/"),y=o.split("[")[0],v=b[b.length-1].match(/[^[\]]+(?=])/)[0],w=this.getInstanceRefElementIndex(o,void 0,h);switch(("replace"==n||"append"==n)&&w>=0&&f.childNodes.length>0&&(m=f.tagName),"append"!=n||WebSquare.xml.hasChildElement(e)||(n="replace"),n){case"append":for(var S=f.childNodes,C=0;C<=S.length-1;C++){if(1==(I=S.item(C)).nodeType){var x=WebSquare.xml.parse(WebSquare.xml.serialize(I)).documentElement;WebSquare.xml.appendChild(e,x)}}break;case"replace":default:n="replace";var _=e.childNodes;for(S=f.childNodes,C=_.length-1;C>=0;C--)e.removeChild(_.item(C));w>=0&&(g=f);for(C=0;C<=S.length-1;C++){var I;if(1==(I=S.item(C)).nodeType){x=WebSquare.xml.parse(WebSquare.xml.serialize(I)).documentElement;WebSquare.xml.appendChild(e,x)}}}var T=WebSquare.ModelUtil.getModelByID();WebSquare.WebSquaredoc.unrender(o),T.refresh(n),0!=l&&w>=0&&g&&g.childNodes.length>0&&WebSquare.WebSquaredoc.detectChange(o,void 0,a,{op:"setInstanceLastNodeChildNodes",repeatNode:m,node:g,type:n,xpath:y,changeIndex:v,scope_id:h})}catch(t){r.k.printlog("ERROR [xpath:"+o+"] at WebSquare.ModelUtil.setInstanceNode "),s.w.printStackTrace(t)}},setInstanceChildNodes:function(t,e,i,s,r,a){return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._setInstanceChildNodes(arguments[0]):this._setInstanceChildNodes({doc:t,xpath:e,modelID:i,mode:s,refresh:r,scopeId:a})},_setInstanceChildNodes:function(t){var e=null;try{
var i=t.doc,o=t.xpath||"",a=t.modelID||"",n=t.mode,l=t.scopeId||"",h=t.instanceId||"";if(-1!=(I=o.split("/"))[I.length-1].indexOf("["))return this._setInstanceLastNodeChildNodes({doc:t.doc,xpath:t.xpath,modelID:t.modelID,mode:t.mode,refresh:t.refresh,instanceId:t.instanceId,scopeId:t.scopeId});9==i.nodeType&&(i=i.documentElement);try{var d=h?this.getInstanceByID(h,a,l):this.getInstanceByXPath(o,a,l),u=WebSquare.ModelUtil.filterInstanceFunction(o);e=WebSquare.xml.createNode(d.document,u)}catch(t){throw t}if(null==e){var c=new Error;throw c.number=0,c.description="[WebSquare.ModelUtil.setInstanceNode] destNode가 존재하지 않습니다.",c}var p=i.cloneNode(!0),g=[],m=[],f=this.getInstanceRefElementIndex(o,void 0,l),b=[];if("append"==n){for(var y=0,v=0;v<e.childNodes.length;v++)1==e.childNodes[v].nodeType&&y++;0==y&&(n="replace")}if("replace"==n&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var w=0;w<WebSquare.WebSquaredoc.instanceRefElement.length;w++){var S=WebSquare.WebSquaredoc.instanceRefElement[w].xpath,C=WebSquare.WebSquaredoc.instanceRefElement[w].baseNode,x=WebSquare.WebSquaredoc.instanceRefElement[w].repeatNodeTagName.join("/");if(WebSquare.ModelUtil.isPartialMatchedXPath(S,o)){var _=WebSquare.WebSquaredoc.instanceRefElement[w].scopeId;if(!_||l===_){var I=o.split("/"),T=o;if(S.split("/").length>I.length)if(f>=0&&C==p.tagName)g.push(p),b.push(T);else{var k=WebSquare.ModelUtil.getMatchedData(p,S,C,p.tagName,o);null!=k&&(m.push(k.baseNode),g.push(k.dataNode),b.push(S))}else for(var D=0;D<p.childNodes.length;D++)1==i.nodeType&&p.childNodes[D].tagName==x&&(C!=p.tagName?m.push(p.tagName):m.push(null),g.push(p),b.push(S))}}}switch(n){case"append":var L=p.childNodes;if(f>=0){S=WebSquare.WebSquaredoc.instanceRefElement[f].xpath,C=WebSquare.WebSquaredoc.instanceRefElement[f].baseNode,x=WebSquare.WebSquaredoc.instanceRefElement[f].repeatNodeTagName.join("/");if(m.length>0){if(!g)for(w=0;w<L.length;w++)if(L[w].tagName==m){g.push(L[w]),b.push(S);break}}else C!=p.tagName?m.push(p.tagName):m.push(null),g.push(p),b.push(S)}for(D=0;D<=L.length-1;D++){if(1==(E=L.item(D)).nodeType){var W=WebSquare.xml.parse(WebSquare.xml.serialize(E)).documentElement;WebSquare.xml.appendChild(e,W)}}break;case"replace":default:n="replace";var A=e.childNodes;for(L=p.childNodes,D=A.length-1;D>=0;D--)e.removeChild(A.item(D));for(D=0;D<=L.length-1;D++){var E;if(1==(E=L.item(D)).nodeType){W=WebSquare.xml.parse(WebSquare.xml.serialize(E)).documentElement;WebSquare.xml.appendChild(e,W)}}}var M=WebSquare.ModelUtil.getModelByID();if(WebSquare.WebSquaredoc.unrender(o),M.refresh(n),g.length)for(w=0;w<b.length;w++)WebSquare.WebSquaredoc.detectChange(o,void 0,a,{op:"setInstanceChildNodes",node:g[w],baseNode:m[w],type:n,xpath:b[w],scope_id:l});else if("replace"==n)for(D=0;D<WebSquare.WebSquaredoc.instanceRefElement.length;D++){var q=WebSquare.WebSquaredoc.instanceRefElement[D];if((!q.scopeId||l===q.scopeId)&&-1!=q.xpath.indexOf(o)){var R=WebSquare.ModelUtil.findInstanceNode(q.xpath,void 0,l);(!R||R&&0==R.childNodes.length)&&WebSquare.WebSquaredoc.detectChange(o,void 0,null,{op:"removeInstanceNodeAll",node:p,xpath:o,scope_id:l})}}}catch(t){r.k.printlog("ERROR [xpath:"+o+"] at WebSquare.ModelUtil.setInstanceNode "),s.w.printStackTrace(t)}},getModelByID:function(t){if(void 0===t||null==t||""==t)return WebSquare.WebSquaredoc.models[0];for(var e=0;e<WebSquare.WebSquaredoc.models.length;e++)if(WebSquare.WebSquaredoc.models[e].id==t)return WebSquare.WebSquaredoc.models[e];return null},getInstanceByXPath:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(e);if((t=t.wq_trim()).startsWith("instance(")){var s=t.indexOf("("),r=t.indexOf(")"),a=new Function("return "+t.substring(s+1,r))();for(var n in o.instances){var l=o.instances[n];if(i&&(!l.id||l.id===a)&&i===l.scope_id||l.id==a)return l}return o.instances[0]}var h=o.instances[0];if(i)for(var d=0,u=o.instances.length;d<u;d++){if((l=o.instances[d]).scope_id===i){h=l;break}}return h},getInstanceByID:function(t,e,i){
var o=WebSquare.ModelUtil.getModelByID(e);try{for(var r in o.instances){var a=o.instances[r];if(i&&a.scope_id===i&&(!a.id||a.id===t)||a.id===t)return a}}catch(t){s.w.printStackTrace(t)}return o.instances[0]},copyNode:function(t,e,i,r,a){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._copyNode(arguments[0]):this._copyNode({srcXPath:t,destXPath:e,srcModelId:i,destModelId:r,scopeId:a})}catch(t){s.w.printStackTrace(t)}},_copyNode:function(t){var e,i=t.srcXPath||"",o=t.destXPath||"",s=t.srcModelId||"",r=t.destModelId||"",a=t.scopeId||"",n=t.srcInstanceId||"",l=t.destInstanceId||"";try{var h=WebSquare.ModelUtil.findInstanceNode({xpath:i,modelId:s,scopeId:a,instanceId:n})}catch(t){throw t}if(null==h)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode가 존재하지 않습니다.",e;try{var d=WebSquare.ModelUtil.getInstanceByID(l,r,a),u=WebSquare.ModelUtil.filterInstanceFunction(o),c=WebSquare.xml.createNode(d.document,u)}catch(t){throw t}if(null==c)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] destNode가 존재하지 않습니다.",e;for(var p=c.childNodes,g=p.length-1;g>=0;g--)c.removeChild(p.item(g));var m=WebSquare.xml.parse(WebSquare.xml.serialize(h)).documentElement;if(WebSquare.core.browserCheck.chrome||WebSquare.core.browserCheck.safari||WebSquare.core.browserCheck.android||WebSquare.core.browserCheck.blackberry){var f=c.ownerDocument.importNode(m,!0);c.appendChild(f)}else c.appendChild(m);WebSquare.WebSquaredoc.detectChange(o,void 0,r,{scope_id:a})},copyChildrenNodes:function(t,e,i,r,a,n){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._copyChildrenNodes(arguments[0]):this._copyChildrenNodes({srcXPath:t,destXPath:e,mode:i,srcModelId:r,destModelId:a,scopeId:n})}catch(t){s.w.printStackTrace(t)}},_copyLastNodeChildrenNodes:function(t){var e,i,o,s=t.srcXPath||"",r=t.destXPath||"",a=t.mode,n=t.srcModelId||"",l=t.destModelId||"",h=t.srcInstanceId||"",d=t.destInstanceId||"",u=t.scopeId||"";try{var c=WebSquare.ModelUtil.findInstanceNode({xpath:s,modelId:n,instanceId:h,scopeId:u})}catch(t){throw t}if(null==c)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode가 존재하지 않습니다.",e;try{var p=WebSquare.ModelUtil.getInstanceByID(d,l,u),g=WebSquare.ModelUtil.filterInstanceFunction(r),m=WebSquare.xml.createNode(p.document,g)}catch(t){throw t}if(null==m)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] destNode가 존재하지 않습니다.",e;if(m==c)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode와 destNode가 동일합니다.",e;var f=r.split("/"),b=r.split("[")[0],y=f[f.length-1].match(/[^[\]]+(?=])/)[0],v=this.getInstanceRefElementIndex(r,void 0,u);switch("replaceAll"==a&&v>=0&&c.childNodes.length>0&&(i=c.tagName),a){case"replaceAll":var w=m.cloneNode(!1),S=c.childNodes;v>=0&&(o=c);for(var C=0;C<=S.length-1;C++)1==S[C].nodeType&&WebSquare.xml.appendChild(w,S[C].cloneNode(!0));m.parentNode.insertBefore(w,m),m.parentNode.removeChild(m),m=null;break;case"append":for(S=c.childNodes,C=0;C<=S.length-1;C++){var x=S.item(C);if(1==x.nodeType){var _=WebSquare.xml.parse(WebSquare.xml.serialize(x)).documentElement;WebSquare.xml.appendChild(m,_)}}}"true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/copyChildrenNodes/@refresh")&&WebSquare.ModelUtil.refreshModel(r,l),v>=0&&o&&o.childNodes.length>0&&WebSquare.WebSquaredoc.detectChange(r,void 0,l,{op:"copyLastNodeChildrenNodes",node:o,type:a,repeatNode:i,changeIndex:y,xpath:b,scope_id:u})},_copyChildrenNodes:function(t){var e,i,o=t.srcXPath||"",s=t.destXPath||"",r=t.mode,a=t.srcModelId||"",n=t.destModelId||"",l=t.srcInstanceId||"",h=t.destInstanceId||"",d=t.scopeId||"",u=s.split("/");if(-1!=u[u.length-1].indexOf("["))return this._copyLastNodeChildrenNodes({srcXPath:o,destXPath:s,mode:r,srcModelId:a,destModelId:n,srcInstanceId:l,destInstanceId:h,scopeId:d});try{var c=WebSquare.ModelUtil.findInstanceNode({xpath:o,
modelId:a,instanceId:l,scopeId:d})}catch(t){throw t}if(null==c)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode가 존재하지 않습니다.",e;try{var p=WebSquare.ModelUtil.getInstanceByID(h,n,d),g=WebSquare.ModelUtil.filterInstanceFunction(s),m=WebSquare.xml.createNode(p.document,g)}catch(t){throw t}if(null==m)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] destNode가 존재하지 않습니다.",e;if(m==c)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode와 destNode가 동일합니다.",e;var f=this.getInstanceRefElementIndex(s,void 0,d),b=[],y=[],v=[];if("replaceAll"==r&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var w=0;w<WebSquare.WebSquaredoc.instanceRefElement.length;w++){if(!(P=WebSquare.WebSquaredoc.instanceRefElement[w].scopeId)||d===P){var S=WebSquare.WebSquaredoc.instanceRefElement[w].xpath,C=WebSquare.WebSquaredoc.instanceRefElement[w].baseNode;if(s==S){var x=WebSquare.ModelUtil.findInstanceNode({xpath:o,instanceId:l,scopeId:d});i=x.tagName,v.push(x),b.push(o),y.push(S)}else if(WebSquare.ModelUtil.isPartialMatchedXPath(S,s)){var _=WebSquare.ModelUtil.getMatchedData(c,S,C,o,s);null!=_&&(v.push(_.dataNode),b.push(_.refXPath),y.push(S))}}}switch(r){case"replaceAll":var I=m.cloneNode(!1),T=c.childNodes;for(w=0;w<=T.length-1;w++)1==T[w].nodeType&&WebSquare.xml.appendChild(I,T[w].cloneNode(!0));m.parentNode.insertBefore(I,m),m.parentNode.removeChild(m),m=null;break;case"overwrite":T=c.childNodes;var k={},D={};for(w=0;w<=T.length-1;w++){if(1==(V=T[w]).nodeType){var L=V.nodeName,W=m.selectNodes(L);W.length>0?(void 0===D[L]?D[L]=0:D[L]=D[L]+1,void 0!==W[D[L]]?k[w]=W[D[L]]:k[w]=null):k[w]=null}}for(w=0;w<=T.length-1;w++){if(1==(V=T[w]).nodeType){var A,E=WebSquare.xml.parse(WebSquare.xml.serialize(V));A=WebSquare.core.browserCheck.chrome||WebSquare.core.browserCheck.safari||WebSquare.core.browserCheck.android||WebSquare.core.browserCheck.blackberry?E.documentElement.cloneNode(!0):E.documentElement,null!=k[w]?m.replaceChild(A,k[w]):WebSquare.xml.appendChild(m,A)}}break;case"replaceOnly":var M=m.childNodes;for(w=0;w<M.length;w++){var q=M.item(w);if(1==q.nodeType){var R=q.nodeName;if(null!=(V=c.selectSingleNode(R))){var N=(E=WebSquare.xml.parse(WebSquare.xml.serialize(V))).documentElement,F=m.ownerDocument.importNode(N,!0);m.replaceChild(F,q)}}}break;case"append":T=c.childNodes;if(f>=0)if(i){if(!v)for(var O=0;O<T.length;O++)if(T[O].tagName==i){v.push(T[O]),b.push(o);break}}else for(O=0;O<c.childNodes.length;O++)if(1==c.childNodes[O].nodeType&&WebSquare.WebSquaredoc.instanceRefElement[f].repeatNodeTagName[0]==c.childNodes[O].tagName){var B=o.split("/");i=B[B.length-1],v.push(c),y.push(s),b.push(o);break}for(w=0;w<=T.length-1;w++){var V;if(1==(V=T.item(w)).nodeType){N=(E=WebSquare.xml.parse(WebSquare.xml.serialize(V))).documentElement;WebSquare.xml.appendChild(m,N)}}}if("true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/copyChildrenNodes/@refresh")&&WebSquare.ModelUtil.refreshModel(s,n),v.length)for(O=0;O<y.length;O++)WebSquare.WebSquaredoc.detectChange(y[O],void 0,n,{op:"copyChildrenNodes",node:v[O],baseNode:i,type:r,xpath:y[O],copiedXPath:b[O],scope_id:d});else if("replaceAll"==r)for(w=0;w<WebSquare.WebSquaredoc.instanceRefElement.length;w++){var H=WebSquare.WebSquaredoc.instanceRefElement[w];if(-1!=H.xpath.indexOf(s)){var P;if((P=WebSquare.WebSquaredoc.instanceRefElement[w].scopeId)&&d!==P)continue;var j=WebSquare.ModelUtil.findInstanceNode(H.xpath,void 0,d);(!j||j&&0==j.childNodes.length)&&WebSquare.WebSquaredoc.detectChange(s,void 0,null,{op:"removeInstanceNodeAll",xpath:s,scope_id:d})}}},refreshModel:function(t,e,i){try{t||(t="");var o=WebSquare.ModelUtil.getModelByID(e);WebSquare.WebSquaredoc.unrender(t),i?o.refresh(void 0,i):o.refresh()}catch(t){s.w.printStackTrace(t)}},removeInstanceNode:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,
o.Z)(arguments[0])?this._removeInstanceNode(arguments[0]):this._removeInstanceNode({xpath:t,refresh:e,scopeId:i})}catch(t){s.w.printStackTrace(t)}},_removeInstanceNode:function(t){try{var e,i=t.xpath||"",o=t.refresh,r=t.scopeId||"",a=t.instanceId||"",n=WebSquare.ModelUtil.findInstanceNode({xpath:i,scopeId:r,instanceId:a}),l=!1,h=[];if(n&&0!=o&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var d=0;d<WebSquare.WebSquaredoc.instanceRefElement.length;d++){var u=WebSquare.WebSquaredoc.instanceRefElement[d].scopeId;if(!u||r===u){var c=i.split("/"),p=WebSquare.WebSquaredoc.instanceRefElement[d].xpath,g=p.split("/");if(g.length>c.length&&WebSquare.ModelUtil.isPartialMatchedXPath(p,i)){for(var m=i,f=c.length;f<g.length-1;f++)m+="/"+g[f];i!=m&&(n=WebSquare.ModelUtil.findInstanceNode({xpath:m,scopeId:r,instanceId:a})),n&&n.selectSingleNode(g[g.length-1])&&(l=!0,h.push(p))}else if(i==p)l=!0,h.push(p);else if(WebSquare.ModelUtil.isPartialMatchedXPath(p,i)){var b=i.lastIndexOf("/");if(b>0){var y=i.substring(b+1);if(y.match(/\[@/i));else{if(-1!=y.indexOf("[")){var v=y.match(/[^[\]]+(?=])/)[0];isNaN(v)?e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[d].repeatxpath,scopeId:r,instanceId:a}),n):(!0,e=parseInt(v)-1)}else e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[d].repeatxpath,scopeId:r,instanceId:a}),n);if(i=p,e>=0)break}}}}}if(n){var w=WebSquare.ModelUtil._getNodePath(n,!0);if(n.parentNode.removeChild(n),"true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/removeInstanceNode/@refresh")){var S=i;w&&(S=i+"/"+w),WebSquare.ModelUtil.refreshModel(i,null,S)}}if(e>=0&&(null==o||1==o)&&WebSquare.WebSquaredoc.instanceRefElement.length)WebSquare.WebSquaredoc.detectChange(i,void 0,null,{op:"removeInstanceNode",node:n,deleteIndex:e,xpath:i,scope_id:r});else if(1==l)for(var C=0;C<h.length;C++)WebSquare.WebSquaredoc.detectChange(h[C],void 0,null,{op:"removeInstanceNodeAll",node:n,xpath:h[C],scope_id:r})}catch(t){s.w.printStackTrace(t)}},removeInstanceNodes:function(t,e){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._removeInstanceNodes(arguments[0]):this._removeInstanceNodes({xpath:t,scopeId:e})}catch(t){s.w.printStackTrace(t)}},_removeInstanceNodes:function(t){try{for(var e,i=t.xpath||"",o=t.scopeId||"",r=t.instanceId||"",a=WebSquare.ModelUtil.findInstanceNodes({xpath:i,scopeId:o,instanceId:r}),n=t.gridNoRefresh,l=i,h=a.length-1;h>=0;h--){if(WebSquare.WebSquaredoc.instanceRefElement.length){var d=a[h];if(d&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var u=0;u<WebSquare.WebSquaredoc.instanceRefElement.length;u++){var c=WebSquare.WebSquaredoc.instanceRefElement[u].scopeId;if(!c||o===c){var p=!1,g=[],m=i.split("/"),f=WebSquare.WebSquaredoc.instanceRefElement[u].xpath,b=f.split("/");if(b.length>m.length&&WebSquare.ModelUtil.isPartialMatchedXPath(f,i)){for(var y=i,v=m.length;v<b.length-1;v++)y+="/"+b[v];i!=y&&(d=WebSquare.ModelUtil.findInstanceNode({xpath:y,scopeId:o,instanceId:r})),d&&d.selectSingleNode(b[b.length-1])&&(p=!0,g.push(f))}else if(i==f)p=!0,g.push(f);else if(WebSquare.ModelUtil.isPartialMatchedXPath(f,i)){var w=i.lastIndexOf("/");if(w>0){var S=i.substring(w+1);if(S.match(/\[@/i));else{if(-1!=S.indexOf("[")){var C=S.match(/[^[\]]+(?=])/)[0];isNaN(C)?e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[u].repeatxpath,scopeId:o,instanceId:r}),d):(!0,e=parseInt(C)-1)}else e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[u].repeatxpath,scopeId:o,instanceId:r}),a[h]);l=f}}}if(e>=0&&WebSquare.WebSquaredoc.instanceRefElement.length)WebSquare.WebSquaredoc.detectChange(i,void 0,null,{op:"removeInstanceNode",node:d,deleteIndex:e,xpath:l,gridNoRefresh:n,scope_id:o
});else if(1==p)for(var x=0;x<g.length;x++)WebSquare.WebSquaredoc.detectChange(g[x],void 0,null,{op:"removeInstanceNodeAll",node:d,xpath:g[x],gridNoRefresh:n,scope_id:o})}}}a[h].parentNode.removeChild(a[h])}"true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/removeInstanceNodes/@refresh")&&WebSquare.ModelUtil.refreshModel(i)}catch(t){s.w.printStackTrace(t)}},removeChildNodes:function(t,e){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._removeChildNodes(arguments[0]):this._removeChildNodes({xpath:t,scopeId:e})}catch(t){s.w.printStackTrace(t)}},_removeChildNodes:function(t){try{var e=t.xpath||"",i=t.scopeId||"",o=t.instanceId||"",r=WebSquare.ModelUtil.findInstanceNode({xpath:e,scopeId:i,instanceId:o});if(r)for(var a=r.childNodes,n=a.length-1;n>=0;n--)r.removeChild(a[n])}catch(t){s.w.printStackTrace(t)}},createInstance:function(t){try{if(!t||!t.doc)return!1;for(var e="string"==typeof t.doc?WebSquare.xml.parse(t.doc):t.doc,i=t.modelId||"",o=t.instanceId||"",r=t.scopeId||"",a=t.mode||"append",n=this.getModelByID(i),l=t.targetInstanceId||"",h={idx:-1,obj:null},d=0,u=n.instances.length;d<u;d++){var c=n.instances[d].scopeId;if(!c||r===c){if("replace"!=a&&n.instances[d].id===o)return!1;if("replace"==a&&n.instances[d].id===o){h.obj=n.instances[d],h.idx=d;break}}}var p=WebSquare.WebSquaredoc.models[0].instances[0].xmlNode.cloneNode(!0);p.setAttribute("id",o),r&&p.setAttribute("scopeId",r);var g=WebSquare.xml.getFirstChildElement(p),m=g.childNodes;for(d=m.length-1;d>=0;d--)g.removeChild(m[d]);e=WebSquare.util.isArray(e)?e:[e];for(d=0,u=e.length;d<u;d++){var f=e[d];switch(f.nodeType){case 1:g.appendChild(f);break;case 9:g.appendChild(WebSquare.xml.getFirstChildElement(f));break;default:return!1}}var b=new WebSquare.Model.Instance(p,g);switch(a){case"insertBefore":var y=this.getInstanceByID(l),v=0;for(d=0,u=n.instances.length;d<u;d++)if(n.instances[d]===y){v=d;break}n.instances.splice(v-1<0?0:v-1,0,b),y.xmlNode.parentNode.insertBefore(p,y.xmlNode);break;case"replace":if(!h.obj)return!1;y=h.obj,v=h.idx;var w=WebSquare.xml.getNextSiblingElement(y.xmlNode);n.instances[v]=b,w.parentNode.insertBefore(p,w),n.xmlNode.removeChild(y.xmlNode);break;case"append":default:for(y=l?this.getInstanceByID(l):n.instances[n.instances.length-1],v=n.instances.length-1,d=0,u=n.instances.length;d<u;d++)if(n.instances[d]===y){v=d;break}y.xmlNode.parentNode.insertBefore(p,WebSquare.xml.getNextSiblingElement(n.instances[v].xmlNode)),n.instances.splice(v+1,0,b)}return!0}catch(t){s.w.printStackTrace(t)}return!1},removeInstance:function(t){try{if(!t||!t.instanceId)return!1;for(var e=t.modelId||"",i=t.instanceId||"",o=t.scopeId||"",r=this.getModelByID(e),a=0,n=r.instances.length;a<n;a++){var l=r.instances[a].scopeId;if((!l||o===l)&&(r.instances[a].id&&r.instances[a].id===i))return r.xmlNode.removeChild(r.instances[a].xmlNode),r.instances.splice(a,1),!0}}catch(t){s.w.printStackTrace(t)}return!1},copyInstance:function(t){try{if(!t||!t.srcInstanceId||!t.destInstanceId)return!1;var e=t.srcModelId||"",i=t.destModelId||"",o=t.srcInstanceId||"",r=t.destInstanceId||"",a=t.targetInstanceId||"",n=t.srcScopeId||"",l=t.destScopeId||"",h=t.mode||"append",d=this.getInstanceByID(o,e,n).xmlNode.cloneNode(!0);return this.createInstance({doc:WebSquare.xml.getFirstChildElements(WebSquare.xml.getFirstChildElement(d)),modelId:i,instanceId:r,mode:h,targetInstanceId:a,scopeId:l})}catch(t){s.w.printStackTrace(t)}return!1},getInstanceIndex:function(t,e){try{if(!Array.prototype.indexOf||WebSquare.util.isIEAllVersion()&&parseInt(WebSquare.core.browserVersion(),10)>8){for(var i=t.length;i--;)if(t[i]===e)return i;return}return t.indexOf(e)}catch(t){s.w.printStackTrace(t,null,this)}},getInstanceRefElementIndex:function(t,e,i){try{
for(var o=0;o<WebSquare.WebSquaredoc.instanceRefElement.length;o++)if((!WebSquare.WebSquaredoc.instanceRefElement[o].scopeId||WebSquare.WebSquaredoc.instanceRefElement[o].scopeId===i)&&-1!=t.indexOf(WebSquare.WebSquaredoc.instanceRefElement[o].xpath))return o;if(e)for(var r=t+"/"+e,a=0;a<WebSquare.WebSquaredoc.instanceRefElement.length;a++)if((!WebSquare.WebSquaredoc.instanceRefElement[a].scopeId||WebSquare.WebSquaredoc.instanceRefElement[a].scopeId===i)&&-1!=WebSquare.WebSquaredoc.instanceRefElement[a].xpath.indexOf(r))return a;return}catch(t){s.w.printStackTrace(t,null,this)}},getMatchedData:function(t,e,i,o,r){try{t=t,i=i,e=e;var a=0;if(o&&r){var n=o.split("/"),l=r.split("/");a=Math.max(n.length,l.length)}var h=t.childNodes;if(null!=h)for(var d=h.length,u=0;u<d;u++){var c=o;if(1==h[u].nodeType){var p=h[u].tagName;if(i==p){c+="/"+p;var g=e.split("/").length,m=c.split("/").length;if(g>m)for(var f=0;f<g-m;f++)c="temp/"+c;else if(m>g)for(f=0;f<m-g;f++)e="temp/"+e;if(WebSquare.ModelUtil.isPartialMatchedXPath(e,c+"/"+p,a)){var b=h[u].tagName;return{dataNode:h[u],refXPath:o+"/"+b,baseNode:b}}return}if(c+="/"+p,WebSquare.ModelUtil.isPartialMatchedXPath(e,c,a)){var y=WebSquare.ModelUtil.getMatchedData(h[u],e,i,c,r);if(y)return y}}}return}catch(t){s.w.printStackTrace(t,null,this)}},isPartialMatchedXPath:function(t,e,i){try{for(var o=t.split("/"),r=e.split("/"),a=Math.min(o.length,r.length),n=!1,l=i||0;l<a;l++){var h=o[l].split("["),d=r[l].split("[");if(h.toString()!=d.toString())return!1;n=!0}return n}catch(t){s.w.printStackTrace(t,null,this)}},_getNodePath:function(t,e){for(var i=new Array,o=e?t.firstChild:t;null!=o;o=o.firstChild)if(1==o.nodeType){var s=o.nodeName.split(":");i.push(s)}return i.join("/")},getSubmission:function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=i.scope_id||WebSquare.scope_obj,r=WebSquare.ModelUtil.getModelByID(e),a=null,n=0;n<r.submissions.length;n++){var l=r.submissions[n];if(!WebSquare.strictMode||!o||o===l.scope_id){if(o&&o===l.scope_id&&l.id==o+"_"+t){a=l;break}if(l.id==t&&(a=l,null==o))break}}return a}catch(t){s.w.printStackTrace(t)}},executeSubmission:function(t,e,i,o,a){if(r.k.printLog("WebSquare.ModelUtil.executeSubmission : "+t),null!=t&&""!=t)try{var n=null;if("string"==typeof t){if(null==(n=WebSquare.ModelUtil.getSubmission(t)))return alert(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObjectWithID",t)),null!=a&&a(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObjectWithID",t)),null}else if(null==(n=t))return alert(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObject",t)),null!=a&&a(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObject",t)),null;WebSquare.ModelUtil.setSubmissionStart(n,i),void 0!==e&&n.setRequestData(e);var l=WebSquare.core.getConfiguration("/WebSquare/submission/customHandler/@value")||"";if(""!=n.customHandler&&(l=n.customHandler),""==l||"default"==l)WebSquare.ModelUtil.defaultSubmissionHandler(n,o,a);else if("proworks_soap"==l.toLowerCase());else if(l)if("function"==typeof l)l(n,o,a);else{var h=WebSquare.util.getGlobalFunction(l);"function"==typeof h&&h(n,o,a)}else WebSquare.ModelUtil.defaultSubmissionHandler(n,o,a)}catch(t){s.w.printStackTrace(t)}},createSubmission:function(t,e){try{var i={_pluginName:"submission"};i.id=t.id,i.bind=t.bind||null,i.action=t.action||WebSquare.core.getConfiguration("/WebSquare/submission/action/@value"),i.mode=t.mode||WebSquare.core.getConfiguration("/WebSquare/submission/mode/@value")||"asynchronous",i.method=t.method||WebSquare.core.getConfiguration("/WebSquare/submission/method/@value")||"POST",i.mediatype=t.mediatype||WebSquare.core.getConfiguration("/WebSquare/submission/mediatype/@value"),i.encoding=t.encoding||WebSquare.core.getConfiguration("/WebSquare/submission/encoding/@value")||"UTF-8",i.ref=t.ref||"",i.target=t.target,i.replace=t.replace,i.instance=t.instance,i.customHandler=t.customHandler||"",
i.errorHandler=t.errorHandler||WebSquare.core.getConfiguration("/WebSquare/submission/errorHandler/@value"),i.processMsg=t.processMsg||WebSquare.core.getConfiguration("/WebSquare/submission/processMsg/@value"),i.soapaction=t.soapaction||"",i.startTime=null,i.endTime=null,i.processStatus=0,i.linkedObj=[],i.timeout=t.timeout||WebSquare.core.getConfiguration("/WebSquare/submission/timeout/@value"),i.singlemode=t.singleMode||!1,i.hideProcessMsg=!1!==t.hideProcessMsg&&(!0===t.hideProcessMsg||"false"!==WebSquare.core.getConfiguration("/WebSquare/submission/hideProcessMsg/@value")),i.abortTrigger=!0===WebSquare.util.getBoolean(t.abortTrigger)||!1!==t.abortTrigger&&"true"===WebSquare.core.getConfiguration("/WebSquare/submission/abortTrigger/@value"),i.useModal=t.useModal||WebSquare.core.getConfiguration("/WebSquare/submission/useModal/@value")||!1,i.webtopRef=t.webtopRef||"",i.userData1=t.userData1||"",i.userData2=t.userData2||"",i.withCredentials=t.withCredentials||!1,i.scope_id=t.scope_id||null,i.setRequestData=function(t){this.requestData=t},i.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return s.w.printStackTrace(t,null,this),null}},i.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return s.w.printStackTrace(t,null,this),window}},i.userEventList=[],t.submitHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit","script",{handler:t.submitHandler})),i.submitHandler=t.submitHandler),t.submitDoneHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit-done","script",{handler:t.submitDoneHandler})),i.submitDoneHandler=t.submitDoneHandler),t.submitErrorHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit-error","script",{handler:t.submitErrorHandler})),i.submitErrorHandler=t.submitErrorHandler),t.submitTimeoutHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit-timeout","script",{handler:t.submitTimeoutHandler})),i.submitTimeoutHandler=t.submitTimeoutHandler),""==i.mediatype&&("post"!=i.method&&"POST"!=i.method||(i.mediatype="application/xml"));var o=WebSquare.ModelUtil.getModelByID(e);i.parentElement=o.xmlNode;for(var r=o.submissions.length-1;r>=0;r--)o.submissions[r].id===i.id&&(o.submissions[r].parentElement=null,o.submissions.splice(r,1));o.submissions.unshift(i),WebSquare.core.useSubmissionGlobal&&(window[i.id]=i),WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/notRecommended/warningSync/@value"))&&"synchronous"===i.mode&&alert(WebSquare.language.getMessage("E_deprecated_sync",i.id)),i.scope_obj=i.getScope()}catch(t){s.w.printStackTrace(t)}},deleteSubmission:function(t,e,i){try{void 0!==i&&null!=i||(i={});var r=i.scope_id||WebSquare.scope_obj;"object"===(0,o.Z)(t)&&null!=t&&(t=t.id);for(var a=WebSquare.ModelUtil.getModelByID(e).submissions,n=null,l=0;l<a.length;l++)if(!(WebSquare.strictMode&&r&&r!==a[l].scope_id||a[l].id!==t)){n=a[l],WebSquare.core.useSubmissionGlobal&&(window[t]=null),a[l].parentElement=null,a.splice(l,1);break}return n}catch(t){s.w.printStackTrace(t)}},defaultcallback:function(t,e,i,o,r,a){try{if(e&&!0===e.dead)return void t.abort();if(4==t.readyState)if(i&&(window.clearTimeout(i),window.clearInterval(i),i=null),null==r){var n=WebSquare.ModelUtil.commonResponseHandler(e,t,"async mode",o,r,a),l=n&&n.hidden;!1===e.hideProcessMsg||l||WebSquare&&WebSquare.ModelUtil&&WebSquare.ModelUtil.deleteMessage_pre(e.id)}else r([e,t,o])}catch(t){s.w.printStackTrace(t),e&&e.scope_id?WebSquare.layer.hideProcessMessage({scope:e.scope_id}):WebSquare.layer.hideProcessMessage()}},abort:function(t,e){var i=null;try{if(""!=t){var o={};if(WebSquare.strictModeFrame&&e&&(o.scope_id=e),null!=(i=WebSquare.ModelUtil.getSubmission(t,null,o)).obfuscator_http){i.obfuscator_http.abort();var a={id:i.id,errorType:"resource-error",resourceUri:WebSquare.util.getSubmissionURL(i.action),
responseHeaders:"",responseStatusCode:"",responseReasonPhrase:"",requestBody:"",responseBody:"",abort:"true"};r.k.printLog("submission force abort. "+i.id),WebSquare.ModelUtil.setSubmissionEnd(i,"submission error",a),WebSquare.layer.deleteSubmissionMessage(i.id);var n=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@value"),l=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@mode");if(n){"after"==l&&WebSquare.event.fireEvent(i,"xforms-submit-error",a);var h=WebSquare.util.getGlobalFunction(n);"function"==typeof h&&h(a),"before"==l&&WebSquare.event.fireEvent(i,"xforms-submit-error",a)}else WebSquare.event.fireEvent(i,"xforms-submit-error",a);i.obfuscator_http&&(i.obfuscator_http.onreadystatechange=function(){},i.obfuscator_http=null)}return}}catch(t){s.w.printStackTrace(t),i&&i.scope_id?WebSquare.layer.hideProcessMessage({scope:i.scope_id}):WebSquare.layer.hideProcessMessage()}},setSubmissionEnd:function(t,e,i){t.endTime=new Date,t.processStatus=0;for(var o=0;o<t.linkedObj.length;o++)t.linkedObj[o].setDisabled&&t.linkedObj[o].setDisabled(!1);if(t.linkedObj=[],"true"==WebSquare.core.getConfiguration("/WebSquare/submission/showSubmissionTime/@value")){var s=t.startTime.getHours()+":"+t.startTime.getMinutes()+":"+t.startTime.getSeconds()+":"+t.startTime.getMilliseconds(),a=t.endTime.getHours()+":"+t.endTime.getMinutes()+":"+t.endTime.getSeconds()+":"+t.endTime.getMilliseconds(),n="submission id["+t.id+"] start["+s+"] end["+a+"] duration["+(t.endTime-t.startTime)+"ms]";r.k.printLog(n),WebSquare.ax_logger(n)}if(null!=i){var l=WebSquare.core.getConfiguration("/WebSquare/submission/callbackSubmitFunction/@value");try{var h=WebSquare.util.getGlobalFunction(l);"function"==typeof h&&h.call(this,i,t)}catch(t){}}WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/submission/clearRequestDataAfterSubmit/@value"))&&t.setRequestData("")},setSubmissionStart:function(t,e){if(t.startTime=new Date,t.processStatus=1,e&&!WebSquare.util.isArray(e)&&(e=[e]),e)for(var i=0,o=e.length;i<o;i++){var s=e[i];null!=s&&s.setDisabled&&(t.linkedObj.push(s),s.setDisabled(!0))}},doSubmitPreFunc:function(t){var e=t.preSubmitFunction||WebSquare.core.getConfiguration("/WebSquare/submission/preSubmitFunction/@value");if(null!=e&&""!=e)try{var i=WebSquare.util.getGlobalFunction(e);"function"==typeof i&&i(t)}catch(t){}},getRefToReqData:function(t){return t.requestData=null,this.getReqData(t)},defaultSubmissionHandler:function(t,e,i){var o;try{var a={id:M=t.id};""!=t.processMsg&&WebSquare.layer.addSubmissionMessage(t,t.processMsg);var n=WebSquare.event.fireEvent(t,"xforms-submit",a);if(void 0!==n&&0==n)return r.k.printLog("xforms-submit event에서 return이 false이므로 처리를 중단. : "+M),WebSquare.ModelUtil.setSubmissionEnd(t,"submission done",null),WebSquare.layer.deleteSubmissionMessage(M),void(null!=i&&i("xforms-submit event에서 return이 false이므로 처리를 중단. : "+M));WebSquare.ModelUtil.doSubmitPreFunc(t);var l=WebSquare.core._getMsaOption(t.getScope()),h=WebSquare.util.getSubmissionURL(t.action,l),d="synchronous"!=t.mode,u=t.target,c=t.replace,p=t.encoding||"utf-8",g=t.mediatype||"application/xml",m=t.accept||g,f=t.method,b=t.soapaction,y=t.timeout,v=this.getReqData(t),w=!1;if(void 0!==v&&v.indexOf("http://schemas.xmlsoap.org/soap/envelope")>-1&&(w=!0),"all"==c){""==WebSquare.requestID&&(WebSquare.requestID="instanceValue");try{var S=document.createElement("form");WebSquare.util.isMobile()||(S.encoding="text/plain"),S.action=h,S.method=f,S.style.display="inline",S.acceptCharset="UTF-8";var C=document.createElement("input");C.type="hidden",C.name="targetInstance",WebSquare.core.uriEncoder?C.value=u:C.value=encodeURIComponent(u),S.appendChild(C);var x=document.createElement("input");return x.type="hidden",x.name="instanceValue",WebSquare.core.uriEncoder?x.value=v:x.value=encodeURIComponent(v),S.appendChild(x),document.body.appendChild(S),void S.submit()}catch(t){s.w.printStackTrace(t)}}if(r.k.printLog(h),
o=WebSquare.core.getXMLHTTPObject(t.withCredentials),t.obfuscator_http=o,o.open(f,h,d),w&&o.setRequestHeader("soapaction",'"'+b+'"'),""!=WebSquare.requestID){var _=WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@mediatype"),I=WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@accept");""!=_&&(o.setRequestHeader("Content-Type",_+'; charset="UTF-8"'),"none"!==I&&o.setRequestHeader("Accept",I))}else o.setRequestHeader("Content-Type",g+'; charset="'+p+'"'),"none"!==m&&o.setRequestHeader("Accept",m);"false"!=WebSquare.core.getConfiguration("/WebSquare/submission/customHeader/@value")&&o.setRequestHeader("submissionid",encodeURIComponent(M));var T=t.requestHeader;for(var k in T)o.setRequestHeader(k,T[k]);var D,L=WebSquare.core.getConfiguration("/WebSquare/submission/requestHeaderFunction/@value");if(""!=L){var W=WebSquare.util.getGlobalFunction(L,t.scope_id);"function"==typeof W&&W(o,t)}if(d){try{t.withCredentials&&(o.withCredentials=t.withCredentials)}catch(t){s.w.printStackTrace(t)}y&&(D=window.setTimeout((function(){o.onreadystatechange=function(){},o.abort();var e={id:M,errorType:"timeout-error",resourceUri:h,time:y};WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",e),WebSquare.layer.deleteSubmissionMessage(M),WebSquare.event.fireEvent(t,"xforms-submit-timeout",e),window.clearTimeout(D),null!=i&&i(e.errorType+" :: "+M)}),y)),o.onreadystatechange=function(){WebSquare.ModelUtil.defaultcallback(o,t,D,v,e,i)}}var A=WebSquare.core.getConfiguration("/WebSquare/submission/externalHandler/@value")||"";if(""==A||"default"==A);else if(A)if("function"==typeof A)v=A(v);else{var E=WebSquare.util.getGlobalFunction(A);"function"==typeof E&&(v=E(v,M))}""!=WebSquare.requestID?"true"==WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@encodeURI")?o.send(WebSquare.requestID+encodeURIComponent(v)):o.send(WebSquare.requestID+v):o.send(v),d||(WebSquare.ModelUtil.commonResponseHandler(t,o,"sync mode",v),null!=e&&e([t,o,v]))}catch(e){try{var M=t.id,q=(h=WebSquare.util.getSubmissionURL(t.action),{id:M,resourceUri:h,errorType:e.name,message:e.message});null!=e.code&&(q.code=e.code),r.k.printLog("submission error("+e.name+")."+M),WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",q),WebSquare.layer.deleteSubmissionMessage(M);var R=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@value"),N=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@mode");if(R){"after"==N&&WebSquare.event.fireEvent(t,"xforms-submit-error",q);var F=WebSquare.util.getGlobalFunction(R);"function"==typeof F&&F(q),"before"==N&&WebSquare.event.fireEvent(t,"xforms-submit-error",q)}else WebSquare.event.fireEvent(t,"xforms-submit-error",q);t&&t.scope_id?WebSquare.layer.hideProcessMessage({scope:t.scope_id}):WebSquare.layer.hideProcessMessage(),null!=i&&i(q.errorType+" :: "+M),o.onreadystatechange=function(){},o=null}catch(t){s.w.printStackTrace(t)}}},getReqData:function(t){var e=t.ref,i=t.instance,o=t.mediatype,s=t.requestData,r=null;null!=t.scope_id&&(r=t.scope_id);var a=null;if(""!=i&&t.parentElement.T!==WebSquare.Elem.type.element){var n=WebSquare.Elem.api.getAttribute(t.parentElement,"id");a=null==n||""==n?WebSquare.ModelUtil.getInstanceByID(i).document:WebSquare.ModelUtil.getInstanceByID(i,n).document}else if(t.parentElement.T===WebSquare.Elem.type.element){var l=WebSquare.Elem.api.getElementsByTagName(t.parentElement,"instance",WebSquare.core._XML_NAMESPACE.XFORMS)[0];try{l&&(a=WebSquare.xml.parse(l._element._xml).getElementsByTagName("data")[0])}catch(d){}}else a=WebSquare.Elem.api.getElementsByTagName(t.parentElement,"data")[0];var h,d=null,u="";if(void 0!==s&&null!=s)u="application/json"==o?"string"==typeof s?s:JSON.stringify(s):"text/plain"==o?s:WebSquare.xml.serialize(s);else{var c=this.getCollectionCondition(e);if(c.singleMode=WebSquare.util.getBoolean(t.singleMode),""==e&&"application/json"!=o)d=a,
u=WebSquare.xml.serialize(d);else if("application/json"==o)if(""!=c.type)if(""!=c.condition){var p=WebSquare.api.data.get(c.type,c.condition,{singleMode:c.singleMode,scope_obj:r});u=JSON.stringify(p)}else{p=WebSquare.api.data.get(c.type,null,{scope_obj:r});u=JSON.stringify(p)}else""==e?u="":WebSquare.ModelUtil.getInstanceValue(e).wq_trim().length>0?u=WebSquare.ModelUtil.getInstanceValue(e):(d=WebSquare.xml.createNode(a,e),h=WebSquare.xml.parse(WebSquare.xml.serialize(d)),u=WebSquare.json.XML2JSONString(h));else if(""!=c.type)if(""!=c.condition){p=WebSquare.api.data.get(c.type,c.condition,{singleMode:c.singleMode,scope_obj:r});u=WebSquare.xml.serialize(p)}else{p=WebSquare.api.data.get(c.type,null,{scope_obj:r});u=WebSquare.xml.serialize(p)}else d=WebSquare.xml.createNode(a,e),u=WebSquare.xml.serialize(d)}return u},getCollectionCondition:function(t){var e={type:"",condition:""},i="";if("string"==typeof t&&0==t.indexOf("data:"))if((i=t.substr(5,t.length).wq_trim()).indexOf(",")>0){var o=i.indexOf(",");e.type=i.substring(0,o).wq_trim();var s=i.substring(o+1,i.length).wq_trim();s.indexOf("'")>-1&&(s=s.wq_replaceAll("'",'"')),0==s.indexOf("[")||(s="["+s+"]"),s=s.replace(/([\[\,])([^\'\"\{\}\s])/g,'$1"$2').replace(/([^\'\"\{\}\s])([\]\,])/g,'$1"$2'),e.condition=s}else e.type=i;return e},setResponseObj:function(t,e,i,o,s,r){e.indexOf("json")>-1?("instance"==i&&(t.responseBody=o),t.responseJSON=s):(e.indexOf("xml")>-1||r)&&(t.responseBody=o)},commonResponseHandler:function(t,e,i,o){var s,a=t.id,n=null;null!=t.scope_id&&(n=t.scope_id);var l=WebSquare.util.getSubmissionURL(t.action),h="synchronous"!=t.mode,d=t.ref,u=t.bind,c=t.target,p=t.replace,g=t.instance,m=t.encoding,f=t.mediatype,b=t.hideProcessMsg,y=t.method,v=t.action,w=t.errorHandler,S=t.soapaction;if(e.status&&(200>e.status||300<=e.status)||0===e.status){var C={id:a,errorType:"resource-error",resourceUri:l,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(e),responseHeadersJSON:WebSquare.ModelUtil.parseResponseHeaderJSON(e),responseStatusCode:e.status,responseReasonPhrase:e.statusText,requestBody:o,responseBody:e.responseText,abort:""};r.k.printLog("submission error(E03). Status["+e.status+"] "+a),WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",C),WebSquare.layer.deleteSubmissionMessage(a);var x=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@value"),_=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@mode");if(x)"after"==_&&WebSquare.event.fireEvent(t,"xforms-submit-error",C),"function"==typeof(O=WebSquare.util.getGlobalFunction(x))&&O(C),"before"==_&&WebSquare.event.fireEvent(t,"xforms-submit-error",C);else WebSquare.event.fireEvent(t,"xforms-submit-error",C);if(r.k.globalDebug1||"function"==typeof r.k.getGlobalDebug&&r.k.getGlobalDebug()){var I=/>[\s]*</g;(B=new Object).information="url          : "+l+"\nasync        : "+h+"\nref          : "+d+"\nbind         : "+u+"\ntarget       : "+c+"\nreplace      : "+p+"\ninstance     : "+g+"\nencoding     : "+m+"\nmediatype    : "+f+"\nmethod       : "+y+"\naction       : "+v+"\nerrorHandler : "+w+"\nsoapaction   : "+S+"\nstatus       : "+e.status+"\nstatus text  : "+e.statusText+"\nresponseHeaders : "+WebSquare.ModelUtil.parseResponseHeader(e),WebSquare.ModelUtil.parseResponseHeaderJSON(e),B.result=e.responseText.replace(I,">\n<"),B.input=o.replace(I,">\n<"),r.k.showDebugMsg(B,"xml","Default Submission ("+i+")")}return e.onreadystatechange=function(){},e=null,t.obfuscator_http=null,C}var T=WebSquare.core.getConfiguration("/WebSquare/submission/externalResponseHandler/@value")||"",k=e.responseText,D=!1;if(""==T||"default"==T);else if(T)if("function"==typeof T)k=T(k);else{var L=WebSquare.util.getGlobalFunction(T,n);"function"==typeof L&&(k=L(k,a),D=!0)}var W,A,E,M=WebSquare.core.getConfiguration("/WebSquare/submission/responseJSONHandler/@value"),q=e.getResponseHeader("Content-Type")||"",R=!1,N=this.getCollectionCondition(c)
;N.singleMode=WebSquare.util.getBoolean(t.singleMode),""==q&&r.k.printLog("Response Content-Type is not defined");try{if(q.indexOf("json")>-1){try{if(M)if("function"==typeof M)k=M(k);else"function"==typeof(O=WebSquare.util.getGlobalFunction(M))&&(k=O(k))}catch(t){}if(""!=k)if(A=JSON.parse(k),""!=N.type)W=A,""!=N.condition?WebSquare.api.data.set(N.type,A,N.condition,{singleMode:N.singleMode,scope_obj:n}):WebSquare.api.data.set(N.type,A,null,{scope_obj:n});else if("instance"==p){var F=WebSquare.json.JSON2XMLString(A);W=WebSquare.xml.parse(F),E=WebSquare.xml.parse(F)}else W="text"==p?k:A}else if(q.indexOf("xml")>-1)W=WebSquare.BootLoader.useWebSquareXMLParser?WebSquare.xml.parse(k):WebSquare.BootLoader.useResponseXML?D?WebSquare.xml.parse(k):e.responseXML:WebSquare.xml.parse(k),""!=N.type?""!=N.condition?WebSquare.api.data.set(N.type,W,N.condition,{singleMode:N.singleMode,scope_obj:n}):WebSquare.api.data.set(N.type,W,null,{scope_obj:n}):"instance"==p&&(E=WebSquare.xml.parse(k));else try{k&&k.wq_trim().startsWith("<")?(W=WebSquare.xml.parse(k),""!=N.type?""!=N.condition?WebSquare.api.data.set(N.type,W,N.condition,{singleMode:N.singleMode,scope_obj:n}):WebSquare.api.data.set(N.type,W,null,{scope_obj:n}):W?("instance"==p&&(E=WebSquare.xml.parse(k)),R=!0):W=k):W=k}catch(t){}}catch(t){}try{var O=WebSquare.util.getGlobalFunction(w,n);if(""!=w&&"function"==typeof O&&O(W,a)){C={id:a,errorType:"target-error",resourceUri:l,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(e),responseHeadersJSON:WebSquare.ModelUtil.parseResponseHeaderJSON(e),responseStatusCode:e.status,responseReasonPhrase:e.statusText,requestBody:o,responseText:k};if(WebSquare.ModelUtil.setResponseObj(C,q,p,W,A,R),r.k.printLog("submission error(E04). Status["+e.status+"] "+a),WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",C),WebSquare.layer.deleteSubmissionMessage(a),WebSquare.event.fireEvent(t,"xforms-submit-error",C),r.k.globalDebug1||"function"==typeof r.k.getGlobalDebug&&r.k.getGlobalDebug()){var B=new Object;I=/>[\s]*</g;B.information="url          : "+l+"\nasync        : "+h+"\nref          : "+d+"\nbind         : "+u+"\ntarget       : "+c+"\nreplace      : "+p+"\ninstance     : "+g+"\nencoding     : "+m+"\nmediatype    : "+f+"\nmethod       : "+y+"\naction       : "+v+"\nerrorHandler : "+w+"\nsoapaction   : "+S+"\nstatus       : "+e.status+"\nstatus text  : "+e.statusText+"\nresponseHeaders : "+WebSquare.ModelUtil.parseResponseHeader(e),WebSquare.ModelUtil.parseResponseHeaderJSON(e),B.result=k.replace(I,">\n<"),B.input=o.replace(I,">\n<"),r.k.showDebugMsg(B,"xml","Default Submission ("+i+")")}s=C}else{""==N.type&&("instance"==p&&null!=E?(WebSquare.WebSquaredoc.models[0].rebuild(E,c),WebSquare.WebSquaredoc.models[0].refresh()):"text"==p&&(WebSquare.WebSquaredoc.models[0].rebuild(k,c),WebSquare.WebSquaredoc.models[0].refresh()));var V={id:a,resourceUri:l,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(e),responseHeadersJSON:WebSquare.ModelUtil.parseResponseHeaderJSON(e),responseStatusCode:e.status,responseReasonPhrase:e.statusText,requestBody:o,responseText:k};if(WebSquare.ModelUtil.setResponseObj(V,q,p,W,A,R),r.k.printLog("submission complete. Status["+e.status+"] "+a),WebSquare.ModelUtil.setSubmissionEnd(t,"submission complete",V),WebSquare.event.fireEvent(t,"xforms-submit-done",V),!1!==b&&(WebSquare.ModelUtil.deleteMessage_pre(a),V.hidden=!0),r.k.globalDebug1||"function"==typeof r.k.getGlobalDebug&&r.k.getGlobalDebug()){B=new Object,I=/>[\s]*</g;B.information="url          : "+l+"\nasync        : "+h+"\nref          : "+d+"\nbind         : "+u+"\ntarget       : "+c+"\nreplace      : "+p+"\ninstance     : "+g+"\nencoding     : "+m+"\nmediatype    : "+f+"\nmethod       : "+y+"\naction       : "+v+"\nerrorHandler : "+w+"\nsoapaction   : "+S+"\nstatus       : "+e.status+"\nstatus text  : "+e.statusText+"\nresponseHeaders : "+WebSquare.ModelUtil.parseResponseHeader(e),WebSquare.ModelUtil.parseResponseHeaderJSON(e),B.result=k.replace(I,">\n<"),
B.input=o.replace(I,">\n<"),r.k.showDebugMsg(B,"xml","Default Submission ("+i+")")}s=V}return e.onreadystatechange=function(){},e=null,t.obfuscator_http=null,s}catch(i){e.onreadystatechange=function(){},e=null,t.obfuscator_http=null}},deleteMessage_pre:function(t){try{var e=WebSquare.ModelUtil.getSubmission(t);if(e&&e.scope_id){var i=WebSquare.layer._getMessageFrame(e.scope_id);if(null!=i)return i.deleteSubmissionMessage(t)}else e=null}catch(t){}setTimeout((function(){WebSquare&&WebSquare.ModelUtil&&WebSquare.ModelUtil.deleteMessage&&WebSquare.ModelUtil.deleteMessage(t)}),50)},deleteMessage:function(t){setTimeout((function(){if(WebSquare.layer)try{var e=WebSquare.ModelUtil.getSubmission(t);(!e||e&&!1!==e.hideProcessMsg)&&WebSquare.layer.deleteSubmissionMessage(t)}catch(e){WebSquare.layer.deleteSubmissionMessage(t)}}),50)},parseResponseHeader:function(t){var e="<header>";try{for(var i=t.getAllResponseHeaders().wq_trim().split("\n"),o=0;o<i.length;o++){var s=i[o].split(":");e+="<name>"+s[0].wq_trim()+"</name><value>"+s[1].wq_trim()+"</value>"}}catch(t){}return e+="</header>"},parseResponseHeaderJSON:function(t){var e="{",i=",";try{for(var o=t.getAllResponseHeaders().wq_trim().split("\n"),s=0;s<o.length;s++){s==o.length-1&&(i="");var r=o[s].split(":");e+='"'+r[0].wq_trim()+'":"'+r[1].wq_trim()+'"'+i}}catch(t){}return e+="}"},createWorkflow:function(t,e){try{var i={};i.id=t.id,i.processMsg=t.processMsg||WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"),i.resolveCallback=t.resolveCallback,i.rejectCallback=t.rejectCallback,i.step=t.step,i.promiseStatus=null,i.promiseValue=null,i.preStatus=!0,i.reject=function(t){this.promiseStatus="REJECT",this.promiseValue=t||"REJECT"},i.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return s.w.printStackTrace(t,null,this),null}},i.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return s.w.printStackTrace(t,null,this),window}},i.userData1=t.userData1||"",i.userData2=t.userData2||"",i.scope_id=t.scope_id||null;for(var o=WebSquare.ModelUtil.getModelByID(e),r=o.workflows.length-1;r>=0;r--)o.workflows[r].id===i.id&&(o.workflows[r].parentElement=null,o.workflows.splice(r,1));return i.parentElement=o.xmlNode,o.workflows.unshift(i),WebSquare.core.useWorkflowGlobal&&(window[i.id]=i),i}catch(t){s.w.printStackTrace(t)}},deleteWorkflow:function(t,e,i){try{void 0!==i&&null!=i||(i={});var r=i.scope_id||WebSquare.scope_obj;"object"===(0,o.Z)(t)&&null!=t&&(t=t.id);for(var a=WebSquare.ModelUtil.getModelByID(e).workflows,n=null,l=0;l<a.length;l++)if(!(WebSquare.strictMode&&r&&r!==a[l].scope_id||a[l].id!==t)){n=a[l],WebSquare.core.useWorkflowGlobal&&(window[t]=null),a[l].parentElement=null,a.splice(l,1);break}return n}catch(t){s.w.printStackTrace(t)}},getWorkflow:function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=i.scope_id||WebSquare.scope_obj,r=WebSquare.ModelUtil.getModelByID(e),a=null,n=0;n<r.workflows.length;n++){var l=r.workflows[n];if(!WebSquare.strictMode||!o||o===l.scope_id){if(o&&o===l.scope_id&&l.id==o+"_"+t){a=l;break}if(l.id==t&&(a=l,null==o))break}}return a}catch(t){s.w.printStackTrace(t)}},getRunningWorkflow:function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=i.scope_id||WebSquare.scope_obj,r=WebSquare.ModelUtil.getModelByID(e),a=null,n=0;n<r.workflows.length;n++){var l=r.workflows[n];if((!WebSquare.strictMode||!o||o===l.scope_id)&&(l.promiseStatus&&""!=l.promiseStatus)){if(!t){if(o&&o!=l.scope_id)continue;a=l;break}if(o&&o===l.scope_id&&l.id==o+"_"+t){a=l;break}if(l.id!=t){a=null;break}if(a=l,null==o)break}}return a}catch(t){s.w.printStackTrace(t)}},isRunningWorkflow:function(t,e){try{return null!=this.getRunningWorkflow(t,e)}catch(t){s.w.printStackTrace(t)}},getRunningWorkflowID:function(t){try{var e=this.getRunningWorkflow(null,t),i=null;return null!=e&&(i=e.id),i}catch(t){s.w.printStackTrace(t)}},
rejectWorkflow:function(t,e,i){try{var o=this.getRunningWorkflow(e,i),r=null;return null!=o&&(o.promiseStatus="REJECT",o.promiseValue=t||"REJECT",r=o),r}catch(t){s.w.printStackTrace(t)}},executeWorkflow:function(t,e){var i,s;void 0!==e&&null!=e||(e={});var a=!1,n=e.scope_function||WebSquare.ModelUtil;if("object"===(0,o.Z)(t)){if(s=n.createWorkflow(t),void 0===t.id||""===t.id)return r.k.printLog("workflow ID 가 정의되지 않았습니다."),Promise.resolve(!1);i=t.id,a=!0}else"string"==typeof t&&(i=t,s=n.getWorkflow(t));if(!s)return r.k.printLog("workflow 가 정의되지 않았습니다."),Promise.resolve(!1);if(n.isRunningWorkflow(i))return r.k.printLog("실행중인 workflow 가 존재합니다. workflowID : "+i),Promise.resolve(!1);if(!WebSquare.ModelUtil.validCheck(s.step))return Promise.resolve(!1);s.promiseStatus="PENDING";var l=s.resolveCallback,h=s.rejectCallback;s.result={},s.logTime={},s.submissionList=[],s.logTime.START=new Date;try{var d=WebSquare.ModelUtil.setAddInfo(s.step);""!==s.processMsg||(s.processMsg=WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"));for(var u={},c={},p=Promise.resolve(),g=0;g<d.length;g++){var m=d[g],f=m.action,b=m.pre,y=m.callOption,v=m.idx;if("submit"===m.type){if("error"==(b=WebSquare.ModelUtil.checkFunction(b,"pre",i,a,s)))return Promise.resolve(!1);var w=n.getSubmission(f);for(var v in f=w.id,s.submissionList.push(f),p=WebSquare.ModelUtil.connectPre(p,c,f,y,s,b),u[f]=WebSquare.ModelUtil.connectPromise(p,f,y,s,b),c)delete u[v];c={}}else if("submitDone"===m.type){var S=m.post;if("error"===(S=WebSquare.ModelUtil.checkFunction(S,"post",i,a,s)))return Promise.resolve(!1);f=(w=n.getSubmission(f)).id;var C=WebSquare.ModelUtil.executeCallback(p,u[f],c,S,s);for(var v in c)delete u[v];(c={})[f]=C}else if("function"===m.type){var x=m.action;if("error"===(x=WebSquare.ModelUtil.checkFunction(x,"function",i,a,s)))return Promise.resolve(!1);for(var v in p=WebSquare.ModelUtil.connectFunction(p,c,x,s),c)delete u[v];c={}}}}catch(t){}var _=[p];for(var v in c)_.push(c[v]);return Promise.all(_).then((function(){s.promiseStatus="RESOLVE",WebSquare.ModelUtil.deleteworkflowMsg(s.submissionList,i),s.logTime.END=new Date,WebSquare.ModelUtil.printTableLog(s),"error"!==(l=WebSquare.ModelUtil.checkFunction(l,"resolveCallback",i,a,s))&&("function"==typeof l&&l(s),WebSquare.ModelUtil.workflowObjClear(i,a,s))})).catch((function(t){WebSquare.ModelUtil.deleteworkflowMsg(s.submissionList,i),"error"!==(h=WebSquare.ModelUtil.checkFunction(h,"rejectCallback",i,a,s))&&(s.promiseStatus="REJECT",s.errorMsg=t,"function"==typeof h&&h(s),r.k.printLog("Workflow reject : "+i+", errorMsg : "+s.errorMsg),WebSquare.ModelUtil.workflowObjClear(i,a,s))}))},checkFunction:function(t,e,i,o,s){var a=t;if("string"==typeof t&&t.length>0){try{t=WebSquare.util.getGlobalFunction(t,s.scope_id)}catch(t){return r.k.printLog("==== "+e+" function error ["+a+"] is not a function \n"),WebSquare.ModelUtil.workflowObjClear(i,o,s),"error"}if("function"!=typeof t)return r.k.printLog("==== "+e+" function error ["+a+"] is not a function \n"),WebSquare.ModelUtil.workflowObjClear(i,o,s),"error"}return t},deleteworkflowMsg:function(t,e){try{if(WebSquare.layer.deleteSubmissionMessage(e),WebSquare.layer.submissionMessageQueue.length>0)for(var i=0;i<t.length;i++)WebSquare.layer.deleteSubmissionMessage(t[i])}catch(t){s.w.printStackTrace(t)}},workflowObjClear:function(t,e,i){e?WebSquare.ModelUtil.deleteWorkflow(t):(delete i.result,delete i.logTime,i.promiseStatus=null,i.promiseValue=null,i.errorMsg="",i.preStatus=!0)},validCheck:function(t){for(var e,i=[],o=[],s=[],a=0;a<t.length;a++){var n=t[a];"submit"===n.type?(i.push(n.action),o.push(0)):"submitDone"===n.type&&s.push(n.action)}for(a=0;a<s.length;a++){e=s[a];for(var l=!1,h=0,d=0;d<i.length;d++){if(i[d]==e){h=o[d],h++,o[d]=h,l=!0;break}}if(!l)return r.k.printLog("submit 이 정의되지 않은 submitDone이 존재합니다.  [ "+e+" ]"),!1;if(h>1)return r.k.printLog("submitDone 이 하나 이상 존재합니다.  [ "+e+" ]"),!1}return!0},setAddInfo:function(t){
for(var e=-1,i=[],o=0;o<t.length;o++){"submit"===(a=t[o]).type?(e++,a.idx=e,a.pos=o,a.callOption="0",i.push(a)):a.idx=-1}for(o=0;o<i.length;o++)for(var s=i[o],r=0;r<t.length;r++){var a;"submitDone"===(a=t[r]).type&&a.action===s.action&&-1===a.idx&&(a.idx=s.idx,t[s.pos].callOption="1")}return t},connectFunction:function(t,e,i,o){var s=[t];for(var r in e)s.push(e[r]);return Promise.all(s).then((function(t){return null===o.promiseStatus||"REJECT"===o.promiseStatus?Promise.reject(o.promiseValue):t instanceof Array?Promise.resolve(i(t[t.length-1],o)):Promise.resolve(i(t,o))}))},connectPre:function(t,e,i,o,s,r){var a=[t];for(var n in e)a.push(e[n]);return Promise.all(a).then((function(t){if(null===s.promiseStatus||"REJECT"===s.promiseStatus)return Promise.reject(s.promiseValue);var e=Promise.resolve(!0);return!("function"==typeof r&&!(e=r(i,s,t)))&&Promise.resolve(e)}))},connectPromise:function(t,e,i,o,s){return t.then((function(t){return t?WebSquare.ModelUtil.callSubmit(e,i,o):(r.k.printLog("submission pre함수 결과[ "+t+" ]에 따라 submission[ "+e+" ]을 실행하지 않습니다."),null)}))},executeCallback:function(t,e,i,o,s){var a=[t];for(var n in i)a.push(i[n]);return Promise.all(a).then((function(){return e})).then((function(t){var e=Promise.resolve();if(null==t)return null;var i=WebSquare.ModelUtil.callCommonResponseHandler(t[0],t[1],"async mode",t[2]);return null===s.promiseStatus||"REJECT"===s.promiseStatus?Promise.reject(s.promiseValue):(s.logTime[i.id]=new Date,"function"==typeof o&&(e=Promise.resolve(o(i,s,t)),r.k.printLog("Workflow callback "+i.id)),s.result[i.id]=i,null===s.promiseStatus||"REJECT"===s.promiseStatus?Promise.reject(s.promiseValue):e)}))},callSubmit:function(t,e,i){return null===i.promiseStatus||"REJECT"===i.promiseStatus?Promise.reject(i.promiseValue):WebSquare.ModelUtil.executeWorkFlowSubmission(t).then((function(t){if("0"==e){if(null===i.promiseStatus||"REJECT"===i.promiseStatus)return Promise.reject(i.promiseValue);var o=WebSquare.ModelUtil.callCommonResponseHandler(t[0],t[1],"async mode",t[2]);return i.logTime[o.id]=new Date,null===i.promiseStatus||"REJECT"===i.promiseStatus?Promise.reject(i.promiseValue):(i.result[o.id]=o,o)}return t}))},executeWorkFlowSubmission:function(t,e,i){return new Promise((function(o,s){WebSquare.ModelUtil.executeSubmission(t,e,i,o,s)}))},callCommonResponseHandler:function(t,e,i,o){i&&(window.clearTimeout(i),window.clearInterval(i),i=null);var s=WebSquare.ModelUtil.commonResponseHandler(t,e,"async mode",o);if(!1!==s.hideProcessMsg&&WebSquare.ModelUtil.deleteMessage_pre(s.id),null!=s&&null!=s.errorType)throw new Error(s.errorType);return s},executeSerial:function(t,e,i,o,s,r){var a=WebSquare.ModelUtil.makeWorkflowJson("serial",t,e,i,o,s);return WebSquare.ModelUtil.executeWorkflow(a,r)},executeParallel:function(t,e,i,o,s){var r=WebSquare.ModelUtil.makeWorkflowJson("parallel",t,e,i,o,s);return WebSquare.ModelUtil.executeWorkflow(r)},executeWhilst:function(t,e,i,o,s,a,n){var l={};l.id=n||"whilstTemp",l.promiseStatus="PENDING",l.result=[],""!=o||(o=WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value")),WebSquare.layer.addSubmissionMessage(l.id,o);for(var h=Promise.resolve(),d=0;"function"==typeof e&&e(t,d)&&"number"==typeof i&&d<i;)d++,h=h.then((function(){return h=WebSquare.ModelUtil.callSubmit(t,"1",l)})).then((function(t){var e=WebSquare.ModelUtil.callCommonResponseHandler(t[0],t[1],"async mode",t[2]);l.result.push(e)}));return h.then((function(){l.promiseStatus="RESOLVE","function"==typeof s&&s(l),r.k.printLog("executeWhilst complete "),WebSquare.ModelUtil.workflowObjClear(n,!0,l)})).catch((function(t){l.promiseStatus="REJECT","function"==typeof a&&a(l),r.k.printLog("executeWhilst rejected "+l.errorMsg),WebSquare.ModelUtil.workflowObjClear(n,!0,l)})),h},makeWorkflowJson:function(t,e,i,o,s,r){var a={};a.id=r||t+"Temp",a.processMsg=i||WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"),a.resolveCallback=o,a.rejectCallback=s;for(var n=[],l=0;l<e.length;l++){
var h=e[l],d={};if(d.type="submit",d.action=h,n.push(d),"serial"===t)(u={type:"submitDone"}).action=h,n.push(u)}if("parallel"===t)for(l=0;l<e.length;l++){var u;h=e[l];(u={type:"submitDone"}).action=h,n.push(u)}return a.step=n,a},printTableLog:function(t){var e=t.step,i={},o=0,s=-1,a="S",n="",l="",h=0,d=0,u=0;for(h=0;h<e.length;h++)l=e[h].action,"function"===(n=e[h].type)&&(n="submit"),"submit"===a&&"submit"===n||s++,"function"===n||"submit"===n?(i[l+"S"]={},i[l+"S"].row=o,i[l+"S"].col=s,o++):(i[l+"C"]={},i[l+"C"].row=i[l+"S"].row,i[l+"C"].col=s),a=n;s++;var c=t.logTime.START,p=0,g=[],m=o,f=s,b=null,y=[];for(d=0;d<m;d++){g[d]=[];for(u=0;u<=f;u++)g[d][u]=""}for(h=0;h<e.length;h++)l=e[h].action,"submitDone"!==(n=e[h].type)&&(o=i[l+"S"].row,s=i[l+"S"].col,y[o]=[],y[o][0]=s+1,g[o][s]=l,"function"!==n&&(o=i[l+"C"].row,s=i[l+"C"].col,void 0!==(b=t.logTime[l])&&(p=b.getTime()-c.getTime(),y[o][1]=s-1,g[o][s]="["+p+"ms]")));var v=[],w=0;for(d=0;d<f;d++){v[d]=0;for(u=0;u<m;u++)(w=g[u][d].length)>v[d]&&(v[d]=w)}var S=0,C=0,x="",_="";for(d=0;d<m;d++){S=y[d][0],C=y[d][1];for(u=0;u<=f;u++){for(h=(x=g[d][u]).length;h<v[u];h++)x+=u>=S&&u<=C?"-":" ";_+="|"+x}_+="\n"}var I=t.logTime.END;p=I.getTime()-c.getTime(),_="\n[ WORKFLOW :: "+t.id+" Start : "+WebSquare.ModelUtil.logFormatTime(c)+"]\n"+_+"[ WORKFLOW :: "+t.id+" End : "+WebSquare.ModelUtil.logFormatTime(I)+"    duration : "+p+"ms ]\n",r.k.printLog(_)},logFormatTime:function(t){return WebSquare.text.fillZero(t.getHours(),2)+":"+WebSquare.text.fillZero(t.getMinutes(),2)+":"+WebSquare.text.fillZero(t.getSeconds(),2)+":"+WebSquare.text.fillZero(t.getMilliseconds(),3)}}},2014:function(t,e,i){"use strict";i.d(e,{h:function(){return s}});var o=i(484),s={Vector:function(){this.type="vector",this.length=0,this.data=[],this.dataType=[],this.attributeName=[],this.attributeValue=[]}};s.Vector.prototype.setDocument=function(t){try{if("vector"==t.documentElement.nodeName){this.length=0,this.data=[],this.dataType=[];for(var e=t.documentElement.attributes,i=0;i<e.length;i++){var o=e.item(i);WebSquare.nodeValueDeprecated?(this.attributeName.push(o.name),this.attributeValue.push(o.value)):(this.attributeName.push(o.nodeName),this.attributeValue.push(o.nodeValue))}var s=t.documentElement.childNodes;for(i=0;i<s.length;i++){var r=s.item(i);if(1==r.nodeType&&"data"==r.nodeName){var a=r.getAttribute("value");if(null!=a)this.data.push(a),this.dataType.push("String");else for(var n=r.childNodes,l=0;l<n.length;l++){var h=n.item(l);if(1==h.nodeType){this.data.push(WebSquare.xml.serialize(h)),this.dataType.push("Document");break}}this.length++}}}}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.addAll=function(t){try{"vector"==t.type&&(this.data=this.data.concat(t.data),this.dataType=this.dataType.concat(t.dataType),this.length=this.data.length)}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.getAttribute=function(t){var e="";try{for(var i=0;i<this.attributeName.length;i++)if(this.attributeName[i]==t){e=this.attributeValue[i];break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Vector.prototype.setAttribute=function(t,e){try{for(var i=!1,o=0;o<this.attributeName.length;o++)if(this.attributeName[o]==t){i=!0,this.attributeValue[o]=e;break}i||(this.attributeName.push(t),this.attributeValue.push(e))}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.setDebug=function(t){this.setAttribute("debug",t)},s.Vector.prototype.setAction=function(t){this.setAttribute("action",t)},s.Vector.prototype.setTask=function(t){this.setAttribute("task",t)},s.Vector.prototype.setProcessName=function(t){void 0===t||null==t||""==t?this.setAttribute("processName",WebSquare.proworks.getControllerServer()):this.setAttribute("processName",WebSquare.proworks.getControllerServer()+"."+t)},s.Vector.prototype.getAction=function(){return this.getAttribute("action")},s.Vector.prototype.getTask=function(){return this.getAttribute("task")},s.Vector.prototype.getProcessName=function(){
return this.getAttribute("processName")},s.Vector.prototype.addElement=function(t){try{WebSquare.xml.isDocument(t)?(this.data.push(WebSquare.xml.serialize(t)),this.dataType.push("Document")):"object"!=(0,o.Z)(t)||void 0===t.type||"vector"!=t.type&&"hashtable"!=t.type?"string"==typeof t&&WebSquare.xml.isDocumentString(t)?(this.data.push(t),this.dataType.push("Document")):(this.data.push(t+""),this.dataType.push("String")):(this.data.push(t.toString()),this.dataType.push("Document")),this.length++}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.elementAt=function(t){var e=null;try{if((t=parseInt(t,10))>=0&&t<this.length)if("Document"==this.dataType[t]){var i=WebSquare.xml.parse(this.data[t]);e="vector"==i.documentElement.nodeName?WebSquare.collection.toVector(i):"hashtable"==i.documentElement.nodeName?WebSquare.collection.toHashtable(i):i}else e=this.data[t]}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Vector.prototype.insertElementAt=function(t,e){try{if((e=parseInt(e,10))==this.length)return void this.addElement(t);if(e>=0&&e<this.length){for(var i=this.length;i>e;i--)this.data[i]=this.data[i-1],this.dataType[i]=this.dataType[i-1];WebSquare.xml.isDocument(t)?(this.data[e]=WebSquare.xml.serialize(t),this.dataType[e]="Document"):"object"!=(0,o.Z)(t)||void 0===t.type||"vector"!=t.type&&"hashtable"!=t.type?"string"==typeof t&&WebSquare.xml.isDocumentString(t)?(this.data[e]=t,this.dataType[e]="Document"):(this.data[e]=t+"",this.dataType[e]="String"):(this.data[e]=t.toString(),this.dataType[e]="Document"),this.length++}}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.remove=function(t){var e=null;try{if((t=parseInt(t,10))>=0&&t<this.length){if("Document"==this.dataType[t]){var i=WebSquare.xml.parse(this.data[t]);e="vector"==i.documentElement.nodeName?WebSquare.collection.toVector(i):"hashtable"==i.documentElement.nodeName?WebSquare.collection.toHashtable(i):i}else e=this.data[t];if(t<this.length-1)for(var o=t;o<this.length-1;o++)this.data[o]=this.data[o+1],this.dataType[o]=this.dataType[o+1];this.data.pop(),this.dataType.pop(),this.length--}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Vector.prototype.fastRemove=function(t){try{if((t=parseInt(t,10))>=0&&t<this.length){if(t<this.length-1)for(var e=t;e<this.length-1;e++)this.data[e]=this.data[e+1],this.dataType[e]=this.dataType[e+1];this.data.pop(),this.dataType.pop(),this.length--}}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.set=function(t,e){try{(t=parseInt(t,10))>=0&&t<this.length&&(WebSquare.xml.isDocument(e)?(this.data[t]=WebSquare.xml.serialize(e),this.dataType[t]="Document"):"object"!=(0,o.Z)(e)||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type?"string"==typeof e&&WebSquare.xml.isDocumentString(e)?(this.data[t]=e,this.dataType[t]="Document"):(this.data[t]=e+"",this.dataType[t]="String"):(this.data[t]=e.toString(),this.dataType[t]="Document"))}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.size=function(){return this.length},s.Vector.prototype.toDocument=function(){return WebSquare.xml.parse(this.toString())},s.Vector.prototype.toString=function(){var t=[];try{t.push("<vector"),t.push(" result='"+this.length+"'");for(var e=0;e<this.attributeName.length;e++)"result"!=this.attributeName[e]&&t.push(" "+this.attributeName[e]+"='"+this.attributeValue[e]+"'");t.push(">");for(e=0;e<this.length;e++)if("Document"==this.dataType[e]){t.push("<data vectorkey='"+e+"'>");var i=this.data[e].indexOf("?>");if(-1==i)t.push(this.data[e]);else new RegExp("<?xml[\\s]+(version|VERSION)[\\w\\W]+?>").test(this.data[e])?t.push(this.data[e].substring(i+2)):t.push(this.data[e]);t.push("</data>")}else t.push("<data vectorkey='"+e+"' value='"+WebSquare.xml.encode(this.data[e])+"'/>");t.push("</vector>")}catch(t){WebSquare.exception.printStackTrace(t)}return t.join("")},s.Hashtable=function(){this.type="hashtable",this.key=[],this.data=[],this.dataType=[],this.attributeName=[],
this.attributeValue=[]},s.Hashtable.prototype.containsKey=function(t){var e=!1;try{for(var i=0;i<this.key.length;i++)if(this.key[i]==t){e=!0;break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Hashtable.prototype.setDocument=function(t){try{if("hashtable"==t.documentElement.nodeName){this.key=[],this.data=[],this.dataType=[];for(var e=t.documentElement.attributes,i=0;i<e.length;i++){var o=e.item(i);this.attributeName.push(o.nodeName),this.attributeValue.push(o.nodeValue)}var s=t.documentElement.childNodes;for(i=0;i<s.length;i++){var r=s.item(i);if(1==r.nodeType&&"data"==r.nodeName){this.key.push(r.getAttribute("hashkey"));var a=r.getAttribute("value");if(null!=a)this.data.push(a),this.dataType.push("String");else for(var n=r.childNodes,l=0;l<n.length;l++){var h=n.item(l);if(1==h.nodeType){this.data.push(WebSquare.xml.serialize(h)),this.dataType.push("Document");break}}}}}}catch(t){WebSquare.exception.printStackTrace(t)}},s.Hashtable.prototype.getAttribute=function(t){var e="";try{for(var i=0;i<this.attributeName.length;i++)if(this.attributeName[i]==t){e=this.attributeValue[i];break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Hashtable.prototype.setAttribute=function(t,e){try{for(var i=!1,o=0;o<this.attributeName.length;o++)if(this.attributeName[o]==t){i=!0,this.attributeValue[o]=e;break}i||(this.attributeName.push(t),this.attributeValue.push(e))}catch(t){WebSquare.exception.printStackTrace(t)}},s.Hashtable.prototype.setDebug=function(t){this.setAttribute("debug",t)},s.Hashtable.prototype.setAction=function(t){this.setAttribute("action",t)},s.Hashtable.prototype.setTask=function(t){this.setAttribute("task",t)},s.Hashtable.prototype.setProcessName=function(t){void 0===t||null==t||""==t?this.setAttribute("processName",WebSquare.proworks.getControllerServer()):this.setAttribute("processName",WebSquare.proworks.getControllerServer()+"."+t)},s.Hashtable.prototype.getAction=function(){return this.getAttribute("action")},s.Hashtable.prototype.getTask=function(){return this.getAttribute("task")},s.Hashtable.prototype.getProcessName=function(){return this.getAttribute("processName")},s.Hashtable.prototype.get=function(t){var e=null;try{for(var i=0;i<this.key.length;i++)if(this.key[i]==t){if("Document"==this.dataType[i]){var o=WebSquare.xml.parse(this.data[i]);e="vector"==o.documentElement.nodeName?WebSquare.collection.toVector(o):"hashtable"==o.documentElement.nodeName?WebSquare.collection.toHashtable(o):o}else e=this.data[i];break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Hashtable.prototype.put=function(t,e){var i=null;try{for(var s=!1,r=0;r<this.key.length;r++)if(this.key[r]==t){if(s=!0,"Document"==this.dataType[r]){var a=WebSquare.xml.parse(this.data[r]);i="vector"==a.documentElement.nodeName?WebSquare.collection.toVector(a):"hashtable"==a.documentElement.nodeName?WebSquare.collection.toHashtable(a):a}else i=this.data[r];WebSquare.xml.isDocument(e)?(this.data[r]=WebSquare.xml.serialize(e),this.dataType[r]="Document"):"object"!=(0,o.Z)(e)||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type?"string"==typeof e&&WebSquare.xml.isDocumentString(e)?(this.data[r]=e,this.dataType[r]="Document"):(this.data[r]=e+"",this.dataType[r]="String"):(this.data[r]=e.toString(),this.dataType[r]="Document");break}s||(this.key.push(t),WebSquare.xml.isDocument(e)?(this.data.push(WebSquare.xml.serialize(e)),this.dataType.push("Document")):"object"!=(0,o.Z)(e)||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type?"string"==typeof e&&WebSquare.xml.isDocumentString(e)?(this.data.push(e),this.dataType.push("Document")):(this.data.push(e+""),this.dataType.push("String")):(this.data.push(e.toString()),this.dataType.push("Document")))}catch(t){WebSquare.exception.printStackTrace(t)}return i},s.Hashtable.prototype.remove=function(t){var e=null;try{for(var i=0;i<this.key.length;i++)if(this.key[i]==t){if("Document"==this.dataType[i]){var o=WebSquare.xml.parse(this.data[i])
;e="vector"==o.documentElement.nodeName?WebSquare.collection.toVector(o):"hashtable"==o.documentElement.nodeName?WebSquare.collection.toHashtable(o):o}else e=this.data[i];this.key[i]=this.key[this.key.length-1],this.data[i]=this.data[this.data.length-1],this.dataType[i]=this.dataType[this.dataType.length-1],this.key.pop(),this.data.pop(),this.dataType.pop();break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Hashtable.prototype.keys=function(){return WebSquare.text.arraySort(this.key)},s.Hashtable.prototype.elements=function(){var t=[];try{for(var e=WebSquare.text.arraySort(this.key),i=0;i<e.length;i++)t.push(this.get(e[i]))}catch(t){WebSquare.exception.printStackTrace(t)}return t},s.Hashtable.prototype.toDocument=function(){return WebSquare.xml.parse(this.toString())},s.Hashtable.prototype.toString=function(){var t=[];t.push("<hashtable");try{for(var e=0;e<this.attributeName.length;e++)t.push(" "+this.attributeName[e]+"='"+this.attributeValue[e]+"'");t.push(">");for(e=0;e<this.key.length;e++)if("Document"==this.dataType[e]){t.push("<data hashkey='"+WebSquare.xml.encode(this.key[e])+"'>");var i=this.data[e].indexOf("?>");if(-1==i)t.push(this.data[e]);else new RegExp("<?xml[\\s]+(version|VERSION)[\\w\\W]+?>").test(this.data[e])?t.push(this.data[e].substring(i+2)):t.push(this.data[e]);t.push("</data>")}else t.push("<data hashkey='"+WebSquare.xml.encode(this.key[e])+"' value='"+WebSquare.xml.encode(this.data[e])+"'/>")}catch(t){WebSquare.exception.printStackTrace(t)}return t.push("</hashtable>"),t.join("")},s.toVector=function(t){var e=new WebSquare.collection.Vector;try{var i=null;"string"==typeof t?i=WebSquare.xml.parse(t):WebSquare.xml.isDocument(t)&&(i=t),e.setDocument(i)}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.toHashtable=function(t){var e=new WebSquare.collection.Hashtable;try{var i=null;"string"==typeof t?i=WebSquare.xml.parse(t):WebSquare.xml.isDocument(t)&&(i=t),e.setDocument(i)}catch(t){WebSquare.exception.printStackTrace(t)}return e}},5052:function(t,e,i){"use strict";i.d(e,{v:function(){return d}});var o=i(484),s=i(2137),r=i(7757),a=i.n(r),n=i(1974),l=i(1477),h=i(5948),d={supportActiveX:"undefined"!=typeof ActiveXObject&&l.d.browserCheck.ieAllVersion&&!n.x.msActiveXFilteringEnabled,supportDOM:!!document.implementation&&!!document.implementation.createDocument,websquareSerializer:new RegExp(n.x.userAgentPattern.serializer).test(navigator.userAgent),supportXMLHttp:"undefined"!=typeof XMLHttpRequest,uriEncoder:new RegExp(n.x.userAgentPattern.URIEncoder).test(navigator.userAgent)};d._XMLHTTP_PROGIDS=l.d._XMLHTTP_PROGIDS,d._XML_NAMESPACE={SCHEMA:"http://www.w3.org/1999/XMLSchema",XFORMS:"http://www.w3.org/2002/xforms",XHTML:"http://www.w3.org/1999/xhtml",XML:"http://www.w3.org/XML/1998/namespace",XSL:"http://www.w3.org/1999/XSL/Transform",EVENTS:"http://www.w3.org/2001/xml-events",W2:"http://www.inswave.com/websquare"},d.EXT_PLUGIN={},d.EMPTY_TAG,d.maxZindex=10,d.FLzIndex=10,d.forcedValueSetting=null,d.firePageunload=!1,d.onurlchange=!1,d.urlchangebyapi=!1,d.onclearpage=!1,d.userClearMemoryStack=[],d.memoryLeakComponent={editor:1,fusionchart:1},d.memoryLeakComponentCount=0,d.useSubmissionGlobal=!1,d.useWorkflowGlobal=!1,d.projectCommonVariable="$c",d._projectCommonHash={},d._msaHash={},d._msaServerHash={},d.errorMessageData=new Object,d.userMessageData=new Object,d.commonCache={},d.udcObj={},d.browserCheck=function(){return navigator.appName},d.browserCheck.ie=l.d.browserCheck.ie,d.browserCheck.moz=l.d.browserCheck.moz,d.browserCheck.opera=l.d.browserCheck.opera,d.browserCheck.chrome=l.d.browserCheck.chrome,d.browserCheck.android=l.d.browserCheck.android,d.browserCheck.iphone=l.d.browserCheck.iphone,d.browserCheck.ipad=l.d.browserCheck.ipad,d.browserCheck.ipod=l.d.browserCheck.ipod,d.browserCheck.blackberry=l.d.browserCheck.blackberry,d.browserCheck.safari=l.d.browserCheck.safari,d.browserCheck.ieAllVersion=l.d.browserCheck.ieAllVersion,d.browserCheck.spartan=l.d.browserCheck.spartan,
d.browserCheck.chromeEdge=l.d.browserCheck.chromeEdge,d.browserCheck.ieVersion={},d.browserCheck.mozVersion={},d.browserCheck.chromeVersion={},d.browserCheck.safariVersion={},d.browserCheck.operaVersion={},d.browserCheck.spartanVersion={},d.browserCheck.chromeEdgeVersion={},d.getXMLHTTPObject=function(t){var e=null;try{l.d.useActiveXObject&&!0!==t?e=new ActiveXObject(d._XMLHTTP_PROGIDS[0]):window.XMLHttpRequest&&(e=new XMLHttpRequest)}catch(t){h.w.printStackTrace(t)}return void 0===e||null==e?(WebSquare.logger.printLog(WebSquare.language.getMessage("E_core_AjaxUnsupportedBrowser")),null):e},d._getHybridUri=function(t){try{if("string"!=typeof t)return;var e,i,o=t;return 1==n.x.hybridApp&&t.indexOf("://")<0&&t.startsWith("/")?o=WebSquare.util.appendingPathComponent(n.x.w2xDocumentRoot,t):"app:"==location.protocol&&(i=(e=location.href).lastIndexOf("/"),o=e.substr(0,i)+t),o}catch(t){h.w.printStackTrace(t,null,this)}},d._loadBefore=function(t){try{var e=d.getConfiguration("/WebSquare/environment/requestHeaderFunction/@value");if(""!=e){var i=WebSquare.util.getGlobalFunction(e);"function"==typeof i&&i(t)}}catch(t){h.w.printStackTrace(t,null,this)}},d._loadAfter=function(t,e,i,o,s){try{var r=null,a=d.getConfiguration("/WebSquare/redirectUrl/@value");if(""!=a&&i.indexOf(a)>=0)return void(location.href=i);if(t>="400"||0===t){if(s)return;if("true"===d.getConfiguration("/WebSquare/errorPage/@value")){var n=d.getConfiguration("/WebSquare/errorPage/E"+t);if(n)r=WebSquare.xml._decode(WebSquare.xml._encode(n));else{var l=d.getConfiguration("/WebSquare/errorPage/Else");if(l)r=WebSquare.xml._decode(WebSquare.xml._encode(l));else{var u=d.getConfiguration("/WebSquare/errorPage");r=u?WebSquare.xml._decode(WebSquare.xml._encode(u)):e}}}else r=e;throw{message:"core._loadAfter : "+t}}if(o&&null!=(r=o.xml)&&""!==r||(r=e),r.startsWith("/*ENCRYPTED*/")){var c=(new Date).getTime();r=new Function("return "+r)();var p=(new Date).getTime();WebSquare.logger.printLog("decryption+eval time: "+(p-c)+"ms")}return r}catch(t){h.w.printStackTrace(t,null,this)}},d.load=function(t,e){try{if("string"!=typeof t)return;void 0!==e&&null!=e||(e={});var i=t,o=d._getHybridUri(t),s=d.getXMLHTTPObject(),r=null;try{l.d.openResourceUri(o,s),d._loadBefore(s),s.send(null);var a=!0===e.useXML&&d.browserCheck.ieAllVersion?s.responseXML:null;r=d._loadAfter(s.status,s.responseText,s.responseURL,a,!0===e.skipError)}catch(t){var n="";n=i.indexOf("uiplugin")>-1?WebSquare.language.getMessage("E_core_NoPluginError",i)||"Plugin ["+i+"] does not exist.":WebSquare.language.getMessage("E_core_NoModuleError",i)||"Resource ["+i+"] does not exist.",WebSquare.logger.printLog(n)}return s=null,r}catch(t){h.w.printStackTrace(t,null,this)}},d.loadAsync=function(){var t=(0,s.Z)(a().mark((function t(e,i){var o,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,"string"==typeof e){t.next=4;break}return t.abrupt("return",Promise.reject("core.loadAsync error : uri invalid. ["+e+"]"));case 4:return void 0!==i&&null!=i||(i={}),o=!0===i.skipError,s=!0===i.useXML&&d.browserCheck.ieAllVersion,t.abrupt("return",new Promise((function(t,i){var r=l.d.getXMLHTTPObject(),a=l.d.getResourcePostfix(d._getHybridUri(e));r.open("GET",a,!0);var n=function(e){if(4===r.readyState){var a=s?r.responseXML:null,n=d._loadAfter(r.status,r.responseText,r.responseURL,a,o);r.status>="400"||0===r.status?i(n):t(n),r=null}};l.d.useActiveXObject?r.onreadystatechange=n:(r.onload=n,r.onerror=function(t){i(r.statusText),r=null}),d._loadBefore(r),r.send(null)})));case 10:t.prev=10,t.t0=t.catch(1),h.w.printStackTrace(t.t0,null,this);case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(e,i){return t.apply(this,arguments)}}(),d.download=function(t,e,i,o){if(void 0!==i&&null!=i&&""!=i||(i="post"),null!=o&&void 0!==o||(o=!1),o)try{var s="blob",r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t="",e=this.getResponseHeader("Content-Disposition")
;if(WebSquare.util.isIEAllVersion(11)){var i=(e=e.wq_replaceAll(";","")).indexOf("=")+1;t=e.substring(i,e.length),navigator.msSaveOrOpenBlob(r.response,t)}else{var o=window.URL.createObjectURL(this.response);if(e){var s=document.createElement("a");t=e.match(/filename="([^"]+)"/)[1],t=decodeURIComponent(t),s.download=t,s.href=o,s.click()}WebSquare.layer.hideProcessMessage()}}};try{r.ontimeout=function(t){}}catch(t){}r.open(i,t,!0),r.setRequestHeader("Content-Type","text/plain"),r.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"),r.responseType=s;var a=d.getConfiguration("/WebSquare/handler/requestHeaderFunction/@value");if(""!=a){var u=WebSquare.util.getGlobalFunction(a);u&&u(r,"download")}r.send("xmlValue="+e)}catch(t){}else{var c=!1;null!=document.getElementById("__iframe__")&&(c=!0);var p=null,g="";if(c)p=document.getElementById("___iframe__div");else{if((p=document.createElement("div")).id="___iframe__div",p.style.width="0px",p.style.height="0px",p.style.visibility="hidden",document.body.appendChild(p),g=WebSquare.net.getSSLBlankPage(),n.x.domain){var m=d.getConfiguration("domainFrameURL");m||(m=n.x.baseURI+l.d.inquiresPath("message/domainFrame.html")),g="src='"+(m+="?domain="+WebSquare.text.URLEncoder(n.x.domain))+"'"}p.innerHTML="<iframe frameborder='0' id='__iframe__' name='__iframe__' scrolling='no' style='width:0; height:0' "+g+"></iframe>"}try{var f=document.getElementById("__iframe__"),b=function(){try{"interactive"==f.contentWindow.document.readyState&&WebSquare.layer.hideProcessMessage()}catch(t){}};if(d.browserCheck.ie){try{f.contentWindow.document}catch(t){return d.clearTimer("__iframe__"),void d.setTimer(d.download,{key:"__iframe__",caller:this,delay:500,args:arguments})}f.contentWindow.document.onreadystatechange=b}else WebSquare.layer.hideProcessMessage()}catch(t){h.w.printStackTrace(t)}try{var y=document.createElement("form");if(y.target="__iframe__",y.action=t,y.method=i,y.style.display="inline",void 0!==e){var v=document.createElement("input");v.type="hidden",v.name="xmlValue",WebSquare.xml.isDocument(e)?v.value=WebSquare.xml.serialize(e):v.value=e,y.appendChild(v)}p.appendChild(y),y.submit()}catch(t){}finally{try{y&&v&&(v.value=""),p.removeChild(y)}catch(t){}}}},d.excelDownload=function(t,e,i,s){if(!s||"object"!==(0,o.Z)(s))s={};var r="WS5_downloadComplete",a="true",u=null,c=null,p=s.timeout||null,g=s.checkInterval||1e3,m=s.onSuccessCallback||null,f=s.onFailureCallback||null,b=s.scopeId||"";if(WebSquare.hybridApp){var y=document.getElementById("__iframe__"),v=function(){document.cookie=r+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",WebSquare.layer.hideProcessMessage({scope:b}),clearInterval(u)},w=function(t){v(),m&&m(t)},S=function(t){v(),f&&f(t)};try{var C=function(e){w(t)},x=function(e){S(t)},_={};_.url=t,_.data=e,window.$h.websquare.excelDownload(C,x,_)}catch(t){h.w.printStackTrace(t)}}else{if(s.nativeApp)return window.__WebSquareExcel.downloadExcel(t,e),void WebSquare.layer.hideProcessMessage({scope:b});void 0!==i&&null!=i&&""!=i||(i="post"),WebSquare.util.isMobile()&&window.open("blank.html","__ipad_excel__");var I=!1;null!=document.getElementById("__iframe__")&&(I=!0);var T=null;if(I)T=document.getElementById("___iframe__div");else{(T=document.createElement("div")).id="___iframe__div",T.style.width="0px",T.style.height="0px",T.style.visibility="hidden",document.body.appendChild(T);var k=WebSquare.net.getSSLBlankPage();if(n.x.domain){var D=n.x.baseURI+l.d.inquiresPath("message/domainFrame.html");k="src='"+(D+="?domain="+WebSquare.text.URLEncoder(n.x.domain))+"'"}T.innerHTML="<iframe frameborder='0' id='__iframe__' name='__iframe__' scrolling='no' style='width:0; height:0' "+k+"></iframe>"}try{y=document.getElementById("__iframe__"),v=function(){document.cookie=r+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",WebSquare.layer.hideProcessMessage({scope:b}),clearInterval(u)},w=function(t,e){v(),e||(e={}),m&&m(t,e)},
S=function(t,e){v(),e||(e={}),f&&f(t,e)};document.cookie=r+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;";var L=function(){try{"interactive"==y.contentWindow.document.readyState&&w(t)}catch(t){}},W=function(){try{var e=r+"="+a;document.cookie.indexOf(r+"=")>-1?document.cookie.indexOf(e)>-1?w(t):S(t):p&&new Date-c>p?S(t):s.httpReadOnly&&v()}catch(t){}};if(WebSquare.util.isIEAllVersion()){try{y.contentWindow.document}catch(t){return d.clearTimer("__iframe__"),void d.setTimer(d.excelDownload,{key:"__iframe__",caller:this,delay:500,args:arguments})}y.contentWindow.document.onreadystatechange=L}else s.useXHR||(c=new Date,u=setInterval(W,g))}catch(t){h.w.printStackTrace(t)}try{if(s.useXHR){var A="",E="",M=new XMLHttpRequest,q=!0,R=s.userExcel||"false";R+="";var N=s.userExcel||"false";N+="",t.indexOf("xmlToExcel2.wq")>-1||"true"==R?(A="blob",E="exceldownload"):t.indexOf("xmlToCSV.wq")>-1||"true"==N?(A="blob",E="csvdownload"):q=!1,M.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var e="",i=this.getResponseHeader("Content-Disposition");if(q)if(WebSquare.util.isIEAllVersion(11)){var o=(i=i.wq_replaceAll(";","")).indexOf("=")+1;e=i.substring(o,i.length),navigator.msSaveOrOpenBlob(M.response,e)}else{var s=window.URL.createObjectURL(this.response);if(i){var r=document.createElement("a");e=i.match(/filename="([^"]+)"/)[1],e=decodeURIComponent(e),r.download=e,r.href=s,r.click()}}var a={};try{this.responseText&&(a=JSON.parse(this.responseText))}catch(t){}w(t,a)}else S(t,{})};try{M.timeout=p,M.ontimeout=function(e){S(t)}}catch(t){}M.open("POST",t,!0),M.setRequestHeader("Content-Type","text/plain"),M.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"),M.responseType=A;var F=d.getConfiguration("/WebSquare/handler/requestHeaderFunction/@value");if(""!=F){var O=WebSquare.util.getGlobalFunction(F);O&&O(M,E)}WebSquare.xml.isDocument(e)&&(e=WebSquare.xml.serialize(e)),M.send("xmlValue="+e)}else{var B=document.createElement("form");if(WebSquare.util.isMobile()?B.target="__ipad_excel__":(B.target="__iframe__",B.encoding="text/plain"),t=t.indexOf("?")>-1?t+"&suffix="+(new Date).getTime()+1e4*Math.random():t+"?suffix="+(new Date).getTime()+1e4*Math.random(),B.action=t,B.method=i,B.style.display="inline",B.acceptCharset="UTF-8",void 0!==e){var V=document.createElement("input");V.type="hidden",V.name="xmlValue",WebSquare.xml.isDocument(e)&&(e=WebSquare.xml.serialize(e)),V.value=e,B.appendChild(V)}T.appendChild(B),B.submit()}}catch(t){}finally{try{B&&V&&(V.value=""),T.removeChild(B)}catch(t){}}}},d.callParentFunction=function(t){var e=null;try{for(var i=opener||parent,s=t.wq_trim().split("."),r=0,a=i[s[r++]];a&&("object"==(0,o.Z)(a)||"function"==typeof a)&&r<s.length;)a=a[s[r++]];for(var n=arguments.length,l=new Array(n>1?n-1:0),d=1;d<n;d++)l[d-1]=arguments[d];e=a.apply(a,l)}catch(t){h.w.printStackTrace(t)}return e},d.closePopupWindow=function(){var t=WebSquare.net.getParameter("popupID");d.callParentFunction("WebSquare.uiplugin.popup.callClose",t)},d.getNamespaces=function(t){var e={};try{var i=null;if(1==t.nodeType?i=t.attributes:9==t.nodeType&&(i=t.documentElement.attributes),null!=i)for(var o=0;o<i.length;o++){var s=i.item(o);"xmlns"==s.nodeName?e[""]=null!=s.value?s.value:s.nodeValue:0==s.nodeName.indexOf("xmlns")&&(null!=s.value&&null!=s.name?e[s.name.substring(6)]=s.value:e[s.nodeName.substring(6)]=s.nodeValue)}}catch(t){h.w.printStackTrace(t)}return e},d.getURL=function(t,e){if("string"==typeof t){void 0!==e&&null!=e||(e={});try{if(t.indexOf("://")>-1)return t;if(t.startsWith("/")||t.startsWith("\\")){if(e.msaName){var i;(i=d._msaServerHash[e.msaName])&&(t=i.baseURI+t)}}else if(e.msaName)(i=d._msaServerHash[e.msaName])&&(t=(e.tempHome||i.w2xHome)+t,t=i.baseURI+t);else!0!==e.baseURI&&(t=(e.tempHome||WebSquare.w2xHome)+t);""==n.x.w2xDocumentRoot||t.startsWith("..")||e.msaName||(t=n.x.w2xDocumentRoot+t),
!0!==e.baseURI||e.msaName?!0!==e.baseServletURI||e.msaName||(t=n.x.baseServletURI+t):t=n.x.baseURI+t}catch(t){h.w.printStackTrace(t)}return t}},d.getImageURL=function(t,e){var i=d.getConfiguration("/WebSquare/imageURLPrefix/@value"),o=d.getConfiguration("/WebSquare/imageURLPostfix/@value");if("string"==typeof t){if(t.startsWith("data:"))return t;if(null!=l.d.imageServlet){if(t.startsWith("url")){var s=t.substring(3).wq_trim();"("==s.charAt(0)&&")"==s.charAt(s.length-1)&&(t=s.substring(1,s.length-1),t=d.getURL(t.wq_trim(),e),t=n.x.baseURI+l.d.imageServlet+t,t=l.d.getImagePostfix(t),0==n.x.isLocal&&d.browserCheck.ie&&"6"==d.browserVersion()&&-1==t.indexOf("://")&&(t=location.protocol+"//"+location.host+t),t="url("+t+")")}else""!==i?t=i+t.wq_trim():(t=d.getURL(t.wq_trim(),e),t=n.x.baseURI+l.d.imageServlet+t,"$blank"!=o&&(t=l.d.getImagePostfix(t))),0==n.x.isLocal&&d.browserCheck.ie&&"6"==d.browserVersion()&&-1==t.indexOf("://")&&(t=location.protocol+"//"+location.host+t);null!=l.d.imageHostUrl&&(t+="&hostUrl="+l.d.imageHostUrl)}else"$blank"!=o&&(t=l.d.getResourcePostfix(t)),t=""!==i?i+t.wq_trim():d.getURL(t.wq_trim(),e),0==n.x.isLocal&&d.browserCheck.ie&&"6"==d.browserVersion()&&-1==t.indexOf("://")&&(t=location.protocol+"//"+location.host+t)}return t},d.getEngineImageURL=function(t,e){if(void 0===e&&(e=!1),"string"==typeof t)if(null!=l.d.imageServlet)if(t.startsWith("url")){var i=t.substring(3).wq_trim();"("==i.charAt(0)&&")"==i.charAt(i.length-1)&&(t=i.substring(1,i.length-1),t=n.x.baseURI+l.d.imageServlet+n.x.baseURI+t.wq_trim(),t="url("+(t=l.d.getImagePostfix(t))+")")}else t=n.x.baseURI+l.d.imageServlet+n.x.baseURI+t.wq_trim(),t=l.d.getImagePostfix(t),e&&(t="url("+t+")");else t=n.x.baseURI+t.wq_trim(),e&&(t="url("+t+")");return t},d.browserVersion=function(){if(d.browserCheck.moz){if(2==navigator.appVersion.charAt(0))return"2";if(3==navigator.appVersion.charAt(0))return"3";if(4==navigator.appVersion.charAt(0))return"4";if(5==navigator.appVersion.charAt(0))return"6"}else if(d.browserCheck.ieAllVersion){if(document.documentMode)return document.documentMode+"";if("2"==navigator.appVersion.charAt(0))return"2";if("3"==navigator.appVersion.charAt(0))return"3";if("4"==navigator.appVersion.charAt(0))return-1!=navigator.appVersion.indexOf("MSIE 9")?"9":-1!=navigator.appVersion.indexOf("MSIE 8")?"8":-1!=navigator.appVersion.indexOf("MSIE 7")?"7":-1!=navigator.appVersion.indexOf("MSIE 6")?"6":-1!=navigator.appVersion.indexOf("MSIE 5.5")?"5.5":-1!=navigator.appVersion.indexOf("MSIE 5.0")?"5.0":"4";if("5"==navigator.appVersion.charAt(0))return"5"}else if(d.browserCheck.android){var t=navigator.userAgent;if(t.indexOf("Android")>=0)return parseFloat(t.slice(t.indexOf("Android")+8))}return" "},d.setTimeout=function(t,e,i){t=t,e=e,i=i;var o=[];if(arguments.length>3)for(var s=3;s<arguments.length;s++)o.push(arguments[s]);window.setTimeout((function(){e.apply(t,o)}),i)},d.cloneObject=function(t){if("object"!=(0,o.Z)(t))return t;if(null==t)return t;var e=new Object;for(var i in t)e[i]=d.cloneObject(t[i]);return e},d.makeStyle=function(t,e,i){if(!(void 0!==t&&null!=t||void 0!==e&&null!=e))return null;var o={};void 0!==e&&null!=e&&""!=e&&(o=WebSquare.skin.makeClassStyle(e),o=d.cloneObject(o));try{if(void 0!==t&&null!=t&&""!=t){for(var s=t.split(";"),r=0;r<s.length;r++){var a=s[r].indexOf(":");if(!(a<0)){var n=s[r].substring(0,a),l=s[r].substring(a+1);if(l.indexOf("url")>=0&&(l=l.wq_trim()).startsWith("url")){var u=l.substring(3).wq_trim();"("==u.charAt(0)&&")"==u.charAt(u.length-1)&&(l="url("+d.getImageURL(u.substring(1,u.length-1))+")")}o[n.wq_trim().capitalizeStyle()]=l.wq_trim()}}if(void 0!==i){var c={};for(r=0;r<i.length;r++)try{var p=i[r].wq_trim().capitalizeStyle(),g=o[p];void 0!==g&&(c[p]=g)}catch(t){h.w.printStackTrace(t)}o=c}}}catch(t){h.w.printStackTrace(t)}return o},d.applyStyle=function(t,e,i){try{if(void 0===e||null==e)return;if(WebSquare.util.isExist("style",t))if(void 0===i)for(var o in e)try{t.style[o]=e[o]}catch(e){
h.w.printStackTrace(e,"Object ID : "+t.id+",    ")}else for(o=0;o<i.length;o++)try{var s=e[i[o]];void 0!==s&&(t.style[i[o]]=s)}catch(e){h.w.printStackTrace(e,"Object ID : "+t.id+",    ")}}catch(t){h.w.printStackTrace(t)}},d.getConfiguration=function(t){return d.getConfigurationJSON(t)},d.getConfigurationJSON=function(t,e){if(l.d.configurationJSON){var i;if(void 0!==e&&null!=e||(e={}),null!=(i="json"===e.type?n.x.configCacheObj[t]:"array"===e.type?n.x.configCacheArray[t]:n.x.configCache[t]))return i;i="";for(var o=0;o<l.d.configurationJSON.length;o++){if(t.indexOf("/")>-1){for(var s=t.split("/"),r=l.d.configurationJSON[o],a=!1,h=null,d=0;d<s.length;d++)if(""!=s[d]){a=!1;var u=s[d],c=u.indexOf("["),p=null,g=null;if(-1==c)h=u;else{h=u.substring(0,c);var m=u.match(/[a-zA-Z0-9_]*[\[][\s]*(@[a-zA-Z0-9_]*)[\\]*=[\s]*["']?([^'"]*)["']?[\]]/);null!=m&&(p=m[1],g=m[2])}if(r=r[h])if("[object Array]"===Object.prototype.toString.call(r))if("array"===e.type&&null==p&&null==g)a=!0;else for(var f=0;f<r.length;f++){if(null==p&&null==g){a=!0,r=r[f];break}if(g==r[f][p]){a=!0,r=r[f];break}}else(null==p&&null==g||g==r[p])&&(a=!0);if(!a){r=null;break}}"json"===e.type||"array"===e.type?i=r:(r&&(h&&h.startsWith("@")?i="string"==typeof r?r:r+"":("[object Array]"===Object.prototype.toString.call(r)?"array"!==e.type&&(i=r[0]["#text"]||"",i+=r[0]["#cdata"]||""):(i=r["#text"]||"",i+=r["#cdata"]||""),"string"!=typeof i&&(i+=""))),i=i.wq_trim())}else{r=l.d.configurationJSON[o].WebSquare[t.wq_trim()];"json"===e.type?i=r:(r&&("[object Array]"===Object.prototype.toString.call(r)?"array"!==e.type&&(i=r[0]["@value"]):i=r["@value"]),i?i=i.wq_trim():"array"!==e.type&&(i=""))}if(i)break}if("json"===e.type||"array"===e.type)if(null==i&&(i={}),"json"===e.type){var b={};for(var y in i){var v=i[y];v.constructor!==Array&&null!=v["@value"]?b[y]=v["@value"]||"":b[y]=v}n.x.configCacheObj[t]=b,i=b}else n.x.configCacheArray[t]=i;else n.x.configCache[t]=i;return i}},d.getConfig=function(t){t.indexOf("/")>-1&&(t="/WebSquare/"+t);var e=this.getConfigurationJSON(t,{type:"json"});for(var i in e)e[i]&&"object"===(0,o.Z)(e[i])&&(e[i]="");return e},d.getChildConfiguration=function(t,e){var i=[],o=this.getConfigurationJSON(t,{type:"array"});for(var s in o){if(o[s].constructor===Array&&o[s].length>0){i=o[s];break}e&&!0===e.singleMode&&o[s].constructor!==Array&&(i=[o[s]])}return i},d.applyErrorMessage=(0,s.Z)(a().mark((function t(){var e,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,e=n.x.baseURI+l.d.inquiresPath("message/")+d.getConfiguration("language")+".xml",t.next=5,WebSquare.xml.load(e);case 5:for(i=t.sent,o=i.documentElement.firstChild;null!=o;o=o.nextSibling)1==o.nodeType&&(d.errorMessageData[o.nodeName]=o.firstChild.nodeValue);t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),d.applyUserMessage=(0,s.Z)(a().mark((function t(){var e,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,e=n.x.baseURI+l.d.inquiresPath("message/userMessage.xml"),t.next=5,WebSquare.xml.load(e);case 5:for(i=t.sent,o=i.documentElement.firstChild;null!=o;o=o.nextSibling)1==o.nodeType&&(d.userMessageData[o.nodeName]=o.firstChild.nodeValue);t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),d.setMaxZIndex=function(t){for(var e=0,i=document.body.childNodes,o=0;o<i.length;o++)if(1==i[o].nodeType){var s=i[o].style.zIndex;s>=e&&(e=s)}t.style.zIndex=e+1},d.clearCommon=function(){try{try{for(var t=d.userClearMemoryStack.length;t>0;t--){var e=d.userClearMemoryStack[t-1];e&&e()}}catch(t){}try{var i=WebSquare.util.getGlobalFunction(d.getConfiguration("/WebSquare/clearMemory/@userFunction"));"function"==typeof i&&i()}catch(t){}if(WebSquare&&n.x.timerHash)for(var o in n.x.timerHash){n.x.timerHash[o]&&d.clearTimer(o)}if(WebSquare.userTimerHash){for(var o in WebSquare.userTimerHash){
WebSquare.userTimerHash[o]&&WebSquare.util.clearTimeout(o)}n.x.userTimerHash={}}if(WebSquare.userIntervalHash){for(var o in WebSquare.userIntervalHash){WebSquare.userIntervalHash[o]&&WebSquare.util.clearInterval(o)}n.x.userIntervalHash={}}if(WebSquare&&WebSquare.userData){for(var o in WebSquare.userData)WebSquare.userData[o]=null;n.x.userData={}}for(var s in WebSquare.net.paramObj=null,d._projectCommonHash){(r=WebSquare.idCache[d._projectCommonHash[s]])&&r.remove()}for(var s in d._projectCommonHash={},d._msaHash){var r;(r=WebSquare.idCache[d._msaHash[s]])&&r.remove()}for(var a in d._msaHash={},d._msaServerHash={},WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.comp)WebSquare.DataCollection.api.remove(a);WebSquare.DataCollection.stopBroadCast=!1,WebSquare.DataCollection.comp={},WebSquare.DataCollection.attributeMapInfo={},WebSquare.DataCollection.childToParentRelation={},WebSquare.DataCollection.parentToChildRelation={},WebSquare.DataCollection.childToParentRef={},WebSquare.DataCollection.parentToChildRef={},WebSquare.DataCollection.options={useConfig:"true",baseNode:"map",attributeMap:""},WebSquare.DataCollection.activated=!1;try{var l=document.head||document.getElementsByTagName("head")[0]||document.documentElement,u=l.getElementsByTagName("script");for(t=u.length-1;t>=0;t--)"true"!=u[t].getAttribute("data-wqExternal")&&"true"!=u[t].getAttribute("data-wqInternal")||l.removeChild(u[t])}catch(t){WebSquare.logger.printLog("error : script tag remove exception"),h.w.printStackTrace(t,null,this)}var c=d.getConfiguration("/WebSquare/clearMemory/@closeChildPopup");if(WebSquare.uiplugin.popup&&WebSquare.uiplugin.popup.popupList)for(var p=WebSquare.uiplugin.popup.popupList,g=(t=0,p.length);t<g;t++){var m=p[t];m.useWindowPopup()&&"false"===c||m.close()}d.commonCache={},d.clearJQuery(),d._fireParentOnunload()}catch(t){}},d.setTimer=function(t,e){try{var i=(new Date).getTime(),o=e.key||t.toString().slice(0,30),s=e.delay||1,r=e.max||0,a=e.caller||window,l=e.args||[],d=n.x.timerHash[o];return d||(d=n.x.timerHash[o]={thread:null,timeoutKey:null,startTime:i}),d.thread=function(){window.WebSquare&&n.x.timerHash&&delete n.x.timerHash[o],e.before_call&&e.before_call.call(a,d);var i=t.apply(a,l);e.callback&&e.callback.call(a,i)},clearTimeout(d.timeoutKey),r<=0||i-d.startTime<r?(e.before_set&&e.before_set.call(a,d),d.timeoutKey=setTimeout(d.thread,s),e.after_set&&e.after_set.call(a,d)):d.thread(),o}catch(t){h.w.printStackTrace(t,null,this)}},d.clearTimer=function(t,e){try{"function"==typeof t&&(t=t.toString().slice(0,30));var i=n.x.timerHash[t];i&&(clearTimeout(i.timeoutKey),e?i.thread():delete n.x.timerHash[t])}catch(t){h.w.printStackTrace(t,null,this)}},d.measureTime=function(t,e){try{var i=e.key||t.toString().slice(0,30),o=e.caller||window;d.clearTimer(i,!0),d.setTimer((function(){}),{key:i,before_call:function(e){var s=(new Date).getTime()-e.startTime;n.x.measureHash[i]||(n.x.measureHash[i]=[],n.x.measureHash[i].sum=0);var r=n.x.measureHash[i];r.push(s),r.sum+=s,r.length>100&&(r.sum-=r.shift()),t.call(o,{time:s,aver:r.sum/r.length})}})}catch(t){h.w.printStackTrace(t,null,this)}},d.modifyMaxConnection=function(t,e){try{if(d.browserCheck.ie){t=t||"10",e=e||"";var i=d.getConfiguration("/WebSquare/maxConnectionActiveX/@codebase");null!=i&&""!=i||(i="engine/cab/WebSquareConfig.cab");var o=document.createElement("div");o.style.width="0px",o.style.height="0px",o.style.visibility="hidden",document.body.appendChild(o),o.innerHTML="<object classid='clsid:BD66056F-D87B-4543-8638-A4CED765B9AA' codebase='"+i+"' style='display: none' width='0' height='0' align='center' hspace='0' vspace='0'><param name='MaxConnectionsPerServer' value='"+t+"' /><param name='SyncMode5' value='"+e+"' /></object>"}}catch(t){h.w.printStackTrace(t,null)}},d.setSystemLanguage=function(t){n.x.useUserSystemLang=!0;var e=l.d.getBrowserLanguage();t=WebSquare.cookie.getCookie("system_language")||t||e||"ko";n.x.systemLanguage=t
;var i=d.getConfiguration("/WebSquare/languagePack/url[@lang='"+t+"']/@value");imports(i)},d.getEmptyTag=function(){try{if(d.EMPTY_TAGS)return d.EMPTY_TAGS;d.EMPTY_TAGS={};var t=d.getConfiguration("/WebSquare/emptyTag/@value");if(t)for(var e=t.split(","),i=0;i<e.length;i++){var o=e[i].wq_trim();d.EMPTY_TAGS[o]=!0}return d.EMPTY_TAGS}catch(t){h.w.printStackTrace(t,null)}},d.finalize=function(){try{WebSquare.DataCollection.stopBroadCast=!0,n.x.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50};var t=WebSquare.style.getScale();n.x.getBody()&&(d.firePageunload||(d.firePageunload=!0,WebSquare.event.fireEvent(WebSquare.getBody(),"onpageunload")));var e=WebSquare.util.getGlobalFunction(d.getConfiguration("/WebSquare/spa/onpageunload/@value"));if("function"==typeof e)try{e()}catch(t){WebSquare.logger.printLog("eval script error : "+e),h.w.printStackTrace(t,null)}if("true"===d.getConfiguration("/WebSquare/spa/autoReload/@value").toLowerCase()){for(var i in d.memoryLeakComponent)if(null!=WebSquare.componentsCache[i]){if(Number(d.getConfiguration("/WebSquare/spa/autoReload/@"+i))<=WebSquare.componentsCache[i].length)return void WebSquare.util.clearPage();d.memoryLeakComponentCount+=WebSquare.componentsCache[i].length*d.memoryLeakComponent[i]}var o=d.getConfiguration("/WebSquare/spa/autoReload/@count");if(o=""==o?NaN:Number(o),d.memoryLeakComponentCount>0&&d.memoryLeakComponentCount>o)return void WebSquare.util.clearPage()}var s=d._getGlobalVariable(!0);if(s)for(var r=s.split(","),a=0;a<r.length;a++){var u=r[a].wq_trim();for(var c in window[u])delete window[u][c];window[u]={}}for(var p in WebSquare.idCache){var g=WebSquare.idCache[p];if("function"!=typeof g.remove||g.remove==WebSquare.xfControl.prototype.remove||g.options&&("wframe"==g.options.pluginName||"pageInherit"==g.options.pluginName)){if(n.x.isPrintLog=!1,"function"==typeof g.finalize&&g.finalize(),n.x.isPrintLog=!0,"function"==typeof g.unbind&&g.unbind(),g.event&&g.event.clearCache(),n.x.useVisibleHelper&&g.render&&g.render.parentNode&&g!=WebSquare.body&&g.render.parentNode.removeChild(g.render),g.childControlList=[],window[g.id])try{delete window[g.id]}catch(t){window[g.id]=void 0}}else g.remove()}if(!n.x.useVisibleHelper&&WebSquare.body&&(WebSquare.body.childControlList=null,WebSquare.body.layerListener&&WebSquare.body.layerListener.removeAll(),WebSquare.body.render&&WebSquare.body.render.parentNode.removeChild(WebSquare.body.render)),n.x.body=null,n.x.idCache={},window[WebSquare.noConflict].comp={},n.x.idToUUID={},n.x.scriptSectionExcuteFlag=null,n.x.scriptSection="",n.x.useVisibleHelper=!1,n.x.styleSheetEarlyImport=1,n.x.styleSheetEarlyImportName="",n.x.skin&&WebSquare.skin.skinTag&&(WebSquare.skin.skinTag=WebSquare.styleSheetEarlyImportList.slice(0)),n.x.externalCSSList=[],n.x.externalCSSDOM=[],n.x.externalCSSURL=[],n.x.pageXMLString=null,WebSquare.uiplugin&&WebSquare.uiplugin.scheduleCalendar&&(WebSquare.uiplugin.scheduleCalendar.isImported=!1),null!=n.x.WebSquaredoc){WebSquare.WebSquaredoc.itemsetElement=[],WebSquare.WebSquaredoc.refElement=[],WebSquare.WebSquaredoc.instanceRefElement=[],n.x.componentsCache={};var m=document.getElementsByTagName("head")[0];for(a=WebSquare.WebSquaredoc.cssList.length-1;a>=0;a--){var f=WebSquare.WebSquaredoc.cssList[a];if("LINK"===f.tagName.toUpperCase()){for(var b=WebSquare.util._getAbsolutePath(f.href.toString()),y=0;y<WebSquare.styleSheetEarlyImportList.length;y++)if(b===WebSquare.util._getAbsolutePath(WebSquare.styleSheetEarlyImportList[y])){WebSquare.WebSquaredoc.cssList.splice(y,1);break}}else m.removeChild(f),WebSquare.WebSquaredoc.cssList.splice(a,1)}if(m=null,n.x.externalCSSRemainder=WebSquare.WebSquaredoc.cssList.slice(0),null!=WebSquare.WebSquaredoc.xmlDocument)for(a=WebSquare.WebSquaredoc.xmlDocument.childNodes.length-1;a>=0;a--)WebSquare.WebSquaredoc.xmlDocument.removeChild(WebSquare.WebSquaredoc.xmlDocument.childNodes[a])
;if(WebSquare.WebSquaredoc.models)for(var v=0;v<WebSquare.WebSquaredoc.models.length;v++){var w=WebSquare.WebSquaredoc.models[v];if(w){for(var S=0;S<w.submissions.length;S++)w.submissions[S].dead=!0,d.useSubmissionGlobal&&(window[w.submissions[S].id]=null);for(var C=0;C<w.workflows.length;C++)w.workflows[C].promiseStatus="REJECT",d.useWorkflowGlobal&&(window[w.workflows[C].id]=null)}}for(var p in WebSquare.WebSquaredoc)WebSquare.WebSquaredoc[p]=null}if(d.clearCommon(),WebSquare&&WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.remove(),n.x.strictModeFrame=null),n.x.WebSquaredoc=null,n.x.callExecuteHelper=!1,d.firePageunload=!1,d.onurlchange=!1,WebSquare.layer&&(WebSquare.layer.disabledList=[],WebSquare.layer.submissionIDQueue=[],WebSquare.layer.submissionMessageQueue=[]),null==document.body){var x=document.createElement("body");l.d.fullViewed&&l.d.zoomed(x,t),document.documentElement.appendChild(x)}}catch(t){h.w.printStackTrace(t,null)}},d.getComponentById=function(t){try{return"string"==typeof t&&WebSquare.idCache[WebSquare.idToUUID[t]]?WebSquare.idCache[WebSquare.idToUUID[t]]:window[t]}catch(t){h.w.printStackTrace(t,null,this)}},d.setId=function(t,e){try{e._orgUUID=e.uuid,e.setAttribute("id",t),e.render.setAttribute("id",t),window[WebSquare.noConflict].comp[e.id]=null,delete window[WebSquare.noConflict].comp[e.id],e.id=t,WebSquare.idToUUID[t]=e.uuid,window[WebSquare.noConflict].comp[t]=e,"false"!=d.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[t]=e)}catch(t){h.w.printStackTrace(t,null,this)}},d.cleanObj=function(t){try{var e=[],i=0;try{if(null==JSON.stringify(t))return i}catch(t){return h.w.printStackTrace(t,null,this),i}e.push(t);for(var s=e.pop();null!=s;s=e.pop())if(!d.isNode(s)&&!d.isWindow(s)&&(i++,"object"==(0,o.Z)(s)&&null!=s))for(var r in s){var a=s[r];"object"==(0,o.Z)(a)&&null!=a&&e.push(a),delete s[r]}return i}catch(t){h.w.printStackTrace(t,null,this)}},d.isWindow=function(t){return t==t.window},d.isNode=function(t){return"undefined"!=typeof Node?t instanceof Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName},d.isXML=function(t){try{if(t){var e=(t?t.ownerDocument||t:0).documentElement;return!!e&&"HTML"!==e.nodeName}return}catch(t){h.w.printStackTrace(t,null,this)}},d.executePointScript=function(t){try{if(WebSquare.executePointScriptArr[t]){for(var e=0;e<WebSquare.executePointScriptArr[t].length;e++){var i=WebSquare.executePointScriptArr[t][e];if("function"==typeof i.script){var o,s=WebSquare.util.getComponentById(i.scope);s&&s.scope&&s.options&&!0===s.options.scope?o=s.scope:WebSquare.strictModeFrame&&(o=WebSquare.strictModeFrame.scope),i.script(o)}}WebSquare.executePointScriptArr[t]=null,delete WebSquare.executePointScriptArr[t]}}catch(t){h.w.printStackTrace(t,null,this)}},d.getPageURL=function(t,e){if("string"!=typeof t)return"";void 0!==e&&null!=e||(e={});var i=t;!0!==e.skipURL&&(i=d.getURL(i,e)),!0!==e.skipUri&&(i=WebSquare.jsLoader.getUri(i,e));var o=d.getConfiguration("/WebSquare/pageURLPrefix/@ignoreW2xPath");if(WebSquare.pageURLPrefix){if("function"==n.x.pageURLPrefixType){var s=WebSquare.pageURLPrefix.wq_replaceAll("()",""),r=WebSquare.util.getGlobalFunction(s);"function"==typeof r&&(i=r(i),"true"!==o.toLowerCase()&&(i+=encodeURIComponent(t)))}else i=n.x.pageURLPrefix+encodeURIComponent(i);i=i.replace(/%2F/g,"/")}return i},d.clearObj=function(t,e,i){if(null==e&&(e=1),!(e>i||"object"!=(0,o.Z)(t)&&"function"!=typeof t))for(var s in t){"object"!=(0,o.Z)(t[s])&&"function"!=typeof t[s]||d.clearObj(t[s],e+1);try{t[s]=null,delete t[s]}catch(t){h.w.printStackTrace(t,null,this)}}},d.clearJQuery=function(){try{if("undefined"!=typeof jQuery&&null!=jQuery){var t=[];for(var e in jQuery.cache)if(jQuery.cache[e].handle)try{t.push(jQuery.cache[e].handle.elem)}catch(t){}for(var i in jQuery.cleanData(t),t)delete t[i];t=null}}catch(t){WebSquare.logger.printLog("error : jQuery cleanData exception"),h.w.printStackTrace(t,null,this)}},d._businessPreProcessor=function(){try{
var t=d.getConfiguration("/WebSquare/preProcessor/businessPreProcessor/@value"),e=WebSquare.util.getGlobalFunction(t);"function"==typeof e&&e()}catch(t){h.w.printStackTrace(t,null,this)}},d._initPopupParameter=function(){try{var t=d._getParentObj();if(n.x.isWebSquarePopup&&null!=t&&null!=t.WebSquare){var e,i=t.WebSquare.srcData,s=t.WebSquare.destData,r=!1,a="",u=WebSquare.net.getParameter("popupID"),c=t.WebSquare.dataObject[u];if(t.WebSquare.docTitleInfo&&(a=t.WebSquare.docTitleInfo[u]),a&&(document.title=a),void 0!==c&&null!=c)try{var p,g=c.type.toLowerCase(),m=c.name,f=(0,o.Z)(c.data);if(m){switch(g){case"string":if("string"==f)p=c.data;else if("object"==f)return void WebSquare.logger.printLog("PopUp dataObject error : data of dataObject is in discord with type of dataObject!");break;case"json":if("string"==f)(b=JSON.parse(c.data))&&(p=b);else if("object"==f){if(d.isXML(c.data))return void WebSquare.logger.printLog("PopUp dataObject error : data of dataObject is in discord with type of dataObject!!");p=c.data}break;case"xml":var b;if("string"==f)(b=WebSquare.xml.parse(c.data))&&(p=b);else if("object"==f){if(!d.isXML(c.data))return void WebSquare.logger.printLog("PopUp dataObject error : data of dataObject is in discord with type of dataObject!!");p=c.data}break;case"array":p=c.data}WebSquare.util.setData(m,p)}}catch(t){h.w.printStackTrace(t,null,this)}if(void 0!==i&&null!=i&&""!=i&&void 0!==s&&null!=s&&""!=s){try{if(r=i.indexOf("data:")>-1){var y=i.wq_replaceAll("data:",""),v=t.WebSquare.util.getComponentById(y);if(v)switch(v.initializeType){case"dataList":i=v.getAllJSON();break;case"dataMap":i=v.getJSON()}}else{var w=t.WebSquare.ModelUtil.findSerializedNode(i);i=WebSquare.xml.parse(w).documentElement}}catch(t){}try{if(r){var S=s.wq_replaceAll("data:",""),C=WebSquare.util.getComponentById(S);if(!C)return void $l("Error! : No match data. Must be the same as a srcDataType, a destDataType!["+S+"]")}else e=WebSquare.ModelUtil.findInstanceNode(s)}catch(t){}if(r&&void 0!==i&&null!=i)C.setJSON(i,!0);else if(void 0!==e&&null!=e&&void 0!==i&&null!=i){for(var x=e.childNodes,_=i.childNodes,I=x.length-1;I>=0;I--)e.removeChild(x.item(I));if(d.browserCheck.ieAllVersion&&l.d.useActiveXObject){var T=_.length-1;for(I=0;I<=T;I++)WebSquare.xml.appendChild(e,_[0])}else for(I=0;I<=_.length-1;I++)WebSquare.xml.appendChild(e,_[I]);var k=WebSquare.ModelUtil.getModelByID(t.WebSquare.destModelID);WebSquare.WebSquaredoc.unrender(t.WebSquare.destData),k.refresh()}}}}catch(t){h.w.printStackTrace(t,null,this)}},d._initDataObject=function(){try{if(null!=window.frameElement&&window.parent!==window.self&&null!=window.parent.WebSquare){var t=parent.window[WebSquare.noConflict].comp[window.frameElement.id]._getDataObject("name");if(t){var e=parent.window[WebSquare.noConflict].comp[window.frameElement.id]._getDataObject("type"),i=parent.window[WebSquare.noConflict].comp[window.frameElement.id]._getDataObject("data").slice(0);switch(e){case"json":i=JSON.parse(i);break;case"xml":i=WebSquare.xml.parse(i);break;case"array":i=JSON.parse(i)}WebSquare.util.setData(t,i),parent.window[WebSquare.noConflict].comp[window.frameElement.id]._removeDataObject()}}}catch(t){h.w.crossOrigin({message:t.message,name:"initDataObject"})}},d._createGlobalVariable=function(t){try{var e=d._getGlobalVariable(t);if(e)for(var i=e.split(","),o=0;o<i.length;o++){var s="string"==typeof i[o]&&i[o].wq_trim();try{if(null!=window[s]&&!WebSquare.util.isEmptyObject(window[s]))throw{message:"variable auto creation error : ["+s+"] already exist!"};window[s]={},window[s][WebSquare.noConflict]=WebSquare.api,window[s][WebSquare.noConflict].id="";var r=o>0?String(o):"";window[WebSquare.noConflictFunction+r]=window[s][WebSquare.noConflict]}catch(t){h.w.printStackTrace(t,null)}}}catch(t){h.w.printStackTrace(t,null,this)}},d._getGlobalVariable=function(t){try{var e=d.getConfiguration("/WebSquare/spa/variable/@value")||"scwin",i=d.getConfiguration("/WebSquare/spa/variable/@clone")||""
;return t&&i&&(e+=","+i),e}catch(t){h.w.printStackTrace(t,null,this)}},d._controlInvoker=function(t,e,i){try{var o;return WebSquare.uiplugin[t]&&(o=i?i.constructor===Array?WebSquare.uiplugin[t][e].apply(WebSquare.uiplugin[t][e],i):WebSquare.uiplugin[t][e].apply(WebSquare.uiplugin[t][e],[i]):WebSquare.uiplugin[t][e]()),o}catch(t){h.w.printStackTrace(t,null,this)}},d._isSinglePage=function(t){try{return!(WebSquare.uiplugin.wframe&&(WebSquare.uiplugin.wframe.__pendingWframePostOrderList.length>1||WebSquare.uiplugin.wframe.__pendingWframePreOrderList.length>1))}catch(t){h.w.printStackTrace(t,null,this)}},d._fireParentOnload=function(){try{null!=window.frameElement&&window.parent!==window.self&&null!=window.parent.WebSquare&&parent.window[WebSquare.noConflict].comp[window.frameElement.id].fireIframeload()}catch(t){h.w.crossOrigin({message:t.message,name:"oniframeload"})}},d._fireParentOnunload=function(){try{null!=window.frameElement&&window.parent!==window.self&&null!=window.parent.WebSquare&&parent.window[WebSquare.noConflict].comp[window.frameElement.id].fireIframeunload()}catch(t){h.w.crossOrigin({message:t.message,name:"oniframeload"})}},d._loadMsaServer=function(){try{var t=l.d.configurationJSON[0].WebSquare.msaServer;if(null!=t){var e=t.msa;e.constructor!==Array&&(e=[e]);for(var i=0;i<e.length;i++){var o=e[i],s=o["@baseUrl"],r=o["@w2xHome"],a=o["@name"];WebSquare.core._msaServerHash[a]={baseURI:s,w2xHome:r}}}}catch(t){h.w.printStackTrace(t,null,this)}},d._loadProjectCommon=(0,s.Z)(a().mark((function t(){var e,i,o,s,r,u,c,p,g;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,null==(e=l.d.configurationJSON[0].WebSquare.projectCommon)){t.next=26;break}i=d.projectCommonVariable,(o=e.module).constructor!==Array&&(o=[o]),window[i]={},s=0;case 9:if(!(s<o.length)){t.next=26;break}if(r=o[s],u=r["@src"],!d._projectCommonHash[u]){t.next=14;break}return t.abrupt("continue",23);case 14:return c=r["@name"].slice(i.length+1),p=new WebSquare.uiplugin.udc({src:u,scope_uuid:n.x.strictModeFrame?WebSquare.strictModeFrame.uuid:""}),t.next=18,p.initAsync();case 18:c&&(window[i][c]=p),d._projectCommonHash[u]=p.uuid,(g=p._wqContent).childControlList[0].activeStatus="active",g.childControlList[0].setUserAction();case 23:s++,t.next=9;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(1),h.w.printStackTrace(t.t0,null,this);case 31:case"end":return t.stop()}}),t,this,[[1,28]])}))),d._loadMsaCommon=(0,s.Z)(a().mark((function t(){var e,i,o,s,r,u,c,p,g,m;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,null==(e=l.d.configurationJSON[0].WebSquare.msaCommon)){t.next=26;break}i=d.projectCommonVariable,(o=e.module).constructor!==Array&&(o=[o]),s=0;case 8:if(!(s<o.length)){t.next=26;break}if(r=o[s],u=r["@src"],!d._msaCommonHash[u]){t.next=13;break}return t.abrupt("continue",23);case 13:return c=r["@name"].slice(i.length+1),p=r["@msaServerName"],g=new WebSquare.uiplugin.udc({src:u,scope_uuid:n.x.strictModeFrame?WebSquare.strictModeFrame.uuid:"",msaName:p}),t.next=18,g.initAsync();case 18:c&&(window[i][c]=g),d._msaCommonHash[u]=g.uuid,(m=g._wqContent).childControlList[0].activeStatus="active",m.childControlList[0].setUserAction();case 23:s++,t.next=8;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(1),h.w.printStackTrace(t.t0,null,this);case 31:case"end":return t.stop()}}),t,this,[[1,28]])}))),d._getParentObj=function(){try{var t;return null!=window.opener?t=opener:window.parent!==window.self&&(t=parent),t}catch(t){h.w.printStackTrace(t,null,this)}return t},d._getMsaOption=function(t,e){try{var i={};for(var o in t&&("function"==typeof t._getMsaName&&(i.msaName=t._getMsaName()),t.options&&(i.tempHome=t.options.udcHome)),e)i[o]=e[o];return i}catch(t){h.w.printStackTrace(t,null,this)}return i},d._scopingCommon=function(t,e,i){try{var o="WebSquare.core.commonCache."+e
;return o+"= function(scopeObj){\nvar "+e+"; var ret;"+WebSquare.util.scopingFuncBody(t+"\nret = "+e+";","scopeObj","scopeObj")+"\nreturn ret;}"+(i?"\nwindow."+e+"="+o+'({"scope":{}});':"")}catch(t){h.w.printStackTrace(t,null,this)}},d._copyCommon=function(t,e){try{var i=d.commonCache[t];if("function"!=typeof i){var s=window[t];if(!s)return{};var r="var "+t+" = ";r+=(a=s,n="_@#wq#@_",u=[],JSON.stringify(a,(function(t,e){return null==e?e:e===window?"window":e===window.opener?"opener":e===window.parent?"parent":e===window.top?"top":"function"==typeof e||"object"===(0,o.Z)(e)&&e.constructor===RegExp?(u.push(e),n):e})).replace(new RegExp('"_@#wq#@_"',"g"),(function(t){return u.shift()}))),l.d.globalEval(d._scopingCommon(r,t)),i=d.commonCache[t]}return i(e)}catch(t){h.w.printStackTrace(t,null,this)}var a,n,u}},9818:function(t,e,i){"use strict";i.d(e,{h:function(){return p}});var o=i(2137),s=i(484),r=i(7757),a=i.n(r),n=i(1974),l=i(5052),h=i(5948),d=(i(9075),i(8683)),u=i(3308),c=i(6046),p={_onRequest:!1,_requestUrl:n.x.baseServletURI+"serverTime.wq",_checkLocalTime:{gTime:-1,time:-1,interval:1e3,diffMax:6e4,gDiffMax:12e4,refresh:!1,cnt:0,pendingCnt:0,pendingMaxCnt:1e3},toTimestampString:function(t){return c.f.fillZero(t.getFullYear(),4)+"-"+c.f.fillZero(t.getMonth()+1,2)+"-"+c.f.fillZero(t.getDate(),2)+" "+c.f.fillZero(t.getHours(),2)+":"+c.f.fillZero(t.getMinutes(),2)+":"+c.f.fillZero(t.getSeconds(),2)+"."+c.f.fillZero(t.getMilliseconds(),3)+"000"},_parseDate:function(t,e){if(void 0!==e&&null!=e&&""!=e||(e="yyyyMMdd"),(t=d.D.getDate(t)).length!=e.length)return t;for(var i=["","","","","",""],o=0;o<e.length;o++){var s=e.charAt(o),r=t.charAt(o);switch(s){case"y":i[0]+=r;break;case"M":i[1]+=r;break;case"d":i[2]+=r;break;case"H":i[3]+=r;break;case"m":i[4]+=r;break;case"s":i[5]+=r}}for(o=0;o<i.length;o++)0===o?c.f.fillZero(i[o],4):c.f.fillZero(i[o],2);return i},parseDate:function(t,e){var i=p._parseDate(t,e);return"string"==typeof i?null:new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])},dateDiff:function(t,e){t+="",e+="",t=d.D.getDate(t),e=d.D.getDate(e),8!=t.length&&alert(u.d.getMessage("E_date_ShouldBeyyMMddFormat",t)),isNaN(t)&&alert(u.d.getMessage("E_date_ShouldBeNumberFormat",t)),8!=e.length&&alert(u.d.getMessage("E_date_ShouldBeyyMMddFormat",e)),isNaN(e)&&alert(u.d.getMessage("E_date_ShouldBeNumberFormat",e));var i=parseInt(t.substring(0,4),10),o=parseInt(t.substring(4,6),10),s=parseInt(t.substring(6,8),10),r=parseInt(e.substring(0,4),10),a=parseInt(e.substring(4,6),10),n=parseInt(e.substring(6,8),10),l=p.getMaxMinYear(),h=l.maxYear,c=l.minYear;if(i>h||i<c)alert(u.d.getMessage("E_date_YearRange",c,h,i));else if(o>12||o<1)alert(u.d.getMessage("E_date_MonthRange","1","12",o));else if(s>31||s<1)alert(u.d.getMessage("E_date_DayRange","1","31",s));else if(r>h||r<c)alert(u.d.getMessage("E_date_YearRange",c,h,r));else if(a>12||a<1)alert(u.d.getMessage("E_date_MonthRange","1","12",a));else{if(!(n>31||n<1)){var g=Date.UTC(i,o-1,s);return(Date.UTC(r,a-1,n)-g)/864e5}alert(u.d.getMessage("E_date_DayRange","1","31",n))}},dateAdd:function(t,e){t+="",8!=(t=d.D.getDate(t)).length&&alert(u.d.getMessage("E_date_ShouldBeyyMMddFormat",t)),isNaN(t)&&alert(u.d.getMessage("E_date_ShouldBeNumberFormat",t));var i=parseInt(t.substring(0,4),10),o=parseInt(t.substring(4,6),10),s=parseInt(t.substring(6,8),10),r=p.getMaxMinYear(),a=r.maxYear,n=r.minYear;if(i>a||i<n)alert(u.d.getMessage("E_date_YearRange",n,a,i));else if(o>12||o<1)alert(u.d.getMessage("E_date_MonthRange","1","12",o));else{if(!(s>31||s<1)){var l=Date.UTC(i,o-1,s)+864e5*e,h=new Date;return h.setTime(l),c.f.fillZero(h.getUTCFullYear()+"",4)+c.f.fillZero(h.getUTCMonth()+1+"",2)+c.f.fillZero(h.getUTCDate()+"",2)}alert(u.d.getMessage("E_date_DayRange","1","31",s))}},dateTimeAdd:function(t,e,i,o,s,r){var a,n=r||{};if(t+="",t=d.D.getDate(t),
"time"===o?s?6!=t.length&&(a=u.d.getMessage("E_date_minute_ShouldBeHHmmssFormat",t)):"hour"===i||"minute"===i?4!=t.length&&(a=u.d.getMessage("E_date_minute_ShouldBeHHmmFormat",t)):"second"===i&&6!=t.length&&(a=u.d.getMessage("E_date_minute_ShouldBeHHmmssFormat",t)):"day"==i?8!=t.length&&(a=u.d.getMessage("E_date_ShouldBeyyMMddFormat",t)):"month"==i?6!=t.length&&(a=u.d.getMessage("E_date_month_ShouldBeyyMMFormat",t)):"hour"==i?10!=t.length&&(a=u.d.getMessage("E_date_hour_ShouldBeyyMMddHHFormat",t)):"minute"==i&&12!=t.length&&(a=u.d.getMessage("E_date_minute_ShouldBeyyMMddmmFormat",t)),isNaN(t)&&(a=u.d.getMessage("E_date_ShouldBeNumberFormat",t)),a)!1!==n.useAlert&&alert(a);else{var l,h,g;"time"==o?s?(w=parseInt(t.substring(0,2),10),T=parseInt(t.substring(2,4),10),C=parseInt(t.substring(4,6),10)):"hour"===i||"minute"===i?(w=parseInt(t.substring(0,2),10),T=parseInt(t.substring(2,4),10)):"second"===i&&(w=parseInt(t.substring(0,2),10),T=parseInt(t.substring(2,4),10),C=parseInt(t.substring(4,6),10)):(l=parseInt(t.substring(0,4),10),h=parseInt(t.substring(4,6),10),g=parseInt(t.substring(6,8),10),w=parseInt(t.substring(8,10),10),T=parseInt(t.substring(10,12),10));var m=p.getMaxMinYear(),f=m.maxYear,b=m.minYear;(l>f||l<b)&&(a=u.d.getMessage("E_date_YearRange",b,f,l)),(h>12||h<1)&&(a=u.d.getMessage("E_date_MonthRange","1","12",h));var y=31;if(2==h?y=l%400==0||l%4==0&&l%100!=0?29:28:4!=h&&6!=h&&9!=h&&11!=h||(y=30),g>y||g<1?a=u.d.getMessage("E_date_DayRange","1",y,g):w>23||w<0?a=u.d.getMessage("E_date_HourRange","0","23",w):T>59||T<0?a=u.d.getMessage("E_date_MinuteRange","0","59",T):(C>59||C<0)&&(a=u.d.getMessage("E_date_SecondRange","0","59",C)),!a){if("time"===o){if(s){var v="";"hour"==i?v=36e5:"minute"==i?v=6e4:"second"==i&&(v=1e3);var w=Date.UTC(1900,1,1,w,T,C)+e*v;(T=new Date).setTime(w);var S=c.f.fillZero(c.f.fillZero(T.getUTCHours()+"",2)+c.f.fillZero(T.getUTCMinutes()+"",2)+c.f.fillZero(T.getUTCSeconds()+"",2))}else if("hour"==i)if(e&&"string"==typeof e&&4===e.length){var C=parseInt(e.substring(0,2),10),x=parseInt(e.substring(2,4),10);v=6e4,w=Date.UTC(1900,1,1,w,T)+60*C*60*1e3+x*v;(T=new Date).setTime(w);var _=T.getUTCDate(),I=_>1?parseInt(T.getUTCHours(),10)+24*(_-1):T.getUTCHours();S=c.f.fillZero(c.f.fillZero(I+"",2)+c.f.fillZero(T.getUTCMinutes()+"",2))}else{v=36e5,w=Date.UTC(1900,1,1,w,T)+e*v;(T=new Date).setTime(w);S=c.f.fillZero(c.f.fillZero(T.getUTCHours()+"",2)+c.f.fillZero(T.getUTCMinutes()+"",2))}else if("minute"==i){v=6e4,w=Date.UTC(1900,1,1,w,T)+e*v;(T=new Date).setTime(w);S=c.f.fillZero(c.f.fillZero(T.getUTCHours()+"",2)+c.f.fillZero(T.getUTCMinutes()+"",2))}else if("second"==i){var T;v=1e3,w=Date.UTC(1900,1,1,w,T,C)+e*v;(T=new Date).setTime(w);S=c.f.fillZero(c.f.fillZero(T.getUTCHours()+"",2)+c.f.fillZero(T.getUTCMinutes()+"",2)+c.f.fillZero(T.getUTCSeconds()+"",2))}}else if("day"==i){v=864e5;var k=Date.UTC(l,h-1,g)+e*v;(W=new Date).setTime(k);S=c.f.fillZero(W.getUTCFullYear()+"",4)+c.f.fillZero(W.getUTCMonth()+1+"",2)+c.f.fillZero(W.getUTCDate()+"",2)}else if("month"==i){v=864e5;var D=0;if(e>0)for(var L=h-1;L<h-1+e;L++)D+=(32-new Date(l+L/12|0,L%12,32).getDate())*v;else{for(L=h-2;L>h-2+e;L--){D+=(32-new Date(l+(L<0?L%12!=0?(L/12|0)-1:L/12|0:0),L<0?L%12!=0?L%12+12:0:L%12,32).getDate())*v}D*=-1}k=Date.UTC(l,h-1)+D;(W=new Date).setTime(k);S=c.f.fillZero(W.getUTCFullYear()+"",4)+c.f.fillZero(W.getUTCMonth()+1+"",2)}else if("hour"==i){v=36e5,k=Date.UTC(l,h-1,g,w)+e*v;(W=new Date).setTime(k);S=c.f.fillZero(W.getUTCFullYear()+"",4)+c.f.fillZero(W.getUTCMonth()+1+"",2)+c.f.fillZero(W.getUTCDate()+"",2)+c.f.fillZero(W.getUTCHours()+"",2)}else if("minute"==i){var W;v=6e4,k=Date.UTC(l,h-1,g,w,T)+e*v;(W=new Date).setTime(k);S=c.f.fillZero(W.getUTCFullYear()+"",4)+c.f.fillZero(W.getUTCMonth()+1+"",2)+c.f.fillZero(W.getUTCDate()+"",2)+c.f.fillZero(W.getUTCHours()+"",2)+c.f.fillZero(W.getUTCMinutes()+"",2)}else if("year"==i)return c.f.fillZero(l+e+"",4);return S}!1!==n.useAlert&&alert(a)}},isValidDate:function(t,e){
if(null==(e=d.D.getDate(e))||8!=e.length){alert(u.d.getMessage("E_date_ShouldBeyyMMddFormat",e));try{t.focus(),t.select()}catch(t){h.w.printStackTrace(t)}return!1}if(isNaN(e)){alert(u.d.getMessage("E_date_ShouldBeNumberFormat",e));try{t.focus(),t.select()}catch(t){h.w.printStackTrace(t)}return!1}var i=parseInt(e.substring(0,4),10),o=parseInt(e.substring(4,6),10),s=parseInt(e.substring(6,8),10);if(o<1||o>12){alert(u.d.getMessage("E_date_MonthRange","1","12",o));try{t.focus(),t.select()}catch(t){h.w.printStackTrace(t)}return!1}var r=31;if(2==o?r=i%400==0||i%4==0&&i%100!=0?29:28:4!=o&&6!=o&&9!=o&&11!=o||(r=30),s<1||s>r){alert(u.d.getMessage("E_date_DayRange","1",r,s));try{t.focus(),t.select()}catch(t){h.w.printStackTrace(t)}return!1}return!0},getFormattedDate:function(t,e){var i=null;if("object"!==(0,s.Z)(t)||null==t)return null;if(void 0===e||null==e||""==e)i=t.getTime()+"";else{var o=-1;if((o=e.indexOf("yyyy"))>-1){var r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero(t.getFullYear()+"",4),o+4<e.length&&(r+=e.substring(o+4,e.length)),e=r}if((o=e.indexOf("YYYY"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero(t.getFullYear()+"",4),o+4<e.length&&(r+=e.substring(o+4,e.length)),e=r}if((o=e.indexOf("yy"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero((t.getFullYear()+"").substr(2,2)+"",2),o+2<e.length&&(r+=e.substring(o+2,e.length)),e=r}if((o=e.indexOf("MM"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero(t.getMonth()+1+"",2),o+2<e.length&&(r+=e.substring(o+2,e.length)),e=r}else e.indexOf("M")>-1&&(e=e.replace(/M/,t.getMonth()+1));if((o=e.indexOf("dd"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero(t.getDate()+"",2),o+2<e.length&&(r+=e.substring(o+2,e.length)),e=r}else e.indexOf("d")>-1&&(e=e.replace(/d/,t.getDate()));if((o=e.indexOf("HH"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero(t.getHours()+"",2),o+2<e.length&&(r+=e.substring(o+2,e.length)),e=r}if((o=e.indexOf("hh"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero(t.getHours()+"",2),o+2<e.length&&(r+=e.substring(o+2,e.length)),e=r}if((o=e.indexOf("mm"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero(t.getMinutes()+"",2),o+2<e.length&&(r+=e.substring(o+2,e.length)),e=r}if((o=e.indexOf("ss"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero(t.getSeconds()+"",2),o+2<e.length&&(r+=e.substring(o+2,e.length)),e=r}if((o=e.indexOf("SSS"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=c.f.fillZero(t.getMilliseconds()+"",3),o+3<e.length&&(r+=e.substring(o+3,e.length)),e=r}if((o=e.indexOf("EEEE"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=u.d.getMessage("F_dateFormat_daynames_full").split(",")[new Date(t.getFullYear(),t.getMonth(),t.getDate()).getUTCDay()],o+4<e.length&&(r+=e.substring(o+4,e.length)),e=r}if((o=e.indexOf("E"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=u.d.getMessage("F_dateFormat_daynames_abbr").split(",")[new Date(t.getFullYear(),t.getMonth(),t.getDate()).getUTCDay()];for(var a=1,n=o+1;"E"===e.charAt(n);n++)a++;o+a<e.length&&(r+=e.substring(o+a,e.length)),e=r}if((o=e.indexOf("ww"))>-1){r="";o>0&&(r+=e.substring(0,o)),r+=p.getWeek(t),o+2<e.length&&(r+=e.substring(o+2,e.length)),e=r}i=e}return i},getIOFormatDate:function(t,e,i){try{if(t.length!==e.length)return t;var o=e;if(i||(8==t.length?i="yearMonthDate":6==t.length?i="yearMonth":10==t.length?i="yearMonthDateHour":12==t.length?i="yearMonthDateTime":14==t.length&&(i="yearMonthDateTimeSec")),"yearMonthDate"==i){var s=t.substring(0,4),r=t.substring(4,6),a=t.substring(6);t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)).replace(/dd/gi,a)}else if("yearMonth"==i){s=t.substring(0,4),r=t.substring(4,6);t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)}else if("yearMonthDateHour"==i){s=t.substring(0,4),r=t.substring(4,6),a=t.substring(6,8);var n=t.substring(8,10);t=(t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)).replace(/dd/gi,a)).replace(/HH/gi,n)}else if("yearMonthDateTime"==i){s=t.substring(0,4),r=t.substring(4,6),a=t.substring(6,8),n=t.substring(8,10);var l=t.substring(10,12)
;t=(t=(t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)).replace(/dd/gi,a)).replace(/HH/gi,n)).replace(/mm/g,l)}else if("yearMonthDateTimeSec"==i){s=t.substring(0,4),r=t.substring(4,6),a=t.substring(6,8),n=t.substring(8,10),l=t.substring(10,12);var d=t.substring(12,14);t=(t=(t=(t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)).replace(/dd/gi,a)).replace(/HH/gi,n)).replace(/mm/g,l)).replace(/SS/gi,d)}return t}catch(t){h.w.printStackTrace(t,null,this)}},getIOUnFormatDate:function(t,e,i){try{if(t.length!==e.length)return t;if(i||(8==t.length?i="yearMonthDate":6==t.length?i="yearMonth":10==t.length?i="yearMonthDateHour":12==t.length?i="yearMonthDateTime":14==t.length&&(i="yearMonthDateTimeSec")),"yearMonthDate"==i){var o=t.substr(e.indexOf("y"),4),s=c.f.fillZero(t.substr(e.indexOf("M"),2),2),r=c.f.fillZero(t.substr(e.indexOf("d"),2),2);t=o+s+r}else if("yearMonth"==i){o=t.substr(e.indexOf("y"),4),s=c.f.fillZero(t.substr(e.indexOf("M"),2),2);t=o+s}else if("yearMonthDateHour"==i){o=t.substr(e.indexOf("y"),4),s=c.f.fillZero(t.substr(e.indexOf("M"),2),2),r=c.f.fillZero(t.substr(e.indexOf("d"),2),2);var a=c.f.fillZero(t.substr(e.indexOf("H"),2),2);t=o+s+r+a}else if("yearMonthDateTime"==i){o=t.substr(e.indexOf("y"),4),s=c.f.fillZero(t.substr(e.indexOf("M"),2),2),r=c.f.fillZero(t.substr(e.indexOf("d"),2),2),a=c.f.fillZero(t.substr(e.indexOf("H"),2),2);var n=c.f.fillZero(t.substr(e.indexOf("m"),2),2);t=o+s+r+a+n}else if("yearMonthDateTimeSec"==i){o=t.substr(e.indexOf("y"),4),s=c.f.fillZero(t.substr(e.indexOf("M"),2),2),r=c.f.fillZero(t.substr(e.indexOf("d"),2),2),a=c.f.fillZero(t.substr(e.indexOf("H"),2),2),n=c.f.fillZero(t.substr(e.indexOf("m"),2),2);var l=c.f.fillZero(t.substr(e.indexOf("S"),2),2);t=o+s+r+a+n+l}return t}catch(t){h.w.printStackTrace(t,null,this)}},_getDay:function(t,e){t+="";var i=parseInt(t.slice(0,4)),o=t.slice(4,6);o=0==o.charAt(0)?parseInt(o.charAt(1)):parseInt(o);var s=t.slice(6,8);if(s=0==s.charAt(0)?parseInt(s.charAt(1)):parseInt(s),i<1900)return e&&alert(u.d.getMessage("Date_err_1900")),-1;if(o<0||o>12)return e&&alert(u.d.getMessage("Date_err_12")),-1;if(s<0||s>31)return e&&alert(u.d.getMessage("Date_err_31")),-1;if(2==o&&s>28){if((i%4!=0||i%100==0)&&i%400!=0)return e&&alert(u.d.getMessage("Date_err_28")),-1;if(s>29)return e&&alert(u.d.getMessage("Date_err_29")),-1}if((4==o||6==o||9==o||11==o)&&s>30)return e&&alert(u.d.getMessage("DatePicker_monthNames").split(",")[o-1]+u.d.getMessage("Date_err_30")),-1;var r=o;1==o&&(r=13,i-=1),2==o&&(r=14,i-=1);var a=s+2*r+i+parseInt(3*(r+1)/5,10)+parseInt(i/4,10)-parseInt(i/100,10)+parseInt(i/400,10)+2;return a-7*parseInt(a/7,10)},getDay:function(t){switch(this._getDay(t,!0)){case 0:return"토요일";case 1:return"일요일";case 2:return"월요일";case 3:return"화요일";case 4:return"수요일";case 5:return"목요일";case 6:return"금요일"}},toLunar:function(t){t=t.toString();var e=parseInt(t.substring(0,4)),i=parseInt(t.substring(4,6));"09"==t.substring(4,6)&&(i=9);var o=parseInt(t.substring(6,8));"0"==t.charAt(6)&&(o=parseInt(t.charAt(7),10))
;var s,r,a,n,l,h,d,u,c,p,g,m,f,b,y,v,w=new Array("12121223221217575_abc","12121212212207575_abc","11211212221207575_abc","21121321221227575_abc","21121121212207575_abc","21212112121207575_abc","22123211212127575_abc","21221211212107575_abc","21221212121207575_abc","12321221212127575_abc","12121212212207575_abc","11211232212227575_abc","11211212122207575_abc","12121121212207575_abc","21212312121217575_abc","22212112121207575_abc","12212121212107575_abc","21232212121217575_abc","21212122121207575_abc","12112122322127575_abc","12112121222107575_abc","21211212122207575_abc","12121321122127575_abc","22121121122107575_abc","22122112121207575_abc","12214121212127575_abc","12121221212107575_abc","21122121221207575_abc","12312121222127575_abc","12112121222107575_abc","21211231221227575_abc","21211211221207575_abc","22121121121207575_abc","22122312121127575_abc","21221212121207575_abc","12121221212107575_abc","21321221221217575_abc","21121212221207575_abc","12112123221227575_abc","12112112212207575_abc","21211211212207575_abc","21221321121227575_abc","12212121211207575_abc","21212212121107575_abc","21223212212127575_abc","11212122122107575_abc","21121212212207575_abc","12312112212227575_abc","12112112122207575_abc","12211231212217575_abc","22211211212107575_abc","22212121121207575_abc","12212412121127575_abc","12122122121207575_abc","11212122122107575_abc","21141212122217575_abc","21121121222107575_abc","22112114122127575_abc","22112112121207575_abc","22121211212107575_abc","22122141121217575_abc","21221221211207575_abc","12121221221207575_abc","11214121221227575_abc","11211212221207575_abc","21121121221207575_abc","22312112121227575_abc","21212112121207575_abc","22121213212127575_abc","21221211212107575_abc","21221212121207575_abc","12121421212127575_abc","12112212212207575_abc","11211212212207575_abc","21141121212227575_abc","12121121212207575_abc","21212112321227575_abc","12212112121207575_abc","12212121212107575_abc","21212232121217575_abc","21212122121207575_abc","12112122122107575_abc","21213212122217575_abc","21211212122207575_abc","12121121122107575_abc","22232112112217575_abc","22122112121207575_abc","12212123212127575_abc","12121221212107575_abc","21122121221207575_abc","12112321222127575_abc","12112121222107575_abc","21211211222107575_abc","22123121122127575_abc","22121121121207575_abc","22121212321127575_abc","21221212121107575_abc","22121221212107575_abc","21121241221217575_abc","21121212212207575_abc","12112112212207575_abc","21213211221227575_abc","21211211212207575_abc","21221121123227575_abc","12212121121207575_abc","12212212121107575_abc","21221232212127575_abc","11212122122107575_abc","21121212212207575_abc","12112312122227575_abc","12112112122207575_abc","12211211212207575_abc","12232121121217575_abc","22212121121207575_abc","12212212321127575_abc","12122121221207575_abc","11212122122107575_abc","21121322122217575_abc","21121121222107575_abc","22112112122107575_abc","22213211212127575_abc","22121211212107575_abc","22122121121207575_abc","12322121221127575_abc","12121221221207575_abc","11212123221227575_abc","11211212221207575_abc","21121121221207575_abc","22112312121227575_abc","21212112121207575_abc","21221211212107575_abc","21242121121217575_abc","21221212121207575_abc","12121212232127575_abc","12112122212207575_abc","11211212212207575_abc","21121321212227575_abc","12121121212207575_abc","21212112121207575_abc","21223211212127575_abc","12212121212107575_abc","21212212121207575_abc","12321212212127575_abc","12112122122107575_abc","21211232122217575_abc","21211212122207575_abc","12121121122207575_abc","12212312112217575_abc","22122112112207575_abc","12122121212107575_abc","21232122121217575_abc","21121221221207575_abc","12112123222127575_abc","12112121222107575_abc","21211211221207575_abc","22121141121227575_abc","22121121121207575_abc","22121212112107575_abc","22122321212117575_abc","21221221212107575_abc","21121221221207575_abc","12312121222127575_abc","12112112212207575_abc","21211213212227575_abc","21211211212207575_abc","21221121121207575_abc","21221412112127575_abc","12212212121107575_abc","21212212212107575_abc","21141212212217575_abc"),S=new Array(31,28,31,30,31,30,31,31,30,31,30,31),C=new Array(170)
;for(h=0;h<170;h++){for(C[h]=0,d=0;d<12;d++)switch(Number(w[h].charAt(d))){case 1:case 3:C[h]=C[h]+29;break;case 2:case 4:C[h]=C[h]+30}switch(Number(w[h].charAt(12))){case 0:break;case 1:case 3:C[h]=C[h]+29;break;case 2:case 4:C[h]=C[h]+30}}if(m=686200+Math.floor(470)-Math.floor(18.8)+Math.floor(4.7)+30,f=365*(b=e-1)+Math.floor(b/4)-Math.floor(b/100)+Math.floor(b/400),c=e%400==0||e%100!=0&&e%4==0,S[1]=c?29:28,!(o>S[i-1])){for(h=0;h<i-1;h++)f+=S[h];for(p=(f+=o)-m+1,g=C[0],h=0;h<170&&!(p<=g);h++)g+=C[h+1];for(s=h+1881,p-=g-=C[h],u=0!=Number(w[h].charAt(12))?13:12,l=0,d=0;d<u&&(Number(w[h].charAt(d))<=2&&l++,!(p<=(n=Number(w[h].charAt(d))<=2?Number(w[h].charAt(d))+28:Number(w[h].charAt(d))+26)));d++)p-=n;return y=(r=l)<10?"0"+r:""+r,v=(a=p)<10?"0"+a:""+a,s.toString()+y.toString()+v.toString()}},getCurrentServerDate:function(t){t=t||"yyyyMMdd";var e=new Date(Date.now()+WebSquare.serverDiff);return p.getFormattedDate(e,t)},_checkLocalTimeInterval:function(){p._checkLocalTime.cnt++;var t=(new Date).getTime(),e=t-p._checkLocalTime.time,i=t-p._checkLocalTime.gTime,o=p._checkLocalTime.cnt*p._checkLocalTime.interval,s=Math.abs(i-o),r=l.v.getConfiguration("/WebSquare/date/serverDate/@autoupdateinterval")||"3600";r=1e3*parseInt(r,10),e<0||i<0||p._checkLocalTime.pendingCnt>p._checkLocalTime.pendingMaxCnt?p.updateServerTime():e>p._checkLocalTime.diffMax?(p._checkLocalTime.refresh=!0,p._checkLocalTime.pendingCnt++):s>p._checkLocalTime.gDiffMax?(p._checkLocalTime.refresh=!0,p._checkLocalTime.gTime=(new Date).getTime(),p._checkLocalTime.cnt=0,p._checkLocalTime.pendingCnt++):(i>r||p._checkLocalTime.timezoneOffset!==(new Date).getTimezoneOffset()||!0===p._checkLocalTime.refresh)&&p.updateServerTime(),p._checkLocalTime.time=(new Date).getTime()}};p._initServerDiff=(0,o.Z)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e="false"!==String(l.v.getConfiguration("/WebSquare/date/serverDate/@enable")).toLowerCase())){t.next=4;break}return t.next=4,p.updateServerTime();case 4:e&&!isNaN(n.x.serverDiff)||(n.x.serverDiff=0),p._onRequest=!1,p._initCheckLocalTime(),d.D.setInterval(p._checkLocalTimeInterval,{key:"WebSquare_date_checkLocalTimeInterval",caller:this,delay:p._checkLocalTime.interval});case 8:case"end":return t.stop()}}),t,this)}))),p._initCheckLocalTime=function(){p._checkLocalTime.time=(new Date).getTime(),p._checkLocalTime.gTime=(new Date).getTime(),p._checkLocalTime.cnt=0,p._checkLocalTime.refresh=!1,p._checkLocalTime.pendingCnt=0,p._checkLocalTime.timezoneOffset=(new Date).getTimezoneOffset()},p.updateServerTime=(0,o.Z)(a().mark((function t(){var e,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==p._onRequest){t.next=3;break}return t.abrupt("return");case 3:return e="yyyyMMddHHmmssSSS",i=l.v.getConfiguration("serverTimeURL")||n.x.baseServletURI+"serverTime.wq",i+="?pattern="+e+"&idx="+(new Date).getTime()+1e4*Math.random(),t.abrupt("return",new Promise((function(t,o){var s;try{(s=l.v.getXMLHTTPObject()).open("POST",i,!0),s.setRequestHeader("Cache-Control","no-cache"),s.onreadystatechange=function(){if(4==s.readyState){var i=s.responseText,o=p.parseDate(i,e);p._onRequest=!1;var r=new Date(o).getTime()-(new Date).getTime();n.x.serverDiff=r,r=new Date((new Date).getTime()+r),p._onRequest=!1,s.onreadystatechange=function(){},s=null,p._initCheckLocalTime();var a=p.getFormattedDate(r,e);t(a)}},p._onRequest=!0,s.send()}catch(t){p._onRequest=!1,s&&(s.onreadystatechange=function(){},s=null),h.w.printStackTrace(t),o()}})));case 7:case"end":return t.stop()}}),t)}))),p._updateServerTime=function(t){},p.getServerTimeZone=function(){return new Promise((function(t,e){var i=l.v.getXMLHTTPObject();try{i.open("POST",n.x.baseServletURI+"serverTimeZone.wq",!0),i.onreadystatechange=function(){if(4===i.readyState)try{n.x.serverTimeOffset=parseInt(i.responseText,10),t(WebSquare.serverTimeOffset),i.onreadystatechange=function(){},i=null}catch(t){i.onreadystatechange=function(){},i=null,
e(t)}},i.send(null)}catch(t){i.onreadystatechange=function(){},i=null,e(t)}}))},p.getMaxMinYear=function(){var t=l.v.getConfiguration("/WebSquare/date/maxYear/@value")-0;(t<1e3||t>9999||isNaN(t))&&(t=2099);var e=l.v.getConfiguration("/WebSquare/date/minYear/@value")-0;if((e<1e3||e>9999||isNaN(e))&&(e=1901),e>t){var i=e;e=t,t=i}var o={};return o.maxYear=t,o.minYear=e,o},p.getWeek=function(t){var e=new Date;e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var i=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)}},1454:function(t,e,i){"use strict";i.d(e,{B:function(){return n}});var o=i(484),s=i(1974),r=i(5948),a=i(9075),n={clear:function(){for(var t in a.k.printLog(" WebSquare memory leak initialize start "),window._funs)window._funs[t]=null;for(var e in window._objs)if(void 0!==window._objs[e]._closures){for(var i in window._objs[e]._closures)try{window._objs[e].detachEvent(window._objs[e]._closures[i].name,window._objs[e]._closures[i]),window._objs[e]._closures[i]=null,window._funs[i]=null}catch(t){}window._objs[e]._closures=null,window._objs[e]=null}window._objs=null,a.k.printLog(" WebSquare memory leak initialize end ")},cleanObj:function(t){},clearElement:function(t){var e=null,i=0,o=0,s="";if(e=t.attributes){o=e.length;for(i=0;i<o;i++)"function"==typeof t[s=e[i].name]&&(t[s]=null)}if(e=t.childNodes){o=e.length;for(i=0;i<o;i++)this.clearElement(t.childNodes[i])}},applyParentObject:function(t,e){try{return e.apply(t,arguments)}catch(t){r.w.printStackTrace(t)}},addListener:function(t,e,i,o){s.x.addListenerCnt++;try{if(o=o||!1,t.attachEvent)try{t!=window?"onload"==e?s.x.onload=i:t.attachEvent(e,i.closure(t,e)):t.attachEvent(e,i)}catch(t){r.w.printStackTrace(t)}else if(t.addEventListener)try{void 0!==e&&null!=e&&""!=e&&(e.startsWith("on")?t.addEventListener(e.slice(2),i,o):t.addEventListener(e,i,o))}catch(t){r.w.printStackTrace(t)}}catch(i){a.k.printlog("ERROR ["+t.id+"] ["+e+"] at WebSquare.event.addListener"),r.w.printStackTrace(i)}},removeListener:function(t,e,i,o){try{if(o=o||!1,t.detachEvent)try{t!=window?t.detachEvent(e,i.closure(t,e)):t.detachEvent(e,i)}catch(t){r.w.printStackTrace(t)}else if(t.removeEventListener)try{t.removeEventListener(e.slice(2),i,o)}catch(t){r.w.printStackTrace(t)}}catch(t){r.w.printStackTrace(t)}},addUserEvents:function(t,e,i){var s=[];try{if(e){if(void 0!==i){for(var a={},n=0;n<i.length;n++)a[i[n]]="";var l=[];for(n=0;n<e.length;n++)void 0===a[e[n].name]?s.push(e[n]):l.push(e[n]);e=l}"object"==(0,o.Z)(t.userEventList)&&"number"==typeof t.userEventList.length?t.userEventList=t.userEventList.concat(e):t.userEventList=e}}catch(t){r.w.printStackTrace(t)}return s},fireEvent:function(t,e){try{var i=t.userEventList;if(t.options&&t.options.parentEvent&&t!=t.options.parentEvent)return void t.options.parentEvent.childFiredEvent.apply(t.options.parentEvent,arguments);if(i){for(var o,n=null,l=void 0,h=0;h<i.length;h++)if(void 0!==i[h].name&&i[h].name==e.toLowerCase())switch(i[h].action){case"script":if("function"==typeof(o="string"==typeof i[h].param.handler?WebSquare.util.getGlobalFunction(i[h].param.handler,t.scope_id):i[h].param.handler)){if(null==n&&(n=[],arguments.length>2))for(var d=2;d<arguments.length;d++)n.push(arguments[d]);i[h].disabled||(l=t.scope_obj?function(t,e,i,o){s.x.scope_obj=e.scope_obj.id;var r=t.apply(e,!0!==o?i:[e.scope_obj.scope].concat(i));return s.x.scope_obj=null,r}(o,t,n,i[h].param._old):o.apply(t,n))}else a.k.printLog("Event error ["+t.id+",ev:"+i[h].name+"] : "+i[h].param.handler+" is not a function")}if(void 0!==l)return l}}catch(e){r.w.printStackTrace(e,null,t)}},fireSystemEvent:function(t,e,i){try{if(!WebSquare.util.isIE()&&"createEvent"in document){"on"==e.slice(0,2)&&(e=e.substring(2,e.length));var o=document.createEvent("HTMLEvents");for(var s in o.initEvent(e,!0,!0),i)o[s]=i[s];t.render.dispatchEvent(o)}else if("createEventObject"in document){"on"!=e.slice(0,2)&&(e="on"+e);o=document.createEventObject()
;for(var s in o.eventType=e,o.cancelBubble=!0,o.returnValue=!0,i)o[s]=i[s];t.render.fireEvent(e,o)}}catch(t){r.w.printStackTrace(t)}},getTarget:function(t){try{return null==t?null:t.target?t.target:t.srcElement?t.srcElement:null}catch(t){r.w.printStackTrace(t)}},getRelatedTarget:function(t){try{return null==t?null:t.relatedTarget?t.relatedTarget:null!=window.event&&n.fromElement?t.fromElement===WebSquare.event.getTarget(t)?t.toElement:t.fromElement:null}catch(t){r.w.printStackTrace(t)}},getClientX:function(t){try{return WebSquare.core.browserCheck.ie?n.clientX:t.clientX}catch(t){r.w.printStackTrace(t)}},getClientY:function(t){try{return WebSquare.core.browserCheck.ie?n.clientY:t.clientY}catch(t){r.w.printStackTrace(t)}},getOffsetX:function(t){try{if(WebSquare.core.browserCheck.ie)return n.offsetX;var e=t.target,i=WebSquare.style.getAbsoluteLeft(e);return t.pageX-i}catch(e){r.w.printStackTrace(e)}},getOffsetY:function(t){try{if(WebSquare.core.browserCheck.ie)return n.offsetY;var e=t.target,i=WebSquare.style.getAbsoluteTop(e);return t.pageY-i}catch(e){r.w.printStackTrace(e)}},getScreenX:function(t){try{if(WebSquare.core.browserCheck.ie)return n.screenX;if(!WebSquare.util.isMobile()||!t.touches)return t.screenX;var e=t.touches.item(0)||t.changedTouches.item(0);if(e)return e.screenX}catch(t){r.w.printStackTrace(t)}},getScreenY:function(t){try{if(WebSquare.core.browserCheck.ie)return n.screenY;if(!WebSquare.util.isMobile()||!t.touches)return t.screenY;var e=t.touches.item(0)||t.changedTouches.item(0);if(e)return e.screenY}catch(t){r.w.printStackTrace(t)}},getMouseX:function(t){try{var e=(t=t||n).clientX;return e+=document.documentElement.scrollLeft||document.body.scrollLeft,WebSquare.util.isMobile()&&(t.touches?e=t.touches.item(0).pageX:t.pointers&&(e=t.pointers[0].pageX)),e}catch(t){r.w.printStackTrace(t)}},getMouseY:function(t){try{var e=(t=t||n).clientY;return e+=document.documentElement.scrollTop||document.body.scrollTop,WebSquare.util.isMobile()&&(t.touches?e=t.touches.item(0).pageY:t.pointers&&(e=t.pointers[0].pageY)),e}catch(t){r.w.printStackTrace(t)}},stopPropagation:function(t){try{if(!t||"object"!==(0,o.Z)(t))return;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}catch(t){r.w.printStackTrace(t)}},preventDefault:function(t){try{if(!t||"object"!==(0,o.Z)(t))return;t.preventDefault?t.preventDefault():t.returnValue=!1}catch(t){r.w.printStackTrace(t)}},stopEvent:function(t){try{WebSquare.event.stopPropagation(t),WebSquare.event.preventDefault(t)}catch(t){r.w.printStackTrace(t)}},bindAsEventListener:function(t,e){return function(i){e.apply(t,[i||window.event].concat(Array.prototype.slice.call(arguments,2)))}},addEvent:function(t,e,i){i.$$guid||(i.$$guid=WebSquare.event.addEvent.guid++),t.events||(t.events={});var o=t.events[e];o||(o=t.events[e]={},t["on"+e]&&(o[0]=t["on"+e])),o[i.$$guid]=i,t["on"+e]=WebSquare.event.handleEvent},removeEvent:function(t,e,i){t.events&&t.events[e]&&delete t.events[e][i.$$guid]},handleEvent:function(t){var e=!0;t=t||window.event;var i=this.events[t.type];for(var o in i)this.$$handleEvent=i[o],!1===this.$$handleEvent(t)&&(e=!1);return e},fixEvent:function(t){t.preventDefault=WebSquare.event.fixEvent.preventDefault,t.stopPropagation=WebSquare.event.fixEvent.stopPropagation}};n.fixEvent.preventDefault=function(){this.returnValue=!1},n.fixEvent.stopPropagation=function(){this.cancelBubble=!0},n.isEventSupported=function(t,e){var i=!1;try{if(!t)return!1;var o=e;"string"!=typeof o||"o"===o.charAt(0)&&"n"===o.charAt(1)||(o="on"+o),(i=o in t)||t.setAttribute&&t.removeAttribute&&(t.setAttribute(o,""),i="function"==typeof t[o],void 0!==t[o]&&(t[o]=void 0),t.removeAttribute(o))}catch(t){r.w.printStackTrace(t)}return i},n.getMouseWheelDelta=function(t){try{var e=t.detail,i=t.wheelDelta,o=-1!=navigator.userAgent.indexOf("Windows")||!1,s=-1!=navigator.userAgent.indexOf("Macintosh")||!1
;return WebSquare.util.isMobile()?WebSquare.core.browserCheck.android&&(i/=360):WebSquare.util.isChrome()?(o||s)&&(i/=120):WebSquare.util.isSafari()?o?i/=120:s&&(i/=12):WebSquare.util.isFF()?o?i=e/-3:s&&(i=-1*e):WebSquare.util.isOpera()?o?i/=120:s&&(i/=160):WebSquare.util.isIEAllVersion("8 9 10 11")&&(i/=120),i}catch(t){r.w.printStackTrace(t)}}},5948:function(t,e,i){"use strict";i.d(e,{w:function(){return s}});var o=i(1974),s={};!0!==o.x.skipLog||o.x.printError?(s.exceptionCnt=0,s.printError=function(t){WebSquare.logger.printLog("WebSquare Error\n\n"+t),WebSquare.logger.debug&&alert("WebSquare Error\n\n"+t)},s.printStackTrace=function(t,e,i){s.exceptionCnt++;var r={};if(o.x.printConsole||o.x.errorConsole){var a=o.x.w2xPath;if(i){var n=i.scope_obj;n&&"function"==typeof n.getSrc&&(a=n.getSrc(),r=WebSquare.core._getMsaOption(n))}t&&t.message&&(t.message+="\nxml page url : "+a,console.error(s.exceptionCnt,t),WebSquare.logger.printLog(t.message));var l=WebSquare.core.getConfiguration("/WebSquare/debug/@errorHandler"),h=WebSquare.util.getGlobalFunction(l);h&&h(t,t.message)}else{var d="";i&&i.getID&&(d+="Exception Occured at element id ["+i.getID()+"]\n",i.parentFrame&&null!=o.x.idCache[i.parentFrame]&&(d+="* frame       : id=["+o.x.idCache[i.parentFrame].id+"], src=["+WebSquare.core.getURL(o.x.idCache[i.parentFrame].getSrc(),r)+"]\n"));try{t.componentName&&(d+="* component   :"+t.componentName+"\n")}catch(t){}try{t.componentID&&(d+="* id          :"+t.componentID+"\n")}catch(t){}try{t.eventName&&(d+="* event       :"+t.eventName+"\n")}catch(t){}try{t.description&&(d+="* description :"+t.message+"\n")}catch(t){}try{t.number&&(d+="* number      :"+(65535&t.number)+"\n")}catch(t){}try{t.line&&(d+="* line        :"+t.line+"\n")}catch(t){}try{t.lineNumber&&(d+="* lineNumber  :"+t.lineNumber+"\n")}catch(t){}try{t.columnNumber&&(d+="* columnNumber:"+t.columnNumber+"\n")}catch(t){}try{t.sourceURL&&(d+="* sourceURL   :"+t.sourceURL+"\n")}catch(t){}try{t.fileName&&(d+="* fileName    :"+t.fileName+"\n")}catch(t){}if(e&&((e+="").length>100?d+="* source        :"+e.substring(0,100)+"\n":d+="* source        :"+e+"\n"),void 0===t.aleradyThrow){null!=t.stack?d+="================================================================\n"+t.stack+"\n================================================================\n":t.message&&(d+="* message     : "+t.message+"\n");var u=WebSquare.language.getMessage("E_exception_ErrorOccursSeeLog",d);""==u&&(u=d),WebSquare.logger.printLog(u),s.printInternalSource(),t.aleradyThrow="djshin"}}},s.parseStack=function(t){for(var e=t.split("\n"),i=[],o=0;o<e.length;o++)e[o]&&(e[o].trim().startsWith("at")?i.push(e[o]):0==o&&navigator.userAgent.indexOf("Chrome")>-1?i.push("    "+e[o]):i.push("    at "+e[o]));return i.join("\n")},s.ieErrorHandler=function(t,e,i){return WebSquare.logger.printLog(WebSquare.language.getMessage("E_exception_IERuntimeError",i,window.event.errorCharacter,window.event.errorCode,e,t,s.getSignature(s.ieErrorHandler.caller))),s.printInternalSource(),!0},s.printInternalSource=function(){for(var t=0;t<WebSquare.BootLoader.globalEvalArr.length;t++){var e=[],i="\n<<Internal JavaScript Source Block",o=WebSquare.BootLoader.globalEvalArr[t];if(o)for(var s=o.split(WebSquare.scriptIdentifier),r=s.length>1?1:0,a=1,n=!0,l=0;l<s.length;l++)if(""!=s[l]){var h=s[l].split("\n"),d=h[0]+"",u=d.indexOf('";');u>0&&(d=h[0].substring(0,u),h[0]=h[0].substring(u+2)),1===r?e.push(i+" ["+d+"]["+t+"] Start>>"):e.push(i+"["+t+"] Start>>"),n&&(n=!1,e.push("\n"),e.push("["),1===r&&e.push(d+":"),e.push(WebSquare.BootLoader.fillZero(a,4)),e.push("]"),a++);for(var c=0,p=h.length;c<p;c++)e.push("\n"),e.push("["),1===r&&e.push(d+":"),e.push(WebSquare.BootLoader.fillZero(a,4)),e.push("]"),e.push(h[c]),a++;1===r?e.push(i+" ["+d+"]["+t+"] End>>\n"):e.push(i+"["+t+"] End>>\n")}var g=e.join("");WebSquare.logEnableFlag&&WebSquare.logMsgArray.push(g),WebSquare.printConsole&&console.log(g),WebSquare.remoteConsole&&WebSquare.remoteLogMsgArray.push(g)}
WebSquare.BootLoader.globalEvalArr=[]},s.ffErrorHandler=function(t,e,i){return"Error loading script"==t?(WebSquare.BootLoader.printError("Module ["+e+"] Does not exist."),!1):(WebSquare.core.browserCheck.moz&&i++,WebSquare.logger.printLog(WebSquare.language.getMessage("E_exception_FFRuntimeError",i,e,t,s.getSignature(s.ffErrorHandler.caller))),s.printInternalSource(),!0)},s.getSignature=function(t,e){if(void 0===e&&(e=0),e>10)return"    ...(omission)";if(null==t||"null"==t)return"";try{var i="";null!=t.caller&&(i=t.toString()!=t.caller.toString()?s.getSignature(t.caller,++e):"    ...(recursion)");var o,r=t.toString(),a=r.indexOf('["');return-1==a?-1==(o=r.indexOf(")"))?"    at "+r+"\n"+i:"    at "+r.substring(0,o+1)+"\n"+i:-1==(o=r.indexOf('"',a+2))?"    at "+r+"\n"+i:"    at "+r.substring(a+2,o)+"\n"+i}catch(e){return t}},s.crossOrigin=function(t){try{void 0!==t&&null!=t||(t={}),null!=this.crossOriginChecked||WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/debug/@skipCrossOrigin"))||(WebSquare.logger.printLog("WebSquare "+t.name+" fail : ["+t.message+"]from : ["+location.toString()+"]"),this.crossOriginChecked=!0)}catch(t){}},s.crossOrigin=function(t){try{void 0!==t&&null!=t||(t={}),null!=this.crossOriginChecked||WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/debug/@skipCrossOrigin"))||(WebSquare.logger.printLog("WebSquare "+t.name+" fail : ["+t.message+"]from : ["+location.toString()+"]"),this.crossOriginChecked=!0)}catch(t){}}):(s.printError=function(){},s.printStackTrace=function(){},s.parseStack=function(){},s.ieErrorHandler=function(){},s.printInternalSource=function(){},s.ffErrorHandler=function(){},s.getSignature=function(){},s.crossOrigin=function(){})},2712:function(t,e,i){"use strict";i.d(e,{h:function(){return l}});var o=i(484),s=i(2137),r=i(7757),a=i.n(r),n=i(5948),l={isEmpty:function(t){return!t||0===t.length},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},matchTagName:function(t,e,i){if(!t)throw"no json given";return i&&(e=this.applyNS(e,i)),this.matchType(t,WebSquare.Elem.type.element)&&t.N===e},matchType:function(t,e){return t.T&&t.T===e},getChildNodes:function(t){return t.E?t.E:[]},findChild:function(t,e){for(var i=WebSquare.jsonUtil.getChildNodes(t),o=[],s=0;s<i.length;s++)if(i[s].N===e)return o.push(i[s]);return o},applyNS:function(t,e){var i=t;return e===WebSquare.core._XML_NAMESPACE.SCHEMA?i=t:e===WebSquare.core._XML_NAMESPACE.XFORMS?i="xf:"+t:e===WebSquare.core._XML_NAMESPACE.XHTML||e===WebSquare.core._XML_NAMESPACE.XML||e===WebSquare.core._XML_NAMESPACE.XSL?i=t:e===WebSquare.core._XML_NAMESPACE.EVENTS?i="ev:"+t:e===WebSquare.core._XML_NAMESPACE.W2&&(i="w2:"+t),i},dropNS:function(t){if(t)return t.substring(t.indexOf(":")+1)},getNS:function(t){if(t){var e=t.indexOf(":")>-1?t.indexOf(":"):t.length;return t.substring(0,e)}},walk_DFS:function(t,e){for(var i=[],o=[t];o.length>0;){for(var s=o.pop(),r=WebSquare.jsonUtil.getChildNodes(s),a=r.length-1;a>=0;a--)o.push(r[a]);var n=e(s);null!=n&&i.push(n)}return i}};l.walk_DFS_async=function(){var t=(0,s.Z)(a().mark((function t(e,i){var o,s,r,n,l,h;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=[],s=[e];case 2:if(!(s.length>0)){t.next=12;break}for(r=s.pop(),n=WebSquare.jsonUtil.getChildNodes(r),l=n.length-1;l>=0;l--)s.push(n[l]);return t.next=8,i(r);case 8:null!=(h=t.sent)&&o.push(h),t.next=2;break;case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),l.walk_BFS=function(t,e){for(var i=[],o=[t];o.length>0;){for(var s=o.shift(),r=WebSquare.jsonUtil.getChildNodes(s),a=0;a<r.length;a++)o.push(r[a]);var n=e(s);null!=n&&i.push(n)}return i},l.getNodesByTagName=function(t,e,i){if(!t)throw"no json given";i&&(e=this.applyNS(e,i));return this.walk_DFS(t,(function(t){if(t.N===e)return t}))},l.getAttribute=function(t,e){var i=t.A;if(i)return i[e]},l.getAttributes=function(t){var e=t.A;if(!e)return[]
;var i=[];for(var o in e)e.hasOwnProperty(o)&&i.push(o);return i},l.getAttributesObject=function(t){if(t.A)return t.A},l.appendChild=function(t,e){return t.E?t.E.push(e):t.E=[e],e},l.removeChild=function(t,e){for(var i=WebSquare.jsonUtil.getChildNodes(t),o=0;o<i.length;o++)if(i[o]===e)return i.splice(o,1);return null},l.createNode=function(t){return{N:t,T:WebSquare.Elem.type.element,A:{}}},l.setAttribute=function(t,e,i){t.A[e]=i},l.removeAttribute=function(t,e){delete t.A[e]},l._object_create=function(t){var e=function(){};return e.prototype=t,new e},l.cloneNode=function(t,e,i,s,r){if(null===t||"object"!==(0,o.Z)(t))return t;if(!0!==e){var a={};for(var n in t)"parent"!==n&&t.hasOwnProperty(n)&&(a[n]=t[n]);return a}if("function"==typeof t.clone&&t.clone!==WebSquare.xfControl.prototype.clone)return t.clone(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(t.nodeType&&"function"==typeof t.cloneNode)return t.cloneNode(!0);void 0===i&&(i=[],s=[]),null==r?r=0:r++;for(var l=i.length,h=0;h<l;h++)if(t===i[h])return s[h];if("[object Array]"==Object.prototype.toString.call(t)){var d=t.slice();i.push(t),s.push(d);for(h=d.length;h--;)d[h]=WebSquare.jsonUtil.cloneNode(d[h],!0,i,s,r);return d}var u=Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__;u||(u=t.constructor.prototype);var c=WebSquare.jsonUtil._object_create(u);i.push(t),s.push(c);var p={parent:!0};for(var n in t)!0!==p[n]&&(c[n]=WebSquare.jsonUtil.cloneNode(t[n],!0,i,s,r));return c},l.getCDataNodeValue=function(t){var e="";return t.E&&t.E.length>0&&(e=t.E[0].cdata||""),e},l.getTextNodeValue=function(t){var e="";return t.E&&t.E.length>0&&(e=t.E[0].text||""),e},l.getValue=function(t,e,i){for(var o="",s=WebSquare.jsonUtil.getChildNodes(t),r=0;r<s.length;r++)if(s[r].N==e){var a=WebSquare.jsonUtil.getNodesByTagName(t,e)[0];if(!i){var n=WebSquare.jsonUtil.getChildNodes(a)[0];void 0!==n&&(o=3==n.T?n.text:4==n.T?n.cdata:"");break}o=WebSquare.jsonUtil.getAttribute(a,i)}return o.wq_trim()},l.findNodes=function(t,e){var i=function(t){return t.A&&t.A===name?t:[]}.bind(this);return this.walk_DFS(t,i)},l.serialize=function(t){return JSON.stringify(t,(function(t,e){if("parent"!==t)return e}))},l.setJSONByPath=function(t,e,i){try{if("string"!=typeof e||null==t)return;for(var s=e.wq_trim().split("."),r=0;t&&("object"==(0,o.Z)(t)||"function"==typeof t)&&r<s.length-1;)t=t[s[r++]];t[s[s.length-1]]=i}catch(t){n.w.printStackTrace(t,null,this)}},l.getJSONByPath=function(t,e){try{if("string"!=typeof e||null==t)return t;for(var i=e.wq_trim().split("."),s=0;t&&("object"==(0,o.Z)(t)||"function"==typeof t)&&s<i.length;)t=t[i[s++]];return t}catch(t){n.w.printStackTrace(t,null,this)}}},3308:function(t,e,i){"use strict";i.d(e,{d:function(){return o}});var o={getMessage:function(t){try{var e="";if(!t)return"";void 0===WebSquareLang[t]?(WebSquare.logger.printLog("'"+t+"' is not defined."),e=""):e=WebSquareLang[t];for(var i=0;i<(arguments.length<=1?0:arguments.length-1);i++)try{e=e.replace(new RegExp("%"+(i+1),"g"),i+1<1||arguments.length<=i+1?void 0:arguments[i+1])}catch(t){WebSquare.logger.printLog(t.message)}return e}catch(t){WebSquare.logger.printLog(t.message)}}}},9075:function(t,e,i){"use strict";i.d(e,{k:function(){return h},f:function(){return d}});var o=i(484),s=i(1974),r=i(1477),a=i(5052),n=i(5948),l=i(3308),h={};if(!0===s.x.skipLog)h.printLog=function(){},h.changeClientName=function(){},h.sendRemoteLog=function(){},h.printLog1=function(){},h.getFileName=function(){},h.getLogTime=function(){},h.getLog=function(){},h.getErrorLog=function(){},h.clearLog=function(){},h.showLog=function(){},h.saveLog=function(){},h.showDebugMsg=function(){},h.showErrorMsg=function(){},h.alertObject=function(){},h.getObjectStr=function(){},h.showObject=function(){},h._showObject=function(){},h.getFunctionName=function(){},h.showContextMenu=function(){},h.setGlobalDebug1=function(){},h.setGlobalDebug2=function(){},h.getGlobalDebug=function(){return!1},
h.getVersion=function(){},h.getVersionString=function(){return s.x.ver},h.getFileVersion=function(){},h.getFileVersionString=function(){return s.x.buildDate},h.contextMenuAddRow=function(){},h.contextMenuAddRow1=function(){},h.hideContextMenu=function(){},h.dumpCSS=function(){},h.debug=!1,h.debugKey="";else{h._initImport=function(){r.d.browserCheck.safari?(document.oncontextmenu=function(t){if(t.ctrlKey&&2==t.button)return WebSquare.event.stopEvent(t),!1},document.onmousedown=h.showContextMenu):document.oncontextmenu=h.showContextMenu,document.onclick=h.hideContextMenu},s.x._initImportList.push("logger"),h.printLog=function(t){try{if(!WebSquare.logEnableFlag)return;if(WebSquare.logMsgArrayLength++,WebSquare.isPrintLog){s.x.logMsgCurrentLength+=t.length,s.x.logMsgLength+=t.length,(WebSquare.logMsgArray.length>500||s.x.logMsgCurrentLength>5e4)&&(delete s.x.logMsgArray,s.x.logMsgArray=[],s.x.logMsgCurrentLength=t.length,WebSquare.logMsgArray.push(h.getLogTime()+" "+h.getFileName()+"] Delete logs for reducing memory usage. Total logs : "+s.x.logMsgArrayLength+", bytes : "+WebSquare.logMsgLength));var e=r.d.getLogTime(),i=" "+h.getFileName()+"] "+t;WebSquare.logMsgArray.push(e+i),WebSquare.printConsole&&console.log(e+i),s.x.remoteConsole&&WebSquare.remoteLogMsgArray.push(e+s.x.logFileName+i)}}catch(t){}},h.changeClientName=function(){if(WebSquare.logEnableFlag){h.clientName||(h.clientName=r.d.getCookie("remote_client_name"),h.clientName||(h.clientName="Client_"+parseInt(1e3*Math.random()),r.d.setCookie("remote_client_name",h.clientName)));var t=prompt(l.d.getMessage("E_logger_changeClientName"),h.clientName);t&&(h.clientName=t,r.d.setCookie("remote_client_name",h.clientName))}},s.x.remoteConsole&&(h.sendRemoteLog=function(t){if(WebSquare.logEnableFlag&&(h.clientName||(h.clientName=r.d.getCookie("remote_client_name"),h.clientName||(h.clientName="Client_"+parseInt(1e3*Math.random()),r.d.setCookie("remote_client_name",h.clientName))),s.x.remoteConsole)){try{if(WebSquare.remoteLogMsgArray.length>0){t=JSON.stringify({clientName:h.clientName,logs:s.x.remoteLogMsgArray});s.x.remoteLogMsgArray=[];var e=null;r.d.useActiveXObject?e=new ActiveXObject(a.v._XMLHTTP_PROGIDS[0]):window.XMLHttpRequest&&(e=new XMLHttpRequest),e.open("POST",s.x._resourceURI+"fiddle/logAggregator.jsp",!1),e.send(t),e=null}}catch(t){n.w.printStackTrace(t)}window.setTimeout("logger.sendRemoteLog()",1e3)}},window.setTimeout("logger.sendRemoteLog()",1e3)),h.printLog1=function(t){try{WebSquare.logEnableFlag&&WebSquare.logMsgArray.push("             "+h.getFileName()+"] "+t)}catch(t){}},h.getFileName=function(){if(WebSquare.logEnableFlag){var t=location.pathname;try{var e=t.lastIndexOf("/");e>-1&&e<t.length-1&&(t=t.substring(e+1)),(e=t.lastIndexOf("."))>-1&&(t=t.substring(0,e))}catch(t){}return t}},h.getLogTime=function(t){if(WebSquare.logEnableFlag){var e=null,i=(e="undefined"==t||null==t?new Date:new Date(t)).getTime(),o=i-s.x.logTime,r=WebSquare.text.fillZero(e.getHours(),2)+":"+WebSquare.text.fillZero(e.getMinutes(),2)+":"+WebSquare.text.fillZero(e.getSeconds(),2)+"."+WebSquare.text.fillZero(e.getMilliseconds(),3);return o<1e5?(s.x.logTotalTime+=o,r+=" "+WebSquare.text.fillZero(o,5)+" "+WebSquare.text.fillZero(WebSquare.logTotalTime,6)):r+=" 00000 000000",s.x.logTime=i,r}},h.getLog=function(t){if(WebSquare.logEnableFlag){if(t){var e=h.getLog();return h.clearLog(),e}var i="";try{window.parent!==window.self&&window.parent.WebSquare&&""!=(i=window.parent.logger.getLog())&&(i="Parent Log["+window.parent.name+"] \n"+i)}catch(t){n.w.printStackTrace(t)}try{return""==i?WebSquare.logMsgArray.join("\n"):WebSquare.logMsgArray.join("\n")+"\n\n\n"+i}catch(t){n.w.printStackTrace(t)}}},h.getErrorLog=function(){if(WebSquare.logEnableFlag){s.x.errorLogMsgArray=[]
;for(var t=0;t<WebSquare.logMsgArray.length;++t)(WebSquare.logMsgArray[t].indexOf("오류")>-1||WebSquare.logMsgArray[t].indexOf("에러")>-1||WebSquare.logMsgArray[t].indexOf("Runtime Error")>-1||WebSquare.logMsgArray[t].indexOf("Error occurs")>-1||WebSquare.logMsgArray[t].indexOf("error occurred")>-1)&&WebSquare.errorLogMsgArray.push(WebSquare.logMsgArray[t]);var e="";try{window.parent!==window.self&&window.parent.WebSquare&&""!=(e=window.parent.logger.getErrorLog())&&(e="\n----------------------------------------Parent Log["+window.parent.name+"]----------------------------------------\n"+e)}catch(t){n.w.printStackTrace(t)}try{return""==e?WebSquare.errorLogMsgArray.join("\n--------------------------------------------------------------------------------\n"):WebSquare.errorLogMsgArray.join("\n--------------------------------------------------------------------------------\n")+"\n\n\n"+e}catch(t){n.w.printStackTrace(t)}}},h.clearLog=function(){var t=h.getLog();try{window.parent!==window.self&&window.parent.WebSquare&&window.parent.logger.clearLog()}catch(t){}try{s.x.logMsgArray=[]}catch(t){n.w.printStackTrace(t)}return t},h.showLog=function(){if(WebSquare.logEnableFlag){var t,e="";if(WebSquare.domain&&(e="?domain="+WebSquare.text.URLEncoder(WebSquare.domain)),r.d.browserCheck.android||r.d.browserCheck.iphone||r.d.browserCheck.ipad||r.d.browserCheck.ipod||r.d.browserCheck.blackberry)(t=a.v.getConfiguration("logMsgMobileURL"))||(t=s.x.baseURI+r.d.inquiresPath("message/logMsgMobile.html")),t+=e,window.open(t);else(t=a.v.getConfiguration("logMsgURL"))||(t=s.x.baseURI+r.d.inquiresPath("message/logMsg.html")),t+=e,window.open(t,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")}},h.saveLog=function(){if(WebSquare.logEnableFlag){var t=h.getLog(),e=a.v.getXMLHTTPObject();e.open("POST",s.x._resourceURI+"/engine/servlet/saveLog.jsp",!1),e.send(t),e=null}},h.showDebugMsg=function(t,e,i){if(WebSquare.logEnableFlag){var n;if(void 0!==e&&(t._config=e),void 0!==i&&(t.title=i),"object"==(0,o.Z)(t))n=t;else{n=new Object;try{n["debug info"]=null!=t?t.toString():""}catch(t){}}var l="";WebSquare.domain&&(l="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var h=a.v.getConfiguration("debugMsgURL");h||(h=s.x.baseURI+r.d.inquiresPath("message/debugMsg.html")),WebSquare.net.showWindow(h+l,n,"dialogHeight: 700pt; dialogWidth: 580pt; edge: Raised; center: Yes; help: No; edge: raised; resizable: Yes; status: No;")}},h.showErrorMsg=function(t){if(WebSquare.logEnableFlag){var e="";WebSquare.domain&&(e="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var i=a.v.getConfiguration("errorMsgURL");i||(i=s.x.baseURI+r.d.inquiresPath("message/errorMsg.html")),WebSquare.net.showWindow(i+e,t,"dialogHeight: 300pt; dialogWidth: 280pt; edge: Raised; center: Yes; help: No; resizable: Yes; status: No;")}},h.alertObject=function(t,e){var i="";try{if("string"==typeof t)i=t;else if("object"==(0,o.Z)(t))if(null==t)i+=" null";else try{for(var s in t){var r=s+"               ";r=r.substring(0,30);try{i+=r+":  "+t[s]+"\n"}catch(t){}}}catch(t){i+=l.d.getMessage("E_logger_InnerBlindObject")}}catch(t){n.w.printStackTrace(t)}1==e?$l(i):alert(i)},h.getObjectStr=function(t,e,i){try{if(!WebSquare.logEnableFlag)return;for(var s="",r=0;r<t;r++)s+="\t";if(t>i.maxDepth)return s+"[...]";var a="";if("string"==typeof e||"number"==typeof e)a=e;else if("object"==(0,o.Z)(e))if(null==e)a+=" null";else try{for(var d in e){var u=d+"               ";u=u.substring(0,25);try{if(isNaN(d)){if(i.exclude&&i.exclude.indexOf(d)>-1)continue;if(i.include&&-1==i.include.indexOf(d))continue}if(!i.includeFunction&&"function"==typeof e[d])continue;if("object"==(0,o.Z)(e[d])&&null!=e[d]){if(!i.includeFunction&&0==(d+"").indexOf("on"))continue;if(!i.includeFunction&&void 0!==e[d].innerHTML){a+=s+u+": [DOM Obejct]\n";continue}if(e[d].documentElement||e[d].ownerDocument){
a+=s+u+": [XML Obejct]\n"+s+WebSquare.xml.serialize(e[d])+"\n";continue}a+=s+u+":\n"+h.getObjectStr(t+1,e[d],i)+"\n"}else a+=s+u+": "+e[d]+"\n"}catch(t){}}}catch(t){a+=l.d.getMessage("E_logger_InnerBlindObject")}return a}catch(t){n.w.printStackTrace(t)}},h.showObject=function(t,e){if(WebSquare.logEnableFlag){var i=new Object,s="";try{if(WebSquare.xml.isDocument(t))try{s+=WebSquare.xml.indent(t)}catch(t){s+=l.d.getMessage("E_logger_InnerBlindObject")}else if("string"==typeof t)s=t;else if("object"==(0,o.Z)(t))if(null==t)s+=" null";else try{for(var r in t){var a=r+"               ";if(a=a.substring(0,15),null==t[r])s+=a+":  null\n";else if(WebSquare.xml.isDocument(t[r]))s+=a+":  \n"+WebSquare.xml.indent(t[r]);else if("object"==(0,o.Z)(t[r]))try{s+=a+":  "+h._showObject(t[r],1)}catch(t){s+=a+":  [object]\n"}else try{"function"==typeof t[r]?s+=a+":  "+n.w.getSignature(t[r])+"\n":s+=a+":  "+t[r]+"\n"}catch(t){s+=a+":  \n"}}}catch(t){s+=l.d.getMessage("E_logger_InnerBlindObject")}}catch(t){n.w.printStackTrace(t)}null==e||""==e?i.Object=s:i[e]=s,h.showDebugMsg(i,"text",l.d.getMessage("E_logger_ObjectInfo"))}},h._showObject=function(t,e){if(WebSquare.logEnableFlag){for(var i="\n",s="",r="",a=0;a<e;a++)s+="\t";try{if(WebSquare.xml.isDocument(t))try{i+=s+r+":  \n"+WebSquare.xml.indent(t)}catch(t){i+=l.d.getMessage("E_logger_InnerBlindObject")}else if("object"==(0,o.Z)(t))if(null==t)i+=" null";else for(var d in t)if(r=(r=d+"               ").substring(0,15),null==t[d])i+=r+":  null\n";else if(WebSquare.xml.isDocument(t[d]))i+=s+r+":  \n"+WebSquare.xml.indent(t[d]);else if("object"==(0,o.Z)(t[d]))try{i+=s+r+":  \n"+h._showObject(t[d],e++)}catch(t){i+=s+r+":  [object]\n"}else try{"function"==typeof t[d]?i+=s+r+":  "+n.w.getSignature(t[d])+"\n":i+=s+r+":  "+t[d]+"\n"}catch(t){i+=s+r+":  \n"}}catch(t){i+=l.d.getMessage("E_logger_InnerBlindObject")}return i+="\n"}},h.getFunctionName=function(t){if(null==t||"null"==t)return"";try{var e=t.toString();if(-1==e.indexOf("anonymous")){var i=e.indexOf("function"),o=e.indexOf("(");return e.substring(i+8,o).wq_trim()}}catch(e){return t}return""},r.d.browserCheck.android||r.d.browserCheck.iphone||r.d.browserCheck.ipad||r.d.browserCheck.ipod||r.d.browserCheck.blackberry?h.getGlobalDebug=function(){return!1}:(r.d.browserCheck.moz||r.d.browserCheck.chrome||r.d.browserCheck.ieAllVersion||r.d.browserCheck.opera||r.d.browserCheck.safari)&&(h.showContextMenu=function(t){if(WebSquare.logEnableFlag&&!1!==WebSquare.logEnableContextMenu){if(t=t||event,a.v.browserCheck.moz||a.v.browserCheck.chrome){if(!t.ctrlKey||3!=t.which||"block"==a.v.getConfiguration("debugMenu")&&!WebSquare.logEnableContextMenu)return!0}else if(a.v.browserCheck.ieAllVersion){if(!t.ctrlKey&&!t.crtlLeft||"block"==a.v.getConfiguration("debugMenu")&&!WebSquare.logEnableContextMenu)return!0}else if(a.v.browserCheck.opera){if(!(t.ctrlKey&&t.shiftKey&&("block"!=a.v.getConfiguration("debugMenu")||WebSquare.logEnableContextMenu)||t.ctrlKey&&t.button==2("block"!=a.v.getConfiguration("debugMenu")||WebSquare.logEnableContextMenu)))return!0}else if(a.v.browserCheck.safari&&(!t.ctrlKey||2!=t.button||"block"==a.v.getConfiguration("debugMenu")&&!WebSquare.logEnableContextMenu))return!0;var e=window.innerWidth-t.clientX,i=window.innerHeight-t.clientY,o=document.getElementById("_contextMenuLayer");void 0!==o&&null!=o||(o=document.createElement("div"),document.body.insertBefore(o,null),o.id="_contextMenuLayer",o.style.position="absolute"),o.style.left=e<182?(window.pageXOffset||document.documentElement.scrollLeft)+t.clientX-182+"px":(window.pageXOffset||document.documentElement.scrollLeft)+t.clientX+"px",o.style.top=i<176?(window.pageYOffset||document.documentElement.scrollTop)+t.clientY-176+"px":(window.pageYOffset||document.documentElement.scrollTop)+t.clientY+"px";var s=JSON.stringify({x:WebSquare.event.getClientX(t),y:WebSquare.event.getClientY(t)});o.style.zIndex="20000",o.style.visibility="visible";var r=""
;r+="<div onselectstart='return false' style='position:relative; overflow-x:hidden; overflow-y: auto; width:175px;height:173px; border:4px solid #e7e7e7; '>",r+="<table width='175' border='0' style='border-collapse:collapse; border:1px solid #9fbcd4; background-color:#FFFFFF;'>",r+=h.contextMenuAddRow("WebSquare.logger.showLog",l.d.getMessage("E_logger_ContextmenuSeeLog"),s),r+=h.contextMenuAddRow1("WebSquare.util.getAddress",l.d.getMessage("E_logger_ContextmenuSeeAddress"),s),r+=h.contextMenuAddRow("WebSquare.util.getRQ",l.d.getMessage("E_logger_ContextmenuSeeQR"),s),r+=h.contextMenuAddRow1("WebSquare.util.viewSource",l.d.getMessage("E_logger_ContextmenuSeeSource"),s),r+=h.contextMenuAddRow("WebSquare.util.viewCollection",l.d.getMessage("E_logger_ContextmenuSeeCollection"),s),r+=h.contextMenuAddRow("WebSquare.util.viewInstance",l.d.getMessage("E_logger_ContextmenuSeeInstance"),s);a.v.getConfiguration("/WebSquare/debug/@fiddle");r+=h.contextMenuAddRow("WebSquare.logger.changeClientName",l.d.getMessage("E_logger_ContextmenuChangeClientName"),s),h.globalDebug1?r+=h.contextMenuAddRow1("WebSquare.logger.setGlobalDebug1",l.d.getMessage("E_logger_ContextmenuStopDebugOnScreen"),s):r+=h.contextMenuAddRow1("WebSquare.logger.setGlobalDebug1",l.d.getMessage("E_logger_ContextmenuStartDebugOnScreen"),s),h.getGlobalDebug()?r+=h.contextMenuAddRow("WebSquare.logger.setGlobalDebug2",l.d.getMessage("E_logger_ContextmenuStopDebugOnSystem"),s):r+=h.contextMenuAddRow("WebSquare.logger.setGlobalDebug2",l.d.getMessage("E_logger_ContextmenuStartDebugOnSystem"),s),r+=h.contextMenuAddRow1("parent.print",l.d.getMessage("E_logger_ContextmenuPrint"),s),r+=h.contextMenuAddRow("WebSquare.util.reinitializeTop",l.d.getMessage("E_logger_ContextmenuPageReload"),s),r+=h.contextMenuAddRow("WebSquare.util.reinitializeWframe",l.d.getMessage("E_logger_ContextmenuPageReloadWframe"),s,"[false, "+s+"]"),r+=h.contextMenuAddRow1("parent.WebSquare.logger.getFileVersion",l.d.getMessage("E_logger_ContectmenuFileInfo"),s),r+=h.contextMenuAddRow("WebSquare.logger.getVersion",l.d.getMessage("E_logger_ContextmenuVersion"),s),r+="</table></div>",o.innerHTML=r;for(var n=o.getElementsByTagName("td"),d=0;d<n.length;d++)n[d].getAttribute("data-onclick")&&WebSquare.event.addListener(n[d],"onclick",(function(){var t=this.getAttribute("data-onclick");t=t.replace(/[\(][\s]*[\)]/g,"");var e=this.getAttribute("data-point");h.hideContextMenu(e);var i=this.getAttribute("data-param"),o=[];i?o=JSON.parse(i):o.push(e);var s=WebSquare.util.getGlobalFunction(t);"function"==typeof s&&s.apply(s,o)}));return!1}},h.setGlobalDebug1=function(){WebSquare.logEnableFlag&&(h.globalDebug1=!h.globalDebug1,h.hideContextMenu())},h.setGlobalDebug2=function(){if(WebSquare.logEnableFlag){if(h.getGlobalDebug())WebSquare.cookie.setCookie("globalDebug","false");else"debug"==prompt(l.d.getMessage("E_logger_EnterPassword"),"")?WebSquare.cookie.setCookie("globalDebug","true"):(WebSquare.cookie.setCookie("globalDebug","false"),alert(l.d.getMessage("E_logger_IncorrectPassword")));h.hideContextMenu()}},h.getGlobalDebug=function(){try{if(!WebSquare.logEnableFlag)return;var t=parseInt(WebSquare.cookie.getCookie("lastAccess"),10);isNaN(t)&&(t=(new Date).getTime());var e=(new Date).getTime();return e-t<12e5?(WebSquare.cookie.setCookieAsync("lastAccess",e+""),"true"==WebSquare.cookie.getCookie("globalDebug")):(WebSquare.cookie.setCookie("globalDebug","false"),!1)}catch(t){}return!1},h.getVersion=function(){WebSquare.logEnableFlag&&alert("WebSquare Runtime Engine\n          Version : "+WebSquare.text.BASE64Decode(WebSquare.ver)+"\n\n  Copyright ⓒ 2006  INSWAVE Systems, Inc.\n  All Rights Reserved.\n")},h.getVersionString=function(){return WebSquare.text.BASE64Decode(WebSquare.ver)},h.getFileVersion=function(){WebSquare.logEnableFlag&&alert("FileName : "+s.x.w2xPath+"\nBuildDate : "+WebSquare.buildDate)},h.getFileVersionString=function(){return s.x.buildDate},h.contextMenuAddRow=function(t,e,i,o,s){if(WebSquare.logEnableFlag){
var r="font-family: Tahoma, Verdana, arial,helvetica; font-size: 11px; color: #222222; line-height: normal;background-color:#FFFFFF; color:#222222; width:100%; height:19px; text-decoration:none; padding:3px 3px 1px 3px; cursor:pointer; ";!0===s&&(r+="border-top:1px dotted #9fbcd4; ");var a='<tr><td onmouseover=\'this.style.backgroundColor="b8d5f2";this.style.color="003a89";\' onmouseout=\'this.style.backgroundColor="#FFFFFF";this.style.color="222222";\' ';a+="style='"+r+"'";var n="";return o&&(n=" data-param='"+o+"'"),a+=" data-point='"+i+"' data-onclick='"+t+"'"+n+">"+e+"</td></tr>"}},h.contextMenuAddRow1=function(t,e,i,o){return h.contextMenuAddRow(t,e,i,o,!0)},h.hideContextMenu=function(t){if(WebSquare.logEnableFlag&&(WebSquare&&a.v&&a.v.browserCheck))if(a.v.browserCheck.moz||a.v.browserCheck.chrome||a.v.browserCheck.ieAllVersion)void 0!==(e=document.getElementById("_contextMenuLayer"))&&null!=e&&(e.style.visibility="hidden");else if(a.v.browserCheck.opera||a.v.browserCheck.safari){var e;if(!t.ctrlKey)void 0!==(e=document.getElementById("_contextMenuLayer"))&&null!=e&&(e.style.visibility="hidden")}}),h.dumpCSS=function(){if(WebSquare.logEnableFlag&&a.v.browserCheck.ie)for(var t=document.styleSheets,e=0;e<t.length;e++){var i=t[e];alert(i.href+"/n"+i.cssText)}},h.enableLog=function(){s.x.logEnableFlag=!0},h.disableLog=function(){h.clearLog(),s.x.logEnableFlag=!1},h.enableContextMenu=function(){s.x.logEnableContextMenu=!0},h.disableContextMenu=function(){h.hideContextMenu(),s.x.logEnableContextMenu=!1},h.debug=!1,h.debugKey="";var d={getScope:function(t){try{for(var e="string"==typeof t?document.getElementById(t):t,i=window;null!=e&&e!=document.body;){var o=WebSquare.idToUUID[e.getAttribute("id")];if(null!=o){var s=WebSquare.idCache[o];s&&s.scope_obj&&(i=s.scope_obj.scope);break}e=e.parentNode}return i}catch(t){n.w.printStackTrace(t,null,this)}},getFrame:function(t){try{return WebSquare.debug.getScope(t).scwin.$w.getFrame().id}catch(t){n.w.printStackTrace(t,null,this)}}}}},6046:function(t,e,i){"use strict";i.d(e,{f:function(){return n},V:function(){return l}});var o=i(1974),s=i(5948),r=i(5052),a=i(8683),n={checkMaxLength:function(t,e){if(void 0!==t&&void 0!==t.maxLength&&t.maxLength>-1&&e.length>t.maxLength){var i=e.length-t.maxLength;e=e.substring(i)}return e},checkAllowChar:function(t,e){var i=t,o="";if(void 0!==e&&null!=e&&""!=e){for(var s=new RegExp("["+e+"]"),r=0;r<i.length;r++){var a=i.charAt(r);null!=a.match(s)&&(o+=a)}return o}return i},checkIgnoreChar:function(t,e){var i=t,o="";if(void 0!==e&&null!=e&&""!=e){for(var s=new RegExp("["+e+"]"),r=0;r<i.length;r++){var a=i.charAt(r);null!=a.match(s)||(o+=a)}return o}return i},getSelection:function(t){var e={start:0,end:0};try{if("selectionStart"in t)e.start=t.selectionStart,e.end=t.selectionEnd;else{var i=document.selection.createRange().getBookmark(),o=t.createTextRange();o.moveToBookmark(i);var r=t.createTextRange();r.collapse(!0),r.setEndPoint("EndToStart",o);var a=r.text.length,n=o.text.length;e.start=a,e.end=a+n}}catch(t){s.w.printStackTrace(t)}return e},setSelection:function(t,e){try{if(t.setSelectionRange)t.focus(),t.setSelectionRange(e.start,e.end);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e.end),i.moveStart("character",e.start),i.select()}}catch(e){s.w.printStackTrace(e,null,this),null!=t&&null!=t.focus&&t.focus()}},getCaretPos:function(t){var e=0;try{if(a.D.isIE())for(var i=document.selection.createRange().duplicate(),o=t.createTextRange();i.compareEndPoints("StartToStart",o)>0;)i.moveStart("character",-1),e++;else e=t.selectionStart}catch(t){s.w.printStackTrace(t)}return e},setCaretPos:function(t,e){try{if(a.D.isIE()){var i=t.createTextRange();i.move("character",e),i.select()}else t.selectionStart=e,t.selectionEnd=e}catch(t){s.w.printStackTrace(t)}},checkString:function(t,e){var i=t.render.value;if(r.v.browserCheck.moz){if(0==e.charCode)return;if(-1!=t.maxLength&&i.length>=t.maxLength){
if(t.render.selectionStart!=t.render.selectionEnd)return;return void e.preventDefault()}}var o=e.charCode?e.charCode:e.keyCode;if(!(1==e.ctrlKey&&86==o||1==e.ctrlKey&&118==o)){var s=String.fromCharCode(o);if(void 0!==t.ignoreChar&&null!=t.ignoreChar&&""!=t.ignoreChar){var a=new RegExp("["+t.ignoreChar+"]");if(null!=s.match(a))return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault()}if(void 0!==t.allowChar&&null!=t.allowChar&&""!=t.allowChar){a=new RegExp("["+t.allowChar+"]");if(null==s.match(a))return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault()}if(""!=t.characterCase&&"upper"==t.characterCase&&e.keyCode>=97&&e.keyCode<=122&&(e.keyCode-=32),""!=t.characterCase&&"lower"==t.characterCase&&event.keyCode>=65&&event.keyCode<=90&&(event.keyCode+=32),"number"==t.valueType){if(0!=t.getCaretPos()&&(45==event.keyCode||43==event.keyCode))return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault();if(("+"==i.charAt(0)||"-"==i.charAt(0))&&0==t.getCaretPos())return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault();if(i.indexOf(".")>-1&&46==e.keyCode)return r.v.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault()}}},validateValue:function(t,e){return"true"==e.mandatory&&""==t.wq_trim()?(e.isValid="false","true"==e.displayMessage&&(e.inValidMessage=e.id+" has to be filled "),!1):-1!=e.minLength&&t.length<e.minLength?(e.isValid="false","true"==e.displayMessage&&(e.inValidMessage=e.id+" has to be same or more than "+e.minLength),!1):!(-1!=e.maxLength&&t.length>e.maxLength)||(e.isValid="false","true"==e.displayMessage&&(e.inValidMessage=e.id+" has to be same or less than "+e.maxLength),!1)},validateEffect:function(t,e){""!=e.invalid_background_color&&(e.render.style.backgroundColor=e.invalid_background_color),""!=e.invalid_color&&(e.render.style.color=e.invalid_color)},getPosition:function(t){var e=t.indexOf("."),i=0;if(e>-1){for(var o=t.substring(e),s=0;s<o.length;s++){"#"!=(a=o.charAt(s))&&"0"!=a||i++}i-=2*i}else for(var r=0;r<t.length;r++){var a;"0"==(a=t.charAt(r))&&i++}return i},checkComma:function(t){return-1!=t.indexOf(",")},formatCurrency:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";s||(s=","),r||(r=".");var a=new RegExp("\\[("+r+"*)\\]","g"),n=new RegExp("["+r+"]+[#0]+"),l=new RegExp("["+s+"]+[#0]+"),h=new RegExp("["+r+"][0-9]*"),d=e.match(a),u=(e=e.replace(a,"")).match(n),c=(u=null!=u?u.join(""):r).length-1,p=(e=e.replace(n,"")).match(l),g=(p=null!=p?p.join(""):s).length-1;e=e.replace(l,"");var m=new WebSquare.numberFormatter(t,s,r);if(o){null==d&&(d="[floor]");var f=t.match(h);if(u=r,f&&f.toString().length>=2)for(var b=f.toString().length,y=0;y<b-1;y++)u+="0"}m.setPrecision(c,d),m.cutZeroDecimal(u);var v=m.getValueWithDelimiter(s,g,o);o&&t.slice(-1)==r&&(v+=r),!o||"-"!==t&&"+"!==t||(v=t);var w=e.substr(0,e.indexOf("#")),S=e.substr((e.lastIndexOf("#")>e.lastIndexOf("0")?e.lastIndexOf("#"):e.lastIndexOf("0"))+1,e.length-1-e.lastIndexOf("#"));return w&&(v=w+v),S&&(v+=S),v},formatFloat:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return t+"";s||(s=","),r||(r=".");var a=new RegExp("\\[("+r+"*)\\]","g"),n=new RegExp("["+r+"]+[#0]+"),l=new RegExp("["+s+"]+[#0]+"),h=new RegExp("["+r+"][0-9]*"),d=e.match(a),u=(e=e.replace(a,"")).match(n),c=(u=null!=u?u.join(""):r).length-1,p=(e=e.replace(n,"")).match(l),g=(p=null!=p?p.join(""):s).length-1;e=e.replace(l,"");var m=new WebSquare.numberFormatter(t,s,r);if(o){null==d&&(d="[floor]");var f=t.match(h);if(u=r,f&&f.toString().length>=2)for(var b=f.toString().length,y=0;y<b-1;y++)u+="0"}m.setPrecision(c,d),m.cutZeroDecimal(u);var v=m.getValueWithDelimiter(s,g,o);o&&t.slice(-1)==r&&(v+=r),!o||"-"!==t&&"+"!==t||(v=t);var w=e.substr(0,e.indexOf("#")),S=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#"));return w&&(v=w+v),S&&(v+=S),v},formatEuroCurrency:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return""
;if(void 0===e||null==e||""==e)return parseFloat(t)+"";s||(s="."),r||(r=",");var a=new RegExp("\\[("+s+"*)\\]","g"),n=new RegExp("["+r+"]+[#0]+"),l=new RegExp("["+s+"]+[#0]+"),h=new RegExp("["+r+"][0-9]*"),d=e.match(a),u=(e=e.replace(a,"")).match(n),c=(u=null!=u?u.join(""):r).length-1,p=(e=e.replace(n,"")).match(l),g=(p=null!=p?p.join(""):s).length-1;e=e.replace(l,"");var m=new WebSquare.numberFormatter(t,s,r);if(o){null==d&&(d="[floor]");var f=t.match(h);if(u=r,f&&f.toString().length>=2)for(var b=f.toString().length,y=0;y<b-1;y++)u+="0"}m.setPrecision(c,d),m.cutZeroDecimal(u);var v=m.getValueWithDelimiter(s,g);o&&t.slice(-1)==r&&(v+=r),!o||"-"!==t&&"+"!==t||(v=t);var w=e.substr(0,e.indexOf("#")),S=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#"));return w&&(v=w+v),S&&(v+=S),v},formatRupeeCurrency:function(t,e,i,o,s,r){var a=e;if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";if(s||(s=","),r||(r="."),e.indexOf(";")>-1){for(var n=e.split(";"),l="",h=0;h<n.length;h++){var d=(l=n[h].wq_trim()).match(WebSquare.text.formatRupeeCRe1);if(d&&d.length>0){var u=d[0].replace("[","").replace("]","");if(new Function("return Number("+t+")"+u)())break}}if(l)return WebSquare.text.formatRupeeCurrency(t,l.replace(WebSquare.text.formatRupeeCRe1,""),i,o,s,r)}var c=new RegExp("\\[("+r+"*)\\]","g"),p=new RegExp("["+r+"]+[#0]+"),g=new RegExp("["+s+"]+[#0]+"),m=new RegExp("["+r+"][0-9]*"),f=e.match(c),b=(e=e.replace(c,"")).match(p),y=(b=null!=b?b.join(""):r).length-1,v=(e=e.replace(p,"")).substr(0,e.indexOf("#")),w=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#")),S=e.match(g);S=null!=S?S.join(""):s,e=e.replace(g,"");var C=new WebSquare.numberFormatter(t,s,r);if(o){null==f&&(f="[floor]");var x=t.match(m);if(b=r,x&&x.toString().length>=2){var _=x.toString().length;for(h=0;h<_-1;h++)b+="0"}}C.setPrecision(y,f),C.cutZeroDecimal(b);var I=C.getFormattedValue(a);return o&&t.slice(-1)==r&&(I+=r),!o||"-"!==t&&"+"!==t||(I=t),v&&(I=v+I),w&&(I+=w),I},formatTengeCurrency:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";s||(s=" "),r||(r="-");var a="";t.length>1&&("+"==t.charAt(0)||"-"==t.charAt(0))&&(a=t.charAt(0),t=t.substr(1));var n=new RegExp("\\[("+r+"*)\\]","g"),l=new RegExp("["+r+"]+[#0]+"),h=new RegExp("["+s+"]+[#0]+"),d=new RegExp("["+r+"][0-9]*"),u=e.match(n),c=(e=e.replace(n,"")).match(l),p=(c=null!=c?c.join(""):r).length-1,g=(e=e.replace(l,"")).match(h),m=(g=null!=g?g.join(""):s).length-1;e=e.replace(h,"");var f=new WebSquare.numberFormatter(t,s,r);if(o){null==u&&(u="[floor]");var b=t.match(d);if(c=r,b&&b.toString().length>=2)for(var y=b.toString().length,v=0;v<y-1;v++)c+="0"}f.setPrecision(p,u),f.cutZeroDecimal(c);var w=f.getValueWithDelimiter(s,m);o&&t.slice(-1)==r&&(w+=r),!o||"-"!==t&&"+"!==t||(w=t);var S=e.substr(0,e.indexOf("#")),C=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#"));return S&&(w=S+w),C&&(w+=C),a+w},formatDate:function(t,e,i,o){if(void 0!==i&&null!=i&&""!=i||(i="yyyyMMdd"),!o&&t.length!==i.length)return t;void 0!==e&&null!=e&&""!=e||(e="yyyy/MM/dd");for(var s=0;s<t.length&&s<i.length;s++){var r=i.charAt(s),a=t.charAt(s);"yMdHmS".indexOf(r)>=0&&(e=e.replace(r,a))}if(e.indexOf("E")>=0){var n=WebSquare.date._parseDate(t,i);if(WebSquare.date._getDay(n.slice(0,3).join(""),!1)>=0){var l=new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5]);e=WebSquare.date.getFormattedDate(l,e)}else e=e.wq_replaceAll("E","")}return o&&(e=(e=e.replace(/(\{|\}|\[|\]|\/|\?|\.|\,|\;|\:|\)|\*|\~|\`|\!|\^|\-|\_|\+|\<|\>|\@|\#|\$|\%|\&|\\|\=|\(|\'|\"|\s)(y|M|d|H|m|S)/g,"")).replace(/(y|M|d|H|m|S)/g,"")),e},formatTime:function(t,e,i){if(void 0!==i&&null!=i&&""!=i||(i="HHmmss"),void 0!==e&&null!=e&&""!=e||(e="HH:mm"),""==t)return"";for(var o=0;o<t.length&&o<i.length;o++){var s=i.charAt(o),r=t.charAt(o);"Hms".indexOf(s)>=0&&(e=e.replace(s,r))}return e=e.replace(/H|m|s/g,"0")},formatTextMask:function(t,e,i){if(void 0===e||null==e||""==e)return t
;if(void 0===t||null==t||""==t)return"";if(i)var o=new RegExp("[^"+i+"]","g"),s=t.replace(o,"");else s=t.replace(/\D/g,"");if(void 0===s||null==s||""==s)return"";for(var r=e,a=0,n=0;n<r.length;n++)if("#"==r[n]&&(r=n>0?r.substr(0,n)+s[0]+r.substr(n+1):s[0]+r.substr(n+1),s.length>0&&(s=s.substr(1)),0==s.length)){a=n+1;break}return a==r.length-1&&"#"!==r[a]?r=r.substr(0,a+1):0!==a&&(r=r.substr(0,a)),r},formatReverseTextMask:function(t,e,i){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";for(var o=0;o<e.length;o++)"#"==e[o]&&1;if(i)var s=new RegExp("[^"+i+"]","g"),r=t.replace(s,"");else r=t.replace(/\D/g,"");if(void 0===r||null==r||""==r)return"";var a=e,n=0;for(o=a.length-1;o>=0;o--)if("#"==a[o]&&(a=o>0?a.substr(0,o)+r[r.length-1]+a.substr(o+1):r[r.length-1]+a.substr(o+1),0==(r=r.substr(0,r.length-1)).length)){n=o;break}return 1==n&&"#"!==a[0]?a=a.substr(0):0!==n&&(a=a.substr(n)),a},formatNumberMask:function(t,e,i){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";var o=t.replace(/\D/g,"");if("-"!==t&&(void 0===o||null==o||""==o))return"";for(var s=o.length-1;s>=0&&"0"==o[s];s--);if(o=o.substr(0,s+1),/^[0\D]+$/g.test(t)&&"0"==e[0]){var r=0;"-"==t[0]&&(r=1);for(s=r;s<t.length&&("0"==t[s]&&"0"==e[s]);s++);o=1==r?t.substr(1,s-1):t.substr(0,s)}if("-"!==t&&(void 0===o||null==o||""==o))return"";var a=e;if("-"==t[0]&&1==t.length)a=t[0];else{var n=0;for(s=0;s<a.length;s++)if(("#"==a[s]||"0"==a[s])&&(a=s>0?a.substr(0,s)+o[0]+a.substr(s+1):o[0]+a.substr(s+1),o.length>0&&(o=o.substr(1)),0==o.length)){n=s+1;break}for(;n<a.length;){if("#"==a[n]){for(n-=1;!/\d/g.test(a[n]);)n-=1;a=a.substr(0,n+1);break}n+=1}}return"-"==t[0]&&1!=t.length?t[0]+a:a},formatReverseNumberMask:function(t,e){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";for(var i=0,o=0;o<e.length;o++)"#"==e[o]&&(i+=1),"0"==e[o]&&(i+=1);var s=t.replace(/\D/g,"");if("-"!==t&&(void 0===s||null==s||""==s))return"";for(o=0;o<s.length&&"0"==s[o];o++);if(s=s.substr(o),/^[0\D]+$/g.test(t)&&(s="0"),s.length>i&&(s=s.substr(0,s.length-1)),"-"!==t&&(void 0===s||null==s||""==s))return"";var r=e;if("-"==t[0]&&1==t.length)r=t[0];else{var a=0;for(o=r.length-1;o>=0;o--)if(("#"==r[o]||"0"==r[o])&&(r=o>0?r.substr(0,o)+s[s.length-1]+r.substr(o+1):s[s.length-1]+r.substr(o+1),0==(s=s.substr(0,s.length-1)).length)){a=o-1;break}for(;a>=0;){if("#"==r[a]){for(;!/\d/g.test(r[a]);)a+=1;r=r.substr(a);break}a-=1}}return"-"==t[0]&&1!=t.length?t[0]+r:r},formatText:function(t,e){if(t+="",void 0===e||null==e||""==e)return t;for(var i="",o=t.length-1,s=e.length-1;s>=0&&o>=0;s--){var r=e.charAt(s);"#"!=r?i=r+i:(i=t.charAt(o)+i,o--)}return o>-1&&o<t.length&&(i=t.substring(0,o+1)+i),s>-1&&-1==e.substring(0,s+1).indexOf("#")&&(i=e.substring(0,s+1)+i),i},format:function(t,e,i,o){return"number"==i?WebSquare.text.formatCurrency(t,e):"currency"==i?WebSquare.text.formatEuroCurrency(t,e,o):"date"==i?WebSquare.text.formatDate(t,e,o):"time"==i?WebSquare.text.formatTime(t,e,o):WebSquare.text.formatText(t,e)},getValidString:function(t,e,i,o){return t},unformatCurrency:function(t,e){for(var i="",o=e.length,s=0;s<o;s++){var r=e.charAt(s);","!=r&&("$"==r?-1==t.indexOf("$")&&(i+=r):"\\"==r?-1==t.indexOf("\\")&&(i+=r):"+"==r?-1==t.indexOf("+")&&(i+=r):"-"==r?-1==t.indexOf("-")&&(i+=r):i+=r)}return i},unformatDate:function(t,e){if(void 0!==t&&null!=t&&""!=t||(t="yyyy/MM/dd"),e.length!=t.length)return e;var i="",o=t.indexOf("yyyy"),s=t.indexOf("MM"),r=t.indexOf("dd");return-1!=o&&(i+=e.substr(o,4)),-1!=s&&(i+=e.substr(s,2)),-1!=r&&(i+=e.substr(r,2)),i},unformatDate2:function(t,e,i){if(void 0!==t&&null!=t&&""!=t||(t="yyyy/MM/dd"),e.length!==t.length)return e;void 0!==i&&null!=i&&""!=i||(i=t.replace(/(\{|\}|\[|\]|\/|\?|\.|\,|\;|\:|\)|\*|\~|\`|\!|\^|\-|\_|\+|\<|\>|\@|\#|\$|\%|\&|\\|\=|\(|\'|\"|\s)/g,"")),e=e.replace(/[a-zA-Z]+/g,"");for(var o=0;o<t.length&&o<e.length;o++){var s=t.charAt(o),r=e.charAt(o);"yMdHmS".indexOf(s)>=0&&(i=i.replace(s,r))}return i
},unformatTime:function(t,e){if(void 0!==t&&null!=t){if(e.length!=t.length)return e;""==t&&(t="HH:mm:SS");var i="",o=t.indexOf("HH"),s=t.indexOf("mm"),r=t.indexOf("SS");return-1!=o&&(i+=e.substr(o,2)),-1!=s&&(i+=e.substr(s,2)),-1!=r&&(i+=e.substr(r,2)),i}},unformatText:function(t,e){if(void 0===t||null==t||""==t)return e;t=t.substring(t.indexOf(","));for(var i="",o=e.length-1,s=t.length-1;s>=0&&o>=0;s--){var r=t.charAt(s),a=e.charAt(o);("#"==r&&"#"!=a||r!=a)&&(i=a+i),o--}return o>-1&&(i=e.substring(0,o+1)+i),i},unformat:function(t){if(void 0===t.formatArray||void 0===t.formatArray.displayFormat||null==t.formatArray.displayFormat)return t.render.value;if("format"!=t.status)return t.render.value;t.status="unformat";var e=t.render.value,i=t.formatArray.displayFormat,o=t.valueType;return void 0!==o&&null!=o&&"number"==o?WebSquare.text.unformatCurrency(i,e):void 0!==o&&null!=o&&"date"==o?WebSquare.text.unformatDate(i,e):void 0!==o&&null!=o&&"time"==o?WebSquare.text.unformatTime(i,e):WebSquare.text.unformatText(i,e)},dynamicMask:function(t,e,i){try{for(var o=0,r=t.replace(/[^a-z^A-Z^0-9]/g,""),a={};o<e.length;){var n=e[o],l=n.replace(/[^#^S^X]/g,"").length,h=e[o+1],d=0;if(o++,d=h?h.replace(/[^#^S^X]/g,"").length:(h=e[o-1]).replace(/[^#^S^X]/g,"").length+1,r.length<=l){a=WebSquare.text.maskit(t,n,i);break}if(l<r.length&&d>=r.length){a=WebSquare.text.maskit(t,h,i);break}}return a}catch(t){s.w.printStackTrace(t,null,this)}},maskit:function(t,e,i){try{t=t||"",e=e||"";for(var o=0,r=0,a="",n="",l=0;o<e.length&&r<t.length;){var h=i[c=e[o]],d=t[r];h&&!h.escape?(h.pattern.test(d)&&(a+=d,n+=d,o++),r++):(h&&h.escape&&(c=e[++o]),a+=c,d===c&&r++,o++)}for(var u="";o<e.length;){var c;if(i[c=e[o]])break;l=1,u+=c,o++}return{orgValue:n,value:a+u,position:l}}catch(t){s.w.printStackTrace(t,null,this)}},deleteMaskChar:function(t,e,i){try{var o=i.selectionStart,r=i.selectionEnd;if(0==o&&0==r)return;if(o==r&&8==t.keyCode){for(var a=i.value,l=a.charAt(o-1),h=0,d=0,u=1,c=o-1;c>=0;c--)0==/^[0-9a-zA-Z]/.test(a.charAt(c))&&h++;if(0==/^[0-9a-zA-Z]/.test(l))for(c=o-1;c>=0&&0==/^[0-9a-zA-Z]/.test(a.charAt(c));c--)u++;u>1?o+u:o;var p=a.substring(0,o-u)+a.substring(o,a.length),g=n.dynamicMask(p,e._editFormat,e._editTokens);i.value=g.value,e._editValue=g.orgValue;for(c=o-2;c>=0;c--)0==/^[0-9a-zA-Z]/.test(g.value.charAt(c))&&d++;var m=o+(d-h)-1;i===document.activeElement&&i.setSelectionRange(m,m),WebSquare.event.stopEvent(t)}}catch(t){s.w.printStackTrace(t,null,this)}},BASE64Encoder:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Array,o=0;o<e.length;o++)i[o]=e.charAt(o);var s=new Array;o=0;65279!=t.charCodeAt(0)&&(t=String.fromCharCode(65279)+t);var r=t.length;for(r%3==1&&(t+=String.fromCharCode(0)+String.fromCharCode(0)),r%3==2&&(t+=String.fromCharCode(0));o+2<t.length;)s[s.length]=i[t.charCodeAt(o)>>10],s[s.length]=i[(1008&t.charCodeAt(o))>>4],s[s.length]=i[(15&t.charCodeAt(o))<<2|t.charCodeAt(o+1)>>14],s[s.length]=i[(16128&t.charCodeAt(o+1))>>8],s.length%76==0&&(s[s.length]="\n"),s[s.length]=i[(252&t.charCodeAt(o+1))>>2],s[s.length]=i[(3&t.charCodeAt(o+1))<<4|t.charCodeAt(o+2)>>12],s[s.length]=i[(4032&t.charCodeAt(o+2))>>6],s[s.length]=i[63&t.charCodeAt(o+2)],s.length%76==0&&(s[s.length]="\n"),o+=3;return r%3==1&&(s.pop(),s.pop(),s.pop(),s.pop(),28==r&&s.pop(),s[s.length-1]="="),r%3==2&&(s[s.length-1]=s[s.length-2]="="),s.join("")},BASE64Decoder:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Array,o=0;o<e.length;o++)i[e.charAt(o)]=o;var s=new Array;o=0;t=(t=t.replace(/\n|\r/g,"")).replace(/=/g,"");for(var r=parseInt(3*t.length/4)/2;o<t.length;)s[s.length]=i[t.charAt(o)]<<10|i[t.charAt(o+1)]<<4|i[t.charAt(o+2)]>>2,s[s.length]=(3&i[t.charAt(o+2)])<<14|i[t.charAt(o+3)]<<8|i[t.charAt(o+4)]<<2|i[t.charAt(o+5)]>>4,s[s.length]=(15&i[t.charAt(o+5)])<<12|i[t.charAt(o+6)]<<6|i[t.charAt(o+7)],o+=8;s=s.slice(1,r);var a="";try{a=String.fromCharCode.apply(document,s)}catch(t){
for(o=0;o<s.length;o++)a+=String.fromCharCode(s[o])}return a},BASE64Encode:function(t){try{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",o=0;t=WebSquare.text.UTF8Encode(t);do{var r=t.charCodeAt(o++),a=t.charCodeAt(o++),n=t.charCodeAt(o++),l=(3&(r=r||0))<<4|(a=a||0)>>4&15,h=(15&a)<<2|(n=n||0)>>6&3,d=63&n;a?n||(d=64):h=d=64,i+=e.charAt(r>>2&63)+e.charAt(l)+e.charAt(h)+e.charAt(d)}while(o<t.length);return i}catch(t){s.w.printStackTrace(t)}},BASE64Decode:function(t){try{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",o=0;do{var r=e.indexOf(t.charAt(o++)),a=e.indexOf(t.charAt(o++)),n=e.indexOf(t.charAt(o++)),l=e.indexOf(t.charAt(o++)),h=(63&r)<<2|a>>4&3,d=(15&a)<<4|n>>2&15,u=(3&n)<<6|63&l;i+=String.fromCharCode(h)+(d?String.fromCharCode(d):"")+(u?String.fromCharCode(u):"")}while(o<t.length);return WebSquare.text.UTF8Decode(i)}catch(t){s.w.printStackTrace(t)}},UTF8Encode:function(t){try{t=t.replace(/\r\n/g,"\n");for(var e,i="",o=0;o<t.length;o++)(e=t.charCodeAt(o))<128?i+=String.fromCharCode(e):e>127&&e<2048?(i+=String.fromCharCode(e>>6|192),i+=String.fromCharCode(63&e|128)):(i+=String.fromCharCode(e>>12|224),i+=String.fromCharCode(e>>6&63|128),i+=String.fromCharCode(63&e|128));return i}catch(t){s.w.printStackTrace(t)}},UTF8Decode:function(t){try{for(var e="",i=0,o=0;i<t.length;)(o=t.charCodeAt(i))<128?(e+=String.fromCharCode(o),i++):o>191&&o<224?(e+=String.fromCharCode((31&o)<<6|63&t.charCodeAt(i+1)),i+=2):(e+=String.fromCharCode((15&o)<<12|(63&t.charCodeAt(i+1))<<6|63&t.charCodeAt(i+2)),i+=3);return e}catch(t){s.w.printStackTrace(t)}},BASE64URLEncoder:function(t){return escape(WebSquare.text.BASE64Encoder(t))},BASE64URLDecoder:function(t){return WebSquare.text.BASE64Decoder(unescape(t))},fillZero:function(t,e){var i,o=t+"";if(isNaN(o))return t;if(o.length>=e)return o;for(i=e-o.length;i>0;)switch(i){case 1:i=0,o="0"+o;break;case 2:i=0,o="00"+o;break;case 3:i=0,o="000"+o;break;case 4:i=0,o="0000"+o;break;case 5:i=0,o="00000"+o;break;case 6:i=0,o="000000"+o;break;case 7:i=0,o="0000000"+o;break;case 8:i=0,o="00000000"+o;break;case 9:i=0,o="000000000"+o;break;case 10:i=0,o="0000000000"+o;break;case 11:i=0,o="00000000000"+o;break;case 12:i=0,o="000000000000"+o;break;case 13:i=0,o="0000000000000"+o;break;case 14:i=0,o="00000000000000"+o;break;case 15:i=0,o="000000000000000"+o;break;default:i-=15,o="000000000000000"+o}return o},isKorean:function(t){if(null!=t&&t.length>0){for(var e=0,i=0;i<t.length;i++)e|=WebSquare.text.getLocale(t.charAt(i));if(0==(-4&e))return!0}return!1},getLocale:function(t){var e=0;if(t.length>0){var i=t.charCodeAt(0);e=i>=44032&&i<=55203?1:i>=4352&&i<=4601||i>=12593&&i<=12686?2:i>=48&&i<=57?4:i>=32&&i<=47||i>=58&&i<=64||i>=91&&i<=96||i>=123&&i<=126?8:i>=65&&i<=90?16:i>=97&&i<=122?32:48}return e},URLEncoder:function(t){if("number"==typeof t)return t;var e="";if(null==t||0==t.length)return e;for(var i=0;i<t.length;i++){var o="";if(" "==t.charAt(i))e+="+";else if(t.charCodeAt(i)>=48&&t.charCodeAt(i)<=57||t.charCodeAt(i)>=65&&t.charCodeAt(i)<=90||t.charCodeAt(i)>=97&&t.charCodeAt(i)<=122||"@"==t.charAt(i)||"."==t.charAt(i)||"-"==t.charAt(i)||"*"==t.charAt(i)||"_"==t.charAt(i))e+=t.charAt(i);else if(null!=(o=WebSquare.text.getEUCKR(t.charCodeAt(i)))&&o>=42145)e+="%"+(o>>8).toString(16)+"%"+(255&o).toString(16);else if(t.charCodeAt(i)<=126){var s=t.charCodeAt(i).toString(16);1==s.length?e+="%0"+s:e+="%"+s}else e+="%3f"}return e},URLDecoder:function(t){var e="";if(null==t||0==t.length)return e;for(var i=0;i<t.length;i++)if("+"==t.charAt(i))e+=" ";else if("%"!=t.charAt(i))e+=t.charAt(i);else if(i+5<=t.length){var o=t.substring(i+1,i+3);"%"==t.charAt(i+3)&&parseInt(o,16)>160?(o=(o+=t.substring(i+4,i+6)).toUpperCase(),e+=String.fromCharCode(WebSquare.text.getUNICODE(parseInt(o,16))),i+=5):(e+=String.fromCharCode(parseInt(o,16)),i+=2)}else if(i+2<=t.length){o=t.substring(i+1,i+3);e+=String.fromCharCode(parseInt(o,16)),i+=2}else e+=t.charAt(i);return e},
getEUCKR:function(t){WebSquare.text.EUCKR||WebSquare.text.setEUCKR(),WebSquare.text.UNICODE||WebSquare.text.setUNICODE();for(var e=16,i=0,o=WebSquare.text.UNICODE.length-1,s=Math.round((i+o)/2);e-- >0;)if(WebSquare.text.UNICODE[s]>t)o=s,s=Math.round((i+o)/2);else{if(!(WebSquare.text.UNICODE[s]<t))return WebSquare.text.EUCKR[s];i=s,s=Math.round((i+o)/2)}return""},getUNICODE:function(t){WebSquare.text.EUCKR||WebSquare.text.setEUCKR(),WebSquare.text.UNICODE||WebSquare.text.setUNICODE();for(var e=16,i=0,o=WebSquare.text.EUCKR.length-1,s=Math.round((i+o)/2);e-- >0;)if(WebSquare.text.EUCKR[s]>t)o=s,s=Math.round((i+o)/2);else{if(!(WebSquare.text.EUCKR[s]<t))return WebSquare.text.UNICODE[s];i=s,s=Math.round((i+o)/2)}return 63},isFinalConsonant:function(t){var e=t.charCodeAt(t.length-1);return!(e<44032||e>55197)&&(e-16)%28!=0},arraySort:function(t,e){for(var i=new Array,o=0;o<t.length;o++)i.push(t[o]);return void 0===e?i.sort():i.sort(e)},setEUCKR:function(){for(var t=[42145],e=1;e<94;e++)t[e]=t[e-1]+1;for(t[e]=t[e-1]+2979,e++;e<2444;e++)t[e]=t[e-1]+((e-188)%94==0?163:1);WebSquare.text.EUCKR=t},setUNICODE:function(){for(var t=[12593],e=1;e<94;e++)t[e]=t[e-1]+1;for(t[e]=t[e-1]+31346,e++;e<2444;e++)t[e]=t[e-1]+"#%%###(#######$####%&*#$##)#%&-$)&&6#%%#$(#$###%###&&*#$##)##$%#*#$##&%&&+$+#%%#$$%##$$#(#%&$(#$$)&&+%#)#%&*#$$)&&+$+#%%###'##$$#(#%&.#)5+#%&*#$+&&6#%%##)#$$)>#%%#$(#$$#&$##$&$(#$##&%#%&*#$##)#)R##$&*#$##)#%.%$)&&-#'%>#%$$*#$$##'#).#)#6)&&*#&)>#%&)##$$#(*.#)#%&*#%*&&*#->#%$$$'##$$&A#%&*#$$)##$%###(#$####$$##%&*#$##)#%&*'E#$#&$#'#$##(##%&*#$##)#%&*#%#%&&:#%&$(#$$'##&&.F&&*#$+#%&+$$)#%%#*#$$)6*>&&*#-#)*#&)#%&##(#$$#&$&&6#%&$(#$$'$##$%####&##$####&##%&*#$##)Z##$%#$#'#$$$%$#%&*#$##)&&.#)&:#%%#$$&#$$$$%&&66*&&*#$+>#%&*#$$)6*7)&&+$$)&&*')#%%#$(#$$)>#%%#*#$###(#%&*#$##(##%&*#$##a#%&$#'#$##(##%&*#$##)6F#%&/)*6>&V#%&)#'E>&&*#&E#%%#*#$+&&*#-&&*#$$)#%&*#$###&###%&*#$##)#%1$E#%&*#$##(##%&*#$$)#%&*#$##)&/$+#%&*#$$)&3=*&&*#$$)&&+$$)#%&*#$$)6*>#%&*%$)#%&*#$$)#%&*#$$#%#@#%&*#$$)#%$####(#$$#%$##%&*#$###(#)/E#%&$(#$$#'##%&*#$##)#%&-##$'>#$#&$(#$$)&2#E&&+$$)&&+$+##$%###(#$$&$#&&+$+>&&6&&*%+&&*%G#%%#$(#$##$$%####%####'#$$&%#%&*#$##&%#%/I#%%#$(#$$#(#%%#*#$##)#%&+$##&%&:##$&*#$$)&2*6*#%&*#-&:#%%###(#$$&#$*.*>#%&/)&&*%$)#%&*#$G#%&$(#$$##'#%&$(#$##(##%&*#$##)#1J#%%#*%##)7)#1#$##E#%&*#&a>7)#%&*%$}7)&&*#I#%&*#$$)#$#%###(#$##&%#%&*#$##)#%&*#$$)&&*')####%#$#'#$##'$#%&*#$##)#%&*#$##)&&/)##$&$(#$$&%#%&/)&&*%#*&&*#$+#%&*#$$)#%%#*#$$$$#$6*#%&*')#%&*#$$)#)*%$)#%&#)#$$E#%%#)##$$'$#$#&*#%#(##%&*#%#>E#%&$(#%#)&&V:#%%#$(#&)#%2*6*&&*#->#%&*#&)6*>&O)#%&$'##-&&*.#%&*#$$)#%##$##'##$##&#$#%&*#$##)#%&%'#$$&$#&&+-#%#$###(######$$$#%&*#$$)##$&$#'#####&###&&*#$#*#%&##$%##$$$'#%&*#$##)#%.%$)#%&*#$$)#%&*#$$)#%&##(#$$)#%&*#%#)#%&*#&)#%&*#$$)#%&*#$$$'#%&($#$$#######&&*%+#%&##'##$###&$#%$##$(#$###(#%&*#$##)#%$$*')&&6#%&$(#$$#(#%&*#$$)&&*#%#)>#%&$(#$$##&##)+$$)6#)&&*#$$)#%3)#%&##(#$$)6*>#%&*#$+&&*.#%&*#$$E#%%#$(#$$#%#$#%$$%'#$##)#%&*#$##)&3E#%&*#$##)7)6F#%&*#$$$'#).*6*&&*#B)#%&*#&)6#E>>2%$E#%&*#&#'##%$$*#$###(#%&*#$##)&$$*'E#%&*#$##)#%&*#$$)&2*&3)#%&*#$$)&&/E&&*#$$)2.#%&*#$$)6*&:&&*#$$)&&*')#%&*#$$E#%%##)#$$)#%&*#$$)#%&*#$##)#6E#%%#*#$##)#%&*#$$)&&*#$##)>#%&*#$$)#%&*')7)*6>#%&*#$$)&&/)7)#%&*#$$)&&*.#%&*#&E#%&*#$$)#%&#)#$##)#%&*#$##)7E#%&$(#$##)#%&*#$$)&2*&:#%&*#$$'$&:>&1$)>#%&*#$$)6*>#%&*#&)&&*')#%%#$(#$+&&*#-#%&*#$$)##$&$(#$##&%#%&*#$##)#Y#%&*#$##)#%&*#$$)&&*#%#)*+$+#%&*#$$)7E&:&&+$+#%%#$(#$$)7E&&*%+&&*%$)&&*#$G#%&*#$$)#%&'%#$$)#%&*#$##)7E#%&$(#$$)#%&*#$$)#%&*#$##)&&+-#%&'%#$$&%#%&-$)#%1$)#%&+$$)&&+$+#%&'%%$)&&*')#%&/)#%&*#$$)#%&*%$)#%$###)#$$&%&&*#&)#%&*#$$".substr(e-95,1).charCodeAt(0)-34;WebSquare.text.UNICODE=t}},l=function(t,e,i){this.sign="",this.integer=new Array,this.decimal=new Array,this.delimiter=e||",",this.decimalDelimiter=i||".";var o="",s="",r=t.split(this.decimalDelimiter);1==r.length?(o=r[0],s=""):r.length>1&&(o=r[0],s=r[1]),"+"!=o.charAt(0)&&"-"!=o.charAt(0)||(this.sign=o.charAt(0),o=o.substr(1));var a=o.match(new RegExp("[^0]+[0-9]*"));o=null!=a?a.join(""):"0"
;for(var n=0;n<o.length;n++)this.integer.push(parseInt(o.charAt(n)));for(n=0;n<s.length;n++)this.decimal.push(parseInt(s.charAt(n)))};l.prototype.getValue=function(){var t="";return t+=this.sign,this.integer.length>0&&(t+=this.integer.join("")),this.decimal.length>0&&(t+=".",t+=this.decimal.join("")),t},l.prototype.setPrecision=function(t,e){null==t&&(t=0),null==e&&(e="[round]");var i=0;"[round]"==e?i=5:"[floor]"==e?i=0:"[ceil]"==e&&(i=9);var o=this.decimal.length;if(t+1>o)for(var s=0;s<t+1-o;s++)this.decimal.push(0);else this.decimal=this.decimal.slice(0,t+1);var r=0;this.decimal[t]+i>9&&(r=1);for(s=t-1;s>=0;s--)this.decimal[s]+=r,this.decimal[s]>9?(r=1,this.decimal[s]-=10):r=0;if(this.decimal.pop(),0!=r)for(s=this.integer.length-1;s>=0;s--)this.integer[s]+=r,this.integer[s]>9?(r=1,this.integer[s]-=10):r=0;if(0!=r){this.integer.push(0);for(s=this.integer.length-1;s>=1;s--)this.integer[s]=this.integer[s-1];this.integer[0]=1}},l.prototype.getValueWithDelimiter=function(t,e,i){var o="";if(null==e||e<=0)return this.getValue();if(o+=this.sign,this.integer.length>0)for(var s=this.integer.length%e,r=0,a=0;a<this.integer.length;a++)(a+1)%e==s&&(o+=this.integer.slice(r,a+1).join(""),a+1<this.integer.length&&(o+=t||this.delimiter),r=a+1);return this.decimal.length>0&&(o+=this.decimalDelimiter,o+=this.decimal.join("")),"-0"!==o||i||(o="0"),o},l.prototype.getFormattedValue=function(t){var e="";if(!t)return this.getValue();e+=this.sign;var i=[];o.x.extend(i,this.integer);for(var s=[],r=(t.indexOf(this.decimalDelimiter)>-1?t.substring(0,t.indexOf(this.decimalDelimiter)):t.substring(0)).split(this.delimiter).reverse(),a=0;a<this.integer.length&&0!=i.length;a++){for(var n=r[a%r.length].length,l=[],h=0;h<n;h++)l.push(i.pop());s.push(l.reverse().join(""))}return e+=s.reverse().join(this.delimiter),this.decimal.length>0&&(e+=this.decimalDelimiter,e+=this.decimal.join("")),e},l.prototype.cutZeroDecimal=function(t){for(var e=t.lastIndexOf("0")-1,i=this.decimal.length-1;i>=0&&0==this.decimal[i]&&i>e;)this.decimal.pop(),i--}},8683:function(t,e,i){"use strict";i.d(e,{D:function(){return f}});var o,s,r,a,n=i(484),l=i(2137),h=i(7757),d=i.n(h),u=i(1974),c=i(1477),p=i(5948),g=i(5052),m=i(9075),f={loadedUserComponent:{},loadedUserComponentPluginName:{},loadedUserComponentURL:{},loadedInheritComponent:{},loadedInheritComponentPluginName:{},loadedInheritComponentURL:{}},b=window.document;f._initImport=function(){f.getTopWindow.getAttribute=WebSquare.session.getAttribute,f.getTopWindow.removeAttribute=WebSquare.session.removeAttribute,f.getTopWindow.removeSession=WebSquare.session.removeSession,f.getTopWindow.setAttribute=WebSquare.session.setAttribute},u.x._initImportList.push("util"),f.isEmptyObject=function(t){try{for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}catch(t){p.w.printStackTrace(t,null,this)}},f.documentWrite=function(t,e){void 0!==e&&null!=e&&""!=e?b.getElementById(e).innerHTML=t:b.write(t)},f.numericSort=function(t,e){return parseInt(t,10)-parseInt(e,10)},f.getNumber=function(t){var e=t+"",i=e.replace(/,/g,"");return null!=i.match(/[^0-9.-]/g)?(m.k.printLog("Not a Number :"+e),NaN):(""==i&&(i="0"),-1==i.indexOf(".")?parseInt(i,10):parseFloat(i))},f.setNumber=function(t){if(null!=t){var e=t+"";if(0!=e.length){var i="",o="",s="";"+"!=e.substring(0,1)&&"-"!=e.substring(0,1)||(i=e.substring(0,1),e=e.substring(1)),e.indexOf(".")>-1&&(s=e.substring(e.indexOf(".")),e=e.substring(0,e.indexOf(".")));for(var r=e.length-3;r>=1;r-=3)o=","+e.substring(r,r+3)+o;return i+(o=e.substring(0,r+3)+o)+s}}},f.parseInt=function(t,e){var i=parseInt(t,10);return void 0!==e&&!isNaN(e)&&isNaN(i)?e:i},f.parseFloat=function(t,e){var i=parseFloat(t);return void 0!==e&&!isNaN(e)&&isNaN(i)?e:i},f.parseArray=function(t){for(var e="[",i=0;i<t.length;i++){var o=t[i];"string"==typeof o&&(o.indexOf('"')>=0&&(o=o.replaceAll('"','\\"')),o='"'+o+'"'),i<t.length-1?e+=o+",":e+=o}return e+="]"},f.getDate=function(t){var e=t+""
;if(10==e.length){return e.replace(/[^0-9]/g,"")}return e},f.setDate=function(t){var e=t+"";if(8==e.length)return e.substring(0,4)+"/"+e.substring(4,6)+"/"+e.substring(6,8)},f.getTime=function(t){var e=t+"";if(5==e.length||8==e.length){return e.replace(/[^0-9]/g,"")}return e},f.setTime=function(t){var e=t+"";if(4==e.length)return e.substring(0,2)+":"+e.substring(2,4)},f.getAddress=function(t){var e,i=WebSquare.util.getFrameFromPoint(t),o=null;i&&(o=WebSquare.idCache[i]),null!=o&&o.frameDoc?e=o.getURL(o.getSrc(),{msaName:o._getMsaName(),baseURI:!0}):(e=location.toString(),WebSquare.util.isEncodeParameter()&&!WebSquare.net.paramObj.w2xPath&&(WebSquare.util.getEncodeParameterOption("onlyParam")||(e=(e=e.replace(location.search,WebSquare.util.decodeParameter(location.search))).replace(location.hash,WebSquare.util.decodeParameter(location.hash))))),prompt(e,e)},f.getRQ=function(t){try{var e,i=f.getFrameFromPoint(t),o=null;i&&(o=u.x.idCache[i]);var s=null!=o&&o.frameDoc;s?e=o.getURL(o.getSrc(),{msaName:o._getMsaName(),baseURI:!0}):(e=location.toString(),f.isEncodeParameter()&&!WebSquare.net.paramObj.w2xPath&&(f.getEncodeParameterOption("onlyParam")||(e=(e=e.replace(location.search,f.decodeParameter(location.search))).replace(location.hash,f.decodeParameter(location.hash)))));var r=encodeURIComponent(WebSquare.text.BASE64Encode(e)),a="";a=WebSquare.domain?(a="?domain="+WebSquare.text.URLEncoder(WebSquare.domain))+"&qrAddr="+r:"?qrAddr="+r;var n=g.v.getConfiguration("viewSourceURL");n||(n=g.v.getURL(c.d.inquiresPath("message/QR.html"),{msaName:s?o._getMsaName():"",baseURI:!0})),window.open(n+a,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")}catch(t){p.w.printStackTrace(t,null,this)}},f.viewSource=function(t){var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?scope="+e);var s=g.v.getConfiguration("viewSourceURL");s||(s=u.x.baseURI+c.d.inquiresPath("message/viewSource.html")),window.open(s+o,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.viewCollection=function(t){var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?scope="+e);var s=g.v.getConfiguration("viewCollectionURL");s||(s=u.x.baseURI+c.d.inquiresPath("message/viewCollection.html")),window.open(s+o,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.viewInstance=function(){var t="";WebSquare.domain&&(t="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var e=g.v.getConfiguration("viewInstanceURL");e||(e=u.x.baseURI+c.d.inquiresPath("message/viewInstance.html")),window.open(e+t,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.viewFiddle=function(t){var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?scope="+e);var s=g.v.getConfiguration("fiddleURL");s||(s=u.x.baseURI+c.d.inquiresPath("fiddle/fiddle.html")),window.open(s+o,"_blank","top=30,height=710,left=50,width=1100,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.getSource=function(){var t=(0,l.Z)(d().mark((function t(e,i){var o,s,r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null,i&&(o=WebSquare.idCache[i]),s=null!=o&&o.frameDoc&&o.frameDoc.xmlDocument?o.frameDoc:WebSquare.WebSquaredoc,r="","xml"!==s.getType()){t.next=8;break}a=null!=s.xmlDocument_org?s.xmlDocument_org:s.xmlDocument,t.next=17;break;case 8:if(null==o||o===WebSquare.strictModeFrame){
t.next=14;break}return t.next=11,WebSquare.xml.load(o.getSrc());case 11:a=t.sent,t.next=17;break;case 14:return t.next=16,WebSquare.xml.load(g.v.getPageURL(WebSquare.w2xPath,{skipUri:!0}));case 16:a=t.sent;case 17:return r=void 0!==e&&"raw"==e?WebSquare.xml.serialize(a):void 0!==e&&"text"==e?WebSquare.xml.indent(a):WebSquare.xml.indent(a,"html"),t.abrupt("return",r);case 19:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),f.getInstance=function(t){return void 0!==t&&"raw"==t?WebSquare.xml.serialize(WebSquare.ModelUtil.getInstanceByXPath("/").xmlNode.parentNode):void 0!==t&&"text"==t?WebSquare.xml.indent(WebSquare.ModelUtil.getInstanceByXPath("/").xmlNode.parentNode):WebSquare.xml.indent(WebSquare.ModelUtil.getInstanceByXPath("/").xmlNode.parentNode,"html")},f.printRange=function(t){var e="?id="+t;WebSquare.domain&&(e+="&domain="+WebSquare.text.URLEncoder(WebSquare.domain));var i=g.v.getConfiguration("printRangeURL");i||(i=u.x.baseURI+c.d.inquiresPath("message/printRange.html")),window.open(i+e,"_blank","top=0,height=670,left=0,width=1000,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.evalProp=function(t,e){return c.d.evalProp(t,e)},f.setCursor=function(t){b.body.style.cursor=t;var e=b.getElementsByTagName("div");if(null!=e)for(var i=0;i<e.length;i++)"undefined"!=e[i].id&&"none"!=e[i].currentStyle.display&&"hidden"!=e[i].currentStyle.visibility&&(e[i].style.cursor=t)},f.setCursorAsync=function(t){var e="WebSquare.util.setCursor('"+t+"');";window.setTimeout(e,1)},f.toPixel=function(t,e){if(-1!=String(t).indexOf("%")){var i=parseInt(t);return parseInt(i/100*("x"==e?screen.availWidth:screen.availHeight))}return t},f.dbltoHexacode=function(t){t=Math.floor(t);for(var e="0123456789ABCDEF",i=e.substr(15&t,1);t>15;)i=e.substr(15&(t>>=4),1)+i;return i},f.hexacodetoDbl=function(t){return parseInt(t,16)},f.isOdd=function(t){return parseInt(t)%2!=0},f.isInteger=function(t){var e=parseInt(t,10);return!isNaN(e)&&(t==e&&t.toString()==e.toString())},f.isExist=function(t,e){return null!=e[t]},f.isDef=function(t,e){return null==e&&(e=window),null!=e[t]&&void 0!==e[t]},f.getTDIndex=function(t){try{for(;"TABLE"!=t.tagName;){if("TD"==t.tagName){for(var e=t.parentNode.childNodes,i=0;i<e.length;i++)if(e.item(i)==t)return i;break}t=t.parentNode}}catch(t){}return-1},f.getTRIndex=function(t){try{for(;"TABLE"!=t.tagName;){if("TR"==t.tagName){for(var e=t.parentNode.childNodes,i=0;i<e.length;i++)if(e.item(i)==t)return i;break}t=t.parentNode}}catch(t){}return-1},f.getSiblingIndex=function(t){try{if(!t)return-1;for(var e=0;t.previousSibling;)t=t.previousSibling,e++;return e}catch(t){}return-1},f.getObjectValue=function(t,e,i){return void 0!==t&&null!=t&&void 0!==t[e]&&""!=t[e]?t[e]:void 0===i?null:i},f.objToXML=function(t){var e=WebSquare.xml.parse("<object/>");for(var i in t)"string"==typeof i&&"string"==typeof t[i]&&WebSquare.xml.setValue(e.documentElement,i,"value",t[i]);return e},f.getBoolean=function(t){return"boolean"==typeof t?t:"string"==typeof t&&"true"==t.toLowerCase()},f.checkUpdate=function(){},f.registContextMenu=function(t,e){var i=t,o=WebSquare.util.makeContextMenuString(e).menuStr;"string"==typeof t&&(i=g.v.getComponentById(t)),"object"==(0,n.Z)(i)&&(void 0!==i.render&&null!=i.render&&(i=i.render),g.v.browserCheck.opera?i.onmousedown=function(t){if(t.ctrlKey){WebSquare.util.contextObject=WebSquare.event.getTarget(t);var i=window.innerWidth-WebSquare.event.getClientX(t),s=window.innerHeight-WebSquare.event.getClientY(t),r=b.getElementById("_contextMenuLayer");void 0!==r&&null!=r||(r=b.createElement("div"),b.body.insertBefore(r,null),r.id="_contextMenuLayer",r.style.position="absolute"),r.style.left=i<182?window.pageXOffset+WebSquare.event.getClientX(t)-182:window.pageXOffset+WebSquare.event.getClientX(t),r.style.top=s<176?window.pageYOffset+WebSquare.event.getClientY(t)-176:window.pageYOffset+WebSquare.event.getClientY(t);var a=19*e.size()+9
;return e.size()>15&&(a="295px"),r.style.height=a,r.style.overflow="hidden",r.style.zIndex="20000",r.style.visibility="visible",r.innerHTML=o,!1}return!0}:i.oncontextmenu=function(t){WebSquare.util.contextObject=WebSquare.event.getTarget(t);var e=b.getElementById("_contextMenuLayer"),i=document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.scrollTop||document.body.scrollTop,r=WebSquare.event.getClientX(t)+i,a=WebSquare.event.getClientY(t)+s;void 0!==e&&null!=e||((e=b.createElement("div")).id="_contextMenuLayer",e.style.position="absolute",document.body.appendChild(e)),e.style.zIndex="20000",e.style.visibility="visible",e.innerHTML=o;var n=e.offsetWidth+10,l=e.offsetHeight+10;return r+n>i+document.documentElement.clientWidth&&(r=i+document.documentElement.clientWidth-n-10),a+l>s+document.documentElement.clientHeight&&(a=s+document.documentElement.clientHeight-l-10),e.style.left=r+"px",e.style.top=a+"px",!1})},f.removeContextMenu=function(t){var e=t;"string"==typeof t&&(e=g.v.getComponentById(t)),"object"==(0,n.Z)(e)&&(void 0!==e.render&&null!=e.render&&(e=e.render),e.oncontextmenu=null)},f.makeContextMenuString=function(t){for(var e="",i=175,o=0;o<t.size();o++){var s=t.elementAt(o),r=WebSquare.xml.getAttribute(s,"name","value"),a=WebSquare.util.getWidth(r)+30;i<a&&(i=a)}if(g.v.browserCheck.ieAllVersion){var n=19*t.size()+10;t.size()>15&&(n=295),e+="<div id='contextLayer' onselectstart='return false' style='overflow-x:hidden; overflow-y: auto; width:"+(i+5)+"px; height:"+n+"px; '>",e+="<table width='"+i+"' border='0' style='border-collapse:collapse; border:1px solid #9fbcd4; background-color:#FFFFFF;'>"}else{n=19*t.size()+10;t.size()>15&&(n=286),e+="<div onselectstart='return false' style='position:relative; overflow:auto; width:"+i+"px;height:"+n+"px; border:4px solid #e7e7e7; '>",e+="<table width='"+i+"' border='0' style='border-collapse:collapse; border:1px solid #9fbcd4; background-color:#FFFFFF;'>"}for(o=0;o<t.size();o++){s=t.elementAt(o);"true"==WebSquare.xml.getAttribute(s,"separator","value")?e+=m.k.contextMenuAddRow1(WebSquare.xml.getAttribute(s,"method","value"),WebSquare.xml.getAttribute(s,"name","value")):e+=m.k.contextMenuAddRow(WebSquare.xml.getAttribute(s,"method","value"),WebSquare.xml.getAttribute(s,"name","value"))}var l={};return l.menuStr=e,l.width=i,l},f.getElement=function(t){window._elements||(window._elements=[]);var e=b.createElement(t);return window._elements.push(e),e},f.getURLString=function(t){try{if(-1!=t.toLowerCase().indexOf("url")){var e=t.indexOf("("),i=t.indexOf(")"),o=t.substring(e+1,i);return o=o.replace(/\"/g,"")}}catch(t){p.w.printStackTrace(t)}},f.toHexColor=function(t){try{if(-1!=t.indexOf("rgb")){var e=t.indexOf("("),i=t.indexOf(")"),o=t.substring(e+1,i).split(","),s=parseInt(o[0]).toString(16),r=parseInt(o[1]).toString(16),a=parseInt(o[2]).toString(16);return 1==s.length&&(s="0"+s),1==r.length&&(r="0"+r),1==a.length&&(a="0"+a),"#"+s+r+a}return t}catch(t){p.w.printStackTrace(t)}},window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){return"float"==e&&(e="styleFloat"),e=e.capitalizeStyle(),t&&t.currentStyle&&t.currentStyle[e]?t.currentStyle[e]:null},this}),document.documentElement.currentStyle?f.getStyleProperty=function(t,e){e=e.wq_trim().capitalizeStyle();var i=t.currentStyle[e];return e.toLowerCase().indexOf("color")>-1?this.toHexColor(i):i}:window.getComputedStyle?f.getStyleProperty=function(t,e){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e);return e.toLowerCase().indexOf("color")>-1?this.toHexColor(i):i}:f.getStyleProperty=function(t,e){var i=t.style[e];return e.toLowerCase().indexOf("color")>-1?this.toHexColor(i):i},f.setSize=function(t){if(!g.v.browserCheck.ie){
var e=WebSquare.util.getStyleProperty(t,"width"),i=WebSquare.util.getStyleProperty(t,"height"),o=parseInt(WebSquare.util.getStyleProperty(t,"border-left-width"))||0,s=parseInt(WebSquare.util.getStyleProperty(t,"border-right-width"))||0,r=parseInt(WebSquare.util.getStyleProperty(t,"border-top-width"))||0,a=parseInt(WebSquare.util.getStyleProperty(t,"border-bottom-width"))||0,n=parseInt(WebSquare.util.getStyleProperty(t,"padding-left"))||0,l=parseInt(WebSquare.util.getStyleProperty(t,"padding-right"))||0,h=parseInt(WebSquare.util.getStyleProperty(t,"padding-top"))||0,d=parseInt(WebSquare.util.getStyleProperty(t,"padding-bottom"))||0;""!=e&&e.indexOf("px")>=0&&(t.style.width=parseInt(e)-o-s-n-l),""!=i&&i.indexOf("px")>=0&&(t.style.height=parseInt(i)-r-a-h-d)}},f.getWidth=function(t,e,i){e=null==e?"":e,i=null==i?"":i;var o=WebSquare.util.getRulerSpan();return o.style.cssText=e,o.style.visibility="hidden",o.style.position="absolute",o.style.width="",o.className=i,o.innerHTML=t,o.style.top="-10000px",o.style.left="-10000px",o.offsetWidth},f.getRulerSpan=function(t,e){var i=b.getElementById("__rulerSpan__");return null==i&&((i=b.createElement("span")).id="__rulerSpan__",i.style.visibility="hidden",i.style.position="absolute",b.body.appendChild(i)),i.style.cssText=t,i.style.visibility="hidden",i.style.position="absolute",i.className=e,i},f.getImageUrl=function(t,e){var i=WebSquare.util.getRulerSpan();return i.style.cssText=t,i.style.visibility="hidden",i.style.position="absolute",i.className=e,i.style.top="-10000px",i.style.left="-10000px",WebSquare.util.getStyleProperty(i,"background-image")},f.getHeight=function(t,e,i){var o=WebSquare.util.getRulerSpan();return o.style.width=e,null!=i?(o.style.fontSize=i.style.fontSize,o.style.fontFamily=i.style.fontFamily,o.style.fontWeight=i.style.fontWeight):(o.style.fontSize="",o.style.fontFamily="",o.style.fontWeight=""),o.innerHTML=t,o.style.top="-10000px",o.style.left="-10000px",o.offsetHeight},f.getHeight2=function(t,e,i,o){var s=WebSquare.util.getRulerSpan();s.style.cssText=i,s.className=o,s.style.visibility="hidden",s.style.height="",s.style.position="",s.style.padding="0 0 0 0 ",s.style.width=WebSquare.util.getStyleProperty(s,"width"),s.style.fontSize=WebSquare.util.getStyleProperty(s,"font-size")||"12px",s.style.fontFamily=WebSquare.util.getStyleProperty(s,"font-family")||"",s.style.fontWeight=WebSquare.util.getStyleProperty(s,"font-weight")||"",s.innerHTML=t,s.style.top="-10000px",s.style.left="-10000px";var r=s.offsetHeight;return 0==r&&(r=parseInt(s.style.fontSize)),r},f.setVerticalAlignMiddle=function(t,e){var i=WebSquare.util.getStyleProperty(t,"height"),o=WebSquare.util.getStyleProperty(t,"vertical-align");o=""==o?"middle":o;var s=WebSquare.util.getStyleProperty(t,"padding-top");if((""==s||"0px"==s)&&"middle"==o&&""!=i&&i.indexOf("px")>=0){var r=document.createElement("div");t.appendChild(r),r.innerHTML=e,(n=WebSquare.util.getRulerSpan(t.style.cssText,t.className)).style.height="",n.style.top="-10000px",n.style.left="-10000px",n.innerHTML=e;var a=n.offsetHeight;r.style.marginTop=(parseInt(i)-a)/2}else if((""==s||"0px"==s)&&"bottom"==o&&""!=i&&i.indexOf("px")>=0){var n;r=document.createElement("div");t.appendChild(r),r.innerHTML=e,(n=WebSquare.util.getRulerSpan(t.style.cssText,t.className)).style.height="",n.style.top="-10000px",n.style.left="-10000px",n.innerHTML=e;a=n.offsetHeight;var l=parseInt(i)-a-3;r.style.marginTop=l}else t.innerHTML=e},f.getChildNodeAt=function(t,e){try{for(var i=WebSquare.util.first(t),o=0;null!=i&&o<e;)i=WebSquare.util.next(i),o++;return i}catch(t){p.w.printStackTrace(t)}},f.prev=function(t){do{t=t.previousSibling}while(t&&1!=t.nodeType);return t},f.next=function(t){do{t=t.nextSibling}while(t&&1!=t.nodeType);return t},f.first=function(t){return null==(t=t.firstChild)?t:t&&1!=t.nodeType?WebSquare.util.next(t):t},f.last=function(t){return(t=t.lastChild)&&1!=t.nodeType?WebSquare.util.prev(t):t},f.parent=function(t,e){e=e||1
;for(var i=0;i<e;i++)null!=t&&(t=t.parentNode);return t},f.getEvent=function(t){try{t=t||event}catch(t){p.w.printStackTrace(t)}return t},f.getStringByteSize=function(t,e){if(!t)return 0;var i=g.v.getConfiguration("/WebSquare/byteCheckEncoding/@value");switch(i||(i="UTF-8"),i=i.toUpperCase()){case"UTF-8":return WebSquare.util.getByteLengthUtf8(t,e);default:return WebSquare.util.getByteLength(t,e)}},f.getByteLength=function(t,e){for(var i=0,o=(e=e||"",[]),s=0;s<e.length;s++)o.push(escape(e.charAt(s)));for(var r=0;r<t.length;r++){var a=escape(t.charAt(r));if(o.length>0){for(var n=!1,l=0;l<o.length;l++)if(a===o[l]){n=!0;break}if(n)continue}1==a.length?i++:-1!=a.indexOf("%u")?i+=2:-1!=a.indexOf("%")&&(i+=a.length/3)}return i},f.getByteLengthUtf8=function(t,e){for(var i=0,o=(e=e||"",[]),s=0;s<e.length;s++)o.push(escape(e.charAt(s)));for(var r=0;r<t.length;r++){var a=escape(t.charAt(r));if(o.length>0){for(var n=!1,l=0;l<o.length;l++)if(a===o[l]){n=!0;break}if(n)continue}i+=WebSquare.util.getCharByteSize(t.charAt(r))}return i},f.getStringByByteSize=function(t,e,i){if(!t)return"";var o=g.v.getConfiguration("/WebSquare/byteCheckEncoding/@value");switch(o||(o="UTF-8"),o=o.toUpperCase()){case"UTF-8":return WebSquare.util.getByteStringByLengthUtf8(t,e,i);default:return WebSquare.util.getByteStringByLength(t,e,i)}},f.getByteStringByLength=function(t,e,i){for(var o=0,s=(i=i||"",[]),r=0;r<i.length;r++)s.push(escape(i.charAt(r)));for(var a=0;a<t.length;a++){var n=escape(t.charAt(a));if(s.length>0){for(var l=!1,h=0;h<s.length;h++)if(n===s[h]){l=!0;break}if(l)continue}if(1==n.length?o++:-1!=n.indexOf("%u")?o+=2:-1!=n.indexOf("%")&&(o+=n.length/3),o>e)return t.substring(0,a)}return t},f.getByteStringByLengthUtf8=function(t,e,i){for(var o=0,s=(i=i||"",[]),r=0;r<i.length;r++)s.push(escape(i.charAt(r)));for(var a=0;a<t.length;a++){var n=escape(t.charAt(a));if(s.length>0){for(var l=!1,h=0;h<s.length;h++)if(n===s[h]){l=!0;break}if(l)continue}if((o+=WebSquare.util.getCharByteSize(t.charAt(a)))>e)return t.substring(0,a)}return t},f.getCharByteSize=function(t){if(!t||0==t.length)return 0;var e=t.charCodeAt(0);return e<=127?1:e<=2047?2:e<=65535?3:4},f.getImageStyle=function(t,e){var i="",o=t.toLowerCase();if(o.indexOf("background-image")>=0){var s=(o=o.substring(o.indexOf("background-image"))).split(";")[0].split(":");s.shift(),(i=s.join("").wq_trim()).startsWith("url")&&"("==(i=i.substring(3).wq_trim()).charAt(0)&&")"==i.charAt(i.length-1)&&(i=g.v.getImageURL(i.substring(1,i.length-1)))}else i=WebSquare.skin.makeBackgroundImageUrl(e);return""!=i&&"none"!=i&&(i="background-image:url("+i+")"),i},f.getInnerText=function(t){var e="";try{void 0===(e=t.innerText)&&(e=t.textContent)}catch(t){p.w.printStackTrace(t)}return e},f.getTextNodeValue=function(t){try{var e=null;if(t)for(var i=t.firstChild;null!=i;i=i.nextSibling)if(3==i.nodeType){e=i.nodeValue;break}return e}catch(t){m.k.printLog("dataController.getTextNodeValue :"+t.message),p.w.printStackTrace(t)}},f.browserVersion=function(){try{return g.v.browserVersion()}catch(t){p.w.printStackTrace(t)}},f.isIE=function(t){try{var e=g.v.browserCheck.ieVersion[t];return null!=e||(e=g.v.browserCheck.ie,t&&(t+="",e=e&&t.indexOf(g.v.browserVersion())>-1,g.v.browserCheck.ieVersion[t]=e)),e}catch(t){p.w.printStackTrace(t)}},f.isIEAllVersion=function(t){try{var e=g.v.browserCheck.ieVersion[t];return null!=e||(e=g.v.browserCheck.ieAllVersion,t&&(t+="",e=e&&t.indexOf(g.v.browserVersion())>-1,g.v.browserCheck.ieVersion[t]=e)),e}catch(t){p.w.printStackTrace(t)}},f.isFF=function(t){try{var e=g.v.browserCheck.mozVersion[t];return null!=e||(e=g.v.browserCheck.moz,t&&(t+="",e=e&&t.indexOf(g.v.browserVersion())>-1,g.v.browserCheck.mozVersion[t]=e)),e}catch(t){p.w.printStackTrace(t)}},f.isChrome=function(t){try{var e=g.v.browserCheck.chromeVersion[t];return null!=e||(e=g.v.browserCheck.chrome,t&&(t+="",e=e&&t.indexOf(g.v.browserVersion())>-1,g.v.browserCheck.chromeVersion[t]=e)),e}catch(t){p.w.printStackTrace(t)}},
f.isSafari=function(t){try{var e=g.v.browserCheck.safariVersion[t];return null!=e||(e=g.v.browserCheck.safari,t&&(t+="",e=e&&t.indexOf(g.v.browserVersion())>-1,g.v.browserCheck.safariVersion[t]=e)),e}catch(t){p.w.printStackTrace(t)}},f.isOpera=function(t){try{var e=g.v.browserCheck.operaVersion[t];return null!=e||(e=g.v.browserCheck.opera,t&&g.v.browserVersion()&&(t+="",e=e&&t.indexOf(g.v.browserVersion())>-1,g.v.browserCheck.operaVersion[t]=e)),e}catch(t){p.w.printStackTrace(t)}},f.isSpartan=function(){try{return g.v.browserCheck.spartan}catch(t){p.w.printStackTrace(t)}},f.isChromeEdge=function(t){try{var e=g.v.browserCheck.chromeEdgeVersion[t];return null!=e||(e=g.v.browserCheck.chromeEdge,t&&(t+="",e=e&&t.indexOf(g.v.browserVersion())>-1,g.v.browserCheck.chromeEdgeVersion[t]=e)),e}catch(t){p.w.printStackTrace(t)}},f.isMobile=function(){try{var t=g.v.browserCheck.isMobile;return null!=t?t:(t=!!(g.v.browserCheck.android||g.v.browserCheck.iphone||g.v.browserCheck.ipad||g.v.browserCheck.ipod||g.v.browserCheck.blackberry),g.v.browserCheck.isMobile=t,g.v.browserCheck.isMobile)}catch(t){p.w.printStackTrace(t)}},f.isNull=function(t){return void 0===t||null==t},f.isNumber=function(t){return!WebSquare.util.isNull(t)&&t.constructor==Number},f.isString=function(t){return!WebSquare.util.isNull(t)&&t.constructor==String},f.isArray=function(t){return t&&"object"===(0,n.Z)(t)&&"number"==typeof t.length&&"function"==typeof t.splice&&!t.propertyIsEnumerable("length")},f.isRegExp=function(t){return!WebSquare.util.isNull(t)&&t instanceof RegExp},f.isKorean=function(t){if("string"!=typeof t)return!1;return/[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/.test(t)},f.XMLToHTML=function(t){if(void 0===t.tagName&&3==t.nodeType)return document.createTextNode(t.nodeValue);var e=document.createElement(t.tagName),i=WebSquare.WebSquareparser.parseAttribute(t);try{for(var o in i)"style"!=o?"className"!=o?e[o]=i[o]:e.className=i[o]:e.style.cssText=i[o]}catch(t){p.w.printStackTrace(t,null,this)}for(var s=t.firstChild;null!=s;s=s.nextSibling)1==s.nodeType?e.appendChild(this.XMLToHTML(s)):2!=s.nodeType&&3!=s.nodeType&&4!=s.nodeType||e.appendChild(document.createTextNode(s.nodeValue));return e},f.setPrecision=function(t){try{return"number"==typeof t&&(t=parseFloat(t.toFixed(10)),t=parseFloat(t.toPrecision(15))),t}catch(t){p.w.printStackTrace(t)}},f.sum=function(t,e){try{if(!(t.length>0))return t;void 0!==e&&null!=e||(e={});for(var i=0,o=0,s=0;s<t.length;s++){"string"==typeof t[s]&&""==t[s].replace(/^\s+|\s+$/g,"")&&(t[s]="0");var r=t[s]-0;i+=r,o+=Math.abs(r)}var a=Math.round(Math.log(Math.max(o),10)*Math.LOG10E);a=null!==a&&!isNaN(a)&&isFinite(a)?a:0;var n=this.getPrecision(e.displayFormat);if(parseInt(i,10)===i&&0===n);else if(Math.abs(i)<1)i=-0===(i=parseFloat(i.toFixed(a>10?0:10-a)))?0:i;else if(Math.abs(i)<1e12){var l=Math.max(12,a+n);i=parseFloat(i.toPrecision(l))}else i=a+n<17?parseFloat(i.toPrecision(a+n)):Math.round(i);return i}catch(t){p.w.printStackTrace(t)}},f.getPrecision=function(t){var e=0;try{if(!t||"string"!=typeof t)return 0;var i=new RegExp("\\[(.*)\\]","g"),o=new RegExp("[.]+[#0]+"),s=t.replace(i,"").match(o);e=(s=null!=s?s.join(""):".").length-1}catch(t){p.w.printStackTrace(t)}return e},f.dynamicCreate=function(t,e,i,o,s,r,a){try{if(WebSquare.util.getComponentById(t))return void m.k.printLog("dynamicCreate error : id duplcation.\ndynamicCreate오류 : 해당 id를 가진 컴포넌트가 이미 존재합니다."+t);var n=null;!i.nodeType||1!==i.nodeType&&9!==i.nodeType?"string"==typeof i&&(n=WebSquare.xml.parse(i))&&(n=!0===WebSquare.convertPageXML?WebSquare.xmljs.xml2json(n).E[0]:n.documentElement,i={}):(n=9==i.nodeType?i.documentElement:i,i={}),null==n&&(i.pluginName=e);var l,h=null;if(r){var d=WebSquare.util.getComponentById(r,a.id);d&&(h=d.uuid)}else a&&(h=a.uuid);i._idCollisionCheck=!0,null==a||!a.options||"wframe"!==a.options.pluginName&&"pageInherit"!==a.options.pluginName&&"udc2"!==a.options.pluginName||(i.scope_obj=a),!0===WebSquare.convertPageXML&&g.v.isXML(n)&&(n=WebSquare.xmljs.xml2json(n).E[0])
;var u=!0;i&&"wframe"===i.pluginName&&(i.preload=!0,i.src||(u=!1)),l=null==n||"true"!==g.v.getConfiguration("/WebSquare/dynamicCreate/parseChild/@value")?WebSquare.controlFactory.createControl(t,i,n,i.scope_obj||null,!0,h):WebSquare.controlFactory.create(t,i,n,i.scope_obj||null,h);var c=WebSquare.controlFactory._awaitObj.key.length>0||WebSquare.controlFactory._asyncList.length>0||"function"==typeof l.initAsync;if(u&&c){var b=WebSquare.controlFactory.initAsync(),y=i.scope_obj&&i.scope_obj.id,v=b.then((function(e,i){return l.constructor===Promise&&(l=f.getComponentById(t,y)),f._dynamicCreateAfter(l,s,o)}));return m.k.printLog("$p.dynamicCreate : return promise because engine files are not ready."),v}return f._dynamicCreateAfter(l,s,o),l}catch(t){p.w.printStackTrace(t)}},f._dynamicCreateAfter=function(t,e,i){try{return e&&t.modelControl.setItemset(e.nodeset,e.label,e.value),t.appendTo(i||WebSquare.getBody()),t.activate(),t.onComplete(),e&&t.refreshItemset(),t}catch(t){p.w.printStackTrace(t)}},f.getComponentById=function(t,e){try{var i=t;if(!e&&WebSquare.strictModeFrame&&WebSquare.strictModeFrame.id!==t&&(e=WebSquare.strictModeFrame.id),e){var o=WebSquare.util.getComponentById(e);if(null!=o)for(var s=o;null!=s&&null!=s.scope;s=s.scope_obj){if(null!=s.scope[t]){i=s.scope[t].id;break}if(s.scope_obj===s)break;if(WebSquare.strictMode)break}}return WebSquare.idCache[WebSquare.idToUUID[i]]||window[i]}catch(t){p.w.printStackTrace(t,null,this)}},f.getEventTarget=function(t){var e={};try{return void 0!==t&&null!=t&&""!=t&&(e.pluginName=t.options.pluginName,e.id=t.org_id,e.realId=t.id),e}catch(t){return p.w.printStackTrace(t,null,this),e}},f.getGlobalFunction=function(t,e){try{if("function"==typeof t)return t;if("string"!=typeof t||!t)return null;if(!0===/^\s*function/.test(t))return new Function("return "+t)();var i=t.wq_trim(),o=i.indexOf("("),s=i.indexOf(")",o),r=[];o>=0&&s>=0&&(r=i.slice(o+1,s).split(","),i=i.slice(0,o)),i=i.split(".");var a=0,l=null;if(e){var h=WebSquare.util.getComponentById(e);if(null!=h)for(var d=h;null!=d&&null!=d.scope;d=d.scope_obj){for(var u=d.scope[i[a++]];u&&("object"==(0,n.Z)(u)||"function"==typeof u)&&a<i.length;)u=u[i[a++]];if("function"==typeof(l=u))break;if(d.scope_obj===d)break;if(WebSquare.strictMode)break}if("function"!=typeof l)try{l=new Function("return "+t)()}catch(t){l=null}}else{for(u=i[0]&&window[i[a++]]||null;u&&("object"==(0,n.Z)(u)||"function"==typeof u)&&a<i.length;)u=u[i[a++]];if("function"==typeof u)l=u;else try{l=new Function("return "+t)()}catch(t){l=null}}if(o>=0&&s>=0&&"function"==typeof l){for(var c=0;c<r.length;c++)try{r[c]=new Function("return "+r[c])()}catch(t){r[c]}l=l.apply(l,r)}return l}catch(t){p.w.printStackTrace(t,null,this)}},f.createPopup=function(t,e,i,o,s,r,a,n,l,h,d){try{WebSquare.uiplugin.popup.createPopup(t,e,i,o,s,r,a,n,l,h,d)}catch(t){p.w.printStackTrace(t,null,this)}},f.openPopup=function(t,e,i,o){try{WebSquare.uiplugin.popup.openPopup(t,e,i,o)}catch(t){p.w.printStackTrace(t,null,this)}},f.getPopupParam=function(){try{return WebSquare.uiplugin.popup.getPopupParam()}catch(t){p.w.printStackTrace(t,null,this)}},f.closePopup=function(t,e){try{var i="";i=null==t?WebSquare.net.getParameter("popupID"):t,null==t&&opener&&opener.WebSquare?opener.WebSquare.uiplugin.popup.callClose(i,e):parent!==window&&null!=parent.WebSquare?(parent.WebSquare.uiplugin.popup&&parent.WebSquare.uiplugin.popup.callClose(i,e),WebSquare.uiplugin.popup&&WebSquare.uiplugin.popup.callClose(i,e)):WebSquare.uiplugin.popup.callClose(i,e)}catch(t){p.w.printStackTrace(t,null,this)}},f.getPopup=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopup(t,e):null}catch(t){p.w.printStackTrace(t,null,this)}},f.getPopupList=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopupList(t,e):[]}catch(t){p.w.printStackTrace(t,null,this)}},f.getPopupWindow=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopupWindow(t,e):null}catch(t){
p.w.printStackTrace(t,null,this)}},f.getPopupWindowList=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopupWindowList(t,e):[]}catch(t){p.w.printStackTrace(t,null,this)}},f.isPopup=function(){try{return null!=window.opener&&!window.opener.closed}catch(t){return!1}},f.isWFramePopup=function(){try{return!1}catch(t){p.w.printStackTrace(t,null,this)}},f.getPopupUrl=function(){try{return WebSquare.net.getParameter("w2xPath")}catch(t){p.w.printStackTrace(t,null,this)}},f.getPopupId=function(){try{return WebSquare.net.getParameter("popupID")}catch(t){p.w.printStackTrace(t,null,this)}},f.getFrameId=function(){try{return null}catch(t){p.w.printStackTrace(t,null,this)}},f.getFrame=function(){try{return null}catch(t){p.w.printStackTrace(t,null,this)}},f.getParentWindow=function(){try{var t=opener||parent||window;if(!WebSquare.strictMode)return t;try{return t.WebSquare&&t.WebSquare.strictModeFrame?t.WebSquare.strictModeFrame.scope:t}catch(e){return t}}catch(t){p.w.printStackTrace(t,null,this)}},f.getTopWindow=function(){try{var t=top;if(!WebSquare.strictMode)return t;try{return t.WebSquare&&t.WebSquare.strictModeFrame?t.WebSquare.strictModeFrame.scope:t}catch(e){return t}}catch(t){p.w.printStackTrace(t,null,this)}},f.getMainFrame=function(){try{return WebSquare.strictMode?WebSquare.strictModeFrame.scope:window}catch(t){p.w.printStackTrace(t,null,this)}},f.jQuerySelector=function(t){try{if("undefined"!=typeof jQuery&&null!=jQuery)return jQuery(t)}catch(t){p.w.printStackTrace(t,null,this)}},f.getDocumentSize=function(t){try{return"height"==(t=t.toLowerCase())?document.documentElement.clientHeight||document.body.clientHeight:"width"==t?document.documentElement.clientWidth||document.body.clientWidth:void m.k.printLog("getDocumentSize : wrong sizeName["+t+"]")}catch(t){p.w.printStackTrace(t)}},f.getSubmissionURL=function(t,e){try{var i;return i="string"==typeof WebSquare.hybridSubmissionURL&&""!=WebSquare.hybridSubmissionURL?WebSquare.hybridSubmissionURL:g.v.getConfiguration("/WebSquare/hybrid/submissionURL"),g.v.getURL(WebSquare.util.appendingPathComponent(i,t),e)}catch(t){p.w.printStackTrace(t)}},f.appendingPathComponent=function(t,e){try{if(e.indexOf("://")>0||0==t.length)return e;var i=t.length;return"/"==t.charAt(i-1)?"/"==e.charAt(0)?t+e.substr(1):t+e:"/"==e.charAt(0)?t+e:t+"/"+e}catch(t){p.w.printStackTrace(t)}},f.setDocumentLang=function(t){try{document.documentElement.setAttribute("xml:lang",t)}catch(t){p.w.printStackTrace(t,null,this)}},f.setDisabled=function(t){try{var e,i,o=[],s=[],r=t.componentId,a=t.disabled,n=t.excludeIdList,l=t.includeIdList,h=t.skipTab;if(!(e=r?WebSquare.util.getComponentById(r):WebSquare.getBody())||!e.options||!e.options.pluginName)return m.k.printLog("[WebSquare.util.setDisabled]id:해당하는 WebSquareComponent를 찾을 수 없습니다."),{doneComponents:o,skipComponents:s};if(WebSquare.util.isArray(l)){i||(i={});for(var d=0;d<l.length;d++)i[l[d]]=!0}else l&&(i=l);var u=WebSquare.util.getDisabledComponentIdList(e,a),c=u.targetComponents;s=u.skipComponents;for(d=0;d<c.length;d++){if(f=WebSquare.util.getComponentById(c[d])){var g=f.options.disabled;if(i)try{i[f.id]&&(g!==a&&f.setDisabled(a,h),o.push(f.id))}catch(t){m.k.printLog("[WebSquare.util.setDisabled]["+f.id+"] 컴포넌트의 disable 처리를 실패하였습니다. 컴포넌트 상태를 확인하시기 바랍니다.")}else try{g!==a&&f.setDisabled(a,h),o.push(f.id)}catch(t){m.k.printLog("[WebSquare.util.setDisabled]["+f.id+"] 컴포넌트의 disable 처리를 실패하였습니다. 컴포넌트 상태를 확인하시기 바랍니다.")}}}if(n)for(d=0;d<n.length;d++){if((g=(f=WebSquare.util.getComponentById(n[d])).options.disabled)===a)try{f.setDisabled(!a,h)}catch(t){m.k.printLog("[WebSquare.util.setDisabled]["+f.id+"] 컴포넌트의 disable 처리를 실패하였습니다. 컴포넌트 상태를 확인하시기 바랍니다.")}}for(d=0;d<s.length;d++){var f;if((g=(f=WebSquare.util.getComponentById(s[d])).options.disabled)!==a)try{f.setDisabled(a,h)}catch(t){m.k.printLog("[WebSquare.util.setDisabled]["+f.id+"] 컴포넌트의 disable 처리를 실패하였습니다. 컴포넌트 상태를 확인하시기 바랍니다.")}}return{doneComponents:o,skipComponents:s}}catch(t){
p.w.printStackTrace(t,null,this)}},f.getDisabledComponentIdList=function(t,e,i){try{if(i||((i={}).targetComponents=[],i.skipComponents=[]),t||(t=WebSquare.getBody()),t&&t.options&&"body"==t.options.pluginName);else{if("stop"==t.activeStatus)return i;if(!t.id||!t.options||!t.options.pluginName&&!t.options.udcName)return i;t.options.disabled===e?i.skipComponents.push(t.id):i.targetComponents.push(t.id)}for(var o=0;o<t.childControlList.length;o++){var s=t.childControlList[o];s&&WebSquare.util.getComponentById(s.id)&&s.options&&(s.options.pluginName||s.options.udcName)&&WebSquare.util.getDisabledComponentIdList(s,e,i)}return i}catch(t){p.w.printStackTrace(t,null,this)}},f.getIgnoreKeyPressCodes=function(){return{8:"backspace",9:"tab",37:"left",38:"up",39:"right",40:"down",36:"home",35:"end",4:"insert",46:"del",33:"pageup",34:"pagedown"}},f.getKeyCode=function(t,e){var i,o=WebSquare.text.getCaretPos(t.render),s=-1;if(s=o<=1?t.render.value.charCodeAt(0):t.render.value.charCodeAt(o-1),null!=e&&(i=e.charCode||e.keyCode||e.which),i)return 0==i||229==i||i>=48&&s>=0?s:i},f.setDomain=function(t){try{WebSquare.domain=t,document.domain=t}catch(t){p.w.printStackTrace(t)}},f.getChildren=function(t,e){try{if(t||(t=t||WebSquare.getBody(),e&&(e.recursive=!1)),e){for(var i=[],o=e.recursive?t.getAllChildren(e.excludeInnerComp):t.getChildren(),s=!!e.excludePlugin&&" "+e.excludePlugin+" ",r=!!e.includePlugin&&" "+e.includePlugin+" ",a=!!e.excludeId&&" "+e.excludeId+" ",n=0;n<o.length;n++)(!a||a.indexOf(" "+o[n].id+" ")<0)&&(!s||s.indexOf(" "+o[n].options.pluginName+" ")<0)&&(!r||r.indexOf(" "+o[n].options.pluginName+" ")>-1)&&i.push(o[n]);return i}return t.getChildren().slice(0)}catch(t){p.w.printStackTrace(t)}},f.addClearMemory=function(t){try{t&&g.v.userClearMemoryStack.push(t)}catch(t){p.w.printStackTrace(t)}},f.loadUserComponent=function(){var t=(0,l.Z)(d().mark((function t(e,i,o,s,r,a){var n,h,u,c,f,b,y,v,w,S,C,x,_,I,T,k,D,L,W,A,E,M;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,h=!0===a?"Inherit":"User",u=WebSquare.util["loaded"+h+"ComponentURL"][e],"false"===r||null==u){t.next=8;break}n="string"==typeof u&&"xml"===WebSquare.jsLoader.getPageTypeByString(u)?WebSquare.xml.parse(u):u,t.next=11;break;case 8:return t.next=10,WebSquare.jsLoader._loadObj(e);case 10:n=t.sent;case 11:if(c=g.v.isXML(n)?"xml":"js",f=[],y=WebSquare.util.getBoolean(g.v.getConfiguration("/WebSquare/supportW2Udc/@value")),i&&o)f.push(o);else if("xml"===c)for(v=WebSquare.xml.findNodes(n.documentElement,"//@pluginName"),w=0;w<v.length;w++)f.push(v[w].value);else for(b=WebSquare.jsonUtil.walk_DFS(n,(function(t){if(t.A&&t.A.pluginName)return t})),w=0;w<b.length;w++)f.push(b[w].A.pluginName);if(WebSquare.util["loaded"+h+"Component"][e+"#"+f[0]]){t.next=68;break}S=WebSquare.w2xHome,w=0;case 18:if(!(w<f.length)){t.next=66;break}if((C=f[w]).indexOf("_")>-1||y){t.next=23;break}return m.k.printLog("ERROR : udc의 src :"+e+"에서 오류 (pluginName: "+C+" 을 '프로젝트명_컴포넌트명'으로 정의해야 함.)"),t.abrupt("continue",63);case 23:if(!WebSquare.util["loaded"+h+"ComponentPluginName"][C]){t.next=27;break}return(_=WebSquare.util["loaded"+h+"ComponentPluginName"][C].split("#")[0])!=e?m.k.printLog("ERROR : udc.xml 을 로딩하는 중 udc의 src :"+e+" 와 udc의 src : "+_+" 에서 같은 udc컴포넌트명("+C+")을 중복해서 정의하고 있음."):m.k.printLog("ERROR : udc.xml 을 로딩하는 중 udc의 src :"+e+" 내부에서 같은 udc컴포넌트명("+C+")을 중복해서 정의하고 있음."),t.abrupt("continue",63);case 27:if(x=i&&o?"xml"===c?WebSquare.xml.findNode(n.documentElement,"//*[@id='"+i+"']"):WebSquare.jsonUtil.walk_DFS(n,(function(t){if(t.A&&t.A.id===i)return t})):"xml"===c?WebSquare.xml.findNode(n.documentElement,"//*[@pluginName='"+C+"']"):b[w],I=e.lastIndexOf("/"),WebSquare.w2xHome=I<0?"/":e.slice(0,e.lastIndexOf("/"))+"/",x){t.next=32;break}return t.abrupt("continue",63);case 32:if("xml"!==c){t.next=56;break}T=x.firstChild,k=T;case 35:if(null==k){t.next=53;break}if("w2:style"!==k.nodeName&&"style"!==k.nodeName){t.next=42;break}D="",
D=y?WebSquare.xml.getTextNodeValue(k):WebSquare.xml.getCDataNodeValue(k),WebSquare.cssManager.addInternalCSS(D),t.next=50;break;case 42:if("script"!==k.nodeName){t.next=49;break}return L=WebSquare.util.getBoolean(k.getAttribute("scopeExternal"))||s&&s.options.scopeExternal,W=k.getAttribute("scopeVariable")||"",t.next=47,WebSquare.Parser.parseExternalScript({uri:k.getAttribute("src"),cache:k.getAttribute("cache"),lazy:k.getAttribute("defer"),frameObj:s,scopeExternal:L,scopeVariable:W});case 47:t.next=50;break;case 49:"link"===k.nodeName&&((A=WebSquare.Parser.parseAttribute(k)).href&&(A.href=WebSquare.util.getAbsolutePath(g.v.getURL(A.href))),null==A.type&&(A.type="text/css"),null==A.rel&&(A.rel="stylesheet"),WebSquare.skin.addImport(A,!0));case 50:k=k.nextSibling,t.next=35;break;case 53:x.setAttribute("udcHome",WebSquare.w2xHome),t.next=59;break;case 56:return t.next=58,WebSquare.jsonUtil.walk_DFS_async(x,function(){var t=(0,l.Z)(d().mark((function t(e){var i,o,r,a,n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.N){t.next=2;break}return t.abrupt("return");case 2:t.t0=e.N,t.next="style"===t.t0||"w2:style"===t.t0?5:"link"===t.t0?8:"script"===t.t0?14:20;break;case 5:return i=WebSquare.jsonUtil.getCDataNodeValue(e),WebSquare.cssManager.addInternalCSS(i),t.abrupt("break",20);case 8:return(o=WebSquare.Parser.parseAttribute(e)).href&&(o.href=WebSquare.util.getAbsolutePath(g.v.getURL(o.href))),null==o.type&&(o.type="text/css"),null==o.rel&&(o.rel="stylesheet"),WebSquare.skin.addImport(o,!0),t.abrupt("break",20);case 14:return r=new WebSquare.Elem(e),a=WebSquare.util.getBoolean(r.getAttribute("scopeExternal"))||s&&s.options.scopeExternal,n=r.getAttribute("scopeVariable")||"",t.next=19,WebSquare.Parser.parseExternalScript({uri:r.getAttribute("src"),cache:r.getAttribute("cache"),lazy:r.getAttribute("defer"),frameObj:s,scopeExternal:a,scopeVariable:n});case 19:return t.abrupt("break",20);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 58:WebSquare.jsonUtil.setAttribute(x,"udcHome",WebSquare.w2xHome);case 59:WebSquare.util["loaded"+h+"Component"][e+"#"+C]=x,WebSquare.util["loaded"+h+"ComponentPluginName"][C]=e+"#"+C,WebSquare.util["loaded"+h+"ComponentURL"][e]="xml"===c?WebSquare.xml.serialize(n):n,s&&(s.userComponentList.push(e+"#"+C),s.userPluginList.push(C));case 63:w++,t.next=18;break;case 66:"xml"===c?WebSquare.Parser.WebSquareParser.prototype.parseScript(n,null,null,!0):WebSquare.jsonParser.prototype.parseScript(n,null,null,!0),WebSquare.w2xHome=S;case 68:for(E=WebSquare.Elem.api.getElementsByTagName(n,"head")[0],M=WebSquare.Elem.api.getElementsByTagName(E,"require",g.v._XML_NAMESPACE.W2),w=0;w<M.length;w++)e=g.v.getPageURL(M[w].getAttribute("src")),i=M[w].getAttribute("id"),o=M[w].getAttribute("pluginName"),r=M[w].getAttribute("cache"),WebSquare.util.loadUserComponent(e,i,o,s,r);t.next=76;break;case 73:t.prev=73,t.t0=t.catch(1),p.w.printStackTrace(t.t0);case 76:case"end":return t.stop()}}),t,null,[[1,73]])})));return function(e,i,o,s,r,a){return t.apply(this,arguments)}}(),f.loadInheritComponent=function(t,e,i,o,s){try{return WebSquare.util.loadUserComponent(t,e,i,o,s,!0)}catch(t){p.w.printStackTrace(t)}},f.unloadUserComponent=function(t,e,i){},f.setTimeout=function(t,e){try{var i=(new Date).getTime(),o=e.key||t.toString().slice(0,30),s=e.delay||e.max||1,r=e.max||0,a=e.caller||window,n=e.args||[],l=WebSquare.userTimerHash[o];return l||(l=WebSquare.userTimerHash[o]={thread:null,timeoutKey:null,startTime:i}),l.thread=function(){window.WebSquare&&WebSquare.userTimerHash&&delete WebSquare.userTimerHash[o],e.before_call&&e.before_call.call(a,l);var i=t.apply(a,n);e.callback&&e.callback.call(a,i)},clearTimeout(l.timeoutKey),r<=0||i-l.startTime<r?(e.before_set&&e.before_set.call(a,l),l.timeoutKey=setTimeout(l.thread,s),e.after_set&&e.after_set.call(a,l)):l.thread(),o}catch(t){p.w.printStackTrace(t,null,this)}},f.clearTimeout=function(t,e){try{
"function"==typeof t&&(t=t.toString().slice(0,30));var i=WebSquare.userTimerHash[t];i&&(clearTimeout(i.timeoutKey),e&&i.thread(),WebSquare.userTimerHash[t]=null,delete WebSquare.userTimerHash[t])}catch(t){p.w.printStackTrace(t,null,this)}},f.setInterval=function(t,e){try{var i=e.key||t.toString().slice(0,30),o=e.delay||1,s=e.caller,r=e.args,a=WebSquare.userIntervalHash[i];return a||(a=WebSquare.userIntervalHash[i]={thread:null,timeoutKey:null}),r?(s||(s=window),a.thread=function(){t.apply(s,r)}):a.thread=s?function(){t.call(s)}:function(){t()},null!=a.timeoutKey&&clearInterval(a.timeoutKey),a.timeoutKey=setInterval(a.thread,o),i}catch(t){p.w.printStackTrace(t,null,this)}},f.clearInterval=function(t,e){try{"function"==typeof t&&(t=t.toString().slice(0,30));var i=WebSquare.userIntervalHash[t];i&&(clearInterval(i.timeoutKey),e&&i.thread(),WebSquare.userIntervalHash[t]=null,delete WebSquare.userIntervalHash[t])}catch(t){p.w.printStackTrace(t,null,this)}},f.getTimeoutKeyList=function(){var t=[];for(var e in WebSquare.userTimeoutHash)t.push(e);return t},f.getIntervalKeyList=function(){var t=[];for(var e in WebSquare.userIntervalHash)t.push(e);return t},f.setData=function(t,e){try{WebSquare.userData[t]=e}catch(t){p.w.printStackTrace(t,null,this)}},f.getData=function(t){try{return WebSquare.userData[t]||null}catch(t){p.w.printStackTrace(t,null,this)}},f.removeData=function(t){try{if("object"==(0,n.Z)(WebSquare.userData[t]))for(var e in WebSquare.userData[t])delete WebSquare.userData[t][e];WebSquare.userData[t]=null,delete WebSquare.userData[t]}catch(t){p.w.printStackTrace(t,null,this)}},f.url=function(t,e){try{if(null==e&&(e={}),null==e.shortURL&&(e.shortURL=t.indexOf("?w2xPath")<0&&t.indexOf("#w2xPath")<0&&t.slice(t.lastIndexOf(".")).startsWith(".xml")),!e.shortURL)return void("#"==t.charAt(0)?location.hash=t:e.replaceHistory?location.replace(t):location.assign(t));null==e.spa&&(e.spa="true"==g.v.getConfiguration("/WebSquare/spa/@value"));var i="";if(e.param)for(var o in e.param)WebSquare.util.getEncodeParameterOption("onlyParam")?i+="&"+WebSquare.util.encodeParameter(o)+"="+WebSquare.text.URLEncoder(e.param[o]):i+="&"+o+"="+WebSquare.text.URLEncoder(e.param[o]);var s="w2xPath";if(WebSquare.util.getEncodeParameterOption("pathName")?s=WebSquare.util.getEncodeParameterOption("pathName"):WebSquare.util.isEncodeParameter()&&(s=WebSquare.util.encodeParameter("w2xPath")),m.k.printLog("before change url"),e.spa){var r=g.v.getURL(t);(f=(c=location.toString()).indexOf("#"))<0&&(f=c.length);var a=c.substring(0,f);b=WebSquare.util.isEncodeParameter()?WebSquare.util.getEncodeParameterOption("onlyParam")?a+"#"+s+"="+r+i:a+"#"+s+"="+WebSquare.util.encodeParameter(r+i):a+"#"+s+"="+r+i;var n=e.transition?e.transition.toLowerCase():"",l="",h=g.v.getXMLHTTPObject(),d=u.x.baseURI+"suffix.txt?postfix="+(new Date).getTime()+1e4*Math.random();if(h.open("GET",d,!1),h.send(null),h.status>="400"||(l=h.responseText.wq_trim(),WebSquare.suffix!=l&&(WebSquare.suffix=l,e.forceReload=!0)),h=null,e.urlHashText&&(b=WebSquare.util.isEncodeParameter()?a+WebSquare.util.encodeParameter("#"+e.urlHashText+i):a+"#"+e.urlHashText+i,WebSquare.spaURLMapping[e.urlHashText]=WebSquare.text.URLDecoder(r),"sessionStorage"in window&&sessionStorage.setItem("wq_spaURLMapping",JSON.stringify(WebSquare.spaURLMapping))),e.forceReload){if("onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),e.replaceHistory)switch(n){case"fadeout":$("body").fadeOut(1e3,(function(){location.replace(b)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.replace(b)}));break;default:location.replace(b)}else switch(n){case"fadeout":$("body").fadeOut(1e3,(function(){location.assign(b)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.assign(b)}));break;default:location.assign(b)}if(g.v.firePageunload||g.v.onurlchange||(g.v.firePageunload=!0,WebSquare.event.fireEvent(WebSquare.getBody(),"onpageunload")),
!g.v.onurlchange)"true"!==g.v.getConfiguration("/WebSquare/clearMemory/@value")&&WebSquare.clearMemory(),wq_reload(b)}else if(WebSquare.w2xPath="",b==c)WebSquare.util.onhashchange();else if(g.v.urlchangebyapi=!0,e.replaceHistory)switch(n){case"fadeout":$("body").fadeOut(1e3,(function(){location.replace(b)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.replace(b)}));break;default:location.replace(b)}else switch(n){case"fadeout":$("body").fadeOut(1e3,(function(){location.assign(b)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.assign(b)}));break;default:location.assign(b)}}else{var c,f;r=g.v.getURL(t);(f=(c=location.toString()).indexOf("?"))<0&&(f=c.indexOf("#"))<0&&(f=c.length);var b;a=c.substring(0,f);if(b=WebSquare.configPath?a+"?w2Config="+WebSquare.configPath+"&"+s+"=":a+"?"+s+"=",WebSquare.util.isEncodeParameter()?WebSquare.util.getEncodeParameterOption("onlyParam")?b=b+r+i:b+=WebSquare.util.encodeParameter(r+i):b=b+r+i,"onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),WebSquare.event.fireEvent(WebSquare.getBody(),"onpageunload"),e.replaceHistory)switch(n){case"fadeout":$("body").fadeOut(1e3,(function(){location.replace(b)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.replace(b)}));break;default:location.replace(b)}else switch(n){case"fadeout":$("body").fadeOut(1e3,(function(){location.assign(b)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.assign(b)}));break;default:location.assign(b)}}}catch(t){p.w.printStackTrace(t)}},f.clearPage=function(){return g.v.onclearpage=!0,WebSquare.util.url(WebSquare.net.getBlankXML(),{spa:!0,forceReload:!0})},f.reinitializeWframe=function(t,e){try{var i=JSON.stringify(e),o=WebSquare.util.getFrameFromPoint(i),s=null;o&&(s=WebSquare.idCache[o]),s&&s.reload()}catch(t){p.w.printStackTrace(t)}},f.reinitialize=function(t){try{if(m.k.printLog("before redraw page"),t)"onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),g.v.finalize(),location.reload();else{var e=WebSquare.net.getParameter("w2xPath");""!=e&&e==WebSquare.w2xPath||(location.hash=location.hash+"#w2xPath="+WebSquare.w2xPath),WebSquare.w2xPath="",WebSquare.util.onhashchange()}}catch(t){p.w.printStackTrace(t)}},f.reinitializeTop=function(){try{var t=WebSquare.util.getTop();t.WebSquare&&t.WebSquare.util.reinitialize(!1)}catch(t){p.w.printStackTrace(t)}},f.onhashchange=function(){var t=(0,l.Z)(d().mark((function t(e){var i,o,s,r,a,n,l,h,u,f,b,y;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=!1,o="",null!=(s=WebSquare.util.getUrlHashText())&&(i=!0,o=s),i||(o=WebSquare.net.getParameter("w2xPath")),""!=o){t.next=10;break}return location.toString().indexOf("."+WebSquare.w2xExtension),t.abrupt("return");case 10:if(o!=WebSquare.w2xPath){t.next=12;break}return t.abrupt("return");case 12:if(g.v.urlchangebyapi||""===WebSquare.w2xPath){t.next=15;break}if(!(location.hash.indexOf("w2xPath")<0)||i){t.next=15;break}return t.abrupt("return");case 15:for(r in"onhashchange"in window?window.onhashchange=null:window.clearInterval(WebSquare.util._hashTestKey),c.d.performanceCheck)c.d.performanceCheck[r]=new Date;if(c.d.printLog("[SPA1] The user request for new XML page. "),a=location.href,g.v.onurlchange=!0,g.v.onclearpage=!1,g.v.finalize(),g.v.onurlchange=!1,g.v.urlchangebyapi=!1,!g.v.onclearpage&&(i||WebSquare.net.getParameter("w2xPath")==o)){t.next=31;break}return g.v.onclearpage=!1,location.replace(a),"true"!==g.v.getConfiguration("/WebSquare/clearMemory/@value")&&WebSquare.clearMemory(),window.wq_reload(a),t.abrupt("return");case 31:return g.v.onclearpage=!1,c.d.performanceCheck.mid1=new Date,c.d.printLog("[SPA2] Clear page resources. Time:"+(c.d.performanceCheck.mid1.getTime()-c.d.performanceCheck.start.getTime())+"ms"),WebSquare.w2xPath=o,n=/[\\]/g,WebSquare.w2xPath=WebSquare.w2xPath.replace(n,"/"),l=WebSquare.w2xPath.lastIndexOf("/"),
""==WebSquare.net.getParameter("w2xHome")?WebSquare.w2xHome=l>-1?WebSquare.w2xPath.substring(0,l+1):"/":WebSquare.w2xHome=WebSquare.net.getParameter("w2xHome"),WebSquare.logFileName=l>-1?" "+WebSquare.w2xPath.substring(l+1):" "+WebSquare.w2xPath,"/"==(h=WebSquare.net.getParameter("w2xDocumentRoot"))||"\\"==h?WebSquare.w2xDocumentRoot="":""!=h&&(WebSquare.w2xDocumentRoot=h),m.k.printLog("w2xDocumentRoot["+WebSquare.w2xDocumentRoot+"]"),m.k.printLog("w2xHome        ["+WebSquare.w2xHome+"]"),m.k.printLog("w2xPath        ["+WebSquare.w2xPath+"]"),m.k.printLog("w2xTheme       ["+WebSquare.w2xTheme+"]"),t.next=48,c.d.loadEngineModuleAsync(!0);case 48:g.v._createGlobalVariable(),WebSquare._loadCSS({isSPA:!0,w2xPath:o}),u=g.v.getConfiguration("/WebSquare/spa/defer/@function"),b=parseInt(g.v.getConfiguration("/WebSquare/spa/defer/@delay"),10)||0,u&&(f=WebSquare.util.getGlobalFunction(u)),y=!1,"function"==typeof f&&b>0&&(y=f(o)),!0===y?WebSquare.util.setTimeout(WebSquare.util._onhashchange,{key:"WebSquare.util._onhashchange",caller:this,delay:b,args:[o]}):WebSquare.util._onhashchange(o),t.next=61;break;case 58:t.prev=58,t.t0=t.catch(1),p.w.printStackTrace(t.t0);case 61:case"end":return t.stop()}}),t,this,[[1,58]])})));return function(e){return t.apply(this,arguments)}}(),f._onhashchange=function(t){if(!WebSquare.initialize(t,!0)){"onhashchange"in window?window.onhashchange=WebSquare.util.onhashchange:WebSquare.util._hashTestKey=window.setInterval(WebSquare.util._hashTest,50),m.k.printLog("Runtime Error : "+t+" load failed.");var e=WebSquare.language.getMessage("E_initializer_XMLLoadFailError",t);WebSquare.loadErrorHandler({code:"E_initializer_XMLLoadFailError",msg:e})}},f.getUrlHashText=function(){try{var t=null;for(var e in WebSquare.spaURLMapping)for(var i=location.hash.slice(1).split(/[\&\?\#]/),o=0;o<i.length;o++)if(e===i[o]){t=WebSquare.spaURLMapping[e];break}return t}catch(t){p.w.printStackTrace(t,null,this)}},f._stopProcess=function(t){if(t||location.hash&&location.hash.lastIndexOf("w2xPath")>=0){var e=WebSquare.util.getUrlHashText();if(null==e&&(e=WebSquare.net.getParameter("w2xPath")),!e)return!1;if(e!=WebSquare.w2xPath)return m.k.printLog("[SPA_Exception] Event Activation Canceled by New Page Request : #w2xPath="+e),WebSquare.util.onhashchange(),!0}return!1},f.isSPA=function(){return location.hash&&location.hash.lastIndexOf("w2xPath")>=0||null!=WebSquare.util.getUrlHashText()},f.movePage=function(){var t=(0,l.Z)(d().mark((function t(e){var i,o,s,r,a,n,l,h,u,b,y,v;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=1,i=e,"onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),c.d.performanceCheck)c.d.performanceCheck[o]=new Date;if(c.d.printLog("[SPA1] The user request for new XML page. "),g.v.onurlchange=!0,g.v.onclearpage=!1,"true"!==g.v.getConfiguration("/WebSquare/spa/autoReload/@value").toLowerCase()){t.next=24;break}t.t0=d().keys(g.v.memoryLeakComponent);case 10:if((t.t1=t.t0()).done){t.next=19;break}if(s=t.t1.value,null==WebSquare.componentsCache[s]){t.next=17;break}if(WebSquare.hybridApp||!(Number(g.v.getConfiguration("/WebSquare/spa/autoReload/@"+s))<=WebSquare.componentsCache[s].length)){t.next=16;break}try{(r=g.v.getConfiguration("/WebSquare/spa/autoReload/@userFunction"))?"function"==typeof(a=WebSquare.util.getGlobalFunction(r))&&a(e):WebSquare.util.url(e,{spa:!1})}catch(t){}return t.abrupt("return");case 16:g.v.memoryLeakComponentCount+=WebSquare.componentsCache[s].length*g.v.memoryLeakComponent[s];case 17:t.next=10;break;case 19:if(n=""==(n=g.v.getConfiguration("/WebSquare/spa/autoReload/@count"))?NaN:Number(n),!(!WebSquare.hybridApp&&g.v.memoryLeakComponentCount>0&&g.v.memoryLeakComponentCount>n)){t.next=24;break}try{(r=g.v.getConfiguration("/WebSquare/spa/autoReload/@userFunction"))?"function"==typeof(a=WebSquare.util.getGlobalFunction(r))&&a(e):WebSquare.util.url(e,{spa:!1})}catch(t){}return t.abrupt("return");case 24:return g.v.finalize(),
g.v.onurlchange=!1,g.v.urlchangebyapi=!1,g.v.onclearpage=!1,c.d.performanceCheck.mid1=new Date,c.d.printLog("[SPA2] Clear page resources. Time:"+(c.d.performanceCheck.mid1.getTime()-c.d.performanceCheck.start.getTime())+"ms"),WebSquare.w2xPath=i,l=/[\\]/g,WebSquare.w2xPath=WebSquare.w2xPath.replace(l,"/"),h=WebSquare.w2xPath.lastIndexOf("/"),""==WebSquare.net.getParameter("w2xHome")?WebSquare.w2xHome=h>-1?WebSquare.w2xPath.substring(0,h+1):"/":WebSquare.w2xHome=WebSquare.net.getParameter("w2xHome"),WebSquare.logFileName=h>-1?" "+WebSquare.w2xPath.substring(h+1):" "+WebSquare.w2xPath,"/"==(u=WebSquare.net.getParameter("w2xDocumentRoot"))||"\\"==u?WebSquare.w2xDocumentRoot="":""!=u&&(WebSquare.w2xDocumentRoot=u),m.k.printLog("w2xDocumentRoot["+WebSquare.w2xDocumentRoot+"]"),m.k.printLog("w2xHome        ["+WebSquare.w2xHome+"]"),m.k.printLog("w2xPath        ["+WebSquare.w2xPath+"]"),m.k.printLog("w2xTheme       ["+WebSquare.w2xTheme+"]"),t.next=44,c.d.loadEngineModuleAsync(!0);case 44:return b=WebSquare.util._stopProcess,f._stopProcess=function(){},t.next=48,WebSquare.initialize(i,!0);case 48:if(t.sent){t.next=53;break}"onhashchange"in window?window.onhashchange=WebSquare.util.onhashchange:WebSquare.util._hashTestKey=setInterval(WebSquare.util._hashTest,50),m.k.printLog("Runtime Error : "+i+" load failed."),y=WebSquare.language.getMessage("E_initializer_XMLLoadFailError",i),WebSquare.loadErrorHandler({code:"E_initializer_XMLLoadFailError",msg:y});case 53:for(v in g.v.clearTimer("WebSquare_startOnload"),WebSquare.DataCollection.activated=!0,WebSquare.DataCollection.comp)WebSquare.DataCollection.comp[v].activate();WebSquare.getBody().activate(),c.d.performanceCheck.mid6=new Date,c.d.printLog("[SPA7][EVENT] Event Activation. Time:"+(c.d.performanceCheck.mid6.getTime()-c.d.performanceCheck.mid5.getTime())+"ms"),WebSquare.startOnLoad(!0),"onhashchange"in window?window.onhashchange=WebSquare.util.onhashchange:WebSquare.util._wait_for_iframe_reload(),WebSquare.getBody().onComplete(),WebSquare.DataCollection.api.onComplete(),WebSquare.util._stopProcess=b,t.next=69;break;case 66:t.prev=66,t.t2=t.catch(1),p.w.printStackTrace(t.t2);case 69:case"end":return t.stop()}}),t,null,[[1,66]])})));return function(e){return t.apply(this,arguments)}}(),"onhashchange"in window||(f._hashTest=function(){if(WebSquare.util._hash){if(WebSquare.util._hash!=location.hash)WebSquare.util._hash=location.hash,WebSquare.util.onhashchange();else if(WebSquare.util._hiddenFrame&&!WebSquare.util._iframe_wait){try{var t=document.getElementById(WebSquare.util._hiddenFrame.id);if(null!=t){var e=t.contentWindow.location.search.slice(1);if(e!=WebSquare.w2xPath){var i=location.hash.lastIndexOf("#w2xPath");if(i<0)location.hash.length>0?location.hash=location.hash+"&w2xPath="+e:location.hash="#w2xPath="+e;else{var o=location.hash.substring(i+1).search(/[\&\?\#]/)+1;o<0?location.hash=location.hash.slice(0,i)+"#w2xPath="+e:(location.hash=location.hash.slice(0,i)+"#w2xPath="+e+location.hash.substring(i+o),alert(location.hash.slice(0,i)),alert(e),alert(location.hash.substring(i+o))),alert(location.hash)}}}else document.body.appendChild(WebSquare.util._hiddenFrame)}catch(t){p.w.printStackTrace(t)}t=null}}else WebSquare.util._hash=location.hash},f._makeFrame=function(){try{var t=document.createElement("iframe");t.id="wq_hidden_frame_for_spa_history",t.src=u.x._resourceURI+"blank.html?"+WebSquare.w2xPath,t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.style.display="none",WebSquare.util._hiddenFrame=document.body.appendChild(t),t=null}catch(t){p.w.printStackTrace(t)}},f._wait_for_iframe_reload=function(t){(t||location.hash&&location.hash.lastIndexOf("w2xPath")>=0)&&WebSquare.util._iframe_wait&&(WebSquare.util._hiddenFrame.contentWindow.location.search.slice(1)!=WebSquare.w2xPath?setTimeout(WebSquare.util._wait_for_iframe_reload,5):(WebSquare.util._iframe_wait=!1,WebSquare.util._hashTestKey=setInterval(WebSquare.util._hashTest,50)))}),f.setFullView=function(t){
try{var e=function(){var e=window.innerWidth||document.body.clientWidth,i=window.innerHeight||document.body.clientHeight;if(null!==t&&"function"==typeof t){var o=t();if(null!==o&&"object"===(0,n.Z)(o)&&o.baseHeight&&o.baseWidth){var s,r,a=e/o.baseWidth,l=i/o.baseHeight;(s=a>l?l:a)<(r=!isNaN(parseFloat(o.minZoom))&&isFinite(o.minZoom)?o.minZoom:.5)&&(s=r),WebSquare.util.isIEAllVersion()&&(document.body.style.width=document.documentElement.offsetWidth/s+"px",document.body.style.height=document.documentElement.offsetHeight/s+"px"),WebSquare.util.zoomed(document.body,s),WebSquare.util.isIEAllVersion()||WebSquare.util.traverseAndZoom(document,s),WebSquare.util.fullViewed=!0,WebSquare.util.fullViewRatio=s,document.documentElement.style.overflow="hidden"}else!isNaN(parseFloat(o))&&isFinite(o)&&(WebSquare.util.isIEAllVersion()&&(document.body.style.width=document.documentElement.offsetWidth/s+"px",document.body.style.height=document.documentElement.offsetHeight/s+"px"),WebSquare.util.zoomed(document.body,o),WebSquare.util.isIEAllVersion()||WebSquare.util.traverseAndZoom(document,o),WebSquare.util.fullViewed=!0,WebSquare.util.fullViewRatio=o,document.documentElement.style.overflow="hidden")}};WebSquare.getBody().event.addListener(window,"onresize",e),e()}catch(t){p.w.printStackTrace(t)}},f.getMetaValue=function(t){try{var e="",i=WebSquare.Elem.api.getElementsByTagName(WebSquare.WebSquaredoc.getPageInfo(),"head")[0];return i&&(e=WebSquare.Elem.api.getAttribute(i,t)),e}catch(t){p.w.printStackTrace(t)}},f.traverseAndZoom=function(t,e){for(var i=t.getElementsByTagName("iframe"),o=0;o<i.length;o++)i[o].contentWindow.WebSquare.util.zoomed(i[o].contentWindow.document.body,e),i[o].contentWindow.WebSquare.util.traverseAndZoom(i[o].contentWindow.document,e)},f.zoomed=function(t,e){if(c.d.browserCheck.moz&&t&&t.style)t.style.MozTransform="scale("+e+")",t.style.MozTransformOrigin="left top";else if(t&&t.style&&(t.style.zoom=e,c.d.fullViewClass)){c.d.fullViewClass=!1;for(var i=document.getElementsByTagName("style"),o=0;o<i.length;o++)if(i[o].innerHTML==c.d.fullViewClassCssText){document.getElementsByTagName("head")[0].removeChild(i[o]);break}}},f.createProgressBar=function(t){try{if(t&&t.id){var e=WebSquare.util.dynamicCreate(t.id,"progressbar",t);e.render.style.zIndex=4500,e.setStyle("position","absolute")}else m.k.printLog("Please set Progressbar options id")}catch(t){p.w.printStackTrace(t)}},f.getNextTabbableComp=function(t){try{var e;return e=function t(e){if(null!=WebSquare.tabOrder[e]&&null!=WebSquare.tabOrder[e].nextTabID){var i=WebSquare.tabOrder[e].nextTabID,o=WebSquare.util.getComponentById(i);if(o)return!0===o.getReadOnly()||!0===o.getDisabled()||$("#"+i+":visible").length<1?t(i):i}}(t),WebSquare.util.getComponentById(e)||WebSquare.util.getComponentById(t)}catch(t){p.w.printStackTrace(t)}},f.getPreTabbableComp=function(t){try{var e;return e=function t(e){if(null!=WebSquare.tabOrder[e]&&null!=WebSquare.tabOrder[e].preTabID){var i=WebSquare.tabOrder[e].preTabID,o=WebSquare.util.getComponentById(i);if(o)return!0===o.getReadOnly()||!0===o.getDisabled()||$("#"+i+":visible").length<1?t(i):i}}(t),WebSquare.util.getComponentById(e)||WebSquare.util.getComponentById(t)}catch(t){p.w.printStackTrace(t)}},f.setNextTabPageComp=function(t,e){try{var i=WebSquare.util.getComponentById(t);if(i&&("wframe"==i.options.pluginName||i.options.udcName)){var o,s=null;if(e&&e.firstTabID&&(i.options.firstTabID=e.firstTabID),e&&e.lastTabID&&(i.options.lastTabID=o=e.lastTabID),i.options.nextTabID){s=$("#"+i.id+" *:wq:tabbable"),null==WebSquare.tabOrder[i.id]&&(WebSquare.tabOrder[i.id]={});var r=null;i.options.udcName?i.parentFrame&&void 0!==WebSquare.idCache[i.parentFrame]&&(r=WebSquare.idCache[i.parentFrame].id):r=i.scope_id;var a,n=null!=r?WebSquare.util.getComponentById(i.options.nextTabID,r).id:i.options.nextTabID;if(WebSquare.tabOrder[i.id].nextTabID=n,o)a=null!=r?WebSquare.util.getComponentById(i.options.lastTabID,r).id:i.options.lastTabID;else{
var l=$(s[s.length-1]).wq()[0];l&&(a=l.id)}a&&(null==WebSquare.tabOrder[n]&&(WebSquare.tabOrder[n]={}),WebSquare.tabOrder[n].preTabID=a,null==WebSquare.tabOrder[a]&&(WebSquare.tabOrder[a]={}),WebSquare.tabOrder[a].nextTabID=n)}if(null!=WebSquare.tabOrder[i.id]&&null!=WebSquare.tabOrder[i.id].preTabID){var h,d=null;if(null!=i.options.firstTabID)d=null!=r?WebSquare.util.getComponentById(i.options.firstTabID,r).id:i.options.firstTabID;else null==s&&(s=$("#"+i.id+" *:wq:tabbable")),(h=$(s[0]).wq()[0])&&(d=h.id);if(d){var u=WebSquare.tabOrder[i.id].preTabID;WebSquare.tabOrder[u].nextTabID=d,null==WebSquare.tabOrder[d]&&(WebSquare.tabOrder[d]={}),WebSquare.tabOrder[d].preTabID=u}}}}catch(t){p.w.printStackTrace(t)}},f.setNextTabID=function(t,e,i){try{if(null!=e){null==WebSquare.tabOrder[t]&&(WebSquare.tabOrder[t]={});var o=i,s=f.getComponentById(t,i);s.options.inheritedCompName&&(o=WebSquare.idCache[s.parentFrame].id);var r=WebSquare.util.getComponentById(e,o);e=null!=o?r.id:e;if(WebSquare.tabOrder[e]&&r&&("wframe"===r.options.pluginName||r.options.udcName))if(WebSquare.tabOrder[e].preTabID!==t){var a=null;if(o||(r.options.udcName?r.parentFrame&&void 0!==WebSquare.idCache[r.parentFrame]&&(o=WebSquare.idCache[r.parentFrame].id):o=r.scope_id),null!=WebSquare.tabOrder[r.id]){var n,l=null;if(null!=r.options.firstTabID)l=null!=o?WebSquare.util.getComponentById(r.options.firstTabID,o).id:r.options.firstTabID;else null==a&&(a=$("#"+r.id+" *:wq:tabbable")),(n=$(a[0]).wq()[0])&&(l=n.id);l&&(WebSquare.tabOrder[t].nextTabID=l,null==WebSquare.tabOrder[l]&&(WebSquare.tabOrder[l]={}),WebSquare.tabOrder[l].preTabID=t)}}else WebSquare.tabOrder[t].nextTabID=e;else WebSquare.tabOrder[t].nextTabID=e;null==WebSquare.tabOrder[e]&&(WebSquare.tabOrder[e]={}),WebSquare.tabOrder[e].preTabID=t}}catch(t){p.w.printStackTrace(t)}},f.autoFocus=function(t,e){WebSquare.util.autoFocus;try{var i=WebSquare.util.getStringByByteSize(e,t.options.maxByteLength+2,t.options.byteCheckIgnoreChar),o=WebSquare.util.getByteLength(i)===t.options.maxByteLength&&!0!==WebSquare.util.isKorean(e.charAt(e.length-1)),s=WebSquare.util.getByteLength(i)>t.options.maxByteLength;t.options.autoFocus&&(o||s)&&WebSquare.util._autoFocus(t)}catch(t){p.w.printStackTrace(t)}},f._autoFocus=function(t){WebSquare.util.autoFocus;try{if(null!=WebSquare.tabOrder[t.id]&&null!=WebSquare.tabOrder[t.id].nextTabID){var e=WebSquare.util.getNextTabbableComp(t.id);e&&e.focus()}else{var i=WebSquare.util.getGlobalFunction(g.v.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof i&&i.call(t,t.id)}}catch(t){p.w.printStackTrace(t)}},f.multipleExcelDownload=function(t){try{for(var e,i=t.common,o=t.excelInfo,s={},r=[],a=[],n=!0,l=[],h="",d=i.advancedExcelDownloadURL||"",u=0;u<o.length;u++){for(var c in s={},r=[],s=o[u],i)s[c]=i[c];if(s.dataProvider=s.dataProvider||"",s.splitProvider=s.splitProvider||"",""==s.dataProvider&&!1,""==s.sheetName){n=!1;break}var f;f=s.sheetName;for(var b=0;b<a.length;b++)if(a[b]==s.sheetName){s.sheetName=s.sheetName+"("+b+")";break}a.push(f),r=s.infoArr,h=s.wframeId||"",null!=(e=WebSquare.util.getComponentById(s.gridId,h))&&null!=e.delayedDrawObj&&e.setRedrawStatus("draw");var y=parseInt(s.rowsByN);switch(s.rowsByN=y>100?y:100,s.dataLength=e.getDataLength(),s.type+""){case"":case"0":s.type=0;break;case"2":s.type=2;break;default:s.type=1}if(0===s.type||1===s.type){0==u&&(!0===s.showProcess?(s.processMsg=s.processMsg||"composing excel data...",WebSquare.layer.showProcessMessage(s.processMsg,{scope:t.scopeId||s.wframeId||""})):WebSquare.getBody().showModal("w2modal_gridDownload")),s.cellInfo=[],s.isPlainDataCol=[],s.isSelectCol=[],s.isBasicCol=[],s.isExpCol=[],s.isCustomCol=[],s.isCustomModelCol=[],s.isCustomType=[],s.isEscapeFormatter=[];var v=e.oneRowDataLength;for(b=0;b<v;b++){var w=e.getCellInfo(b),S=w.options.inputType;s.cellInfo[b]=w,s.isCustomType[b]="custom"===S,s.isPlainDataCol[b]="checkbox"===S||"image"===S||"radio"===S||"autofinder"===S,
s.isSelectCol[b]="select"===S||"checkcombobox"===S||"autoComplete"===S,s.isExpCol[b]="expression"===S,s.isCustomModelCol[b]=w.useCustomModelFormatter,s.isCustomCol[b]=w.useCustomFormatter,s.isBasicCol[b]=!(s.isPlainDataCol[b]||s.isSelectCol[b]||s.isExpCol[b]||s.isCustomModelCol[b]||s.isCustomType[b]),s.isEscapeFormatter[b]=w.useEscapeFormatter}}s.multiexcel=!0,s.massStorage=!1;var C=e.makeExcelData(0,[],s,r);0==l.length?(l=C)[0]="<vector result='"+o.length+"'>":(C[1]="<data vectorkey='"+u+"'><hashtable>",C.pop(),C.shift(),l.pop(),(l=l.concat(C)).push("</vector>"))}0==n&&m.k.printLog("sheetName has not been set. Set the properties sheetName."),1==n&&(""==d&&(d=e.options.advancedExcelDownloadURL),s.scopeId=t.scopeId||s.wframeId||"",g.v.excelDownload(d,l.join(""),"post",s),e.xmlData=null,void 0===s.showProcess||!1===s.showProcess?WebSquare.getBody().hideModal():!0===s.showConfirm&&this.hideDownloadLayer())}catch(t){p.w.printStackTrace(t,null,this)}},f.multipleExcelUpload=function(t){try{if(!t&&t.common)return;if(!t&&t.excelInfo)return;var e={status:[],uploadType:[],columnIds:[],dataList:[],gridID:[],wframeId:[]},i=t.common,o=t.excelInfo,s="",r=i.processMsg||"";r=WebSquare.text.BASE64URLEncoder(r);var a,n="",l="",h="",d="",u=i.callbackFunction||"",g=t.scopeId,m=[];m.push("<vector result='"+o.length+"'>");for(var f=0;f<o.length;f++){var b={};d=(S=o[f]).wframeId||"";var y=WebSquare.util.getComponentById(S.gridId,d),v=y.element._elementType;m.push("<data vectorkey='"+f+"'>"),m.push("<hashtable>");var w="";w="json"===v?WebSquare.xmljs.json2xml(y.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(y.element),m.push("<data hashkey='style'>"+w+"</data>");var S,C=(S=S||{}).type||"0",x=S.removeColumns||"",_=S.startRowIndex||"0",I=S.startColumnIndex||"0",T=S.endColumnIndex||"-1",k=S.sheetNo||"0",D=S.headerExist||"0";0===S.footerExist&&(S.footerExist="0");var L=S.footerExist||"1",W=S.append||"0",A=S.hidden||"0",E=S.fillHidden||"0";s=S.popupUrl||y.options.advancedExcelUploadPopupURL;var M=S.optionParam||"",q=S.skipSpace||"0",R=S.insertColumns||[],N="";if(y.options.dataList){var F=y.modelControl.getDataComp(y.options.dataList);null!=F&&(N=F.id)}var O=S.status||"R",B=S.delim||",",V="",H="",P=S.pwd||"",j=i.loadingMode||"POI";h=i.maxFileSize||"-1";var z=S.cellDataConvertor||"",G=S.decimal||"4";a=S.useModalDisable||"false";for(var U=S.useMaxByteLength||"false",X=i.advancedExcelUploadURL||"",K=0;K<R.length;K++){var $=R[K],Y=$.columnIndex+""||"",Z=$.columnValue+""||"";""!=Y&&(V=V+H+Y+","+Z,H="|")}D=parseInt(D,10),W=parseInt(W,10),A=parseInt(A,10),L=parseInt(L,10),b.header=1==D?"true":"false",b.footer=1==L?"true":"false",b.append=1==W?"true":"false",b.removeColumns=x,b.fillHidden=1==E?"true":"false",b.hidden=1==A?"true":"false",b.type=1==C?"true":"false",b.uploadType=C,b.skipSpace=1==q?"true":"false",b.insertColumns=V,b.optionParam=M,n=""==X?y.options.advancedExcelUploadURL:X,b.gridID=y.id;var J=[];for(K=y.defaultColCnt;K<y.hiddenList.length;K++)1==y.hiddenList[K]&&J.push(K-y.defaultColCnt);b.columnNum=y.getTotalCol(),b.expressionColumns=y.getExpressionColumnArr().join(","),b.hiddenColumns=J.join(","),b.headerRows=y.getElementById(y.id+"_head_table").rows.length,b.gridStartRow=_||"1",b.gridStartCol=I||"1",b.gridEndCol=T,b.gridSheetNo=k||"0",b.domain="",WebSquare.domain&&(b.domain=WebSquare.text.URLEncoder(WebSquare.domain)),b.delim=B,b.dataList=N,b.columnIds=y.cellIdList.join(","),b.status=O,b.pwd=P,b.loadingMode=j,b.maxFileSize=h,b.cellDataConvertor=z,b.decimal=G,b.useMaxByteLength=U+"","grid"==y.initializeType&&y.options.ref&&S.instanceBind&&(b.instanceBind=S.instanceBind);s=S.popupUrl||y.options.advancedExcelMultiUploadPopupURL;var Q=S.advancedHidden||"0",tt="";""!=b.pwd&&(tt=WebSquare.text.BASE64Encoder(b.pwd)),b.pwd=tt,m.push("<data hashkey='type' value='"+b.type+"'/>"),m.push("<data hashkey='header' value='"+b.header+"'/>"),m.push("<data hashkey='footer' value='"+b.footer+"'/>"),
m.push("<data hashkey='append' value='"+b.append+"'/>"),m.push("<data hashkey='removeColumns' value='"+b.removeColumns+"'/>"),m.push("<data hashkey='fillHidden' value='"+b.fillHidden+"'/>"),m.push("<data hashkey='hidden' value='"+b.hidden+"'/>"),m.push("<data hashkey='uploadType' value='"+b.uploadType+"'/>"),m.push("<data hashkey='skip_space' value='"+b.skipSpace+"'/>"),m.push("<data hashkey='insertColumns' value='"+b.insertColumns+"'/>"),m.push("<data hashkey='optionParam' value='"+b.optionParam+"'/>"),m.push("<data hashkey='gridID' value='"+b.gridID+"'/>"),m.push("<data hashkey='columnNum' value='"+b.columnNum+"'/>"),m.push("<data hashkey='expressionColumns' value='"+b.expressionColumns+"'/>"),m.push("<data hashkey='hiddenColumns' value='"+b.hiddenColumns+"'/>"),m.push("<data hashkey='headerRows' value='"+b.headerRows+"'/>"),m.push("<data hashkey='gridStartRow' value='"+b.gridStartRow+"'/>"),m.push("<data hashkey='gridStartCol' value='"+b.gridStartCol+"'/>"),m.push("<data hashkey='gridEndCol' value='"+b.gridEndCol+"'/>"),m.push("<data hashkey='gridSheetNo' value='"+b.gridSheetNo+"'/>"),m.push("<data hashkey='domain' value='"+b.domain+"'/>"),m.push("<data hashkey='delim' value='"+b.delim+"'/>"),m.push("<data hashkey='dataList' value='"+b.dataList+"'/>"),m.push("<data hashkey='columnIds' value='"+b.columnIds+"'/>"),m.push("<data hashkey='status' value='"+b.status+"'/>"),m.push("<data hashkey='pwd' value='"+b.pwd+"'/>"),m.push("<data hashkey='loadingMode' value='"+b.loadingMode+"'/>"),m.push("<data hashkey='maxFileSize' value='"+b.maxFileSize+"'/>"),m.push("<data hashkey='cellDataConvertor' value='"+b.cellDataConvertor+"'/>"),m.push("<data hashkey='decimal' value='"+b.decimal+"'/>"),m.push("<data hashkey='useMaxByteLength' value='"+b.useMaxByteLength+"'/>"),m.push("<data hashkey='advancedHidden' value='"+b.advancedHidden+"'/>"),m.push("<data hashkey='bodyRows' value='"+y.struct.body.rowArr.length+"'/>"),m.push("</hashtable>"),m.push("</data>"),e.status.push(b.status),e.uploadType.push(b.uploadType),e.columnIds.push(b.columnIds),e.dataList.push(b.dataList),e.gridID.push(b.gridID),e.wframeId.push(d)}m.push("</vector>"),s+="?gridID="+b.gridID,WebSquare.domain&&(s+="&domain="+b.domain),s+=1==Q?"&advancedHidden=true":"&advancedHidden=false",s+="&multi=true",e.processMsg=r,e.maxFileSize=h,e.useModalDisable=a,e.action=n,e.append=W,e.delim=B,e.callbackFunction=u,e.scopeId=g,WebSquare._excelMultiInfo=JSON.stringify(e),WebSquare._excelMultiUploadInfo=m.join(""),l=void 0===i.features||"string"!=typeof i.features?"top=280,height=137,left=160,width=446,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no":i.features,s=c.d.getEngineUri(s),window.open(s,"fileupWindow",l)}catch(t){p.w.printStackTrace(t,null,this)}},f.multipleDataListDownload=function(t){try{for(var e,i=t.common,o=t.excelInfo,s={},r=[],a=[],n=!0,l=[],h="",d=i.dataListDownloadURL||WebSquare.baseServletURI+"dataListToExcel.wq",u=0;u<o.length;u++){for(var c in s={},r=[],s=o[u],i)s[c]=i[c];if(s.dataProvider=s.dataProvider||"",s.splitProvider=s.splitProvider||"",""==s.dataProvider&&!1,""==s.sheetName){n=!1;break}var f;f=s.sheetName;for(var b=0;b<a.length;b++)if(a[b]==s.sheetName){s.sheetName=s.sheetName+"("+b+")";break}a.push(f),r=s.infoArr,h=s.wframeId||"",e=WebSquare.util.getComponentById(s.dataListId,h);var y=parseInt(s.rowsByN);switch(s.rowsByN=y>100?y:100,s.dataLength=e.getDataLength(),s.type+""){case"":case"0":s.type=0;break;case"2":s.type=2;break;default:s.type=1}0==u&&(!0===s.showProcess?(s.processMsg=s.processMsg||"composing excel data...",WebSquare.layer.showProcessMessage(s.processMsg)):WebSquare.getBody().showModal("w2modal_gridDownload"));s.multiexcel=!0;var v=WebSquare.util.makeDataListData(e,0,[],s,r);0==l.length?(l=v)[0]="<vector result='"+o.length+"'>":(v[1]="<data vectorkey='"+u+"'><hashtable>",v.pop(),v.shift(),l.pop(),(l=l.concat(v)).push("</vector>"))}
0==n&&m.k.printLog("sheetName has not been set. Set the properties sheetName."),1==n&&(""==d&&m.k.printLog("multipleDataListDownload has not been set."),s.scopeId=t.scopeId||s.wframeId||"",g.v.excelDownload(d,l.join(""),"post",s),!1===s.showProcess?WebSquare.getBody().hideModal():!0===s.showConfirm&&(window.gridExceldownloadIframe.style.display="none",window.downloadGridId=null,WebSquare.getBody().hideModal()))}catch(t){p.w.printStackTrace(t,null,this)}},f.makeDataListData=function(t,e,i,o,s){try{var r=i.length,a=e+o.rowsByN;a=a<o.dataLength?a:o.dataLength;var n=o.separator||",";if(""==o.dataProvider&&""==o.splitProvider&&(a=o.dataLength,r=(i=t.getAllData()).length),!(a<o.dataLength&&""==o.dataProvider&&""==o.splitProvider)){var l;if(""==o.dataProvider&&""==o.splitProvider)if(i.length>=2)if(r>0){var h=i[0],d=i[r-1];i[0]='<array><![CDATA[["'+h,i[r-1]=d+'"]]]></array>',l=i.join('"'+n+'"'),i[0]=h,i[r-1]=d}else l="<array><![CDATA[["+i+"]]]></array>";else l="<array><![CDATA[["+(1===i.length?'"'+i[0]+'"':"")+"]]]></array>";else l="<array><![CDATA[[ ]]]></array>";return WebSquare.util.sendDataList(t,o,s,l)}WebSquare.util.makeDataListData(t,a,i,o,s)}catch(e){var u=g.v.getConfiguration("/WebSquare/dataList/excel/download/errorHandler/@value"),c=WebSquare.util.getGlobalFunction(u,t.scope_id);"function"==typeof c&&c.call(t,t.id),p.w.printStackTrace(e,null,t)}},f.sendDataList=function(t,e,i,o){var s=WebSquare.xml.encode(e.fileName)||"excel",r=e.sheetName||"sheet",a=(e.type,e.multipleSheet||"true"),n=e.removeColumns||"",l=e.startRowIndex||"0",h=e.startColumnIndex||"0",d=e.headerColor||"",u=e.headerFontName||"",c=e.headerFontSize||"",p=e.headerFontColor||"",g=e.bodyColor||"",m=e.bodyFontName||"",f=e.bodyFontSize||"",b=e.bodyFontColor||"",y=e.rowNumHeaderColor||"",v=e.rowNumHeaderFontName||"",w=e.rowNumHeaderFontSize||"",S=e.rowNumHeaderFontColor||"",C=e.rowNumBodyColor||"",x=e.rowNumBodyFontName||"",_=e.rowNumBodyFontSize||"",I=e.rowNumBodyFontColor||"",T=e.dataProvider||"",k=e.splitProvider||"",D=e.providerRequestXml||"",L=e.userDataXml||"",W=e.optionParam||"",A=e.bodyWordwrap||"",E=e.useEuroLocale||"false",M=e.useHeader||"true";e.printSet=e.printSet||{};var q=e.printSet.fitToPage||"false",R=e.printSet.landScape||"false",N=e.printSet.fitWidth||"1",F=e.printSet.fitHeight||"1",O=e.printSet.scale||"100",B=e.printSet.pageSize||"A4",V=e.separator||",",H=e.freezePane||"",P=e.autoSizeColumn||"false",j=e.displayGridlines||"",z=e.useDataFormat||"false",G=(e.columnOrder,WebSquare.xml.encode(e.rowNumHeaderValue)||""),U=e.rowNumVisible+""=="true",X=e.startRowNumber||"0",K=e.bodyNumberDefaultValue||"",$=e.numberToText||"false",Y=e.rowHeight||"-1",Z=e.headerRowHeight||"-1",J=e.maxDataSize||-1;J=parseInt(J,10);var Q=e.pwd||"",tt=e.headerAutoFilter||"false";e.httpReadOnly=e.httpReadOnly+""=="true";e.dataListDownloadURL;var et=e.useXHR||"false";e.useXHR=et+""=="true";var it=e.openFile||"false",ot=e.macroFileName||"",st=e.useMacro||"false",rt=e.sameSite||"",at=t.element,nt="";if(at&&"JSON"==at.elementType){nt="<w2:dataList id='"+at.id+"' baseNode='list' repeatNode='map'>",nt+="<w2:columnInfo>";for(var lt=0;lt<at.columnInfo.length;lt++){var ht=at.columnInfo[lt];nt+="<w2:column id='"+ht.id+"' name='"+ht.name+"' dataType='"+ht.dataType+"'/>"}nt+="</w2:columnInfo>",nt+="</w2:dataList>"}else nt=WebSquare.xml.serialize(at);var dt=[];dt.push("<vector result='1'>"),dt.push("<data vectorkey='0'><hashtable>"),dt.push("<data hashkey='style'>"+nt+"</data>"),dt.push("<data hashkey='data'>"+o+"</data>"),dt.push("<data hashkey='rowNumVisible' value='"+U+"'/>"),dt.push("<data hashkey='fileName' value='"+s+"'/>"),dt.push("<data hashkey='sheetName' value='"+r+"'/>"),dt.push("<data hashkey='multipleSheet' value='"+a+"'/>"),dt.push("<data hashkey='stRowIndex' value='"+l+"'/>"),dt.push("<data hashkey='stColIndex' value='"+h+"'/>"),dt.push("<data hashkey='removeColumns' value='"+n+"'/>"),dt.push("<data hashkey='headerColor' value='"+d+"'/>"),
dt.push("<data hashkey='headerFontName' value='"+u+"'/>"),dt.push("<data hashkey='headerFontSize' value='"+c+"'/>"),dt.push("<data hashkey='headerFontColor' value='"+p+"'/>"),dt.push("<data hashkey='bodyColor' value='"+g+"'/>"),dt.push("<data hashkey='bodyFontName' value='"+m+"'/>"),dt.push("<data hashkey='bodyFontSize' value='"+f+"'/>"),dt.push("<data hashkey='bodyFontColor' value='"+b+"'/>"),U&&(dt.push("<data hashkey='rowNumHeaderColor' value='"+y+"'/>"),dt.push("<data hashkey='rowNumHeaderFontName' value='"+v+"'/>"),dt.push("<data hashkey='rowNumHeaderFontSize' value='"+w+"'/>"),dt.push("<data hashkey='rowNumHeaderFontColor' value='"+S+"'/>"),dt.push("<data hashkey='rowNumBodyColor' value='"+C+"'/>"),dt.push("<data hashkey='rowNumBodyFontName' value='"+x+"'/>"),dt.push("<data hashkey='rowNumBodyFontSize' value='"+_+"'/>"),dt.push("<data hashkey='rowNumBodyFontColor' value='"+I+"'/>")),dt.push("<data hashkey='dataProvider' value='"+T+"'/>"),dt.push("<data hashkey='splitProvider' value='"+k+"'/>"),dt.push("<data hashkey='providerRequestXml' value=''>"+D+"</data>"),dt.push("<data hashkey='userDataXml' value=''>"+L+"</data>"),dt.push("<data hashkey='optionParam' value='"+W+"'/>"),""!=A&&dt.push("<data hashkey='bodyWordwrap' value='"+A+"'/>"),dt.push("<data hashkey='useEuroLocale' value='"+E+"'/>"),dt.push("<data hashkey='useHeader' value='"+M+"'/>"),dt.push("<data hashkey='fitToPage' value='"+q+"'/>"),dt.push("<data hashkey='landScape' value='"+R+"'/>"),dt.push("<data hashkey='fitWidth' value='"+N+"'/>"),dt.push("<data hashkey='fitHeight' value='"+F+"'/>"),dt.push("<data hashkey='scale' value='"+O+"'/>"),dt.push("<data hashkey='pageSize' value='"+B+"'/>"),dt.push("<data hashkey='separator' value='"+V+"'/>"),dt.push("<data hashkey='freezePane' value='"+H+"'/>"),dt.push("<data hashkey='autoSizeColumn' value='"+P+"'/>"),dt.push("<data hashkey='displayGridlines' value='"+j+"'/>"),dt.push("<data hashkey='useDataFormat' value='"+z+"'/>"),dt.push("<data hashkey='rowNumHeaderValue' value='"+G+"'/>"),dt.push("<data hashkey='startRowNumber' value='"+X+"'/>"),dt.push("<data hashkey='bodyNumberDefaultValue' value='"+K+"'/>"),dt.push("<data hashkey='numberToText' value='"+$+"'/>"),dt.push("<data hashkey='rowHeight' value='"+Y+"'/>"),dt.push("<data hashkey='headerRowHeight' value='"+Z+"'/>"),dt.push("<data hashkey='pwd' value='"+Q+"'/>"),dt.push("<data hashkey='headerAutoFilter' value='"+tt+"'/>"),dt.push("<data hashkey='openFile' value='"+it+"'/>"),dt.push("<data hashkey='macroFileName' value='"+ot+"'/>"),dt.push("<data hashkey='useMacro' value='"+st+"'/>"),""!=rt&&dt.push("<data hashkey='sameSite' value='"+rt+"'/>"),null!=i&&void 0!==i||(i=[]),dt.push("<data hashkey='information'><vector result='"+i.length+"'>");for(lt=0;lt<i.length;lt++){var ut=i[lt];for(var ct in dt.push("<data vectorkey='"+lt+"'><hashtable>"),ut)"text"==ct?dt.push("<data hashkey='"+ct+"' value='"+WebSquare.xml.encode(ut[ct])+"'/>"):dt.push("<data hashkey='"+ct+"' value='"+ut[ct]+"'/>");dt.push("</hashtable></data>")}return dt.push("</vector></data>"),dt.push("</hashtable></data>"),dt.push("</vector>"),dt},f.mirrorView=function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e="height="+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+",width="+t+",location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no",i="";WebSquare.domain&&(i="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var o=u.x._resourceURI+"mirrorView.html";window.open(o+i,"_blank",e)},f.watermark=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.canvasId||"watermarkCanvas",o=e.target&&e.target.render,s=o?e.target.render:document.body,r=e.lineGap||300,a=t,n=document.getElementById(i);n||((n=document.createElement("canvas")).id=i,n.style.position=o?"relative":"fixed",n.style.pointerEvents="none",n.style.top="0px",n.style.left="0px",n.style.right="0px",n.style.bottom="0px",
n.setAttribute("data-watermark_msg",a),n.setAttribute("data-watermark_target",o?e.target.uuid:""),n.setAttribute("data-watermark_linegap",r),s.appendChild(n),s.setAttribute("data-watermark_canvas",i),o||WebSquare.event.addListener(window,"onresize",WebSquare.util._watermarkResize)),WebSquare.util._watermarkRedraw(s)}catch(t){p.w.printStackTrace(t,null,this)}},f._watermarkDate=function(){try{var t=new Date;return WebSquare.text.fillZero(t.getFullYear(),4)+"-"+WebSquare.text.fillZero(t.getMonth()+1,2)+"-"+WebSquare.text.fillZero(t.getDate(),2)+" "+WebSquare.text.fillZero(t.getHours(),2)+":"+WebSquare.text.fillZero(t.getMinutes(),2)+":"+WebSquare.text.fillZero(t.getSeconds(),2)}catch(t){p.w.printStackTrace(t,null,this)}},f._watermarkResize=function(t){try{var e=WebSquare.event.getTarget(t);WebSquare.util.setTimeout((function(t){WebSquare.util._watermarkRedraw(t)}),{key:"wq_watermark",max:70,args:[e]})}catch(t){p.w.printStackTrace(t,null,this)}},f._watermarkRedraw=function(t){try{var e,i=function(t,i){for(var o=Math.ceil(s.measureText(t).width),r=Math.ceil(e.width/o)+1,a=(t=new Array(r).join(t),0);a<Math.ceil(e.width/u);a++)s.fillText(t,-600,i+a*u)},o=t&&t!==self;e=o?document.getElementById(t.getAttribute("data-watermark_canvas")):document.getElementById(document.body.getAttribute("data-watermark_canvas")),o?(e.width=t.clientWidth,e.height=t.clientHeight):(e.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);var s=e.getContext("2d");s.globalAlpha=.2,s.rotate(6.9*Math.PI/4),s.fillStyle="#000",s.font="bold 30px Sans-Serif";var r=s.measureText(" ").width,a=WebSquare.util._watermarkDate(),n=s.measureText(a).width;s.font="bold 50px Sans-Serif";var l=s.measureText(" ").width,h=e.getAttribute("data-watermark_msg"),d=s.measureText(h).width,u=parseInt(e.getAttribute("data-watermark_linegap"));if(d<n)for(;d<n;)h+=" ",d+=l;else for(;d>n;)a+=" ",n+=r;i(h+="     ",250),s.font="bold 30px Sans-Serif",i(a+="        ",300)}catch(t){p.w.printStackTrace(t,null,this)}},f._watermarkRemove=function(t){try{if(!WebSquare.util._watermarkArr)return;for(var e=WebSquare.util._watermarkArr.length-1;e>=0;e--){WebSquare.util._watermarkArr[e]===t&&WebSquare.util._watermarkArr.splice(e,1);var i=document.getElementById(t);i&&i.parentNode.removeChild(i)}}catch(t){p.w.printStackTrace(t,null,this)}},f.redrawComponent=function(t,e){try{var i=WebSquare.util.getComponentById(t),o=e;null==e&&i.render&&(o=i.render.parentElement);var s=i.element.cloneNode(!0),r=i.options.pluginName;return i.remove(),WebSquare.util.dynamicCreate(t,r,s,o)}catch(t){p.w.printStackTrace(t,null,this)}},f.emptySelection=function(){try{window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}catch(t){}},f.exportJSChartAll=function(t){try{var e=t.type,i=t.fcArr||[],o=t.fileName,s=t.direction||"vertical",r={};if(i.length>0)for(var a=0;a<i.length;a++)r["fc_"+i[a]]=FusionCharts.items["fc_"+i[a]];else for(var a in FusionCharts.items)r[a]=FusionCharts.items[a];var n="",l=0,h=0,d=0,u=0,c=0,m=0;for(var a in r)if(r[a].options.containerElement)if("horizontal"==s.toLowerCase()){h+=r[a].options.containerElement.offsetWidth;var f=r[a].options.containerElement.offsetHeight;f>d&&(d=f),(b=r[a].getSVGString())&&(b=(b=(b=b.wq_replaceAll('shape-rendering="default"',"shape-rendering='auto'")).wq_replaceAll('visibility=""',"visibility='inherit'")).wq_replaceAll('text-anchor="undefined"',"text-anchor='start'"),WebSquare.util.isIEAllVersion(11)&&(b=(b=b.wq_replaceAll("&quot;","")).wq_replaceAll(location.href,"")),"zoomline"==r[a].options.chartType.toLowerCase()&&(b=b.wq_replaceAll('stroke-dasharray="-','stroke-dasharray="')),"pie3d"!=r[a].options.chartType.toLowerCase()&&"doughnut3d"!=r[a].options.chartType.toLowerCase()||(b=b.wq_replaceAll('font-family="15"','font-family="Verdana"'))),n+="<g transform='translate("+m+",0)'>"+b+"</g>",
m+=r[a].options.containerElement.offsetWidth}else{l+=r[a].options.containerElement.offsetHeight;var b,y=r[a].options.containerElement.offsetWidth;y>u&&(u=y),(b=r[a].getSVGString())&&(b=(b=(b=b.wq_replaceAll('shape-rendering="default"',"shape-rendering='auto'")).wq_replaceAll('visibility=""',"visibility='inherit'")).wq_replaceAll('text-anchor="undefined"',"text-anchor='start'"),WebSquare.util.isIEAllVersion(11)&&(b=(b=b.wq_replaceAll("&quot;","")).wq_replaceAll(location.href,"")),"zoomline"==r[a].options.chartType.toLowerCase()&&(b=b.wq_replaceAll('stroke-dasharray="-','stroke-dasharray="')),"pie3d"!=r[a].options.chartType.toLowerCase()&&"doughnut3d"!=r[a].options.chartType.toLowerCase()||(b=b.wq_replaceAll('font-family="15"','font-family="Verdana"'))),n+="<g transform='translate(0,"+c+")'>"+b+"</g>",c+=r[a].options.containerElement.offsetHeight}n="horizontal"==s.toLowerCase()?"<svg width='"+h+"' height='"+d+"' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+n+"</svg>":"<svg width='"+u+"' height='"+l+"' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+n+"</svg>";var v=encodeURI(n+"ExportType="+e+"ExportFileName="+o);g.v.download("engine/servlet/exportFusionChart.jsp",v,"post"),r=null}catch(t){p.w.printStackTrace(t,null,this)}},f.getRuntimeId=function(t,e){try{var i="";if(WebSquare.idToUUID[t]&&WebSquare.idCache[WebSquare.idToUUID[t]])i=t;else{var o=g.v._getGlobalVariable();if(o)for(var s=o.split(","),r=0;r<s.length;r++){if(t===s[r].wq_trim()){i=t;break}}}return i}catch(t){return p.w.printStackTrace(t,null,this),""}},f.serialize=function(t){var e={header:{ip:(t=t||{}).ip?t.ip:"",method:t.method?t.method:"HEAD",status:t.status?t.status:"-1",auth:t.auth?t.auth:"",sender:t.sender?t.sender:"",receiver:t.receiver?t.receiver:"",pageURL:WebSquare.w2xPath,pageName:t.pageName?t.pageName:"",extension:t.extension?t.extension:{},comps:{}},body:{}},i={header:!1,body:!1,validate:!1};switch(e.header.method){case"HEAD":i.header=!0,i.body=!0;break;case"HEADCOMP":i.header=this._serializeHeaderComps("top",window,e.header.comps),i.body=!0;break;case"HEADBODY":i.header=this._serializeHeaderComps("top",window,e.header.comps),i.body=this._serializeBody("top",window,e.body);break;default:return!1}return i.validate=this._serializeValidate(e),!!(i.validate&&i.header&&i.body)&&JSON.stringify(e)},f._serializeHeaderComps=function(t,e,i){if("string"!=typeof t||arguments.length<=1)return!1;var o=e,s=o.WebSquare.DataCollection.comp;for(var r in i[t]={},s)i[t][r]=r;var a=o.WebSquare.idCache;for(var r in a){var n=a[r];switch(n.constructor){case o.WebSquare.DataCollection.dataList:case o.WebSquare.DataCollection.dataMap:break;case o.WebSquare.uiplugin.iframe:this._serializeHeaderComps(n.id,o.document.getElementById(n.id).contentWindow,i[t]);break;default:n.options.serializable&&(i[t][n.id]=n.id)}}return!0},f._serializeBody=function(t,e,i){if("string"!=typeof t||arguments.length<=1)return!1;var o=e;i[t]=JSON.parse(o.WebSquare.DataCollection.api._getArrayEvalString());var s=o.WebSquare.idCache;for(var r in s){var a=s[r];switch(a.constructor){case o.WebSquare.DataCollection.dataList:case o.WebSquare.DataCollection.dataMap:break;case o.WebSquare.uiplugin.iframe:this._serializeBody(a.id,o.document.getElementById(a.id).contentWindow,i[t]);break;default:a.options.serializable&&(i[t][a.id]=a.serialize())}}return!0},f._serializeValidate=function(t){return!0},f.parse=function(t){return JSON.parse(t)},f._restore=function(t,e,i){var o=i;if(o.WebSquare){var s=o.WebSquare.DataCollection.comp;for(var r in e){var a=s[r]||o.WebSquare.idCache[r]||o[r];if(a)switch(a.constructor){case o.WebSquare.DataCollection.dataList:case o.WebSquare.DataCollection.dataMap:o.WebSquare.DataCollection.api._setArrayEvalString("{"+r+":"+JSON.stringify(e[r])+"}");break;case o.WebSquare.uiplugin.iframe:this._restore(a.id,e[a.id],o.document.getElementById(a.id).contentWindow);break;default:
a.options&&a.options.serializable&&a.restore(e[r])}}}},f.restore=function(t,e){try{var i={};if("string"==typeof t)i=JSON.parse(t);else{if("object"!=(0,n.Z)(t))return!1;i=t}return this._restore("top",i.body.top,e||window.top),!0}catch(t){p.w.printStackTrace(t,null,this)}return!1},f.getFrameFromPoint=function(t){try{for(var e=JSON.parse(t),i=document.elementFromPoint(e.x,e.y),o=null;i&&"BODY"!==i.tagName;){if("DIV"==i.tagName&&WebSquare.xfControl.prototype.__hasClass(i,"w2wframe")){var s=WebSquare.util.getComponentById(i.getAttribute("id"));if(s&&s.options&&s.options.scope){o=s.uuid;break}}i=i.parentNode}return null==o&&WebSquare.strictModeFrame&&(o=WebSquare.strictModeFrame.uuid),o}catch(t){p.w.printStackTrace(t,null,this)}},f.getAbsolutePath=function(t){try{if(!t||"string"!=typeof t)return"";var e=document.createElement("a");e.setAttribute("href",t);var i=WebSquare.util._getAbsolutePath(e.href.toString());return e=null,i}catch(t){return""}},f._getAbsolutePath=function(t){try{var e=t.indexOf("?");return e<0&&(e=t.length),t.slice(0,e)}catch(t){return""}},f.getFrameByPath=function(t,e,i){try{var o;if("/"===(t=t.wq_trim()).charAt(0))o=WebSquare.util.getComponentById(t.slice(1));else{var s=t.split("/");o=WebSquare.util.getComponentById(e)||"";for(var r=0;r<s.length;r++){var a=s[r];""===a||"."===a||(".."===a?o=o.scope_obj||"":o&&o.options&&("wframe"===o.options.pluginName||"pageInherit"===o.options.pluginName)?o.options.scope&&(o=o.getObj(s[r])):o=WebSquare.util.getComponentById(s[r]))}}return i&&"component"===i.returnType?o:o.id}catch(t){p.w.printStackTrace(t)}},f.getComponentByPath=function(t,e){try{return WebSquare.util.getFrameByPath(t,e,{returnType:"component"})}catch(t){p.w.printStackTrace(t)}},f.getFocusedComponentId=function(t){try{for(var e=t||document.activeElement;e&&"BODY"!==e.tagName.toUpperCase();){var i=e.getAttribute("id")&&"idToUUID"in WebSquare&&WebSquare.idToUUID[e.getAttribute("id")]&&WebSquare.idCache[WebSquare.idToUUID[e.getAttribute("id")]],o=e.getAttribute("id")&&WebSquare.componentIdCache&&WebSquare.componentIdCache[e.getAttribute("id")],s=i||o;if(s&&s.getFocusedComponentId&&("function"==typeof s.getFocusedComponentId||"[object Function]"===s.getFocusedComponentId.toString()))return s.getFocusedComponentId();if(s)return s.id;e=e.parentNode}return""}catch(t){p.w.printStackTrace(t,null,this)}},f.arrayDiff=function(t,e,i){if(!this.isArray(e))return t.slice();for(var o=e.length,s=t.length,r=-1,a=[];++r<s;){for(var n=t[r],l=!1,h=0;h<o;h++){var d=e[h];if(i&&i.call(null,n,d)){l=!0;break}if(n===d){l=!0;break}}!1===l&&a.push(n)}return a},f.scopingFuncBody=function(t,e,i,o){try{if(void 0!==o&&null!=o||(o={}),"string"!=typeof t)return!0===i?t:null;var s,r=WebSquare.util.getBoolean(g.v.getConfiguration("/WebSquare/wpack/@use"));if(e){var a=!0===r?"":"\n";s="scopeObj"===i?s="WebSquare.scope_obj="+e+".id;\n with("+e+".scope){\n var udc_obj = "+e+".id;\n"+t+" \nWebSquare.scope_obj=null;\n}":"WebSquare.scope_obj="+e+";"+a+" with(WebSquare.util.getComponentById('"+e+"').scope){"+a+" var udc_obj = "+e+";\n"+(!0===i?"":" var ret = ")+t+" \n WebSquare.scope_obj=null;"+(!0===i?"":"\n return ret;")+"\n}"}else{s=(a=!0===r?"\n":"")+(!0===i?"":"return ")+t+"\n"}return s}catch(t){p.w.printStackTrace(t,null,this)}},f.isNullReg=function(t){try{return t.source===/\/^[a-z0-9_-]{3,16}$\//gi.source||"/^[a-z0-9_-]{3,16}$/"===t.source}catch(t){return p.w.printStackTrace(t,null,this),!1}},f.setScreenView=function(t){try{if(!WebSquare.util.isTop())return;void 0!==t&&null!=t||(t={});var e=parseInt(t.baseWidth,10),i=parseInt(t.baseHeight,10),o=parseFloat(t.maxRatio,10)||1e3,s=parseFloat(t.minRatio,10)||.001;if(o=Math.max(o,s),s=Math.min(s,s),"screen"===t.type){var r=(g.v.browserCheck.ipad||g.v.browserCheck.iphone||g.v.browserCheck.ipod)&&Math.floor(Math.abs(window.orientation/90))>=1&&window.orientation%90==0,a=r?window.screen.height:window.screen.width,n=r?window.screen.width:window.screen.height,l=a/e,h=n/i
;if(!0===t.useRelativeScale)l=Math.min(Math.max(l,s),o),h=Math.min(Math.max(h,s),o),WebSquare.util._applyRelativeScreenView(l,h,e,i);else{var d=!0===t.allowScroll?Math.max(l,h):Math.min(l,h);if(1===(d=Math.min(Math.max(d,s),o)))WebSquare.util.clearScreenView();else{var u=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;document.documentElement.scrollHeight||document.body.scrollHeight;WebSquare.util._applyScreenView(d,u,c)}}}}catch(t){p.w.printStackTrace(t,null,this)}},f._applyScreenView=function(t,e,i){try{if(!WebSquare.util.isTop())return;var o="body {-webkit-transform : scale("+t+");-moz-transform : scale("+t+");-ms-transform : scale("+t+");-o-transform : scale("+t+");transform : scale("+t+");transform-origin : 0 0;-ms-transform-origin : 0 0;width : "+e/t+"px;height : "+i/t+"px;}",s=document.getElementsByTagName("head")[0];c.d.fullViewClass=!0,c.d.fullViewed=!0,c.d.fullViewRatio=t;var r=null;g.v.browserCheck.ie?((r=document.createElement("style")).setAttribute("type","text/css"),r.styleSheet.cssText=o):(r=document.createElementNS("http://www.w3.org/1999/xhtml","style")).appendChild(document.createTextNode(o)),r.setAttribute("data-screenview","true"),s.appendChild(r)}catch(t){p.w.printStackTrace(t,null,this)}},f._applyRelativeScreenView=function(t,e,i,o){try{if(!WebSquare.util.isTop())return;var s="body {-webkit-transform : scale("+t+","+e+");-moz-transform : scale("+t+","+e+");-ms-transform : scale("+t+","+e+");-o-transform : scale("+t+","+e+");transform : scale("+t+","+e+");transform-origin : 0 0;-ms-transform-origin : 0 0;width : "+i+"px;height : "+o+"px;}",r=document.getElementsByTagName("head")[0];c.d.fullViewClass=!0,c.d.fullViewed=!0,c.d.fullViewRatio=t;var a=null;g.v.browserCheck.ie?((a=document.createElement("style")).setAttribute("type","text/css"),a.styleSheet.cssText=s):(a=document.createElementNS("http://www.w3.org/1999/xhtml","style")).appendChild(document.createTextNode(s)),a.setAttribute("data-screenview","true"),r.appendChild(a)}catch(t){p.w.printStackTrace(t,null,this)}},f.clearScreenView=function(){try{if(!WebSquare.util.isTop()||!c.d.fullViewClass)return;for(var t=document.getElementsByTagName("style"),e=0;e<t.length;e++){var i=t[e];if("true"===i.getAttribute("data-screenview")){i.parentNode.removeChild(i);break}}c.d.fullViewClass=!1,c.d.fullViewed=!1,c.d.fullViewRatio=1}catch(t){p.w.printStackTrace(t,null,this)}},f.getTop=function(){try{for(var t=self,e=0;e<1e3;e++)try{if(t.parent===t)break;if(void 0===t.parent.WebSquare||null==t.parent.WebSquare)break;t=t.parent}catch(t){break}return t}catch(t){return p.w.printStackTrace(t,null,this),self}},f.isTop=function(){try{return WebSquare.util.getTop()===self}catch(t){return p.w.printStackTrace(t,null,this),!1}},f.isTouchDevice=function(){try{var t=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)||function(t){return window.matchMedia&&window.matchMedia(t).matches}(["(",t.join("touch-enabled),("),"heartz",")"].join(""))}catch(t){return p.w.printStackTrace(t,null,this),!1}},f.cloneObject=function(t,e){try{if("object"!==(0,n.Z)(t)||null==t)return null;void 0!==e&&null!=e||(e={});var i=e.scope,o=e.exclude,s=!0===e.skipFunction,r=JSON.stringify(t,(function(t,e){return o&&!0===o[t]?void 0:null==e?e:e===window?"@wq_window":e===window.opener?"@wq_opener":e===window.parent?"@wq_parent":e===window.top?"@wq_top":"function"==typeof e?s?void 0:"@wq_function#"+e.toString():"object"===(0,n.Z)(e)&&e.constructor===RegExp?"@wq_regExp#"+e.toString():e}));return JSON.parse(r,(function(t,e){try{if("string"!=typeof e||"@wq_"!==e.slice(0,4))return e;if("@wq_window"===e||"@wq_opener"===e||"@wq_parent"===e||"@wq_top"===e)return window[e.slice(4)];if("@wq_function#"===e.slice(0,13))return new Function(WebSquare.util.scopingFuncBody(e.slice(13),i))()
;if("@wq_regExp#"===e.slice(0,11))return new Function("return "+e.slice(11))()}catch(t){return e}}))}catch(t){return p.w.printStackTrace(t,null,this),null}},f._copyOptions=function(t){try{var e={};for(var i in t)e[i]=i instanceof Array?t[i].slice(0):t[i];return e.__copyOptions=!0,e}catch(t){return p.w.printStackTrace(t,null,this),null}},f.isHybrid=function(){try{return WebSquare.hybridApp}catch(t){return p.w.printStackTrace(t,null,this),!1}},f.encodeParameter=(s=function(t,e){for(var i=-1,s=0;s<o.length;s++)if(o[s]==t){i=s;break}return i<0?t:o[(i+e)%o.length]},r=function(t,e){for(var i=0,o=(t=WebSquare.text.BASE64Encode(t)).length-1;o>=0&&"="==t[o];o--)i+=1;t=t.substring(0,t.length-i);var r="";for(o=0;o<t.length;o++)r=r.concat(s(t[o],Number(e)));return r},a=function(t,e){if(!t)return t;o||function(t){o=[];for(var e=[".","/","-","_","+"],i=0;i<26;i++)o.push(String.fromCharCode(i+65)),i<10?o.push(String.fromCharCode(i+48)):i>=t%8+12&&i<t%8+12+e.length&&o.push(e[i-(t%8+12)]),o.push(String.fromCharCode(i+97))}(e+100);for(var i="",s=0,a="";s<t.length;)"?"!=t[s]&&"&"!=t[s]&&"#"!=t[s]&&"="!=t[s]?a+=t[s]:(a.length>0&&(i+=r(a,e),a=""),i+=t[s]),s++;return a.length>0&&(i+=r(a,e)),i},function(t){var e=WebSquare.util.getEncodeParameterOption("key");e&&0!=e.length||(e=0),e=parseInt(e);try{return a(t,e)}catch(t){return""}}),f.decodeParameter=function(){var t,e=function(e,i){for(var o=-1,s=0;s<t.length;s++)if(t[s]==e){o=s;break}return o<0?e:((o=t.length-(i+t.length-o)%t.length)==t.length&&(o=0),t[o])},i=function(t,i){for(var o="",s=0;s<t.length;s++)o=o.concat(e(t[s],Number(i)));for(;o.length%4!=0;)o+="=";return o=WebSquare.text.BASE64Decode(o)},o=function(e,o){if(!e)return e;e=e.replace(" ","+"),t||function(e){t=[];for(var i=[".","/","-","_","+"],o=0;o<26;o++)t.push(String.fromCharCode(o+65)),o<10?t.push(String.fromCharCode(o+48)):o>=e%8+12&&o<e%8+12+i.length&&t.push(i[o-(e%8+12)]),t.push(String.fromCharCode(o+97))}(o+100);for(var s="",r=0,a="";r<e.length;){"?"!=e[r]&&"&"!=e[r]&&"#"!=e[r]&&"="!=e[r]?a+=e[r]:(a.length>0&&(s+=i(a,o),a=""),s+=e[r]),r++}return a.length>0&&(s+=i(a,o)),s};return function(t){var e=WebSquare.util.getEncodeParameterOption("key");e&&0!=e.length||(e=0),e=parseInt(e);try{return o(t,e)}catch(t){return""}}}(),f.isEncodeParameter=function(){try{return WebSquare.util.getBoolean(g.v.getConfiguration("/WebSquare/encodeParameter/@value"))||!1}catch(t){return p.w.printStackTrace(t,null,this),!1}},f.getEncodeParameterOption=function(t){try{if("pathName"==t)return g.v.getConfiguration("/WebSquare/encodeParameter/@pathName")||"";if("fallback"==t)return WebSquare.util.getBoolean(g.v.getConfiguration("/WebSquare/encodeParameter/@fallback"))||!1;if(WebSquare.util.isEncodeParameter()){if("value"==t)return WebSquare.util.getBoolean(g.v.getConfiguration("/WebSquare/encodeParameter/@value"))||!1;if("key"==t)return g.v.getConfiguration("/WebSquare/encodeParameter/@key")||"";if("onlyParam"==t)return WebSquare.util.getBoolean(g.v.getConfiguration("/WebSquare/encodeParameter/@onlyParam"))||!1}return!1}catch(t){return p.w.printStackTrace(t,null,this),!1}},f.getMediaInfo=function(){try{var t;t="json"===WebSquare.WebSquaredoc.getType()?WebSquare.jsonUtil.getNodesByTagName(WebSquare.WebSquaredoc.getPageInfo(),"screen",WebSquare.core._XML_NAMESPACE.W2):WebSquare.xml.getElementsByTagName(WebSquare.WebSquaredoc.getPageInfo(),"screen",g.v._XML_NAMESPACE.W2);for(var e={currentScreen:f.getCurrentScreen(t),mediaInfo:[]},i=0;i<t.length;i++)e.mediaInfo[i]={},e.mediaInfo[i].name=WebSquare.Elem.api.getAttribute(t[i],"name"),e.mediaInfo[i].viewport=WebSquare.Elem.api.getAttribute(t[i],"viewport").split("x"),e.mediaInfo[i].pageSize=WebSquare.Elem.api.getAttribute(t[i],"pageSize").split("x");return e}catch(t){p.w.printStackTrace(t,null,this)}},f.getCurrentScreen=function(t){try{for(var e,i=Number(top.document.documentElement.clientWidth||top.document.body.clientWidth),o=null,s=e=9999,r=null,a=0;a<t.length;a++){
var n=WebSquare.Elem.api.getAttribute(t[a],"viewport"),l=n.indexOf("x");-1!=l?s>(e=(o=Number(n.substring(0,l)))>=i?o:9999)&&(s=e,r=WebSquare.Elem.api.getAttribute(t[a],"name")):(e=9999,r=WebSquare.Elem.api.getAttribute(t[a],"name"))}return r}catch(t){p.w.printStackTrace(t,null,this)}},f._getDefaultProperties=function(t,e,i){try{if(!t)return;var o,s,r,a;WebSquare._defaultPropertiesComp||(WebSquare._defaultPropertiesComp=[]);var n={},l=t.split(".");l.length>3?(s=l.pop(),a=l.pop(),r=l.pop()):(a=l.pop(),r=l.pop().toLowerCase()),"dataList"==a||"dataMap"==a||"linkedDataList"==a||"aliasDataMap"==a||"aliasDataList"==a||"aliasLinkedDataList"==a?(r="dataCollection",n.type=a):n.pluginName=a;var h,d,u,c=e?e.split(","):[],m=i?i.split(","):[];if(c.length!==m.length)return;if(s)if("gridView"!=a&&"grid"!=a||"column"!=s)if("tableLayout"==a){d=n.pluginName+"_"+s;for(b=0;b<c.length;b++)n[c[b]]=m[b],d+="_"+c[b]+"_"+m[b];n.pluginName="group"}else if("accordion"==a){if("panels"==s){o=this.initPanel(this.panelInfoArr[b]),d="accordion_panels";for(b=0;b<c.length;b++)n[c[b]]=m[b],d+="_"+c[b]+"_"+m[b];n.pluginName="panels"}}else{if("dataList"!=a||"column"!=s)return null;d="dataList_column",u="col";for(b=0;b<c.length;b++)n[c[b]]=m[b],d+="_"+c[b]+"_"+m[b],u+="_"+c[b]+"_"+m[b];n.columnInfo=[{id:u}]}else{d=n.pluginName+"_"+s,u="col";for(var f="",b=0;b<c.length;b++)n[c[b]]=m[b],d+="_"+c[b]+"_"+m[b],u+="_"+c[b]+"_"+m[b],f+=" "+c[b]+'="'+m[b]+'"';f+=' id="'+u+'"';var y="";y+="<w2:"+n.pluginName+' xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms" id="'+d+'">',y+='<w2:header style="">',y+='<w2:row style="">',y+="<w2:column></w2:column>",y+="</w2:row>",y+="</w2:header>",y+='<w2:gBody style="">',y+='<w2:row style="">',y+="<w2:column"+f+"></w2:column>",y+="</w2:row>",y+="</w2:gBody>",y+="</w2:"+n.pluginName+">",h=(h=WebSquare.xml.parse(y)).documentElement}else{d=n.pluginName||n.type;for(b=0;b<c.length;b++)n[c[b]]=m[b],d+="_"+c[b]+"_"+m[b];"tableLayout"==n.pluginName&&(n.pluginName="group")}if(WebSquare._defaultPropertiesComp.indexOf(d)>-1)return"column"==s&&u?"dataCollection"==r?o.getCellInfo(u).options:g.v.getComponentById(d).cellInfoHash[u].options:"Submission"==a?g.v.getComponentById(d):g.v.getComponentById(d).options;var v=null;if("dataCollection"==r){if(n.id=d,n.option={},WebSquare.DataCollection.api.create(n),o=g.v.getComponentById(d))return WebSquare._defaultPropertiesComp.push(d),"column"==s?o.getCellInfo(u).options:o.options}else if("tag"==a)o=new WebSquare.tag(d,null,{});else{if("Submission"==a)return WebSquare.ModelUtil.createSubmission({id:d}),(o=g.v.getComponentById(d))&&WebSquare._defaultPropertiesComp.push(d),o;o=WebSquare.controlFactory.createControl(d,n,h,null,!0)}return o&&(o.appendTo(WebSquare.getBody()),o.activate(),o.onComplete(),WebSquare._defaultPropertiesComp.push(d),v="column"==s&&u?o.cellInfoHash[u].options:o.options),v}catch(t){return p.w.printStackTrace(t,null,this),null}},f.loadLocale=function(t){try{requires(t),c.d.importCache[t]}catch(t){return p.w.printStackTrace(t,null,this),!1}},f.deleteLocale=function(t){try{c.d.importCache[t]="",WebSquare.WebSquareLang={}}catch(t){return p.w.printStackTrace(t,null,this),!1}},f.getEscape=function(t,e){try{var i=e?g.v.getConfig(e):"";t=t||i.escape;var o=g.v.getConfiguration("escape");return t||o}catch(t){p.w.printStackTrace(t,null,this)}},f.updateSuffix=function(t){try{var e=g.v.getXMLHTTPObject(),i=WebSquare.baseURI+"suffix.txt?postfix="+(new Date).getTime()+1e4*Math.random();e.open("GET",i,!0),e.onreadystatechange=function(){f.updateSuffixCallback(e,t)},e.send(null)}catch(t){p.w.printStackTrace(t,null,this)}},f.updateSuffixCallback=function(t,e){try{if(4==t.readyState){if(t.status&&(200>t.status||300<=t.status)||0===t.status);else t.responseText.wq_trim()!=WebSquare.suffix&&(u.x.suffix=t.responseText.wq_trim(),m.k.printLog("suffix.txt updated."));if(e.callback&&""!=e.callback){
var i=f.getGlobalFunction(e.callback,e.scopeId);i&&i()}t.onreadystatechange=function(){},t=null}}catch(t){p.w.printStackTrace(t,null,this)}},f.isHTML5=function(){try{if(null===document.doctype)return!1;var t=document.doctype;return"<!DOCTYPE html>"==="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC"'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"}catch(t){p.w.printStackTrace(t,null,this)}},f.setLanguagePack=function(){var t=(0,l.Z)(d().mark((function t(e){var i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=g.v.getConfiguration("/WebSquare/languagePack/url[@lang='"+e+"']/@value"),i=c.d.getEngineUri(i),t.abrupt("return",c.d.writeAsync(i));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f.getStyleFromCssStr=function(t,e){try{var i=null;if(!e)return i;for(var o=0;o<document.styleSheets.length;o++){var s=document.styleSheets[o];try{s.cssRules}catch(t){continue}for(var r=0;s.cssRules&&r<s.cssRules.length;r++){var a=s.cssRules[r];if(a.selectorText=="."+t){i||(i={});for(var n=0;n<e.length;n++){var l=e[n];i[l]=a.style[l]}o=document.styleSheets.length;break}}}return i}catch(t){p.w.printStackTrace(t,null,this)}},function(t){var e={},i={},o=/^[^?#]*\//.exec(location.href)[0],s=/^[\w-]+\:\/\/\/?[^\/]+/.exec(o)[0],r=document.createElement("script"),a="boolean"==typeof r.preload||r.readyState&&"uninitialized"==r.readyState,l=!a&&!0===r.async||WebSquare.util.isIE(10)&&"async"in r,h=a&&!l;function d(t,e){var i=/^\w+\:\/\//;return/^\/\/\/?/.test(t)?t=location.protocol+t:i.test(t)||"/"==t.charAt(0)||(t=(e||"")+t),i.test(t)?t:("/"==t.charAt(0)?s:o)+t}function u(t){w(t)&&!t._done&&(t(),t._done=1)}function f(t){var e=t.split("/"),i=e[e.length-1],o=i.indexOf("?");return-1!=o?i.substring(0,o):i}function y(t){var e={};if("object"==(0,n.Z)(t))for(var o in t)t[o]&&(e={name:o,url:t[o]});else e={name:f(t),url:t};var s=i[e.url];if(s)return s;for(var t in i)if(i[t]==e.url)return i[t];return i[e.url]=e,e}function v(t,e){if(t){"object"==(0,n.Z)(t)&&(t=[].slice.call(t));for(var i=0;i<t.length;i++)e.call(t,t[i],i)}}function w(t){return"[object Function]"==Object.prototype.toString.call(t)}function S(t){for(var e in t=t||i)if(3!=t[e].state)return!1;return!0}function C(t,e){t.state||(t.state=0,t.onpreload=[],_({src:t.url,type:"cache"},(function(){!function(t){t.state=1,v(t.onpreload,(function(t){t.call()}))}(t)})))}function x(t,i){return void 0!==WebSquare.scriptCachedList[t.url]&&null!==WebSquare.scriptCachedList[t.url]||("false"===g.v.getConfiguration("/WebSquare/spa/scriptCache/@value")?WebSquare.scriptCachedList[t.url]=0:WebSquare.scriptCachedList[t.url]=1),3==t.state&&WebSquare.scriptCachedList[t.url]>1?(WebSquare.scriptCachedList[t.url]++,i?i():void 0):2==t.state?WebSquare.util.ready(t.url,i,t.name):0==t.state?t.onpreload.push((function(){x(t,i)})):(t.state=2,"false"!==g.v.getConfiguration("/WebSquare/spa/scriptCache/@value")&&WebSquare.scriptCachedList[t.url]++,void _(t.url,(function(){t.state=3,i&&i(),v(e[t.url],(function(t){u(t)})),S()&&v(e.ALL,(function(t){u(t)}))})))}function _(t,e){try{var i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=b.createElement("script");o.type="text/"+(t.type||"javascript");var s=g.v.getConfiguration("/WebSquare/script/@encoding");o.charset=s||"utf-8";var r=g.v.getConfiguration("/WebSquare/script/@postfix"),a=c.d.getEngineUri(t.src||t);"environment"===r&&(a=c.d.getResourcePostfix(t.src||t)),o.src=a,o.async=!1,o.setAttribute("data-wqExternal","true"),WebSquare.util.isIE(10)?(o.onload=function(){e.done||(o.onload=null,o=void 0,e(),e.done=!0)},o.onerror=function(){e(),e.done=!0}):o.onreadystatechange=o.onload=function(){var t=o.readyState;e.done||t&&!/loaded|complete/.test(t)||(o.onload=o.onreadystatechange=null,o=void 0,e(),e.done=!0)},WebSquare.util.isIE()||(o.onerror=function(){e(),e.done=!0}),i.appendChild(o),i=null}catch(t){p.w.printStackTrace(t,null,this)}}
t.ready=function(t,o,s){w(s)&&(o=s,t="ALL");var r=i[t];if(r&&3==r.state||"ALL"==t&&S())return u(o),WebSquare.util;var a=e[t];return a?a.push(o):a=e[t]=[o],WebSquare.util},t.js=function(){if(l){m.k.printLog("[WebSquare.util.js]script loading[script_ordered_async]");var t=(a=arguments)[a.length-1],e={},i=-1;w(t)||(t=null),v(a,(function(o,s){o!=t&&(o=y(o),e[o.url]||i++,e[o.url]=o)}));var o=0;for(var r in e)!function(e,o){x(e,t&&o==i?function(){u(t)}:null)}(e[r],o),o++;return WebSquare.util}if(h){m.k.printLog("[WebSquare.util.js]script loading[script_cache]");var a=arguments,n=[];for(e={},o=0;o<a.length;o++)!function(t){w(t)?n.push(t):(e[t]||n.push(t),e[t]=t)}(a[o]);a=n;var p=[].slice.call(a,1),g=p[0];return g?(v(p,(function(t){w(t)||C(y(t))})),x(y(a[0]),w(g)?g:function(){WebSquare.util.js.apply(null,p)})):x(y(a[0])),WebSquare.util}m.k.printLog("[WebSquare.util.js]script loading[XHR]");t=(a=arguments)[a.length-1],e={},i=-1;w(t)||(t=null),v(a,(function(o,s){o!=t&&(o=y(o),e[o.url]||i++,e[o.url]=o)}));o=0;for(var r in e)!function(e,o){var r=d(e.url,"");0==r.indexOf(s)?c.d.globalEval(c.d.loadUri(r)):x(e,null),t&&o==i&&u(t)}(e[r],o),o++;return WebSquare.util}}(f)},2117:function(t,e,i){"use strict";i.d(e,{s:function(){return r},z:function(){return a}});var o=i(1974),s=i(5948),r={},a=function(){};a.prototype.validate=function(){return!0},a.prototype.setMandatory=function(t){this.validator&&(0==t?this.validator.removeCommand(new r.mandatoryCommand(this.options.mandatory)):this.validator.addCommand(new r.mandatoryCommand(t)),this.onPropertyChange("mandatory",t)),this.options.mandatory=t},a.prototype.getMandatory=function(){return this.options.mandatory},a.prototype.setMinLength=function(t){this.validator&&(this.validator.removeCommand(new r.minLengthCommand(this.options.minLength)),this.validator.addCommand(new r.minLengthCommand(t))),this.options.minlength=t},a.prototype.getMinLength=function(){return this.options.minlength},a.prototype.setMaxLength=function(t){"float"!=this.options.dataType&&"euro"!==this.options.dataType&&"rupee"!==this.options.dataType&&"tenge"!==this.options.dataType?(""===t||-1==t?(this.validator&&this.validator.removeCommand(new r.maxLengthCommand(this.options.maxLength,this.options.useMaxLength)),this.options.maxlength=t,this.render&&"input"==this.render.tagName.toLowerCase()&&!this.options.useMaxLength&&this.render.removeAttribute("maxLength")):(this.validator&&(this.validator.removeCommand(new r.maxLengthCommand(this.options.maxLength,this.options.useMaxLength)),this.validator.addCommand(new r.maxLengthCommand(t,this.options.useMaxLength))),this.options.maxlength=t,this.render&&"input"==this.render.tagName.toLowerCase()&&!this.options.useMaxLength&&(this.render.maxLength=t)),this.render&&"input"==this.render.tagName.toLowerCase()&&!this.options.useMaxLength&&(""===t||-1==t?this.render.removeAttribute("maxlength"):this.render.maxLength=t)):this.setFloatMaxLength(t.toString(),this.options.decimalDelimiter,this.options.delimiter)},a.prototype.getMaxLength=function(){return"float"===this.options.dataType||"true"===this.options.floatNumber?this.floatMaxlength:this.options.maxlength},a.prototype.setFloatMaxLength=function(t,e,i){""===t||-1==t?(this.validator&&this.validator.removeCommand(new r.maxFloatLengthCommand(this.options.maxLength)),this.options.maxlength=t,this.render&&"input"==this.render.tagName.toLowerCase()&&this.render.removeAttribute("maxLength")):(this.validator&&(this.validator.removeCommand(new r.maxFloatLengthCommand(this.options.maxLength)),this.validator.addCommand(new r.maxFloatLengthCommand(t,e,i))),this.floatMaxlength=t,this.options.maxlength="-1")},a.prototype.setMinByteLength=function(t){this.validator&&(this.validator.removeCommand(new r.minByteLengthCommand(this.options.minByteLength)),this.validator.addCommand(new r.minByteLengthCommand(t))),this.options.minByteLength=t},a.prototype.getMinByteLength=function(){return this.options.minByteLength},a.prototype.setMaxByteLength=function(t){
this.validator&&(this.validator.removeCommand(new r.maxByteLengthCommand(this.options.maxByteLength)),this.validator.addCommand(new r.maxByteLengthCommand(t))),this.options.maxByteLength=t},a.prototype.getMaxByteLength=function(){return this.options.maxByteLength},a.prototype.getAllowChar=function(){return this.options.allowChar},a.prototype.setIgnoreChar=function(t){this.options.ignoreChar=t},a.prototype.getIgnoreChar=function(){return this.options.ignoreChar},a.prototype.getDisplayMessage=function(){return this.options.displaymessage},a.prototype.getInvalidMessage=function(){return this.options.invalidMessage},r.validateCommand=function(){},r.validateCommand.prototype.executeValidate=function(t){return alert("you should override 'executeValidate'"),!0},r.validateCommand.prototype.executeValidateString=function(t){return alert("you should override 'executeValidateString'"),t},r.validateCommand.prototype.executeValidateKeyPress=function(t,e,i){return alert("you should override 'executeValidateKeyPress'"),!0},r.validateCommand.prototype.executeValidateKeyDown=function(t,e,i){return alert("you should override 'executeValidateKeyPress'"),!0},r.validateCommand.prototype.executeValidateKeyInput=function(t,e,i){return alert("you should override 'executeValidateKeyInput'"),!0},r.validateCommand.prototype.executeInvalidMessage=function(){return alert("you should override 'executeInvalidMessage'"),"invalidMessage"},r.validateCommand.prototype.getType=function(){return alert("you should override 'getType'"),""},r.validateCommand.prototype.getValue=function(){return alert("you should override 'getValue'"),""},r.validateCommand.prototype.getDetail=function(){return alert("you should override 'getDetail'"),""},r.invalidObject=function(t,e){try{this.invalidCommand=e,this.callerId=t}catch(t){s.w.printStackTrace(t)}},r.invalidObject.prototype.getCaller=function(){var t=null;try{t=WebSquare.core.getComponentById(this.callerId)}catch(t){}return t},r.invalidObject.prototype.getType=function(){return this.invalidCommand?this.invalidCommand.getType():""},r.invalidObject.prototype.getDetail=function(){return this.invalidCommand?this.invalidCommand.getDetail():""},r.invalidObject.prototype.getValue=function(){return this.invalidCommand?this.invalidCommand.getValue():""},r.invalidObject.prototype.getPrefix=function(){return null},r.validateInvoker=function(t,e){try{if(this.commandList=[],e=e||{},this.invalidMessage=e.invalidMessage||"",this.displaymessage=e.displaymessage||!1,this.invalidMessageFunc=e.invalidMessageFunc||null,this.scopeId=e._scope_obj_uuid&&WebSquare.idCache[e._scope_obj_uuid]&&WebSquare.idCache[e._scope_obj_uuid].id,this.invalidMessageFunc&&(this.invalidMessageFunc.indexOf("(")<0&&(this.invalidMessageFunc+="()"),this.invalidMsgFuncName=this.invalidMessageFunc.substring(0,this.invalidMessageFunc.indexOf("(")),this.tmpFunc=this.invalidMessageFunc.replace(this.invalidMsgFuncName,"_validator_.doValidate")),this.callerId=t,void 0!==e.mandatory&&1==e.mandatory&&this.addCommand(new r.mandatoryCommand(e.mandatory)),void 0!==e.allowChar&&""!=e.allowChar&&this.addCommand(new r.allowCharCommand(e.allowChar)),void 0!==e.ignoreChar&&""!=e.ignoreChar&&this.addCommand(new r.ignoreCharCommand(e.ignoreChar)),void 0!==e.maxlength&&-1!=e.maxlength)if(e.useMaxLength&&"number"===e.dataType){var i=[e.delimeter||e.delimiter||","].join("");this.addCommand(new r.ignoreCharCommand(i)),this.addCommand(new r.maxLengthCommand(e.maxlength,e.useMaxLength))}else"float"===e.datatype?this.addCommand(new r.maxFloatLengthCommand(e.maxlength)):this.addCommand(new r.maxLengthCommand(e.maxlength));void 0!==e.minlength&&-1!=e.minlength&&this.addCommand(new r.minLengthCommand(e.minlength)),void 0!==e.maxByteLength&&-1!=e.maxByteLength&&this.addCommand(new r.maxByteLengthCommand(e.maxByteLength,e.byteCheckIgnoreChar)),void 0!==e.minByteLength&&-1!=e.minByteLength&&this.addCommand(new r.minByteLengthCommand(e.minByteLength)),
void 0!==e.validator&&""!=e.validator&&this.addCommand(new r.commandAdapter(e.validator,this.scopeId))}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.addCommand=function(t,e){try{!0===e?this.commandList.unshift(t):this.commandList.push(t)}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.removeCommand=function(t){try{for(var e=new Array,i=0;i<this.commandList.length;i++)this.commandList[i].getType()!=t.getType()&&e.push(this.commandList[i]);this.commandList=e}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.clearCommand=function(){try{this.commandList=null,this.commandList=[]}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.applyPriority=function(){},r.validateInvoker.prototype.validate=function(t){try{var e=!0,i="";this.obfuscator_invalidObject=null;for(var o=0;o<this.commandList.length;o++)if(!this.commandList[o].executeValidate(t)){e=!1,i+=this.commandList[o].executeInvalidMessage()+"\n",this.obfuscator_invalidObject=new r.invalidObject(this.callerId,this.commandList[o]);break}if(0==e){if(""!=this.invalidMessage&&null!=this.invalidMessage&&(i=this.invalidMessage),this.invalidMessageFunc&&this.obfuscator_invalidObject)try{i=new Function("_validator_","return "+this.tmpFunc)(this)}catch(t){i=""}if(1==this.displaymessage&&i)try{alert(i)}catch(t){}}return e}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.doValidate=function(){var t=WebSquare.util.getGlobalFunction(this.invalidMsgFuncName,this.scopeId);if("function"==typeof t){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return t.apply(this.obfuscator_invalidObject,i)}},r.validateInvoker.prototype.validateString=function(t){try{this.applyPriority();for(var e=0;e<this.commandList.length;e++)t=this.callerId?this.commandList[e].executeValidateString(t,this.callerId):this.commandList[e].executeValidateString(t);return t}catch(t){s.w.printStackTrace(t)}},r.validateInvoker.prototype.validateKeyPress=function(t,e,i,o){try{if(!(1!=i.metaKey&&1!=i.ctrlKey||67!=i.charCode&&99!=i.charCode&&86!=i.charCode&&118!=i.charCode))return!0;for(var a=!0,n=0;n<this.commandList.length;n++)if(!this.commandList[n].executeValidateKeyPress(t,e,i,o)){a=!1,this.obfuscator_invalidObject=new r.invalidObject(this.callerId,this.commandList[n]);break}return a}catch(i){s.w.printStackTrace(i)}},r.validateInvoker.prototype.validateKeyDown=function(t,e,i){try{if(!(1!=i.metaKey&&1!=i.ctrlKey||67!=i.charCode&&99!=i.charCode&&86!=i.charCode&&118!=i.charCode))return!0;for(var o=!0,r=0;r<this.commandList.length;r++)if(!this.commandList[r].executeValidateKeyDown(t,e,i)){o=!1;break}return o}catch(i){s.w.printStackTrace(i)}},r.validateInvoker.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.validateInvoker.prototype.validateKeyInput=function(t,e,i){try{for(var o=!0,r=e,a=0;a<this.commandList.length;a++){var n=this.commandList[a].executeValidateKeyInput(t,e,i);if("string"==typeof n?r=n:o=n,!o)break}return{str:r,valid:o}}catch(i){s.w.printStackTrace(i)}},r.mandatoryCommand=function(t){this.mandatory=t},o.x.extend(r.mandatoryCommand.prototype,r.validateCommand.prototype),r.mandatoryCommand.prototype.getType=function(){return"mandatory"},r.mandatoryCommand.prototype.getDetail=function(){return{}},r.mandatoryCommand.prototype.getValue=function(){return""},r.mandatoryCommand.prototype.executeValidate=function(t){try{return null!=t&&""!=t}catch(t){s.w.printStackTrace(t)}},r.mandatoryCommand.prototype.executeValidateString=function(t){return t},r.mandatoryCommand.prototype.executeValidateKeyPress=function(t){return!0},r.mandatoryCommand.prototype.executeValidateKeyDown=function(t){return!0},r.mandatoryCommand.prototype.executeValidateKeyInput=function(t){return!0},r.mandatoryCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_mandatory")},r.maxLengthCommand=function(t,e){this.maxLength=parseInt(t,10)||0,this.useMaxLength=!!e},
o.x.extend(r.maxLengthCommand.prototype,r.validateCommand.prototype),r.maxLengthCommand.prototype.getType=function(){return"maxLength"},r.maxLengthCommand.prototype.getDetail=function(){return{}},r.maxLengthCommand.prototype.getValue=function(){return this.maxLength},r.maxLengthCommand.prototype.executeValidate=function(t){if(this.useMaxLength)return"-"!==t.charAt(0)&&"+"!==t.charAt(0)||(t=t.substr(1)),!(t.length>this.maxLength);var e=!0;return t.length>this.maxLength&&(e=!1),e},r.maxLengthCommand.prototype.executeValidateString=function(t){try{if(this.useMaxLength){var e="";return"-"!==t.charAt(0)&&"+"!==t.charAt(0)||(e=t.charAt(0),t=t.substr(1)),t.length>this.maxLength?e+t.substr(0,this.maxLength):e+t}return t&&t.length>this.maxLength&&(t=t.substr(0,this.maxLength)),t}catch(t){s.w.printStackTrace(t)}},r.maxLengthCommand.prototype.executeValidateKeyPress=function(t,e,i,o){try{if(this.useMaxLength){var r=WebSquare.text.getSelection(t),a=i.keyCode||i.charCode,n=a-48<0||a-48>9?i.key:a-48+"";e=e.substr(0,r.start)+n+e.substr(r.end);return this.executeValidate(e)}return t.maxLength=o>0?o:this.maxLength,!0}catch(i){s.w.printStackTrace(i)}},r.maxLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.maxLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.maxLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_maxLength",this.maxLength)},r.minLengthCommand=function(t){this.minLength=t||0},o.x.extend(r.minLengthCommand.prototype,r.validateCommand.prototype),r.minLengthCommand.prototype.getType=function(){return"minLength"},r.minLengthCommand.prototype.getDetail=function(){return{}},r.minLengthCommand.prototype.getValue=function(){return this.minLength},r.minLengthCommand.prototype.executeValidate=function(t){try{var e=!0;return t.length<this.minLength&&(e=!1),e}catch(t){s.w.printStackTrace(t)}},r.minLengthCommand.prototype.executeValidateString=function(t){return t},r.minLengthCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.minLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.minLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.minLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_minLength",this.minLength)},r.maxFloatLengthCommand=function(t,e,i){this.decimalDelimiter=e||".",this.delimiter=i||",";var o=t.split(".")[0]||"*",s=t.split(".")[1]||"0";this.currentIntegerCount=0,this.currentFractionCount=0,this.integerMaxLength="*"!==o&&""!==o&&"-1"!==o&&o?parseInt(o,10):1/0,this.fractionMaxLength="*"!==s&&""!==s&&"-1"!==s&&s?parseInt(s,10):1/0},o.x.extend(r.maxFloatLengthCommand.prototype,r.validateCommand.prototype),r.maxFloatLengthCommand.prototype.getType=function(){return"maxFloatLength"},r.maxFloatLengthCommand.prototype.getDetail=function(){var t="init",e="올바르지 않은 입력입니다.",i=0;return-1!=this.integerMaxLength&&this.currentIntegerCount>this.integerMaxLength?(i=1,e="정수부 maxlength 초과",t="integer",this.currentIntegerCount=0):-1!=this.fractionMaxLength&&this.currentFractionCount>this.fractionMaxLength?(i=2,e="소수부 maxlength 초과",t="fraction",this.currentFractionCount=0):(t="init",i=3),{currentState:t,code:i,message:e}},r.maxFloatLengthCommand.prototype.getValue=function(){var t=this.integerMaxLength===1/0?"*":this.integerMaxLength,e=this.fractionMaxLength===1/0?"*":this.fractionMaxLength;return t+this.decimalDelimiter+e},r.maxFloatLengthCommand.prototype.executeValidate=function(t){var e=t.charAt(0)||t[0];"+"!==e&&"-"!==e||(t=t.split(e).join(""));var i=t.split(this.decimalDelimiter);if(2!==i.length||i[1]||(i=[i[0]]),1==i.length){if((o=i[0].wq_trim()).length>this.integerMaxLength)return this.currentIntegerCount=o.length,!1}else{if(2!=i.length)return!1;var o=i[0].wq_trim(),s=i[1].wq_trim();if(o.length>this.integerMaxLength||s.length>this.fractionMaxLength)return this.currentIntegerCount=o.length,this.currentFractionCount=s.length,
!1}return!0},r.maxFloatLengthCommand.prototype.executeValidateString=function(t){try{var e="",i=t.charAt(0)||t[0];"+"!==i&&"-"!==i||(e=i,t=t.split(i).join(""));var o=t.split(this.decimalDelimiter);if(2!==o.length||o[1]||(o=[o[0]]),1==o.length)(r=o[0].wq_trim()).length>this.integerMaxLength&&(t=t.substr(0,this.integerMaxLength));else if(o.length>1){var r=o[0].wq_trim(),a=o[1].wq_trim();r.length>this.integerMaxLength&&(r=r.substr(0,this.integerMaxLength)),a.length>this.fractionMaxLength&&(a=a.substr(0,this.fractionMaxLength)),t=r+this.decimalDelimiter+a}return e+t}catch(t){s.w.printStackTrace(t)}},r.maxFloatLengthCommand.prototype.executeValidateKeyPress=function(t,e,i,o){if(WebSquare.util.isFF()&&0===i.charCode)return this.executeValidate(e.split(this.delimiter).join(""));e=t.value;var s=WebSquare.text.getSelection(t),r=i.keyCode||i.charCode,a=r-48<0||r-48>9?String.fromCharCode(r):r-48+"";a=96<=r&&r<=105?r-96+"":a,a=110==r||190==r?".":a,a=i.metaKey||i.ctrlKey||46!=r&&110!=r&&190!=r?a:".";var n=(e=e.substr(0,s.start)+a+e.substr(s.end)).split(this.delimiter).join("");return this.executeValidate(n)},r.maxFloatLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){var o=i.keyCode||i.charCode,s=t.value.split(this.delimiter).join("");return!!(i.shiftKey&&187==o||189==o||(i.metaKey||i.ctrlKey)&&65==o||(i.metaKey||i.ctrlKey)&&67==o||(i.metaKey||i.ctrlKey)&&86==o||(i.metaKey||i.ctrlKey)&&88==o||(i.metaKey||i.ctrlKey)&&90==o||o>=33&&o<=40||107==o||109==o||(110===o||190===o||173===o)&&"."===this.decimalDelimiter||8==o||13==o||12==o||144==o||9==o||46==o||45==o)||this.executeValidate(s)},r.maxFloatLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.maxFloatLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_maxFloatLength",this.integerMaxLength,this.fractionMaxLength)},r.maxByteLengthCommand=function(t,e){this.maxByteLength=t||0,this.byteCheckIgnoreChar=e||""},o.x.extend(r.maxByteLengthCommand.prototype,r.validateCommand.prototype),r.maxByteLengthCommand.prototype.getType=function(){return"maxByteLength"},r.maxByteLengthCommand.prototype.getDetail=function(){return{}},r.maxByteLengthCommand.prototype.getValue=function(){return this.maxByteLength},r.maxByteLengthCommand.prototype.executeValidate=function(t){try{var e=!0;return WebSquare.util.getStringByteSize(t,this.byteCheckIgnoreChar)>this.maxByteLength&&(e=!1),e}catch(t){s.w.printStackTrace(t)}},r.maxByteLengthCommand.prototype.executeValidateString=function(t){try{for(var e=WebSquare.util.getStringByteSize(t,this.byteCheckIgnoreChar);t.length>0&&e>this.maxByteLength;)t=t.substr(0,t.length-1),e=WebSquare.util.getStringByteSize(t,this.byteCheckIgnoreChar);return t}catch(t){s.w.printStackTrace(t)}},r.maxByteLengthCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.maxByteLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.maxByteLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.maxByteLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_maxByteLength",this.maxByteLength)},r.minByteLengthCommand=function(t){this.minByteLength=t||0},o.x.extend(r.minByteLengthCommand.prototype,r.validateCommand.prototype),r.minByteLengthCommand.prototype.getType=function(){return"minByteLength"},r.minByteLengthCommand.prototype.getDetail=function(){return{}},r.minByteLengthCommand.prototype.getValue=function(){return this.minByteLength},r.minByteLengthCommand.prototype.executeValidate=function(t){try{var e=!0;return WebSquare.util.getStringByteSize(t)<this.minByteLength&&(e=!1),e}catch(t){s.w.printStackTrace(t)}},r.minByteLengthCommand.prototype.executeValidateString=function(t){return t},r.minByteLengthCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.minByteLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},
r.minByteLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.minByteLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_minByteLength",this.minByteLength)},r.allowCharCommand=function(t){this.allowChar=t,this.regExp=new RegExp("["+t+"]","g")},o.x.extend(r.allowCharCommand.prototype,r.validateCommand.prototype),r.allowCharCommand.prototype.getType=function(){return"allowChar"},r.allowCharCommand.prototype.getDetail=function(){return{}},r.allowCharCommand.prototype.getValue=function(){return this.allowChar},r.allowCharCommand.prototype.executeValidate=function(t){try{var e=!0;return""!=t&&(t.match(this.regExp)||(e=!1)),e}catch(t){s.w.printStackTrace(t)}},r.allowCharCommand.prototype.executeValidateString=function(t){try{var e=t.match(this.regExp);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.allowCharCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=i.charCode?i.charCode:i.keyCode;String.fromCharCode(r).match(this.regExp)||(o=!1),WebSquare.util.isFF()&&0==i.charCode&&(o=!0),WebSquare.util.isOpera()&&WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[r]&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.allowCharCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.allowCharCommand.prototype.executeValidateKeyInput=function(t,e,i){for(var o,s=[];null!==(o=this.regExp.exec(e));)s.push(o[0]);return s.join("")},r.allowCharCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_allowChar",this.allowChar)},r.ignoreCharCommand=function(t){this.ignoreChar=t,this.regExp=new RegExp("["+t+"]","g")},o.x.extend(r.ignoreCharCommand.prototype,r.validateCommand.prototype),r.ignoreCharCommand.prototype.getType=function(){return"ignoreChar"},r.ignoreCharCommand.prototype.getDetail=function(){return{}},r.ignoreCharCommand.prototype.getValue=function(){return this.ignoreChar},r.ignoreCharCommand.prototype.executeValidate=function(t){try{var e=!0;return""!=t&&t.match(this.regExp)&&(e=!1),e}catch(t){s.w.printStackTrace(t)}},r.ignoreCharCommand.prototype.executeValidateString=function(t){try{return t=t.replace(this.regExp,"")}catch(t){s.w.printStackTrace(t)}},r.ignoreCharCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=i.charCode?i.charCode:i.keyCode;String.fromCharCode(r).match(this.regExp)&&(o=!1)}return o}catch(i){s.w.printStackTrace(i)}},r.ignoreCharCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.ignoreCharCommand.prototype.executeValidateKeyInput=function(t,e,i){try{return e=e.replace(this.regExp,"")}catch(i){s.w.printStackTrace(i)}},r.ignoreCharCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_ignoreChar",this.ignoreChar)},r.numberCommand=function(t,e){t||(t=","),e||(e="."),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.numberCommand.prototype,r.validateCommand.prototype),r.numberCommand.prototype.getType=function(){return"number"},r.numberCommand.prototype.getDetail=function(){return{}},r.numberCommand.prototype.getValue=function(){return""},r.numberCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.numberCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-\.]+/g);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.numberCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=i.charCode?i.charCode:i.keyCode,a=String.fromCharCode(r),n=WebSquare.text.getSelection(t),l=e.substr(0,n.start)+a+e.substr(n.end),h=l.match(this.pattern);o=!(!h||h+""!=l),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[r])&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.numberCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},
r.numberCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.numberCommand.prototype.executeInvalidMessage=function(){return""},r.digitCommand=function(t,e){t||(t=","),e||(e="."),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.digitCommand.prototype,r.validateCommand.prototype),r.digitCommand.prototype.getType=function(){return"digit"},r.digitCommand.prototype.getDetail=function(){return{}},r.digitCommand.prototype.getValue=function(){return""},r.digitCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.digitCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.digitCommand.prototype.executeValidateString=function(t){try{var e="";"+"!==t.charAt(0)&&"-"!==t.charAt(0)||(e=t.charAt(0),t=t.substr(1));var i=t.match(/[^0]+[0-9]*/g);if(null!=i){var o="";null!=t.match(/^0+[^0-9]/)&&(o="0"),i=o+i.join("")}else i=""!==t?"0":"";return t=e+i}catch(t){s.w.printStackTrace(t)}},r.digitCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.digitCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.digitCommand.prototype.executeInvalidMessage=function(){return""},r.floatCommand=function(t,e,i){this.currentState="init",this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*$"),this.numberPattern=new RegExp("[0-9\\+\\-\\"+e+"]+","g"),this.delimiter=t||",",this.decimalDelimiter=e||".",this.applyFormat=i||"all"},o.x.extend(r.floatCommand.prototype,r.validateCommand.prototype),r.floatCommand.prototype.getType=function(){return"float"},r.floatCommand.prototype.getDetail=function(){return"error"===this.currentState?{currentState:"init",code:3,message:"올바르지 않은 입력입니다."}:{}},r.floatCommand.prototype.getValue=function(){return""},r.floatCommand.prototype.executeValidate=function(t){try{return""===t||""!==this.executeValidateString(t)}catch(t){s.w.printStackTrace(t)}return!1},r.floatCommand.prototype.executeValidateString=function(t){try{this.currentState="init";var e=(t=t.split(this.delimiter).join("")).split(this.decimalDelimiter).join("."),i=this.pattern.test(t),o=parseFloat(e);if(!i||"number"!=typeof o||t[t.length-1]===this.decimalDelimiter){this.currentState="error";var s=t.match(this.numberPattern);return s?s.join(""):""}return t}catch(t){}return""},r.floatCommand.prototype.executeValidateKeyPress=function(t,e,i){return this.executeValidate(e)},r.floatCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_float")},r.floatCommand.prototype.executeValidateKeyDown=function(t,e,i){var o=i.keyCode||i.charCode,s=o-48<0||o-48>9?String.fromCharCode(o):o-48+"";if(s=96<=o&&o<=105?o-96+"":s,s=110!==o&&190!==o||"."!==this.decimalDelimiter?s:".",s=188===o&&","===this.decimalDelimiter?",":s,s=189===o||173===o||109===o?"-":s,s=i.metaKey||i.ctrlKey||46!==o&&110!==o&&190!==o||"."!==this.decimalDelimiter?s:".",s=i.shiftKey&&187===o||107==o?"+":s,(i.metaKey||i.ctrlKey)&&65===o||(i.metaKey||i.ctrlKey)&&67===o||(i.metaKey||i.ctrlKey)&&86===o||(i.metaKey||i.ctrlKey)&&88===o||(i.metaKey||i.ctrlKey)&&90===o||o>=33&&o<=40||8===o||13===o||(110===o||190===o||173===o)&&"."===this.decimalDelimiter||12==o||144==o||o>=112&&o<=123||o>=16&&o<=20||9===o||46===o||45==o||27===o)return!0;var r=WebSquare.text.getSelection(t),a=e.substr(0,r.start)+s+e.substr(r.end);return!!a.split(this.delimiter).join("").match(this.pattern)&&this.executeValidate(a)},r.floatCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.dateCommand=function(t){this.dateHelper=new WebSquare.uiplugin.dateHelper,this.ioFormat=t||"yyyyMMddHHmmSS"},o.x.extend(r.dateCommand.prototype,r.validateCommand.prototype),r.dateCommand.prototype.getType=function(){return"date"},r.dateCommand.prototype.getDetail=function(){return{}},r.dateCommand.prototype.getValue=function(){return""},r.dateCommand.prototype.executeValidate=function(t){try{
var e=!0,i=this.ioFormat.indexOf("yyyy"),o=this.ioFormat.indexOf("MM"),r=this.ioFormat.indexOf("dd"),a=this.ioFormat.indexOf("HH"),n=this.ioFormat.indexOf("mm"),l=this.ioFormat.indexOf("SS"),h=t.substr(i,4),d=t.substr(o,2),u=t.substr(r,2),c=t.substr(a,2),p=t.substr(n,2),g=t.substr(l,2);switch(t.length){case 4:(isNaN(parseInt(h,10))||parseInt(h,10)<1)&&(e=!1);break;case 6:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);break;case 8:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);var m=this.dateHelper.getMonthCount(h,d);(isNaN(parseInt(u,10))||parseInt(u,10)<1||parseInt(u,10)>m)&&(e=!1);break;case 10:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);m=this.dateHelper.getMonthCount(h,d);(isNaN(parseInt(u,10))||parseInt(u,10)<1||parseInt(u,10)>m)&&(e=!1),(isNaN(parseInt(c,10))||parseInt(c,10)<0||parseInt(c,10)>23)&&(e=!1);break;case 12:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);m=this.dateHelper.getMonthCount(h,d);(isNaN(parseInt(u,10))||parseInt(u,10)<1||parseInt(u,10)>m)&&(e=!1),(isNaN(parseInt(c,10))||parseInt(c,10)<0||parseInt(c,10)>23)&&(e=!1),(isNaN(parseInt(p,10))||parseInt(p,10)<0||parseInt(p,10)>59)&&(e=!1);break;case 14:(isNaN(parseInt(d,10))||parseInt(d,10)<1||parseInt(d,10)>12)&&(e=!1);m=this.dateHelper.getMonthCount(h,d);(isNaN(parseInt(u,10))||parseInt(u,10)<1||parseInt(u,10)>m)&&(e=!1),(isNaN(parseInt(c,10))||parseInt(c,10)<0||parseInt(c,10)>23)&&(e=!1),(isNaN(parseInt(p,10))||parseInt(p,10)<0||parseInt(p,10)>59)&&(e=!1),(isNaN(parseInt(g,10))||parseInt(g,10)<0||parseInt(g,10)>59)&&(e=!1);break;default:e=!1}return e}catch(t){s.w.printStackTrace(t)}},r.dateCommand.prototype.executeValidateString=function(t){try{return t}catch(t){s.w.printStackTrace(t)}},r.dateCommand.prototype.executeValidateKeyPress=function(t,e,i){try{return!0}catch(i){s.w.printStackTrace(i)}},r.dateCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.dateCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.dateCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_date")},r.euroCommand=function(t,e){t||(t="."),e||(e=","),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.euroCommand.prototype,r.validateCommand.prototype),r.euroCommand.prototype.getType=function(){return"euro"},r.euroCommand.prototype.getDetail=function(){return{}},r.euroCommand.prototype.getValue=function(){return""},r.euroCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.euroCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-\,]+/g);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.euroCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getCaretPos(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=e.substr(0,a)+l+e.substr(a),d=h.match(this.pattern);o=!(!d||d+""!=h),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[n])&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.euroCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.euroCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.euroCommand.prototype.executeInvalidMessage=function(){return""},r.rupeeCommand=function(t,e){t||(t="."),e||(e=","),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.rupeeCommand.prototype,r.validateCommand.prototype),r.rupeeCommand.prototype.getType=function(){return"rupee"},r.rupeeCommand.prototype.getDetail=function(){return{}},r.rupeeCommand.prototype.getValue=function(){return""},r.rupeeCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.rupeeCommand.prototype.executeValidateString=function(t){try{
var e=t.match(/[0-9\+\-\.]+/g);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.rupeeCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.rupeeCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.rupeeCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getCaretPos(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=e.substr(0,a)+l+e.substr(a),d=h.match(this.pattern);o=!(!d||d+""!=h),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[n])&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.rupeeCommand.prototype.executeInvalidMessage=function(){return""},r.numberMaskCommand=function(t,e,i){this.masking=t,this.maskFormat=e,this.applyFormat=i,this.pattern=new RegExp("^[0-9-+]")},o.x.extend(r.numberMaskCommand.prototype,r.validateCommand.prototype),r.numberMaskCommand.prototype.getType=function(){return"mask"},r.numberMaskCommand.prototype.getDetail=function(){return{}},r.numberMaskCommand.prototype.getValue=function(){return""},r.numberMaskCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.numberMaskCommand.prototype.executeValidateString=function(t){try{return t}catch(t){s.w.printStackTrace(t)}},r.numberMaskCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.numberMaskCommand.prototype.executeValidateKeyInput=function(t,e,i){try{if(i&&"all"==this.applyFormat){var o=WebSquare.event.getTarget(i),r=WebSquare.text.getCaretPos(o),a=e,n="-"==e[0]?e.length:e.length,l=this.masking,h=this.maskFormat;n="-"==e[0]?e.length-1:e.length;"reverse"==h&&n>l.length?/\d/g.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r)):"default"==h&&n>l.length&&/\d/g.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r))}return a}catch(i){s.w.printStackTrace(i)}},r.numberMaskCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i)if("all"==this.applyFormat){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=this.masking,d=this.maskFormat,u="-"==e[0]?e.length-1:e.length,c=h.length;a.start==a.end&&(this.pattern.test(l)?"reverse"==d&&u>=c?"0"==h[0]?("0"!=e[0]&&"-"!=e[0]||"-"==e[0]&&"0"!=e[1])&&(o=!1):o=!1:"default"==d&&u>=c&&("0"==h[c-1]?"0"!=e[e.length-1]&&(o=!1):"#"==h[c-1]&&(o=!1)):o=!1)}else if("display"==this.applyFormat){r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=this.masking,d=this.maskFormat,u="-"==e[0]?e.length-1:e.length,c=0;for(var p=0;p<h.length;p++)"0"!=h[p]&&"#"!=h[p]||(c+=1);a.start==a.end&&u>=c&&(o=!1),this.pattern.test(l)||(o=!1,0!=a.start||"-"!=i.key&&"Subtract"!=i.key||(o=!0))}return o}catch(i){s.w.printStackTrace(i)}},r.numberMaskCommand.prototype.executeInvalidMessage=function(){return""},r.textMaskCommand=function(t,e,i,o){this.masking=t,this.maskFormat=e,this.applyFormat=i,o?(this.pattern=new RegExp("^["+o+"]"),this.rPattern=new RegExp("["+o+"]")):(this.pattern=new RegExp("^[0-9]"),this.rPattern=new RegExp("[0-9]"))},o.x.extend(r.textMaskCommand.prototype,r.validateCommand.prototype),r.textMaskCommand.prototype.getType=function(){return"mask"},r.textMaskCommand.prototype.getDetail=function(){return{}},r.textMaskCommand.prototype.getValue=function(){return""},r.textMaskCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.textMaskCommand.prototype.executeValidateString=function(t){try{return t}catch(t){s.w.printStackTrace(t)}},r.textMaskCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.textMaskCommand.prototype.executeValidateKeyInput=function(t,e,i){try{if(i){var o=WebSquare.event.getTarget(i),r=WebSquare.text.getCaretPos(o),a=e,n=this.masking,l=this.maskFormat
;"reverse"==l&&e.length>n.length?this.rPattern.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r)):"default"==l&&e.length>n.length&&this.rPattern.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r))}return a}catch(i){s.w.printStackTrace(i)}},r.textMaskCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i)if("all"==this.applyFormat){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),n=i.charCode?i.charCode:i.keyCode,l=this.masking,h=String.fromCharCode(n),d=e.length,u=l.length;a.start==a.end&&d>=u&&(o=!1),this.pattern.test(h)||(o=!1)}else if("display"==this.applyFormat){r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),l=this.masking,n=i.charCode?i.charCode:i.keyCode,h=String.fromCharCode(n),d=e.length,u=0;for(var c=0;c<l.length;c++)"#"==l[c]&&(u+=1);a.start==a.end&&d>=u&&(o=!1),this.pattern.test(h)||(o=!1)}return o}catch(i){s.w.printStackTrace(i)}},r.textMaskCommand.prototype.executeInvalidMessage=function(){return""},r.tengeCommand=function(t,e){t||(t=" "),e||(e="-"),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.x.extend(r.tengeCommand.prototype,r.validateCommand.prototype),r.tengeCommand.prototype.getType=function(){return"tenge"},r.tengeCommand.prototype.getDetail=function(){return{}},r.tengeCommand.prototype.getValue=function(){return""},r.tengeCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.w.printStackTrace(t)}},r.tengeCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-]+/g);return t=e?e.join(""):""}catch(t){s.w.printStackTrace(t)}},r.tengeCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getCaretPos(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=e.substr(0,a)+l+e.substr(a),d=h.match(this.pattern);o=!(!d||d+""!=h),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[n])&&(o=!0)}return o}catch(i){s.w.printStackTrace(i)}},r.tengeCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.tengeCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.tengeCommand.prototype.executeInvalidMessage=function(){return""},r.commandAdapter=function(t,e){this.userFunc=t,this.scopeId=e},o.x.extend(r.commandAdapter.prototype,r.validateCommand.prototype),r.commandAdapter.prototype.executeValidate=function(t){return!0},r.commandAdapter.prototype.getDetail=function(){return{}},r.commandAdapter.prototype.getType=function(){return"user"},r.commandAdapter.prototype.getValue=function(){return""},r.commandAdapter.prototype.executeValidateString=function(t,e){try{if("function"!=typeof this.userFunc)try{this.userFunc=WebSquare.util.getGlobalFunction(this.userFunc,this.scopeId)}catch(t){}return"function"==typeof this.userFunc&&(t=this.userFunc(t,e)),t}catch(t){s.w.printStackTrace(t)}},r.commandAdapter.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.commandAdapter.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.commandAdapter.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.commandAdapter.prototype.executeInvalidMessage=function(){return""}},1721:function(t,e,i){"use strict";i.d(e,{L:function(){return x}});var o,s,r,a,n,l,h,d,u,c,p=i(484),g=i(2137),m=i(7757),f=i.n(m),b=i(1477),y=i(5948),v=i(5052),w=i(9075),S=i(3308),C=i(6046),x=(i(9818),{});x._MSMXL_PROGIDS=b.d._MSMXL_PROGIDS,x.loadDocumentCache={},x.load=function(){var t=(0,g.Z)(f().mark((function t(e,i,o,s){var r,a,n,l,h,d;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,a=e,t.prev=3,void 0===i||!i){t.next=8;break}if(void 0===(r=x.loadDocumentCache[a])||null==r){t.next=8;break}return t.abrupt("return",r);case 8:if("string"!=typeof e){t.next=36;break}return t.next=12,v.v.loadAsync(e,{useXML:!0});case 12:if(n=t.sent){t.next=15;break}return t.abrupt("return",null);case 15:if(r=void 0!==s&&s?x._parse(n):x.parse(n),
l="object"==(0,p.Z)(r),!s&&b.d.useWebSquareXMLParser||!b.d.useActiveXObject||0==r.parseError.errorCode){t.next=32;break}throw w.k.debug&&(h="top=120,height=485,left=50,width=800,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,titlebar=yes,toolbar=no",window.open(e,"_blank",h)),(d=new Object).ParserException=S.d.getMessage("E_xml_ErrorOccurLoadingXML"),d.ParserException+="\nerrorCode: "+r.parseError.errorCode,d.ParserException+="\nfilepos : "+r.parseError.filepos,d.ParserException+="\nline    : "+r.parseError.line,d.ParserException+="\nlinepos : "+r.parseError.linepos,d.ParserException+="\nreason  : "+r.parseError.reason,d.ParserException+="srcText   : "+r.parseError.srcText,d.ParserException+="\nurl : "+r.parseError.url,r=null,d;case 32:if(l){t.next=36;break}return w.k.debug&&(h="top=120,height=485,left=50,width=800,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,titlebar=yes,toolbar=no",window.open(e,"_blank",h)),w.k.printLog("ERROR : "+S.d.getMessage("E_xml_ErrorOccurLoadingXMLWithURL",a)),t.abrupt("return",null);case 36:void 0!==i&&i&&(x.loadDocumentCache[a]=r),t.next=42;break;case 39:t.prev=39,t.t0=t.catch(3),y.w.printStackTrace(t.t0,"xml.load");case 42:return t.abrupt("return",r);case 43:case"end":return t.stop()}}),t,null,[[3,39]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),x.loadSafari=function(t){var e=b.d.getXMLHTTPObject();e.open("GET",t,!1),e.send(null);var i=e.responseText;return e=null,this.parse(i)},x.parse=function(t,e){var i=null;try{if(b.d.useWebSquareXMLParser){if("string"==typeof t){if(""==(t=t.wq_trim()))return w.k.printLog("ERROR : xml.load Error. String is empty."),null;"<"!=t.charAt(0)&&(t="<"+t+"/>")}else null==t||9!=t.nodeType&&1!=t.nodeType||(t=x.serialize(t));var o=new DOMImplementation;o.namespaceAware=!0,o.errorChecking=!1,o.preserveWhiteSpace=!0,i=o.loadXML(t)}else i=x._parse(t,e)}catch(t){return y.w.printStackTrace(t,"xml.parse"),null}return i},x._parse=function(t,e){var i=null;try{if("string"==typeof t&&t.startsWith("<!DOCTYPE")){var o=t.indexOf("<",9);o>0&&(t=t.substring(o))}if(b.d.useActiveXObject){if((i=new ActiveXObject(x._MSMXL_PROGIDS[0])).async=!1,i.validateOnParse=!1,"true"==v.v.getConfiguration("/WebSquare/preserveWhiteSpace/@value")&&(i.preserveWhiteSpace=!0),"string"==typeof t){if(""==(t=t.wq_trim()))return w.k.printLog("ERROR : xml.load Error입니다. String이 공백입니다."),null;if("<"!=t.charAt(0)){var s="<"+t+"/>";i.loadXML(s)}else i.loadXML(t)}else null==t||9!=t.nodeType&&1!=t.nodeType||i.loadXML(t.xml);if(void 0!==e&&(1==e||"true"==e)){var r=v.v.getNamespaces(i),a="";for(var n in r)""!=n&&(a+="xmlns:"+n+'="'+r[n]+'" ');i.setProperty("SelectionLanguage","XPath"),i.setProperty("SelectionNamespaces",a)}}else if(v.v.supportDOM)try{var l=new DOMParser;if("string"==typeof t){if(""==(t=t.wq_trim()))return w.k.printLog("ERROR : xml.load Error입니다. String이 공백입니다."),null;if("<"!=t.charAt(0)){s="<"+t+"/>";i=l.parseFromString(s,"text/xml")}else i=l.parseFromString(t,"text/xml")}else null==t||9!=t.nodeType&&1!=t.nodeType||(i=l.parseFromString(x.serialize(t),"text/xml"));if(i.async=!1,v.v.browserCheck.moz&&"parsererror"==i.documentElement.nodeName)return w.k.printLog("[Firefox]"+S.d.getMessage("E_xml_ErrorOccurParsingXML")+"(parsererror)"),null;if((v.v.browserCheck.chrome||v.v.browserCheck.safari)&&i.getElementsByTagName("parsererror").length>0)return w.k.printLog("[Safari/Chrome]"+S.d.getMessage("E_xml_ErrorOccurParsingXML")+"(parsererror)"),null}catch(t){return w.k.printLog("[DOMParser] "+S.d.getMessage("E_xml_ErrorOccurParsingXML")),y.w.printStackTrace(t,"xml.parse"),null}if(void 0===i||null==i)return w.k.printLog("ERROR : "+S.d.getMessage("E_xml_XMLUnsupportedBrowser")),null;if(b.d.useActiveXObject&&0!=i.parseError.errorCode){var h=new Object;throw h.ParserException=S.d.getMessage("E_xml_ErrorOccurParsingXML"),h.ParserException+="\nerrorCode      : "+i.parseError.errorCode,h.ParserException+="\nfilepos        : "+i.parseError.filepos,
h.ParserException+="\nline           : "+i.parseError.line,h.ParserException+="\nlinepos        : "+i.parseError.linepos,h.ParserException+="\nreason         : "+i.parseError.reason,h.ParserException+="\nsrcText        : "+i.parseError.srcText,h.ParserException+="\nurl            : "+i.parseError.url,h.ParserException+="string"==typeof t?"\n\n: "+t:"\n\n: "+t.xml,h}}catch(h){return y.w.printStackTrace(h,"xml.parse"),null}return i},x.remove_xmlns_regexp=/xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml['"]|xmlns:w2=['"]http:\/\/www.inswave.com\/websquare['"]/,x.serialize=function(t){if(!t)return"";var e="";try{if(b.d.useWebSquareXMLParser)try{var i=[];x._serialize(t,i),e=i.join("")}catch(t){y.w.printStackTrace(t,"xml.serialize")}else if(b.d.useActiveXObject)e=null!=(e=t.xml)?e.wq_trim():"";else if(v.v.websquareSerializer)try{i=[];x._serialize(t,i),e=i.join("")}catch(t){y.w.printStackTrace(t,"xml.serialize")}else if(v.v.supportDOM){e=(new XMLSerializer).serializeToString(t)}}catch(t){y.w.printStackTrace(t,"xml.serialize")}return e},x.noNameSpaceSerialize=function(t){var e=x.serialize(t);return"true"==v.v.getConfiguration("/WebSquare/removeXmlNameSpace/@value")&&(e=e.replace(x.remove_xmlns_regexp,"")),e},x.nodeSerialize=function(t,e){try{switch(void 0===e&&(e={}),void 0===e.standalone&&(e.standalone=null),void 0===e.encoding&&(e.encoding="UTF-8"),void 0===e.omitXmlDeclaration&&(e.omitXmlDeclaration=!1),void 0===e.includeNamespacePrefixes&&(e.includeNamespacePrefixes=null),void 0===e.cdataSectionElements&&(e.cdataSectionElements=[]),t.nodeType){case 1:for(var i="<"+t.tagName,o=0;o<t.attributes.length;++o){var s=t.attributes[o];null!=s&&(s.specified&&(i+=i.nodeSerialize(s,e)))}if(t.hasChildNodes()){i+=">";for(var r=t.firstChild;null!=r;r=r.nextSibling)i+=i.nodeSerialize(r,e);i+="</"+t.tagName+">"}else i+="></"+t.tagName+">";return i;case 2:return t.name.match(/^xmlns(:|$)/)&&!i.isVisiblyUtilized(t)?"":" "+t.name+'="'+t.value.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"';case 3:if(!i.isCDataSectionElement(t.parentNode))return t.data.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");case 4:return"<![CDATA["+t.data.replace(/]]>/g,"]]]]><![CDATA[>")+"]]>";case 7:return"<?"+t.target+" "+t.data+"?>";case 8:return"\x3c!--"+t.data+"--\x3e";case 9:i="";if(!e.omitXmlDeclaration)i+='<?xml version="1.0" encoding="'+("UTF-16"==e.encoding?"UTF-16":"UTF-8")+'"'+(null!=e.standalone?' standalone="'+(e.standalone?"yes":"no")+'"':"")+"?>\n\n";for(r=t.firstChild;null!=r;r=r.nextSibling)i+=i.nodeSerialize(r,e)+"\n";return i;case 10:i="<!DOCTYPE "+t.name+' PUBLIC "'+t.publicId+'" "'+t.systemId+'" [\n';return i+="]>";case 11:for(i="",r=t.firstChild;null!=r;r=r.nextSibling)i+=i.nodeSerialize(r,e);return i;default:w.k.printLog("Unsupported node: "+t.nodeName+" ("+t.nodeType+")")}}catch(t){y.w.printStackTrace(t)}},x.isVisiblyUtilized=function(t,e){if(!e.includeNamespacePrefixes)return!0;var i=t.name.substring(6),o=new XPath("..").selectNode(t);for(var s in e.includeNamespacePrefixes){var r=e.includeNamespacePrefixes[s];if(r==i||"#default"==r&&""==i)return!0}return"xmlns"==t.name?null==o.prefix:new XPath("parent::"+i+":* or ..//@"+i+":*").evaluate(t)},x.isCDataSectionElement=function(t,e){for(var i in e.cdataSectionElements)if(e.cdataSectionElements[i].matches(t))return!0;return!1},x.indent=function(t,e){if(void 0===e){try{var i=[];return x._treeWalk2(t,i,0),i.join("")}catch(t){y.w.printStackTrace(t,"xml.indent")}return null}try{i=[];return x._treeWalk(t,i,0),i.join("")}catch(t){y.w.printStackTrace(t,"xml.indent")}return""},x._serialize=function(t,e){if(1==t.nodeType){if(e.push("<"),e.push(t.nodeName),t.attributes.length>0)for(var i=0;i<t.attributes.length;i++){var o=t.attributes.item(i);e.push(" "),e.push(o.name),e.push('="'),e.push(x._encode(o.nodeValue)),e.push('"')}if(t.hasChildNodes()){e.push(">");for(var s=t.childNodes,r=0;r<s.length;r++){var a=s.item(r);x._serialize(a,e)}e.push("</"),
e.push(t.nodeName),e.push(">")}else e.push("/>")}else if(3==t.nodeType)e.push(x._encode(t.nodeValue));else if(4==t.nodeType)e.push("<![CDATA["+t.nodeValue+"]]>");else if(7==t.nodeType)e.push("<?"+t.nodeName+" "+t.nodeValue+"?>\n");else if(8==t.nodeType)e.push("\x3c!--"+t.nodeValue+"--\x3e");else if(9==t.nodeType)for(s=t.childNodes,r=0;r<s.length;r++){a=s.item(r);x._serialize(a,e)}},x._treeWalk=function(t,e,i){var o=!1;if(i=i||0,1==t.nodeType){o=!0,i&&e.push("<br />");for(var s=0;s<i;s++)e.push("&nbsp;");if(e.push("<font color='blue'><b>&lt;"),e.push(t.nodeName),e.push("</b></font>"),t.attributes.length>0)for(s=0;s<t.attributes.length;s++){var r=t.attributes.item(s);r.nodeValue.indexOf('"')>-1?e.push(" <font color='red'>"+r.name+"</font>='<i><font color='#888888'>"+x.encode2(r.nodeValue)+"</font></i>'"):e.push(" <font color='red'>"+r.name+"</font>=\"<i><font color='#888888'>"+x.encode2(r.nodeValue)+'</font></i>"')}if(t.hasChildNodes()){e.push(">");for(var a=t.childNodes,n=!1,l=0;l<a.length;l++){var h=a.item(l);x._treeWalk(h,e,i+4)&&(n=!0)}if(n){e.push("<br />");for(s=0;s<i;s++)e.push("&nbsp;")}e.push("<font color='blue'><b>&lt;/"),e.push(t.nodeName),e.push("&gt;</b></font>")}else e.push("<font color='blue'><b>/&gt;</b></font>")}else if(3==t.nodeType){var d=t.nodeValue||"";d=d.trim(),e.push(x.encode2(d))}else if(4==t.nodeType)e.push("&lt;![CDATA["+x.encode1(t.nodeValue)+"]]&gt;");else if(7==t.nodeType)e.push("<b>&lt;?"+t.nodeName+" "+x.encode1(t.nodeValue)+"?&gt;</b>");else if(8==t.nodeType);else if(9==t.nodeType)for(a=t.childNodes,l=0;l<a.length;l++){h=a.item(l);x._treeWalk(h,e,i)}return o},x._treeWalk2=function(t,e,i){var o=!1;if(i=i||0,1==t.nodeType){o=!0,i&&e.push("\n");for(var s=0;s<i;s++)e.push(" ");if(e.push("<"),e.push(t.nodeName),t.attributes.length>0)for(s=0;s<t.attributes.length;s++){var r=t.attributes.item(s);e.push(" "),e.push(r.name),e.push('="'),e.push(x._encode(r.nodeValue)),e.push('"')}if(t.hasChildNodes()){e.push(">");for(var a=t.childNodes,n=!1,l=0;l<a.length;l++){var h=a.item(l);x._treeWalk2(h,e,i+4)&&(n=!0)}if(n){e.push("\n");for(s=0;s<i;s++)e.push(" ")}e.push("</"),e.push(t.nodeName),e.push(">")}else e.push("/>")}else if(3==t.nodeType){var d=t.nodeValue||"";d=d.trim(),e.push(x._encode(d))}else if(4==t.nodeType)e.push("<![CDATA["+t.nodeValue+"]]>");else if(7==t.nodeType)e.push("<?"+t.nodeName+" "+t.nodeValue+"?>\n");else if(8==t.nodeType)e.push("\x3c!--"+t.nodeValue+"--\x3e");else if(9==t.nodeType)for(a=t.childNodes,l=0;l<a.length;l++){h=a.item(l);x._treeWalk2(h,e,i)}return o},x.encode1=(o=/&/g,s=/</g,r=/>/g,a=/"/g,n=/\r\n/g,l=/\n/g,h=/\r/g,d=/ /g,u=/\t/g,function(t){var e=null;if(null==t)e="";else if("string"==typeof t)e=t;else{if(!x.isDocument(t))return t;e=x.serialize(t)}return e.replace(o,"&amp;").replace(s,"&lt;").replace(r,"&gt;").replace(a,"&quot;").replace(d,"&nbsp;").replace(u,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(n,"<br />").replace(l,"<br />").replace(h,"<br />")}),x.encode2=function(){var t=/&/g,e=/</g,i=/>/g,o=/\r\n/g,s=/\n/g,r=/\r/g,a=/ /g,n=/\t/g;return function(l){var h=null;if(null==l)h="";else if("string"==typeof l)h=l;else{if(!x.isDocument(l))return l;h=x.serialize(l)}return h.replace(t,"&amp;amp;").replace(e,"&amp;lt;").replace(i,"&amp;gt;").replace(a,"&nbsp;").replace(n,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(o,"<br />").replace(s,"<br />").replace(r,"<br />")}}(),x._encode=function(){var t=/&/g,e=/</g,i=/>/g,o=/"/g,s=/'/g;return function(r){return r.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(o,"&quot;").replace(s,"&apos;")}}(),x._decode=function(){var t=/&lt;/g,e=/&gt;/g,i=/&apos;/g,o=/&quot;/g,s=/&amp;/g,r=/&apos;;/g;return function(a){return a.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"'")}}(),x.__decode=function(){var t=/&lt[;]{0,1}/g,e=/&gt[;]{0,1}/g,i=/&apos[;]{0,1}/g,o=/&quot[;]{0,1}/g,s=/&amp[;]{0,1}/g,r=/&apos[;]{0,1}/g,a=/&nbsp[;]{0,1}/g;return function(n){
return n.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"'").replace(a," ")}}(),x.encode=function(){var t=/&/g,e=/</g,i=/>/g,o=/'/g,s=/"/g,r=/\r\n/g,a=/\n/g,n=/\r/g;return function(l){var h=null;if(null==l)h="";else if("string"==typeof l)h=l;else{if(!x.isDocument(l))return l;h=x.serialize(l)}return h.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(o,"&apos;").replace(s,"&quot;").replace(r,"&#xA;").replace(a,"&#xA;").replace(n,"&#xA;")}}(),x.decode=function(){var t=/&lt;/g,e=/&gt;/g,i=/&apos;/g,o=/&quot;/g,s=/&amp;/g,r=/&#xA;/g;return function(a){return a.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"\n")}}(),x.isDocument=function(t){try{return"object"==(0,p.Z)(t)&&void 0!==t.documentElement&&9==t.nodeType}catch(t){}return!1},x.isDocumentString=function(t){var e;try{if(b.d.useActiveXObject)(e=new ActiveXObject(x._MSMXL_PROGIDS[0])).async=!1,e.validateOnParse=!1,e.loadXML(t);else if("<"==t.wq_trim().charAt(0))(e=(new DOMParser).parseFromString(t,"text/xml")).async=!1;if(void 0===e||null==e)return!1;if(v.v.browserCheck.moz&&"parsererror"==e.documentElement.nodeName)return!1;if(b.d.useActiveXObject&&0!=e.parseError.errorCode)return!1}catch(t){return!1}return!0},x.getElementsByTagName=function(t,e,i){if(!(v.v.browserCheck.ieAllVersion||b.d.browserCheck.chrome||b.d.browserCheck.safari||b.d.browserCheck.opera||WebSquare.util.isMobile()))return v.v.browserCheck.moz?void 0===i?t.getElementsByTagName(e):t.getElementsByTagNameNS(i,e):t.getElementsByTagName(e);try{return void 0===i?e.indexOf(":")>=0?t.selectNodes(".//*['"+e+"'=name()]"):t.selectNodes(".//*['"+e+"'=local-name()]"):t.selectNodes(".//*['"+e+"'=local-name()]['"+i+"'=namespace-uri()]")}catch(s){if(void 0===i)return t.getElementsByTagName(e);var o=e;return i==v.v._XML_NAMESPACE.SCHEMA?o=e:i==v.v._XML_NAMESPACE.XFORMS?o="xf:"+e:i==v.v._XML_NAMESPACE.XHTML||i==v.v._XML_NAMESPACE.XML||i==v.v._XML_NAMESPACE.XSL?o=e:i==v.v._XML_NAMESPACE.EVENTS?o="ev:"+e:i==v.v._XML_NAMESPACE.W2&&(o="w2:"+e),t.getElementsByTagName(o)}},x.matchNode=function(t,e,i){if(void 0===i)return t.nodeName==e;var o=t.nodeName.split(":"),s=2==o.length?o[1]:o[0];return i==t.namespaceURI&&s==e},x.nodeInfoObj=(c={},function(t){var e=t.nodeName;if(!c[e]){var i=t.namespaceURI;if(void 0!==i&&""!==i){var o=e.split(":");c[e]={nodeName:o[o.length-1],uri:i}}else c[e]={nodeName:e}}return c[e]}),x.getLocalName=function(t){var e=t.nodeName.split(":");return 2==e.length?e[1]:e[0]},x.findNode=function(t,e){try{return t.selectSingleNode(e)}catch(t){y.w.printStackTrace(t)}return null},x.findNodes=function(t,e){try{return t.selectNodes(e)}catch(t){y.w.printStackTrace(t)}return null},x.createElement=function(t,e){var i,o;if(v.v.browserCheck.opera)i=t.createElementNS("",e);else if(v.v.browserCheck.ieAllVersion&&!b.d.useActiveXObject){var s=e.indexOf(":");if(-1==s)o=x.parse("<"+e+"/>");else{var r=e.substring(0,s),a=v.v.getNamespaces(t);o=a[r]?x.parse("<"+e+" xmlns:"+r+'="'+a[r]+'"/>'):x.parse("<"+e+"/>")}null!=o&&(i=t.importNode(o.documentElement.cloneNode(!1),!1))}else i=t.createElement(e);return i},x.createNode=function(t,e,i){try{if(i&&v.v.browserCheck.ieAllVersion&&b.d.useActiveXObject){var o=v.v.getNamespaces(t),s="";for(var r in o)""!=r&&(s+="xmlns:"+r+'="'+o[r]+'" ');9==t.nodeType?(t.setProperty("SelectionLanguage","XPath"),t.setProperty("SelectionNamespaces",s)):1==t.nodeType&&(t.ownerDocument.setProperty("SelectionLanguage","XPath"),t.ownerDocument.setProperty("SelectionNamespaces",s))}var a=t.selectSingleNode(e);if(null==a){var n=e.lastIndexOf("/");if(n>0){var l=e.substring(0,n),h=e.substring(n+1);if(null==h.match(/[@'"()=]/i)){var d=x.createNode(t,l);null!=d&&(9==t.nodeType?a=x.createElement(t,h):1==t.nodeType&&(a=x.createElement(t.ownerDocument,h)),a=x.appendChild(d,a))}else{var u=h.split(/[[=\]]/);if((4==u.length||3==u.length)&&null!=u[1].match(/^@/)){var c=x.createNode(t,l)
;null!=c&&(9==t.nodeType?a=x.createElement(t,u[0]):1==t.nodeType&&(a=x.createElement(t.ownerDocument,u[0])),a.setAttribute(u[1].wq_trim().slice(1),u[2].wq_replaceAll("'","")),a=x.appendChild(c,a))}}}else 1==t.nodeType&&"/"!=e.charAt(0)&&(a=x.createElement(t.ownerDocument,e),a=x.appendChild(t,a))}return a}catch(t){y.w.printStackTrace(t)}return null},x.appendChild=function(t,e){var i;try{return t.ownerDocument==e.ownerDocument?i=t.appendChild(e):"function"==typeof t.ownerDocument.importNode?(i=t.ownerDocument.importNode(e,!0),i=t.appendChild(i)):i=t.appendChild(e)}catch(t){y.w.printStackTrace(t)}},x.getValue=function(t,e,i){var o="";try{var s=t.selectSingleNode(e);if(null!=s)if(void 0!==i)o=s.getAttribute(i);else if(2==s.nodeType||3==s.nodeType||4==s.nodeType)o=null!=s.value?s.value:s.nodeValue;else for(var r=s.childNodes,a=0;a<r.length;a++){var n=r[a];(3==n.nodeType||4==n.nodeType)&&(o+=n.nodeValue)}null==o&&(o="")}catch(t){y.w.printStackTrace(t)}return o},x.getAttribute=function(t,e,i){var o="";try{if("string"==typeof t&&(t=x.parse(t)),void 0===i)o=1==t.nodeType?t.getAttribute(e):t.documentElement.getAttribute(e);else{var s=null;null!=(s=1==t.nodeType?t.selectSingleNode(e):t.selectSingleNode("/*/"+e))&&(o=s.getAttribute(i)),null==o&&(o="")}null==o&&(o="")}catch(t){y.w.printStackTrace(t)}return o},x.getString=function(t,e){return x.getAttribute(t,e,"value")},x.getChildren=function(t,e){var i=[];try{var o=t.selectSingleNode(e);if(null!=o)for(var s=o.childNodes,r=0;r<s.length;r++){var a=s.item(r);if(1==a.nodeType){var n={};n["@tagName"]=a.nodeName;var l=a.attributes;if(null!=l)for(var h=0;h<l.length;h++)n[l[h].nodeName]=l[h].nodeValue;i.push(n)}}}catch(t){y.w.printStackTrace(t)}return i},x.setValue=function(t,e,i,o){try{var s=x.createNode(t,e);if(null!=s)if(void 0!==o)s.setAttribute(i,o);else{for(var r=s.childNodes,a=0;a<r.length;a++){var n=r.item(a);(3==n.nodeType||4==n.nodeType)&&s.removeChild(n)}var l=null;l=1==t.nodeType?t.ownerDocument.createTextNode(i):t.createTextNode(i),x.appendChild(s,l)}}catch(t){y.w.printStackTrace(t)}},x.setAttribute=function(t,e,i,o){try{if("string"==typeof t&&(t=x.parse(t)),void 0===o)1==t.nodeType?t.setAttribute(e,i):t.documentElement.setAttribute(e,i);else{1==t.nodeType||(e="/*/"+e);var s=x.createNode(t,e);null!=s&&s.setAttribute(i,o)}}catch(t){y.w.printStackTrace(t)}},x.setString=function(t,e,i){x.setAttribute(t,e,"value",i)},x.transform=function(){var t=(0,g.Z)(f().mark((function t(e,i,o){var s,r,a,n,l,h,d,u,c,g,m,S;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,s="false",(w.k.globalDebug1||w.k.getGlobalDebug())&&(s="true"),r=null,"string"!=typeof e){t.next=9;break}r=x._parse(e),t.next=18;break;case 9:if(!x.isDocument(e)){t.next=13;break}r=b.d.useWebSquareXMLParser?x._parse(x.serialize(e)):e,t.next=18;break;case 13:if("object"!=(0,p.Z)(e)||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type){t.next=17;break}r=b.d.useWebSquareXMLParser?x._parse(x.serialize(e.toDocument())):e.toDocument(),t.next=18;break;case 17:return t.abrupt("return","");case 18:return t.next=20,x.load(i,!0,void 0,!0);case 20:if(a=t.sent,n="",!v.v.supportActiveX){t.next=26;break}n=r.transformNode(a),t.next=49;break;case 26:if("undefined"==typeof XSLTProcessor){t.next=34;break}(l=new XSLTProcessor).importStylesheet(a),h=l.transformToDocument(r),(n=x.serialize(h)).indexOf("<transformiix:result")>-1&&(n=n.substring(n.indexOf(">")+1,n.lastIndexOf("<"))),t.next=49;break;case 34:d=null;try{d=new ActiveXObject("Msxml2.XSLTemplate")}catch(t){}if(!d){t.next=47;break}u=d,(c=new ActiveXObject("Msxml2.FreeThreadedDOMDocument")).loadXML(x.serialize(a)),u.stylesheet=c,(g=u.createProcessor()).input=r,g.transform(),n=g.output,t.next=49;break;case 47:return w.k.printLog("ERROR : transform을 지원하지 않습니다."),t.abrupt("return","");case 49:if(void 0!==o&&null!=o&&""!=o?(document.getElementById(o).innerHTML=n+"<XSLINFO value='"+i+"'/>","true"==s&&(S=/>[\s]*</g,(m={}).html=n.replace(S,">\n<"),m.xml=x.indent(r),
m.xsl=x.indent(a),m.target=o,w.k.showDebugMsg(m,"xml","Transform 실행 결과"))):"true"==s&&(S=/>[\s]*</g,(m={}).html=n.replace(S,">\n<"),m.xml=x.indent(r),m.xsl=x.indent(a),w.k.showDebugMsg(m,"xml","Transform 실행 결과")),void 0===n||"undefined"==n){t.next=54;break}return t.abrupt("return",n);case 54:return t.abrupt("return","");case 55:t.next=60;break;case 57:t.prev=57,t.t0=t.catch(1),y.w.printStackTrace(t.t0);case 60:case"end":return t.stop()}}),t,null,[[1,57]])})));return function(e,i,o){return t.apply(this,arguments)}}(),x.hasChildElement=function(t){for(var e=t.firstChild;null!=e;e=e.nextSibling)if(1==e.nodeType)return!0;return!1},x.getChildrenByTagName=function(t,e,i){var o=new Array;if(void 0===i)for(var s=t.firstChild;null!=s;s=s.nextSibling){if(1==s.nodeType)(a=2==(r=s.nodeName.split(":")).length?r[1]:r[0])==e&&o.push(s)}else for(s=t.firstChild;null!=s;s=s.nextSibling)if(1==s.nodeType){var r,a=2==(r=s.nodeName.split(":")).length?r[1]:r[0];i==s.namespaceURI&&a==e&&o.push(s)}return o},x.getFirstChildElement=function(t){for(var e=t.firstChild;null!=e;e=e.nextSibling)if(1==e.nodeType)return e;return null},x.getFirstChildElements=function(t){for(var e=new Array,i=t.firstChild;null!=i;i=i.nextSibling)1==i.nodeType&&e.push(i);return e},x.getNextSiblingElement=function(t){for(var e=t.nextSibling;null!=e;e=e.nextSibling)if(1==e.nodeType)return e;return null},x.getTextNodeValue=function(t){for(var e=null,i="",o=t.firstChild;null!=o;o=o.nextSibling)3==o.nodeType&&(i+=o.nodeValue);return""!=i&&(e=i),e},x.setTextNodeValue=function(t,e){if(t&&1==t.nodeType)if(null==t.firstChild){var i=t.ownerDocument.createTextNode(e);x.appendChild(t,i)}else 3==t.firstChild.nodeType&&(t.firstChild.nodeValue=e)},x.getCDataNodeValue=function(t){for(var e=null,i=t.firstChild;null!=i;i=i.nextSibling)4==i.nodeType&&(e=i.nodeValue);return e},x.getCData=function(t,e){try{var i="",o=t.selectSingleNode("/*/"+e);if(null!=o)for(var s=o.getAttribute("encode"),r=0;r<o.childNodes.length;r++){var a=o.childNodes[r];if(4==a.nodeType){i=a.nodeValue,"base64"==s&&(i=C.f.BASE64Decoder(i));break}}return null==i&&(i=""),i}catch(t){y.w.printStackTrace(t)}},x.setCData=function(t,e,i){try{var o=null;i.indexOf("]]>")>=0?(o="base64",i=C.f.BASE64Encoder(i)):o="text";var s=t.selectSingleNode("/*/"+e);if(null==s){var r=t.createElement(e);r.setAttribute("type","CDATA"),r.setAttribute("encode",o),r.appendChild(t.createCDATASection(i)),x.appendChild(t.documentElement,r)}else{for(var a=s.childNodes.length-1;a>=0;a--)4==s.childNodes[a].nodeType&&s.removeChild(s.childNodes[a]);s.setAttribute("type","CDATA"),s.setAttribute("encode",o),s.appendChild(t.createCDATASection(i))}}catch(t){y.w.printStackTrace(t)}},x.nodeWellFormed=function(t){try{for(var e="",i="",o=!1,s=!1,r=0,a=0;a<t.length;a++){var n=t.charAt(a);if("="==n)'"'==t.charAt(a+1)?e+=n:(e=e+n+'"',s=!0);else if('"'==n)e+=n,o=0==o;else if(" "==n){if(" "==t.charAt(a-1))continue;r++,1==o?i=i+e+n:s?(i=i+e+'"'+n,s=!1):(1!=r&&'"'!=t.charAt(a-1)&&-1==e.indexOf("=")&&(e+='=""'),i=i+e+n),e=""}else">"==n?(1==s?(e=e+'"'+n,s=!1,o=!1):('"'!=t.charAt(a-1)&&-1==e.indexOf("=")&&(e+='=""'),e+=n),r=0):e+=n}return e.length>0&&(i+=e),i}catch(t){y.w.printStackTrace(t)}}},3290:function(t,e,i){"use strict";i.r(e),i.d(e,{accordion:function(){return d},panels:function(){return u}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(9075),h=i(1),d=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(d.prototype,h.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.accordion",pluginName:"accordion",userEvents:["onclick"],tabIndex:"",useConfig:!0,cols:1,selectedPanel:"",collapsible:!1,collapseAll:!1,unCollapseAll:!1,titleDivTag:!1,panelMoveSpeed:500},d.prototype.initialize=function(t){this.panelIdCount=0,this.colArr=[],this.panelInfoArr=this.makePanelArr(t,this.options),this.panelTitleArr=this.makePanelTitleArr(t,this.options,this.panelInfoArr),this.panelContentArr=this.makePanelContentArr(t,this.options,this.panelInfoArr),
this.panelObjArr=this.makePanelObjArr(),this.panelArr=[],this.panelTitle=[],this.panelContent=[],this.options.panelMoveSpeed=parseInt(this.options.panelMoveSpeed,10),this.options.panelMoveSpeed<1?this.options.panelMoveSpeed=1:this.options.panelMoveSpeed>1e4&&(this.options.panelMoveSpeed=1e4)},d.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";t.push("<div id='"+this.id+"' "+e+" class='w2accordion "+this.options.className+"' "+i+">");for(var o=0;o<this.options.cols;o++)t.push("<div id='"+this.id+"_col_"+o+"' class=''></div>");return t.push("</div>"),t.join("")},d.prototype.setAction=function(){for(var t=0;t<this.render.childNodes.length;t++)this.colArr.push(this.render.childNodes[t]);this.initAllpanel()},d.prototype.makePanelArr=function(t,e){try{if(null==t)return[];for(var i=[],o=0,s=t.getChildNodes(),a=0;a<s.length;a++){var n=s[a];if(n.nodeType==WebSquare.Elem.type.element&&"w2:panels"==n.getTagName()){o++;var l,h=n.getAttribute("id"),d=this.options&&null!=this.options._scope_obj_org_id?this.options._scope_obj_org_id:null;null==h?(l=this.id+"_panel_"+this.panelIdCount,null!=d&&(d=d+"_panel_"+this.panelIdCount),this.panelIdCount++):(l=this.id+"_panel_"+h,null!=d&&(d=d+"_panel_"+h));var u=WebSquare.WebSquareparser.parseAttribute(n);void 0===u.title&&(u.title=""),!0===this.options.unCollapseAll?u.isOpen=!0:""!=this.options.selectedPanel&&-1!=this.options.selectedPanel||1!=o?this.options.selectedPanel==h?u.isOpen=!0:u.isOpen=!1:u.isOpen=!0;var c={id:l,org_id:d,col:0,isOpen:u.isOpen,userID:h,element:n};i.push(c)}}return i}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makePanelTitleArr=function(t,e,i){try{if(null==t)return[];for(var o=[],a=0,n=t.getChildNodes(),l=0;l<n.length;l++)if(n[l].nodeType==WebSquare.Elem.type.element&&"w2:panels"==n[l].getTagName()){var h=WebSquare.Elem.api.getElementsByTagName(n[l],"panelTitle",s.v._XML_NAMESPACE.W2);h=h[0];var d=WebSquare.WebSquareparser.parseAttribute(h);void 0===d.label&&(d.label="");var u=d.id,c={id:i[a].id+"_panelTitle_"+u,label:d.label,style:d.style,className:d.className,element:h};o.push(c),a++}return o}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.makePanelContentArr=function(t,e,i){try{if(null==t)return[];for(var o=[],a=0,n=t.getChildNodes(),l=0;l<n.length;l++)if(n[l].nodeType==WebSquare.Elem.type.element&&"w2:panels"==n[l].getTagName()){var h=WebSquare.Elem.api.getElementsByTagName(n[l],"panelContent",s.v._XML_NAMESPACE.W2);if(h){h=h[0];var d=WebSquare.WebSquareparser.parseAttribute(h),u=d.id,c={id:i[a].id+"_panelContent_"+u,org_id:null==i[a].org_id?null:i[a].org_id+"_panelContent_"+u,title:d.title,style:d.style,className:d.className,xml:h};o.push(c),a++}}return o}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.initPanel=function(t){return this.scope_obj&&(t._scope_obj_uuid=this.scope_obj.uuid,t._scope_obj_org_id=t.org_id,t._scope_obj_runtime_id=t.id),new WebSquare.uiplugin.panels(t.id,t,t.element)},d.prototype.initPanelTitle=function(t){return t.className||(t.className="w2panel_title_text"),this.options.titleDivTag?t.tagname="div":t.tagname="span",new WebSquare.uiplugin.group(t.id,t,t.element)},d.prototype.makePanelObjArr=function(){try{for(var t=[],e=0;e<this.panelInfoArr.length;e++)t.push({panel:this.initPanel(this.panelInfoArr[e]).uuid,content:this.initPanelContent(this.panelContentArr[e]).uuid});return t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.initPanelContent=function(t){var e=t.org_id||t.id,i="w2panels_content_closed";return t.className&&(i+=" "+t.className),WebSquare.controlFactory.createByJSON(e,{className:i},t.xml._element,this.scope_obj,this.parentFrame)},d.prototype.initAllpanel=function(){try{for(var t,e,i,o=0;o<this.panelInfoArr.length;o++){var s=this.panelObjArr[o];t=WebSquare.idCache[s.panel],e=this.initPanelTitle(this.panelTitleArr[o]),(i=WebSquare.idCache[s.content]).activate(),this.addControl(t),
t.appendTo(this.colArr[0]),t.activate(),t.addControl(e),t.addControl(i),e.appendTo(t.render.childNodes[0]),i.appendTo(t.render),i.addClass("w2panels_content_closed"),e.activate(),i.activate(),e.render.innerHTML=e.options.label,e.removeClass("w2group"),t.panelTitle=e,t.panelContent=i,this.panelArr.push(t),this.panelTitle.push(e),this.panelContent.push(i),this.options.collapseAll?t.options.isOpen&&this._closePanel(this.getOpenPanelInfo().id):t.options.isOpen&&(i.addClass("w2panels_content_open"),e.render.parentNode.setAttribute("aria-expanded","true"))}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getPanelById=function(t){for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];if(i.id==t)return i}},d.prototype.getPanelInfo=function(){for(var t=[],e=0;e<this.options.cols;e++){for(var i=this.render.childNodes[e],o=[],s=0;s<i.childNodes.length;s++)for(var r=i.childNodes[s],a=0;a<this.childControlList.length;a++){var n=this.childControlList[a];if(n.render==r){o.push({id:n.id,style:n.options.style,className:n.options.className});break}}t.push(o)}return t},d.prototype.getOpenPanelInfo=function(){for(var t=0;t<this.childControlList.length;t++){if(1==this.childControlList[t].options.isOpen)return this.panelInfoArr[t]}},d.prototype.getPanelInfoById=function(t){for(var e=this.getPanelInfo(),i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var r=o[s];if(r.id==this.id+"_panel_"+t)return r}},d.prototype.setPanelTitle=function(t,e){try{var i=this.getPanelById(this.id+"_panel_"+t);i?(i.options.title=e,i.render.childNodes[0].childNodes[1].innerHTML=e):l.k.printLog("error : cannot find panel with id["+t+"] at ["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.openPanel=function(t){try{var e=this.getPanelById(this.id+"_panel_"+t),i=e.panelContent,o=e.panelTitle;if(!this.options.collapsible)for(var s=0;s<this.childControlList.length;s++)this.panelArr[s].options.id!=this.id+"_panel_"+t&&1==this.childControlList[s].options.isOpen&&(this._closePanel(this.childControlList[s].options.id),this.childControlList[s].options.isOpen=!1);e.options.isOpen||(n.D.isIE(6)?(i.render.style.display="block",i.addClass("w2panels_content_open"),e.addClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!0,o.render.parentNode.setAttribute("aria-expanded","true")):$("#"+i.render.id).slideDown(this.options.panelMoveSpeed,(function(){i.addClass("w2panels_content_open"),e.addClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!0,o.render.parentNode.setAttribute("aria-expanded","true")})))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._openPanel=function(t){try{for(var e=this.getPanelById(t),i=e.panelContent,o=e.panelTitle,s=0;s<this.childControlList.length;s++)this.panelArr[s].options.id!=this.id+"_panel_"+t&&1==this.childControlList[s].options.isOpen&&(this._closePanel(this.childControlList[s].options.id),this.childControlList[s].options.isOpen=!1);e.options.isOpen||(n.D.isIE(6)?(i.render.style.display="block",i.addClass("w2panels_content_open"),e.addClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!0,o.render.parentNode.setAttribute("aria-expanded","true")):$("#"+i.render.id).slideDown(this.options.panelMoveSpeed,(function(){i.addClass("w2panels_content_open"),e.addClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!0,o.render.parentNode.setAttribute("aria-expanded","true")})))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.closePanel=function(t){try{var e=this.getPanelById(this.id+"_panel_"+t),i=e?e.panelContent:this.getPanelById(t).panelContent,o=e?e.panelTitle:this.getPanelById(t).panelTitle;e.options.isOpen&&(n.D.isIE(6)?(i.render.style.display="none",i.removeClass("w2panels_content_open"),e.removeClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!1,o.render.parentNode.setAttribute("aria-expanded","false")):$("#"+i.render.id).slideUp(this.options.panelMoveSpeed,(function(){i.removeClass("w2panels_content_open"),
e.removeClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!1,o.render.parentNode.setAttribute("aria-expanded","false")})))}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype._closePanel=function(t){try{var e=this.getPanelById(t);if(e){var i=e.panelContent,o=e.panelTitle;e.options.isOpen&&(n.D.isIE(6)?(i.render.style.display="none",i.removeClass("w2panels_content_open"),e.removeClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!1,o.render.parentNode.setAttribute("aria-expanded","false")):$("#"+i.render.id).slideUp(this.options.panelMoveSpeed,(function(){i.removeClass("w2panels_content_open"),e.removeClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!1,o.render.parentNode.setAttribute("aria-expanded","false")})))}else l.k.printLog("error : cannot find panel with id["+t+"] at ["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setColor=function(t){try{$(".w2panels_title").css("background",t.panelColor),$(".w2accordion").css("border-color",t.borderColor)}catch(t){r.w.printStackTrace(t,null,this)}};var u=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(u.prototype,h.s.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.panels",pluginName:"panels",title:"",src:"",scope:!1,isOpen:!1,userEvents:["onpanelsopen","onpanelsclose","onpanelsmouseover","onpanelsmouseout"]},u.prototype.initialize=function(t){},u.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2panels"+this.options.className+"'>"),t.push("<div id='"+this.id+"_title' class='w2panels_title' role='button'>"),t.push("<div id='"+this.id+"_title_image' class='w2panels_title_image'></div>"),t.push("</div>"),t.push("</div>"),t.join("")},u.prototype.setAction=function(){this.dom.title=this.getElementById(this.id+"_title"),this.dom.Img=this.getElementById(this.id+"_title_image"),this.event.addListener(this.dom.title,"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),this.event.addListener(this.dom.title,"onmouseover",this.event.bindAsEventListener(this,this.handleTitleOver)),this.event.addListener(this.dom.title,"onmouseout",this.event.bindAsEventListener(this,this.handleTitleOut)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.isOpen&&this.addClass(this.dom.Img,"w2panels_title_image_open")},u.prototype.handleTitleClick=function(t){try{if(!this.parentControl.options.collapsible)for(var e=0;e<this.parentControl.childControlList.length;e++)this.parentControl.panelArr[e].options.id!=this.id&&1==this.parentControl.childControlList[e].options.isOpen&&(this.parentControl._closePanel(this.parentControl.childControlList[e].options.id),this.parentControl.childControlList[e].options.isOpen=!1,a.B.fireEvent(this,"onpanelsclose",t));this.options.isOpen?this.parentControl.options.collapsible&&(this.parentControl._closePanel(this.id),this.options.isOpen=!1,a.B.fireEvent(this,"onpanelsclose",t)):(this.parentControl._openPanel(this.id),this.options.isOpen=!0,a.B.fireEvent(this,"onpanelsopen",t)),a.B.fireEvent(this.parentControl,"onclick",this,this.options.isOpen)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleTitleOver=function(t){try{this.addClass(this.getElementById(this.id+"_title"),"w2panels_title_over"),a.B.fireEvent(this,"onpanelsmouseover",t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleTitleOut=function(t){try{this.removeClass(this.getElementById(this.id+"_title"),"w2panels_title_over"),a.B.fireEvent(this,"onpanelsmouseout",t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{if(13==(t.charCode?t.charCode:t.keyCode))return void this.handleTitleClick(t)}catch(t){r.w.printStackTrace(t,null,this)}}},7900:function(t,e,i){"use strict";i.r(e),i.d(e,{anchor:function(){return l}});var o=i(1974),s=i(5948),r=i(1454),a=i(8683),n=i(1),l=function(t,e,i){n.s.call(this,t,e,i)}
;o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.anchor",pluginName:"anchor",userEvents:["onclick","ontooltipshow","ontooltiphide"],outerDiv:!0,clickEventElement:"anchor",label:"",href:"",name:"",target:"",title:"",tabIndex:"",useLocale:!1,localeRef:"",disabled:!1,escape:!0,enableReadOnly:!1},l.prototype.htmlStr1=["<div id='",,"' ",," class='w2anchor ",,"'><a href='",,"' ",,">",,"</a></div>"],l.prototype.htmlStr2=["<a id='",,"' ",," class='w2anchor2 ",,"' href='",,"' ",,">",,"</a>"],l.prototype.initialize=function(t){try{if(t){var e=WebSquare.WebSquareparser.parseLabel(t);e&&(this.options.label=e.value)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{var t=this.options.outerDiv?this.htmlStr1:this.htmlStr2;t[1]=this.id,t[3]=this.options.style?'style="'+this.options.style+'"':"",t[5]=this.options.className,t[7]=this.options.href?this.options.href:"javascript:void(null);",t[9]=(this.options.name?' name="'+this.options.name+'"':"")+(this.options.target?' target="'+this.options.target+'"':"")+(this.options.title?' title="'+this.options.title+'"':"")+(""==this.options.tabIndex?"":' tabIndex="'+this.options.tabIndex+'"')+(this.options.role?' role="'+this.options.role+'"':"");var e=this.options.label;if(this.options.useLocale&&this.options.localeRef){var i=this.getLocaleValue(this.options.localeRef);i&&(e=i)}return e=this.options.escape?WebSquare.xml._encode(e):e,t[11]=e,t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.dom.anchor="A"==this.render.tagName?this.render:this.render.firstChild,this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}this.options.outerDiv&&"outerDiv"===this.options.clickEventElement?this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)):this.event.addListener(this.dom.anchor,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.dom.anchor,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setVerticalAlign=function(){try{var t="top",e=this.options.style.toLowerCase();if(e.match(/vertical-align[\s]*:[\s]*middle/)?t="middle":e.match(/vertical-align[\s]*:[\s]*bottom/)&&(t="bottom"),"top"==t);else{var i=this.getStyleValue("height");if(i.indexOf("px")>-1){i=parseInt(i);var o=parseInt(this.getStyleValue("padding-top"))||0,r=parseInt(this.getStyleValue("font-size"))||0,a=0;"middle"==t?a=Math.floor((i-r)/2):"bottom"==t&&(a=Math.floor(i-r)),a+o>0&&i-a>0&&(this.setStyle("paddingTop",a+o+"px"),this.setStyle("height",i-a+"px"))}}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{this.setValueNM(t),this.modelControl.setData(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValueNM=function(t){try{if(a.D.isNull(t))return;t=t.toString(),this.options.label=t,this.options.escape&&(t=WebSquare.xml._encode(t)),this.dom.anchor&&(this.dom.anchor.innerHTML=t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getValue=function(){try{return this.options.label}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleClickEvent=function(t){try{var e=r.B.getTarget(t);if(e&&this.options.outerDiv&&e===this.render)return void this.dom.anchor.click();""==this.options.href.wq_trim()&&r.B.stopEvent(t),r.B.fireEvent(this,"onclick")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(r.B.preventDefault(t),
e=a.D.getPreTabbableComp(this.id))return void e.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(r.B.preventDefault(t),e=a.D.getNextTabbableComp(this.id))return void e.focus()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=a.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){s.w.printStackTrace(t)}},l.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=a.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){s.w.printStackTrace(t)}},l.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){s.w.printStackTrace(t)}},l.prototype.setNextTabID=function(t,e){try{null!=t&&a.D.setNextTabID(this.id,t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.setHref=function(t){try{this.options.href=t,this.dom.anchor.href=t}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getHref=function(){try{return this.dom.anchor.href}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setDisabled=function(t){try{if("boolean"!=typeof t)return!1;this.options.outerDiv&&(this.dom.anchor.disabled=t),n.s.prototype.setDisabled.call(this,t),t?this.addClass(this.render,"w2anchor_disabled"):this.removeClass(this.render,"w2anchor_disabled")}catch(t){s.w.printStackTrace(t)}return t},l.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){s.w.printStackTrace(t)}},l.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.ref=this.options.ref,t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t):null}catch(t){s.w.printStackTrace(t)}},l.prototype.focus=function(){try{this.dom.anchor.focus()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){s.w.printStackTrace(t)}}},4972:function(t,e,i){"use strict";i.r(e),i.d(e,{autoComplete:function(){return u}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=i(5373),d=i(2117),u=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(u.prototype,l.s.prototype),o.x.extend(u.prototype,h.E.prototype),o.x.extend(u.prototype,d.z.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.autoComplete",pluginName:"autoComplete",userEvents:["onchange","oneditend","onviewchange","oneditkeyup","oneditenter","onselected"],useConfig:!0,serializable:!0,useOtherComponentId:"",value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,displayMode:"0",delimiter:"\t",defaultStyle:"",activeStyle:"",textAlign:"",defaultClass:"w2inputSelectDefault",activeClass:"w2inputSelectActive",useLocale:!1,submenuSize:"fixed",direction:"auto",dynamicDraw:!0,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,editable:!0,search:"start",editmode:!1,dataurl:"",interactionMode:!1,interactionKey:"default",interactionEnterKey:!1,submission:"",submissionFunc:"",keyInputRef:"",readOnly:!1,mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,interactionMinByteLength:0,title:"",noResult:"previous",noResultFirstItem:!1,ignoreBlankOnNoResult:!1,escape:!0,displayFormatter:"",useMousewheel:!0,editModeEvent:"onclick",showItemTableByFocus:!1,allowEmptySubmission:"false",searchTarget:"label",caseSensitive:!0,editType:"select",useKeywordHighlight:!1,returnValueType:"null",emptyItem:!1,emptyValue:"",emptyIndex:0,closeonmouseleave:!1,handleOtherClick:!0,animation:"",selectedData:!0,
preventWheelEvent:!1,customLabelFormatter:"",disableEdit:!1,type:"text",wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",autocomplete:"off",placeholder:"",autoFocus:!1,noUseAutoFind:!1,findItemFirstKey:!1,nextTabByEnter:!1,customToggleKey:"",preventKeyList:"",setNodeSetNoOnchange:!1,hideListOnFocus:!1},u.prototype.initialize=function(t){try{if(this.itemTable=null,this.gridOptions={},this.gridViewOptions={},this.searchFlag=!1,this.isOpen=!1,this.statusSubLayer=!1,this._itemTableRedraw=!0,this.supportAutocomplete=!1,this.options.emptyItem?(this.options.noResult="clear",this.noResult="clear"):this.noResult="previous"===this.options.noResult||"clear"===this.options.noResult||"noEnd"===this.options.noResult||"useData"===this.options.noResult||"first"===this.options.noResult?this.options.noResult:"previous",this.editable=this.options.editable,this.search=this.options.search,this.orgSearchArr=[],this.selectedItem={text:"",value:"",orgLabel:""},this.selectedGridRowObj={},this.selectedGridViewRowObj={},this.myhelper=new WebSquare.korHelper,this.viewArr=[],this.itemArr=[],this.dummyItemArr=[],this.dummyGridItemArr=[],this.mytime=null,this.hideTime=null,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.editmode=this.options.editmode,this.findkeymode=!1,this.mozTrickBuffer="",this.trickBuffer="",this.findStop=!1,this.skipMatch=!1,this.defaultAllOptionLabel=WebSquare.language.getMessage("AutoComplete_all"),t&&"$blank"==t.getAttribute("chooseOptionLabel")?this.defaultChooseOptionLabel="":this.defaultChooseOptionLabel=WebSquare.language.getMessage("AutoComplete_choose"),this._initDisplayMode(),this.dataurl=this.options.dataurl,this.selectedIndex=-1,this.selectedAllIndex=-1,this.cursorIndex=-1,this.showRowIndex=0,this.displayCount=0,!this.options.interactionMode||this.options.submission||this.options.submissionFunc||(this.options.interactionMode=!1),this._showItemTableByFocus=!1,"onfocus"===this.options.editModeEvent&&this.options.showItemTableByFocus&&(this._showItemTableByFocus=!0),this.interactionMode=this.options.interactionMode,t){var e=WebSquare.Elem.api.getElementsByTagName(t,"choices",s.v._XML_NAMESPACE.W2)[0];if(e){var i=WebSquare.Elem.api.getElementsByTagName(e,"gridItemset",s.v._XML_NAMESPACE.W2)[0];null==i&&(i=WebSquare.Elem.api.getElementsByTagName(e,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0]),i&&"w2:gridItemset"==i.getTagName()?this.itemTableMode="grid":i&&"w2:gridViewItemset"==i.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView");if("grid"==this.itemTableMode?this.initializeGridItemArr(t):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(t):this.initializeItemArr(t),this.autoFinder="w2:autoFinder"==t.getTagName(),this.autoFinder){if(this.display_path=this.options.display_path,void 0!==this.display_path){this.display_path=this.display_path.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var o=this.display_path.split(" "),a=o[0],l=o[1],h=o[2];this.setItemSet(a,l,h),this.buildItemArr()}}else"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&(this.itemsetObj=WebSquare.WebSquareparser.parseItemset(t))}if(this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.displayFormatter=null,this.onchangeFlag=!1,this.otherClicked=!1,this.options.autocomplete&&WebSquare.uiplugin.autoComplete.autocomplete&&(this.supportAutocomplete=!0),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.options.customSearchStrArrFunction&&(this.customSearchStrArrFunction=n.D.getGlobalFunction(this.options.customSearchStrArrFunction,this.scope_id)),this.beforeEditValue="",this._preventKeyObj={},
this.options.preventKeyList)if("all"===this.options.preventKeyList)this._preventKeyObj.all=!0;else for(var d=this.options.preventKeyList.split(","),u=0;u<d.length;u++){var c=d[u].wq_trim();c&&(this._preventKeyObj[c]=!0)}}catch(t){r.w.printStackTrace(t,null,this)}},u.autocomplete="string"==typeof document.createElement("input").autocomplete,u.prototype.toHTML=function(){try{var t=[],e=""==this.options.title?"":"title='"+this.options.title+"'",i=""==this.options.style?"":"style='"+this.options.style+"'",o="";o=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'";var s=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'",a=""==this.options.textAlign?s:"style='text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'",n="text"==this.options.type?"type = 'text' ":"type = '"+this.options.type+"' ",l=""==this.supportAutocomplete||""==this.options.autocomplete?"":" autocomplete='"+this.options.autocomplete+"'",h=this.options.placeholder?"w2autoComplete_label w2autoComplete_placeholder":"w2autoComplete_label",d=this.options.placeholder?"data-placeholder='"+this.options.placeholder+"' ":"";return t.push("<div id='"+this.id+"' "+i+" class='w2autoComplete "+this.options.className+"' "+o+" "+e+" role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='inline' >"),t.push("<table class='w2autoComplete_table_main'>"),t.push("<tbody id='"+this.id+"_main_tbody'>"),t.push("<tr class='w2autoComplete_row w2autoComplete_row_main'>"),t.push("<td class='w2autoComplete_col_label' "+s+">"),t.push("<div class='w2autoComplete_label'>"),t.push("<span id='"+this.id+"_label' class='"+h+"' "+d+a+"></span>"),t.push("<input id='"+this.id+"_input' class='w2autoComplete_input' style='border-width:0px; width:100%; padding:0px; display:none;' "+n+e+l+" />"),t.push("</div></td>"),t.push("<td class='w2autoComplete_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>"),t.push("</tr></tbody>"),t.push("</table>"),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setPreAction=function(){try{this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),this.dom.input=this.getElementById(this.id+"_input"),""!=this.options.tabIndex&&(this.dom.input.tabIndex=this.options.tabIndex),n.D.isMobile()?"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{ontouchstart:this.handleClickEventDocument}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,event:{ontouchstart:this.handleClickEventDocument}}):this.options.useOtherComponentId?s.v.setTimer((function(){this.otherComponent=n.D.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,event:{onmousedown:this.handleClickEventDocument}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(t){a.B.stopPropagation(t)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{onmousedown:this.handleClickEventDocument}
})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{onmousedown:this.handleClickEventDocument}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,event:{onmousedown:this.handleClickEventDocument}})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleblurEventInput)),n.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.dom.input,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.handleInputKeyupEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.options.validateOnInput&&this.event.addListener(this.dom.input,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.bind("onviewchange",(function(t){this.onchangeFlag=!0})),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw()),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}-1!=this.selectedIndex||0!=this.options.emptyIndex&&this.options.emptyIndex?this.options.emptyIndex&&"number"==typeof this.options.emptyIndex&&(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(0),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),this.options.readOnly&&this.onPropertyChange("readOnly",n.D.getBoolean(this.options.readOnly)),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshItemset=function(t){try{if(this.modelControl.isItemsetBinded())if(this._itemTableRedraw=!0,this.refreshItemArr(),this.componentRedraw(t),this.itemArr.length<=0&&-1!=this.selectedIndex&&this.initAutoComplete(),"grid"==this.itemTableMode?(this.refreshGridItemArr(),this.setSubLayer(),this.setGridData()):"gridView"==this.itemTableMode&&(this.refreshGridViewItemArr(),this.setSubLayer(),this.setGridViewData()),this.modelControl.isBinded())this.refresh();else if(-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult)this.setSelectedIndexNM(-1,!0);else{var e=this.options.placeholder?-1:0;this.setSelectedIndexNM(e)}
this.isOpen&&this.setItemTable(),this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refresh=function(){try{if(this.modelControl.isBinded()&&this.getItemCount()>0){var t=this.getValue(),e=this.modelControl.getData(),i=this.setValueNM(e);if(1==i)t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()}),null!=this.getValue()&&e!=this.getValue()&&this.modelControl.setData(this.getValue()),this.broadcast({linkedDataList:["refresh",["replace"]]});else if(isNaN(i))null!=this.getValue()&&e!=this.getValue()&&this.modelControl.setData(this.getValue());else if("clear"===this.noResult||this.options.emptyItem)this.setSelectedIndex(-1,!0,!1);else if("previous"===this.noResult){var o=this.options.placeholder?-1:0;this.setSelectedIndex(o,!1,!1)}else{if("noEnd"===this.noResult)return;if("useData"===this.noResult)return;if("first"===this.noResult)return void(this.options.noResultFirstItem&&this.setSelectedIndex(0))}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.componentRedraw=function(t){try{if(this.showRowIndex=0,this.setSelectOptions(),this.itemArr.length>0){var e=0;(this.options.placeholder||"useData"===this.noResult&&"gridView"===this.itemTableMode&&!1===this.options.selectedData)&&(e=-1),t&&"replace"!==t&&this.getSelectedIndex()>-1&&(e=this.getSelectedIndex()),this.itemArr&&this.itemArr[e]?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[e].label):this.itemArr[e].label:this.dom.label.innerHTML="";var i="replace"===t&&!0===this.options.setNodeSetNoOnchange;this.modelControl.isBinded()?this.setSelectedIndex(e,!1,!1,i):this.setSelectedIndex(e,void 0,void 0,i)}else this.dom.label.innerHTML="";this.showEditMode(!1),this.setValueNM("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSubLayer=function(){try{if(null==this.itemTable){var t=this;"grid"==this.itemTableMode?(this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(e,i){t.findStop=!0,(t.editmode||t.findkeymode)&&(t.mozTrickBuffer=""),t.focus(),"dataList"===t.gridOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(t.viewArr[e].index)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(t.viewArr[o].index)}else 27==i&&(t._closeSubLayer(),t.showEditMode(!1),t.focus())}))),0===this.itemArr.length&&this.itemTable.hide()):"gridView"==this.itemTableMode?("auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(e,i){t.findStop=!0,(t.editmode||t.findkeymode)&&(t.mozTrickBuffer=""),t.focus();var o=t.viewArr[e].orgLabel+"|"+t.viewArr[e].value,s=t.findinItemArr(o,WebSquare.allValue||"all");t.setSelectedIndex1(s)})),
this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(t.viewArr[o].index)}else 27==i&&(t._closeSubLayer(),t.showEditMode(!1),t.focus())}))),0===this.itemArr.length&&this.itemTable.hide()):(this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2input_table "+this.options.className,w2table:"w2input_table_sb",w2table_main:"w2input_table_sb_main",w2table_row:"w2input_table_sb_row",w2table_col:"w2input_table_sb_col",w2table_col_over:"w2input_table_sb_col_over",escape:this.options.escape,wheelRows:this.options.wheelRows,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.addClickEventListener((function(e,i){a.B.fireEvent(t,"onitemclick",i),t.findStop=!0;var o=t.selectedIndex,s=t.getValue();if(t.editmode||t.findkeymode){t.mozTrickBuffer="";var r=t.viewArr[i].label;t.options.useKeywordHighlight&&(r=r.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),t.dom.input.value=r,t.selectedItem={text:r,value:t.viewArr[i].value,orgLabel:t.viewArr[i].orgLabel};var n=t.selectedItem.orgLabel+"|"+t.selectedItem.value,l=t.findinItemArr(n,WebSquare.allValue||"all");t.setSelectedIndex1(l,!0),t.focus(),t.closeTable()}else{r=t.viewArr[i].label;t.options.useKeywordHighlight&&(r=r.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),t.dom.input.value=r,t.selectedItem={text:r,value:t.viewArr[i].value,orgLabel:t.viewArr[i].orgLabel},t.setSelectedIndex1(i),t.focus(),t.closeTable()}var h={oldValue:s,newValue:t.getValue(),oldSelectedIndex:o,newSelectedIndex:t.selectedIndex};a.B.fireEvent(t,"onselected",h)})),this.itemTable.addKeyDownEventListener((function(e){if(n.D.isIEAllVersion()){if(e.srcElement.parentElement!=this.render)return}else if(a.B.getTarget(e)!==this.render)return;var i=e.charCode?e.charCode:e.keyCode;if(27==i)return t._closeSubLayer(),t.showEditMode(!1),void t.focus();if(t.options.customToggleKey==i)return t._closeSubLayer(),void t.focus();if(!t.options.findItemFirstKey)if(1==t.interactionMode||t.editmode||t.findkeymode){for(var o=0,s=t.selectedItem.orgLabel+"|"+t.selectedItem.value,r=0;r<t.viewArr.length;r++)if(s==t.viewArr[r].orgLabel+"|"+t.viewArr[r].value){o=r;break}if(13==i){if(0==t.viewArr.lenght)return}else if(38==i||9==i&&e.shiftKey){if(0==o)return;o-=1}else if(40==i||9==i){if(o+1==t.viewArr.length)return;o+=1}else 35==i?o=t.viewArr.length-1:36==i?o=0:33==i?(o-=t.viewArr.length)<0&&(o=0):34==i&&(o+=t.viewArr.length)>=t.viewArr.length&&(o=t.viewArr.length-1);if(t.viewArr.length>o){var l=t.viewArr[o].label;t.options.useKeywordHighlight&&(l=l.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),t.dom.input.value=l,t.selectedItem={text:l,value:t.viewArr[o].value,orgLabel:t.viewArr[o].orgLabel},t.itemTable.setSelectedIndex(o)}}else{var h=-1;h=t.getSelectedIndex(),38==i||9==i&&e.shiftKey?h>0&&(h-=1):40==i||9==i?h+1<t.getItemCount()&&(h+=1):35==i?h=t.getItemCount()-1:36==i?h=0:33==i?(h-=t.itemTable.rowCount)<0&&(h=0):34==i&&(h+=t.itemTable.rowCount)>=t.itemTable.getItemCount()&&(h=t.itemTable.getItemCount()-1),t.setSelectedIndex1(h,!0),t.itemTable.setSelectedIndex(h)}})),1==this.options.closeonmouseleave&&this.itemTable.addMouseLeaveEventListener((function(e){var i=t.render.offsetHeight,o=t.getAbsolutePosition("top");e.clientY>=o&&e.clientY<=o+i||t.closeSubLayer()})),this.editmode&&this.viewArr.length>0?(this.setItemTable(),
this.itemTable.setSelectedIndex(0)):null!=this.itemArr&&this.itemArr.length>0?this.setItemTable():(this.itemTable.hide(),null!=this.itemTable.mainTable&&this.itemTable.render.firstChild?this.setItemTable():$l("this.itemTable.mainTable이 null입니다.["+this.id+"]"))),this.isOpen=!0,this.closeSubLayer()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectOptions=function(){try{null!=this.itemTable&&(this.editmode?0==this.viewArr.length||"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&(this.itemTable.setItemArr(this.viewArr),this.itemTable.setSelectedIndex(0)):"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&null!=this.itemArr&&0!=this.itemArr.length?this.itemTable.setItemArr(this.itemArr):this.itemTable.hide())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setItemTable=function(){try{(this.itemTable.render.getElementsByTagName("tr").length!==this.itemArr.length||this.viewArr.length!==this.itemArr.length||this._itemTableRedraw)&&(this._itemTableRedraw=!1,this.itemTable.setItemArr(this.viewArr));var t=this.render.offsetWidth,e=document.documentElement.clientWidth||document.body.clientWidth||0,i=WebSquare.style.getAbsoluteLeft(this.render),o=0,a=this.itemTable.render.getElementsByTagName("td");if(a&&a.length>0){var n=a[0].offsetHeight,l=Math.min(a.length,this.options.visibleRowNum);s.v.browserCheck.moz&&n<34&&1==l&&(n=34),this.itemTable.setStyle("height",l*n+"px")}"fixed"==this.options.submenuSize||parseInt(t)>=parseInt(this.itemTable.render.offsetWidth)?(this.itemTable.setStyle("width",t-2+"px"),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=t+"px":this.itemTable.render.firstChild.style.width=t-17+"px"):this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1?this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+17+"px"):this.itemTable.render.firstChild.offsetWidth>t?this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+"px"):(this.itemTable.render.firstChild.style.width=t+"px",this.itemTable.setStyle("width",t-2+"px"));var h=this.options.direction;if("auto"==h){var d=document.body.scrollTop;d<document.documentElement.scrollTop&&(d=document.documentElement.scrollTop);var u=WebSquare.style.getAbsoluteTop(this.render)-d,c=document.documentElement.clientHeight-(u+this.render.offsetHeight),p=this.itemTable.render.offsetHeight,g=Math.max(c,u);if(g<p&&a&&a.length>0){for(var m=0,f=0;f<a.length&&!(m+a[f].offsetHeight+2>g);f++)m+=a[f].offsetHeight;this.itemTable.rowCount=f,this.itemTable.setStyle("height",m+"px"),g!==c&&(h="up")}else c<p&&u>p&&(h="up")}if(o="up"==h?WebSquare.style.getAbsoluteTop(this.render)-this.itemTable.render.offsetHeight:WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,e<i+this.itemTable.render.offsetWidth)if((i=i+this.render.offsetWidth-this.itemTable.render.offsetWidth)<0){i=WebSquare.style.getAbsoluteLeft(this.render);var b=document.body.offsetWidth-17-i;this.itemTable.setStyle("width",b+"px"),"auto"!=this.itemTable.getStyle("overflow-x")&&(n+=20),this.itemTable.setStyle("height",n+"px"),this.itemTable.setStyle("overflow-x","auto")}else this.itemTable.setStyle("overflow-x","hidden");else{b=this.itemTable.render.firstChild.offsetWidth;var y=this.itemTable.render.clientWidth;if(i+b<e&&"auto"==this.itemTable.getStyle("overflow-x")){var v=b>y?b:y;n-=20,this.itemTable.setStyle("height",n+"px"),this.itemTable.setStyle("width",v+"px"),this.itemTable.setStyle("overflow-x","hidden")}}this.itemTableDirection=h,this.itemTable.setPosition(i,o),WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.buildItemArr=function(){try{this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.itemArr=[],this.itemsetObj.nodeset.match("data:")?(this.itemArr=this.modelControl.getDataCollectionItemsetData(this.id),
this.allItemArr=this.modelControl.getDataCollectionItemsetData(this.id,{allData:!0})):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption){var t=[],e=null;"label"==this.options.sortOption?e=function(){return this.label}:"value"==this.options.sortOption&&(e=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var o=this.itemArr[i];o.toString=e,t.push(o)}t.sort(),"descending"==this.options.sortMethod&&t.reverse(),this.itemArr=t}for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);if(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption){var s=this._getChooseOptionLabel();this.itemArr=[{label:s,value:this.options.chooseOptionValue,orgLabel:s,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getViewItemText=function(t){try{var e="";if(t>-1&&t<this.viewArr.length)switch(e=this.viewArr[t].label,this.options.displayMode){case"0":break;case"1":e=this.viewArr[t].value+this.options.delimiter+e;break;case"2":e=e+this.options.delimiter+this.viewArr[t].value;break;case"3":e=this.viewArr[t].value}return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.parseLabel=function(t){try{if(this.itemsetObj.label.indexOf("@")>-1){var e=this.itemsetObj.label.split("@");if(this.itemsetObj.label.indexOf("/")>-1){var i=e[0].split("/"),o=i[i.length-2],s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,o);return WebSquare.WebSquareparser.getAttribute(s[0],e[1])}return WebSquare.WebSquareparser.getAttribute(this.itemArr[t].xml,e[1])}return(s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,this.itemsetObj.label))[0].firstChild.nodeValue}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.parseValue=function(t){try{if(this.itemsetObj.label.indexOf("@")>-1){var e=this.itemsetObj.value.split("@");if(this.itemsetObj.label.indexOf("/")>-1){var i=e[0].split("/"),o=i[i.length-2],s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,o);return WebSquare.WebSquareparser.getAttribute(s[0],e[1])}return WebSquare.WebSquareparser.getAttribute(this.itemArr[t].xml,e[1])}return(s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,this.itemsetObj.label))[0].firstChild.nodeValue}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setItemSet=function(t,e,i){try{void 0===this.itemsetObj&&(this.itemsetObj={});var o=!1;if(e==this.itemsetObj.label&&i==this.itemsetObj.value||(o=!0),this.itemsetObj.nodeset=t,o&&(this.itemsetObj.label=e,this.itemsetObj.value=i),"grid"==this.itemTableMode){if(this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),o)for(var a=0;a<this.itemsetObj.items.length;a++)this.itemsetObj.items[a].id==this.itemsetObj.labelId&&(this.itemsetObj.items[a].ref=e),this.itemsetObj.items[a].id==this.itemsetObj.valueId&&(this.itemsetObj.items[a].ref=i);this.refreshGridItemArr()}else"gridView"==this.itemTableMode?(this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.refreshGridViewItemArr()):this.buildItemArr();for(a=0;a<this.itemArr.length;a++)this.itemArr[a].orgLabel=this.itemArr[a].label,this.itemArr[a].label=this.getItemText(a);if(this.options.interactionMode){if(s.v.clearTimer(this.id+"_showEditMode",!0),this.interactionMode&&(this.selectedIndex=-1,this.selectedItem={
text:"",value:"",orgLabel:""},"useData"===this.options.noResult&&this.dummyItemArr.length))for(a=0;a<this.dummyItemArr.length;a++)this.itemArr=[{label:this.dummyItemArr[a].label,value:this.dummyItemArr[a].value,orgLabel:this.dummyItemArr[a].orgLabel}].concat(this.itemArr);if(1==this.options.allOption&&this.itemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr),"grid"==this.itemTableMode&&this.gridOptions.dataComp)){for(var n=-1,l={},h=0;h<this.itemsetObj.items.length;h++)-1==n&&this.itemsetObj.items[h].ref==this.itemsetObj.label&&(n=h),l[this.itemsetObj.items[h].id]="";l[this.itemsetObj.items[-1==n?0:n].id]=this.defaultAllOptionLabel,this.gridRowItemArr.unshift(l)}if(1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr),this.selectedIndex=0,this.selectedItem={text:this.itemArr[this.selectedIndex].label,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}}this.viewArr=[];for(a=0;a<this.itemArr.length;a++){var d=this.itemArr[a].label;if(this.options.useKeywordHighlight){var u=d.indexOf(this.mozTrickBuffer);u>=0&&(d=d.substring(0,u)+"<span class='w2autoComplete_keyword'>"+this.mozTrickBuffer+"</span>"+d.substring(u+this.mozTrickBuffer.length,d.length))}this.viewArr.push({label:d,orgLabel:this.itemArr[a].orgLabel,value:this.itemArr[a].value,index:a,_hidden:this.itemArr[a]._hidden,_disabled:this.itemArr[a]._disabled})}}else{if(1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr),this.selectedIndex=0,this.selectedItem={text:this.itemArr[this.selectedIndex].label,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}}this.viewArr=[];for(a=0;a<this.itemArr.length;a++)this.viewArr.push({label:this.itemArr[a].label,value:this.itemArr[a].value,orgLabel:this.itemArr[a].orgLabel,index:a,_hidden:this.itemArr[a]._hidden,_disabled:this.itemArr[a]._disabled})}if(this.gridOptions.sortIndex&&this.gridItemArr.length>0){if(this.setSubLayer(),this.itemTable.grid.setData(this.gridItemArr.slice(0)),this.options.allOption){var c=[];for(n=-1,h=0;h<this.itemsetObj.items.length;h++)-1==n&&this.itemsetObj.items[h].ref==this.itemsetObj.label&&(n=h),c.push("");c[-1==n?0:n]=this.defaultAllOptionLabel,this.itemTable.grid.setRowData(0,c,!1)}var p=[];if(this.options.allOption){var g=this.gridOptions.sortIndex.split(" ")[0],m=this.itemTable.grid.getCellInfo(g).options.dataType,f=parseInt(this.gridOptions.sortOrder.split(" ")[0],10);p[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==m?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*f:t<e?-1*f:0)}}this.itemTable.grid.multisort({sortIndex:this.gridOptions.sortIndex,sortOrder:this.gridOptions.sortOrder,sortFuncArr:p})}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.updateTable=function(){},u.prototype.openTable=function(){try{this.showTable()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toggle=function(){try{a.B.fireEvent(this,"ontoggleclick",this.isOpen),this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.openSubLayer=function(t){try{WebSquare.getBody().getLayerListener().show(this.id,t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._openSubLayer=function(t){try{t||(t={});var e=void 0===t.select||t.select;if(this.setSubLayer(),!this.isOpen){if(0==this.itemArr.length)return;if(this.itemTable.show(),this.addClass("w2autoComplete_open"),this.itemTable.render.setAttribute("aria-expanded","true"),this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),
n.D.isMobile()||this.options.editable&&!this.options.disableEdit&&(this.editmode||!this.options.findItemFirstKey)||this.itemTable.focus(),-1!=this.selectedIndex&&e&&this.itemTable.setSelectedIndex(this.selectedIndex),""!=this.options.animation){var i="down",o=WebSquare.style.getAbsoluteTop(this.render),s=document.body.scrollTop;s<document.documentElement.scrollTop&&(s=document.documentElement.scrollTop);var a=o-s,l=document.documentElement.clientHeight-(a+this.render.offsetHeight),h=this.itemTable.render.offsetHeight;l<h&&a>h&&(i="up"),"show"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().fadeIn("slow"):"slidedown"==this.options.animation.toLowerCase()&&"down"==i&&$("#"+this.itemTable.id).hide().slideDown("fast")}this.editmode&&void 0!==this.dom.input&&null!=this.dom.input&&this.setfFocus(),this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._openOtherLayer=function(t){try{if(this.isOpen)this.setGridData();else{if(0==this.itemArr.length)return;var e=this.otherComponent;"grid"==this.itemTableMode?(this.setSubLayer(),this.setGridData(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),(e=this.itemTable).grid.removeFocusedCell(),e.show(),e.grid.handleResize()):"gridView"==this.itemTableMode?(this.setSubLayer(),this.setGridViewData(),null!=(e=this.itemTable).gridView&&null!=e.gridView._dataList&&e.gridView.removeFocusedCell(),e.show(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.offsetHeight+"px"),e.gridView.handleResize()):e.show(),this.addClass("w2autoComplete_open");var i=WebSquare.style.getAbsoluteLeft(this.render),o=WebSquare.style.getAbsoluteTop(this.render),s=this.options.direction;if("auto"==s||"fit"==s){var a=document.body.scrollTop;a<document.documentElement.scrollTop&&(a=document.documentElement.scrollTop);var l=o-a,h=document.documentElement.clientHeight-(l+this.render.offsetHeight),d=e.render.offsetHeight;h<d&&l>d&&(s="up")}if("up"==s)if("gridView"==this.itemTableMode){o-=this.getElementById(this.id+"_gridViewItemTable_gridView_body_table").offsetHeight;var u=this.getElementById(this.itemTable.id+"_gridView_main_div").style.zIndex;this.setStyle("z-index",u+1)}else o-=e.render.offsetHeight;else o+=this.render.offsetHeight;if("fit"==this.options.direction){"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(this.itemTable.render.firstChild.style.width="100%"),i=WebSquare.style.getAbsoluteLeft(this.render),e.setPosition(i,o);var c=document.documentElement.clientWidth-i;e.setSize(c,e.render.offsetHeight)}else"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(i=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(e.render.style.width=this.render.offsetWidth+"px")),"fit"!=s&&document.documentElement.clientWidth<i+e.render.offsetWidth&&(i=i+this.render.offsetWidth-e.render.offsetWidth),i<0&&(i=0);this.itemTableDirection=s,e.setPosition(i,o),this.isOpen=!0,WebSquare.style.adjustZIndex(this.uuid,e.uuid,"itemTable"),this.options.findItemFirstKey&&(n.D.isMobile()||this.options.editable&&!this.options.disableEdit&&this.editmode||("grid"==this.itemTableMode?e.grid.render.focus():"gridView"==this.itemTableMode&&e.gridView.render.focus()))}if(-1!=this.selectedIndex)for(var p=0;p<this.viewArr.length;p++)if(this.viewArr[p].index==this.selectedIndex){this.itemTable.setSelectedIndex(p,t&&t.noFocus);break}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.closeSubLayer=function(){try{WebSquare.getBody().getLayerListener().hide(this.id)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._closeSubLayer=function(){
try{this.isOpen&&null!=this.itemTable&&(this.itemTable.hide(),this.removeClass("w2autoComplete_open"),this.itemTable.render.setAttribute("aria-expanded","false"),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._closeOtherLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.otherComponent;"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i&&(i.hide(),this.removeClass("w2autoComplete_open"),"grid"==this.itemTableMode?i.grid.handleResize():"gridView"==this.itemTableMode&&i.gridView.handleResize(),this.isOpen=!1,!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndex=function(t,e,i,o){try{if(isNaN(t))return;if(n.D.isNull(t))return;if(this.options.emptyItem&&(t<0||t>=this.getItemCount()))if(this.modelControl.isBinded())(1==this.options.selectedData||0!=i)&&this.modelControl.setData(this.options.emptyValue),this.setSelectedIndexNM(-1);else{var s=this.getSelectedIndex(),l=this.getValue();this.setSelectedIndexNM(-1),-1!=s&&!0!==o&&a.B.fireEvent(this,"onchange",{oldValue:l,newValue:this.getValue()})}else{if(t>=this.getItemCount())return;if(t<0&&!e)return;t=parseInt(t);var h="";t>-1&&(h=this.itemArr[t].value),1==this.options.selectedData||"gridView"===this.itemTableMode&&!1===this.options.selectedData&&-1===t?this.modelControl.setData(h):0!=i?this.itemArr[t].value!=WebSquare.allValue?(this.modelControl.setData(h),1==this.options.chooseOption&&0==t&&this.setSelectedIndexNM(0)):(this.modelControl.setData(""),this.setSelectedIndexNM(t)):this.setSelectedIndexNM(-1);s=this.getSelectedIndex(),l=this.getValue();this.setSelectedIndexNM(t,e),s!=this.getSelectedIndex()&&(!0!==o&&a.B.fireEvent(this,"onchange",{oldValue:l,newValue:this.getValue()}),this.broadcast({linkedDataList:["refresh"]}))}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndexNM=function(t,e){try{if(this.dummyData=null,t=parseInt(t),isNaN(t))return!1;if(this.options.emptyItem&&(t<0||t>=this.getItemCount()))this.selectedIndex=-1,this.dom.label.innerHTML="",this.dom.input.value="",this.itemTable&&this.itemTable.setSelectedIndex(0),this.selectedItem={text:"",value:"",orgLabel:""},this.showEditMode(!1);else{if(isNaN(t)||t>=this.getItemCount())return!1;if(t<0&&!e)return!1;if(this.selectedIndex=t,t>-1){"grid"==this.itemTableMode?this.gridOptions.dataComp?this.selectedGridRowObj=this.gridOptions.dataComp.getRowArray(t):this.selectedGridRowObj=this.gridRowItemArr[t]:"gridView"==this.itemTableMode&&this.gridViewOptions.dataComp&&(this.selectedGridViewRowObj=this.gridViewOptions.dataComp.getRowArray(t));var i=this.itemArr[t].label;this._setLabel(t),this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=i,this.selectedItem={text:i,value:this.itemArr[t].value,orgLabel:this.itemArr[t].orgLabel},this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+t)}else-1==t&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?("gridView"==this.itemTableMode&&this.gridViewOptions.dataComp&&(this.selectedGridViewRowObj=this.gridViewOptions.dataComp.getRowArray(t)),this.dom.label.innerHTML=this._domInputValue,this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=this._domInputValue,this.selectedItem={text:this._domInputValue},this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+t)):(this.dom.label.innerHTML="",this.dom.input.value="",
this.showEditMode(!1))}return!0}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setLabel=function(t){try{if(this.dom.label){var e=this.itemArr[t].label+"";if(this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var i=this.itemArr[t].value+"",o=this.itemArr[t].orgLabel+"";(0!=t||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=t&&1!=t||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(e=this.customLabelFormatter.call(this,o,i,this.isOpen)),this.dom.label.innerHTML=e}else{var s=this.options.escape?this._encode(e):e;s=this.getFormattedValue(t,s),this.dom.label.innerHTML=s}}}catch(t){r.w.printStackTrace(t)}},u.prototype._getLabel=function(t){try{if(this.dom.label){var e=this.itemArr[t].label+"";if(this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var i=this.itemArr[t].value+"",o=this.itemArr[t].orgLabel+"";(0!=t||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=t&&1!=t||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(e=this.customLabelFormatter.call(this,o,i,this.isOpen))}return e}}catch(t){r.w.printStackTrace(t)}},u.prototype._getChooseOptionLabel=function(){try{var t=this.options.chooseOptionLabel||this.defaultChooseOptionLabel;if(this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var e=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);e&&(t=e)}return t}catch(t){r.w.printStackTrace(t)}},u.prototype.setAllSelectedIndex=function(t,e){try{return this.allItemArr[t]?(this.selectedIndex=-1,this.selectedAllIndex=t,this.setDummyData(this.allItemArr[t].value,this.allItemArr[t].label+""),e&&this.modelControl.setData(this.allItemArr[t].value),NaN):(this.selectedAllIndex=-1,!1)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue(),i=this.setValueNM(t);1==i?(this.modelControl.setData(t),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})):isNaN(i)?this.modelControl.isBinded()&&this.modelControl.setData(t):this.options.emptyItem?this.setSelectedIndex(-1):-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?(this._domInputValue=t,this.setSelectedIndex(-1,!0)):this.setSelectedIndex(0),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValueNM=function(t){try{if(n.D.isNull(t))return;t=t.toString();var e=this.getItemCount();t&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult&&(this.selectedIndex=-1);for(var i=0;i<e;i++)if(this.itemArr[i].value==t)return this.setSelectedIndexNM(i),!0;return this.setAllValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAllValue=function(t,e){try{try{if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(t){return!1}if(n.D.isNull(t))return!1;t=t.toString();for(var i=this.allItemArr.length,o=0;o<i;o++)if(this.allItemArr[o].value==t)return this.setAllSelectedIndex(o,e);return!1}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getValue=function(){try{if(this.dummyData)return this.dummyData.value;if(this.itemArr[this.selectedIndex])return this.itemArr[this.selectedIndex].value;if(this.options.emptyItem&&-1==this.selectedIndex)return this.options.emptyValue;if("empty"==this.options.returnValueType)return"";var t=null
;return"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult&&this._domInputValue&&(t=this._domInputValue),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setText=function(t,e){try{var i=this.getItemCount(),o="";if(e)for(var s=0;s<i;s++)this.itemArr[s].orgLabel==t&&(o=this.itemArr[s].value);else for(s=0;s<i;s++)this.itemArr[s].label==t&&(o=this.itemArr[s].value);this.setValue(o)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getText=function(t){try{return this.dummyData?this.dummyData.label:this.itemArr[this.selectedIndex]?t?this.itemArr[this.selectedIndex].orgLabel:this.itemArr[this.selectedIndex].label:null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setItem=function(t,e,i,o){try{if(!this.itemArr)return;if(this.itemArr.length<=o)return;this.itemArr[o].label=t,this.itemArr[o].value=e,this.itemArr[o].label=this.getItemText(o),this.itemArr[o].orgLabel=t,this.itemArr[o].xml=i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.addItem=function(t,e,i,o){try{var s,a=!0;if(t+="",e+="",null==i){var n="<DATA><label>"+WebSquare.xml.encode(t)+"</label><value>"+WebSquare.xml.encode(e)+"</value></DATA>";s=WebSquare.xml.parse(n)}var l={label:t,value:e,orgLabel:t,xml:s};o=parseInt(o,10),(isNaN(o)||o<0||o>=this.getItemCount())&&(o=this.getItemCount());for(var h=0;h<this.itemArr.length;h++)if("all"==this.options.searchTarget){if(this.itemArr[h].value==l.value&&this.itemArr[h].orgLabel==l.orgLabel){a=!1,alert(WebSquare.language.getMessage("AutoComplete_addItem_invalid",this.id,h));break}}else if(this.itemArr[h].value==l.value){a=!1,alert(WebSquare.language.getMessage("AutoComplete_addItem_invalid",this.id,h));break}if(a){void 0===o?("0"!=this.options.displayMode&&(l.label=this.getItemText(o)),this.itemArr.push(l)):(this.itemArr.splice(o,0,l),"0"!=this.options.displayMode&&(this.itemArr[o].label=this.getItemText(o)),o<=this.selectedIndex&&this.setSelectedIndexNM(this.selectedIndex+1)),this.viewArr=[];for(h=0;h<this.itemArr.length;h++)this.viewArr.push({label:this.itemArr[h].label,value:this.itemArr[h].value,orgLabel:this.itemArr[h].orgLabel,index:h,_hidden:this.itemArr[h]._hidden,_disabled:this.itemArr[h]._disabled});return!0}return!1}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getItem=function(t){try{if(void 0===t)return;if(t>=this.itemArr.length||t<0)return;return this.itemTable&&this.gridOptions.sortIndex&&this.gridItemArr.length>0?this.itemArr[this.itemTable.grid.getRealRowIndex(t)]:this.itemArr[t]}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSearchedItems=function(){try{return this.viewArr}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedRow=function(){try{if("grid"==this.itemTableMode)return this.selectedGridRowObj;if("gridView"==this.itemTableMode)return this.selectedGridViewRowObj;var t={};return t.label=this.selectedItem.orgLabel,t.value=this.selectedItem.value,t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":var i=this.dom.button;1==e?(this.closeSubLayer(),this.addClass("w2autoComplete_disabled"),null!=i&&this.addClass(i,"w2autoComplete_button_disabled")):(this.removeClass("w2autoComplete_disabled"),null!=i&&this.removeClass(i,"w2autoComplete_disabled"));var o=this.getElementById(this.id+"_input");1==e?o.setAttribute("disabled","disabled"):o.removeAttribute("disabled");break;case"readOnly":1==e?this.addClass("w2autoComplete_readonly"):this.removeClass("w2autoComplete_readonly");o=this.getElementById(this.id+"_input");1==e?o.setAttribute("readonly","readonly"):o.removeAttribute("readonly");break;case"mandatory":1==e?this.addClass(this.render,"w2autoComplete_mandatory"):this.removeClass(this.render,"w2autoComplete_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndex1=function(t,e,i){try{
var o=this.selectedIndex,s=this.getValue();if(this.setSelectedIndex(t,i),o!=this.selectedIndex){var n={oldValue:s,newValue:this.getValue(),oldSelectedIndex:o,newSelectedIndex:this.selectedIndex};a.B.fireEvent(this,"onviewchange",n)}e||this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null),this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2autoComplete_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=this._encode(i)),this.tooltip.render.innerHTML=i})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.disableEdit=function(t){try{this.options.disableEdit=n.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleClickEvent=function(t){try{if(this.options.disabled)return!1;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2autoComplete_input")&&this.isOpen)return void this.changeMode();if(e.match("w2autoComplete_col_label"))return this.isOpen?this._showItemTableByFocus||"onfocus"===this.options.editModeEvent&&this.viewArr.length<this.itemArr.length||this.closeSubLayer():(1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),!0!==this.options.disableEdit&&!1!==this.options.editable||this.openSubLayer()),void(!this.options.disableEdit&&this.options.editable&&this.changeMode({hideListOnFocus:this.options.hideListOnFocus}));e.match("w2autoComplete_col_button")&&(this.mytime&&clearTimeout(this.mytime),this.isOpen&&(this._showItemTableByFocus||this.viewArr.length<this.itemArr.length)&&this.closeSubLayer())}this.mozTrickBuffer="",this.editmode=!1,this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled});this.options.useOtherComponentId||this.options.useKeywordHighlight&&this.options.interactionMode&&(this._itemTableRedraw=!0),this.toggle(),e=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleClickEventDocument=function(t){try{!this.event.isMe(t,this.render)&&this.options.handleOtherClick&&(null!=this.itemTable&&this.itemTable.inputBlurInside&&(s.v.setTimer(this.endEdit,{key:this.id+"_handleClickEventDocument",caller:this,delay:1}),this.itemTable.inputBlurInside=!1),this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),
null!=this.itemTable&&0==this.findkeymode?WebSquare.getBody().getLayerListener().isShow(this.id)&&this.closeSubLayer():null!=this.itemTable&&1==this.findkeymode&&(this.findkeymode=!0),this.otherClicked=!0)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.endEdit=function(t){try{var e,i=this.dom.input.value,o=t&&!0===t.noEvent;a.B.fireEvent(this,"oneditend",i),this.mytime&&window.clearTimeout(this.mytime),this.hideTime&&window.clearTimeout(this.hideTime);var l,h=this.dom.input.value,d=this.options.searchTarget,u=!1;1==this.options.displayMode?(l=h.split(this.options.delimiter),"value"==d?h=l[0]:"label"==d?null!=(h=l[1])&&""!==h||(h=l[0]):"both"==d?l[0]&&l[1]?(h=l[1]+"|"+l[0],u=!0):null!=(h=l[1])&&""!==h||(h=l[0]):"all"==d&&(null==l[1]&&1==l.length&&(l[1]=l[0],l[0]=""),h=l[1]+"|"+l[0])):2==this.options.displayMode&&(l=h.split(this.options.delimiter),"value"==d?null!=(h=l[1])&&""!==h||(h=l[0]):"label"==d||"both"==d?h=l[0]:"all"==d&&(null==l[1]&&(l[1]=""),h=l[0]+"|"+l[1]));var c=this.itemArr[this.selectedIndex];if(null!=(e=null!=c&&(("value"===d||"both"===d)&&h===c.value||("label"===d||"both"===d)&&h===c.orgLabel||"all"===d&&h===c.orgLabel+"|"+c.value)?this.selectedIndex:this.findinItemArr(h,this.options.searchTarget,u)))"useData"!==this.noResult||o?"clear"===this.noResult?o?this.setSelectedIndex(e,!0):this.setSelectedIndex1(e,!0,!0):!0===this.otherClicked?(!0===this.options.handleOtherClick&&this.setSelectedIndex1(e,!0),this.otherClicked=!1):this.setSelectedIndex(e):this.setSelectedIndex1(e,!0);else if("useData"===this.noResult){if(e=1==this.options.allOption||1==this.options.chooseOption?1:0,this.options.ignoreBlankOnNoResult&&""===this.dom.input.value)e=0;else{if("gridView"===this.itemTableMode){var p={label:this.dom.input.value,value:this.dom.input.value,orgLabel:this.dom.input.value};this.dummyGridItemArr.push(p)}"all"===d&&2===l.length?(this.options.interactionMode&&this.dummyItemArr.push({label:l[0],value:l[0],orgLabel:l[0]}),1==this.options.displayMode?this.addItem(l[1],l[0],null,e):this.addItem(l[0],l[1],null,e)):(this.options.interactionMode&&this.dummyItemArr.push({label:this.dom.input.value,value:this.dom.input.value,orgLabel:this.dom.input.value}),this.addItem(this.dom.input.value,this.dom.input.value,null,e))}o?this.setSelectedIndex(e):this.setSelectedIndex1(e,!0)}else"clear"===this.noResult&&(e=1==this.options.allOption||1==this.options.chooseOption?0:-1,o?this.setSelectedIndex(e,!0):this.setSelectedIndex1(e,!0,!0));var g="";null!=this.dom.input&&null!=this.itemArr&&-1!=this.selectedIndex&&(this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.selectedItem.text==this.dom.input.value&&""!=this.dom.input.value?("function"==typeof this.customLabelFormatter?g=this._getLabel(this.selectedIndex):(g=this.options.escape?this._encode(this.selectedItem.text):this.selectedItem.text,g=this.getFormattedValue(this.selectedIndex,g)),this.dom.label.innerHTML=g):this.itemArr&&this.itemArr[this.selectedIndex]?("function"==typeof this.customLabelFormatter?g=this._getLabel(this.selectedIndex):(g=this.options.escape?this._encode(this.itemArr[this.selectedIndex].label):this.itemArr[this.selectedIndex].label,g=this.getFormattedValue(this.selectedIndex,g)),this.dom.label.innerHTML=g,this.selectedItem={text:g,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}):this.dom.label.innerHTML=""),this.showEditMode(!1),this.mozTrickBuffer="",(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0,n.D.clearInterval(this.id+"_mozTrickCompare"))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleblurEventInput=function(){"none"!=this.dom.input.style.display&&this.options.handleOtherClick&&(null==this.itemTable||null!=this.itemTable&&!this.itemTable.inputBlurInside)&&(this.endEdit(),this.isOpen&&this.closeSubLayer()),this.otherClicked=!1},u.prototype.handleKeypressEvent=function(t){try{
var e=this.dom.input.value;this.validator.validateKeyPress(this.dom.input,e,t)||a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(!0===this._preventKeyObj[e]||!0===this._preventKeyObj.all)return;if(13==e&&(this.options.disableEdit||!this.editable))return void this.handleClickEvent(t);if(this.event.isMe(t,this.dom.input)){if(this.editmode=!0,this.inputKeyDown(t,!1),(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.mozTrickCompare(),n.D.setInterval(this.mozTrickCompare,{key:this.id+"_mozTrickCompare",caller:this,delay:10})),9==e||13==e&&!0===this.options.nextTabByEnter){var i=a.B.fireEvent(this,"onEditEnter",t);this.tabOrderMoveStart=!1,!1!==i&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}return}e=t.charCode?t.charCode:t.keyCode;if(this.options.customToggleKey==e)return void this.toggle();if(s.v.browserCheck.opera){if(18==e&&!this.isOpen)return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void this.changeMode()}else{if(!(40!=e&&38!=e||this.isOpen))return this.handleClickEvent(t),void a.B.preventDefault(t);if(13==e&&!this.isOpen)return void this.changeMode()}if(9==e||13==e&&!0===this.options.nextTabByEnter){i=a.B.fireEvent(this,"onEditEnter",t);this.tabOrderMoveStart=!1,!1!==i&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}if(null!=this.itemTable&&this.viewArr.length>0)1==this.isOpen&&(27==e?(this._closeSubLayer(),this.showEditMode(!1),this.focus()):this.itemTable.handleKeydownEvent(t)),this.editmode=!1;else if(null!=this.itemTable&&""==this.itemTable.render.style.display)return;return void(null!=this.itemTable&&this.itemTable.render.style.display)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeyupEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode;if(!0===this._preventKeyObj[i]||!0===this._preventKeyObj.all)return;if(9==i||13==i&&!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.isOpen&&this.closeSubLayer(),this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.isOpen&&this.closeSubLayer(),this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleInputKeyupEvent=function(t){try{if(this.editmode){var e=t.charCode?t.charCode:t.keyCode,i={oldValue:this.beforeEditValue,newValue:this.dom.input.value,keyCode:e};this.options.maxByteLength&&a.B.fireEvent(this,"oneditfull");a.B.fireEvent(this,"oneditkeyup",i,t)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleInputEvent=function(t){try{var e=this.dom.input.value,i=this.validator.validateKeyInput(this.render,e,t);i.valid?this.dom.input.value=i.str:a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.find=function(t,e){try{var i=this.dom.input.value;if("function"==typeof this.customSearchStrArrFunction)return void this._findInSearchStrArr();if(""==i&&!e)return this.mozTrickBuffer=i,void(null!=this.itemTable&&this.closeSubLayer());if(this.mozTrickBuffer==i)return void(this.mozTrickBuffer=i);this.mozTrickBuffer=i,this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(i=i.toLowerCase());var o=!1;if(this._showItemTableByFocus&&e)for(var s=0;s<this.itemArr.length;s++)this.viewArr.push({label:this.itemArr[s].label,value:this.itemArr[s].value,
orgLabel:this.itemArr[s].orgLabel,index:s,_hidden:this.itemArr[s]._hidden,_disabled:this.itemArr[s]._disabled});else for(s=0;s<this.itemArr.length;s++)if(!this.itemArr[s].noItem){var a=!1;if(this.itemArr[s].orgLabel||(this.itemArr[s].orgLabel=this.itemArr[s].label,this.itemArr[s].label=this.getItemText(s)),!a&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var l=this.options.caseSensitive?this.itemArr[s].orgLabel:this.itemArr[s].orgLabel.toLowerCase();"all"==this.options.searchTarget&&(l=this.options.caseSensitive?this.itemArr[s].label:this.itemArr[s].label.toLowerCase()),"contain"==this.search?a=this.myhelper.containWith(l,i):"start"==this.search?a=this.myhelper.startWith(l,i):"none"==this.search&&(a=l==i),l==i&&(o=!0)}if(!a&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var h=this.options.caseSensitive?this.itemArr[s].value:this.itemArr[s].value.toLowerCase();"contain"==this.search?a=this.myhelper.containWith(h,i):"start"==this.search?a=this.myhelper.startWith(h,i):"none"==this.search&&(a=h==i),h==i&&(o=!0)}var d=this.itemArr[s].label;if(this.options.useKeywordHighlight){var u=this.options.caseSensitive?d:d.toUpperCase(),c=this.options.caseSensitive?this.mozTrickBuffer:this.mozTrickBuffer.toUpperCase(),p=u.indexOf(c);if(p>=0){var g=d.substring(p,p+this.mozTrickBuffer.length);d=d.substring(0,p)+"<span class='w2autoComplete_keyword'>"+g+"</span>"+d.substring(p+this.mozTrickBuffer.length,d.length)}}a&&this.viewArr.push({value:this.itemArr[s].value,label:d,orgLabel:this.itemArr[s].orgLabel,index:s,_hidden:this.itemArr[s]._hidden,_disabled:this.itemArr[s]._disabled})}if(this.options.disabled)return!1;1!==this.viewArr.length&&(o=!1),this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&"gridView"!=this.itemTableMode&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr)),"grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.openSubLayer({noFocus:!0}):this.openSubLayer({select:!1})):this.closeSubLayer(),this.options.autoFocus&&!0===o&&!0!==t&&n.D._autoFocus(this)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._findInSearchStrArr=function(){try{var t=this.customSearchStrArrFunction.call(this,this.dom.input.value),e=this.dom.input.value;if(this.mozTrickBuffer=e,""==e||t&&t.lengh<1)return void(null!=this.itemTable&&this.closeSubLayer());this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(e=e.toLowerCase());for(var i=0;i<t.length;i++){e=this.options.caseSensitive?t[i]:t[i].toLowerCase();for(var o=0;o<this.itemArr.length;o++){var s=!1;if(this.itemArr[o].orgLabel||(this.itemArr[o].orgLabel=this.itemArr[o].label,this.itemArr[o].label=this.getItemText(o)),!s&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var a=this.options.caseSensitive?this.itemArr[o].orgLabel:this.itemArr[o].orgLabel.toLowerCase();"all"==this.options.searchTarget&&(a=this.options.caseSensitive?this.itemArr[o].label:this.itemArr[o].label.toLowerCase()),"contain"==this.search?s=this.myhelper.containWith(a,e):"start"==this.search?s=this.myhelper.startWith(a,e):"none"==this.search&&(s=a==e)}if(!s&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var n=this.options.caseSensitive?this.itemArr[o].value:this.itemArr[o].value.toLowerCase();"contain"==this.search?s=this.myhelper.containWith(n,e):"start"==this.search?s=this.myhelper.startWith(n,e):"none"==this.search&&(s=n==e)}var l=this.itemArr[o].label;if(this.options.useKeywordHighlight){var h=this.options.caseSensitive?l:l.toUpperCase(),d=this.options.caseSensitive?this.mozTrickBuffer:this.mozTrickBuffer.toUpperCase(),u=h.indexOf(d);if(u>=0){var c=l.substring(u,u+this.mozTrickBuffer.length)
;l=l.substring(0,u)+"<span class='w2autoComplete_keyword'>"+c+"</span>"+l.substring(u+this.mozTrickBuffer.length,l.length)}}s&&this.viewArr.push({value:this.itemArr[o].value,label:l,orgLabel:this.itemArr[o].orgLabel,index:o,_hidden:this.itemArr[o]._hidden,_disabled:this.itemArr[o]._disabled})}}if(this.options.disabled)return!1;this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&"gridView"!=this.itemTableMode&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr)),"grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.openSubLayer({noFocus:!0}):this.openSubLayer({select:!1})):this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.runSubmission=function(t){try{var e=!0,i=this.dom.input.value,o=n.D.getStringByteSize(i);if(this.options.interactionMinByteLength>0&&this.options.interactionMinByteLength>o&&(e=!1),"false"!=this.options.allowEmptySubmission&&""==i||"default"==this.options.interactionKey&&this.mozTrickBuffer==i&&(e=!1),e)if(this._itemTableRedraw=!0,this.mozTrickBuffer=i,""!=this.options.submissionFunc.wq_trim()){var s=n.D.getGlobalFunction(this.options.submissionFunc,this.scope_id);"function"==typeof s&&s(i,t)}else if(""!=this.options.submission.wq_trim()){var a="<key>"+WebSquare.xml.encode(i)+"</key>";WebSquare.WebSquaredoc.models[0].rebuild(WebSquare.xml.parse(a),this.options.keyInputRef),WebSquare.WebSquaredoc.models[0].refresh(),WebSquare.ModelUtil.executeSubmission(this.options.submission)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.inputKeyDown=function(t,e){try{if(0==e)var i=t.charCode?t.charCode:t.keyCode;if(this.interactionMode){if(this.editmode=!1,0==e)if("default"==this.options.interactionKey||this.isOpen||this.options.interactionEnterKey)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&("grid"==this.itemTableMode?this.itemTable.setFocusedCell(0,0):this.itemTable.focus()));if(13==i)return void(this.options.interactionEnterKey?this.mytime=this.runSubmission(i):this.enterHandle(t));if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.arrowHandle(t),WebSquare.getBody().getLayerListener().isShow(this.id)&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.itemTable.setFocusedCell(0,0):this.itemTable.focus()),s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.endEdit(),void(this.isOpen&&this.closeSubLayer())}}else;else this.options.interactionKey;if(!this.options.interactionEnterKey){var o=this;this.mytime=setTimeout((function(){o.runSubmission(i)}),100)}return}if(0==e)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable.focus());if(13==i)return void this.enterHandle(t);if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length||this.viewArr.length!=this.itemArr.length)return;return this.arrowHandle(t),
s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),void(this.isOpen&&this.closeSubLayer())}if(27===i)return this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.focus(),void this.closeTable()}else if(""==this.dom.input.value.wq_trim())return void this.render.click();if(this.selectedItem={text:"",value:"",orgLabel:""},this.selectedGridRowObj={},this.beforeEditValue=this.dom.input.value,this.itemArr.length>0){o=this;this.mytime=setTimeout((function(){o.find()}),100)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.arrowHandle=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(null==this.itemTable)return;if((this.editmode||this.findkeymode)&&(""==this.dom.input.value||0==this.viewArr.length))return void a.B.stopEvent(t);for(var i=0,o=0;o<this.viewArr.length;o++)if(this.selectedItem.orgLabel==this.viewArr[o].orgLabel){i=o;break}if(9==e||9==e&&t.shiftKey?this.setSelectedIndex1(this.viewArr[i].index):this.itemTable.handleKeydownEvent(t),this.viewArr.length>0){var s="";s="value"==this.options.searchTarget?this.viewArr[i].value:this.viewArr[i].label,this.options.useKeywordHighlight&&(s=s.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),this.dom.input.value=s,this.selectedItem={text:s,value:this.viewArr[i].value,orgLabel:this.viewArr[i].orgLabel},this.itemTable.setSelectedIndex(i)}return void(this.mozTrickBuffer="")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.enterHandle=function(t){try{var e,i=this.dom.input.value;if(a.B.fireEvent(this,"oneditend",i),(null==this.itemTable||null==this.itemTable.selectedCell)&&(null!=this.itemTable||this.options.useOtherComponentId||this.setSubLayer(),null==this.itemTable.selectedCell)){var o=this.findinItemArr(this.dom.input.value,this.options.searchTarget);if("clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode&&void 0===o&&(o=-1),this.setSelectedIndex1(o,!0,!0);else if("noEnd"===this.noResult){if(void 0===o)return;this.setSelectedIndex1(o,!0)}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(e=null==o?this.findinItemArr(this.viewArr[0].value,"value"):o,this.setSelectedIndex1(e,!0)):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(e=this.findinItemArr(this.itemArr[0].value,"value"),this.setSelectedIndex1(e,!0)))}if(s.v.browserCheck.opera&&a.B.stopEvent(t),this.mozTrickBuffer="",null!=this.itemTable.selectedCell)if(e=this.findinItemArr(this.dom.input.value,this.options.searchTarget),"clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode?(void 0===e&&(e=-1),this.setSelectedIndex1(e,!0,!0)):(void 0===e&&void 0===(e=this.itemTable.selectedCell.index)&&(e=this.itemTable.selectedCell.getAttribute("index")),this.setSelectedIndex1(e,!0));else if("noEnd"===this.noResult){if(void 0===e)return;this.setSelectedIndex1(e,!0)}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==e&&(e=this.findinItemArr(this.viewArr[0].value,"value")),this.setSelectedIndex1(e,!0)):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(e=this.findinItemArr(this.itemArr[0].value,"value"),this.setSelectedIndex1(e,!0)));this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.closeTable(),this.focus()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.findinItemArr=function(t,e,i,o){try{for(var s=function(t,e){return e&&"string"==typeof t?t.toLowerCase():t},a=e||"label",n=o&&!0===o.ignoreCaseSensitive,l=s(t,n),h=0;h<this.itemArr.length;h++)if(!0!==this.itemArr[h]._disabled){var d=s(this.itemArr[h].value,n),u=s(this.itemArr[h].label,n),c=s(this.itemArr[h].orgLabel,n)
;if("value"===a){if(l==d)return h}else if("label"===a){if(1==this.options.displayMode||2==this.options.displayMode){if(l==c)return h}else if(l==u)return h}else if("both"===a){if(1==i){if(l==c+"|"+d)return h}else if(l==c||l==d)return h}else if("all"===a&&l==c+"|"+d)return h}if(!this.options.caseSensitive&&!n)return this.findinItemArr(t,e,i,{ignoreCaseSensitive:!0});if(this.dummyData&&(("value"===a||"both"===a)&&this.dummyData.value||("label"===a||"both"===a)&&t===this.dummyData.label||"all"===a&&t===this.dummyData.label+"|"+this.dummyData.value))return NaN}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.closeTable=function(){try{this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showTable=function(){try{this.openSubLayer({select:!1})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMousewheelEvent=function(t){try{if(this.options.preventWheelEvent)return;if(a.B.stopEvent(t),!this.options.useMousewheel)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2autoComplete_selected"))if(this.isOpen){if("grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode){if(this.itemTable.selectedCell)void 0===(i=this.itemTable.selectedCell.index)&&(i=this.itemTable.selectedCell.getAttribute("index"),this.dom.input.value=this.viewArr[i].label),this.itemTable.setSelectedIndex(i)}}else{var i=this.getSelectedIndex();t.wheelDelta>0||t.detail<0?this.setSelectedIndex1(i-1):this.setSelectedIndex1(i+1)}e=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleFocusEvent=function(t){try{if(a.B.stopEvent(t),!this.isOpen){var e=document.getElementById(this.id+"_main_tbody");this.addClass(e,"w2autoComplete_selected"),this.addClass("w2autoComplete_body_selected"),"onfocus"==this.options.editModeEvent&&(!0===this.options.disableEdit||!1===this.options.editable||this.changeMode())}this.onchangeFlag&&(this.onchangeFlag=!1,a.B.fireEvent(this,"onafteredit"))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleBlurEvent=function(t){try{if(a.B.stopEvent(t),!this.isOpen){var e=document.getElementById(this.id+"_main_tbody");this.removeClass(e,"w2autoComplete_selected"),this.removeClass("w2autoComplete_body_selected")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{if(a.B.stopEvent(t),!n.D.isIE(6)&&!this.isOpen){var e=document.getElementById(this.id+"_main_tbody");this.addClass(e,"w2autoComplete_selected"),this.addClass("w2autoComplete_body_selected")}if(!this.isOpen){for(var i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2autoComplete")&&1==this.options.tooltipDisplay&&!this.editmode){var o=i.getElement(),s=WebSquare.style.getAbsoluteLeft(o)+20,l=WebSquare.style.getAbsoluteTop(o)+this.render.offsetHeight+3,h=this.dom.label.innerHTML;this.showTooltip(s,l,h)}i=null}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{if(a.B.stopEvent(t),1==this.options.tooltipDisplay&&this.hideTooltip(),!this.isOpen){var e=document.getElementById(this.id+"_main_tbody");this.removeClass(e,"w2autoComplete_selected"),this.removeClass("w2autoComplete_body_selected")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseleaveEvent=function(t){try{var e=this.render.offsetHeight-1,i=this.render.offsetWidth-1,o=this.getAbsolutePosition("top"),s=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(t.clientX<s||t.clientX>s+i||t.clientY>o||t.clinetY>o+e)&&this.closeSubLayer():(t.clientX<s||t.clientX>s+i||t.clientY<o||t.clinetY>o+e)&&this.closeSubLayer())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.changeMode=function(t){try{if(!1===this.options.editable)return;if(void 0!==t&&null!=t||(t={}),this.editmode=!0,this.findStop=!1,"block"!=this.dom.input.style.display){var e=""
;if(e=-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?this.selectedItem.text:"value"==this.options.searchTarget?this.selectedItem.value:"label"==this.options.searchTarget||"both"==this.options.searchTarget?this.selectedItem.orgLabel:"all"==this.options.searchTarget?this.selectedItem.text:this.selectedItem.orgLabel,"focus"==this.options.editType){this.showEditMode(!0),document.activeElement!=this.dom.input&&this.setfFocus();var i=WebSquare.xml.decode(e+"");this.dom.input.value=i,(n.D.isOpera()||n.D.isFF())&&this.dom.input.setSelectionRange(i.length,i.length)}else this.dom.input.value=WebSquare.xml.decode(e+""),this.showEditMode(!0),this.dom.input.select(),this.setfFocus()}if(!this.interactionMode&&this.itemArr.length>0&&!0!==t.hideListOnFocus){var o=this;(this._showItemTableByFocus||this.dom.input.value&&this.dom.input.value!==this.defaultAllOptionLabel&&this.dom.input.value!==this._getChooseOptionLabel())&&(this.mytime&&clearTimeout(this.mytime),this.mytime=setTimeout((function(){o.find(!0,!0)}),100))}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showEditMode=function(t){t?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):s.v.setTimer((function(){try{this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible"}catch(t){}}),{key:this.id+"_showEditMode",caller:this,delay:1})},u.prototype.setfFocus=function(){try{this.dom.input.focus(),null!=this.itemTable&&(this.itemTable.inputBlurInside=!1)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),!0===t?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(t){r.w.printStackTrace(t)}return t},u.prototype.mozTrickCompare=function(){try{this.dom.input.value!=this.trickBuffer&&(this.trickBuffer=this.dom.input.value,0==this.findStop&&this.inputKeyDown({},!0))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInputFocus=function(){try{this.changeMode()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setEditMode=function(){try{this.setInputFocus()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.removeAll=function(t){try{if(this.selectedItem={text:"",value:"",orgLabel:""},this.itemArr=new Array,t&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption)){var e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}if(this.setSelectOptions(this.itemArr),this.itemArr.length>0?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[0].label):this.itemArr[0].label:this.dom.label.innerHTML="","grid"==this.itemTableMode)this.viewArr=[],this.gridItemArr=[],this.gridRowItemArr=[],this.selectedGridRowObj={},this.itemTable&&this.itemTable.grid.removeAll();else if("gridView"==this.itemTableMode){if(this.viewArr=[],this.gridViewItemArr=[],this.gridViewRowItemArr=[],this.selectedGridViewRowObj={},this.itemTable)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).removeAll()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.initAutoComplete=function(){try{this.removeAll(),this.selectedIndex=-1,this.selectedItem={text:"",value:"",orgLabel:""},this.dom.input.value="",this.dummyData=null,this._itemTableRedraw=!0,this.isOpen&&this.closeSubLayer(),this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hide=function(){try{this.closeSubLayer(),l.s.prototype.hide.call(this)}catch(t){r.w.printStackTrace(t)}},
u.prototype.getFormattedValue=function(t,e){try{var i=e;return this.options.displayFormatter&&(this.displayFormatter||(this.fixedIndex=-1,1==this.options.allOption&&this.fixedIndex++,1==this.options.chooseOption&&this.fixedIndex++,this.displayFormatter=n.D.getGlobalFunction(this.options.displayFormatter,this.scope_id)),"function"==typeof this.displayFormatter&&t>this.fixedIndex&&(i=this.displayFormatter(e))),i}catch(t){r.w.printStackTrace(t)}},u.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},u.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=n.D.getNextTabbableComp(this.id);t&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),t.focus())}}catch(t){r.w.printStackTrace(t)}},u.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=n.D.getPreTabbableComp(this.id);t&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),t.focus())}}catch(t){r.w.printStackTrace(t)}},u.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){r.w.printStackTrace(t)}},u.prototype.setNextTabID=function(t,e){try{null!=t&&n.D.setNextTabID(this.id,t,e)}catch(t){r.w.printStackTrace(t)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},u.prototype.setGridData=function(){this.itemTable.grid.clearFilter(),this.itemTable.grid.setTopRowIndex(0);var t=this.itemsetObj.labelId,e=this.itemsetObj.valueId;if(!this.options.interactionMode)if(this.gridItemArr=[],this.gridOptions.dataComp){var i=this.itemTable.grid.getColCnt();if(this.gridOptions.dataComp.getColumnCount()!=i){var o,s=[],r={},a=[];for(var n in this.itemTable.grid.cellInfoHash)s.push(this.itemTable.grid.cellInfoHash[n].id);if(o=this.gridOptions.dataComp.getColData(s[0]).length,null==this.gridOptions.dataComp.sortStatusArr){for(var l=0;l<s.length;l++)r[s[l]]=this.gridOptions.dataComp.getColData(s[l]);for(var h=0;h<o;h++)for(var n in a[h]={},r)a[h][n]=r[n][h];for(n=0;n<this.viewArr.length;n++)for(l=0;l<a.length;l++)if(this.viewArr[n].orgLabel===a[l][this.itemsetObj.label]&&this.viewArr[n].value===a[l][this.itemsetObj.value]){var d=[];for(var u in a[l])d.push(a[l][u]);this.gridItemArr=this.gridItemArr.concat(d);break}}}else for(n=0;n<this.viewArr.length;n++)for(l=0;l<this.itemArr.length;l++)if(this.viewArr[n].orgLabel===this.itemArr[l].label&&this.viewArr[n].value===this.itemArr[l].value){this.gridItemArr=this.gridItemArr.concat(this.gridOptions.dataComp.getRowData(l));break}}else for(n=0;n<this.viewArr.length;n++)for(l=0;l<this.gridRowItemArr.length;l++)if(this.viewArr[n].orgLabel===this.gridRowItemArr[l][t]&&this.viewArr[n].value===this.gridRowItemArr[l][e]){for(var c in this.gridRowItemArr[l])this.gridItemArr.push(this.gridRowItemArr[l][c]);break}if(this.itemTable.grid.setData(this.gridItemArr.slice(0)),this.options.allOption){var p=[],g=-1;for(l=0;l<this.itemsetObj.items.length;l++)-1==g&&this.itemsetObj.items[l].ref==this.itemsetObj.label&&(g=l),p.push("");p[-1==g?0:g]=this.defaultAllOptionLabel,this.itemTable.grid.setRowData(0,p,!1)}if(this.gridOptions.sortIndex&&this.gridItemArr.length>0){var m=[];if(this.options.allOption){var f=this.gridOptions.sortIndex.split(" ")[0],b=this.itemTable.grid.getCellInfo(f).options.dataType,y=parseInt(this.gridOptions.sortOrder.split(" ")[0],10);m[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==b?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*y:t<e?-1*y:0)}}this.itemTable.grid.multisort({sortIndex:this.gridOptions.sortIndex,sortOrder:this.gridOptions.sortOrder,sortFuncArr:m})}else{
var v=this.gridItemArr.length>0&&this.itemTable.grid.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;v&&this.itemTable.show(),this.itemTable.grid.notifyDataChanged({keepTop:!0}),v&&this.itemTable.hide()}},u.prototype.setGridViewData=function(){this.itemTable.gridView.setTopRowIndex(0);var t=null;t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),0==this.searchFlag&&(this.orgSearchArr=t.getAllData(),this.searchFlag=!0),this.gridViewOptions.dataComp.sortStatusArr?t.setData(this.orgSearchArr):t.setData(this.gridViewOptions.dataComp.getAllData());var e=this.gridViewOptions.dataComp.filterManager.filterArr;if(e)for(var i=0;i<e.length;i++)t.setColumnFilter({type:e[i].options.type,colIndex:e[i].options.colIndex,key:e[i].options.key,condition:e[i].options.condition});if(this.options.allOption&&"-전체-"!=t.getAllData()[0]){for(var o=[],s=-1,r=0;r<this.itemsetObj.items.length;r++)-1==s&&this.itemsetObj.items[r].ref==this.itemsetObj.label&&(s=t.bodyIdColIndexMap[this.itemsetObj.label]),o.push("");o[-1==s?0:s]=this.defaultAllOptionLabel,t.setRowData(0,o,!1)}if(1==this.options.chooseOption&&"-선택-"!=t.getAllData()[0]){for(o=[],s=-1,r=0;r<this.itemsetObj.items.length;r++)-1==s&&this.itemsetObj.items[r].ref==this.itemsetObj.label&&(s=t.bodyIdColIndexMap[this.itemsetObj.label]),o.push("");o[-1==s?0:s]=this.options.chooseOptionLabel,t.setRowData(0,o,!1)}if(this.dummyGridItemArr.length>0){var a=0;1!=this.options.chooseOption&&1!=this.options.allOption||(a=1);o=[],s=-1;var n=t.bodyIdColIndexMap[this.itemsetObj.value];for(r=0;r<this.itemsetObj.items.length;r++)-1==s&&this.itemsetObj.items[r].ref==this.itemsetObj.label&&(s=t.bodyIdColIndexMap[this.itemsetObj.label]),o.push("");for(i=0;i<this.dummyGridItemArr.length;i++)o[-1==s?0:s]=this.dummyGridItemArr[i].label,o[-1==n?1:n]=this.dummyGridItemArr[i].value,t.setRowData(a,o,!1)}if(!this.options.interactionMode){if(this.viewArr&&0==this.viewArr.length)for(i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled});if(this.gridViewItemArr=[],this.gridViewOptions.dataComp)if(this.viewArr.length!==this.itemArr.length||e){for(i=0;i<this.viewArr.length;i++)for(r=0;r<this.itemArr.length;r++)if(this.viewArr[i].orgLabel===this.itemArr[r].orgLabel&&this.viewArr[i].value===this.itemArr[r].value){for(var l=t.getRowData(r),h=0;h<l.length;h++)this.gridViewItemArr.push(l[h]);break}}else this.gridViewItemArr=this.gridViewItemArr.concat(t.dataArr)}if(t.setData(this.gridViewItemArr.slice(0)),this.itemTable.gridView.setDataList(),this.gridViewOptions.sortIndex&&this.gridViewItemArr.length>0){var d=[];if(this.options.allOption){var u=this.gridViewOptions.sortIndex.split(" ")[0],c=this.itemTable.gridView.getCellInfo(u).options.dataType,p=parseInt(this.gridViewOptions.sortOrder.split(" ")[0],10);d[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==c?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*p:t<e?-1*p:0)}}this.itemTable.gridView._dataList.multisort({sortIndex:this.gridViewOptions.sortIndex,sortOrder:this.gridViewOptions.sortOrder,sortFuncArr:d})}else{var g=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;g&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),g&&this.itemTable.hide()}},u.prototype.setDummyData=function(t,e){this.dummyData={value:t,label:e},this.selectedIndex=-1,this.showEditMode(!1),this.selectedItem={text:e,value:t,orgLabel:e};var i=this.options.escape?this._encode(e):e;this.dom.label.innerHTML=i,this.dom.input.value=e},u.prototype.setStyle=function(t,e){try{if(!this.render)return;WebSquare.style.setStyle(this.render,t,e),"font-size"==t&&(this.dom.label.style[t]=e)}catch(t){r.w.printStackTrace(t)}},u.prototype.changeChooseOption=function(t,e){try{var i=-2
;if(!0===this.options.chooseOption){i=-1;for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value===this.options.chooseOptionValue){i=s;break}i>-1&&this.itemArr.splice(i,1)}this.options.chooseOption=!0,this.options.chooseOptionValue=t,this.options.chooseOptionLabel=e,this.itemArr=[{label:e,value:t,orgLabel:e}].concat(this.itemArr),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr);var a=this.getSelectedIndex();i!==a&&-1!==a||this.setSelectedIndex(0)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},u.prototype.restore=function(t){try{return this.setSelectedIndex(t.selectedIndex),!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype.setItemTableFocus=function(){try{WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._encode=function(t){var e=t;try{var i="<span class='w2autoComplete_keyword'>",o="</span>",s=t.indexOf(i),a=t.indexOf(o,i.length);return e=this.options.useKeywordHighlight&&s>=0&&a>=0&&t.slice(s,s+i.length)===i&&t.slice(a,a+o.length)===o?t.slice(0,s)+i+WebSquare.xml._encode(t.slice(s+i.length,a))+o+WebSquare.xml._encode(t.slice(a+o.length)):WebSquare.xml._encode(t)}catch(t){return r.w.printStackTrace(t,null,this),e}},u.prototype.stopRefreshItemTable=function(t){try{this.refreshStopItemTable=n.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}}},9166:function(t,e,i){"use strict";i.r(e),i.d(e,{balloonTip:function(){return a}});var o=i(1974),s=i(5948),r=i(1),a=function(t,e,i){r.s.call(this,t,e,i)};o.x.extend(a.prototype,r.s.prototype),a.prototype.defaultOptions={pluginType:"uiplugin.balloonTip",pluginName:"balloonTip",editable:!0},a.prototype.initialize=function(t){},a.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2balloonTip'>"),t.push("<table id='"+this.id+"_mytable' class='w2balloonTip_table'>"),t.push("<tr>"),t.push("<td class='w2balloonTip_col_topleft'></td>"),t.push("<td class='w2balloonTip_col_topcenter'></td>"),t.push("<td class='w2balloonTip_col_topright'></td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td class='w2balloonTip_col_centerleft'><div class='w2balloonTip_left'></div></td>"),t.push("<td class='w2balloonTip_col_centercenter'>"),t.push("<div id='"+this.id+"_label' role='tooltip' class='w2balloonTip_label'>12121212</div>"),t.push("</td>"),t.push("<td class='w2balloonTip_col_centerright'><div class='w2balloonTip_right'></div></td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td id='bleft' class='w2balloonTip_col_bottomleft'></td>"),t.push("<td class='w2balloonTip_col_bottomcenter'></td>"),t.push("<td id='bright' class='w2balloonTip_col_bottomright'></td>"),t.push("</tr>"),t.push("</table>"),t.push("</div>"),t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},a.prototype.setAction=function(){try{this.dom.label=document.getElementById(this.id+"_label")}catch(t){s.w.printStackTrace(t,null,this)}},a.prototype.setValue=function(t){try{this.dom.label.innerHTML=t}catch(t){s.w.printStackTrace(t,null,this)}},a.prototype.getValue=function(){try{return this.dom.label.innerHTML}catch(t){s.w.printStackTrace(t,null,this)}}},5131:function(t,e,i){"use strict";i.r(e),i.d(e,{calendar:function(){return h}});var o=i(1974),s=i(5948),r=i(8683),a=i(1454),n=i(9075),l=i(1),h=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.calendar",pluginName:"calendar",userEvents:["ondateselect","onconfirm","oncancel","onchange","onviewchange","onyearselect","onmonthselect"],systemEvents:["onclick","ondblclick"],useConfig:!0,dateFormat:"",delimiter:"",calendarClass:"class1",
monthNames:"1월,2월,3월,4월,5월,6월,7월,8월,9월,10월,11월,12월",yearSuffix:"년",calendarValueType:"yearMonthDate",wmode:!1,holiday:"",holidayRef:"",disabledDate:"",enabledDate:"*",keepFocusSelect:!1,minYear:1978,maxYear:2030,serverSync:!1,useUnlimitedYear:!0,initValue:"",cancleButtonShow:!1,cancelButtonShow:!1,footerDiv:!1,title:"",summary:"",caption:"",focusOnOuterDiv:!1,renderType:"component",pickerType:"selectbox",dynamicHeaderOrder:"month",fixPickerStatus:"default",backlink:"",useYearSelect:!0,useMonthSelect:!0,displayFormat:"",displayFormatFunc:"",visibleRowNum:5,weekStartsOn:0,focusOnStart:!0,displayHrMinSec:!1,skipConfirm:!1,skipConfirmOnly:!1,topLayout:!1,disableBeforeToday:!1,disableAfterToday:!1,disableBeforeAfterDate:!1,visibleHourList:"",visibleMinList:"",visibleSecList:"",useMonthYearFormat:!1,keepFixedDate:!1,useButton:!1,highlightSelectedWeek:!1,displayDayType:"image",showToday:!0,senseReader:!1,chooseOption:!1,visibleWeekNum:6,dayMoveFixed:!1},h.prototype.initialize=function(t){try{if(this.options.cancleButtonShow=this.options.cancleButtonShow||this.options.cancelButtonShow,"yearMonthDateTime"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMMddHHmm":"yearMonthDateHour"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMMddHH":"yearMonthDate"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMMdd":"yearMonth"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMM":"yearMonthDateTimeSec"==this.options.calendarValueType&&(this.options.dateFormat=this.options.dateFormat||"yyyyMMddHHmmSS"),!this.options.displayFormat&&this.options.displayFormatFunc){var e=r.D.getGlobalFunction(this.options.displayFormatFunc,this.scope_id);"function"==typeof e&&(this.options.displayFormat=e.call(this,this.options.calendarValueType))}if(this.options.displayFormat||(this.options.delimiter?this.options.displayFormat="yyyy"+this.options.delimiter+"MM":this.options.displayFormat="yyyy/MM","yearMonthDate"!=this.options.calendarValueType&&"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType||(this.options.delimiter?this.options.displayFormat+=this.options.delimiter+"dd":this.options.displayFormat+="/dd")),this.todayHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id),this.selectedDateHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id,{useUnlimitedYear:this.options.useUnlimitedYear,maxYear:this.options.maxYear}),this.oldYearValue=this.todayHelper.getYear(),this.oldMonthValue=this.todayHelper.getMonth(),"dynamic"==this.options.pickerType){this.pickerSelectedDateHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id);for(var i,o=this.pickerSelectedDateHelper.getYear(),n=[],l=this.options.maxYear-this.options.minYear,h=this.options.minYear,d=Math.ceil(l/12),u=0;u<d;u++){var c=[];i=u==d-1?this.options.maxYear:h+11,c.push(h),c.push(i),n.push(c),o>=h&&o<=i&&(this.pickerSelectedDateHelper.selectedDecadeIndex=u,this.pickerSelectedDateHelper.startDecadeIndex=12*Math.floor(u/12)),h+=12}this.pickerSelectedDateHelper.decadeArr=n}var p,g,m;if(this.holidayXpath(),this.formatter=WebSquare.format.createFormatter("date",this.options.dateFormat,null,null,null,null,this.scope_id,this.id),this.objCellClass={},"yearMonth"==this.options.calendarValueType&&("dynamic"==this.options.pickerType?this.options.calendarClass="classYearMonth_dynamic":this.options.outsideClickEvent?this.options.calendarClass="classYearMonth_outsideClick_"+this.options.calendarClass:this.options.calendarClass="classYearMonth_"+this.options.calendarClass),"year"==this.options.calendarValueType&&("dynamic"==this.options.pickerType||(this.options.calendarClass="classYear_"+this.options.calendarClass)),
"dynamic"==this.options.pickerType&&("year"==this.options.calendarValueType?this.dynamicCalendarStatus="year":"yearMonth"==this.options.calendarValueType?this.dynamicCalendarStatus="month":this.dynamicCalendarStatus="day"),this.minYear=this.options.minYear,this.maxYear=this.options.maxYear,r.D.isMobile()&&(this.options.mobileRenderType?this.options.renderType=this.options.mobileRenderType:this.options.renderType="native"),this.dayIndexArray=[0,1,2,3,4,5,6],this.shiftDay=0-this.options.weekStartsOn,this.shiftDayIndex(this.shiftDay),this.options.visibleHourList)p=this.options.visibleHourList.split(",");else{p=[];for(u=0;u<24;u++)p.push(u+"")}if(this.options.visibleMinList)g=this.options.visibleMinList.split(",");else{g=[];for(u=0;u<60;u++)g.push(u+"")}if(this.options.visibleSecList)m=this.options.visibleSecList.split(",");else{m=[];for(u=0;u<60;u++)m.push(u+"")}if("native"==this.options.renderType){if(this.selectboxYearHTMLstr=[],this.options.useYearSelect){this.selectboxYearHTMLstr.push("<select id='"+this.id+"_selectbox_year' class='w2calendar_selectbox_year_native' title='"+WebSquare.language.getMessage("Calendar_select_year")+"' >");for(var f=this.minYear;f<this.maxYear+1;f++)this.selectboxYearHTMLstr.push("    <option value='"+f+" '>"+f+this.options.yearSuffix+"</option>");this.selectboxYearHTMLstr.push("</select>")}else{var b=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_year",{className:"w2calendar_selectbox_year_native",labelWidthAuto:!1,wmode:this.options.wmode,readOnly:!0,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum});for(f=this.minYear;f<this.maxYear+1;f++)b.addItemArr(f+this.options.yearSuffix,f);if(!1!==this.options.useUnlimitedYear&&b.addItemArr("9999"+this.options.yearSuffix,"9999"),this.options.selectUnlimitedYear){var y=this.options.selectUnlimitedYear.split(",");for(u=0;u<y.length;u++)y[u]<this.options.minYear?b.addItem(y[u],y[u]+this.options.yearSuffix,0):y[u]>this.options.maxYear&&b.addItemArr(y[u]+this.options.yearSuffix,y[u])}this.addControl(b)}if(this.selectboxMonthHTMLstr=[],this.options.useMonthSelect){this.selectboxMonthHTMLstr.push("<select id='"+this.id+"_selectbox_month' class='w2calendar_selectbox_month_native'  title='"+WebSquare.language.getMessage("Calendar_select_month")+"' >");for(var v=this.options.monthNames.split(","),w=0;w<12;w++){var S=w+1,C=v[w]||w+1;this.selectboxMonthHTMLstr.push("   <option value='"+S+" '>"+C+"</option>")}this.selectboxMonthHTMLstr.push("</select>")}else{var x=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_month",{className:"w2calendar_selectbox_month_native",labelWidthAuto:!1,wmode:this.options.wmode,readOnly:!0,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum});for(v=this.options.monthNames.split(","),w=0;w<12;w++){C=v[w]||w+1;x.addItemArr(C,w+1)}this.addControl(x)}this.selectboxHourHTMLstr=[],this.selectboxHourHTMLstr.push("<select id='"+this.id+"_selectbox_hour' class='w2calendar_selectbox_hour_mobile'  title='"+WebSquare.language.getMessage("Calendar_select_hour")+"' onchange='event.fireEvent(util.getComponentById(\""+this.id+'"),"onchange");\'>');for(var _=0;_<p.length;_++)this.selectboxHourHTMLstr.push("    <option value='"+p[_]+" '>"+p[_]+"</option>");this.selectboxHourHTMLstr.push("</select>"),this.selectboxMinuteHTMLstr=[],this.selectboxMinuteHTMLstr.push("<select id='"+this.id+"_selectbox_minute' class='w2calendar_selectbox_minute_mobile' title='"+WebSquare.language.getMessage("Calendar_select_minute")+"' onchange='event.fireEvent(util.getComponentById(\""+this.id+'"),"onchange");\'>');for(var I=0;I<g.length;I++)this.selectboxMinuteHTMLstr.push("  <option value='"+g[I]+" '>"+g[I]+"</option>");this.selectboxMinuteHTMLstr.push("</select>"),this.selectboxSecondHTMLstr=[],
this.selectboxSecondHTMLstr.push("<select id='"+this.id+"_selectbox_second' class='w2calendar_selectbox_second_mobile' title='"+WebSquare.language.getMessage("Calendar_select_second")+"' onchange='event.fireEvent(util.getComponentById(\""+this.id+'"),"onchange");\'>');for(var T=0;T<m.length;T++)this.selectboxSecondHTMLstr.push("  <option value='"+m[T]+" '>"+m[T]+"</option>");this.selectboxSecondHTMLstr.push("</select>")}else{var k="",D="";this.options.useMonthYearFormat?(k="w2calendar_selectbox_year_monthAfter",D="w2calendar_selectbox_month_yearBefore"):(k="w2calendar_selectbox_year",D="w2calendar_selectbox_month");for(b=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_year",{className:k,labelWidthAuto:!1,submenuSize:"auto",wmode:this.options.wmode,title:WebSquare.language.getMessage("Calendar_select_year"),readOnly:!this.options.useYearSelect,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum}),x=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_month",{className:D,labelWidthAuto:!1,submenuSize:"auto",wmode:this.options.wmode,title:WebSquare.language.getMessage("Calendar_select_month"),readOnly:!this.options.useMonthSelect,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum}),f=this.minYear;f<this.maxYear+1;f++)b.addItemArr(f+this.options.yearSuffix,f);if(!1!==this.options.useUnlimitedYear&&b.addItemArr("9999"+this.options.yearSuffix,"9999"),this.options.selectUnlimitedYear)for(y=this.options.selectUnlimitedYear.split(","),u=0;u<y.length;u++)y[u]<this.options.minYear?b.addItem(y[u],y[u]+this.options.yearSuffix,0):y[u]>this.options.maxYear&&b.addItemArr(y[u]+this.options.yearSuffix,y[u]);for(v=this.options.monthNames.split(","),w=0;w<12;w++){C=v[w]||w+1;x.addItemArr(C,w+1)}b.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){this.getParent().gotoYear(this.getValue())}}}],b.options.xmlEvents=[{name:"onviewchange",action:"script",param:{handler:function(t){var e,i=this.getParent(),o=i.getValue();i.gotoYear(this.getValue()),o!=(e=i.getValue())&&a.B.fireEvent(i,"onviewchange",{oldValue:o,newValue:e}),(o=t.oldValue)!=(e=t.newValue)&&a.B.fireEvent(i,"onyearselect",{oldValue:o,newValue:e})}}}],x.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){this.getParent().gotoMonth(this.getValue())}}}];var L=this;if(x.options.xmlEvents=[{name:"onviewchange",action:"script",param:{handler:function(t){var e,i=this.getParent(),o=i.getValue();i.gotoMonth(this.getValue()),o!=(e=i.getValue())&&a.B.fireEvent(i,"onviewchange",{oldValue:o,newValue:e}),"yearMonth"===L.options.calendarValueType&&(L.options.skipConfirm||L.options.skipConfirmOnly)&&a.B.fireEvent(L,"onconfirm"),(o=t.oldValue)!=(e=t.newValue)&&a.B.fireEvent(i,"onmonthselect",{oldValue:o,newValue:e})}}},{name:"onclose",action:"script",param:{handler:function(t){var e=this.getParent(),i=e.getValue();e.gotoMonth(this.getValue()),i==e.getValue()&&"yearMonth"===L.options.calendarValueType&&(L.options.skipConfirm||L.options.skipConfirmOnly)&&a.B.fireEvent(L,"onconfirm")}}}],this.addControl(b),this.addControl(x),"yearMonthDateHour"==this.options.calendarValueType||"yearMonthDateTime"==this.options.calendarValueType||"yearMonthDateTimeSec"==this.options.calendarValueType)if(this.options.displayHrMinSec){var W=function(t,e){try{var i=WebSquare.idCache[e];if(t=parseInt(t,10),isNaN(t))return!1;if(t<0||t>=i.getItemCount())return!!i.options.emptyItem&&(i.selectedIndex=-1,i.dom.label.innerHTML="",i.itemTable&&i.itemTable.setSelectedIndex(0),!0);i.selectedIndex=t;var o=i.itemArr[t].label+"";return o.indexOf("&")>-1&&(o=o.wq_replaceAll("&","&amp;")),i.options.escape&&(o=WebSquare.xml._encode(o)),i.dom.label&&(o=parseInt(o,10),i.dom.label.innerHTML=o),i.itemTable&&i.render.setAttribute("aria-activedescendant",i.itemTable.id+"_"+t),!0}catch(t){s.w.printStackTrace(t,null,i)}},A=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_hour",{className:"w2calendar_selectbox_hour",
submenuSize:"auto",labelWidthAuto:!1,title:WebSquare.language.getMessage("Calendar_select_hour"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank"});for(_=0;_<p.length;_++)A.addItem(p[_],WebSquare.language.getMessage("Calendar_valuetype_hour"));if(A.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){a.B.fireEvent(this.getParent(),"onchange")}}}],A.setSelectedIndexNM=function(t){return W(t,this.uuid)},this.addControl(A),"yearMonthDateTime"==this.options.calendarValueType||"yearMonthDateTimeSec"==this.options.calendarValueType){var E=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_minute",{className:"w2calendar_selectbox_minute",submenuSize:"auto",labelWidthAuto:!1,title:WebSquare.language.getMessage("Calendar_select_minute"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank"});for(I=0;I<g.length;I++)E.addItem(g[I],WebSquare.language.getMessage("Calendar_valuetype_minute"));if(E.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){a.B.fireEvent(this.getParent(),"onchange")}}}],E.setSelectedIndexNM=function(t){return W(t,this.uuid)},this.addControl(E),"yearMonthDateTimeSec"==this.options.calendarValueType){var M=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_second",{className:"w2calendar_selectbox_second",submenuSize:"auto",labelWidthAuto:!1,title:WebSquare.language.getMessage("Calendar_select_second"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank"});for(T=0;T<m.length;T++)M.addItem(m[T],WebSquare.language.getMessage("Calendar_valuetype_second"));M.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){a.B.fireEvent(this.getParent(),"onchange")}}}],M.setSelectedIndexNM=function(t){return W(t,this.uuid)},this.addControl(M)}}}else{for(A=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_hour",{className:"w2calendar_selectbox_hour",submenuSize:"auto",labelWidthAuto:!1,title:WebSquare.language.getMessage("Calendar_select_hour"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank"}),_=0;_<p.length;_++)A.addItemArr(p[_],p[_]);if(A.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){a.B.fireEvent(this.getParent(),"onchange")}}}],this.addControl(A),"yearMonthDateTime"==this.options.calendarValueType||"yearMonthDateTimeSec"==this.options.calendarValueType){for(E=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_minute",{className:"w2calendar_selectbox_minute",submenuSize:"auto",labelWidthAuto:!1,title:WebSquare.language.getMessage("Calendar_select_minute"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum}),I=0;I<g.length;I++)E.addItemArr(g[I],g[I]);if(E.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){a.B.fireEvent(this.getParent(),"onchange")}}}],this.addControl(E),"yearMonthDateTimeSec"==this.options.calendarValueType){for(M=new WebSquare.uiplugin.selectbox(this.id+"_selectbox_second",{className:"w2calendar_selectbox_second",submenuSize:"auto",labelWidthAuto:!1,title:WebSquare.language.getMessage("Calendar_select_second"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum}),T=0;T<m.length;T++)M.addItemArr(m[T],m[T]);M.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){a.B.fireEvent(this.getParent(),"onchange")}}}],this.addControl(M)}}}}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{var t=[],e=""==this.options.title?"":"title='"+this.options.title+"'",i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?this.options.focusOnOuterDiv?"tabIndex='0'":"":"tabIndex='"+this.options.tabIndex+"'"
;if(t.push("<div id='"+this.id+"' name='"+this.id+"' "+i+" class='w2calendar w2calendar_"+this.options.calendarClass+" "+this.options.className+"' role='calendar' "+e+" "+o+">"),!0===this.options.senseReader&&r.D.isMobile()&&t.push("<button id='"+this.id+"_start' name='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2calendar w2calendar_start'>"+WebSquare.language.getMessage("Calendar_start")+"</button>"),t.push("<div class='w2calendar_wrap'>"),"dynamic"==this.options.pickerType?(t.push("<div class='w2calendar_picker_header'>"),t.push("<div id='"+this.id+"_picker_header_last_entity' class='w2calendar_picker_header_last_entity' role='button' tabindex='0' title=''></div>"),t.push("<div id='"+this.id+"_picker_header_dynamic_entity' class='w2calendar_picker_header_dynamic_entity' role='button' tabindex='0' title=''></div>"),t.push("<div id='"+this.id+"_picker_header_next_entity' class='w2calendar_picker_header_next_entity' role='button' tabindex='0' title=''></div>"),t.push("</div>")):(t.push("<div class='w2calendar_header'>"),"native"==this.options.renderType?(t.push("<button id='"+this.id+"_last_year' class='w2calendar_header_last_year'>"+WebSquare.language.getMessage("Calendar_previous_year")+"</button>"),t.push("<button class='w2calendar_header_last_month' >"+WebSquare.language.getMessage("Calendar_previous_month")+"</button>")):(t.push("<div id='"+this.id+"_last_year' name='"+this.id+"_last_year' class='w2calendar_header_last_year' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_previous_year")+"'></div>"),t.push("<div class='w2calendar_header_last_month' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_previous_month")+"'></div>")),"native"==this.options.renderType?(t.push(this.options.useYearSelect?this.selectboxYearHTMLstr.join(""):this.getChild(this.id+"_selectbox_year").toHTML()),t.push(this.options.useMonthSelect?this.selectboxMonthHTMLstr.join(""):this.getChild(this.id+"_selectbox_month").toHTML())):(t.push(this.getChild(this.id+"_selectbox_year").toHTML()),t.push(this.getChild(this.id+"_selectbox_month").toHTML())),"native"==this.options.renderType?(t.push("<button class='w2calendar_header_next_month' >"+WebSquare.language.getMessage("Calendar_next_month")+"</button>"),"year"==this.options.calendarValueType?t.push("<button class='w2calendar_header_next_year_yearType' >"+WebSquare.language.getMessage("Calendar_next_year")+"</button>"):t.push("<button class='w2calendar_header_next_year' >"+WebSquare.language.getMessage("Calendar_next_year")+"</button>")):(t.push("<div class='w2calendar_header_next_month' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_next_month")+"'></div>"),"year"==this.options.calendarValueType?t.push("<div class='w2calendar_header_next_year_yearType' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_next_year")+"'></div>"):t.push("<div class='w2calendar_header_next_year' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_next_year")+"'></div>")),1==r.D.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?t.push("<button id='"+this.id+"_today_btn' class='w2calendar_go_today'>"+WebSquare.language.getMessage("Calendar_today")+"</button>"):t.push("<div class='w2calendar_go_today' role='button' title='"+WebSquare.language.getMessage("Calendar_today")+"' tabindex='0'></div>"),1==this.options.cancleButtonShow&&(t.push("<td class='w2calendar_blank' ></td>"),"native"==this.options.renderType?t.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_cancel' role='button' >"+WebSquare.language.getMessage("Calendar_cancel")+"</a></td>"):t.push("<td><div class='w2calendar_date_cancel' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_cancel")+"' ></div></td>"))),
"yearMonth"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType||this.options.outsideClickEvent||(this.options.skipConfirm&&!this.options.skipConfirmOnly||("year"==this.options.calendarValueType?t.push("<div class='w2calendar_header_btn_ok_yearType' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_ok")+"'></div>"):this.options.useButton?t.push("<button class='w2inputCalendar_header_btn_ok_div' >"+WebSquare.language.getMessage("Calendar_ok")+"</button>"):t.push("<div class='w2calendar_header_btn_ok' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_ok")+"'></div>")),"year"==this.options.calendarValueType?t.push("<div class='w2calendar_header_btn_close_yearType' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_close")+"'></div>"):this.options.useButton?t.push("<button class='w2inputCalendar_header_btn_close_div' >"+WebSquare.language.getMessage("Calendar_close")+"</button>"):t.push("<div class='w2calendar_header_btn_close' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_close")+"'></div>")),t.push("</div>")),"dynamic"==this.options.pickerType){var a="calendar period";t.push("<div id='"+this.id+"_picker_content' class='w2calendar_picker_content' style='display:none;'>"),t.push("<table class='w2calendar_picker_content_table' summary='"+a+"'>"),t.push("<tbody>"),t.push("<tr>"),t.push("<td>");for(var n=0;n<12;n++)t.push("<div id='"+this.id+"_picker_cell_"+n+"' index='"+n+"' role='button' aria-pressed='false' class='w2calendar_picker_cell'>"),t.push("<span style='display: table-cell; vertical-align: middle;'></span>"),t.push("</div>");t.push("</td>"),t.push("</tr>"),t.push("</tbody>"),t.push("</table>"),t.push("</div>")}a=this.options.summary?this.options.summary:WebSquare.language.getMessage("Calendar_summary");var l=this.options.caption?this.options.caption:WebSquare.language.getMessage("Calendar_caption");t.push("<div id='"+this.id+"_content' class='w2calendar_content'>"),t.push("<table class='w2calendar_content_table' summary='"+a+"'>"),t.push("<caption>"+l+"</caption>"),t.push("<thead>"),t.push("<tr>");for(var h=0;h<7;h++){var d=WebSquare.language.getMessage("Calendar_weekdaynames_"+this.dayIndexArray[h]);if("native"==this.options.renderType)if("text"===this.options.displayDayType){var u=WebSquare.language.getMessage("Calendar_weekdaynames_short_"+this.dayIndexArray[h]);t.push("<th class='w2calendar_col_day_text w2calendar_day_text_"+this.dayIndexArray[h]+"' scope='col'>"+u+"</th>")}else t.push("<th class='w2calendar_col_day w2calendar_day"+this.dayIndexArray[h]+"' scope='col'>"+d+"</th>");else if("text"===this.options.displayDayType){u=WebSquare.language.getMessage("Calendar_weekdaynames_short_"+this.dayIndexArray[h]);t.push("<td class='w2calendar_col_day_text'><div class='w2calendar_day w2calendar_day_text_"+this.dayIndexArray[h]+"' title='"+d+"' >"+u+"</div></td>")}else t.push("<td class='w2calendar_col_day'><div class='w2calendar_day w2calendar_day"+this.dayIndexArray[h]+"' title='"+d+"' ></div></td>")}t.push("</tr>"),t.push("</thead>");for(var c=this.options.visibleWeekNum,p=0;p<c;p++){t.push("<tr>");for(var g=0;g<7;g++)t.push("<td id='"+this.id+"_cell_"+p+"_"+g+"' role='button'  aria-pressed='false' ></td>");t.push("</tr>")}return t.push("</table>"),t.push("</div>"),this.options.footerDiv?(t.push("<div class='w2calendar_footer'>"),"yearMonthDate"==this.options.calendarValueType?("native"==this.options.renderType?t.push("<button class='w2calendar_go_today w2calendar_go_today_div'>"+WebSquare.language.getMessage("Calendar_today")+"</button>"):t.push("<div class='w2calendar_go_today w2calendar_go_today_div' role='button' title='"+WebSquare.language.getMessage("Calendar_today")+"' tabindex='0'></div>"),t.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date w2calendar_footer_date_div'></span>"),
1==this.options.cancleButtonShow&&(t.push("<div class='w2calendar_blank w2calendar_blank_div'></div>"),"native"==this.options.renderType?t.push("<a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_cancel w2calendar_date_cancel_div' role='button'>"+WebSquare.language.getMessage("Calendar_cancel")+"</a>"):t.push("<div class='w2calendar_date_cancel w2calendar_date_cancel_div' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_cancel")+"' ></div>"))):"yearMonthDateHour"==this.options.calendarValueType?"native"==this.options.renderType?(t.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile w2calendar_footer_date_mobile_div'></span>"),t.push("<div class='w2calendar_footer_hour_div'>"+this.selectboxHourHTMLstr.join("")+"</div>"),t.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0'>"+WebSquare.language.getMessage("Calendar_ok")+"</a>"),t.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0'>"+WebSquare.language.getMessage("Calendar_cancel")+"</a>")):(t.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date w2calendar_footer_date_div'></span>"),t.push("<div class='w2calendar_footer_hour_div'>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</div>"),this.options.skipConfirm&&!this.options.skipConfirmOnly||t.push("<div class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_ok")+"' ></div>"),t.push("<div class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_cancel")+"' ></div>")):"yearMonthDateTime"==this.options.calendarValueType?"native"==this.options.renderType?(t.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile w2calendar_footer_date_mobile_div'></span>"),t.push("<div class='w2calendar_footer_hour_div'>"+this.selectboxHourHTMLstr.join("")+"</div>"),t.push("<span class='w2calendar_footer_colon'> : </span>"),t.push("<div class='w2calendar_footer_min_div'>"+this.selectboxMinuteHTMLstr.join("")+"</div>"),t.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0'>"+WebSquare.language.getMessage("Calendar_ok")+"</a>"),t.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0'>"+WebSquare.language.getMessage("Calendar_cancel")+"</a>")):(t.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date w2calendar_footer_date_div'></span>"),t.push("<div class='w2calendar_go_today w2calendar_go_today_div' role='button' title='"+WebSquare.language.getMessage("Calendar_today")+"' tabindex='0'></div>"),t.push("<div class='w2calendar_footer_hour_div'>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</div>"),t.push("<span class='w2calendar_footer_colon'> : </span>"),t.push("<div class='w2calendar_footer_min_div'>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</div>"),this.options.skipConfirm&&!this.options.skipConfirmOnly||t.push("<div class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_ok")+"' ></div>"),t.push("<div class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_cancel")+"' ></div>")):"yearMonthDateTimeSec"==this.options.calendarValueType&&("native"==this.options.renderType?(t.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),t.push("<div class='w2calendar_footer_hour_div'>"+this.selectboxHourHTMLstr.join("")+"</div>"),t.push("<span class='w2calendar_footer_colon'> : </span>"),t.push("<div class='w2calendar_footer_min_div'>"+this.selectboxMinuteHTMLstr.join("")+"</div>"),t.push("<span class='w2calendar_footer_colon'> : </span>"),
t.push("<div class='w2calendar_footer_sec_div'>"+this.selectboxSecondHTMLstr.join("")+"</div>"),t.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0'>"+WebSquare.language.getMessage("Calendar_ok")+"</a>"),t.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0'>"+WebSquare.language.getMessage("Calendar_cancel")+"</a>")):(t.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),t.push("<div class='w2calendar_go_today w2calendar_go_today_div' role='button' title='"+WebSquare.language.getMessage("Calendar_today")+"' tabindex='0'></div>"),t.push("<div class='w2calendar_footer_hour_div'>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</div>"),t.push("<span class='w2calendar_footer_colon'> : </span>"),t.push("<div class='w2calendar_footer_min_div'>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</div>"),t.push("<span class='w2calendar_footer_colon'> : </span>"),t.push("<div class='w2calendar_footer_sec_div'>"+this.getChild(this.id+"_selectbox_second").toHTML()+"</div>"),this.options.skipConfirm&&!this.options.skipConfirmOnly||t.push("<div class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_ok")+"' ></div>"),t.push("<div class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_cancel")+"' ></div>"))),t.push("</div>")):(t.push("<table class='w2calendar_footer'><tr>"),"yearMonthDate"==this.options.calendarValueType?(0==r.D.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?t.push("<td><button class='w2calendar_go_today'>"+WebSquare.language.getMessage("Calendar_today")+"</button></td>"):t.push("<td><div class='w2calendar_go_today' role='button' title='"+WebSquare.language.getMessage("Calendar_today")+"' tabindex='0'></div></td>")),t.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date'></div></td>"),1==this.options.cancleButtonShow&&0==r.D.getBoolean(this.options.topLayout)&&(t.push("<td class='w2calendar_blank' ></td>"),"native"==this.options.renderType?t.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_cancel' role='button' >"+WebSquare.language.getMessage("Calendar_cancel")+"</a></td>"):t.push("<td><div class='w2calendar_date_cancel' role='button' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_cancel")+"' ></div></td>"))):"yearMonthDateHour"==this.options.calendarValueType?(0==r.D.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?t.push("<td><button class='w2calendar_go_today'>"+WebSquare.language.getMessage("Calendar_today")+"</button></td>"):t.push("<td><div class='w2calendar_go_today' role='button' title='"+WebSquare.language.getMessage("Calendar_today")+"' tabindex='0'></div></td>")),"native"==this.options.renderType?(t.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile'></div></td>"),t.push("<td>"+this.selectboxHourHTMLstr.join("")+"</td>")):(t.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date'></div></td>"),t.push("<td>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</td>")),this.options.skipConfirm&&!this.options.skipConfirmOnly||t.push("<td><div class='w2calendar_time_confirm' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_ok")+"' ></div></td>"),
t.push("<td><div class='w2calendar_time_cancel' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_cancel")+"' ></div></td>")):"yearMonthDateTime"==this.options.calendarValueType?(0==r.D.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?t.push("<td><button class='w2calendar_go_today'>"+WebSquare.language.getMessage("Calendar_today")+"</button></td>"):t.push("<td><div class='w2calendar_go_today' role='button' title='"+WebSquare.language.getMessage("Calendar_today")+"' tabindex='0'></div></td>")),"native"==this.options.renderType?(t.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile'></div></td>"),t.push("<td>"+this.selectboxHourHTMLstr.join("")+"</td>"),t.push("<td> : </td>"),t.push("<td>"+this.selectboxMinuteHTMLstr.join("")+"</td>")):(t.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date'></div></td>"),t.push("<td>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</td>"),t.push("<td> : </td>"),t.push("<td>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</td>")),this.options.skipConfirm&&!this.options.skipConfirmOnly||t.push("<td><div class='w2calendar_time_confirm' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_ok")+"' ></div></td>"),t.push("<td><div class='w2calendar_time_cancel' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_cancel")+"' ></div></td>")):"yearMonthDateTimeSec"==this.options.calendarValueType&&("native"==this.options.renderType?(t.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),t.push("<td>"+this.selectboxHourHTMLstr.join("")+"</td>"),t.push("<td> : </td>"),t.push("<td>"+this.selectboxMinuteHTMLstr.join("")+"</td>"),t.push("<td> : </td>"),t.push("<td>"+this.selectboxSecondHTMLstr.join("")+"</td>")):(t.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),t.push("<td><div class='w2calendar_go_today' role='button' title='"+WebSquare.language.getMessage("Calendar_today")+"' ></div></td>"),t.push("<td>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</td>"),t.push("<td> : </td>"),t.push("<td>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</td>"),t.push("<td> : </td>"),t.push("<td>"+this.getChild(this.id+"_selectbox_second").toHTML()+"</td>")),this.options.skipConfirm&&!this.options.skipConfirmOnly||t.push("<td><div class='w2calendar_time_confirm' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_ok")+"' ></div></td>"),t.push("<td><div class='w2calendar_time_cancel' tabindex='0' title='"+WebSquare.language.getMessage("Calendar_cancel")+"' ></div></td>")),t.push("</tr></table>")),t.push("</div></div>"),t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setPreAction=function(){try{if(this.render.style.width="",this.render.style.height="",this.dom.content=document.getElementById(this.id+"_content"),this.dom.currentDate=document.getElementById(this.id+"_currentDate"),this.dom.selectboxYear=document.getElementById(this.id+"_selectbox_year"),this.dom.selectboxMonth=document.getElementById(this.id+"_selectbox_month"),this.dom.selectboxHour=document.getElementById(this.id+"_selectbox_hour"),this.dom.selectboxMinute=document.getElementById(this.id+"_selectbox_minute"),this.dom.selectboxSecond=document.getElementById(this.id+"_selectbox_second"),WebSquare.style.adjustZIndex(this.uuid,this.uuid,"calendar"),"dynamic"==this.options.pickerType){this.dom.pickerLastEntity=document.getElementById(this.id+"_picker_header_last_entity"),this.dom.pickerDynamicEntity=document.getElementById(this.id+"_picker_header_dynamic_entity"),this.dom.pickerNextEntity=document.getElementById(this.id+"_picker_header_next_entity"),this.dom.pickerContent=document.getElementById(this.id+"_picker_content"),this.dom.pickerCells=[];for(var t=0;t<12;t++)this.dom.pickerCells.push(document.getElementById(this.id+"_picker_cell_"+t))
;"year"===this.options.calendarValueType?(WebSquare.style.setStyle(this.dom.content,"display","none"),WebSquare.style.setStyle(this.dom.pickerContent,"display","block"),this._drawDynamicTable("year"),this._setDynamicHeaderHTML("year")):"yearMonth"===this.options.calendarValueType?(WebSquare.style.setStyle(this.dom.content,"display","none"),WebSquare.style.setStyle(this.dom.pickerContent,"display","block"),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("month")):this._setDynamicHeaderHTML("month")}if(!1===this.options.showToday){var e;if(r.D.isIE(8)||r.D.isIE(7)||r.D.isIE(6)){var i;i="native"==this.options.renderType?this.render.getElementsByTagName("button"):this.render.getElementsByTagName("div");for(t=0;t<i.length;t++)if("w2calendar_go_today"===i[t].className){e=i[t];break}}else e=this.render.getElementsByClassName("w2calendar_go_today")[0];e.style.width="0px"}else if("yearMonthDateTime"==this.options.calendarValueType){var o=this.getElementById(this.id+"_currentDate");o&&(o.style.display="none")}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{this.refresh(),r.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),"dynamic"!=this.options.pickerType&&(this.event.addListener2(this.dom.selectboxYear,"onchange",this.event.bindAsEventListener(this,this.selectboxYearEvent)),this.event.addListener2(this.dom.selectboxMonth,"onchange",this.event.bindAsEventListener(this,this.selectboxMonthEvent)),this.event.addListener2(this.dom.selectboxYear,"onmousewheel",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.event.addListener2(this.dom.selectboxMonth,"onmousewheel",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.dom.selectboxHour&&this.event.addListener2(this.dom.selectboxHour,"onmousewheel",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.dom.selectboxMinute&&this.event.addListener2(this.dom.selectboxMinute,"onmousewheel",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.dom.selectboxSecond&&this.event.addListener2(this.dom.selectboxSecond,"onmousewheel",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)})))),"native"==this.options.renderType&&(this.dom.selectboxYear&&this.event.addListener2(this.dom.selectboxYear,"onchange",this.event.bindAsEventListener(this,this.handleYearChange)),this.dom.selectboxMonth&&this.event.addListener2(this.dom.selectboxMonth,"onchange",this.event.bindAsEventListener(this,this.handleMonthChange))),this.options.holidayRef&&this.refreshItemset()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.selectboxYearEvent=function(t){this.gotoYear(t.srcElement?t.srcElement.value:t.originalTarget.value)},h.prototype.selectboxMonthEvent=function(t){this.gotoMonth(t.srcElement?t.srcElement.value:t.originalTarget.value)},h.prototype.refresh=function(){try{if(this.holidayXpath(),this.updateCalendar(),this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();e&&(this.selectedDateHelper.setDateAllByString(e),this.setSelectedDay(this.selectedDateHelper.getDate()),
this.dom.currentDate&&(this.dom.currentDate.innerHTML=this.selectedDateHelper.getFormatDateAll(this.options.displayFormat)),t!=this.getValue()&&a.B.fireEvent(this,"onchange"))}if("yearMonth"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType&&(this.options.keepFixedDate?this.dom.currentDate.innerHTML=this.todayHelper.getFormatDateAll(this.options.displayFormat):this.dom.currentDate.innerHTML=this.selectedDateHelper.getFormatDateAll(this.options.displayFormat),!r.D.isMobile()&&"none"!=this.getStyle("display")))for(var i=0;i<this.options.visibleWeekNum;i++)for(var o=0;o<7;o++){var n=this.getElementById(this.id+"_cell_"+i+"_"+o);if(n){var l=n;if("native"!=this.options.renderType||r.D.isMobile()||null==(l=n.getElementsByTagName("button")[0])&&(l=n),this.__hasClass(n,"w2calendar_selected")){if("native"==this.options.renderType){if(0==this.options.keepFocusSelect)try{this.options.focusOnStart&&n.firstChild.focus()}catch(t){}}else try{n.setAttribute("tabIndex","0"),this.options.focusOnStart&&n.focus()}catch(t){}l.setAttribute("title",WebSquare.language.getMessage("Calendar_select_title"))}else n.setAttribute("tabIndex","-1"),l.removeAttribute("title")}}this.broadcast({linkedDataList:["refresh"]})}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.updateCalendar=function(){try{var t=this.selectedDateHelper.getYear(),e=this.selectedDateHelper.getMonth(),i=this.selectedDateHelper.getDate(),o=this.selectedDateHelper.getHour(),a=this.selectedDateHelper.getMinute(),n=this.selectedDateHelper.getSecond(),l=this.todayHelper.getYear(),h=this.todayHelper.getMonth(),d=this.todayHelper.getDate(),u=!1;if(t===l&&e===h&&(u=!0),"dynamic"!==this.options.pickerType)if("native"==this.options.renderType){if(this.options.useYearSelect)for(var c=0;c<this.dom.selectboxYear.options.length;c++)this.dom.selectboxYear.options[c].value==t&&(this.dom.selectboxYear.options[c].selected=!0);else this.getChild(this.id+"_selectbox_year").setValue(t);if(this.options.useMonthSelect)for(c=0;c<this.dom.selectboxMonth.options.length;c++)this.dom.selectboxMonth.options[c].value==e&&(this.dom.selectboxMonth.options[c].selected=!0);else this.getChild(this.id+"_selectbox_month").setValue(e)}else this.getChild(this.id+"_selectbox_year").setValue(t),this.getChild(this.id+"_selectbox_month").setValue(e),"yearMonthDateHour"==this.options.calendarValueType&&this.options.serverSync?this.getChild(this.id+"_selectbox_hour").setValue(o):"yearMonthDateTime"==this.options.calendarValueType&&this.options.serverSync?(this.getChild(this.id+"_selectbox_hour").setValue(o),this.getChild(this.id+"_selectbox_minute").setValue(a)):"yearMonthDateTimeSec"==this.options.calendarValueType&&this.options.serverSync&&(this.getChild(this.id+"_selectbox_hour").setValue(o),this.getChild(this.id+"_selectbox_minute").setValue(a),this.getChild(this.id+"_selectbox_second").setValue(n));var p=this.selectedDateHelper.getMonthCount(),g=this.selectedDateHelper.getFirstDay();(g+=this.shiftDay)<=0&&(g+=7);var m=this.options.visibleWeekNum,f=0,b=new WebSquare.uiplugin.dateHelper;b.setDateAllByString(this.selectedDateHelper.getDateAll()),b.setLastMonth();var y=b.getMonthCount(),v=1==e?t-1:t,w=1==e?12:e-1,S=12==e?t+1:t,C=12==e?1:e+1,x=new WebSquare.uiplugin.dateHelper;x.setDateAllByString(this.selectedDateHelper.getDateAll()),x.setNextMonth();var _=x.getMonthCount(),I=this.options.disableAfterDate,T=this.options.disableBeforeDate,k=this.options.disabledDate;if(this.options.ioFormat&&this.options.ioFormat.length>=8&&"yyyyMMdd"!==this.options.ioFormat){var D=this.options.ioFormat;if(I&&(I=WebSquare.text.unformatDate(D.substr(0,8),I)),T&&(T=WebSquare.text.unformatDate(D.substr(0,8),T)),k){var L=k.split(" ");for(c=0;c<L.length;c++)L[c]=WebSquare.text.unformatDate(D.substr(0,8),L[c]);k=L.join(" ")}}for(var W=0;W<m;W++)for(var A=0;A<7;A++){var E=++f-g,M=(g+E-1)%7,q="",R=this.getElementById(this.id+"_cell_"+W+"_"+A);if(R){if(T){
if(8==T.length)var N=parseInt(T.substr(0,4),10)||0,F=parseInt(T.substr(4,2),10)||0,O=parseInt(T.substr(6,2),10)||0;var B=N>this.selectedDateHelper.getYear()||N==this.selectedDateHelper.getYear()&&F>this.selectedDateHelper.getMonth()||N==this.selectedDateHelper.getYear()&&F==this.selectedDateHelper.getMonth()&&O>E}else B=this.options.disableBeforeToday&&(this.todayHelper.getYear()>this.selectedDateHelper.getYear()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()>this.selectedDateHelper.getMonth()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()==this.selectedDateHelper.getMonth()&&this.todayHelper.getDate()>E);if(I){if(8==I.length)N=parseInt(I.substr(0,4),10)||0,F=parseInt(I.substr(4,2),10)||0,O=parseInt(I.substr(6,2),10)||0;var V=N<this.selectedDateHelper.getYear()||N==this.selectedDateHelper.getYear()&&F<this.selectedDateHelper.getMonth()||N==this.selectedDateHelper.getYear()&&F==this.selectedDateHelper.getMonth()&&O<E}else V=this.options.disableAfterToday&&(this.todayHelper.getYear()<this.selectedDateHelper.getYear()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()<this.selectedDateHelper.getMonth()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()==this.selectedDateHelper.getMonth()&&this.todayHelper.getDate()<E);if(E<1)q=y+E,R.innerHTML=q,B||V?(R.className="w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_lastmonth w2calendar_date_disable",R.setAttribute("aria-hidden",!1)):(R.className="w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_lastmonth",R.setAttribute("aria-hidden",!0)),R.setAttribute("index",q),R.setAttribute("title",WebSquare.language.getMessage("Calendar_tooltip",v,w<10?"0"+w:w,q)),"native"!=this.options.renderType&&R.setAttribute("tabindex","-1");else if(E>p){if((q=E-p)>_&&(q-=_,p+=_,x.setNextMonth(),_=x.getMonthCount()),R.innerHTML=q,V||B?(R.className="w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_nextmonth w2calendar_date_disable",R.setAttribute("aria-hidden",!1)):(R.className="w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_nextmonth",R.setAttribute("aria-hidden",!0)),R.setAttribute("index",q),R.setAttribute("title",WebSquare.language.getMessage("Calendar_tooltip",S,C<10?"0"+C:C,q)),"native"!=this.options.renderType&&R.setAttribute("tabindex","-1"),this.options.highlightSelectedWeek&&6===A&&E-A<=i&&i<=E)for(var H=0;H<7;H++){var P=this.getElementById(this.id+"_cell_"+W+"_"+H);this.addClass(P,"w2calendar_selected_week")}}else{var j,z;q=E;var G=t+""+(z=e<10?"0"+e:e)+(j=E<10?"0"+q:q),U="*"+z+j;if(i===E?(-1!==this.options.holiday.indexOf(G)?R.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+E+" w2calendar_holiday w2calendar_selected "+(this.objCellClass[G]||""):-1!==k.indexOf(G)&&-1===this.options.enabledDate.indexOf(G)?R.className="w2calendar_col_date w2calendar_date_"+E+" w2calendar_date_disable":R.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+E+" w2calendar_day_"+this.dayIndexArray[M]+" w2calendar_selected "+(this.objCellClass[G]||""),R.setAttribute("aria-pressed","true"),"native"!==this.options.renderType&&R.setAttribute("tabindex","0")):(-1!==this.options.holiday.indexOf(G)||-1!==this.options.holiday.indexOf(U)?R.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+E+" w2calendar_holiday "+(this.objCellClass[G]||""):-1===k.indexOf(G)&&-1===k.indexOf("*")||-1!==this.options.enabledDate.indexOf(G)?R.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+E+" w2calendar_day_"+this.dayIndexArray[M]+" "+(this.objCellClass[G]||""):R.className="w2calendar_col_date w2calendar_date_"+E+" w2calendar_date_disable","native"!=this.options.renderType&&R.setAttribute("tabindex","-1")),u&&d===E&&(R.className+=" w2calendar_today"),
(B||V)&&(R.className="w2calendar_col_date w2calendar_date_"+E+" w2calendar_date_disable"),"native"!=this.options.renderType||r.D.isMobile()?R.innerHTML=q:R.innerHTML="<button>"+q+"</button>",this.options.highlightSelectedWeek&&6===A&&E-A<=i&&i<=E)for(H=0;H<7;H++){P=this.getElementById(this.id+"_cell_"+W+"_"+H);this.addClass(P,"w2calendar_selected_week")}R.setAttribute("title",""),R.setAttribute("index",E)}}}"dynamic"===this.options.pickerType&&("year"===this.options.calendarValueType?(this._setDynamicHeaderHTML("year"),this._drawDynamicTable("year")):this._setDynamicHeaderHTML("month")),6!==this.options.visibleWeekNum&&this.setSize(null,this.dom.content.parentNode.offsetHeight)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.holidayXpath=function(){try{if(""!=this.options.holidayRef)if(this.options.holidayRef.match("data:")){var t=this.options.holidayRef.replace(/^data:/,"").split("."),e=t[0],i=this.modelControl.getDataComp(e,{type:"aliasDataCollection"});if(i){var o="";i.getRowCount()>0&&(o=i.getColData(t[1]).join(" ").replace(/[^0-9*\s*]/g,"")),this.options.holiday=o,WebSquare.DataCollection.api.addRelation(this.id,i.id)}}else for(var r=WebSquare.ModelUtil.findInstanceNodes(this.options.holidayRef,null,this.scope_id),a=0;a<r.length;a++){var n=WebSquare.xml.serialize(r[a]).replace(/[^0-9*\s*]/g,"");-1==this.options.holiday.indexOf(n)&&(this.options.holiday=this.options.holiday+" "+n)}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.gotoCalendar=function(t){try{if(r.D.isNull(t))return;t=t.toString();var e=this.getValue();this.selectedDateHelper.setDateAllByString(t);var i=this.selectedDateHelper.getYear(),o=!1;if(this.options.selectUnlimitedYear)for(var n=this.options.selectUnlimitedYear.split(","),l=0;l<n.length;l++)n[l]==i&&(o=!0);if(i<this.minYear&&!o&&this._gotoYear(this.minYear,!1),"native"==this.options.renderType?i>this.maxYear&&this._gotoYear(this.maxYear,!1):i>this.maxYear&&!o&&(this.options.useUnlimitedYear&&"9999"==i?this._gotoYear(i,!1):this._gotoYear(this.maxYear,!1)),"native"==this.options.renderType&&e.substring(0,6)==this.getValue().substring(0,6)?(this.setSelectedDay(this.selectedDateHelper.getDate()),this.dom.currentDate&&(this.dom.currentDate.innerHTML=this.selectedDateHelper.getFormatDateAll(this.options.displayFormat))):this.refresh(),this.getValue()!=e&&a.B.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]}),"dynamic"==this.options.pickerType){switch("day"!==this.dynamicCalendarStatus&&"month"!==this.dynamicCalendarStatus&&"year"!==this.dynamicCalendarStatus&&"decade"!==this.dynamicCalendarStatus&&(WebSquare.style.setStyle(this.dom.content,"display","block"),WebSquare.style.setStyle(this.dom.pickerContent,"display","none"),this.dynamicCalendarStatus="day"),this.dynamicCalendarStatus){case"month":this.setSelectedDay(this.selectedDateHelper.getMonth()-1)}this.pickerSelectedDateHelper.setDateAllByString(t),this._refreshDynamicSelectedDecateIndex(),"year"===this.options.calendarValueType?(this._setDynamicHeaderHTML("year"),this._drawDynamicTable("year")):this._setDynamicHeaderHTML("month")}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.gotoToday=function(){try{var t=this.todayHelper.getYear(),e=this.todayHelper.getMonth(),i=this.todayHelper.getDate();this.gotoCalendar(this.getDateString(t,e,i)),this._pickerStatusRefresh()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.gotoNextYear=function(){try{var t=this.getValue();this.selectedDateHelper.setNextYear(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setNextYear(),this.refresh(),this.getValue()!=t&&a.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.gotoNextMonth=function(){try{var t=this.getValue();this.selectedDateHelper.setNextMonth(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setNextMonth(),this.refresh(),this.getValue()!=t&&a.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},
h.prototype.gotoLastYear=function(){try{var t=this.getValue();this.selectedDateHelper.setLastYear(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setLastYear(),this.refresh(),this.getValue()!=t&&a.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.gotoLastMonth=function(){try{var t=this.getValue();this.selectedDateHelper.setLastMonth(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setLastMonth(),this.refresh(),this.getValue()!=t&&a.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.gotoYear=function(t){try{this._gotoYear(t,!0)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype._gotoYear=function(t,e){try{e=void 0===e||e;var i=this.getValue();this.selectedDateHelper.setYear(t),this.selectedDateHelper._checkValidDate(),"dynamic"==this.options.pickerType&&(this.pickerSelectedDateHelper.setYear(t),this.pickerSelectedDateHelper._checkValidDate()),this.refresh(),this.getValue()!=i&&e&&a.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.gotoMonth=function(t){try{var e=this.getValue();this.selectedDateHelper.setMonth(t),this.selectedDateHelper._checkValidDate(),"dynamic"==this.options.pickerType&&(this.pickerSelectedDateHelper.setMonth(t),this.pickerSelectedDateHelper._checkValidDate()),this.refresh(),this.getValue()!=e&&a.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.gotoTime=function(t,e,i){try{if(this.options.visibleHourList||(t=parseInt(t,10)),this.options.visibleMinList||(e=parseInt(e,10)),this.options.visibleSecList||(i=parseInt(i,10)),"native"==this.options.renderType)if("yearMonthDateHour"==this.options.calendarValueType){var o=this.dom.selectboxHour.value;this.dom.selectboxHour.value=parseInt(t,10)+" ",this.dom.selectboxHour.value!=o&&a.B.fireEvent(this,"onchange")}else if("yearMonthDateTime"==this.options.calendarValueType){o=this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value;this.dom.selectboxHour.value=parseInt(t,10)+" ",this.dom.selectboxMinute.value=parseInt(e,10)+" ",this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value!=o&&a.B.fireEvent(this,"onchange")}else"yearMonthDateTimeSec"==this.options.calendarValueType&&(o=this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value+"_"+this.dom.selectboxSecond.value,this.dom.selectboxHour.value=parseInt(t,10)+" ",this.dom.selectboxMinute.value=parseInt(e,10)+" ",this.dom.selectboxSecond.value=parseInt(i,10)+" ",this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value+"_"+this.dom.selectboxSecond.value!=o&&a.B.fireEvent(this,"onchange"));else{var r=this.getChild(this.id+"_selectbox_hour"),n=this.getChild(this.id+"_selectbox_minute"),l=this.getChild(this.id+"_selectbox_second");o=null;"yearMonthDateHour"==this.options.calendarValueType?(o=r.getValue(),r.setValue(t),r.getValue()!=o&&a.B.fireEvent(this,"onchange")):"yearMonthDateTime"==this.options.calendarValueType?(o=r.getValue()+"_"+n.getValue(),r.setValue(t),n.setValue(e),r.getValue()+"_"+n.getValue()!=o&&a.B.fireEvent(this,"onchange")):"yearMonthDateTimeSec"==this.options.calendarValueType&&(o=r.getValue()+"_"+n.getValue()+"_"+l.getValue(),r.setValue(t),n.setValue(e),l.setValue(i),r.getValue()+"_"+n.getValue()+"_"+l.getValue()!=o&&a.B.fireEvent(this,"onchange"))}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getValue=function(){try{var t="";return"yearMonthDate"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType||"year"==this.options.calendarValueType?t=this.getDate():"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType||(t=this.getDate()+""+this.getTime()),t}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getDate=function(){try{var t=""
;if("yearMonthDate"==this.options.calendarValueType)t=this.selectedDateHelper.getDateAll();else if("yearMonth"==this.options.calendarValueType){var e=this.selectedDateHelper.getYear(),i=this.selectedDateHelper.getMonth();parseInt(i)<10&&(i="0"+i),t=e+""+i}else if("year"==this.options.calendarValueType){t=(e=this.selectedDateHelper.getYear())+""}else"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType||(t=this.selectedDateHelper.getDateAll());return t}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getTime=function(){try{var t="";if("yearMonthDateHour"==this.options.calendarValueType){if("native"==this.options.renderType)var e=this.dom.selectboxHour.value.wq_trim();else e=this.getChild(this.id+"_selectbox_hour").getValue();parseInt(e,10)<10&&e.length<2&&(e="0"+e),t=e+""}else if("yearMonthDateTime"==this.options.calendarValueType){if("native"==this.options.renderType){e=this.dom.selectboxHour.value.wq_trim();var i=this.dom.selectboxMinute.value.wq_trim()}else e=this.getChild(this.id+"_selectbox_hour").getValue(),i=this.getChild(this.id+"_selectbox_minute").getValue();parseInt(e,10)<10&&e.length<2&&(e="0"+e),parseInt(i,10)<10&&i.length<2&&(i="0"+i),t=e+""+i}else if("yearMonthDateTimeSec"==this.options.calendarValueType){if("native"==this.options.renderType){e=this.dom.selectboxHour.value.wq_trim(),i=this.dom.selectboxMinute.value.wq_trim();var o=this.dom.selectboxSecond.value.wq_trim()}else e=this.getChild(this.id+"_selectbox_hour").getValue(),i=this.getChild(this.id+"_selectbox_minute").getValue(),o=this.getChild(this.id+"_selectbox_second").getValue();parseInt(e,10)<10&&e.length<2&&(e="0"+e),parseInt(i,10)<10&&i.length<2&&(i="0"+i),parseInt(o,10)<10&&o.length<2&&(o="0"+o),t=e+""+i+o}return t}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getDateFormat=function(){try{return this.options.dateFormat}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getFormattedValue=function(){try{var t=this.getValue();if("yearMonthDate"==this.options.calendarValueType)if(""!=(n=this.getDateFormat()||"")){var e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6);t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)}else t=this.formatter.format(t);else if("yearMonth"==this.options.calendarValueType){if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4);t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)}else t=this.formatter.format(t)}else if("yearMonthDateHour"==this.options.calendarValueType){if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6,8);var r=t.substring(8,10);t=(t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)).replace(/HH/gi,r)}else t=this.formatter.format(t)}else if("yearMonthDateTime"==this.options.calendarValueType){if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6,8),r=t.substring(8,10);var a=t.substring(10);t=(t=(t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)).replace(/HH/gi,r)).replace(/mm/g,a)}else t=this.formatter.format(t)}else if("yearMonthDateTimeSec"==this.options.calendarValueType){var n;if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6,8),r=t.substring(8,10),a=t.substring(10,12);var l=t.substring(12);t=(t=(t=(t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)).replace(/HH/gi,r)).replace(/mm/g,a)).replace(/SS/gi,l)}else t=this.formatter.format(t)}return t}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getSelectedDay=function(){try{return"yearMonth"==this.options.calendarValueType?"":this.selectedDateHelper.getDayStr(this.selectedDateHelper.getDay())}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setDateFormat=function(t){try{if("yearMonthDate"==this.options.calendarValueType){
if(t.indexOf("HH")>0||t.indexOf("mm")>0||t.indexOf("SS")>0)return void n.k.printLog(this.id+"의 calendarValueType옵션이 'yearMonthDate'이므로 setDateFormat API의 인자로 사용할 수 있는 문자열은 yyyy, MM, dd입니다.")}else if("yearMonth"==this.options.calendarValueType){if(t.indexOf("dd")>0||t.indexOf("HH")>0||t.indexOf("mm")>0||t.indexOf("SS")>0)return void n.k.printLog(this.id+"의 calendarValueType옵션이 'yearMonth'이므로 setDateFormat API의 인자로 사용할 수 있는 문자열은 yyyy, MM입니다.")}else if("yearMonthDateHour"==this.options.calendarValueType){if(t.indexOf("mm")>0||t.indexOf("SS")>0)return void n.k.printLog(this.id+"의 calendarValueType옵션이 'yearMonthDateHour'이므로 setDateFormat API의 인자로 사용할 수 있는 문자열은 yyyy, MM, dd, HH입니다.")}else if("yearMonthDateTime"==this.options.calendarValueType){if(t.indexOf("SS")>0)return void n.k.printLog(this.id+"의 calendarValueType옵션이 'yearMonthDateTime'이므로 setDateFormat API의 인자로 사용할 수 있는 문자열은 yyyy, MM, dd, HH, mm입니다.")}else this.options.calendarValueType;this.options.dateFormat=t,this.formatter.setMasking(t)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setSkin=function(t){try{"class1"!=t&&"class2"!=t&&"class3"!=t&&"class4"!=t&&"class5"!=t||(this.changeClass(this.render,"w2calendar_"+this.options.calendarClass,"w2calendar_"+t),this.options.calendarClass=t)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setInitValue=function(t){try{if(""===this.options.initValue?this.gotoToday():this.gotoCalendar(this.options.initValue),t.fireEvent){var e=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());a.B.fireEvent(this,"ondateselect",this.getFormattedValue(),e)}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.updateYearSelect=function(t,e){try{var i=this.getChild(this.id+"_selectbox_year"),o=i.getValue();t&&(this.options.minYear=t,this.minYear=t),e&&(this.options.maxYear=e,this.maxYear=e),i.removeAll(),i.itemTable=null;for(var r=this.options.minYear;r<this.options.maxYear+1;r++)i.addItemArr(r+this.options.yearSuffix,r);if(!1!==this.options.useUnlimitedYear&&i.addItemArr("9999"+this.options.yearSuffix,"9999"),this.options.selectUnlimitedYear)for(var a=this.options.selectUnlimitedYear.split(","),n=0;n<a.length;n++)a[n]<this.options.minYear?i.addItem(a[n],a[n]+this.options.yearSuffix,0):a[n]>this.options.maxYear&&i.addItemArr(a[n]+this.options.yearSuffix,a[n]);if(o<t||o>e){o<t?(i.setValue(t),this.gotoYear(t)):o>e&&(i.setValue(e),this.gotoYear(e));var l=this.getFormattedValue();l=this.parentControl.validator.validateString(l),l=this.parentControl.sub_validator.validateString(l),""!=this.parentControl.getValue()&&this.parentControl.setValue(l),this.gotoCalendar(l),this.selectedDateHelper.setDateAll(l.substring(0,4),l.substring(4,6),l.substring(6,8),l.substring(8,10),l.substring(10,12),l.substring(12,14))}else i.setValue(o)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setDisabled=function(t){try{t=r.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),this.render.disabled=t,"native"===this.options.renderType?"yearMonthDate"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType?t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled")):"yearMonthDateHour"==this.options.calendarValueType?t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled"),this.dom.selectboxHour.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"),this.dom.selectboxHour.removeAttribute("disabled")):"yearMonthDateTime"==this.options.calendarValueType?t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled"),this.dom.selectboxHour.setAttribute("disabled","disabled"),
this.dom.selectboxMinute.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"),this.dom.selectboxHour.removeAttribute("disabled"),this.dom.selectboxMinute.removeAttribute("disabled")):"yearMonthDateTimeSec"==this.options.calendarValueType&&(t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled"),this.dom.selectboxHour.setAttribute("disabled","disabled"),this.dom.selectboxMinute.setAttribute("disabled","disabled"),this.dom.selectboxSecond.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"),this.dom.selectboxHour.removeAttribute("disabled"),this.dom.selectboxMinute.removeAttribute("disabled"),this.dom.selectboxSecond.removeAttribute("disabled"))):"yearMonthDate"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType?(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t)):"yearMonthDateHour"==this.options.calendarValueType?(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t),this.getChild(this.id+"_selectbox_hour").setDisabled(t)):"yearMonthDateTime"==this.options.calendarValueType?(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t),this.getChild(this.id+"_selectbox_hour").setDisabled(t),this.getChild(this.id+"_selectbox_minute").setDisabled(t)):"yearMonthDateTimeSec"==this.options.calendarValueType&&(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t),this.getChild(this.id+"_selectbox_hour").setDisabled(t),this.getChild(this.id+"_selectbox_minute").setDisabled(t),this.getChild(this.id+"_selectbox_second").setDisabled(t))}catch(t){s.w.printStackTrace(t)}return t},h.prototype.handleFocusEvent=function(t){try{if((t.srcElement?t.srcElement:t.originalTarget)==this.render){if("yearMonth"==this.options.calendarValueType){var e=this.getElementById(this.id+"_selectbox_year");return void(e&&e.focus())}var i,o,r;for(i=0;i<this.options.visibleWeekNum;i++)for(o=0;o<7;o++)if(r=this.getElementById(this.id+"_cell_"+i+"_"+o),this.__hasClass(r,"w2calendar_selected")){if("native"==this.options.renderType){if(0==this.options.keepFocusSelect)try{r.firstChild.focus()}catch(t){}}else try{r.focus()}catch(t){}return}}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(13!=e&&37!=e&&38!=e&&39!=e&&40!=e)return;if(13==e)return void this.handleClickEvent(t);if("native"==this.options.renderType)return;for(var i,o=this.event.getTargetIterator(t,this.render),r=!1;o.next();)if(1==(i=o.getElement()).nodeType&&"td"==i.nodeName.toLowerCase()&&i.getAttribute("index")){r=!0;break}if(0==r)return;var n=i.id.substr((this.id+"_cell_").length),l=-1,h=-1;h=parseInt(n.substr(0,n.indexOf("_")),10),((l=parseInt(n.substr(n.indexOf("_")+1),10))<0||h<0)&&(l=h=0),37==e?--l<0&&(h>0?(l=6,h--):l=0):38==e?h>0&&h--:39==e?++l>6&&(h<7?(l=0,h++):l=6):40==e&&h<7&&h++;var d=document.getElementById(this.id+"_cell_"+h+"_"+l);if(null==d)return;i.setAttribute("tabIndex",-1),d.setAttribute("tabIndex",0),d.focus(),a.B.stopEvent(t)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setSelectedDay=function(t){try{if("selectbox"===this.options.pickerType)for(var e=0;e<this.options.visibleWeekNum;e++)for(var i=0;i<7;i++){if((a=this.getElementById(this.id+"_cell_"+e+"_"+i))&&this.hasClass(a,"w2calendar_date_on")){var o=a;"native"!=this.options.renderType||r.D.isMobile()||null==(o=a.getElementsByTagName("button")[0])&&(o=a),a.getAttribute("index")==t?(this.addClass(a,"w2calendar_selected"),o.setAttribute("title",WebSquare.language.getMessage("Calendar_select_title"))):(this.removeClass(a,"w2calendar_selected"),
o.removeAttribute("title"))}}else if("dynamic"===this.options.pickerType)for(var a=0;a<12;a++){var n=this.getElementById(this.id+"_picker_cell_"+a);n&&(n.getAttribute("index")==t?(this.addClass(n,"active"),n.setAttribute("title",WebSquare.language.getMessage("Calendar_select_title"))):(this.removeClass(n,"active"),n.removeAttribute("title")))}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setFocus=function(t){try{for(var e=0;e<this.options.visibleWeekNum;e++)for(var i=0;i<7;i++){var o=this.getElementById(this.id+"_cell_"+e+"_"+i);if(o&&(this.hasClass(o,"w2calendar_date_on")&&o.getAttribute("index")==t))return o.setAttribute("aria-pressed","true"),void o.focus()}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.hide=function(){try{l.s.prototype.hide.call(this),"yearMonth"==this.options.calendarValueType&&this.options.outsideClickEvent&&a.B.fireEvent(this,"onoutsideclick");for(var t=0;t<this.childControlList.length;t++){this.childControlList[t].hide()}}catch(t){s.w.printStackTrace(t)}},h.prototype.show=function(t,e){try{e&&WebSquare.idCache[e]||(e=this.uuid),l.s.prototype.show.call(this,t),WebSquare.style.adjustZIndex(e,this.uuid,"calendar");for(var i=0;i<this.childControlList.length;i++){this.childControlList[i].show(t)}}catch(t){s.w.printStackTrace(t)}},h.prototype.getDateString=function(t,e,i){try{void 0===t&&(t=this.selectedDateHelper.getYear()),void 0===e&&(e=this.selectedDateHelper.getMonth()),void 0===i&&(i=this.selectedDateHelper.getDate());var o=t+"",r=e+"",a=i+"";return 1==r.length&&(r="0"+r),1==a.length&&(a="0"+a),o+r+a}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render),i=this.getValue();e.next();){if(e.match("w2calendar_header_last_year")||e.match("w2calendar_header_next_year")||e.match("w2calendar_header_next_year_yearType")||e.match("w2calendar_header_last_month")||e.match("w2calendar_header_next_month")||e.match("w2calendar_go_today"))for(var o=0;o<this.childControlList.length;o++){var r=this.childControlList[o];WebSquare.getBody().getLayerListener().hide(r.id)}if(e.match("w2calendar_date_disable")&&(a.B.stopEvent(t),e.stop()),e.match("w2calendar_header_last_year")){if(this.selectedDateHelper.getYear()>this.minYear){var n=1;1==this.options.dayMoveFixed&&(n=this.selectedDateHelper.getDate()),this.selectedDateHelper.setDate(n),this.gotoLastYear()}if("native"==this.options.renderType){var l=this.selectedDateHelper.getYear();(i=Number(this.oldYearValue))!=l&&a.B.fireEvent(this.getParent(),"onyearselect",{oldValue:i,newValue:l}),this.oldYearValue=l}e.stop()}if(e.match("w2calendar_header_next_year")||e.match("w2calendar_header_next_year_yearType")){n=1;if(1==this.options.dayMoveFixed&&(n=this.selectedDateHelper.getDate()),(this.selectedDateHelper.getYear()<this.maxYear||this.options.useUnlimitedYear&&this.selectedDateHelper.getYear()==this.maxYear)&&(this.selectedDateHelper.setDate(n),this.gotoNextYear()),"native"==this.options.renderType){l=this.selectedDateHelper.getYear();(i=Number(this.oldYearValue))!=l&&a.B.fireEvent(this.getParent(),"onyearselect",{oldValue:i,newValue:l}),this.oldYearValue=l}e.stop()}if(e.match("w2calendar_header_last_month")){if(this.selectedDateHelper.getYear()>=this.minYear)if(this.selectedDateHelper.getYear()==this.minYear&&1==this.selectedDateHelper.getMonth());else{n=1;1==this.options.dayMoveFixed&&(n=this.selectedDateHelper.getDate()),this.selectedDateHelper.setDate(n),this.gotoLastMonth()}if("native"==this.options.renderType){l=this.selectedDateHelper.getMonth();(i=Number(this.oldMonthValue))!=l&&a.B.fireEvent(this.getParent(),"onyearselect",{oldValue:i,newValue:l}),this.oldMonthValue=l}e.stop()}if(e.match("w2calendar_header_next_month")){n=1;if(1==this.options.dayMoveFixed&&(n=this.selectedDateHelper.getDate()),
this.selectedDateHelper.getYear()<=this.maxYear?this.selectedDateHelper.getYear()==this.maxYear&&12==this.selectedDateHelper.getMonth()?this.options.useUnlimitedYear&&(this.selectedDateHelper.setDate(n),this.gotoNextMonth()):(this.selectedDateHelper.setDate(n),this.gotoNextMonth()):this.options.useUnlimitedYear&&"9999"==this.selectedDateHelper.getYear()&&this.selectedDateHelper.getMonth()<12&&(this.selectedDateHelper.setDate(n),this.gotoNextMonth()),"native"==this.options.renderType){l=this.selectedDateHelper.getMonth();(i=Number(this.oldMonthValue))!=l&&a.B.fireEvent(this.getParent(),"onyearselect",{oldValue:i,newValue:l}),this.oldMonthValue=l}e.stop()}if(e.match("w2calendar_date_lastmonth")){if(1==this.options.disableBeforeAfterDate)return;var h=this.selectedDateHelper.getYear(),d=this.selectedDateHelper.getMonth(),u=e.getElement().getAttribute("index");if(h>=this.minYear)if(h==this.minYear&&1==d);else if(d>1?d-=1:(h-=1,d=12),this.options.nextLastMonthDateSelect){var c=new Date(h,d,u),p=this.getDateString(h,d,u);this.gotoCalendar(p),a.B.fireEvent(this,"ondateselect")}else this.gotoCalendar(this.getDateString(h,d,u)),this.setFocus(u);e.stop()}if(e.match("w2calendar_date_nextmonth")){if(1==this.options.disableBeforeAfterDate)return;h=this.selectedDateHelper.getYear(),d=this.selectedDateHelper.getMonth(),u=e.getElement().getAttribute("index");if(h<=this.maxYear)if(h==this.maxYear&&12==d);else if(d<12?d+=1:(h+=1,d=1),this.options.nextLastMonthDateSelect){c=new Date(h,d,u),p=this.getDateString(h,d,u);this.gotoCalendar(p),a.B.fireEvent(this,"ondateselect")}else this.gotoCalendar(this.getDateString(h,d,u)),this.setFocus(u);e.stop()}if((e.match("w2calendar_header_btn_ok")||e.match("w2calendar_header_btn_ok_yearType")||e.match("w2inputCalendar_header_btn_ok_div"))&&(a.B.fireEvent(this,"onconfirm"),e.stop()),(e.match("w2calendar_header_btn_close")||e.match("w2calendar_header_btn_close_yearType")||e.match("w2inputCalendar_header_btn_close_div"))&&(a.B.fireEvent(this,"oncancel"),e.stop()),e.match("w2calendar_time_confirm")&&(a.B.fireEvent(this,"onconfirm"),e.stop()),e.match("w2calendar_time_cancel")&&(a.B.fireEvent(this,"oncancel"),a.B.stopEvent(t),e.stop()),e.match("w2calendar_date_cancel")&&(a.B.fireEvent(this,"oncancel"),a.B.stopEvent(t),e.stop()),e.match("w2calendar_go_today")){if(this.gotoToday(),"native"==this.options.renderType){h=this.todayHelper.getYear(),d=this.todayHelper.getMonth(),u=this.todayHelper.getDate(),c=new Date(h,d-1,u);a.B.fireEvent(this,"ondateselect",this.getFormattedValue(),c)}e.stop()}if(e.match("w2calendar_date_on")){h=this.selectedDateHelper.getYear(),d=this.selectedDateHelper.getMonth(),u=e.getElement().getAttribute("index");this.gotoCalendar(this.getDateString(h,d,u));c=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());a.B.fireEvent(this,"ondateselect",this.getFormattedValue(),c),e.stop()}if(e.match("w2calendar_picker_header_dynamic_entity")&&("day"==this.dynamicCalendarStatus?(WebSquare.style.setStyle(this.dom.content,"display","none"),WebSquare.style.setStyle(this.dom.pickerContent,"display","block"),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("year"),this.dynamicCalendarStatus="month"):"month"==this.dynamicCalendarStatus?"month"!=this.options.fixPickerStatus&&(this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"),this.dynamicCalendarStatus="year"):"year"==this.dynamicCalendarStatus&&(this._drawDynamicTable("decade"),this._setDynamicHeaderHTML("century"),this.dynamicCalendarStatus="decade"),e.stop()),e.match("w2calendar_picker_header_last_entity"))if("day"==this.dynamicCalendarStatus)this.selectedDateHelper.getYear()>=this.minYear&&(this.selectedDateHelper.getYear()==this.minYear&&1==this.selectedDateHelper.getMonth()||(this.selectedDateHelper.setDate(1),this.gotoLastMonth(),this._setDynamicHeaderHTML("month"))),e.stop();else if("month"==this.dynamicCalendarStatus){
(g=this.selectedDateHelper.getYear()-1)>=this.minYear&&(this.pickerSelectedDateHelper.setYear(g),this.selectedDateHelper.setYear(g),this._setDynamicHeaderHTML("year"))}else if("year"==this.dynamicCalendarStatus)this.pickerSelectedDateHelper.selectedDecadeIndex>0&&(this.pickerSelectedDateHelper.selectedDecadeIndex-=1,this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"));else if("decade"==this.dynamicCalendarStatus){if(this.pickerSelectedDateHelper.startDecadeIndex-12<0)return;this.pickerSelectedDateHelper.startDecadeIndex-=12,this._drawDynamicTable("decade"),this._setDynamicHeaderHTML("century")}if(e.match("w2calendar_picker_header_next_entity"))if("day"==this.dynamicCalendarStatus)this.selectedDateHelper.getYear()<=this.maxYear&&(this.selectedDateHelper.getYear()==this.maxYear&&12==this.selectedDateHelper.getMonth()||(this.selectedDateHelper.setDate(1),this.gotoNextMonth(),this._setDynamicHeaderHTML("month"))),e.stop();else if("month"==this.dynamicCalendarStatus){var g;(g=this.selectedDateHelper.getYear()+1)<=this.maxYear&&(this.pickerSelectedDateHelper.setYear(g),this.selectedDateHelper.setYear(g),this._setDynamicHeaderHTML("year"))}else if("year"==this.dynamicCalendarStatus)this.pickerSelectedDateHelper.selectedDecadeIndex<this.pickerSelectedDateHelper.decadeArr.length-1&&(this.pickerSelectedDateHelper.selectedDecadeIndex+=1,this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"));else if("decade"==this.dynamicCalendarStatus){if(this.pickerSelectedDateHelper.startDecadeIndex+12>=this.pickerSelectedDateHelper.decadeArr.length)return;this.pickerSelectedDateHelper.startDecadeIndex+=12,this._drawDynamicTable("decade"),this._setDynamicHeaderHTML("century")}if(e.match("w2calendar_picker_cell")){if("month"==this.dynamicCalendarStatus){var m=parseInt(e.getElement().getAttribute("index"),10);if("yearMonth"==this.options.calendarValueType){i=this.getValue();this.pickerSelectedDateHelper.setMonth(m+1),this.selectedDateHelper.setMonth(m+1),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("month");l=this.getValue();a.B.fireEvent(this,"onmonthselect",{oldValue:i,newValue:l})}else WebSquare.style.setStyle(this.dom.content,"display","block"),WebSquare.style.setStyle(this.dom.pickerContent,"display","none"),this.pickerSelectedDateHelper.setMonth(m+1),this.gotoMonth(m+1),this._setDynamicHeaderHTML("month"),this.dynamicCalendarStatus="day"}else if("year"==this.dynamicCalendarStatus){m=parseInt(e.getElement().getAttribute("index"),10);var f=this.pickerSelectedDateHelper.selectedDecadeIndex,b=this.pickerSelectedDateHelper.decadeArr;if(b[f][0]+m<=this.options.maxYear)if("year"==this.options.calendarValueType){i=this.getValue();this.pickerSelectedDateHelper.setYear(b[f][0]+m),this.selectedDateHelper.setYear(b[f][0]+m),this._drawDynamicTable("year"),this._setDynamicHeaderHTML("year");l=this.getValue();a.B.fireEvent(this,"onyearselect",{oldValue:i,newValue:l})}else this.pickerSelectedDateHelper.setYear(b[f][0]+m),this.selectedDateHelper.setYear(b[f][0]+m),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("year"),this.dynamicCalendarStatus="month"}else if("decade"==this.dynamicCalendarStatus){m=parseInt(e.getElement().getAttribute("index"),10);this.pickerSelectedDateHelper.selectedDecadeIndex=this.pickerSelectedDateHelper.startDecadeIndex+m,this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"),this.dynamicCalendarStatus="year"}e.stop()}}e=null,i!=(l=this.getValue())&&a.B.fireEvent(this,"onviewchange",{oldValue:i,newValue:l})}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.handleMouseoverEvent=function(t){try{a.B.stopEvent(t)
;for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2calendar_go_today")?this.addClass(e.getElement(),"w2calendar_go_today_over"):e.match("w2calendar_date_on")?this.addClass(e.getElement(),"w2calendar_date_over"):e.match("w2calendar_time_confirm")?this.addClass(e.getElement(),"w2calendar_time_confirm_over"):e.match("w2calendar_time_cancel")?this.addClass(e.getElement(),"w2calendar_time_cancel_over"):e.match("w2calendar_header_btn_ok")||e.match("w2calendar_header_btn_ok_yearType")?this.addClass(e.getElement(),"w2calendar_header_btn_ok_over"):(e.match("w2calendar_header_btn_close")||e.match("w2calendar_header_btn_close_yearType"))&&this.addClass(e.getElement(),"w2calendar_header_btn_close_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2calendar_go_today")?this.removeClass(e.getElement(),"w2calendar_go_today_over"):e.match("w2calendar_date_on")?this.removeClass(e.getElement(),"w2calendar_date_over"):e.match("w2calendar_time_confirm")?this.removeClass(e.getElement(),"w2calendar_time_confirm_over"):e.match("w2calendar_time_cancel")?this.removeClass(e.getElement(),"w2calendar_time_cancel_over"):e.match("w2calendar_header_btn_ok")||e.match("w2calendar_header_btn_ok_yearType")?this.removeClass(e.getElement(),"w2calendar_header_btn_ok_over"):(e.match("w2calendar_header_btn_close")||e.match("w2calendar_header_btn_close_yearType"))&&this.removeClass(e.getElement(),"w2calendar_header_btn_close_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.handleYearChange=function(t){try{var e=t.target||t.srcElement,i=Number(e.value),o=Number(this.oldYearValue);o!=i&&a.B.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:i}),this.oldYearValue=i}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.handleMonthChange=function(t){try{var e=t.target||t.srcElement,i=Number(e.value),o=Number(this.oldMonthValue);o!=i&&a.B.fireEvent(this.getParent(),"onmonthselect",{oldValue:o,newValue:i}),this.oldMonthValue=i}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getServerDate=function(){return WebSquare.date.getCurrentServerDate()},h.prototype.shiftDayIndex=function(t){if(t>0)for(var e=0;e<t;e++)this.dayIndexArray.unshift(this.dayIndexArray.pop());else for(e=0;e<Math.abs(t);e++)this.dayIndexArray.push(this.dayIndexArray.shift())},h.prototype.setCellClass=function(t,e){try{this.objCellClass[t]=e,this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.removeCellClass=function(t){try{this.objCellClass[t]="",this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.removeAllCellClass=function(){try{for(var t in this.objCellClass)this.objCellClass[t]="";this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.finalize=function(){for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove()},h.prototype.setHolidayRef=function(t){try{t&&(this.options.holidayRef=t,this.modelControl.useItemset=!0,this.refreshItemset())}catch(t){s.w.printStackTrace(t)}},h.prototype.refreshItemset=function(){try{var t=this.options.holidayRef.replace(/^data:/,"").split(".")[0],e=this.modelControl.getDataComp(t,{type:"aliasDataCollection"});null==this._dataList&&null!=e&&(this._dataList=e,this._dataList.addChild(this),this.modelControl.useItemset=!0);var i=this.options.holiday.slice(0);this.holidayXpath(),i!=this.options.holiday&&this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.setHoliday=function(t,e){try{t&&(this.options.holiday=e?t:this.options.holiday+" "+t),this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.removeHoliday=function(){try{this.options.holiday="",this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.disableDate=function(t){try{t&&(this.options.disabledDate=this.options.disabledDate+" "+t)
;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.enabledDate=this.options.enabledDate.replace(new RegExp(o,"g"),"")}this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.enableDate=function(t){try{this.options.enabledDate=this.options.enabledDate+" "+t;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.disabledDate=this.options.disabledDate.replace(new RegExp(o,"g"),"")}this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.disableBeforeDate=function(t){try{t&&(this.options.disableBeforeDate=t),this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.disableAfterDate=function(t){try{t&&(this.options.disableAfterDate=t),this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.enableAllDate=function(){try{this.options.disableBeforeDate="",this.options.disableAfterDate="",this.updateCalendar()}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.getDataListInfo=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t={};return t.ref=this.options.ref,t.holidayRef=this.options.holidayRef,t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t}return null}catch(t){s.w.printStackTrace(t)}},h.prototype.getFocusedComponentId=function(){try{return this.id.split("_")[0]}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype._setDynamicHeaderHTML=function(t){try{switch(t){case"month":var e=this.pickerSelectedDateHelper.getYear(),i=this.pickerSelectedDateHelper.getMonth(),o=this.options.monthNames.split(",");"month"==this.options.dynamicHeaderOrder?this.dom.pickerDynamicEntity.innerHTML="<span class='month'>"+o[i-1]+"</span><span class='year'>"+e+this.options.yearSuffix+"</span>":"year"==this.options.dynamicHeaderOrder&&(this.dom.pickerDynamicEntity.innerHTML="<span class='year'>"+e+this.options.yearSuffix+"</span><span class='month'>"+o[i-1]+"</span>");break;case"year":e=this.pickerSelectedDateHelper.getYear();this.dom.pickerDynamicEntity.innerHTML=e+this.options.yearSuffix;break;case"decade":var r=this.pickerSelectedDateHelper.decadeArr[this.pickerSelectedDateHelper.selectedDecadeIndex];this.dom.pickerDynamicEntity.innerHTML=r[0]+" - "+r[1];break;case"century":var a=this.pickerSelectedDateHelper.startDecadeIndex,n=a+11,l=this.pickerSelectedDateHelper.decadeArr;void 0===l[n]&&(n=l.length-1),this.dom.pickerDynamicEntity.innerHTML=l[a][0]+" - "+l[n][1]}}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype._drawDynamicTable=function(t){try{switch(t){case"month":for(var e=this.pickerSelectedDateHelper.getMonth(),i=this.pickerSelectedDateHelper.getYear(),o=this.options.monthNames.split(","),r=0;r<12;r++){var a=o[r]||r+1;this.dom.pickerCells[r].firstChild.innerHTML=a,this.removeClass(this.dom.pickerCells[r],"active"),r==e-1&&this.addClass(this.dom.pickerCells[r],"active")}break;case"year":for(var n=this.pickerSelectedDateHelper.decadeArr[this.pickerSelectedDateHelper.selectedDecadeIndex],l=(i=this.pickerSelectedDateHelper.getYear(),0);l<12;l++){(a=l+n[0])>this.options.maxYear?this.dom.pickerCells[l].firstChild.innerHTML="":this.dom.pickerCells[l].firstChild.innerHTML=a,this.removeClass(this.dom.pickerCells[l],"active"),a==i&&this.addClass(this.dom.pickerCells[l],"active")}break;case"decade":for(var h=this.pickerSelectedDateHelper.selectedDecadeIndex,d=this.pickerSelectedDateHelper.startDecadeIndex,u=this.pickerSelectedDateHelper.decadeArr,c=0;c<12;c++){var p=d+c;n=u[p];p<u.length?this.dom.pickerCells[c].firstChild.innerHTML=n[0]+" - "+n[1]:this.dom.pickerCells[c].firstChild.innerHTML="",this.removeClass(this.dom.pickerCells[c],"active"),p==h&&this.addClass(this.dom.pickerCells[c],"active")}}6!==this.options.visibleWeekNum&&this.setSize(null,this.dom.content.parentNode.offsetHeight)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype._pickerStatusRefresh=function(){try{
"dynamic"===this.options.pickerType&&("yearMonth"===this.options.calendarValueType?(this.dynamicCalendarStatus="month",this._drawDynamicTable("month")):"year"===this.options.calendarValueType?(this._refreshDynamicSelectedDecateIndex(),this._drawDynamicTable("year"),this.dynamicCalendarStatus="year"):(WebSquare.style.setStyle(this.dom.content,"display","block"),WebSquare.style.setStyle(this.dom.pickerContent,"display","none"),this.dynamicCalendarStatus="day"))}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype._refreshDynamicSelectedDecateIndex=function(){try{for(var t=this.pickerSelectedDateHelper.getYear(),e=0;e<this.pickerSelectedDateHelper.decadeArr.length;e++)if(t>=this.pickerSelectedDateHelper.decadeArr[e][0]&&t<=this.pickerSelectedDateHelper.decadeArr[e][1]){this.pickerSelectedDateHelper.selectedDecadeIndex=e,this.pickerSelectedDateHelper.startDecadeIndex=12*Math.floor(e/12);break}}catch(t){s.w.printStackTrace(t,null,this)}}},3418:function(t,e,i){"use strict";i.r(e),i.d(e,{checkbox:function(){return u}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=i(5373),d=i(2117),u=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(u.prototype,l.s.prototype),o.x.extend(u.prototype,h.E.prototype),o.x.extend(u.prototype,d.z.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.checkbox",pluginName:"checkbox",userEvents:["onchange","onlabelclick","oncheckboxclick","onviewchange","onkeyup","onkeydown"],useConfig:!0,serializable:!0,renderType:"",tagname:"div",itemTagname:"div",value:"",cols:0,rows:0,name:"",selectedindex:-1,initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,title:"",useCheckboxTitle:!0,escape:!0,falseValue:"",ignoreTabIndex:!1,separator:" ",tooltipItemLabel:"",tooltipShowAlways:!1,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",refInitSync:!1},u.prototype.initialize=function(t){try{this.inputType="checkbox";var e=s.v.getConfiguration("/WebSquare/checkbox/renderType/@value");""==this.options.renderType&&""!=e?this.options.renderType=e:""==this.options.renderType&&(this.options.renderType="table"),"native"==this.options.renderType?this.itemArr=[{label:"",value:this.options.value}]:this.initializeItemArr(t),this.itemDisabledArray=[];for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(!1);this.setTableCount(),this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.oldValueForIE=[],this.settingData=!1,this.options.tooltipFormatter&&(this.tooltipFormatter=n.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toHTML=function(){try{var t=[],e=this.itemArr.length,i=this.options.name||this.id+"_input",o=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.title?"":"title='"+this.options.title+"'",a=1==this.options.ignoreTabIndex?" tabindex='-1'":""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'";if("native"==this.options.renderType.toLowerCase())t.push("<input type='"+this.inputType+"' "+o+" class='w2"+this.inputType+"_input "+this.options.className+"' name='"+i+"' id='"+this.id+"' index='0' "+s+a+" />");else if("checkboxgroup"==this.options.renderType.toLowerCase()){t.push("<"+this.options.tagname+" id='"+this.id+"' "+o+" class='w2"+this.inputType+" "+this.options.className+"' "+s+">");for(var n=0;n<e;n++){var l="";this.itemArr&&this.itemArr[n]&&!0===this.itemArr[n]._hidden&&(l=" style='display:none;'");var h=this.id+"_input_"+n,d=this.options.escape?WebSquare.xml._encode(this.itemArr[n].label):this.itemArr[n].label,u="",c="";this.itemDisabledArray[n]&&(u="disabled",c="w2checkbox_disabled"),t.push("<"+this.options.itemTagname+" class='w2checkbox_item w2checkbox_item_"+n+"'"+l+">"),
t.push("<input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+i+"' index='"+n+"' id='"+h+"' "+u+a+" />"),t.push("<label class='w2"+this.inputType+"_label "+c+"' index='"+n+"' for='"+h+"'>"+d+"</"+"label>"),t.push("</"+this.options.itemTagname+">")}t.push("</"+this.options.tagname+">")}else{t.push("<div id='"+this.id+"' "+o+" class='w2"+this.inputType+" "+this.options.className+"' "+s+">"),t.push("<table class='w2"+this.inputType+"_main'>");for(var p=0;p<this.rowCount;p++){h=this.id+"_input_"+p,t.push("<tr class='w2"+this.inputType+"_row'>");for(var g=0;g<this.colCount;g++){var m=p*this.colCount+g;l="";this.itemArr&&this.itemArr[m]&&!0===this.itemArr[m]._hidden&&(l=" style='display:none;'");h=this.id+"_input_"+m,u="",c="";if(this.itemDisabledArray[m]&&(u="disabled",c="w2checkbox_disabled"),m<e){d=this.options.escape?WebSquare.xml._encode(this.itemArr[m].label):this.itemArr[m].label;var f=this.options.useCheckboxTitle?" title='"+d+"' ":"";t.push("<td class='w2"+this.inputType+"_td_input'"+l+"><input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+i+"' index='"+m+"'  id='"+h+"'"+f+u+a+"/></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+l+"><"+"label class='w2"+this.inputType+"_label "+c+"' index='"+m+"' for='"+h+"'>"+d+"</"+"label></td>")}else t.push("<td class='w2"+this.inputType+"_td_input'"+l+"></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+l+"></td>")}t.push("</tr>")}t.push("</table>"),t.push("</div>")}return t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw()),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}var e=this.getCheckboxList();if(this.options.selectedindex>-1){for(var i=0;i<e.length;i++){e[i].checked=!1,this.oldValueForIE[i]=!1}this.setSelectedIndexNM(this.options.selectedindex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())}else{for(i=0;i<e.length;i++)this.modelControl.isBinded()||(this.oldValueForIE[i]=!1);this.options.falseValue&&this.modelControl.isBinded()&&this.options.refInitSync&&this.modelControl.setData(this.options.falseValue)}this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getAccessibiltyId=function(){try{return"native"==this.options.renderType?this.id:this.id+"_input_0"}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=this.getValue();this.refreshItemArr(),this.itemDisabledArray=new Array;for(var e=0;e<this.itemArr.length;e++)this.itemDisabledArray.push(this.options.disabled);this.componentRedraw(t),this.options.enableColumn&&this.refreshEnable()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.componentRedraw=function(t){try{this.setTableCount(),this.redraw(),this.setValueNM(t)}catch(t){r.w.printStackTrace(t,null,this)}
},u.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndex=function(t,e){try{if(n.D.isNull(t)||1==isNaN(Number(t)))return;t=parseInt(t);var i=this.getValue();n.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8?this.setSelectedIndexNM(t,null,e):this.setSelectedIndexNM(t),this.settingData=!0,this.modelControl.setData(this.getValue()),this.settingData=!1,i!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedIndex=function(t){try{t||(t=this.options.separator||" ");for(var e=[],i=this.getCheckboxList(),o=0;o<i.length;o++)i[o].checked&&e.push(o);return e.join(t).wq_trim()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndexNM=function(t,e,i){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;var o=this.getCheckboxList()[t];return e=null==e?!o.checked:e,o.checked=e,2!=i&&1!=this.settingData&&(this.oldValueForIE[t]=e),!0}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValueNM=function(t){try{if(n.D.isNull(t))return;for(var e=(t=t.toString()).split(this.options.separator||" "),i=[],o=0;o<e.length;o++)i[e[o]+""]="";var s=this.getItemCount();for(o=0;o<s;o++){null!=i[t=this.itemArr[o].value]?this.setSelectedIndexNM(o,!0):this.setSelectedIndexNM(o,!1)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInstanceValue=function(t){try{if(null!=t){if(n.D.isNull(t))return;t=parseInt(t)}var e=this.getValue(),i="";this.modelControl.isBinded()?(i=this.modelControl.getData(),this.modelControl.setData(e),i!=e&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:e})):(i=this.getValue(null,t),a.B.fireEvent(this,"onchange",{oldValue:i,newValue:e}))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setTableCount=function(){try{if(this.rowCount=this.itemArr.length,this.colCount=1,0!=this.options.rows){var t=this.options.rows;this.rowCount=t,this.colCount=Math.ceil(this.itemArr.length/t)}if(0!=this.options.cols){var e=this.options.cols;this.colCount=e,this.rowCount=Math.ceil(this.itemArr.length/e)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getText=function(t){try{t||(t=this.options.separator||" ");for(var e=[],i=this.getCheckboxList(),o=0;o<i.length;o++)i[o].checked&&e.push(this.itemArr[o].label);return e.join(t).wq_trim()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getValue=function(t,e){try{t||(t=this.options.separator||" ");for(var i=[],o=this.getCheckboxList(),s=0;s<o.length;s++)void 0!==e&&s===e?o[s].checked||i.push(this.itemArr[s].value):o[s].checked&&i.push(this.itemArr[s].value);return i.join(t).wq_trim()||this.options.falseValue}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.addItem=function(t,e,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var o=this.getValue(),s={};s.value=t,s.label=e,this.itemArr.splice(i,0,s),this.itemDisabledArray.splice(i,0,!!this.options.disabled);for(var a=this.getCheckboxList(),n=[],l=0;l<a.length;l++)n.push(a[l].itemDisabled);n.splice(i,0,!1),this.componentRedraw(o);var h=this.getCheckboxList();for(l=0;l<h.length;l++)h[l].itemDisabled=n[l];return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.deleteItem=function(t){try{if(t=parseInt(t,10),isNaN(t))return;for(var e=this.getValue(),i=null,o=this.getCheckboxList(),s=[],a=0;a<o.length;a++)s.push(o[a].itemDisabled);t>=0&&t<this.getItemCount()&&(i=this.itemArr.splice(t,1)[0],this.itemDisabledArray.splice(t,1),s.splice(t,1)),this.componentRedraw(e);var n=this.getCheckboxList();for(a=0;a<n.length;a++)n[a].itemDisabled=s[a];return i}catch(t){r.w.printStackTrace(t,null,this)}},
u.prototype.removeAll=function(){try{this.itemArr=new Array,this.itemDisabledArray=new Array,this.componentRedraw("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"readOnly":for(var i=this.getCheckboxList(),o=0;o<i.length;o++)i[o].disabled=e;break;case"mandatory":1==e?this.addClass(this.render,"w2checkbox_mandatory"):this.removeClass(this.render,"w2checkbox_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getCheckboxList=function(){try{return"native"==this.options.renderType?[this.render]:this.getDomList("checkboxArr","input")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getLabelList=function(){try{return this.getDomList("labelArr","label")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.focus=function(){try{this.getCheckboxList()[0].focus()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.click=function(t){try{this.getCheckboxList()[t].click()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.reset=function(){try{for(var t=this.getCheckboxList(),e=this.getValue(),i=0;i<t.length;i++)t[i].checked&&(t[i].checked=!1,this.oldValueForIE[i]=!1);var o=this.getValue();this.modelControl.setData(o),e!=o&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:o})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.checkAll=function(t){try{for(var e=this.getItemCount(),i=0;i<e;i++)this.setSelectedIndexNM(i,t);this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t);for(var e=this.getCheckboxList(),i=this.getLabelList(),o=0;o<e.length;o++)e[o].itemDisabled||(this.itemDisabledArray[o]=t,t?(this.addClass(i[o],"w2checkbox_disabled"),e[o].setAttribute("disabled","disabled")):(this.removeClass(i[o],"w2checkbox_disabled"),e[o].removeAttribute("disabled")));return this.options.disabled=t,t?this.render.setAttribute("disabled","disabled"):this.render.removeAttribute("disabled"),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setItemDisabled=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;e=n.D.getBoolean(e);var i=this.getCheckboxList(),o=this.getLabelList();i[t].disabled=e,i[t].itemDisabled=e,this.itemDisabledArray[t]=e,1==e?this.addClass(o[t],"w2checkbox_disabled"):this.removeClass(o[t],"w2checkbox_disabled")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getItemDisabled=function(t){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;return this.getCheckboxList()[t].disabled}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInitValue=function(t){try{var e=this.getValue();this.checkAll(!1),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},u.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=n.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},u.prototype.focusPreTabOrder=function(){try{
if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=n.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},u.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){r.w.printStackTrace(t)}},u.prototype.setNextTabID=function(t,e){try{null!=t&&n.D.setNextTabID(this.id,t,e)}catch(t){r.w.printStackTrace(t)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},u.prototype.handleClickEvent=function(t){try{this.setRefPosition();for(var e=this.event.getTargetIterator(t,this.render);e.next();){var i;if(e.match("w2"+this.inputType+"_input")){var o=e.getElement().getAttribute("index");n.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8||this.setInstanceValue(o),i=1,this.fireOnclick({type:"1",index:o})}else if(e.match("w2"+this.inputType+"_label")&&!e.match("w2"+this.inputType+"_disabled")){o=e.getElement().getAttribute("index");a.B.preventDefault(t),i=2,n.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8?this.setSelectedIndex(o,i):this.setSelectedIndex(o),this.fireOnclick({type:"2",index:o})}}e=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{for(var e=a.B.getTarget(t);e&&(!e.firstChild||"LABEL"!=e.firstChild.tagName)&&!("checkboxgroup"===this.options.renderType&&e&&"DIV"===e.tagName&&e.className.indexOf("w2checkbox_item")>=0);)e=e.parentNode;if(e){var i;i="checkboxgroup"===this.options.renderType?e.getElementsByClassName("w2checkbox_label")[0]:e.firstChild;e.offsetWidth,e.offsetHeight;var o=WebSquare.style.getStyle(e,"text-overflow"),s=i.innerHTML;if(this.options.tooltipFormatter&&"function"!=typeof this.tooltipFormatter&&(this.tooltipFormatter=n.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id)),!0===this.options.tooltipShowAlways){var l=WebSquare.style.getAbsoluteLeft(i),h=WebSquare.style.getAbsoluteTop(i);if("function"==typeof this.tooltipFormatter){var d=parseInt(i.getAttribute("index"),10);s=this.tooltipFormatter(s,d)}this.showTooltip(l,h,s)}else if("ellipsis"==o){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=e.className,this.toolTipRuler.innerHTML=e.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(e,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(e,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(e,"font-weight");var u=this.toolTipRuler.firstChild.offsetWidth,c=e.clientWidth;if(i.nodeType!=WebSquare.Elem.type.text){var p=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),g=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");u-=parseInt(p||"0",10),u-=parseInt(g||"0",10),c-=parseInt(WebSquare.style.getStyle(i,"padding-left"),10),c-=parseInt(WebSquare.style.getStyle(i,"padding-right"),10),c-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),c-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(c<u){l=WebSquare.style.getAbsoluteLeft(i),h=WebSquare.style.getAbsoluteTop(i);if(document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel)s=this.options.tooltipItemLabel;else if("function"==typeof this.tooltipFormatter){d=parseInt(i.getAttribute("index"),10);s=this.tooltipFormatter(s,d)}this.showTooltip(l,h,s)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),!0!==this.options.tooltipDisplay&&!0!==this.options.tooltipShowAlways||this.hideTooltip()}catch(t){
r.w.printStackTrace(t,null,this)}},u.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null),this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){var o=document.body.scrollWidth;this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2checkbox_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i;var s=Math.max(e-(this.tooltip.render.offsetHeight+3),0);if(this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",s+"px"),document.body.scrollWidth>o){var r=t-(document.body.scrollWidth-o);r<0&&(r=0),this.tooltip.setStyle("left",r+"px")}})),100*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{if(9==(t.charCode?t.charCode:t.keyCode)){this.tabOrderMoveStart=!1;var e=this.getCheckboxList();if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){if(document.activeElement!=e[0])return;this.tabOrderMoveStart=!0,a.B.preventDefault(t)}}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){if(document.activeElement!=e[e.length-1])return;this.tabOrderMoveStart=!0,a.B.preventDefault(t)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.fireOnchange=function(){try{a.B.fireEvent(this,"onchange")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.fireOnclick=function(t){try{if(!t)return;var e=t.type||"1",i=t.index,o=this.getCheckboxList(),l=o[i].checked,h=this.itemArr[i].value,d=!1;n.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8&&(null==this.oldValueForIE[i]?(this.oldValueForIE[i]=l,"1"===e&&this.setInstanceValue(i)):l==this.oldValueForIE[i]?d=!0:(this.oldValueForIE[i]=l,"1"===e&&this.setInstanceValue(i))),o[i].disabled||("1"===e?a.B.fireEvent(this,"oncheckboxclick",i,l,h):"2"===e&&a.B.fireEvent(this,"onlabelclick",i,l,h),0==d&&a.B.fireEvent(this,"onviewchange",{index:i,checked:l,value:h}))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},u.prototype.restore=function(t){try{this.checkAll(!1);for(var e=t.selectedIndex.split(this.options.separator),i=0,o=e.length;i<o;i++)this.setSelectedIndex(parseInt(e[i],10));return!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype.refreshVisible=function(){try{if(!this.render)return;this._refreshVisible(this.render.getElementsByTagName("input")),"checkboxgroup"!==this.options.renderType.toLowerCase()&&this._refreshVisible(this.render.getElementsByTagName("label"))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._refreshVisible=function(t){try{for(var e=0;e<t.length;e++){var i=parseInt(t[e].getAttribute("index"),10)
;this.itemArr[i]&&!0===this.itemArr[i]._hidden?t[i].parentNode.style.display="none":t[i].parentNode.style.display=""}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshEnable=function(){try{for(var t=this.getItemCount(),e=0;e<t;e++)this.itemArr[e]&&!0===this.itemArr[e]._disabled?this.setItemDisabled(e,!0):this.setItemDisabled(e,!1)}catch(t){r.w.printStackTrace(t,null,this)}}},2036:function(t,e,i){"use strict";i.r(e),i.d(e,{checkcombobox:function(){return u}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=i(5373),d=i(2117),u=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(u.prototype,l.s.prototype),o.x.extend(u.prototype,h.E.prototype),o.x.extend(u.prototype,d.z.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.checkcombobox",pluginName:"checkcombobox",renderType:"component",userEvents:["onchange","onclose","onviewchange","oncheckboxclick","oncellclick"],systemEvents:["onblur","onclick","ondblclick","onfocus"],serializable:!0,useConfig:!0,separator:" ",value:"",sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,visibleColNum:1,visibleColMax:1,displayMode:"0",delimiter:"\t",textAlign:"",chooseOption:!1,chooseOptionLabel:"",allOption:!1,tooltipMode:"none",defaultStyle:"",activeStyle:"",defaultClass:"w2checkcombobox_default",activeClass:"w2checkcombobox_active",useLocale:!1,submenuSize:"auto",direction:"auto",checkboxClickSync:!1,mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",title:"",setDataRemoveAll:!0,escape:!0,closeonmouseleave:!1,animation:"",customLabelFormatter:"",navBtn:!1,displayAllOptionLabel:!1,checkDisabledOnAllCheck:!0,search:"start",searchTarget:"label",editable:!1,editType:"select",editModeEvent:"onclick",handleOtherClick:!0,noResult:"previous",interactionMode:!1,ignoreBlankOnNoResult:!1,useKeywordHighlight:!1,wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",visibleColumnAutoClear:!1,useDrag:!1,useEdit:!1,rangeSeparator:"",validateOnInput:!1},u.prototype.initialize=function(t){try{if(this.itemTable=null,this.isOpen=!1,this.statusSubLayer=!1,this.separator=this.options.separator=this.options.separator||" ",this.selectedInfo={},this.editable=this.options.editable,this.search=this.options.search,this.myhelper=new WebSquare.korHelper,this.viewArr=[],this.mytime=null,this.hideTime=null,this.noResult="previous"===this.options.noResult||"clear"===this.options.noResult||"noEnd"===this.options.noResult||"useData"===this.options.noResult||"first"===this.options.noResult?this.options.noResult:"previous",this.interactionMode=this.options.interactionMode,this.mozTrickBuffer="",this.trickBuffer="",this.findStop=!1,this.displayFormatter=null,this.labelColumn=-1,this._currentTarget=null,this._dragGhost=null,this.defaultAllOptionLabel=WebSquare.language.getMessage("CheckCombobox_all"),t&&"$blank"==t.getAttribute("chooseOptionLabel")?this.defaultChooseOptionLabel="":this.defaultChooseOptionLabel=WebSquare.language.getMessage("CheckCombobox_choose"),this._initDisplayMode(),t){var e="xf"==t.getTagName().split(":")[0]?s.v._XML_NAMESPACE.XFORMS:s.v._XML_NAMESPACE.W2,i=WebSquare.Elem.api.getElementsByTagName(t,"choices",e)[0];if(i){var o=WebSquare.Elem.api.getElementsByTagName(i,"gridItemset",s.v._XML_NAMESPACE.W2)[0];null==o&&(o=WebSquare.Elem.api.getElementsByTagName(i,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0]),o&&"w2:gridItemset"==o.getTagName()?this.itemTableMode="grid":o&&"w2:gridViewItemset"==o.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView")}"grid"==this.itemTableMode?this.initializeGridItemArr(t):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(t):this.initializeItemArr(t),this.itemDisabledArray=new Array
;for(var a=0;a<this.itemArr.length;a++)this.itemDisabledArray.push(!1);this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.finalize=function(){try{l.s.prototype.finalize.call(this),this.itemTable&&(this.itemTable.remove(),this.itemTable=null),this._dragGhost&&this._dragGhost.remove(),this.labelRuler=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.title?"":"title='"+this.options.title+"'",o=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+'"',s=""==this.options.textAlign?"":"style= 'text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'",a="";return a=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'",t.push("<div id='"+this.id+"' role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='none' "+e+" class='w2checkcombobox "+this.options.className+"' "+a+i+">"),t.push("<table class='w2checkcombobox_table_main'>"),t.push("<tbody id='"+this.id+"_main_tbody'>"),t.push("<tr class='w2checkcombobox_row w2checkcombobox_row_main'>"),this.options.editable||this.options.useEdit?(t.push("<td class='w2checkcombobox_col_label' "+o+">"),t.push("<div class='w2checkcombobox_label'>"),t.push("<span id='"+this.id+"_label' class='w2checkcombobox_label' "+s+"></span>"),t.push("<input id='"+this.id+"_input' class='w2checkcombobox_input' style='border-width:0px; width:100%; padding:0px; display:none;' type='text' "+i+" />"),t.push("</div></td>"),t.push("<td class='w2checkcombobox_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>")):(t.push("<td class='w2checkcombobox_col_label' "+o+"><div id='"+this.id+"_label' role='document' aria-live='assertive' aria-automatic='true' class='w2checkcombobox_label' "+s+"></div></td>"),t.push("<td class='w2checkcombobox_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>")),t.push("</tr></tbody>"),t.push("</table>"),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setPreAction=function(){try{this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),this.dom.input=this.getElementById(this.id+"_input"),this.dom.tbody=this.getElementById(this.id+"_main_tbody")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.useOtherComponentId?s.v.setTimer((function(){this.otherComponent=n.D.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(t){a.B.stopPropagation(t)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,
fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:this.options.editable||this.options.useEdit?{onmousedown:this.handleClickEventDocument}:{}}),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),n.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.useEdit&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),(this.options.editable||this.options.useEdit)&&(this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleblurEventInput)),this.options.validateOnInput&&this.event.addListener(this.dom.input,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator))),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),this.modelControl.isItemsetBinded()?(this.refreshItemArr(),this.componentRedraw()):!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}if(1==this.options.chooseOption){var e=this._getChooseOptionLabel();e=WebSquare.xml.decode(e).replace("&nbsp;"," "),this.dom.label.innerHTML=e}this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.options.visibleColumnAutoClear&&this.bind("onviewchange",this._clearVisibleColumnChecked)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){this.itemDisabledArray=new Array;for(var t=0;t<this.itemArr.length;t++)this.itemDisabledArray.push(!1);if(this.refreshItemArr(),this.componentRedraw(),"grid"==this.itemTableMode)this.refreshGridItemArr(),null!=this.itemTable&&null!=this.itemTable.grid&&(this.itemTable.grid.clearFilter(),this.setGridData(),this.options.allOption&&this.gridItemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr)));else if("gridView"==this.itemTableMode){if(this.refreshGridViewItemArr(),null!=this.itemTable&&null!=this.itemTable.gridView)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).setData(this.gridViewItemArr,!1),this.setGridViewData()}if(this.options.editable&&this.itemArr.length<=0&&this.initCheckCombobox(),this.modelControl.isBinded())this.refresh();else{var e=[];for(t=0;t<this.itemArr.length;t++)this.itemArr[t].value!=WebSquare.allValue&&e.push({index:t,checked:!1});this.setSelectedInfoNM(e)}}this.isOpen?this.setItemTable():this.options.useEdit&&this.itemTable&&(this.itemTable.show(),this.setItemTable(),this.itemTable.hide())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();1==this.setValueNM(e)&&t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},
u.prototype.componentRedraw=function(){try{!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.setSelectOptions(),(this.options.editable||this.options.useEdit)&&this.showEditMode(!1),this.setValueNM("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setLabelWidthByItemLength=function(){try{this.labelRuler&&document.getElementById("checkcombobox_ruler")||(this.labelRuler=document.createElement("div"),this.labelRuler.style.position="absolute",this.labelRuler.style.top="-1000px",this.labelRuler.style.left="-1000px",this.labelRuler.style.visibility="hidden",this.labelRuler.id="checkcombobox_ruler",document.body.appendChild(this.labelRuler));for(var t=0,e=0;e<this.itemArr.length;e++)this.labelRuler.innerHTML=this.itemArr[e].label,this.labelRuler.offsetWidth>t&&(t=this.labelRuler.offsetWidth);if(this.render){var i=document.getElementById(this.id+"_button");this.render.style.width=t+i.offsetWidth+10+"px"}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSubLayer=function(){try{var t=this;if(null==this.itemTable)if("grid"==this.itemTableMode){if(this.gridItemArr.length<=0)return;this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(e,i){t.focus(),"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(e)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(o)}else 27==i&&(t._closeSubLayer(),t.focus())}))),this.setGridData()}else if("gridView"==this.itemTableMode){if(this.gridViewItemArr.length<=0)return;"auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,submenuSize:this.options.submenuSize,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,navBtn:this.options.navBtn,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(e,i,o,s){t.focus(),s=s||{},"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e));var r=parseInt(t.itemTable.options.gridViewOptions.checkColumn);if("checkbox"===this.getCellInputType(e,i)&&i===r){var n="";if(!0===s.checked){if(0===e&&this.getCellData(e,t.labelColumn)===t.defaultAllOptionLabel){for(var l=1;l<t.itemArr.length;l++)t.addSelectedInfo({index:l,checked:!0});this.checkAll(r,!0),t.checkAll(r,!0)}else t.itemArr[e].checked=!0,t.addSelectedInfo({index:e,checked:!0}),this.setCellChecked(e,i,!0);n=!0}else{if(0===e&&this.getCellData(e,t.labelColumn)===t.defaultAllOptionLabel){for(l=1;l<t.itemArr.length;l++)t.addSelectedInfo({index:l,checked:!1});this.checkAll(r,!1),t.checkAll(r,!1)}else t.itemArr[e].checked=!1,t.addSelectedInfo({index:e,checked:!1}),this.setCellChecked(e,i,!1);n=!1}if(t.options.allOption&&e>0){var h=!0;if(!0===s.checked){for(l=1;l<t.itemArr.length;l++)if(!t.itemArr[l].checked){h=!1;break}}else t.itemArr[e].checked=!1,h=!1;this.setCellChecked(0,i,h)}a.B.fireEvent(t,"oncellclick",e,i,n)}})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(e){
27==(e.charCode?e.charCode:e.keyCode)&&(t._closeSubLayer(),t.focus())})));for(var e=parseInt(this.itemTable.options.gridViewOptions.checkColumn),i=this.itemTable.gridView.getRowCount(),o=1==this.options.allOption?1:0,l=o;l<i;l++)"1"===this.itemTable.gridView.getCellData(l,e)?this.addSelectedInfo({index:l+o,checked:!0}):this.addSelectedInfo({index:l+o,checked:!1});this.setGridViewData()}else{this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"position:absolute;",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_ccb",w2table_main:"w2table_ccb_main",w2table_row:"w2table_ccb_row",w2table_col:"w2table_ccb_col",w2table_col_over:"w2table_ccb_col_over",w2table_col_checkbox:"w2table_ccb_col_checkbox",w2table_col_label:"w2table_ccb_col_label",checkbox:!0,navBtn:this.options.navBtn,escape:this.options.escape,editable:this.options.editable,wheelRows:this.options.wheelRows,parent_uuid:this.uuid,visibleColNum:this.options.visibleColNum,visibleColMax:this.options.visibleColMax}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate();t=this;this.itemTable.addClickEventListener((function(e,i){var o=document.getElementById(t.id+"_itemTable_"+i+"_checkbox");if(o&&o.value==WebSquare.allValue){for(var s=n.D.getBoolean(o.checked),r=1;r<t.itemArr.length;r++)if(n.D.getBoolean(t.options.checkDisabledOnAllCheck)||!t.itemDisabledArray[r]){var l=document.getElementById(t.id+"_itemTable_"+r+"_checkbox");l&&l.checked!=s&&(l.checked=s),t.addSelectedInfo({index:r,checked:s})}}else t.options.editable&&(t.mozTrickBuffer="",i=t.viewArr[i].index),t.addSelectedInfo({index:i,checked:o.checked});if(t.options.allOption)if(i>0){var h=!0;if(o.checked)if(t.options.editable&&t.editmode){t.itemArr[i].checked=!0;for(r=1;r<t.itemArr.length;r++)if(!t.itemArr[r].checked){h=!1;break}}else for(r=1;r<t.itemArr.length;r++){var d=document.getElementById(t.id+"_itemTable_"+r+"_checkbox");if(d&&!d.checked){h=!1;break}}else h=!1;document.getElementById(t.id+"_itemTable_0_checkbox").checked=h,t.options.editable&&(t.itemArr[0].allchecked=h)}else t.options.editable&&(t.itemArr[0].allchecked=o.checked);if(t.options.checkboxClickSync){var u=t.getValue(),c=t.getInfoArray(),p=t.convertInfoHash2Array(t.selectedInfo);p.length>0&&t.setSelectedInfo(p);var g=t.getValue();if(u!=g){var m={oldInfo:c,newInfo:t.getInfoArray(),oldValue:u,newValue:g};a.B.fireEvent(t,"onviewchange",m)}}a.B.fireEvent(t,"oncheckboxclick",i,o.checked,o.value)})),this.itemTable.addKeyDownEventListener((function(e){var i=e.charCode?e.charCode:e.keyCode;(13==i||27==i)&&(t.focus(),t.closeSubLayer())})),1==this.options.closeonmouseleave&&this.itemTable.addMouseLeaveEventListener((function(e){var i=t.render.offsetHeight,o=t.getAbsolutePosition("top");e.clientY>=o&&e.clientY<=o+i||t.closeSubLayer()})),this.options.useDrag&&(this.itemTable.event.addListener(this.itemTable.render,"onmousedown",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousedown)),this._dragGhost||(this._dragGhost=new WebSquare.uiplugin.group(this.id+"_dragGhost",{className:"w2checkcombobox_ghost"}),this._dragGhost.writeTo(WebSquare.getBody(),null,this.parentFrame),this._dragGhost.activate(),this._dragGhost.onComplete())),this.setSelectOptions(),this.setItemTable();var h=!0;for(l=0;l<this.getItemCount();l++)if(this.itemArr[l].checked){var d=document.getElementById(this.id+"_itemTable_"+l+"_checkbox");null!=d&&(d.checked=!0),this.addSelectedInfo({index:l,checked:null==d||d.checked})}else 1==this.options.allOption?(1==this.getItemCount()||this.itemArr[l].value!=WebSquare.allValue)&&(h=!1):h=!1;1==h&&1==this.options.allOption&&this.getItemCount()>0&&(document.getElementById(this.id+"_itemTable_0_checkbox").checked=!0)}
if(!this.options.editable)for(l=0;l<this.itemDisabledArray.length;l++)this.setItemDisabled(l,this.itemDisabledArray[l]);if(this.options.enableColumn&&this.refreshEnable(),this.options.navBtn&&!this.itemTable.getElementById(this.id+"_btnArea")){var u,c=[],p=WebSquare.language.getMessage("itemTable_cancel")||"선택해제",g=WebSquare.language.getMessage("itemTable_confirm")||"선택적용",m=document.createElement("div");if(m.className="w2checkcombobox_btnArea",m.id=this.id+"_btnArea",m.setAttribute("role","listitem option"),m.setAttribute("aria-setsize",this.options.visibleRowNum),m.setAttribute("aria-posinset",this.options.visibleRowNum),c.push("<div id='"+this.id+"_btn_confirm' class='w2checkcombobox_btn_confirm' role='button' title='"+g+"'>"+g+"</div>"),c.push("<div id='"+this.id+"_btn_cancel' class='w2checkcombobox_btn_cancel' role='button' title='"+p+"'>"+p+"</div>"),c=c.join(""),m.innerHTML=c,n.D.isIE()&&s.v.browserVersion()<=8){var f,b=this.itemTable.render.getElementsByTagName("div");for(l=0;f=b[l++];)if("w2checkcombobox_btn_div"==f.className){u=f;break}}else u=this.itemTable.render.getElementsByClassName("w2checkcombobox_btn_div")[0];u.appendChild(m),this.dom.confirmBtn&&this.dom.cancelBtn||(this.dom.confirmBtn=this.itemTable.getElementById(this.id+"_btn_confirm"),this.dom.cancelBtn=this.itemTable.getElementById(this.id+"_btn_cancel")),this.event.addListener(this.dom.confirmBtn,"onclick",this.event.bindAsEventListener(this,(function(){this.closeSubLayer()}))),this.event.addListener(this.dom.cancelBtn,"onclick",this.event.bindAsEventListener(this,(function(){if(this.options.editable){var t=0;if(this.options.allOption)document.getElementById(this.id+"_itemTable_0_checkbox").checked=!1,this.itemArr[0].allchecked=!1,t=1;for(var e=t;e<this.viewArr.length;e++){var i=this.viewArr[e].index;if(this.itemArr[i].checked=!1,this.addSelectedInfo({index:i,checked:!1}),(c=document.getElementById(this.id+"_itemTable_"+e+"_checkbox")).checked=!1,this.options.checkboxClickSync){var o=this.getValue(),s=this.getInfoArray(),r=this.convertInfoHash2Array(this.selectedInfo);r.length>0&&this.setSelectedInfo(r);var n=this.getValue();if(o!=n){var l={oldInfo:s,newInfo:this.getInfoArray(),oldValue:o,newValue:n};a.B.fireEvent(this,"onviewchange",l)}}}}else{var h=this.getItemCount();if("gridView"===this.itemTableMode){var d=parseInt(this.itemTable.options.gridViewOptions.checkColumn);for(h=this.itemTable.gridView.getRowCount(),this.options.allOption,e=0;e<h;e++){var u=this.itemTable.gridView._getTdElem(e,d);u&&(u.getElementsByTagName("input")[0].checked=!1),this.addSelectedInfo({index:e,checked:!1})}}else for(e=0;e<h;e++){var c;(c=document.getElementById(this.id+"_itemTable_"+e+"_checkbox"))&&(c.checked=!1,this.addSelectedInfo({index:e,checked:c.checked}))}}})))}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectOptions=function(){try{null!=this.itemTable&&"gridView"!=this.itemTableMode&&(this.options.editable?this.editmode?0==this.viewArr.length||this.itemTable.setItemArr(this.viewArr):null!=this.itemArr&&0!=this.itemArr.length?this.itemTable.setItemArr(this.itemArr):this.itemTable.hide():this.itemTable.setItemArr(this.itemArr))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setItemTable=function(){try{if(this.options.editable){for(var t=0;t<this.viewArr.length;t++)this.viewArr[t].checked=!(!this.itemArr[this.viewArr[t].index].checked&&!this.itemArr[this.viewArr[t].index].allchecked)||"";this.itemTable.setItemArr(this.viewArr);for(var e=0;e<this.viewArr.length;e++)this.setItemDisabled(e,this.itemDisabledArray[e])}var i=this.render.offsetWidth-2,o=WebSquare.style.getAbsoluteLeft(this.render),a=WebSquare.style.getAbsoluteTop(this.render),n=this.getVisibleItemCount(),l=0,h=this.options.visibleColNum>1||this.options.visibleColMax>1
;if(!0===this.options.navBtn)if(this.getElementById(this.id+"_btnArea"))l=WebSquare.style.getSize(this.getElementById(this.id+"_btn_confirm"),"outermarginwidth")+WebSquare.style.getSize(this.getElementById(this.id+"_btn_cancel"),"outermarginwidth");"gridView"===this.itemTableMode||"grid"===this.itemTableMode||"column"===this.options.submenuSize||h||(this.itemTable.setStyle("width",this.render.offsetWidth+"px"),this.itemTable.render.firstChild.style.width=this.render.offsetWidth+"px");var d=this.itemTable.render.getElementsByTagName("tr"),u=this.itemTable.render.getElementsByTagName("td");if("gridView"!==this.itemTableMode&&"grid"!==this.itemTableMode&&u&&u.length>0){var c,p=0;c=h?Math.min(d.length,this.options.visibleRowNum):this.options.editable?Math.min(u.length,this.options.visibleRowNum):Math.min(n,this.options.visibleRowNum);for(e=0;e<c;e++)p+=h?d[e].offsetHeight:u[e].offsetHeight;1==this.options.navBtn?(this.getElementById(this.itemTable.id+"_wrapper").style.height=p+"px",p+=u[0].offsetHeight):s.v.browserCheck.moz&&p<34&&1==c&&(p=34),this.itemTable.setStyle("height",p+"px")}if("column"==this.options.submenuSize){if(this.itemTable.render.scrollHeight>this.itemTable.render.offsetHeight){var g=this.itemTable.mainTable.offsetWidth+17;this.itemTable.render.offsetWidth!==g&&this.itemTable.setStyle("width",g+"px")}}else if(this.itemTableMode&&this[this.itemTableMode+"Options"].width)!0===this.options.navBtn&&this.getElementById(this.id+"_btnArea")&&(this.getElementById(this.id+"_btnArea").style.width=this.itemTable.render.offsetWidth+"px");else if("fixed"==this.options.submenuSize)this.itemTable.setStyle("width",i+"px"),!0===this.options.navBtn&&(this.itemTable.render.firstChild.firstChild.style.width=i+"px",this.getElementById(this.id+"_btnArea")&&(l>i&&l/2<i&&(p+=u[0].offsetHeight,this.itemTable.setStyle("height",p+"px")),this.getElementById(this.id+"_btnArea").style.width=i+"px")),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=i+"px":this.itemTable.render.firstChild.style.width=i-17+"px";else if("auto"==this.options.submenuSize){var m=2;"gridView"!==this.itemTableMode&&"grid"!==this.itemTableMode||(m=0);var f=this.render.offsetWidth-m,b=this.itemTable.render.clientWidth,y=this.itemTable.maxWidth,v=0;if((b=f<y?y:f)<f-2&&(b=f-2),n>this.options.visibleRowNum&&(v=17),b=Math.max(l,b),this.itemTable.setStyle("width",b+"px"),!0===this.options.navBtn&&this.getElementById(this.id+"_btnArea")&&(this.getElementById(this.id+"_btnArea").style.width=b+"px"),this.itemTable.render.clientHeight>=this.itemTable.render.scrollHeight||n<=this.options.visibleRowNum)this.itemTable.render.firstChild.style.width=b+"px",!0===this.options.navBtn&&(this.itemTable.render.firstChild.firstChild.style.width=b+"px");else{this.itemTable.render.firstChild.style.width=b-v+"px";var w=this.itemTable.render.firstChild.offsetWidth;w>b-v&&(this.itemTable.render.firstChild.style.width=w+"px",this.itemTable.setStyle("width",Math.max(l,w)+v+"px"))}}else this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1&&this.itemTable.setStyle("width",Math.max(l,this.itemTable.render.firstChild.offsetWidth)+v+"px");var S=this.options.direction;if("auto"==S){var C=document.body.scrollTop;C<document.documentElement.scrollTop&&(C=document.documentElement.scrollTop);var x=a-C,_=document.documentElement.clientHeight-(x+this.render.offsetHeight),I=this.itemTable.render.offsetHeight,T=Math.max(_,x);if(T<I&&u&&u.length>0){var k=0;for(e=0;e<u.length&&!(k+u[e].offsetHeight+2>T);e++)k+=u[e].offsetHeight;this.itemTable.rowCount=e,this.itemTable.setStyle("height",k+"px"),T!==_&&(S="up")}else _<I&&x>I&&(S="up")}"up"==S?a-=this.itemTable.render.offsetHeight:a+=this.render.offsetHeight,document.documentElement.clientWidth<o+this.itemTable.render.offsetWidth&&(o=o+this.render.offsetWidth-this.itemTable.render.offsetWidth),this.itemTableDirection=S,this.itemTable.setPosition(o,a),
WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption){var t=[],e=null;"label"==this.options.sortOption?e=function(){return this.label}:"value"==this.options.sortOption&&(e=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var o=this.itemArr[i];o.toString=e,t.push(o)}t.sort(),"descending"==this.options.sortMethod&&t.reverse(),this.itemArr=t}if(this.options.editable){for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0,allchecked:""}].concat(this.itemArr)),this.viewArr=[];for(i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,checked:""})}else{if("0"!=this.options.displayMode)for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr))}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.openSubLayer=function(){try{WebSquare.getBody().getLayerListener().show(this.id)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._openSubLayer=function(){try{if(this.oldValue=this.getValue(),this.setSubLayer(),!this.isOpen){if(this.itemTable.show(),this.addClass("w2checkcombobox_open"),this.itemTable.render.setAttribute("aria-expanded","true"),this.options.useEdit||this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),this.options.editable||this.itemTable.focus(),""!=this.options.animation){var t="down",e=WebSquare.style.getAbsoluteTop(this.render),i=document.body.scrollTop;i<document.documentElement.scrollTop&&(i=document.documentElement.scrollTop);var o=e-i,s=document.documentElement.clientHeight-(o+this.render.offsetHeight),a=this.itemTable.render.offsetHeight;s<a&&o>a&&(t="up"),"show"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().fadeIn("fast"):"slidedown"==this.options.animation.toLowerCase()&&"down"==t&&$("#"+this.itemTable.id).hide().slideDown("fast")}if(this.editmode&&void 0!==this.dom.input&&null!=this.dom.input&&this.setfFocus(),this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var l=this._getSelectedInfo();if(l.length>0){var h=this.customLabelFormatter.call(this,l,this.isOpen);this.dom.label&&(this.dom.label.innerHTML=h)}}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.closeSubLayer=function(t){try{var e={documentClick:t};"grid"==this.itemTableMode&&this.gridItemArr.length>0?this.itemTable.grid.applyFocusedCellOut(this.itemTable.grid.focusedCell[0]):"gridView"==this.itemTableMode&&this.gridViewItemArr.length>0&&this.itemTable.gridView.applyFocusedCellOut(this.itemTable.gridView.focusedCell[0]),WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.closeSubLayer1=function(t){try{var e={documentClick:t};WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._closeSubLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.getValue(),o=this.getInfoArray();if(this.isOpen&&null!=this.itemTable){this.itemTable.hide(),this.removeClass("w2checkcombobox_open"),
this.itemTable.render.setAttribute("aria-expanded","true"),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id);var s=this.convertInfoHash2Array(this.selectedInfo);if(s.length>0&&this.setSelectedInfo(s),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var l=this._getSelectedInfo(),h=this.customLabelFormatter.call(this,l,this.isOpen);""==h&&1==this.options.chooseOption&&(h=this._getChooseOptionLabel(),h=WebSquare.xml.decode(h).replace("&nbsp;"," ")),this.dom.label&&(this.dom.label.innerHTML=h)}var d=this.getValue();if(i!=d){var u={oldInfo:o,newInfo:this.getInfoArray(),oldValue:i,newValue:d};a.B.fireEvent(this,"onviewchange",u)}!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1),this.selectedInfo={}}this._dragGhost&&this._dragGhost.hide()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedInfo=function(t){try{if(this.modelControl.isBinded())this.modelControl.setData(this.getInfoValue(t));else{var e=this.getValue();this.setSelectedInfoNM(t)&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getInfoValue=function(t){try{for(var e=0;e<this.itemArr.length;e++){var i=this.itemArr[e].checked;if(i){for(var o=null,s=0;s<t.length;s++)if(e==parseInt(t[s].index,10)){o=t[s];break}o||t.push({index:e,checked:i})}}var a=[],n=this.convertInfoArray2Hash(t);for(e=0;e<this.itemArr.length;e++){(o=n[e])&&o.checked&&a.push(this.itemArr[e].value)}return a.join(this.separator)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.convertInfoArray2Hash=function(t){try{for(var e={},i=0;i<t.length;i++)e[t[i].index]=t[i];return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.convertInfoHash2Array=function(t){try{var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.addSelectedInfo=function(t){try{return!(!t||void 0===t.index)&&(this.selectedInfo[t.index]=t,!0)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedInfoNM=function(t){try{if(!n.D.isArray(t))return!1;for(var e=0;e<t.length;e++){var i=t[e].index,o=n.D.getBoolean(t[e].checked);i=parseInt(i);var s=document.getElementById(this.id+"_itemTable_"+i+"_checkbox");s&&(s.checked=o),this.itemArr[i].checked=o}var a="";if(1==this.options.allOption){for(var l=!0,h=document.getElementById(this.id+"_itemTable_0_checkbox"),d=1;d<this.itemArr.length;d++)if(!this.itemArr[d].checked){l=!1;break}if(h&&h.checked!=l&&(h.checked=l),1==this.options.displayAllOptionLabel)if(document.getElementById(this.id+"_itemTable_0_checkbox")){if(h)if(1==h.checked)a=WebSquare.language.getMessage("CheckCombobox_allOption_label")||"전체선택";else a=this.getText()}else a=1==l?WebSquare.language.getMessage("CheckCombobox_allOption_label")||"전체선택":this.getText();else a=this.getText()}else a=this.getText();return this.options.escape&&(a=this._encode(a)),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&""==(a=this.customLabelFormatter.call(this,this._getSelectedInfo(),this.isOpen))&&1==this.options.chooseOption&&(a=this._getChooseOptionLabel(),a=WebSquare.xml.decode(a).replace("&nbsp;"," ")),this.dom.label&&(this.dom.label.innerHTML=a),""==a&&1==this.options.chooseOption&&(a=this._getChooseOptionLabel(),a=WebSquare.xml.decode(a).replace("&nbsp;"," "),this.dom.label&&(this.dom.label.innerHTML=a)),(this.options.editable||this.options.useEdit)&&(this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=a),"title"==this.options.tooltipMode&&(document.getElementById(this.id).title=a),!0
}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getChooseOptionLabel=function(){try{var t=this.options.chooseOptionLabel||this.defaultChooseOptionLabel;if(this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var e=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);e&&(t=e)}return t}catch(t){r.w.printStackTrace(t)}},u.prototype.getSelectedInfo=function(){try{for(var t=this.getItemCount(),e=[],i=0;i<t;i++)this.itemArr[i].checked&&e.push({index:i,label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,checked:!0});return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getSelectedInfo=function(){try{for(var t=this.getItemCount(),e=[],i=0;i<t;i++)this.itemArr[i].checked&&e.push({index:i,label:this.itemArr[i].orgLabel,value:this.itemArr[i].value});return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getInfo=function(t){try{var e;return this.itemArr.length>t&&((e={}).index=t,e.label=this.itemArr[t].label,e.value=this.itemArr[t].value,e.checked=n.D.getBoolean(this.itemArr[t].checked)),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getInfoArray=function(){try{for(var t=[],e=0;e<this.itemArr.length;e++){var i={};i.index=e,i.label=this.itemArr[e].label,i.value=this.itemArr[e].value,i.checked=n.D.getBoolean(this.itemArr[e].checked),t.push(i)}return t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue();if(this.modelControl.isBinded()?this.modelControl.setData(t):1==this.setValueNM(t)&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()}),"gridView"===this.itemTableMode)for(var i=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),o=parseInt(this.itemTable.options.gridViewOptions.checkColumn),s=this.itemTable.gridView.getCellInfo(0,o),l=s.options.trueValue,h=s.options.falseValue,d=1==this.options.allOption?1:0,u=this.itemTable.gridView.getRowCount()-d,c=0;c<u;c++){var p=this.itemTable.gridView._getTdElem(c+d,o);!0===this.itemArr[c+d].checked?(p&&(p.getElementsByTagName("input")[0].checked=!0),this.addSelectedInfo({index:c+d,checked:!0}),i.setCellData(c+d,o,l)):(p&&(p.getElementsByTagName("input")[0].checked=!1),this.addSelectedInfo({index:c+d,checked:!1}),i.setCellData(c+d,o,h))}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValueNM=function(t){try{if(!n.D.isArray(t)){if(n.D.isNull(t))return;var e=t.toString();t=e.split(this.separator)}for(var i=[],o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value!=WebSquare.allValue){var a={};a.index=s,a.checked=!1;for(var l=0;l<t.length;l++)if(t[l]==this.itemArr[s].value){a.checked=!0;break}i.push(a)}return this.setSelectedInfoNM(i)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getValue=function(t){try{t||(t=this.separator);for(var e=this.getItemCount(),i=[],o=0;o<e;o++)this.itemArr[o].checked&&i.push(this.itemArr[o].value);return i.join(t).wq_trim()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getValueArray=function(){try{for(var t=this.getItemCount(),e=[],i=0;i<t;i++)this.itemArr[i].checked&&e.push(this.itemArr[i].value);return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setText=function(t){try{for(var e=this.getItemCount(),i=[],o=this._getRangeTextArray(t),s=0;s<e;s++)for(var a=0;a<o.length;a++)if(this.itemArr[s].label==o[a]){i.push(this.itemArr[s].value);break}this.setValue(i.join(this.separator))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getText=function(t){try{return this._getRangeText(this.itemArr,this.getItemCount(),t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getRangeText=function(t,e,i,o){try{i||(i=this.separator);for(var s,a=[],n=!1,l=!1,h=0;h<e;h++){(o?!0===o[h+"_"]:t[h].checked)?this.options.rangeSeparator?(h-s==1&&h!==e-1?n||(n=!0,a.push(this.options.rangeSeparator),l=!0):(n=!1,a.push(t[h].label)),s=h):a.push(t[h].label):n&&(a.push(t[s].label),n=!1)}var d=""
;if(l)for(h=0;h<a.length;h++)d+=a[h],h!==a.length-1&&a[h]!==this.options.rangeSeparator&&a[h+1]!==this.options.rangeSeparator&&(d+=i);else d=a.join(i).wq_trim();return d}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getTextArray=function(t){try{for(var e=this.getItemCount(),i=[],o=0;o<e;o++)this.itemArr[o].checked&&i.push(this.itemArr[o].label);return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._getRangeTextArray=function(t){try{var e=t.split(this.separator);if(this.options.rangeSeparator&&t.indexOf(this.options.rangeSeparator)>=0){for(var i=[],o=this.getItemCount(),s=0;s<e.length;s++)if(e[s].indexOf(this.options.rangeSeparator)>=0){for(var a=e[s].split(this.options.rangeSeparator),n=NaN,l=NaN,h=0;h<o&&(this.itemArr[h].label==a[0]?n=h:this.itemArr[h].label==a[1]&&(l=h),isNaN(n)||isNaN(l));h++);for(h=n;h<=l;h++)i.push(this.itemArr[h].label)}else i.push(e[s]);return i}return e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.addItemArr=function(t,e){try{this.itemArr.push({label:t,value:e}),this.itemDisabledArray.push(!1)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.addItem=function(t,e,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var o={value:t,label:e};if(this.itemArr.splice(i,0,o),"0"!=this.options.displayMode&&(this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i)),this.itemDisabledArray.splice(i,0,!1),this.options.editable&&this.options.interactionMode){this.viewArr=[];for(var s=0;s<this.itemArr.length;s++)this.viewArr.push({label:this.itemArr[s].label,value:this.itemArr[s].value,orgLabel:this.itemArr[s].orgLabel,index:s})}return this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.setValueNM(this.getValue()),i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.deleteItem=function(t){try{if(t=parseInt(t,10),isNaN(t))return;var e=null;if(t>=0&&t<this.getItemCount()){if(e=this.itemArr.splice(t,1)[0],this.options.editable&&this.options.interactionMode){this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i})}this.itemDisabledArray.splice(t,1)}return this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.setValueNM(this.getValue()),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.removeAll=function(t){try{var e=this.getValue();this.itemArr=new Array,t&&1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr)),this.setSelectOptions(this.itemArr),this.itemDisabledArray=new Array;for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(!1);this.options.setDataRemoveAll&&(this.modelControl.isBinded()?this.modelControl.setData(""):e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()}))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":"component"==this.options.renderType?e?(this.closeSubLayer(),this.getElementById(this.id+"_label").style.color="#848684"):this.getElementById(this.id+"_label").style.color="":e?this.dom.select.setAttribute("disabled","disabled"):this.dom.select.removeAttribute("disabled");var i=this.dom.button;1==e?(this.addClass(this.render,"w2checkcombobox_disabled"),null!=i&&this.addClass(i,"w2checkcombobox_button_disabled")):(this.removeClass(this.render,"w2checkcombobox_disabled"),null!=i&&this.removeClass(i,"w2checkcombobox_button_disabled"));break;case"mandatory":
1==e?this.addClass(this.render,"w2checkcombobox_mandatory"):this.removeClass(this.render,"w2checkcombobox_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hide=function(){try{this.closeSubLayer(),l.s.prototype.hide.call(this)}catch(t){r.w.printStackTrace(t)}},u.prototype.checkAll=function(t){try{void 0===t&&(t=!0);for(var e=[],i=0;i<this.itemArr.length;i++)this.itemArr[i].value!=WebSquare.allValue&&e.push({index:i,checked:t});return null!=this.itemTable&&1==this.options.allOption&&0!=e.length&&document.getElementById(this.id+"_itemTable_0_checkbox")&&(document.getElementById(this.id+"_itemTable_0_checkbox").checked=!!t),this.setSelectedInfo(e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},u.prototype.setInitValue=function(t){try{var e=this.getValue();""===this.options.initValue&&this.itemArr&&this.itemArr[0]&&(this.options.initValue=this.itemArr[0].value),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setItemDisabled=function(t,e){try{if((t=parseInt(t))<0||t>=this.getVisibleItemCount()||"gridView"===this.itemTableMode)return;if(e=n.D.getBoolean(e),this.itemDisabledArray[t]=e,this.itemTable){var i=this.itemTable.getDomList("checkboxArr","input"),o=this.itemTable.getDomList("checkboxItemArr","td");i[t].disabled=e,i[t].itemDisabled=e,1==e?this.addClass(o[t],"w2checkcombobox_item_disabled"):this.removeClass(o[t],"w2checkcombobox_item_disabled")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getItemDisabled=function(t){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;return this.itemDisabledArray[t]}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=n.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},u.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=n.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},u.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){r.w.printStackTrace(t)}},u.prototype.setNextTabID=function(t,e){try{null!=t&&n.D.setNextTabID(this.id,t,e)}catch(t){r.w.printStackTrace(t)}},u.prototype.handleClickEvent=function(t){try{if(this.options.disabled)return!1;if(this.options.editable||this.options.useEdit){this._parent_uuid&&a.B.stopPropagation(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2checkcombobox_input")&&this.isOpen)return;if(e.match("w2checkcombobox_col_label"))return this.isOpen&&!this.options.useEdit?this.closeSubLayer():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),this.changeMode(),
void(this.options.useEdit&&this.openSubLayer())}if(this.mozTrickBuffer="",this.editmode=!1,this.options.allOption&&this.getItemDisabled(0)&&this.setItemDisabled(0,!1),!this.options.interactionMode){this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i})}var o=this.isOpen;this.setSubLayer(),o==this.isOpen&&(this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()),e=null}else this.focus(),this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(this.options.useEdit&&this.event.isMe(t,this.dom.input))return void(13===e&&this.dom.input.blur());if(this.options.editable){if(this.event.isMe(t,this.dom.input)){if(this.editmode=!0,this.inputKeyDown(t,!1),(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.mozTrickCompare(),n.D.setInterval(this.mozTrickCompare,{key:this.id+"_mozTrickCompare",caller:this,delay:10})),9==e)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(a.B.preventDefault(t),i=n.D.getPreTabbableComp(this.id))return this.endEdit(),this.isOpen&&this.closeSubLayer(),void i.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(a.B.preventDefault(t),i=n.D.getNextTabbableComp(this.id))return this.endEdit(),this.isOpen&&this.closeSubLayer(),void i.focus();return}e=t.charCode?t.charCode:t.keyCode;if(s.v.browserCheck.opera){if(18==e&&!this.isOpen)return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void this.changeMode()}else{if(!(40!=e&&38!=e||this.isOpen))return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void this.changeMode()}if(9==e)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(a.B.preventDefault(t),i=n.D.getPreTabbableComp(this.id)))return this.isOpen&&this.closeSubLayer(),void i.focus()}else null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(a.B.preventDefault(t),(i=n.D.getNextTabbableComp(this.id))&&(this.isOpen&&this.closeSubLayer(),i.focus()));if(null!=this.itemTable&&this.viewArr.length>0)1==this.isOpen&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable.handleKeydownEvent(t),this.editmode=!1;else if(null!=this.itemTable&&""==this.itemTable.render.style.display)return;if(null!=this.itemTable&&""==this.itemTable.render.style.display)return}else{if(13==e||40==e)return void this.handleClickEvent(t);var i;if(9==e)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(a.B.preventDefault(t),i=n.D.getPreTabbableComp(this.id)))return void i.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(a.B.preventDefault(t),i=n.D.getNextTabbableComp(this.id)))return void i.focus();if(this.isOpen)return;a.B.stopPropagation(t)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeyupEvent=function(t){try{if(!this.event.isMe(t,this.dom.input))return;var e;if(t.key)e=t.key;else{var i=t.charCode?t.charCode:t.keyCode;e=String.fromCharCode(i)}if(e===this.options.separator)for(var o=this._getRangeTextArray(this.dom.input.value),s=this.getItemCount(),a=0;a<s;a++)if(this.itemArr[a].value!==WebSquare.allValue&&this.itemArr[a].value!==this.options.chooseOptionValue){var n=document.getElementById(this.id+"_itemTable_"+a+"_checkbox"),l=!1;this.itemArr[a].label===o[0]&&(l=!0,o.shift()),n&&(n.checked=l),this.itemArr[a].checked=l}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleFocusEvent=function(t){try{if(a.B.stopEvent(t),(this.options.editable||this.options.useEdit)&&!this.isOpen){
var e=document.getElementById(this.id+"_main_tbody");this.addClass(e,"w2checkcombobox_selected"),"onfocus"==this.options.editModeEvent&&this.changeMode()}this.addClass(this.dom.tbody,"w2checkcombobox_focus"),this.addClass("w2checkcombobox_body_focus")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleClickEventDocument=function(t){try{!this.event.isMe(t,this.render)&&this.options.handleOtherClick&&(null!=this.itemTable&&this.itemTable.inputBlurInside&&(s.v.setTimer(this.endEdit,{key:this.id+"_handleClickEventDocument",caller:this,delay:1}),this.itemTable.inputBlurInside=!1),this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),null!=this.itemTable&&0==this.findkeymode?WebSquare.getBody().getLayerListener().isShow(this.id)&&this.closeSubLayer():null!=this.itemTable&&1==this.findkeymode&&(this.findkeymode=!0))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleBlurEvent=function(t){try{a.B.stopEvent(t),this.removeClass(this.dom.tbody,"w2checkcombobox_focus"),this.removeClass("w2checkcombobox_body_focus")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleblurEventInput=function(){"none"!=this.dom.input.style.display&&this.options.handleOtherClick&&(null==this.itemTable||null!=this.itemTable&&!this.itemTable.inputBlurInside)&&(this.endEdit(),this.isOpen&&this.closeSubLayer())},u.prototype.handleMouseoverEvent=function(t){try{a.B.stopEvent(t),this.addClass(this.dom.tbody,"w2checkcombobox_over"),this.addClass("w2checkcombobox_body_over")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),this.removeClass(this.dom.tbody,"w2checkcombobox_over"),this.removeClass("w2checkcombobox_body_over")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseleaveEvent=function(t){try{var e=this.render.offsetHeight-1,i=this.render.offsetWidth-1,o=this.getAbsolutePosition("top"),s=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(t.clientX<s||t.clientX>s+i||t.clientY>o||t.clinetY>o+e)&&this.closeSubLayer():(t.clientX<s||t.clientX>s+i||t.clientY<o||t.clinetY>o+e)&&this.closeSubLayer())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDisplayAllOptionLabel=function(t){try{if(!this.options.allOption)return;var e=this.options.displayAllOptionLabel,i=n.D.getBoolean(t);this.options.displayAllOptionLabel=i;var o=document.getElementById(this.id+"_itemTable_0_checkbox");if(e!=i){var s=!0;if(!o||!o.checked)for(var a=1;a<this.getItemCount();a++)if(!this.itemArr[a].checked){s=!1;break}if(!1===s)return;var l="";l=1==i?WebSquare.language.getMessage("CheckCombobox_allOption_label")||"전체선택":this.getText(),this.options.escape&&(l=this._encode(l)),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&(l=this.customLabelFormatter.call(this,this._getSelectedInfo(),this.isOpen)),this.dom.label&&(this.dom.label.innerHTML=l),"title"==this.options.tooltipMode&&(document.getElementById(this.id).title=l)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.serialize=function(){return{selectedInfo:this.getSelectedInfo()}},u.prototype.restore=function(t){try{return this.checkAll(!1),this.setSelectedInfo(t.selectedInfo),!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype.changeMode=function(){try{if(this.editmode=!0,this.findStop=!1,"block"!=this.dom.input.style.display){if(this.options.rangeSeparator)return this.dom.input.value=this.getText(),this.showEditMode(!0),void("focus"!=this.options.editType?(this.dom.input.select(),this.setfFocus()):document.activeElement!=this.dom.input&&this.setfFocus());var t="",e=this.getCheckedValue(this.options.searchTarget);e.length>0&&(t=e.join(this.separator).wq_trim());var i=t;if(this.options.useEdit||(i+=" "),"focus"==this.options.editType){this.showEditMode(!0),document.activeElement!=this.dom.input&&this.setfFocus()
;var o=WebSquare.xml.decode(i);this.dom.input.value=o,(n.D.isOpera()||n.D.isFF())&&this.dom.input.setSelectionRange(o.length,o.length)}else this.dom.input.value=WebSquare.xml.decode(i),this.showEditMode(!0),this.dom.input.select(),this.setfFocus()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getCheckedValue=function(t){var e=[];t||(t="orgLabel");for(var i=0;i<this.itemArr.length;i++)this.itemArr[i].checked&&e.push(this.itemArr[i][t]);return e},u.prototype.showEditMode=function(t){t?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):s.v.setTimer((function(){try{this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible"}catch(t){}}),{key:this.id+"_showEditMode",caller:this,delay:1})},u.prototype.setfFocus=function(){try{this.dom.input.focus(),null!=this.itemTable&&(this.itemTable.inputBlurInside=!1)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),!0===t?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(t){r.w.printStackTrace(t)}return t},u.prototype.initCheckCombobox=function(){try{this.removeAll(),this.dom.input.value="",this.dummyData=null,this.isOpen&&this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.removeAll=function(t){try{if(this.itemArr=new Array,t&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption)){var e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}this.setSelectOptions(this.itemArr),this.itemArr.length>0?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[0].label):this.itemArr[0].label:this.dom.label.innerHTML=""}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.mozTrickCompare=function(){try{this.dom.input.value!=this.trickBuffer&&(this.trickBuffer=this.dom.input.value,0==this.findStop&&this.inputKeyDown({},!0))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInputFocus=function(){try{this.changeMode()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.inputKeyDown=function(t,e){try{if(0==e)var i=t.charCode?t.charCode:t.keyCode;if(this.interactionMode){if(this.editmode=!1,0==e)if("default"==this.options.interactionKey||this.isOpen||this.options.interactionEnterKey)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus());if(13==i)return void(this.options.interactionEnterKey?this.mytime=this.runSubmission(i):this.enterHandle(t));if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return this.arrowHandle(t),WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus(),s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.endEdit(),void(this.isOpen&&this.closeSubLayer())}}else;else this.options.interactionKey;if(!this.options.interactionEnterKey){var o=this;this.mytime=setTimeout((function(){o.runSubmission(i)}),100)}return}if(0==e)if(40!=i||this.isOpen){
if(38==i||33==i||40==i||34==i||35==i||36==i)return s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus());if(13==i)return void this.enterHandle(t);if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return this.arrowHandle(t),s.v.browserCheck.chrome||s.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0),void(this.isOpen&&this.closeSubLayer())}}else if(""==this.dom.input.value.wq_trim())return void this.render.click();if(this.itemArr.length>0){o=this;this.mytime=setTimeout((function(){o.find()}),100)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.arrowHandle=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(null==this.itemTable)return;var i=this.findinItemArr(this.dom.input.value,this.options.searchTarget);return!this.editmode&&!this.findkeymode||""!=this.dom.input.value&&0!=this.viewArr.length?(9==e||9==e&&t.shiftKey?this.addSelectedInfo({index:i,checked:!0}):this.itemTable.handleKeydownEvent(t),void(this.mozTrickBuffer="")):void a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.find=function(){try{var t=this.dom.input.value;if(""==t)return this.mozTrickBuffer=t,void(null!=this.itemTable&&this.closeSubLayer());if(this.mozTrickBuffer==t)return void(this.mozTrickBuffer=t);this.mozTrickBuffer=t,this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(t=t.toLowerCase());for(var e=0;e<this.itemArr.length;e++)if(!this.itemArr[e].noItem){var i=!1;if(this.itemArr[e].orgLabel||(this.itemArr[e].orgLabel=this.itemArr[e].label,this.itemArr[e].label=this.getItemText(e)),!i&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var o=this.options.caseSensitive?this.itemArr[e].orgLabel:this.itemArr[e].orgLabel.toLowerCase();"contain"==this.search?i=this.myhelper.containWith(o,t):"start"==this.search?i=this.myhelper.startWith(o,t):"none"==this.search&&(i=o==t)}if(!i&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var s=this.options.caseSensitive?this.itemArr[e].value:this.itemArr[e].value.toLowerCase();"contain"==this.search?i=this.myhelper.containWith(s,t):"start"==this.search?i=this.myhelper.startWith(s,t):"none"==this.search&&(i=s==t)}var a=this.itemArr[e].label;if(this.options.useKeywordHighlight){var n=a.indexOf(this.mozTrickBuffer);n>=0&&(a=a.substring(0,n)+"<span class='w2checkcombobox_keyword'>"+this.mozTrickBuffer+"</span>"+a.substring(n+this.mozTrickBuffer.length,a.length))}i&&this.viewArr.push({value:this.itemArr[e].value,label:a,orgLabel:this.itemArr[e].orgLabel,index:e})}if(this.options.disabled)return!1;this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr),this.setItemDisabled(0,!0)),this.openSubLayer({select:!1})):this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getFormattedValue=function(t,e){try{var i=e;if(this.options.displayFormatter){if(!this.displayFormatter){this.fixedIndex=-1,1==this.options.allOption&&this.fixedIndex++,1==this.options.chooseOption&&this.fixedIndex++;try{var o=n.D.getGlobalFunction(this.options.displayFormatter,this.scope_id);"function"==typeof o&&(this.displayFormatter=o)}catch(t){}}this.displayFormatter&&t>this.fixedIndex&&(i=this.displayFormatter(e))}return i}catch(t){r.w.printStackTrace(t)}},u.prototype.enterHandle=function(t){try{var e,i=this.dom.input.value;if(a.B.fireEvent(this,"oneditend",i),
(null==this.itemTable||null==this.itemTable.selectedCell)&&(null==this.itemTable&&this.setSubLayer(),null==this.itemTable.selectedCell)){var o=this.findinItemArr(this.dom.input.value,this.options.searchTarget);if("clear"===this.noResult);else if("previous"===this.noResult)void 0===o||this.addSelectedInfo({index:o,checked:!0});else if("noEnd"===this.noResult){if(void 0===o)return;this.addSelectedInfo({index:o,checked:!0})}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==o?(this.selectedInfo={},e=this.findinItemArr(this.viewArr[0].value,"value")):e=o,this.addSelectedInfo({index:e,checked:!0})):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(this.selectedInfo={},e=this.findinItemArr(this.itemArr[0].value,"value"),this.addSelectedInfo({index:e,checked:!0})))}if(s.v.browserCheck.opera&&a.B.stopEvent(t),this.mozTrickBuffer="",null!=this.itemTable.selectedCell)if(e=this.findinItemArr(this.dom.input.value,this.options.searchTarget),"clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode?void 0===e&&(this.selectedInfo={}):(void 0===e&&void 0===(e=this.itemTable.selectedCell.index)&&(e=this.itemTable.selectedCell.getAttribute("index")),this.addSelectedInfo({index:e,checked:!0}));else if("noEnd"===this.noResult){if(void 0===e)return;this.addSelectedInfo({index:e,checked:!0})}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==e&&(e=this.findinItemArr(this.viewArr[0].value,"value")),this.addSelectedInfo({index:e,checked:!0})):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(e=this.findinItemArr(this.itemArr[0].value,"value"),this.selectedInfo={},this.addSelectedInfo({index:e,checked:!0})));this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.focus(),this.closeTable()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.findinItemArr=function(t,e){try{for(var i=e||"label",o=0;o<this.itemArr.length;o++)if("value"===i){if(t==this.itemArr[o].value)return o}else if("label"===i){if(1==this.options.displayMode||2==this.options.displayMode){if(t==this.itemArr[o].orgLabel)return o}else if(t==this.itemArr[o].label)return o}else if("both"===i){if(t==this.itemArr[o].orgLabel||t==this.itemArr[o].value)return o}else if("all"===i&&t==this.itemArr[o].orgLabel+"|"+this.itemArr[o].value)return o;if(this.dummyData&&("value"===i&&this.dummyData.value||"label"===i&&t===this.dummyData.label||"all"===i&&t===this.dummyData.label+"|"+this.dummyData.value))return NaN}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.runSubmission=function(t){try{var e=!0,i=this.dom.input.value,o=n.D.getStringByteSize(i);if(this.options.interactionMinByteLength>0&&this.options.interactionMinByteLength>o&&(e=!1),"false"!=this.options.allowEmptySubmission&&""==i||"default"==this.options.interactionKey&&this.mozTrickBuffer==i&&(e=!1),e)if(this.mozTrickBuffer=i,""!=this.options.submissionFunc.wq_trim()){var s=n.D.getGlobalFunction(this.options.submissionFunc,this.scope_id);"function"==typeof s&&s(i,t)}else if(""!=this.options.submission.wq_trim()){var a="<key>"+WebSquare.xml.encode(i)+"</key>";WebSquare.WebSquaredoc.models[0].rebuild(WebSquare.xml.parse(a),this.options.keyInputRef),WebSquare.WebSquaredoc.models[0].refresh(),WebSquare.ModelUtil.executeSubmission(this.options.submission)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setItemSet=function(t,e,i){try{void 0===this.itemsetObj&&(this.itemsetObj={});var o=!1;e==this.itemsetObj.label&&i==this.itemsetObj.value||(o=!0),this.itemsetObj.nodeset=t,o&&(this.itemsetObj.label=e,this.itemsetObj.value=i),this.buildItemArr();for(var a=0;a<this.itemArr.length;a++)this.itemArr[a].orgLabel=this.itemArr[a].label,this.itemArr[a].label=this.getItemText(a);if(this.options.interactionMode){if(s.v.clearTimer(this.id+"_showEditMode",!0),
1==this.options.allOption&&this.itemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(a=0;a<this.itemArr.length;a++){var n=this.itemArr[a].label;if(this.options.useKeywordHighlight){var l=n.indexOf(this.mozTrickBuffer);l>=0&&(n=n.substring(0,l)+"<span class='w2checkcombobox_keyword'>"+this.mozTrickBuffer+"</span>"+n.substring(l+this.mozTrickBuffer.length,n.length))}this.viewArr.push({label:n,orgLabel:this.itemArr[a].orgLabel,value:this.itemArr[a].value,index:a})}}else{if(1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(a=0;a<this.itemArr.length;a++)this.viewArr.push({label:this.itemArr[a].label,value:this.itemArr[a].value,orgLabel:this.itemArr[a].orgLabel,index:a})}var h=this.getCheckedValue(this.options.searchTarget),d="";h.length>0&&(d=h.join(this.separator).wq_trim()),this.itemArr.length>0?this.dom.label.innerHTML=d:this.dom.label.innerHTML=""}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.buildItemArr=function(){try{this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.itemArr=[],this.itemsetObj.nodeset.match("data:")?(this.itemArr=this.modelControl.getDataCollectionItemsetData(this.id),this.allItemArr=this.modelControl.getDataCollectionItemsetData(this.id,{allData:!0})):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.closeTable=function(){try{this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.openTable=function(){try{this.showTable()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.endEdit=function(){try{var t=this.dom.input.value;if(a.B.fireEvent(this,"oneditend",t),this.options.useEdit)return void this.setText(t);this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.mozTrickBuffer="",(s.v.browserCheck.moz||s.v.browserCheck.opera)&&(this.findStop=!0,n.D.clearInterval(this.id+"_mozTrickCompare"))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showTable=function(){try{this.openSubLayer({select:!1})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setGridViewData=function(){try{var t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),e=this.gridViewOptions.dataComp.filterManager.filterArr;if(e)for(var i=0;i<e.length;i++)t.setColumnFilter({type:e[i].options.type,colIndex:e[i].options.colIndex,key:e[i].options.key,condition:e[i].options.condition});if(this.options.allOption){var o=t.getAllData(),s=WebSquare.language.getMessage("CheckCombobox_all")||"-전체-";if(o[0]!=s){for(var a=[],n=-1,l=0;l<t.cellIdList.length;l++)-1==n&&t.cellIdList[l]==this.itemsetObj.label&&(n=l),a.push("");this.labelColumn=-1==n?0:n,a[this.labelColumn]=this.defaultAllOptionLabel,t.setRowData(0,a,!1)}}var h=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;h&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),h&&this.itemTable.hide()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._closeOtherLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.otherComponent;if("grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i){i.hide(),this.removeClass("w2checkcombobox_open");var o=this.getValue(),s=this.getInfoArray(),n=this.convertInfoHash2Array(this.selectedInfo)
;n.length>0&&this.setSelectedInfo(n),this.isOpen=!1;var l=this.getValue();if(o!=l){var h={oldInfo:s,newInfo:this.getInfoArray(),oldValue:o,newValue:l};a.B.fireEvent(this,"onviewchange",h)}this.isOpen=!1,!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1),this.selectedInfo={}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._openOtherLayer=function(){try{if("gridView"==this.itemTableMode&&this.gridViewItemArr.length<=0)return;var t=this.otherComponent;if("grid"==this.itemTableMode?(this.setSubLayer(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),t=this.itemTable):"gridView"==this.itemTableMode&&(this.setSubLayer(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.style.height),t=this.itemTable),!this.isOpen){t.show(),this.addClass("w2checkcombobox_open");var e=WebSquare.style.getAbsoluteLeft(this.render),i=WebSquare.style.getAbsoluteTop(this.render),o=this.options.direction;if("auto"==o){var s=document.body.scrollTop;s<document.documentElement.scrollTop&&(s=document.documentElement.scrollTop);var a=i-s,n=document.documentElement.clientHeight-(a+this.render.offsetHeight),l=t.render.offsetHeight;n<l&&a>l&&(o="up")}"up"==o?i-=t.render.offsetHeight:i+=this.render.offsetHeight,document.documentElement.clientWidth<e+t.render.offsetWidth&&(e=e+this.render.offsetWidth-t.render.offsetWidth),"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(e=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(t.render.style.width=this.render.offsetWidth+"px")),t.setPosition(e,i),this.isOpen=!0,this.itemTableDirection=o,WebSquare.style.adjustZIndex(this.uuid,t.uuid,"itemTable")}if("grid"==this.itemTableMode)null!=this.targetFocusedIndex?h=this.targetFocusedIndex:-1==(h=this.itemTable.grid.getFocusedRowIndex())&&(h=0),this.itemTable.grid.setFocusedCell(h,0),this.targetFocusedIndex=null;else if("gridView"==this.itemTableMode){var h;null!=this.targetFocusedIndex?h=this.targetFocusedIndex:-1==(h=this.itemTable.gridView.getFocusedRowIndex())&&(h=0),this.itemTable.gridView.setFocusedCell(h,0),this.targetFocusedIndex=null}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._clearVisibleColumnChecked=function(){try{for(var t=!1,e=0;e<this.itemArr.length;e++){var i=this.itemArr[e];!0===i._hidden&&!1!==i.checked&&(i.checked=!1,t=!0)}if(t){var o=this.getValue();this.modelControl.isBinded()&&this.modelControl.setData(o),this.setValueNM(o)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._encode=function(t){var e=t;try{var i="<span class='w2checkcombobox_keyword'>",o="</span>",s=t.indexOf(o,i.length);return e=this.options.useKeywordHighlight&&s>=0&&t.slice(0,i.length)===i&&t.slice(s,s+o.length)===o?i+WebSquare.xml._encode(t.slice(i.length,s))+o+WebSquare.xml._encode(t.slice(s+o.length)):WebSquare.xml._encode(t)}catch(t){return r.w.printStackTrace(t,null,this),e}},u.prototype.handleItemtableMousedown=function(t){try{for(var e=this.itemTable.event.getTargetIterator(t);e.next();)if(e.match(this.itemTable.options.w2table_col,null,"td")){var i=e.getElement(),o=a.B.getMouseX(t),s=a.B.getMouseY(t);this._currentTarget={row:parseInt(i.getAttribute("row"),10),col:parseInt(i.getAttribute("col"),10),mouseX:o,mouseY:s,selectedIndex:{},shiftKey:t.shiftKey},this._dragGhost.setPosition(o,s),this._dragGhost.show();var l={passive:!1};return n.D.emptySelection(),a.B.preventDefault(t),void(1==n.D.isMobile()?(this.itemTable.event.addListener(document.documentElement,"ontouchmove",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousemove),l),this.itemTable.event.addListener(document.documentElement,"ontouchend",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMouseup),l)):(this.itemTable.event.addListener(document.documentElement,"onmousemove",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousemove),l),
this.itemTable.event.addListener(document.documentElement,"onmouseup",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMouseup),l)))}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleItemtableMousemove=function(t){try{if(!this._currentTarget)return;var e=a.B.getMouseX(t),i=a.B.getMouseY(t),o=e-this._currentTarget.mouseX,s=i-this._currentTarget.mouseY,n=o>0?0:o,l=s>0?0:s;(n<0||l<0)&&this._dragGhost.setPosition(this._currentTarget.mouseX+n,this._currentTarget.mouseY+l),this._dragGhost.setSize(Math.abs(o),Math.abs(s));for(var h=a.B.getTarget(t),d=this.itemTable.event.getTargetIterator(t);d.next();)if(d.match(this.itemTable.options.w2table_col,null,"td")){h=d.getElement();for(var u=parseInt(h.getAttribute("row"),10),c=parseInt(h.getAttribute("col"),10),p=h.parentNode.childNodes.length,g=u-this._currentTarget.row,m=c-this._currentTarget.col,f=Math.abs(g),b=Math.abs(m),y={},v=0;v<=f;v++)for(var w=0;w<=b;w++){var S=(g>0?this._currentTarget.row+v:this._currentTarget.row-v)*p+(m>0?this._currentTarget.col+w:this._currentTarget.col-w);if(y[S]=!0,!this._currentTarget.selectedIndex[S])(x=document.getElementById(this.itemTable.id+"_"+S))&&x.firstChild&&x.firstChild.checked===this._currentTarget.shiftKey&&x.click()}for(var C in this._currentTarget.selectedIndex){var x;if(!y[C])(x=document.getElementById(this.itemTable.id+"_"+C))&&x.click()}this._currentTarget.selectedIndex=y,d.stop()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleItemtableMouseup=function(t){try{this._currentTarget=null,this._dragGhost.setSize(0,0),this._dragGhost.hide(),1==n.D.isMobile()?(this.itemTable.event.removeEvent(document.documentElement,"ontouchmove"),this.itemTable.event.removeEvent(document.documentElement,"ontouchend")):(this.itemTable.event.removeEvent(document.documentElement,"onmousemove"),this.itemTable.event.removeEvent(document.documentElement,"onmouseup"))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleInputValidator=function(t){try{var e=this.dom.input.value,i=this.validator.validateKeyInput(this.dom.input,e,t);if(i.valid){if(e!==i.str){var o=WebSquare.text.getCaretPos(this.dom.input);n.D.isIEAllVersion()||(o-=e.length-i.str.length),this.dom.input.value=i.str,WebSquare.text.setCaretPos(this.dom.input,o)}}else a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshEnable=function(){try{for(var t=this.getItemCount(),e=0;e<t;e++)this.itemArr[e]&&!0===this.itemArr[e]._disabled?this.setItemDisabled(e,!0):this.setItemDisabled(e,!1)}catch(t){r.w.printStackTrace(t,null,this)}}},9473:function(t,e,i){"use strict";i.r(e),i.d(e,{floatingLayer:function(){return h}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.floatingLayer",pluginName:"floatingLayer",parseChild:!0,userEvents:["onclose","onlayermove","onlayerclick","onbeforeclose","onlayerresize"],useConfig:!0,bodyComplex:!0,dragAlwaysView:!1,title:"",titleClass:"",useResizeDrag:!1,modal:!1,closeButtonSrc:"",closeButtonClass:"",headerLeftClass:"",headerCenterClass:"",headerRightClass:"",bodyLeftClass:"",bodyCenterClass:"",bodyRightClass:"",bodyLeftBottomClass:"",bodyBottomClass:"",bodyRightBottomClass:"",useModal:!1,useModalStack:"",useAnchor:!1,dragAutoPosition:!1,movable:!0,documentTitle:!0,closeTitle:"close",ghostLayer:!1,headerHTML:"",dragResizable:!1,fixed:!1},h.prototype.initialize=function(t){try{this.zIndex=0,""==this.options.useModalStack&&(this.options.useModalStack=s.v.getConfiguration("/WebSquare/floatingLayer/@useModalStack")),this.modalStack=0}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{var t=[],e=this.options.title?"title='"+this.options.title.wq_replaceAll("'","&#39;")+"'":"",i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'"
;if(t.push("<div role='application' id='"+this.id+"' "+i+" class='w2floatingLayer "+this.options.className+"' "+o+">"),t.push("<table class='w2floatingLayer_table'>"),t.push("<tr class='w2floatingLayer_dragArea'>"),t.push("<td class='w2floatingLayer_topleft "+this.options.headerLeftClass+"'></td>"),t.push("<td id='"+this.id+"_headerHTML' class='w2floatingLayer_topcenter "+this.options.headerCenterClass+"' "+e+" >"),this.options.headerHTML){var s=this.options.headerHTML;try{var a=n.D.getGlobalFunction(this.options.headerHTML,this.scope_id);s="function"==typeof a?a():a}catch(t){s=this.options.headerHTML}t.push(s)}else t.push("<div id='"+this.id+"_titleDiv' class='w2floatingLayer_title "+this.options.titleClass+"' >"+this.options.title+"</div>"),n.D.getBoolean(this.options.useATagBtn)?t.push("<a id='"+this.id+"_closeButton' class='w2floatingLayer_close_button "+this.options.closeButtonClass+"' "+o+"' href='javascript:void(null);' title='"+this.options.closeTitle+"' ></a></div>"):t.push("<div id='"+this.id+"_closeButton' class='w2floatingLayer_close_button "+this.options.closeButtonClass+"' "+o+" title='"+this.options.closeTitle+"' ></div>");if(t.push("</td>"),t.push("<td class='w2floatingLayer_topright "+this.options.headerRightClass+"'></td>"),t.push("</tr>"),n.D.getBoolean(this.options.fullContentArea)){t.push("<tr>"),t.push("<td class='w2floatingLayer_fullContentArea' colSpan=3>"),t.push("<div id='"+this.id+"_contents' class='w2floatingLayer_contents "+this.options.bodyCenterClass+"'>"),t.push("<div id='"+this.id+"_innerLink' class='w2floatingLayer_innerLink' tabIndex='0'>"+this.options.title+"</div>");for(var l=this.getChildren(),h=0;h<l.length;h++)t.push(l[h].toHTML());t.push("</div>"),t.push("</td>"),t.push("</tr>")}else{t.push("<tr>"),t.push("<td class='w2floatingLayer_dragArea w2floatingLayer_centerleft "+this.options.bodyLeftClass+"'></td>"),t.push("<td class='w2floatingLayer_centercenter'>"),t.push("<div id='"+this.id+"_contents' class='w2floatingLayer_contents "+this.options.bodyCenterClass+"'>"),t.push("<div id='"+this.id+"_innerLink' class='w2floatingLayer_innerLink' "+o+">"+this.options.title+"</div>");for(l=this.getChildren(),h=0;h<l.length;h++)t.push(l[h].toHTML());t.push("</div>"),t.push("</td>"),t.push("<td class='w2floatingLayer_dragArea w2floatingLayer_centerright "+this.options.bodyRightClass+"'></td>"),t.push("</tr>"),t.push("<tr class='w2floatingLayer_dragArea'>"),t.push("<td class='w2floatingLayer_bottomleft "+this.options.bodyLeftBottomClass+"'></td>"),t.push("<td class='w2floatingLayer_bottomcenter "+this.options.bodyBottomClass+"'></td>"),t.push("<td class='w2floatingLayer_bottomright "+this.options.bodyRightBottomClass+"'></td>"),t.push("</tr>")}return t.push("</table>"),this.options.dragResizable&&(t.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize_right'></div>"),t.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize'></div>"),t.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize_bottom'></div>")),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setPreAction=function(){try{if(this.dom.contents=this.getElementById(this.id+"_contents"),this.dom.closeButton=this.getElementById(this.id+"_closeButton"),1==this.options.useModal){var t=n.D.getStyleProperty(this.render,"z-index");t&&"auto"!=t||(t=4500),this.render.style.zIndex=t,this.zIndex=t}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{if(this.dom.contents=this.getElementById(this.id+"_contents"),this.dom.closeButton=this.getElementById(this.id+"_closeButton"),1==this.options.useModal){var t=n.D.getStyleProperty(this.render,"z-index");n.D.getStyleProperty(this.render,"z-index")&&"auto"!=t||(this.render.style.zIndex=4500)}this.resetContentSize(),
n.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStart)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent))}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleKeydownEvent=function(t){try{if(13!=(t.charCode?t.charCode:t.keyCode))return;this.handleClickEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleFocusEvent=function(t){try{this.dom.titleDiv||(this.dom.titleDiv=this.getElementById(this.id+"_titleDiv")),this.dom.titleDiv&&this.options.documentTitle&&(document.title=this.dom.titleDiv.innerHTML)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleBlurEvent=function(t){try{this.options.documentTitle&&(document.title=WebSquare.docTitle)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.focus=function(){try{this.render.focus()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleClickEvent=function(t){try{a.B.fireEvent(this,"onlayerclick"),a.B.stopPropagation(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2floatingLayer_close_button")){if(!1===a.B.fireEvent(this,"onbeforeclose"))break;this.hide(),this.options.useModal,a.B.fireEvent(this,"onclose")}e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMousedownEvent=function(t){try{if(!this.options.movable)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2floatingLayer_dragArea")&&!this.options.fixed){var i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:10,mode:"move",makeGhostLayer:function(t){t.setSize(i.render.offsetWidth,i.render.offsetHeight);var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render);return t.setPosition(e,o),t},handleStart:function(){1==i.options.useModal&&WebSquare.getBody().showModal("w2modal_onmove")},handleFinish:function(t,e,o,s){var r,n,l=/matrix\((-?\d*\.?\d+),\s*0,\s*0,\s*(-?\d*\.?\d+),\s*0,\s*0\)/,h=WebSquare.style.getStyle(document.body,"transform");h?(r=null==(r=h.match(l))?1:parseFloat(r[1])||1,n=null==(n=h.match(l))?1:parseFloat(n[2])||1):(r=1,n=1),WebSquare.idCache[i.parentFrame]?i.setPosition((t+o-WebSquare.style.getAbsoluteLeft(WebSquare.idCache[i.parentFrame].render))/r,(e+s-WebSquare.style.getAbsoluteTop(WebSquare.idCache[i.parentFrame].render))/n):i.setPosition((t+o-WebSquare.style.getAbsoluteLeft(document.body))/r,(e+s-WebSquare.style.getAbsoluteTop(document.body))/n),1==i.options.useModal&&WebSquare.getBody().hideModal(!0),a.B.fireEvent(i,"onlayermove",t+o,e+s)}})}if(e.match("w2floatingLayer_resize")){a.B.stopEvent(t);i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),r=s.width,a=s.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),
a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,o),t},handleStart:function(){i.showModal.call(i)},handleFinish:function(t,e,o,s,r){i.hideModal.call(i);var a=parseInt(i.getStyle("width"),10)+o,n=parseInt(i.getStyle("height"),10)+s;i.setSize(a,n)}})}if(e.match("w2floatingLayer_resize_right")){a.B.stopEvent(t);i=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize_right",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),r=s.width,a=s.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,o),t},handleStart:function(){i.showModal.call(i)},handleFinish:function(t,e,o,s,r){i.hideModal.call(i);var a=parseInt(i.getStyle("width"),10),n=parseInt(i.getStyle("height"),10),l=a+o;i.setSize(l,n)}})}if(e.match("w2floatingLayer_resize_bottom")){a.B.stopEvent(t);i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize_bottom",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),r=s.width,a=s.height;return r=r-(parseInt(n.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,o),t},handleStart:function(){i.showModal.call(i)},handleFinish:function(t,e,o,s,r){i.hideModal.call(i);var a=parseInt(i.getStyle("width"),10),n=parseInt(i.getStyle("height"),10)+s;i.setSize(a,n)}})}}e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOverEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_close_button")&&this.addClass(this.dom.closeButton,"w2floatingLayer_close_button_over");e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOutEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_close_button")&&this.removeClass(this.dom.closeButton,"w2floatingLayer_close_button_over");e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleSelectStart=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_dragArea")&&a.B.stopEvent(t);e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setSize=function(t,e){try{if(!this.render)return;t=parseInt(t),e=parseInt(e),null!=t&&!isNaN(t)&&t>=0&&(this.render.style.width=t+"px"),null!=e&&!isNaN(e)&&e>=0&&(this.render.style.height=e+"px",this.resetContentSize()),a.B.fireEvent(this,"onlayerresize")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.resetContentSize=function(){try{var t=n.D.getStyleProperty(this.render,"height");if(t=parseInt(t,10),isNaN(t)){var e=this.getSize("height")-42;this.dom.contents.style.height="number"==typeof e&&e>0?this.getSize("height")-42+"px":""}else this.dom.contents.style.height=t-42+"px";this.options.fullContentArea&&(this.dom.contents.style.width=this.render.style.width)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setTitle=function(t){try{this.dom.titleDiv||(this.dom.titleDiv=this.getElementById(this.id+"_titleDiv")),this.dom.titleDiv&&(this.dom.titleDiv.innerHTML=t,
this.dom.titleDiv.parentNode.setAttribute("title",t.wq_replaceAll("'","&#39;")))}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.showModal=function(){var t=WebSquare.getBody();if(n.D.getBoolean(this.options.useModalStack)){if(this.modalStack<=0){var e={};e[this.options.pluginName]=this.uuid,t.showModal("w2modal_floatingLayer",null,e),this.modalStack++}}else t.showModal("w2modal_floatingLayer")},h.prototype.hideModal=function(){WebSquare.getBody().hideModal(),this.modalStack>0&&this.modalStack--},h.prototype.show=function(t){if(l.s.prototype.show.call(this,t),1==this.options.useModal&&this.showModal(),this.options.useAnchor){var e=this.id+"_innerLink";this.getElementById(e).setAttribute("name",e+"_name");var i=document.createElement("a");document.body.appendChild(i),i.setAttribute("href","#"+e+"_name"),i.click(),document.body.removeChild(i),i=null}},h.prototype.hide=function(){if(l.s.prototype.hide.apply(this),1==this.options.useModal&&this.hideModal(),this.options.useAnchor&&this.backlink){var t=n.D.getComponentById(this.backlink);t.render.setAttribute("name",t.id+"_backlink");var e=document.createElement("a");document.body.appendChild(e),e.setAttribute("href","#"+t.id+"_backlink"),e.click(),document.body.removeChild(e)}},h.prototype.setBackLink=function(t){"string"==typeof t?this.backlink=t:t&&"string"==typeof t.id&&(this.backlink=t.id)},h.prototype.setHeaderHTML=function(t){try{if(t){var e=t;try{var i=n.D.getGlobalFunction(t,this.scope_id);e="function"==typeof i?i():i}catch(i){e=t}var o=this.getElementById(this.id+"_headerHTML");o&&(o.innerHTML=e,this.options.headerHTML=e)}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getMaxSize=function(){for(var t,e,i=this.parentControl;null!=i&&null==i.render;)i=i.parentControl;(i?(t=WebSquare.style.getSize(i.render,"width"),e=WebSquare.style.getSize(i.render,"height")):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(n.D.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(n.D.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(n.D.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},h.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(n.D.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-right"),10)||0),i=i-(parseInt(n.D.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(n.D.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},h.prototype.finalize=function(){try{WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){r.w.printStackTrace(t,null,this)}}},4782:function(t,e,i){"use strict";i.r(e),i.d(e,{generator:function(){return u}});var o=i(2137),s=i(7757),r=i.n(s),a=i(1974),n=i(5052),l=i(5948),h=i(8683),d=i(1),u=function(t,e,i){d.s.call(this,t,e,i)};u.prototype.initAsync=(0,o.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._parse();case 2:case"end":return t.stop()}}),t,this)}))),a.x.extend(u.prototype,d.s.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.generator",pluginName:"generator",tagname:"div"},u.prototype.initialize=function(t){this.idCounter=0,this.dynamicCreateHash=h.D.isIE()&&parseInt(n.v.browserVersion(),10)<10?{tbody:!0,thead:!0,tfoot:!0,tr:!0}:{},this.passHash={script:!0,label:!0,
value:!0,choices:!0,item:!0,itemset:!0,attributes:!0},t&&1==t.nodeType&&!this.id&&(this.id=t.getAttribute("id")),this.tagName=this.options.tagname},u.prototype.toHTML=function(){try{var t=[],e=WebSquare.Parser.parseAttribute(this.element);for(var i in t.push("<"+this.options.tagname),e)if("id"==i){var o=this.id?" id='"+this.id+"'":" id='"+e[i]+"'";t.push(o)}else if("tagname"!=i){"className"==i&&(e[i="class"]=e.className,delete e.className);o=e[i]?" "+i+"='"+e[i]+"'":"";t.push(o)}return t.push(">"),t.push("</"+this.options.tagname+">"),t.join("")}catch(t){l.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{this.itemCnt=0,this.insertItemCnt=0,this.generatedIndexSet=[],this.generatedElementSet=[]}catch(t){l.w.printStackTrace(t,null,this)}},u.prototype.setChildElement=function(t,e){try{if(1==t.nodeType){var i=t.getLocalName();if(!this.passHash[i]){var o="";o=this.scope_obj&&null!=this.org_id?this.org_id+"_"+e+"_":this.id+"_"+e+"_";var s=t.getAttribute("id")||"",r=t.getAttribute("label"),a=t.getTagName();if(t.setAttribute("g_index",e),"w2:tag"==a&&""==s&&(s="w2generator_"+this.idCounter++),s&&(t.setAttribute("original_id",s),"w2:listColumn"!=a&&t.setAttribute("id",o+s)),r&&"w2:textbox"!==a&&"w2:span"!==a&&(t.setAttribute("org_label",r),t.setAttribute("label",WebSquare.xml.encode(r))),"w2:generator"!=a)for(var n=t.getChildNodes(),h=0;h<n.length;h++)this.setChildElement(n[h],e)}}}catch(t){l.w.printStackTrace(t)}},u.prototype.restoreChildElement=function(t){try{if(1==t.nodeType){var e=t.getLocalName();if(!this.passHash[e]){var i=t.getAttribute("original_id"),o=t.getAttribute("original_ref"),s=t.getAttribute("org_label");if(t.removeAttribute("g_index"),i&&(t.setAttribute("id",i),t.removeAttribute("original_id")),o&&(t.setAttribute("ref",o),t.removeAttribute("original_ref")),s&&(t.setAttribute("label",s),t.removeAttribute("original_label")),"w2:generator"==t.getTagName()){var r=t.getAttribute("original_nodeset");r&&(t.setAttribute("nodeset",r),t.removeAttribute("original_nodeset"))}else for(var a=t.getChildNodes(),n=0;n<a.length;n++)this.restoreChildElement(a[n])}}}catch(t){l.w.printStackTrace(t)}},u.prototype.getLength=function(){return this.generatedIndexSet.length},u.prototype.getChild=function(t,e){var i=this.generatedIndexSet[t],o=this.id+"_"+i+"_"+e;return h.D.getComponentById(o)||document.getElementById(o)},u.prototype.insertChild=function(t){return this.insert(t)},u.prototype.insert=function(t){try{if("number"==typeof t&&null!=this.generatedElementSet[t]){for(var e=0,i=0;i<t;i++)e+=this.generatedElementSet[i].length;this.targetNode=this.render.childNodes[e]}var o=[],s=[],r=[],a=this.dynamicCreateHash[this.options.tagname],n=this.element.cloneNode(!0),h=0,d=n.getChildNodes();for(i=0;i<d.length;i++){var u=d[i];this.setChildElement(u,this.insertItemCnt);var c=null;1===u.nodeType?(c=this._compHash[h]._cloneRecursive(u),h++):(3!==u.nodeType||a)&&(c=WebSquare.controlFactory.createByJSON(null,null,u._element,this.scope_obj,this.parentFrame)),c&&(this.addControl(c),a?this.dynamicAppend(this.render,c,t):3==u.nodeType?s.push(u.nodeValue):(s.push(c.toHTML()),r.push(c))),a&&this.restoreChildElement(u),c&&o.push(c)}if(WebSquare.controlFactory.initAsync(!0),!a){var p=document.createElement(this.options.tagname);for(p.innerHTML=s.join("");p.childNodes.length>0;)this.targetNode?this.targetNode=this.render.insertBefore(p.childNodes[p.childNodes.length-1],this.targetNode):this.render.appendChild(p.childNodes[0]);for(;r.length>0;){var g=r.shift();g.activate(),g.onComplete()}}var m=this.itemCnt;return"number"==typeof t?(this.generatedIndexSet.splice(t,0,this.insertItemCnt),this.generatedElementSet.splice(t,0,o),m=t):(this.generatedIndexSet.push(this.insertItemCnt),this.generatedElementSet.push(o)),this.targetNode=null,this.itemCnt++,this.insertItemCnt++,m}catch(t){l.w.printStackTrace(t,null,this)}},u.prototype.dynamicAppend=function(t,e,i){try{var o=e.toHTML(),s=o.match(/(<)([^ >\/]*)/),r=s&&s[2]?s[2]:null;if(r){
var a=document.createElement(r),n=WebSquare.xml.parse(o),h=WebSquare.WebSquareparser.parseAttribute(n.documentElement);try{for(var u in h)"style"==u?a.style.cssText=h[u]:"className"==u?a.className=h[u]:a.setAttribute(u,h[u])}catch(t){l.w.printStackTrace(t,null,this)}if("number"==typeof i&&this.targetNode?(t.insertBefore(a,this.targetNode),e.activate(),e.onComplete()):(t.appendChild(a),e.activate(),e.onComplete()),0==e.childControlList.length)for(var c=0;c<n.documentElement.childNodes.length;c++){var p=n.documentElement.childNodes[c];(g=WebSquare.controlFactory.create(null,null,p))&&e.addControl(g)}for(c=0;c<e.childControlList.length;c++){var g;3==(g=e.childControlList[c]).element.nodeType?a.appendChild(document.createTextNode(g.element.data)):this.dynamicCreateHash[r]?this.dynamicAppend(a,g):(d.s.prototype.writeTo.call(g,a),g.activate(),g.onComplete())}}}catch(t){l.w.printStackTrace(t,null,this)}},u.prototype._clone=function(t){try{var e=d.s.prototype._clone.call(this,t);return e._compHash=this._compHash.slice(0),e}catch(t){l.w.printStackTrace(t,null,this)}},u.prototype.removeChild=function(t){return null==t&&(t=this.generatedElementSet.length-1),this.remove(t)},u.prototype.remove=function(t){if(null!=t){if("number"==typeof t&&this.generatedElementSet[t]){for(var e=0;e<this.generatedElementSet[t].length;e++){var i=this.generatedElementSet[t][e];i.remove&&i.remove()}var o=this.generatedIndexSet.splice(t,1);return this.generatedElementSet.splice(t,1),this.itemCnt--,o}}else d.s.prototype.remove.call(this)},u.prototype.removeAll=function(){for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove&&this.childControlList[t].remove();WebSquare.removeChildren(this.render),this.generatedIndexSet=[],this.generatedElementSet=[],this.itemCnt=0,this.insertItemCnt=0},u.prototype.getIndexArray=function(){return this.generatedIndexSet.slice(0)},u.prototype.setStyle=function(t,e){try{if(!this.render)return;if(WebSquare.style.setStyle(this.render,t,e),"width"==t||"height"==t)for(var i=this.getChildren(),o=this.getChildrenCount(),s=0;s<o;s++)i[s].render.style[t]=e}catch(t){l.w.printStackTrace(t)}},u.prototype.finalize=function(){try{if(d.s.prototype.finalize.call(this),this._compHash)for(var t=0;t<this._compHash.length;t++)this._compHash[t].remove();this.removeAll()}catch(t){l.w.printStackTrace(t)}},u.prototype._parse=(0,o.Z)(r().mark((function t(){var e,i,o,s,a,n,h,d;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{for(this._compHash=[],e=this.dynamicCreateHash[this.options.tagname],i=this.element.cloneNode(!0),o=i.getChildNodes(),s=0;s<o.length;s++)a=o[s],this.setChildElement(a,"_base_"),n=null,(3!==a.nodeType||e)&&(n=WebSquare.controlFactory.createByJSON(null,null,a._element,this.scope_obj,this.parentFrame)),n&&(!0===n._wqAsync?(h=this.uuid,d=this._compHash.length,n.then((function(t,e){WebSquare.idCache[h]._compHash.splice(d,0,t)}))):this._compHash.push(n))}catch(t){l.w.printStackTrace(t,null,this)}case 2:case"end":return t.stop()}}),t,this)})))},4816:function(t,e,i){"use strict";i.r(e),i.d(e,{gridLayout:function(){return d}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=i(9075),d=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(d.prototype,l.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.gridLayout",pluginName:"gridLayout",gridTemplateColumns:"",gridTemplateRows:"",gridColumnGap:"",gridRowGap:"",gridRow:"",gridColumn:"",defaultClassPostfix:null,parseChild:!0,parseAttributes:!0},d.prototype.initialize=function(t){try{var e=null;if(this.adaptive=[],this.isIE=null,this.gridLayout={},this.updatedGridLayout={templateColumns:[],templateRows:[],column:[],row:[]},this.layoutStyle=document.getElementById(this.id+"_style"),null==this.layoutStyle){var i=document.createElement("style");i.type="text/css",i.id=this.id+"_style",document.getElementsByTagName("head")[0].appendChild(i),this.layoutStyle=i}this.adaptive=s.v.getChildConfiguration("/WebSquare/mediaInfo",{singleMode:!0}),
0===this.adaptive.length&&this.adaptive.push({name:"default"}),n.D.isIEAllVersion()||/Edge/.test(navigator.userAgent)?this.isIE=!0:this.isIE=!1,this.gridLayout={templateColumns:this.options.gridTemplateColumns.split(";"),templateRows:this.options.gridTemplateRows.split(";"),column:this.options.gridColumn.split(";"),row:this.options.gridRow.split(";"),columnGap:this.options.gridColumnGap.split(";"),rowGap:this.options.gridRowGap.split(";")},this.gridLayout.templateColumns[0]=this.gridLayout.templateColumns[0].wq_trim().split(" "),this.gridLayout.templateRows[0]=this.gridLayout.templateRows[0].wq_trim().split(" "),this.gridLayout.column[0]=this.gridLayout.column[0].wq_trim().split(":"),this.gridLayout.row[0]=this.gridLayout.row[0].wq_trim().split(":"),this.updatedGridLayout.column[0]=this.gridLayout.column[0],this.updatedGridLayout.row[0]=this.gridLayout.row[0],e=null;for(var o=1;o<this.adaptive.length;o++)null==this.gridLayout.templateColumns[o]?this.gridLayout.templateColumns[o]=this.gridLayout.templateColumns[0].slice():(e=this.gridLayout.templateColumns[o].replace(/(\s*)/g,""),this.gridLayout.templateColumns[o]=""==e?this.gridLayout.templateColumns[0].slice():this.gridLayout.templateColumns[o].wq_trim().split(" ")),null==this.gridLayout.templateRows[o]?this.gridLayout.templateRows[o]=this.gridLayout.templateRows[0].slice():(e=this.gridLayout.templateRows[o].replace(/(\s*)/g,""),this.gridLayout.templateRows[o]=""==e?this.gridLayout.templateRows[0].slice():this.gridLayout.templateRows[o].wq_trim().split(" ")),null==this.gridLayout.column[o]?this.gridLayout.column[o]=this.gridLayout.column[0].slice():(e=this.gridLayout.column[o].replace(/(\s*)/g,""),this.gridLayout.column[o]=""==e?this.gridLayout.column[0].slice():this.gridLayout.column[o].wq_trim().split(":")),this.updatedGridLayout.column[o]=this.gridLayout.column[o],null==this.gridLayout.row[o]?this.gridLayout.row[o]=this.gridLayout.row[0].slice():(e=this.gridLayout.row[o].replace(/(\s*)/g,""),this.gridLayout.row[o]=""==e?this.gridLayout.row[0].slice():this.gridLayout.row[o].wq_trim().split(":")),this.updatedGridLayout.row[o]=this.gridLayout.row[o],null==this.gridLayout.columnGap[o]?this.gridLayout.columnGap[o]=this.gridLayout.columnGap[0].slice():(e=this.gridLayout.columnGap[o].replace(/(\s*)/g,""),this.gridLayout.columnGap[o]=""==e?this.gridLayout.columnGap[0].slice():this.gridLayout.columnGap[o].wq_trim()),null==this.gridLayout.rowGap[o]?this.gridLayout.rowGap[o]=this.gridLayout.rowGap[0].slice():(e=this.gridLayout.rowGap[o].replace(/(\s*)/g,""),this.gridLayout.rowGap[o]=""==e?this.gridLayout.rowGap[0].slice():this.gridLayout.rowGap[o].wq_trim());this._initializeIE(),this._resizeObj=null,this._bResizeInit=!1,this._resizeInfo={row:{},col:{},orgInfoStr:"",resizeComp:[]}}catch(t){r.w.printStackTrace(t)}},d.prototype._initializeIE=function(t){try{if(!this.isIE)return;for(var e=0;e<this.adaptive.length;e++){for(var i=this.gridLayout.templateColumns[e].slice(),o=this.gridLayout.templateRows[e].slice(),s=2*Math.max(i.length,o.length)-1,a=1;a<s;a++)n.D.isOdd(a)&&(null!=i[a]&&i.splice(a,0,this.gridLayout.columnGap[e]),null!=o[a]&&o.splice(a,0,this.gridLayout.rowGap[e]));for(var l=this.gridLayout.row[e].slice(),h=0;h<l.length;h++){var d=l[h].wq_trim();if(-1==d.indexOf("/")){var u=parseInt(o.length/2)+1,c=Number(d);c>u&&(c=u),l[h]=String(2*c-1)}}for(var p=this.gridLayout.column[e].slice(),g=0;g<p.length;g++){var m=p[g].wq_trim();if(-1==m.indexOf("/")){u=parseInt(i.length/2)+1;var f=Number(m);f>u&&(f=u),p[g]=String(2*f-1)}}if(null==t)this.gridLayout.templateColumns[e]=i,this.gridLayout.templateRows[e]=o,this.gridLayout.column[e]=p,this.gridLayout.row[e]=l;else{if(e!=t)continue;this.gridLayout.templateColumns[e]=i,this.gridLayout.templateRows[e]=o,this.gridLayout.column[e]=p,this.gridLayout.row[e]=l}}}catch(t){r.w.printStackTrace(t)}},d.prototype.toHTML=function(){
var t=[],e=this.getChildren(),i=e.length,o=""==this.options.style?"":"style='"+this.options.style+"'",s=null==this.options.defaultClassPostfix?"":this.options.defaultClassPostfix;t.push("<div id='"+this.id+"' class='w2gridLayout"+s+" "+this.id+" "+this.options.className+"'"+o+">"),this._createTemplateRules(0),this._createItemRules(0,e),this._createMediaRules();for(var r=0;r<i;r++){if(e[r]._isTag)if(null==e[r].element.getAttribute("class"))e[r].element.setAttribute("class",e[r].id);else{var a=e[r].element.getAttribute("class")+" "+e[r].id;e[r].element.setAttribute("class",a)}else""==e[r].options.className?e[r].options.className=e[r].id:e[r].options.className+=" "+e[r].id;t.push([e[r].toHTML()])}return t.push("</div>"),t.join("")},d.prototype.setAction=function(){},d.prototype._createMediaRules=function(t,e){try{for(var i=null==t?this.adaptive.length:t+1,o=this.getChildren(),s=[],a=null,n=null,l=1;l<i;l++){a=this._createTemplateRules(l),n=this._createItemRules(l,o);var h=this.adaptive[l];h.maxWidth?s[l]="@media all and (max-width: "+h.maxWidth+"px) { ":h.minWidth&&(s[l]="@media all and (min-width: "+h.minWidth+"px) { "),this.isIE,s[l]+=a,s[l]+=n,s[l]+="}",null==e?this.layoutStyle.sheet.insertRule(s[l],this.layoutStyle.sheet.cssRules.length):l==t&&this.layoutStyle.sheet.insertRule(s[l],e)}}catch(t){r.w.printStackTrace(t)}},d.prototype._createTemplateRules=function(t){try{var e=[];if(e[0]="",e[0]+="."+this.id+"{",this.isIE){var i=this._getTemplateIE(t);e[0]+="display: -ms-grid;",e[0]+="-ms-grid-columns:"+i.ieColumns+";",e[0]+="-ms-grid-rows:"+i.ieRows+";"}else e[0]+="display: grid;",e[0]+="grid-template-columns:"+this.gridLayout.templateColumns[t].join(" ")+";",e[0]+="grid-template-rows:"+this.gridLayout.templateRows[t].join(" ")+";",e[0]+="grid-column-gap:"+this.gridLayout.columnGap[t]+";",e[0]+="grid-row-gap:"+this.gridLayout.rowGap[t]+";";if(e[0]+="}",0!=t)return e;this.layoutStyle.sheet.insertRule(e,0)}catch(t){r.w.printStackTrace(t)}},d.prototype._createItemRules=function(t,e,i){try{var o=[],s=e.length;if(this.isIE)var a=this._getItemIE(e,t,"column"),n=this._getItemIE(e,t,"row");else this._getItemNotIE(e,t,"column"),this._getItemNotIE(e,t,"row");for(var l=0;l<s;l++)if(o[l]="",o[l]+="."+e[l].id+"{",this.isIE?(""==a.itemSpanSection[l]?o[l]+="-ms-grid-column:"+a.itemSection[l]+";-ms-grid-column-span: 1;":o[l]+="-ms-grid-column:"+a.itemSection[l]+";-ms-grid-column-span: "+a.itemSpanSection[l]+";",""==n.itemSpanSection[l]?o[l]+="-ms-grid-row:"+n.itemSection[l]+";-ms-grid-row-span: 1;":o[l]+="-ms-grid-row:"+n.itemSection[l]+";-ms-grid-row-span: "+n.itemSpanSection[l]+";"):(o[l]+="grid-column:"+this.gridLayout.column[t][l]+";",o[l]+="grid-row:"+this.gridLayout.row[t][l]+";"),o[l]+="}",0==t){if(null!=i){this.layoutStyle.sheet.insertRule(o[l],i);break}this.layoutStyle.sheet.insertRule(o[l],l+1)}return o.join(" ")}catch(t){r.w.printStackTrace(t)}},d.prototype._getTemplateIE=function(t){try{var e={};return e.ieColumns=this.gridLayout.templateColumns[t].join(" "),e.ieRows=this.gridLayout.templateRows[t].join(" "),e}catch(t){r.w.printStackTrace(t)}},d.prototype._getItemIE=function(t,e,i){try{i="row"==i.toLowerCase()?i:"column";var o=this.gridLayout[i][e],s="row"==i?"templateRows":"templateColumns",a=n.D.parseInt(this.gridLayout[s][e].length/2)+1,l=this.gridLayout[s][e].length,h={},d=null,u=t.length;h.itemSection=[],h.itemSpanSection=[];for(var c=0;c<u;c++)d=null,n.D.isNull(o[c])||NaN==o[c]?(h.itemSection[c]=l,h.itemSpanSection[c]="",o.push(String(a))):-1==o[c].indexOf("/")?(o[c]<=0&&(h.itemSection[c]="1"),h.itemSection[c]=o[c].wq_trim(),h.itemSpanSection[c]=""):((d=o[c].split("/"))[0]<=0&&(d[0]="1"),h.itemSection[c]=d[0].wq_trim(),h.itemSpanSection[c]=d[1].wq_trim(),1!=h.itemSection[c]&&h.itemSection[c]<h.itemSpanSection[c]?h.itemSpanSection[c]=Number(h.itemSpanSection[c])-Number(h.itemSection[c]):h.itemSection[c]==h.itemSpanSection[c]&&(h.itemSpanSection[c]="1"),h.itemSection[c]>a&&(h.itemSection[c]=a),
h.itemSection[c]=2*Number(h.itemSection[c])-1,h.itemSpanSection[c]>l?h.itemSpanSection[c]=l:n.D.isOdd(h.itemSpanSection[c])||(h.itemSpanSection[c]=Number(h.itemSpanSection[c])+1)),h.itemSection[c]=String(h.itemSection[c]),h.itemSpanSection[c]=String(h.itemSpanSection[c]),""==h.itemSpanSection[c]?o.splice(c,1,h.itemSection[c]):o.splice(c,1,h.itemSection[c]+" / "+h.itemSpanSection[c]);return h}catch(t){r.w.printStackTrace(t)}},d.prototype._getItemNotIE=function(t,e,i){try{for(var o="row"==(i="row"==i.toLowerCase()?i:"column")?"templateRows":"templateColumns",s=this.gridLayout[o][e].length,a=this.gridLayout[i][e],l=[],h=t.length,d=0;d<h;d++)n.D.isNull(a[d])||NaN==a[d]?a.push(String(s)):-1==a[d].indexOf("/")?(a[d]<=0?a[d]="1":a[d]>s&&(a[d]=s),a[d]=String(a[d])):((l=a[d].split("/"))[0]<=0?l[0]="1":l[0]>s&&(l[0]=String(s)),l[1]>s+1&&(l[1]=" "+(s+1)),a[d]=l.join("/"),l=[])}catch(t){r.w.printStackTrace(t)}},d.prototype.setActiveLayout=function(t,e,i){try{var o=this.getScreenIdx(),s=!1,a=this.getChildren(),n=a.length;if(n>t&&(0!=e&&(this.gridLayout.column[o].splice(t,1,String(e)),s=!0),0!=i&&(this.gridLayout.row[o].splice(t,1,String(i)),s=!0)),s)if(0==o)this.layoutStyle.sheet.deleteRule(t+1),this._createItemRules(o,[a[t]],t+1);else for(var l=this.layoutStyle.sheet.cssRules.length,h=0,d=n+1;d<l;d++)if(4==this.layoutStyle.sheet.cssRules[d].type&&++h==o){this.layoutStyle.sheet.deleteRule(d),this._createMediaRules(o,d);break}}catch(t){r.w.printStackTrace(t)}},d.prototype.setLayout=function(t,e,i){try{this.setActiveLayout(t,e,i);for(var o={},s=[],a=[],n=0;n<this.adaptive.length;n++)s[n]=this.gridLayout.column[n][t],a[n]=this.gridLayout.row[n][t];return o.column=s.join(":"),o.row=a.join(":"),"columnInfo: "+o.column+", rowInfo: "+o.row}catch(t){r.w.printStackTrace(t)}},d.prototype.getScreenIdx=function(){try{this.adaptive;for(var t,e,i=Number(top.document.documentElement.clientWidth||top.document.body.clientWidth),o=0,s=0;s<this.adaptive.length;s++){var a=parseInt(this.adaptive[s].minWidth,10),n=parseInt(this.adaptive[s].maxWidth,10);n>=0&&i<=n?(null==t||t>n)&&(o=s,t=n):a>=0&&i>=a&&(null==e||e<a)&&(o=s,e=a)}return o}catch(t){r.w.printStackTrace(t)}},d.prototype.getLayout=function(t){try{for(var e={},i=[],o=[],s=0;s<this.adaptive.length;s++)i[s]=this.gridLayout.column[s][t],o[s]=this.gridLayout.row[s][t];return e.column=i.join(":"),e.row=o.join(":"),"columnInfo: "+e.column+", rowInfo: "+e.row}catch(t){r.w.printStackTrace(t)}},d.prototype.setGap=function(t,e){try{var i=this.getScreenIdx(),o="columnGap"==(t="col"==t?"columnGap":"rowGap")?"templateColumns":"templateRows";if(this.isIE){var s=this.gridLayout[t][i],a=this.gridLayout[o][i].map((function(t){return t==s&&(t=e),t}));this.gridLayout[o][i]=a}this.gridLayout[t][i]=e,this._changeRules(i)}catch(t){r.w.printStackTrace(t)}},d.prototype.getTemplate=function(){try{for(var t={},e=[],i=[],o=0;o<this.adaptive.length;o++)e[o]=this.gridLayout.templateColumns[o].join(" "),i[o]=this.gridLayout.templateRows[o].join(" ");return t.templateColumns=e.join(":"),t.templateRows=i.join(":"),"templateColumnsInfo: "+t.templateColumns+", templateRowsInfo: "+t.templateRows}catch(t){r.w.printStackTrace(t)}},d.prototype._changeRules=function(t,e){try{var i=this.getChildren();if(this.isIE&&this._initializeIE(t),0==t)if(e){for(var o=this.layoutStyle.sheet.rules.length,s=o-1;s>=0;s--)4!=this.layoutStyle.sheet.rules[s].type&&this.layoutStyle.sheet.deleteRule(s);this._createTemplateRules(0),this._createItemRules(0,i)}else this.layoutStyle.sheet.deleteRule(t),this._createTemplateRules(t,1);else{var a=this.layoutStyle.sheet.cssRules.length,n=0;for(s=i.length+1;s<a;s++)if(4==this.layoutStyle.sheet.cssRules[s].type&&++n==t){this.layoutStyle.sheet.deleteRule(s),this._createMediaRules(t,s);break}}}catch(t){r.w.printStackTrace(t)}},d.prototype.setTemplate=function(t,e,i){try{if(Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||+t}),e="col"==e?"templateColumns":"templateRows",-1!=Math.sign(t)){
var o=this.getScreenIdx(),s=this.gridLayout[e][o].length;this.isIE?s>2*t&&(t*=2,this.gridLayout[e][o][t]=i,this._changeRules(o)):s>t&&(this.gridLayout[e][o][t]=i,this._changeRules(o))}}catch(t){r.w.printStackTrace(t)}},d.prototype.setAllTemplate=function(t,e){try{var i=this.getScreenIdx(),o=e.split(" ");if(t="col"==t?"templateColumns":"templateRows",this.isIE)for(var s=2*o.length-1,a="templateColumn"==t?"columnGap":"rowGap",l=1;l<s;l++)n.D.isOdd(l)&&o.splice(l,0,this.gridLayout[a][i]);this.gridLayout[t][i]=o,this._changeRules(i)}catch(t){r.w.printStackTrace(t)}},d.prototype._copyLayout=function(){try{if(!this.isIE)return t={templateColumns:this.gridLayout.templateColumns,templateRows:this.gridLayout.templateRows,row:this.gridLayout.row,column:this.gridLayout.column};for(var t={templateColumns:[],templateRows:[],row:[],column:[]},e=this.getChildren(),i=0;i<this.adaptive.length;i++){for(var o=this.gridLayout.templateColumns[i].slice(),s=this.gridLayout.templateRows[i].slice(),a=Math.max(o.length,s.length);a>0;a--)n.D.isOdd(a)&&(null!=o[a]&&o.splice(a,1),null!=s[a]&&s.splice(a,1));t.templateColumns.push(o),t.templateRows.push(s),this.updatedGridLayout.templateColumns.push(o),this.updatedGridLayout.templateRows.push(s);for(var l="column",h="templateColumns",d=0;d<2;d++){var u=this.updatedGridLayout[h][i].length,c=this.updatedGridLayout[l][i],p=[],g=e.length;for(a=0;a<g;a++)n.D.isNull(c[a])||NaN==c[a]?c.push(String(u)):-1==c[a].indexOf("/")?(c[a]<=0?c[a]="1":c[a]>u&&(c[a]=u),c[a]=String(c[a])):((p=c[a].split("/"))[0]<=0?p[0]="1":p[0]>u&&(p[0]=String(u)),p[1]>u+1&&(p[1]=" "+(u+1)),c[a]=p.join("/"),p=[]);t[l].push(c),l="row",h="templateRows"}}return t}catch(t){r.w.printStackTrace(t)}},d.prototype.getLayoutInfo=function(){try{for(var t=this.getChildren(),e=t.length,i=this.getScreenIdx(),o=this._copyLayout(),s={layout:"grid",currentScreen:this.adaptive[i].name,layoutInfo:[]},a=0;a<this.adaptive.length;a++){var n={name:this.adaptive[a].name,minWidth:this.adaptive[a].minWidth,maxWidth:this.adaptive[a].maxWidth,templateColumns:o.templateColumns[a],templateRows:o.templateRows[a],itemInfo:[]};s.layoutInfo.push(n);for(var l=0;l<e;l++){var h={id:t[l].id,rowStart:"",rowEnd:"",colStart:"",colEnd:""},d=null;-1==o.row[a][l].indexOf("/")?h.rowStart=o.row[a][l]:(d=o.row[a][l].split("/"),h.rowStart=d[0].wq_trim(),h.rowEnd=d[1].wq_trim()),d=null,-1==o.column[a][l].indexOf("/")?h.colStart=o.column[a][l]:(d=o.column[a][l].split("/"),h.colStart=d[0].wq_trim(),h.colEnd=d[1].wq_trim()),s.layoutInfo[a].itemInfo.push(h)}}return s}catch(t){r.w.printStackTrace(t)}},d.prototype._checkId=function(t){try{var e=t.length,i=this.getChildren(),o={},s=[];for(var a in i)o[i[a].id]=i[a];for(a=0;a<e;a++)if(null!=t[a].itemInfo){var n={},l=t[a].itemInfo;for(var h in l){if(null==l[h].id)return!1;null!=o[l[h].id]?n[l[h].id]=l[h]:console.log("id["+l[h].id+"]와 일치하는 항목이 없습니다.")}s.push(n)}else t[a].itemInfo=[],s.push("dumy");return s}catch(t){r.w.printStackTrace(t)}},d.prototype._setEmptyScreenInfo=function(t){try{var e={};for(var i in t.layoutInfo){e[t.layoutInfo[i].name]=t.layoutInfo[i].name}for(i=0;i<this.adaptive.length;i++)null==e[this.adaptive[i].name]&&t.layoutInfo.splice(i,0,new Object({name:void 0}));return t}catch(t){r.w.printStackTrace(t)}},d.prototype.setLayoutInfo=function(t){try{t=this._setEmptyScreenInfo(t);var e=this._checkId(t.layoutInfo);if(0==e)return;for(var i=0;i<this.adaptive.length;i++){var o=t.layoutInfo[i];if(null!=o.name){this.isIE&&(this.gridLayout.templateColumns[i]=this.updatedGridLayout.templateColumns[i],this.gridLayout.templateRows[i]=this.updatedGridLayout.templateRows[i]);var s=o.itemInfo;if(0==s.length)continue;for(var a in s){var n=s[a].id;e[i][n]&&(""==s[a].rowEnd?this.gridLayout.row[i].splice(a,1,s[a].rowStart):this.gridLayout.row[i].splice(a,1,s[a].rowStart+" / "+s[a].rowEnd),this.updatedGridLayout.row[i]=this.gridLayout.row[i],
""==s[a].colEnd?this.gridLayout.column[i].splice(a,1,s[a].colStart):this.gridLayout.column[i].splice(a,1,s[a].colStart+" / "+s[a].colEnd),this.updatedGridLayout.column[i]=this.gridLayout.column[i])}o.templateColumns&&o.templateColumns.constructor,o.templateRows&&o.templateRows.constructor,this._changeRules(i,!0)}}}catch(t){r.w.printStackTrace(t)}},d.prototype._updateLayoutInfo=function(t){},d.prototype.addResizeBar=function(t,e,i){try{if(isNaN(t)||t<=0)return void h.k.printLog("gridLayout.addResizeBar error : invalid index.");"row"!==e&&(e="col");var s=this.id+"_resizeBar_"+e+"_"+t,l=this.scope_id+"_"+s;if(null!=n.D.getComponentById(s))return;void 0!==i&&null!=i||(i={});var d=this.getLayoutInfo(),u=o.x.extend({},d),c=u.layoutInfo,p=-1,g=this.getScreenIdx(),m=c[g],f=!1;if(this._resizeInfo.orgInfoStr||(this._resizeInfo.orgInfoStr=JSON.stringify(m)),"row"===e){if(t>=m.templateRows.length)return void h.k.printLog("gridLayout.addResizeBar error : invalid index.");var b=t;for(var y in this._resizeInfo.row)this._resizeInfo.row[y]>b?this._resizeInfo.row[y]++:t++;m.templateRows.splice(t,0,i.size||"5px"),this._resizeInfo.row[s]=t;for(var v=0;v<m.itemInfo.length;v++){var w=m.itemInfo[v],S=Number(w.rowStart),C=Number(w.rowEnd||w.rowStart);if(S>t){if(!1===f)f=!0,(I={}).id=l,I.rowStart=w.rowStart,I.rowEnd="",I.colStart=i.start||"1",I.colEnd=i.end||String(m.templateColumns.length+1),m.itemInfo.splice(v,0,I),p=v,v++;w.rowStart=String(S+1),w.rowEnd=String(C+1)}else C>t+1&&(w.rowEnd=String(C+1))}}else{if(t>=m.templateColumns.length)return void h.k.printLog("gridLayout.addResizeBar error : invalid index.");b=t;for(var y in this._resizeInfo.col)this._resizeInfo.col[y]>b?this._resizeInfo.col[y]++:t++;m.templateColumns.splice(t,0,i.size||"5px"),this._resizeInfo.col[s]=t;for(v=0;v<m.itemInfo.length;v++){w=m.itemInfo[v];var x=Number(w.colStart),_=Number(w.colEnd||w.colStart);if(x>t){var I;if(!1===f)f=!0,(I={}).id=l,I.colStart=w.colStart,I.colEnd="",I.rowStart=i.start||"1",I.rowEnd=i.end||String(m.templateRows.length+1),m.itemInfo.splice(v,0,I),p=v,v++;w.colStart=String(x+1),w.colEnd=String(_+1)}else _>t+1&&(w.colEnd=String(_+1))}}var T="w2gridLayout_resizeBarH";"row"===e&&(T="w2gridLayout_resizeBarV");var k=WebSquare.controlFactory.create(s,{className:"w2gridLayout_resizeBar "+T+" "+l,pluginName:"group",parseChild:!1},null,this.scope_obj,this.parentFrame,!0);k.bind("onmousedown",function(t,e,i,o,s,r,n){return function(l){var h=WebSquare.idCache[t],d=WebSquare.idCache[r],u=WebSquare.idCache[n];"row"!==i&&(i="col");var c=h._resizeInfo[i][e];h._resizeObj={index:c-1,direction:i,screenIdx:o,cssStr:s,startX:a.B.getMouseX(l),startY:a.B.getMouseY(l),heightFront:d.render.offsetHeight,heightBack:u.render.offsetHeight,widthFront:d.render.offsetWidth,widthBack:u.render.offsetWidth},h.addClass(s)}}(this.uuid,s,e,g,T,this.childControlList[p-1].uuid,this.childControlList[p].uuid)),k.bind("onmouseup",(D=this.uuid,L=T,function(){var t=WebSquare.idCache[D];t._resizeObj=null,t.removeClass(L)})),k.writeTo(this,null,this.parentFrame,{index:p}),k.activate(),this.addControl(k,void 0,void 0,{index:p}),this._resizeInfo.resizeComp.push(k.uuid),this.setLayoutInfo(u),!1===this._bResizeInit&&(this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this._bResizeInit=!0)}catch(t){r.w.printStackTrace(t)}var D,L},d.prototype.clearResizeBar=function(){try{if(!this._resizeInfo.orgInfoStr&&0===this._resizeInfo.resizeComp.length)return;var t=this.getLayoutInfo(),e=o.x.extend({},t),i=e.layoutInfo,s=this.getScreenIdx();this._resizeInfo.orgInfoStr&&(i[s]=JSON.parse(this._resizeInfo.orgInfoStr),this.gridLayout.templateColumns[s]=i[s].templateColumns,this.gridLayout.templateRows[s]=i[s].templateRows);for(var a=0;a<this._resizeInfo.resizeComp.length;a++){var n=WebSquare.idCache[this._resizeInfo.resizeComp[a]];n&&n.remove()}
this._resizeInfo={row:{},col:{},orgInfoStr:"",resizeComp:[]},this.setLayoutInfo(e)}catch(t){r.w.printStackTrace(t)}},d.prototype.handleClickEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next(););e=null},d.prototype.handleMouseoverEvent=function(t){a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2gridLayout")&&this.addClass(e.getElement(),"w2gridLayout_over");e=null},d.prototype.handleMouseoutEvent=function(t){a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2gridLayout")&&this.removeClass(e.getElement(),"w2gridLayout_over");e=null},d.prototype.handleMousemoveEvent=function(t){try{if(this._resizeObj){var e=this._resizeObj.screenIdx,i=this._resizeObj.index,o=this._resizeObj.direction,s=this._resizeObj.startX,n=this._resizeObj.startY,l=this._resizeObj.heightFront,h=this._resizeObj.heightBack,d=this._resizeObj.widthFront,u=this._resizeObj.widthBack,c=this.getLayoutInfo(),p=c.layoutInfo[e];if("row"===o){var g=h-(m=a.B.getMouseY(t)-n);l+m>5&&g>5&&(p.templateRows[i]=l+m+"px",p.templateRows[i+2]=h-m+"px")}else{var m;g=h-(m=a.B.getMouseX(t)-s);l+m>5&&g>5&&(p.templateColumns[i]=d+m+"px",p.templateColumns[i+2]=u-m+"px")}this.setLayoutInfo(c)}}catch(t){r.w.printStackTrace(t)}},d.prototype.handleMouseupEvent=function(t){try{this._resizeObj&&this.removeClass(this._resizeObj.cssStr),this._resizeObj=null}catch(t){r.w.printStackTrace(t)}},d.prototype.finalize=function(){try{null!=this.layoutStyle&&null!=this.layoutStyle.parentNode&&this.layoutStyle.parentNode.removeChild(this.layoutStyle)}catch(t){r.w.printStackTrace(t)}}},6495:function(t,e,i){"use strict";i.r(e),i.d(e,{cellInfo:function(){return E},drilldown:function(){return D},gridView:function(){return M},headerInfo:function(){return S},linkedMappingController:function(){return W},mappingController:function(){return L.v}});var o=i(1974),s=i(5052),r=i(5948),a=i(8683),n=i(1),l=i(484),h=function(){};h.prototype.notifySettedGridData=function(t,e,i,o,s,a){try{if(this.options.scrollFix&&this.settedData){for(var n=this.getTopRowIndex(),l=0;l<=this.lastIndex;l++){var h=n+l;this.drawRowData(h-this.rowIndex,h)}return}this.dataList.clearFilter(!0),this._oldFilterArrStr||this.notifyClearFilter(!0),this.settedData=!1;i=i;(e=e||!1)||(this.rowStyleArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowReadOnlyArr=[],this.cellReadOnlyArr=[],this.rowDisabledArr=[],this.cellDisabledArr=[],this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.columnClassObj={},this.lastIndex=-1,this.lastTopRowIndex=null,this.bScrollTop=-1,this.extraData={grid:{},row:[],col:[],cell:[]},i=0,this._removeAllTDCellClass()),this.beforeDataLength=-1,1==this.isDrillDown&&(this.setCellInfo(),1==this.isPaste?this.initPasteDrilldown():this.initDrilldown()),this.initStyleArr(i),0==this.loadFlag&&e?this.loadFlag=!1:this.loadFlag=!0,this.lastTopRowIndex=null;var d={gridData:!0!==a};e&&(d.append=!0,d.keepTop=!0),this.notifyDataChanged(d),this.loadFlag=!0,0==this.getTotalRow()&&this.removeFocusedCell(),this.options.focusOnSetData&&this._setFocusedCell(0,0),this.setScrollYHeight(),this.settedData=!0,this.options.fixedRightColumn>0&&this._handleScrollX(),(!e&&this.options.fixedColumn>0||this.options.fixedRightColumn>0)&&this.arrangeOverflowXScroll(!0),(!0===s||this.options.instanceBindBySetData)&&this.options.ref&&this._refreshInstance(t,e)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyBeforeSettedCellData=function(){try{if(null!=this.editedCell)return void this.editedCell.handleEndEdit()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifySettedCellData=function(t,e,i,o){try{var s=this.getColumnIndex(e);t=this._getGroupbyGroupedRowIndex(t);this.notifyCellChanged(t,s,o),this.isDrillDown&&(!s&&this._dataList.options.depthColumn&&(s=this._dataList.getColumnIndex(e)),this.drilldown.options.depthColumn==s&&(this.notifyDataChanged({keepTop:!0}),
0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight()));var a=this.getCellInfo(e),n=t,l=this.getTotalRow();if(a&&a.options.colMerge&&a.options.colMergeEdit&&!this.groupbyStatus.grouped){var h=this.data_td_list[(n-this.rowIndex)*this.oneRowDataLength+s];if(h){var d,u=h.getAttribute("colMerged");if("1"==u&&i!=this.dataList.getCellData(n-1,s))if(h.setAttribute("colMerged","0"),this.drawCellData(n-this.rowIndex,n,s),n<l-1)(d=this.data_td_list[(n-this.rowIndex+1)*this.oneRowDataLength+s])&&(i==this.dataList.getCellData(n+1,s)?d.setAttribute("colMerged","1"):d.setAttribute("colMerged","0"),this.drawCellData(n-this.rowIndex+1,n+1,s));if("0"==u)if(n>=1&&i==this.dataList.getCellData(n-1,s)&&(h.setAttribute("colMerged","1"),this.drawCellData(n-this.rowIndex,n,s)),n<l-1)(d=this.data_td_list[(n-this.rowIndex+1)*this.oneRowDataLength+s])&&(i==this.dataList.getCellData(n+1,s)?d.setAttribute("colMerged","1"):d.setAttribute("colMerged","0"),this.drawCellData(n-this.rowIndex+1,n+1,s))}}this.moveDirection=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyBeforeInsertedRow=function(t){try{!this.isDrillDown&&t>this.getDataLength()&&(t=this.getDataLength());var e=!1,i=[];if(this.isDrillDown){for(var o=this.drilldown.getParentRowIndex(t);o>-1;)this.drilldown.isOpen(this.drilldown.getDisplayRowIndex(o))||(e=!0,i.push(o)),o=this.drilldown.getParentRowIndex(o);if(e)for(var s=i.length-1;s>=0;s--)if(!this.drilldown.isOpen(i[s])){var a=this.drilldown.getDisplayRowIndex(i[s]);this._toggle(a)}}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyAfterInsertedRow=function(t,e){try{this.settedData=!1;for(var i=this.dataList.getRealRowIndex(t),o=this.getTotalCol(),s=[i*o,0],a=0;a<o;a++)s.push(null);if(this.resetExpressionFunc(),[].splice.apply(this.cellStyleArr,s),[].splice.apply(this.cellClassArr,s),[].splice.apply(this.cellReadOnlyArr,s),[].splice.apply(this.cellDisabledArr,s),this.extraData.row.splice(t,0,null),this.extraData.cell.splice(t,0,null),1==this.options.setCellInputTypeCustom&&!this.validTypeGetter){var n=this.getColumnCount();for(a=0;a<n;a++){var l=this.getCellInfo(a);"custom"==l.options.inputType&&(l.cellManagerHashByRowIndex.splice(i,0,null),l.cellManagerIDByRowIndex.splice(i,0,null))}}if(this.isDrillDown&&this.drilldown.statusArr.splice(i,0,!0),this._mergeNotifyRowChanged("insertRow",t),!0!==e&&(this.notifyRowInserted(t),this.notifyStatusChanged({rowIndex:[t]})),this.options.ref&&1!=this.insertRowByInstance&&!0!==e&&this.repeatNodeChildTagName&&this.repeatNodeChildTagName.length>0){var h;h=1==this.repeatNodeTagNameFilter&&1==this.repeatNodeTagName.length?this.filteredRepeatNodeTagName[0]:this.repeatNodeTagName[0];var d,u=WebSquare.xml.parse("<"+h+"></"+h+">").documentElement,c=u,p=h;this.repeatNodeTagName.length>1&&(p=this.repeatNodeTagName.slice(1,this.repeatNodeTagName.length).join("/"));for(a=1;a<this.repeatNodeTagName.length;a++)c=WebSquare.xml.createNode(c,this.repeatNodeTagName[a],!1);d=this.repeatNodeTagName.length>1?WebSquare.xml.findNode(u,p):u;for(a=0;a<this.repeatNodeChildTagName.length;a++)WebSquare.xml.createNode(d,this.repeatNodeChildTagName[a],!1);t>=this.maxRowLength?WebSquare.ModelUtil.setInstanceNode(u,this.options.ref,null,"append",!1,this.scope_id):WebSquare.ModelUtil.setInstanceNode(u,this.options.ref+"/"+h+"["+(t+1)+"]",null,"insertBeforeSibling",!1,this.scope_id)}return this.settedData=!0,this.loadFlag=null==this.loadFlag||this.loadFlag,this._refreshColumnClass(),t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyBeforeRemovedRow=function(t){try{if(this.options.ref&&1!=this.removeRowByInstance){var e=this.getRealRowIndex(t)+1;WebSquare.ModelUtil.removeInstanceNode(this.options.ref+"/"+this.repeatNodeTagName[0]+"["+e+"]",!1,this.scope_id)}if(this.isDrillDown&&this._dataList.options.depthColumn){for(var i=!1,o=[],s=this.drilldown.getParentRowIndex(t);s>-1;)this.drilldown.isOpen(this.drilldown.getDisplayRowIndex(s))||(i=!0,o.push(s)),
s=this.drilldown.getParentRowIndex(s);if(i)for(var a=o.length-1;a>=0;a--)if(!this.drilldown.isOpen(o[a])){var n=this.drilldown.getDisplayRowIndex(o[a]);this._toggle(n)}t=this.drilldown.getDisplayRowIndex(t)}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyBeforeKeepFilter=function(){try{var t=this._dataList.getFilterList();if(t.length<=0||isNaN(t.length))return;this._oldFilterArrStr=JSON.stringify(t,(function(t,e){return"function"==typeof e||"object"===(0,l.Z)(e)&&e.constructor===RegExp?e.toString():e})),this.customFilterStatusObj&&(this._oldStatusObj=JSON.stringify(this.customFilterStatusObj)),this.customFilterList&&this.customFilterList.customFilterListFilterInfo?this._oldFilterInfo=JSON.stringify(this.customFilterList.customFilterListFilterInfo,(function(t,e){return"function"==typeof e||"object"===(0,l.Z)(e)&&e.constructor===RegExp?e.toString():e})):this.groupbyStatus.grouped&&this.groupbyStatus.filter&&(this._oldFilterInfo=JSON.stringify(this.groupbyStatus.filter,(function(t,e){return"function"==typeof e||"object"===(0,l.Z)(e)&&e.constructor===RegExp?e.toString():e})))}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyAfterKeepFilter=function(){try{if(!this._oldFilterArrStr)return;this._refreshCustomFilterHistory(this._oldFilterArrStr,this._oldFilterInfo,this._oldStatusObj),this._oldFilterArrStr=null,this._oldFilterInfo=null,this._oldStatusObj=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyAfterRemovedRow=function(t,e,i,o){try{this.removed=!0,this.isDrillDown&&this.drilldown.statusArr.splice(i,1);var s=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)?i:t;this.cellStyleArr.splice(this.oneRowDataLength*s,this.oneRowDataLength),this.cellClassArr.splice(this.oneRowDataLength*s,this.oneRowDataLength),this.cellReadOnlyArr.splice(this.oneRowDataLength*s,this.oneRowDataLength),this.cellDisabledArr.splice(this.oneRowDataLength*s,this.oneRowDataLength);for(var n=this.getColumnCount(),l=0;l<n;l++){var h=this.getCellInfo(l);if("custom"==h.options.inputType&&1==this.options.setCellInputTypeCustom&&!this.validTypeGetter){if(this.options.senseReader||h.options.embeddedInput){var d=h.cellManagerHashByRowIndex[i];if(d&&d.options.embeddedInput){var u=h.cellManagerIDByRowIndex[i],c=this.id+"_"+u,p=this.dom[c],g=null;null!=p&&(g=WebSquare.idCache[p.uuid]),g&&"function"==typeof g.remove&&g.remove(),delete this.dom[c]}}h.cellManagerHashByRowIndex.splice(i,1),h.cellManagerIDByRowIndex.splice(i,1)}}if(this.itemValueObj)for(var m in this.itemValueObj){var f=o.split(",")[this._dataList.bodyIdColIndexMap[m]];for(var b in this.itemValueObj[m])-1!=b.indexOf("auto")&&this.itemValueObj[m][b]===f&&(this.itemValueObj[m][b]="")}if(!0!==e){var y=this.checkScrollEnd,v=this.scrollEvent;if(this.checkScrollEnd=!1,this.scrollEvent=!1,this._getFocusedRowIndex()==this.getDataLength()){var w=this._getFocusedRowIndex(),S=this.getFocusedColumnIndex();this.removeRowFocus(this.getDataLength()),this._setFocusedCell(w-1,S)}this.resetExpressionFunc(),this._mergeNotifyRowChanged("removeRow",t),this.notifyRowChanged(t),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),this.notifyStatusChanged({rowindex:[t]}),a.D.setTimeout((function(t,e){this.checkScrollEnd=t,this.scrollEvent=e}),{key:this.id+"_notifyAfterRemovedRow",caller:this,delay:150,args:[y,v]})}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyRemovedRows=function(t,e){try{if(!0!==e){var i=this.checkScrollEnd,o=this.scrollEvent;this.checkScrollEnd=!1,this.scrollEvent=!1,this.resetExpressionFunc(),this.notifyRowChanged(),a.D.setTimeout((function(t,e){this.checkScrollEnd=t,this.scrollEvent=e}),{key:this.id+"_notifyAfterRemovedRow",caller:this,delay:150,args:[i,o]})}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyRemovedAll=function(t){try{this.removed=!0;var e=this.hiddenRowObj.extraRow;this.hiddenRowObj={length:0,extraRow:e,row:{},init:!1},this.loadFlag=!0,this.rowStyleArr=[],this.rowReadOnlyArr=[],
this.rowDisabledArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.columnClassObj={},this.cellReadOnlyArr=[],this.cellDisabledArr=[],this.extraData={grid:{},row:[],col:[],cell:[]},this._removeAllTDCellClass(),this.resetExpressionFunc();for(var i=this.getTotalCol(),o=0;o<i;o++){var s=this.getCellInfo(o);if(s&&s.options&&"expression"==s.options.inputType)for(var a=this.drawedRowLength,n=0;n<a;n++)s.options.expressionFunc&&s.options.expressionFunc[n]&&(s.options.expressionFunc[n]={});else if("custom"==s.options.inputType)if(1!=this.options.setCellInputTypeCustom||this.validTypeGetter)s.options.typeGetter&&(s.cellManagerHashByID={},s.cellManagerHashByRowIndex={},s.cellManagerIDByRowIndex={});else{if(this.options.senseReader||s.options.embeddedInput)for(var l=0;l<s.cellManagerIDByRowIndex.length;l++){var h=s.cellManagerHashByRowIndex[l];if(h&&h.options.embeddedInput){var d=s.cellManagerIDByRowIndex[l],u=this.id+"_"+d,c=this.dom[u],p=null;null!=c&&(p=WebSquare.idCache[c.uuid]),p&&"function"==typeof p.remove&&p.remove(),delete this.dom[u],s.cellManagerIDByRowIndex[l]=null,s.cellManagerHashByRowIndex[l]=null}}s.cellManagerHashByRowIndex=[],s.cellManagerIDByRowIndex=[]}}this.removeFocusedCell();for(o=0;o<this.dataRowList.length;o++){var g=this.dataRowList[o];g.style.display="none",this.__addClass(g,"w2grid_hidedRow"),this.__hasClass(g,"w2grid_lastRow")&&this.__removeClass(g,"w2grid_lastRow")}this.lastDisplayedRow=-1,this.subtotalHidden(),this.rowIndex=-1,this.lastIndex=-1,this.lastTopRowIndex=null,this.bScrollTop=-1,this.maxRowLength=0,this.displayNoResultMessage(),this.drawFooter(),this.drawHeader(),this._setCheckboxHead(),0==this.getDataLength()&&(this.removeFocusedCell(),"all"===this.options.visibleRowNum&&this.setSize(null,this.defaultDataLayerHeight)),this.setScrollYHeight(),this.options.ref&&1!=this.removeRowByInstance&&WebSquare.ModelUtil.removeInstanceNodes({xpath:this.options.ref+"/"+this.repeatNodeTagName[0],gridNoRefresh:!0,scopeId:this.scope_id}),this.options.groupbyFilterBox&&!1!==t&&this.clearFilterHistory(),1==this.isDrillDown&&this.initDrilldown(),this.itemValueObj={}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyRemovedRange=function(t){try{this.removed=!0,this.notifyRowChanged(t)}catch(t){r.w.printStackTrace(t)}},h.prototype.notifyCreatedRowStatus=function(t){try{this.rowStyleArr=this.rowStyleArr.slice(0,t).concat([null]).concat(this.rowStyleArr.slice(t)),this.rowReadOnlyArr=this.rowReadOnlyArr.slice(0,t).concat([null]).concat(this.rowReadOnlyArr.slice(t)),this.rowDisabledArr=this.rowDisabledArr.slice(0,t).concat([null]).concat(this.rowDisabledArr.slice(t)),this.rowStyleFixedArr=this.rowStyleFixedArr.slice(0,t).concat([null]).concat(this.rowStyleFixedArr.slice(t)),this.rowStyleDataArr=this.rowStyleDataArr.slice(0,t).concat([null]).concat(this.rowStyleDataArr.slice(t))}catch(t){r.w.printStackTrace(t)}},h.prototype.notifyRemovedRowStatus=function(t){try{this.rowStyleArr.splice(t,1),this.rowReadOnlyArr.splice(t,1),this.rowDisabledArr.splice(t,1),this.rowStyleFixedArr.splice(t,1),this.rowStyleDataArr.splice(t,1)}catch(t){r.w.printStackTrace(t)}},h.prototype.notifyDeleteRow=function(t){try{this._drawRowStatus(t-this.rowIndex,t),this.displayNoResultMessage(),this.hasFooter&&this.options.excludeDeletedRows&&this.drawFooter(),this.hasSubtotal&&this.options.excludeDeletedRows&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex));for(var e=0;e<this.getColCnt();e++){var i=this.getColumnID(e),o=this.expressionAssArr[i];if(null!=o)for(var s=0;s<o.length;s++){var a=this.getColumnIndex(o[s]);this.drawCellData(t-this.rowIndex,t,a)}}}catch(t){r.w.printStackTrace(t)}},h.prototype.notifyUndeleteRow=function(t){try{this._drawRowStatus(t-this.rowIndex,t),this.displayNoResultMessage(),this.hasFooter&&this.options.excludeDeletedRows&&this.drawFooter(),
this.hasSubtotal&&this.options.excludeDeletedRows&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex));for(var e=0;e<this.getColCnt();e++){var i=this.getColumnID(e),o=this.expressionAssArr[i];if(null!=o)for(var s=0;s<o.length;s++){var a=this.getColumnIndex(o[s]);this.drawCellData(t-this.rowIndex,t,a)}}}catch(t){r.w.printStackTrace(t)}},h.prototype.notifyReformed=function(){try{if(this.options.rowStatusVisible)for(var t=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex,e=0;e<=t;e++)this._drawRowStatus(e,this.rowIndex+e)}catch(t){r.w.printStackTrace(t)}},h.prototype.notifyModifyAllStatus=function(t){try{for(var e=0;e<this.getDataLength();e++)this._drawRowStatus(e-this.rowIndex,e);this.displayNoResultMessage(),this.notifyStatusChanged({rowIndex:"all"})}catch(t){r.w.printStackTrace(t)}},h.prototype.notifyModifyRangeStatus=function(t,e,i){try{var o=this.getDataLength();if(0<=t&&e<=o)for(var s=t;s<=e;s++)this._drawRowStatus(s-this.rowIndex,s);this.displayNoResultMessage(),this.notifyStatusChanged({startIndex:t,endIndex:e})}catch(t){r.w.printStackTrace(t)}},h.prototype.notifyModifyRowStatus=function(t,e){try{t>-1&&t<this.getDataLength()&&(this._drawRowStatus(t-this.rowIndex,t),this.displayNoResultMessage(),this.notifyStatusChanged({rowIndex:[t]}))}catch(t){r.w.printStackTrace(t)}},h.prototype.notifyModifyMatchedStatus=function(t,e,i){try{for(var o=[],s=this.getDataLength(),a=0;a<s;a++){var n=this.getColumnID(t),l=this.dataList.getRealRowIndex(a);if(this.dataList._getCellData(l,n)+""==e+"")i!=this.dataList._setRowStatus(l,i)&&o.push(a),this._drawRowStatus(a-this.rowIndex,a),this.displayNoResultMessage()}this.notifyStatusChanged({rowIndex:o})}catch(t){r.w.printStackTrace(t)}},h.prototype.notifySetColumnDefaultValue=function(t,e){try{this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifySettedData=function(t){try{this.groupbyStatus.grouped&&this.clearGroupby(),this.loadCheck=[],t||this.options.focusOnSetData||this.removeFocusedCell()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifySetRowXML=function(t,e){e?this.notifyRowChanged(t):this.notifyRowInserted(t)},h.prototype.notifyRowMoveUp=function(t){try{var e=this.extraData.row[t-1];this.extraData.row[t-1]=this.extraData.row[t],this.extraData.row[t]=e,e=this.extraData.cell[t-1],this.extraData.cell[t-1]=this.extraData.cell[t],this.extraData.cell[t]=e,this._getFocusedRowIndex()==t&&this._setFocusedCell(t-1,this.getFocusedColumnIndex()),this.notifyRowChanged(t-1)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyRowMoveDown=function(t){try{var e=this.extraData.row[t+1];this.extraData.row[t+1]=this.extraData.row[t],this.extraData.row[t]=e,e=this.extraData.cell[t+1],this.extraData.cell[t+1]=this.extraData.cell[t],this.extraData.cell[t]=e,this._getFocusedRowIndex()==t&&this._setFocusedCell(t+1,this.getFocusedColumnIndex()),this.notifyRowChanged(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyRowModified=function(t){try{this.changeCount++,this.drawRowData(t-this.rowIndex,t),this.hasSubtotal&&this.refreshSubtotalRow(t),this.drawFooter(),this.drawHeader()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyStatusChanged=function(t){try{var e,i,o=!1;"object"==(0,l.Z)(t.rowIndex)?(e=0,i=t.rowIndex.length,o=!0):"all"==t.rowIndex?(e=0,i=this.getDataLength()):"number"==typeof t.startIndex&&"number"==typeof t.endIndex&&(e=t.startIndex,i=t.endIndex);for(var s=e;s<i;s++){var a;if(a=o?t.rowIndex[s]:s,null!=this.rowStatusColIDArr)for(var n=0;n<this.rowStatusColIDArr.length;n++){var h=this.getColumnIndex(this.rowStatusColIDArr[n]);this.drawCellData(a-this.rowIndex,a,h)}}this.hasFooter&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&this.drawFooter(),this.hasSubtotal&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex))}catch(t){
r.w.printStackTrace(t,null,this)}},h.prototype.notifySaveFocusedCell=function(){try{this.focusedCellInfo.beforeFocusedCell=!(0==this.focusedCell.length),this.focusedCellInfo.beforeFocusedCell&&(this.focusedCellInfo.beforeFocusedCellRealRowIndex=this.dataList.getRealRowIndex(this.focusedCell[0].focusedRowIndex),this.focusedCellInfo.beforeFocusedCellRealColumnIndex=this.focusedCell[0].focusedColIndex)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifySetFocusedCell=function(t){try{var e=this.options.filterFocusMode,i=this.focusedCellInfo.beforeFocusedCellRealRowIndex;if("outfocus"!==e&&"infocus"!==e){if(this.focusedCellInfo.beforeFocusedCell)for(var o=0;o<this.getDataLength();o++)if(this.dataList.getRealRowIndex(o)==i){this._setFocusedCell(o,this.focusedCellInfo.beforeFocusedCellRealColumnIndex,!1,{isSort:t});break}}else"outfocus"==e&&this.outFocusedCell();this.focusedCellInfo={}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifySettedFilter=function(t){try{var e=t&&t.isSort,i=t&&t.fiteredColID;if(this.notifySetFocusedCell({isSort:e}),e&&this.syncWithSortStatus(),this.groupbyStatus.grouped)for(var o in this.customFilterStatusObj)if(this.customFilterStatusObj[o]){this.rowNumArr=[];for(var s=0;s<this.getDataLength();s++)this.rowNumArr.push(s);break}1==this.isDrillDown&&this._linkedDataList&&(this.setCellInfo(),this.initDrilldown());var a=!t||!1!==t.keepTop,n=[];if(this.hiddenRowObj.init){for(var l in this.hiddenRowObj.row)!0===this.hiddenRowObj.row[l]&&n.push(l);this.clearRowVisible({noDraw:!0})}if(this._mergeNotifyFilter(),this.notifyDataChanged({keepTop:a}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),e&&!this.groupbyStatus.grouped&&this.drawHeaderSortImages(),i&&!e&&this.options.useFilterList){var h=this.bodyToHeaderRelation[i];if(h){var d=this.getElementById(this.id+"_"+h+"_filter");d&&WebSquare.style.addClass(d,"w2grid_customFilter_filter")}}for(s=0;s<n.length;s++)this.setRowVisible(n[s])}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifySettedFilterByUser=function(t){try{if(this.options.useFilterListSync){var e=t.colID,i=JSON.parse(t.oldFilteredRowIndexArr),o=JSON.parse(t.newFilteredRowIndexArr);if(this.groupbyStatus.grouped);else if(this.options.useFilterList){this.customFilterList||this.createCustomFilterList(null,!0),this.customFilterList.filterHistory.column[0]!==e&&(this.customFilterList.filterHistory.column.unshift(e),this.customFilterList.filterHistory.filteredRowIndexArr.unshift(i));var s=this.dataList.getColData(e,o),a=this.getUniqueValueOfArray(s),n=this.changeItemValue("label",e,a);this.customFilterList.customFilterListFilterInfo||(this.customFilterList.customFilterListFilterInfo={}),this.customFilterList.customFilterListFilterInfo[e]=[];for(var l=0;l<n.length;l++){var h=n[l],d=this;"string"==typeof h&&(h=h.replace(/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,(function(t){return d.replacechar(t)}))),this.customFilterList.customFilterListFilterInfo[e].push(h)}}}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyBeforeClearSort=function(){try{this.notifySaveFocusedCell(),this.clearHeaderSort()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyClearSortFilter=function(){try{var t=this._getFocusedRowIndex(),e=this.getFocusedColumnIndex();this.syncWithSortStatus(),this.rowNumArr=null,this.removeFocusedCell(),this._mergeNotifyFilter(),this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),"infocus"==this.options.filterFocusMode&&this._setFocusedCell(t,e)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyBeforeSettedColumnFilter=function(){try{this.lastTopRowIndex=null,this.scrollEvent=!1,this.rowIndex=0}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyAfterSettedColumnFilter=function(){try{var t=this.getElementById(this.id+"_scrollY_div"),e=t.scrollTop;this.bScrollTop=-1,this.scrollEvent=!0,t.scrollTop=e,
this.options.groupbyFilterBox&&this.refreshGroupbyFilterBox()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyBeforeRemovedColumnFilter=function(){try{this.lastTopRowIndex=null,this.scrollEvent=!1,this.rowIndex=0}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyAfterRemovedColumnFilter=function(){try{var t=this.getElementById(this.id+"_scrollY_div"),e=t.scrollTop;this.bScrollTop=-1,this.scrollEvent=!0,t.scrollTop=e,this.options.groupbyFilterBox&&this.refreshGroupbyFilterBox()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyRemovedFilter=function(t){try{!0===t&&this.clearHeaderSort(),this.rowNumArr=null,this._mergeNotifyFilter(),this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.lastTopRowIndex=null,this.setScrollYHeight()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyClearFilter=function(t){try{for(var e in this.clearHeaderSort(),this.rowNumArr=null,this._mergeNotifyFilter(),t||(this.adjustDraw_keepTop=!0,this.notifyDataChanged({keepTop:!0}),this.adjustDraw_keepTop=null),0==this.getDataLength()&&this.removeFocusedCell(),this.lastTopRowIndex=null,this.setScrollYHeight(),this.headerInfoHash){var i=this.getElementById(this.id+"_"+e+"_filter");i&&WebSquare.style.removeClass(i,"w2grid_customFilter_filter")}this.itemValueObj={},this.firstOpenCustomFilter={},this.customFilterStatusObj={},this.customFilterList&&(this.customFilterList.filterHistory={column:[],filteredRowIndexArr:[]},this.customFilterList.customFilterListFilterInfo={}),this.groupbyFilterList&&(this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]})}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyMultisort=function(){try{this.syncWithSortStatus(),this.drawHeaderSortImages()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyBeforeInitDataList=function(){try{this.removeAllFinish=!0}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyAfterInitDataList=function(){try{this.loadCheck=[],this.initFlag=!0,this.skipScrollEndEvent=!0,this.skipScrollStartEvent=!0,this.hasFooter&&this.initFooterDataObj(),this.initHeaderDataObj(),1==this.isDrillDown&&this.initDrilldown(),this.removeAllFinish=!1,this.initColumns()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.notifyRefresh=function(t){try{!this.startedDisplayNone&&this.rowIndex>=0&&(t&&this.setDataTable(),this._mergeRefresh(),this.drawData(this.rowIndex,0),t&&this.setScrollYHeight(),this.displayNoResultMessage())}catch(t){r.w.printStackTrace(t,null,this)}};var d,u=i(1454),c=i(9075),p=function(){};p.prototype.toHTML=function(){try{var t=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/mainZIndex/@value")||"10",e=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/xScrollZIndex/@value")||"20",i=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/yScrollZIndex/@value")||"15";if(this.uncompleted)return;var o=[],a="scroll"===this.options.overflowY,n=(this.options.drawType,"hidden"),l=(this.options.drawType,""),h="native"===this.options.drawType?"visibility:hidden;":"",d=this.options.title?" title='"+this.options.title.wq_replaceAll("'","&#39;")+"'":"",u="none"==this.options.focusMode||"linear"==this.options.focusFlow?"":" tabIndex='0'",c=this.options.scrollFocus?" tabIndex='0'":"",p=""==this.options.style?"style='overflow:"+n+";'":"style='"+this.options.style+";overflow:"+n+";'",g=this.options.readOnly?" w2grid_readonly_outer":"",m=function(t){return this._useRole()?" role='"+t+"' ":""};if(o.push("<div id='"+this.id+"' class='w2grid "+this.options.className+g+"' "+p+m.call(this,"application")+d+u+">"),this.options.senseReader&&this.options.useStartEndDiv&&o.push("<div id='"+this.id+"_gridstart_div' style='height:0px; font-size:0; line-height:0px;' tabindex='0'>그리드 시작</div>"),
this.options.groupbyZone&&this.options.groupbyFilterBox&&"top"==this.options.groupbyFilterBoxLocation&&(o.push("<div id='"+this.id+"_groupbyFilterBox_div' class='w2grid_groupbyFilterBox' style='top:0px;left:0px; right:"+(a?this.scrollLayerWidthSize:"0")+"px;float:left;'>"),o.push("<div id='"+this.id+"_groupbyFilterBox_main' class='w2grid_groupbyFilterBox_main'>"),o.push("<div id='"+this.id+"_groupbyFilterBox_buttons' class='w2grid_groupbyFilterBox_buttons' >"),o.push('<input id="'+this.id+'_groupbyFilterBox_delete" type="button" value="X" class="w2grid_groupbyFilterBox_delete" />'),o.push('<input id="'+this.id+'_groupbyFilterBox_apply" type="checkbox" class="w2grid_groupbyFilterBox_apply" />'),o.push("</div>"),o.push('<div id="'+this.id+'_groupbyFilterBox_select"'+m.call(this,"combobox")+'aria-labelledby="'+this.id+'_groupbyFilterBox_itemTable" aria-autocomplete="none" class="" tabindex="0">'),o.push("</div>"),o.push("</div>"),o.push("</div>")),this.options.groupbyZone){var f="<div id='"+this.id+"_groupbyZone_div' class='w2grid_groupbyZone' style='width:0px; height:0px;'>",b="";this.options.groupbyZoneSearch&&(b="<div id='"+this.id+"_groupbyZone_search' class='w2grid_groupbyZone_search'></div>"),o.push(f+b+"</div>")}return o.push("<div id='"+this.id+"_main_div' class='w2grid_main' style='z-index:"+t+";overflow:"+n+";position:absolute;left:0px; right:"+(a?this.scrollLayerWidthSize:"0")+"px; top:0px; bottom:"+this.scrollLayerWidthSize+"px;float:left;'>"),o.push(this.mainDataGridLayout()),o.push("</div>"),this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"==this.options.groupbyFilterBoxLocation&&(o.push("<div id='"+this.id+"_groupbyFilterBox_div' class='w2grid_groupbyFilterBox' style='left:0px; right:"+(a?this.scrollLayerWidthSize:"0")+"px; bottom:0px;float:left;'>"),o.push("<div id='"+this.id+"_groupbyFilterBox_main' class='w2grid_groupbyFilterBox_main' >"),o.push("<div id='"+this.id+"_groupbyFilterBox_buttons' class='w2grid_groupbyFilterBox_buttons' >"),o.push('<input id="'+this.id+'_groupbyFilterBox_delete" type="button" value="X" class="w2grid_groupbyFilterBox_delete"/>'),o.push('<input id="'+this.id+'_groupbyFilterBox_apply" type="checkbox" class="w2grid_groupbyFilterBox_apply" />'),o.push("</div>"),o.push('<div id="'+this.id+'_groupbyFilterBox_select"'+m.call(this,"combobox")+'aria-labelledby="'+this.id+'_groupbyFilterBox_itemTable" aria-autocomplete="none" class="" tabindex="0">'),o.push("</div>"),o.push("</div>"),o.push("</div>")),o.push("<div id='"+this.id+"_scrollX_div' class='w2grid_scrollX' style='z-index:"+e+";overflow-x:hidden;overflow-y:hidden;position:absolute; height:0px; left:0px; right:"+(a?this.scrollWidthSize:"0")+"px; bottom:0px;"+l+"'>"),o.push(this.getScrollX()),o.push("</div>"),o.push("<div id='"+this.id+"_scrollY_div' class='w2grid_scrollY' style='z-index:"+i+";position:absolute; overflow-x:hidden;overflow-y:scroll;width:"+(a||"native"===this.options.drawType?this.scrollLayerWidthSize:"0")+"px; height: 100%;right:0px;"+h+c+"'>"),o.push(this.getScrollY()),o.push("</div>"),o.push("<div id='"+this.id+"_iScrollX' class='w2grid_iScrollX' style='visibility:hidden;'></div>"),o.push("<div id='"+this.id+"_iScrollY' class='w2grid_iScrollY' style='visibility:hidden;'></div>"),o.push("<div id='"+this.id+"_resize_line' class='w2grid_resize_line' style='display:none;position:absolute;top:10px; bottom:0px;border:0px dashed #222222; border-left-width:1px;'></div>"),o.push("<div id='"+this.id+"_noresult' style='display:none;position:absolute;"+this.options.noResultMessageStyle+"' class='"+this.options.noResultMessageClass+"'>"+this.options.noResultMessage+"</div>"),(this.options.senseReader&&this.options.useStartEndDiv||1==this.options.moveKeyEditModeAll)&&o.push("<div id='"+this.id+"_gridend_div' style='height:0px; font-size:0; line-height:0px;' tabindex='0'>그리드 끝</div>"),o.push("</div>"),o.join("")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getScrollY=function(){try{
return"<div id='"+this.id+"_size_y' style='height:0px; position:absolute; top:0px; left:0px; width:18px;'></div>"}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getScrollX=function(){try{for(var t=this.getFixedColumnLastIndex(),e=0,i=0;i<t;i++)this.hiddenList[i]||(e+=this.colWidthList[i]);var o=this.getFixedRightColumnLastIndex(),s=0;for(i=this.colWidthList.length-1;i>=o;i--)this.hiddenList[i]||(s+=this.colWidthList[i]);var a=this.options.scrollFocus?" tabIndex='0'":" tabIndex='-1'",n=[],l=this.options.fixedColumnScrollHidden?"hidden":"scroll";return n.push("<table id='"+this.id+"_scrollX_table' style='height:18px;table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:100%'>"),n.push("<tr>"),n.push("<td id='"+this.id+"_scrollX_left' style='border:0px solid red;padding:0px 0px 0px 0px;height:"+this.scrollLayerWidthSize+"px;width:"+e+"px;vertical-align:bottom;'>"),n.push("<div style='height:"+this.scrollLayerWidthSize+"px;overflow-x:"+l+";overflow-y:hidden'></div>"),n.push("</td>"),n.push("<td style='border:0px solid orange;padding:0px 0px 0px 0px;height:18px;'>"),n.push("<div id='"+this.id+"_scrollX_right' style='height:18px;border:0px solid blue; overflow-x:scroll;overflow-y:hidden;padding:0px 0px 0px 0px;padding-top:-5px;'"+a+">"),n.push("<div id='"+this.id+"_scroll_size' style='height:1px;width:"+parseInt(this.gridWidth-e-s)+"px'></div>"),n.push("</div>"),n.push("</td>"),n.push("<td id='"+this.id+"_scrollX_fixedRight' style='border:0px solid red;padding:0px 0px 0px 0px;height:"+this.scrollLayerWidthSize+"px;width:"+s+"px;vertical-align:bottom;'>"),n.push("<div style='height:"+this.scrollLayerWidthSize+"px;overflow-x:scroll;overflow-y:hidden'></div>"),n.push("</td>"),n.push("</tr>"),n.push("</table>"),n.join("")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.mainDataGridLayout=function(){try{this.setTableStruct();var t=[];return t.push(this.getBodyTable()),t.push(this.getFooterTable()),this.setInitialCSS(),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setColArr=function(){try{this.colGroupArr=[],this.setColWidth(),this.gridWidth=0;var t,e,i=-1;if(this.options.rowStatusVisible){var o=40;this.options.rowStatusWidth.length>0&&(this.options.rowStatusWidth.indexOf("*")>-1?(o=this.options.rowStatusWidth,i++):this.options.rowStatusWidth-0>-1&&(o=this.options.rowStatusWidth-0)),this.colWidthList.unshift(o),this.hiddenList.unshift(!1),this.hiddenAdaptiveList.unshift(!1)}if(this.options.rowNumVisible){o=40;this.options.rowNumWidth.length>0&&(this.options.rowNumWidth.indexOf("*")>-1?(o=this.options.rowNumWidth,i++):this.options.rowNumWidth-0>-1&&(o=this.options.rowNumWidth-0)),this.colWidthList.unshift(o),this.hiddenList.unshift(!1),this.hiddenAdaptiveList.unshift(!1)}if(i>-1){this.autofitColumn=!0;for(var s=0;s<2;s++)this.colWidthList[s]&&"string"==typeof this.colWidthList[s]&&this.colWidthList[s].indexOf("*")>-1&&(this.autofitColumnIndexArr.push(s),this.autofitColumnWidthArr[s]=this.colWidthList[s])}if(this.isIE6or7){t=[],e=this.colIndexes.bodyColInfo.colSpanArr;var a=this.colIndexes.bodyColInfo.colIndexArr.length;for(s=0;s<a;s++)if(e[s])for(var n=0;n<e[s];n++)t[n]=!0}this.colGroupArr.push("<colgroup>");for(s=0;s<this.colWidthList.length;s++){null==this.colWidthList[s]&&(this.colWidthList[s]=70);var l=isNaN(this.colWidthList[s])?0:this.colWidthList[s];this.hiddenList[s]?l=0:(this.gridWidth+=l,this.isIE6or7&&(s<this.defaultColCnt||!t[s])&&(l--,s==this.defaultColCnt&&l--)),this.colGroupArr.push("<col id='colGroupID_"+s+"' style='width:"+l+"px;white-space:nowrap' />")}this.colGroupArr.push("</colgroup>")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setCss=function(){try{if(this.options.headerTableClass=this.struct.head.attr.class||"gridHeaderTableDefault",this.options.headerTrClass=this.struct.head.attr.rowClass||"gridHeaderTRDefault",this.options.headerTdClass=this.struct.head.attr.columnClass||"gridHeaderTDDefault",
this.options.bodyTableClass=this.struct.body.attr.class||"gridBodyTableDefault",this.options.bodyTrClass=this.struct.body.attr.rowClass||"gridBodyTRDefault",this.options.bodyTdClass=this.struct.body.attr.columnClass||"gridBodyDefault",a.D.isIEAllVersion()?this.options.gridNativeClass="gridNativeIE":this.options.gridNativeClass="gridNative",this.hasFooter&&(this.options.footerTableClass=this.struct.foot.attr.class||"gridFooterTableDefault",this.options.footerTrClass=this.struct.foot.attr.rowClass||"gridFooterTRDefault",this.options.footerTdClass=this.struct.foot.attr.columnClass||"gridFooterTDDefault"),this.hasSubtotal){this.options.subtotalTrClass=this.struct.subtotalArr[this.struct.subtotalArr.length-1].attr.rowClass||"gridSubtotalTRDefault",this.options.subtotalTdClass=this.struct.subtotalArr[this.struct.subtotalArr.length-1].attr.columnClass||"gridSubtotalDefault";for(var t=0;t<this.struct.subtotalArr.length;t++)if(this.struct.subtotalArr[t].attr.subtotalClass){this.subtotalClassList=[];break}if(this.subtotalClassList)for(t=0;t<this.struct.subtotalArr.length;t++){var e=this.struct.subtotalArr[t].attr.subtotalClass||"gridSubtotalDefault";this.subtotalClassList.push(e)}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setInitialCSS=function(){try{this.options.oddEvenColorDisplay&&(WebSquare.cssStyleSheet.addRule("#"+this.id+" .evenTd","background-color:"+this.options.evenRowBackgroundColor),WebSquare.cssStyleSheet.addRule("#"+this.id+" .oddTd","background-color:"+this.options.oddRowBackgroundColor)),this.rowStyleIndex=0,this.cellStyleIndex=0,this.readOnlyTdStyle="",this.readOnlyTdImg="",this.disabledTdStyle="",this.rowOverStyle="",""!=this.options.readOnlyBackgroundColor&&(this.readOnlyTdStyle="background-color:"+this.options.readOnlyBackgroundColor),""==this.options.readOnlyBackgroundImg&&""==this.options.readOnlyBackgroundImgCSS||(this.options.readOnlyBackgroundImgCSS?this.readOnlyTdImg=this.options.readOnlyBackgroundImgCSS:this.readOnlyTdImg="background:url("+this.options.readOnlyBackgroundImg+") no-repeat center center; background-size: cover"),""!=this.options.disabledBackgroundColor&&(this.disabledTdStyle="background-color:"+this.options.disabledBackgroundColor),""!=this.options.disabledFontColor&&(this.disabledTdStyle=""!=this.disabledTdStyle?this.disabledTdStyle+";":"",this.disabledTdStyle+="color:"+this.options.disabledFontColor),""!=this.options.rowNumBackgroundColor&&WebSquare.cssStyleSheet.addRule("#"+this.id+" ."+this.options.bodyTdClass+"_rowNumber","background-color:"+this.options.rowNumBackgroundColor),this.options.rowMouseOver&&(this.rowOverStyle="background-color:"+this.options.rowMouseOverColor),-1!=this.options.defaultHeaderCellHeight&&WebSquare.cssStyleSheet.addRule("#"+this.id+" th."+this.options.headerTdClass,"height:"+this.options.defaultHeaderCellHeight+"px"),-1!=this.options.defaultCellHeight&&(WebSquare.cssStyleSheet.addRule("#"+this.id+" td."+this.options.bodyTdClass,"height:"+this.options.defaultCellHeight+"px"),-1==this.options.defaultHeaderCellHeight&&WebSquare.cssStyleSheet.addRule("#"+this.id+" th."+this.options.headerTdClass,"height:"+this.options.defaultCellHeight+"px"))}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getGridClassName=function(t,e){try{return null==t||""==t?e:t}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.grid2TableXml=function(t){try{var e=WebSquare.Elem.api.getElementsByTagName(this.element,t,s.v._XML_NAMESPACE.W2);return e.length>0?this.oneGrid2TableXml(e[0]):null}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.xml2JSON=function(t){try{var e={attr:{},rowArr:[],rowAttrArr:[]};e.attr=WebSquare.Parser.parseAttribute(t);for(var i=WebSquare.Elem.api.getElementsByTagName(t,"row",s.v._XML_NAMESPACE.W2),o=0;o<i.length;o++){e.rowAttrArr[o]=WebSquare.Parser.parseAttribute(i[o]);for(var a=WebSquare.Elem.api.getElementsByTagName(i[o],"column",s.v._XML_NAMESPACE.W2),n=[],l=0;l<a.length;l++){var h=WebSquare.Parser.parseAttribute(a[l]);h["@xml"]=a[l],
n.push(h)}e.rowArr.push(n)}return e}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.oneGrid2TableXml=function(t){try{var e=WebSquare.xml.serialize(t),i=e.indexOf("w2:header")>=0?"th":"td";return e=(e=(e=(e=(e=e.wq_replaceAll("w2:header",this.options.fixPrint?"tbody":"thead")).wq_replaceAll("w2:gBody","tbody")).wq_replaceAll("w2:footer","tbody")).wq_replaceAll("w2:row","tr")).wq_replaceAll("w2:column",i),WebSquare.xml.parse(e)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setColWidth=function(){try{var t=this.getColCnt();this.colWidthList=[],this.autoFitColWidthList=null,this.hiddenList=[],this.hiddenAdaptiveList=[];for(var e=0;e<t;e++)this.colWidthList[e]=null,this.hiddenList[e]=!1,this.hiddenAdaptiveList[e]=!1;this.initializeTableInfo()}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getColCnt=function(){try{for(var t=0,e=this.htmlInfo?this.htmlInfo.head.rowArr[0]:this.struct.head.rowArr[0],i=0;i<e.length;i++){var o=e[i];t+=parseInt(o.colSpan,10)||1}return t}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.initializeTableInfo=function(){try{var t=this,e=function(e){if(null==e)return null;for(var i=[],o=[],s=[],r=[],a=[],n=e.rowArr,l=[],h=0;h<n.length;h++){for(var d=[],u=0;u<t.colWidthList.length;u++)d.push(!1);l.push(d)}var c=0;t.options.rowNumVisible&&(i.push(0),s.push(0),r.push(n.length),a.push([c++])),t.options.rowStatusVisible&&(i.push(!0===t.options.rowNumVisible?1:0),s.push(0),r.push(n.length),a.push([c++]));for(h=0;h<n.length;h++){var p=n[h],g=0;for(u=0;u<p.length;u++){for(var m=p[u],f=parseInt(m.colSpan||1),b=parseInt(m.rowSpan||1);void 0!==l[h][g]&&l[h][g];)g++;m.colIndex=g+t.defaultColCnt,i.push(g+t.defaultColCnt),s.push(h),r.push(b);var y=m.width||"";if(f>1){if("string"==typeof y&&y.indexOf("*")>-1){t.autofitColumn=!0;for(var v=0;v<f;v++){var w=g+v;t.colWidthList[w]=y,t.autofitColumnWidthArr[w+t.defaultColCnt]=y,t.autofitColumnIndexArr.push(w+t.defaultColCnt)}}o[i.length-1]=f}if(1==f&&null==t.colWidthList[g])if("string"==typeof y&&y.indexOf("*")>-1){t.autofitColumn=!0;w=g;t.colWidthList[w]=y,t.autofitColumnIndexArr.push(w+t.defaultColCnt),t.autofitColumnWidthArr[w+t.defaultColCnt]=y}else t.colWidthList[g]=parseInt(y||0);for(var S=0;S<f;S++){a[g+t.defaultColCnt+S]||(a[g+t.defaultColCnt+S]=[]),a[g+t.defaultColCnt+S].push(c),l[h][g+S]=!0,"true"==m.hidden&&(t.hiddenList[g+S]=!0);for(var C=1;C<b;C++)l[h+C][g+S]=!0}c++,delete m.hidden}}return{colIndexArr:i,colSpanArr:o,trIndexArr:s,rowSpanArr:r,colIndexMatch:a}};if(this.colIndexes={headerColInfo:e(this.struct.head),bodyColInfo:e(this.struct.body),footerColInfo:e(this.struct.foot)},this.hasSubtotal){this.colIndexes.subtotalColInfo=[];for(var i=0;i<this.struct.subtotalArr.length;i++){var o=e(this.struct.subtotalArr[i]);this.colIndexes.subtotalColInfo.push(o),this.colIndexes.subtotalColInfo[this.struct.subtotalArr[i].attr.targetColumnID]=o}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getFooterTable=function(){try{if(!this.hasFooter)return"";this.hasFooter=!0;var t="";this.options.footerSummary?t=this.options.footerSummary?" summary='"+this.options.footerSummary.wq_replaceAll("'","&#39;")+"'":"":this.options.captionTitle&&this.options.footerSummaryAuto&&(t=" summary='"+this.options.captionTitle+WebSquare.language.getMessage("Grid_footer_caption")+"'");var e="";if(e="<table id='"+this.id+"_foot_table' class='"+this.options.footerTableClass+"' style='position:absolute; bottom:0px; table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:"+this.gridWidth+"px;'"+t+">",e+=this.getColGroup(this.id+"_col_footer"),this.options.footerCaption?e+="<caption>"+this.options.footerCaption+"</caption>":this.options.captionTitle&&this.options.footerCaptionAuto&&(e+="<caption>"+this.options.captionTitle+WebSquare.language.getMessage("Grid_footer_caption")+"</caption>"),a.D.isSafari()||a.D.isChrome())e+="<thead><tr></tr></thead>";else if(a.D.isIE()){for(var i="",o=0;o<this.getColCnt();o++)i+="<td></td>"
;e+="<thead style='visibility:collapse;'><tr>"+i+"</tr></thead>"}return e+=this.getTableHtml(this.htmlInfo.foot,"tbody","td",this.options.footerTdClass),e=(e=(e+="</table>").wq_replaceAll("width=","or_wd=")).wq_replaceAll("disabled=","dis=")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getBodyTable=function(){try{var t="width:"+this.gridWidth+"px;'";this.isIE6or7&&(t="");var e="";this.options.summary&&(e=" summary = '"+(this.element.getAttribute("summary")||"").wq_replaceAll("'","&#39;")+"' ");var i="",o=this._useRole()?" role='grid' ":"",s="native"===this.options.drawType?"auto":"hidden",a="native"===this.options.drawType?" "+this.options.gridNativeClass:"",n="native"===this.options.drawType?"":" border-collapse:collapse";if(i="<div id='"+this.id+"_dataLayer' class='w2grid_dataLayer' style='position:absolute; width:100%; top:0px;bottom:0px;overflow-x:hidden;overflow-y:"+s+";'>",i+=this.getGridHeaderFillerTable(this.headerXml,this.options.headerTdClass,this.options.headerTrClass,this.id+"_head_table",this.options.headerTableClass),i+="<table id='"+this.id+"_body_table' class='"+this.options.headerTableClass+a+"' style='position:absolute;left:0px;top:0px;table-layout:fixed;"+n+"; border-spacing:0px;"+t+e+o+">",i+=this.getColGroup(this.id+"_col_body"),this.captionXml){var l=WebSquare.xml.parse("<caption/>"),h=null,d=WebSquare.Parser.parseAttribute(this.captionXml);for(var u in d){if("id"==u){var c=d[u];c&&l.documentElement.setAttribute("id",this.id+"_"+c)}else l.documentElement.setAttribute(u,d[u]);"value"==u&&(h=d[u])}if(h)l.documentElement.appendChild(l.createTextNode(h));else for(var p=this.captionXml.getChildNodes(),g=0;g<p.length;g++)if(3===p[g].getNodeType()){var m=l.createTextNode(p[g].getNodeValue());l.documentElement.appendChild(m)}i+=WebSquare.xml.noNameSpaceSerialize(l)}if(this.isWebKit){if(!this.captionXml){var f="transparent",b="0";try{for(g=0;g<document.styleSheets.length;g++){var y=document.styleSheets[g];try{y.cssRules}catch(t){continue}for(var v=0;y.cssRules&&v<y.cssRules.length;v++){var w=y.cssRules[v];if(w.selectorText=="."+this.options.headerTableClass){f=w.style["border-top-color"],b=parseInt(w.style["border-top-width"])/2,g=document.styleSheets.length;break}}}}catch(t){}i+="<caption style='height:"+b+"px;background-color:"+f+";'></caption>"}i+="<thead><tr></tr></thead>"}i+=this.getTableHtml(this.htmlInfo.head,"thead","th",this.options.headerTdClass);a="";return"native"===this.options.drawType&&(a=" class='"+this.options.gridNativeClass+"'"),i+="<tbody id='"+this.id+"_body_tbody'"+a+"></tbody>",i+="</table>",i=(i+="</div>").wq_replaceAll("width=","or_wd=")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getTableInfo=function(t,e,i){try{var s=o.x.extend({},t.attr),a=[],n=t.rowAttrArr||[{}],l=t.rowArr;s.id=this.id+"_"+e+"_tbody",s.style="";for(var h=0;h<l.length;h++){this._useRole()&&(n[h].role="row"),a.push([]);for(var d=0;d<l[h].length;d++){var u=o.x.extend({},l[h][d]);if(this._useRole()&&(u.role="gridcell"),u.class=e+" "+e+"_data",this.isIE6or7){var c=parseInt(u.colSpan||"1"),p=parseInt(u.colIndex);if(c>1){for(var g=1;g<c;g++)0!=this.hgap[i+"_"+p]&&(this.hgap[i+"_"+(p+g)]=!0);this.hgap[i+"_"+p]=!0}else this.hgap[i+"_"+p]=!1}var m=u.textAlign,f=u.style?u.style+";":"";f=f+"text-align:"+(m||"center"),u.style=f,a[h].push(u)}}return{attr:s,rowArr:a,rowAttrArr:n}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getBodyHtmlInfo=function(){try{var t=this.options.bodyTdClass,e=this.options.bodyTrClass,i=this.getTableInfo(this.struct.body,t,e),o=i.attr,a=i.rowArr,n=i.rowAttrArr;this.oneRowLength=a.length,this.oneRowDataLength=0,this.tdIdList=[],this.bodyIdColIndexMap={},this.colMoveIndexMap={};for(var l=0,h={},d=0;d<a.length;d++){n[d].trIndex=d,this.oneRowDataLength+=a[d].length;for(var u=0;u<a[d].length;u++){var p=a[d][u],g=p.style.split(";");if(g.length>0)for(var m=0;m<g.length;m++)if(g[m].indexOf(":")>-1){try{var f=g[m].split(":")[0].wq_trim(),b=g[m].split(":")[1].wq_trim()
;this.options.useDefaultStyle?this.setDefaultStyle(l,f,b):"text-align"!==f||p.textAlign?this.setColumnStyle(l,f,b):this._setInitStyle(l,f,b)}catch(t){}if(!this.options.applyAllColumnStyle)break}var y=this.options.adaptiveStyle||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/adaptiveStyle/@value");if("none"==this.options.adaptiveStyle&&(y=""),y=p.adaptiveStyle||y,"none"==p.adaptiveStyle&&(y=""),y){var v=y.split(";");if(v.length>0)for(var w=0;w<v.length;w++)if(v[w].indexOf(":")>-1)try{var S=v[w].split(":")[0].wq_trim(),C=v[w].split(":")[1].wq_trim();this.setAdaptiveColumnStyle(l,S,C)}catch(t){}}"textarea"==p.inputType&&"all"==p.displayType&&(p.style+=";word-break:break-all;white-space:normal;");var x=p.id;if(null==p.col_id?(p.col_id=x,p.id=this.id+"_"+x,p["@xml"]=p["@xml"].cloneNode(!0),p["@xml"].setAttribute("col_id",x),p["@xml"].setAttribute("id",this.id+"_"+x)):x=p.col_id,this._setCellInfo(x,p["@xml"]),this.bodyIdColIndexMap[x]=l,0==d&&(this.colMoveIndexMap[x]=l),h[x]){var _=WebSquare.language.getMessage("E_comp_duplicated_Msg",x)||"id["+x+"] 가 중복사용되었습니다. 소스코드를 확인하세요.";$l(_)}else h[x]=x;this.tdIdList.push(x),""===x&&c.k.printLog("warning : The "+this.id+" column name for column index "+l+" is missing."),l++}}return{attr:o,rowArr:a,rowAttrArr:n}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getHeaderHtmlInfo=function(){try{var t=this.options.headerTdClass,e=this.options.headerTrClass,i=this.getTableInfo(this.struct.head,t,e),o=i.attr,s=i.rowArr,a=i.rowAttrArr,n=[];this.thIdList=[],this.colMoveHeaderIndexMap={},o.id=this.id+"_head_table",o.class=this.options.headerTableClass;var l=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/i.exec(this.struct.head.attr.style);l&&2==l.length&&(this.headerHeight=parseInt(l[1])),o.style=this.options.hideHeader?"display:none":"",this.headCellInfoHash={};for(var h=0;h<s.length;h++){n.push([]);for(var d=0;d<s[h].length;d++){var u=s[h][d],c=null,p=u.inputType,g=u.dataType,m=u.value;if(void 0!==m&&null!=m||void 0!==(m=u.defaultValue)&&null!=m||(m=""),"checkbox"==p)c="<input type='checkbox' style='border:0px solid blue;background-color:transprent;' />";else if("select"==p){var f="";if(this.options.chooseOption){if(f=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef)(y=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef))&&(f=y)}else if(this.options.allOption){f=WebSquare.language.getMessage("Grid_all")||"-전체-"}else if("json"!==u["@xml"]._elementType){var b=(WebSquare.xml.serialize(u["@xml"]).match(/label\s*>[^<]+<\//)||"").toString();""!==b&&(f=b.slice(b.toString().indexOf(">")+1,-2))}c="<div style='width:100%;height:20px;top:0px;left:0px;position:relative;background-color:#ffffff' class='w2selectbox "+this.options.headerTdClass+" "+this.options.headerTdClass+"_data'><span style='display:none'></span><table class='w2selectbox_table_main'><tr class='w2selectbox_row w2selectbox_row_main'><td class='w2selectbox_col_label'><div class='w2selectbox_label'>"+f+"</div></td><td class='w2selectbox_col_button'></td></tr></table></div>"}else if("text"==p&&"own"==g)c="<input type='text' class='w2grid_head_input' style='width:95%; height:18px;' />";else{var y;if(this.options.useLocale&&u.localeRef)(y=this.getLocaleValue(u.localeRef))&&(m=y);c="<nobr style='padding-top:0px; padding-left:4px;padding-right:4px' >"+(m=null!=m?m:"")+"</nobr>"}n[h].push(c),this.thIdList.push(u.id),this.headCellInfoHash[u.id]=u["@xml"],this._setHeaderInfo(u.id,u["@xml"]),null==u.col_id&&(u.col_id=u.id)}}return{attr:o,rowArr:s,rowAttrArr:a,headerTdHtml:n}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getFooterHtmlInfo=function(){try{var t=this.options.footerTdClass,e=this.options.footerTrClass,i=this.getTableInfo(this.struct.foot,t,e),o=i.attr,s=i.rowArr,a=i.rowAttrArr,n=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/i.exec(this.struct.foot.attr.style);return n&&2==n.length&&(this.footerHeight=parseInt(n[1])),{attr:o,rowArr:s,
rowAttrArr:a}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getSubtotalHtmlInfo=function(t){try{var e=this.options.subtotalTdClass;this.subtotalClassList&&(e=t.attr.subtotalClass||"gridSubtotalDefault");for(var i=this.options.subtotalTrClass,o=this.getTableInfo(t,e,i),s=o.attr,a=o.rowArr,n=o.rowAttrArr,l=0;l<a.length;l++){n[l].trIndex=l,n[l].targetColumnID=s.targetColumnID;for(var h=0;h<a[l].length;h++)a[l][h].class=a[l][h].class+" "+this.id+"_subtotal__column"+h,delete a[l][h].hidden}return{attr:s,rowArr:a,rowAttrArr:n}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getTableHtml=function(t,e,i,s){try{var a=t.attr,n=t.rowArr,l=t.rowAttrArr,h=[],d="";if("native"===this.options.drawType){var u={};o.x.extend(u,a),u.class?u.class+=" "+this.options.gridNativeClass:u.class=this.options.gridNativeClass,d=this.getAttributesString(u)}else d=this.getAttributesString(a);h.push("<"+e+d+">");var c="",p="";n.length>=2&&(c=!1===this.options.rowNumRowSpan?" rowSpan='1'":" rowSpan='"+n.length+"'",p=!1===this.options.rowStatusRowSpan?" rowSpan='1'":" rowSpan='"+n.length+"'");var g="";"native"===this.options.drawType&&t===this.htmlInfo.head&&(g=" "+this.options.gridNativeClass);for(var m=0;m<n.length;m++){if(t==this.htmlInfo.head?h.push("<tr"+this.getAttributesString(l[m])+" class='gridHeaderStyle_"+m+g+"'>"):t==this.htmlInfo.foot?h.push("<tr"+this.getAttributesString(l[m])+" class='gridFooterStyle_"+m+"'>"):h.push("<tr"+this.getAttributesString(l[m])+">"),0==this.options.rowNumRowSpan&&this.options.rowNumVisible)if(m===n.length-1){var f="";t==this.htmlInfo.head&&(f=this.options.rowNumHeaderValue),h.push("<"+i+c+" class='"+s+" "+s+"_rowNumber' value='"+f+"' colIndex='0' id='_headerRowNumber'></"+i+">")}else h.push("<"+i+c+" class='"+s+" "+s+"_rowNumber' value='' colIndex='0' id='_headerRowNumber'></"+i+">");else if(0===m){f="";t==this.htmlInfo.head&&(f=this.options.rowNumHeaderValue),this.options.rowNumVisible&&h.push("<"+i+c+" class='"+s+" "+s+"_rowNumber' value='"+f+"' colIndex='0' id='_headerRowNumber'></"+i+">")}if(!1===this.options.rowStatusRowSpan){if(m===n.length-1){var b="";t==this.htmlInfo.head&&(b=this.options.rowStatusHeaderValue),this.options.rowStatusVisible&&h.push("<"+i+p+" class='"+s+" "+s+"_rowStatus' value='"+b+"' colIndex='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}else if(this.options.rowStatusVisible)if(this.options.rowStatusColSpan&&0==m){var y=1;n[m][0].colSpan?y+=Number(n[m][0].colSpan):y++;var v=" colSpan='"+y+"'",w=n[m][0].value;h.push("<"+i+p+v+" class='"+s+" "+s+"_rowStatus' value='"+w+"' colIndex='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}else h.push("<"+i+p+" class='"+s+" "+s+"_rowStatus' value='' colIndex='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}else if(0==m){b="";t==this.htmlInfo.head&&(b=this.options.rowStatusHeaderValue),this.options.rowStatusVisible&&h.push("<"+i+p+" class='"+s+" "+s+"_rowStatus' value='"+b+"' colIndex='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}for(var S=0;S<n[m].length;S++){if(s!==this.options.subtotalTdClass&&s!==this.options.footerTdClass||null==n[m][S].columnClass)if(this.subtotalClassList&&n[m][S].columnClass){for(var C=0;C<this.subtotalClassList.length;C++)if(this.subtotalClassList[C]&&s===this.subtotalClassList[C]){x=n[m][S].class;n[m][S].class=n[m][S].columnClass+" "+n[m][S].class,h.push("<"+i+this.getAttributesString(n[m][S])+">"),n[m][S].class=x;break}}else h.push("<"+i+this.getAttributesString(n[m][S])+">");else{var x=n[m][S].class;n[m][S].class=n[m][S].columnClass+" "+n[m][S].class,h.push("<"+i+this.getAttributesString(n[m][S])+">"),n[m][S].class=x}t.headerTdHtml&&t.headerTdHtml[m][S]&&h.push(t.headerTdHtml[m][S]),h.push("</"+i+">")}h.push("</tr>")}return h.push("</"+e+">"),h.join("")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getGridHeaderFillerTable=function(t,e,i,o,s){try{if(!this.options.headFiller)return"";var a=[],n=""
;return this.options.hideHeader&&(n="display:none"),a.push("<table class='"+this.options.headerTableClass+"' style='z-index:-1;position:absolute;table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:"+this.gridWidth+"px; '>"),a.push("<tbody id='"+this.id+"_"+e+"_tbody_tmp' style='"+n+"' class='"+s+"'>"),a.push("<tr class='"+i+"'>"),a.push("<td style='' id='"+this.id+"_header_bg_td' class='"+e+" "+e+"_rowNumber'>&nbsp;</td>"),a.push("</tr>"),a.push("</tbody>"),a.push("</table>"),a.join("")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getColGroup=function(t){try{return this.colGroupArr.join("").wq_replaceAll("colGroupID",t)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.initializeLayoutEvents=function(){try{this.event.addListener2(this.getElementById(this.id+"_scrollX_right"),"onscroll",this.handleScrollX,this),this.event.addListener2(this.getElementById(this.id+"_scrollY_div"),"onscroll",this.handleScrollY,this),this.event.addListener2(this.render,"onmousewheel",this.handleWheel,this),this.options.groupbyZone&&(this.event.addListener2(this.getElementById(this.id+"_groupbyZone_div"),"onclick",this.handleGroupbyZoneClick,this),this.event.addListener2(this.getElementById(this.id+"_groupbyZone_div"),"onmousedown",this.handleChangeGroupDepth,this)),this.options.resize&&!a.D.isMobile()&&(this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousemove",this.event.bindAsEventListener(this,this.handleColumnResize)),this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousedown",this.event.bindAsEventListener(this,this.doColumnResize)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.endColumnResize)),this.options.rowResize&&(this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onmousemove",this.event.bindAsEventListener(this,this.handleRowResize)),this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onmousedown",this.event.bindAsEventListener(this,this.doRowResize)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.endRowResize))),a.D.isIE()&&s.v.browserVersion()<=8&&this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,(function(t){(this.resizeStarted||this.options.rowResize&&this.rowResizeStarted||null!=this.columnMoveTarget)&&u.B.preventDefault(t)})))),this.options.resize&&a.D.isMobile()&&(this.event.addListener(this.getElementById(this.id+"_dataLayer"),"ontouchmove",this.event.bindAsEventListener(this,this.handleColumnResize)),this.event.addListener(this.getElementById(this.id+"_dataLayer"),"ontouchstart",this.event.bindAsEventListener(this,this.doColumnResize)),this.event.addListener(document.documentElement,"ontouchend",this.event.bindAsEventListener(this,this.endColumnResize)))}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.handleScrollX=function(t){try{var e=u.B.getTarget(t);e&&(this._scrollXPrev||(this._scrollXPrev={}),this._scrollXPrev.scrollLeft===e.scrollLeft&&this._scrollXPrev.scrollTop===e.scrollTop&&this._scrollXPrev.scrollWidth===e.scrollWidth&&this._scrollXPrev.scrollHeight===e.scrollHeight&&(this.scrollXPreventEndEdit=!0),this._scrollXPrev.scrollLeft=e.scrollLeft,this._scrollXPrev.scrollTop=e.scrollTop,this._scrollXPrev.scrollWidth=e.scrollWidth,this._scrollXPrev.scrollHeight=e.scrollHeight),s.v.clearTimer(this.id+"_completiveDrawData",!0),s.v.clearTimer(this.id+"_applyStyleOptions",!0),null==this.editedCell||this.scrollXPreventEndEdit||this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t]),this._handleScrollX(),this.scrollXPreventEndEdit&&this.editedCell&&this.editedCell.setPosition&&this.editedCell.setPosition(),this.scrollXPreventEndEdit=!1,u.B.fireEvent(this,"onscrollx",t)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._handleScrollX=function(){try{this.body_table||(this.head_table=this.getElementById(this.id+"_head_table"),
this.body_table=this.getElementById(this.id+"_body_table"),this.hasFooter&&(this.foot_table=this.getElementById(this.id+"_foot_table")),this.scrollX_right=this.getElementById(this.id+"_scrollX_right")),void 0!==this.colGroup&&null!=this.colGroup||(this.colGroup={},this.colGroup.bodyColList=this.body_table.getElementsByTagName("col"),this.hasFooter?this.colGroup.footerColList=this.foot_table.getElementsByTagName("col"):this.colGroup.footerColList=null);var t=0;if(this.options.scrollByColumn){var e=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;e>1?t=1+Math.round(e):e<1&&(t=1+Math.round(1/e))}var i=this.getFixedColumnLastIndex(),o=this.scrollX_right.scrollLeft,s=this.gridWidth-o-t-this.fixedWidth-1-this.fixedWidthRight,n=s;s=s>0?s:0;var l=this.options.fixedRightColumn>0;if(!l){if(this.head_table.style.width=s+"px",this.isWebKit){for(var h=[],d=this.defaultColCnt;d<this.hiddenList.length;d++)1==this.hiddenList[d]&&h.push(d-this.defaultColCnt);(A=s-this.colGroup.bodyColList.length-h.length-1)<0&&(A=0),this.body_table.style.width=A+"px",this.hasFooter&&(this.foot_table.style.width=A+"px")}else this.body_table.style.width=s+"px",this.hasFooter&&(this.foot_table.style.width=s+"px");this.hasFooter&&(this.foot_table.style.width=s+"px")}var u=[],c=[],p=0,g=-1,m=0;if(l||this.options.scrollByColumn||a.D.isIE(8)){var f=parseInt(document.getElementById(this.id+"_scrollY_div").style.width,10)-1;if(p=(m=this.resizeObj&&this.resizeObj.clientWidth?this.resizeObj.clientWidth:this.render.clientWidth)-1-this.fixedWidth-this.fixedWidthRight,a.D.isChrome()&&(p+=1),-1!=f&&(p-=f),l){this.options.scrollByColumn=!1;var b=m-1-f;b<this.gridWidth&&(this.head_table.style.width=m-1-f+"px",this.body_table.style.width=m-1-f+"px",this.hasFooter&&(this.foot_table.style.width=m-1-f+"px"))}}var y=this.getFixedRightColumnLastIndex(),v=l,w=-1;for(d=this.colWidthList.length-1;d>=y;d--)this.hiddenList[d]||(this.colGroup.bodyColList[d].style.width=this.colWidthList[d]+"px");for(d=y-1;d>=0;d--){var S=0,C=parseInt(this.colWidthList[d],10)||0;if(this.hiddenList[d]&&(C=0),l&&v)if(s>p+C)s-=C,C=0;else{var x=C;b<this.gridWidth&&(C-=s-p),s-=x,v=!1,w=d}else s>C?s-=C:(s>0&&n<=p&&(g=d,this.options.scrollByColumn&&(S=s)),C=s,s=0),d<i&&!this.hiddenList[d]&&(C=parseInt(this.colWidthList[d],10)||0);var _=0,I=0;if(this.isIE6or7&&0!=C&&(1==this.hgap[this.options.headerTrClass+"_"+d]?0:1,_=1==this.hgap[this.options.bodyTrClass+"_"+d]?0:1,this.hasFooter&&(I=1==this.hgap[this.options.footerTrClass+"_"+d]?0:1)),a.D.isIE(8)&&0==this.defaultColCnt&&0==d&&0==C&&(C=1,g>=0&&(u[g]=u[g]-1,this.colGroup.bodyColList[g].style.width=u[g]+"px",this.hasFooter&&(c[g]=c[g]-1,this.colGroup.footerColList[g].style.width=c[g]+"px"))),this.options.scrollByColumn){var T=this.colWidthList[d];1==C&&a.D.isIE(8)&&0==this.defaultColCnt&&0==d&&(T=1),0==C&&(T=0),S>0&&(T=S),w===d&&(T=0),(0==T||1==T||T==this.colWidthList[d]||S>0||w===d)&&(this.colGroup.bodyColList[d].style.width=T-_+"px",u[d]=T-_,this.hasFooter&&(this.colGroup.footerColList[d].style.width=T-I+"px",c[d]=T-I))}else this.hiddenList[d]&&(C=0),this.colGroup.bodyColList[d].style.width=C-_+"px",u[d]=C-_,this.hasFooter&&(this.colGroup.footerColList[d].style.width=C-I+"px",c[d]=C-I)}f=this.getElementById(this.id+"_scrollY_div").offsetWidth;if(this.isWebKit&&-1==this.options.className.indexOf("w2gridViewItemTable")&&0===f&&"allColumn"===this.options.autoFit&&!this.options.autoFitMinWidth){var k=this.render.getBoundingClientRect().width,D=!0;this.head_table.getBoundingClientRect().width<=0&&(D=!1);for(d=y-1;d>=0;d--){var L=k-(D?this.head_table.getBoundingClientRect().width:this.body_table.getBoundingClientRect().width),W=1;if(!(L>=0))break;if(!this.hiddenList[d]){if(L<2)break;var A=parseInt(this.colGroup.bodyColList[d].style.width);this.colGroup.bodyColList[d].style.width=A+W+"px",u[d]=A+W,(L=k-(D?this.head_table.getBoundingClientRect().width:this.body_table.getBoundingClientRect().width))<1&&(W=-1,
this.colGroup.bodyColList[d].style.width=A+W+"px",u[d]=A+W),this.hasFooter&&(this.colGroup.footerColList[d].style.width=A+W+"px",c[d]=A+W)}}}this.setColIndexInfo(u,c),this._setGridBorder(),(this.groupbyZoneStatus.groupbyZoneRender||this.options.useFilterList)&&(this.resizeGroupbyZone(),this.resizeGridList())}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.redrawTable=function(){try{if(this.isWebKit)if("native"===this.options.drawType){var t=this.colGroup.bodyColList[0],e=t.offsetWidth,i=t.id;t.style.width=e+1+"px",a.D.setTimeout((function(){document.getElementById(i).style.width=e+"px"}),{key:this.id+"_redrawTable",delay:20})}else{null==this._redrawTable_transform&&(this._redrawTable_transform=this.body_table.style.webkitTransform),this.body_table.style.webkitTransform="rotateZ(0deg)";var o=this.uuid;a.D.setTimeout((function(){var t=WebSquare.idCache[o];t.body_table.style.webkitTransform=t._redrawTable_transform,delete t._redrawTable_transform}),{key:this.id+"_redrawTable",delay:20})}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setColIndexInfo=function(t,e){try{if(void 0===this.colGroup||null==this.colGroup){this.colGroup={},this.colGroup.bodyColList=this.getElementById(this.id+"_body_table").getElementsByTagName("col");var i=this.getElementById(this.id+"_foot_table");this.colGroup.footerColList=i?i.getElementsByTagName("col"):null}this.colIndexInfo={};var o=this.getVisibleColRange(this.colGroup.bodyColList,t),s=this.getVisibleTds(this.colIndexes.bodyColInfo,o);if(this.colIndexInfo.body={colInfo:this.colIndexes.bodyColInfo,visibleTds:s.visibleTds,invisibleTds:s.invisibleTds,visibilityArr:s.visibilityArr,firstCoveredColIndex:o.firstCoveredColIndex},this.isIE6or7){var a=this.getVisibleTds(this.colIndexes.headerColInfo,o);if(this.colIndexInfo.header={colInfo:this.colIndexes.headerColInfo,visibleTds:a.visibleTds,invisibleTds:a.invisibleTds,visibilityArr:a.visibilityArr,firstCoveredColIndex:o.firstCoveredColIndex},this.hasFooter){var n=this.getVisibleColRange(this.colGroup.footerColList,e),l=this.getVisibleTds(this.colIndexes.footerColInfo,n);this.colIndexInfo.footer={colInfo:this.colIndexes.footerColInfo,visibleTds:l.visibleTds,invisibleTds:l.invisibleTds,visibilityArr:l.visibilityArr,firstCoveredColIndex:n.firstCoveredColIndex}}if(this.hasSubtotal)for(var h in this.colIndexInfo.subtotal={},this.subtotalRowHash){var d=this.getVisibleTds(this.colIndexes.subtotalColInfo[h],o);this.colIndexInfo.subtotal[h]={colInfo:this.colIndexes.subtotalColInfo[h],visibleTds:d.visibleTds,invisibleTds:d.invisibleTds,visibilityArr:d.visibilityArr,firstCoveredColIndex:o.firstCoveredColIndex}}}this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds()}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.hideInvisibleTds=(d=!0,function(){try{if(d){if(d=!1,this.groupbyStatus.grouped){this.options.lazyDrawHiddenColumn=!1;var t=WebSquare.language.getMessage("Grid_warning6",this.id)||this.id+" groupby가 활성화되어서 lazyDrawHiddenColumn 속성이 비활성화 되었습니다.";return void $l(t)}for(var e=this.defaultColCnt;e<this.colIndexes.bodyColInfo.rowSpanArr.length;e++)if(this.colIndexes.bodyColInfo.rowSpanArr[e]>=2){this.options.lazyDrawHiddenColumn=!1;var i=WebSquare.language.getMessage("Grid_warning7",this.id)||this.id+" : rowSpan이 있기 때문에 lazyDrawHiddenColumn 속성이 비활성화 되었습니다.";return void $l(i)}}var o=this.colIndexInfo.body.visibilityArr,s=[];for(e=0;e<this.drawedRowLength;e++)if("none"!=this.dataRowList[e].style.display)for(var a=0,n=0,l=this.defaultColCnt;l<o.length;l++){this.colIndexes.bodyColInfo.trIndexArr[l]>a&&(n=0,a++);var h=this._getColumnMoveIndex(l-this.defaultColCnt),u=this.data_td_list[h+e*this.oneRowDataLength],c=this.colIndexes.bodyColInfo.colSpanArr[l]||1;o[l]?(this.initVisibilityArr[l]||(this.drawCellData(e,e+this.rowIndex,h),this.applyCellStyleOptions(e+this.rowIndex,h),s[l]=!0),u.style.display="",c+n>1?(u.setAttribute("colSpan",c+n),u.setAttribute("data-lazydrawtd","true")):(u.removeAttribute("colSpan"),
u.removeAttribute("data-lazydrawtd")),n=0):(u.style.display="none",n+=c)}for(e=0;e<s.length;e++)s[e]&&(this.initVisibilityArr[e]=!0)}catch(t){r.w.printStackTrace(t,null,this)}}),p.prototype.getVisibleColRange=function(t,e){try{for(var i=this.render.clientWidth,o=[],s=0,a=-1,n=-1,l=e?e.length:t.length,h=0;h<l;h++){var d=e?e[h]:parseInt(t[h].style.width);if((s+=d)>i){a>=0?(d<3?o.push([a,h]):o.push([a,h+1]),n=h+1,a=-1):(o.push([h,h+1]),n=h+1);break}d<3?-1!=a&&(o.push([a,h]),a=-1):-1==a&&(a=h)}return-1!=a&&a<h&&o.push([a,h]),o.firstCoveredColIndex=-1!==n?n:l,-1==n&&(n=l),o}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getVisibleTds=function(t,e){try{for(var i=[],o=[],s=[],a=0;a<t.colIndexArr.length;a++){for(var n=t.colIndexArr[a],l=t.colSpanArr[a]||1,h=0;h<e.length;h++)if(e[h][0]<=n&&n<e[h][1]||e[h][0]<=n+l-1&&n+l-1<e[h][1]||n<=e[h][0]&&e[h][0]<n+l||n<=e[h][1]-1&&e[h][1]-1<n+l){i[i.length]=a,s[s.length]=!0;break}h==e.length&&(o[o.length]=a,s[s.length]=!1)}return{visibleTds:i,invisibleTds:o,visibilityArr:s}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._setGridBorder=function(){try{if(a.D.isIE(8)){if(0==this.defaultColCnt){var t=this.colGroup.bodyColList[0].style.width,e="1px"==t||"0px"==t?"0px":"";if(!this.leftMostTds){this.leftMostTds=[];for(var i=this.getElementById(this.id+"_head_table").getElementsByTagName("th"),o=this.hasFooter?this.getElementById(this.id+"_foot_table").getElementsByTagName("td"):[],s=0;s<i.length;s++)0==i[s].getAttribute("colIndex")&&this.leftMostTds.push(i[s]);for(s=0;s<o.length;s++)0==o[s].getAttribute("colIndex")&&this.leftMostTds.push(o[s])}for(s=0;s<this.leftMostTds.length;s++)this.leftMostTds[s].style.borderLeftWidth=e,this.leftMostTds[s].style.borderRightWidth=e;if(this.all_data_td_list.length>0){if(!this.leftMostIndexArr){this.leftMostIndexArr=[];for(s=0;s<this.oneRowDataLength;s++)0==this.all_data_td_list[s].getAttribute("colIndex")&&this.leftMostIndexArr.push(s)}for(s=0;s<this.leftMostIndexArr.length;s++)for(var n=0;n<this.drawedRowLength;n++){(l=this.all_data_td_list[this.leftMostIndexArr[s]+n*this.oneRowDataLength]).style.borderLeftWidth=e,l.style.borderRightWidth=e}}if(this.hasSubtotal&&this.drawedSubtotal)for(s=0;s<this.drawedSubtotal.length;s++)for(n=0;n<this.drawedSubtotal[s].length;n++){var l;0==(l=this.drawedSubtotal[s][n].cells[0]).cellIndex&&(l.style.borderLeftWidth=e,l.style.borderRightWidth=e)}}if(!this._setGridBorderNoRefresh){var h=(u=this.getElementById(this.id+"_dataLayer")).style.display,d=document.activeElement;u.style.display="none",u.offsetHeight,u.style.display=h,document.activeElement!=d&&this.hasClass(d,this.options.bodyTdClass)&&d.focus()}}if(this.isIE6or7&&(this.colIndexInfo||this.setColIndexInfo(),this.colGroup&&(this._setBorderFolding(this.all_data_td_list,this.colIndexInfo.body,this.drawedRowLength),this.headerTds||(this.headerTds=this.getElementById(this.id+"_head_table").getElementsByTagName("th")),this._setBorderFolding(this.headerTds,this.colIndexInfo.header)),this.hasFooter&&(this.footerTds||(this.footerTds=this.getElementById(this.id+"_foot_table").getElementsByTagName("td")),this._setBorderFolding(this.footerTds,this.colIndexInfo.footer)),this.hasSubtotal&&this._setSubtotalBorder(),!this._setGridBorderNoRefresh)){var u,c=(u=this.getElementById(this.id+"_dataLayer")).style.filter;d=document.activeElement;u.style.filter="alpha(opacity=99)",u.style.filter=c,document.activeElement!=d&&this.hasClass(d,this.options.bodyTdClass)&&d.focus()}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._setBorderFolding=function(t,e,i){try{if(this.groupbyStatus.grouped)return;if(!t||0==i)return;i=i||1;for(var o=e.firstCoveredColIndex,s=this.oneRowDataLength+this.defaultColCnt,a=0,n=e.visibilityArr.length;a<n;a++){var l=e.colInfo.colIndexArr[a],h=e.visibilityArr[a],d="0px"===t[a].style.borderWidth;if(i>1&&(d=d||"0px"===t[a+s].style.borderWidth),
l<o&&!h&&!d)for(var u=0;u<i;u++)t[a+u*s].style.borderWidth="0px";else if((l>=o||h)&&d)for(u=0;u<i;u++)t[a+u*s].style.borderWidth="",t[a+u*s].style.borderStyle=""}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._setSubtotalBorder=function(){try{if(!this.drawedSubtotal)return;for(var t={},e=0;e<this.drawedSubtotal.length;e++){var i=this.drawedSubtotal[e];if(!t[i.targetID]){t[i.targetID]=!0;for(var o=this.colIndexInfo.subtotal[i.targetID],s=o.firstCoveredColIndex,a=0,n=0;n<i.length;n++)for(var l=i[n],h=0;h<l.cells.length;h++,a++){var d=o.colInfo.colIndexArr[a],u=o.visibilityArr[a],c="0px"===l.cells[h].style.borderWidth;if(d<s&&!u&&!c)for(var p=e;p<this.drawedSubtotal.length;p++)this.drawedSubtotal[p].targetID==i.targetID&&(this.drawedSubtotal[p][n].cells[h].style.borderWidth="0px");else if((d>=s||u)&&c)for(p=e;p<this.drawedSubtotal.length;p++)this.drawedSubtotal[p].targetID==i.targetID&&(this.drawedSubtotal[p][n].cells[h].style.borderWidth="")}}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.handleWheel=function(t){try{if(this.options.groupbyZone||this.options.useFilterList)for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2grid_groupbyZone_scrollView")||e.match("w2grid_customFilter_scrollView"))return void u.B.stopPropagation(t);var i=u.B.getMouseWheelDelta(t),o=t.wheelDeltaY,s=t.wheelDeltaX,n=Math.floor(this.options.wheelRows*Math.abs(i));if("wheelDeltaX"in t&&Math.abs(s)>Math.abs(o))return this.getElementById(this.id+"_scrollX_right").scrollLeft-=s,void u.B.stopEvent(t);var l=this.getElementById(this.id+"_scrollY_div");if(this.scrollEvent=!0,i>0){if(0==l.scrollTop)return void(this.options.wheelStop&&u.B.stopEvent(t));l.scrollTop=this.oneRowScrollHeight*(this._getScrollRowIndex(this.rowIndex)-n)}else if(i<0){var h=this.getElementById(this.id+"_scrollY_div");if(this.rowIndex<0||0==h.clientHeight||h.scrollTop==h.scrollHeight-h.clientHeight)return void(this.options.wheelStop&&u.B.stopEvent(t));l.scrollTop=this.oneRowScrollHeight*(this._getScrollRowIndex(this.rowIndex)+n)}a.D.isMobile()&&this.moveYScroll(0),u.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.handleColumnResize=function(t){try{if(2==t.button)return;var e,i,o,s,n;if("drag"!==this.resizeStatus){for(var l=this.event.getTargetIterator(t,this.render),h=null;l.next();){var d=l.getElement();if("TH"!=d.tagName&&"TD"!=d.tagName||(h=d),"NOBR"==d.tagName){h=null;break}}if(null!=h){e=u.B.getMouseX(t),i=WebSquare.style.getAbsoluteLeft(h),o=parseInt(h.getAttribute("colSpan")||1,10),s=parseInt(h.getAttribute("colIndex"),0),n=i*(null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1);var c=s,p=h.getAttribute("header_id");"_headerRowNumber"!=p&&"_headerRowStatus"!=p&&(c=this._getRealColIndex("head",p)+this.defaultColCnt),c=this._getMouseColumnIndex({colIndex:s,offsetX:e,offsetLeft:n,colSpan:o}),"col-resize"===this.resizeStatus&&!1===this.isColumnResizable(c)&&(this.resizeStatus="init")}}switch(this.resizeStatus){case"init":this.getElementById(this.id+"_head_table").style.cursor="",this.getElementById(this.id+"_head_table").cursor="";break;case"col-resize":this.getElementById(this.id+"_head_table").style.cursor="col-resize",this.getElementById(this.id+"_head_table").cursor="col-resize";break;case"drag":return this.resizeStatus="drag",this.handleResizeLine(t),void(a.D.isMobile()&&u.B.stopEvent(t))}if(null!=this.columnMoveTarget)return;if(null==h)return void(this.resizeStatus="init");if(e-n<(m=.3*this.colWidthList[s]>10?10:parseInt(.3*this.colWidthList[s],10))&&0!=s){if("init"===this.resizeStatus||"col-resize"===this.resizeStatus)return void(this.isColumnResizable(s)&&(this.resizeStatus="col-resize"))}else this.resizeStatus="drag"!==this.resizeStatus?"init":this.resizeStatus;if("_headerRowNumber"!=p&&"_headerRowStatus"!=p)for(var g=0;g<o;g++){if(1==this.options.columnMove){h.getAttribute("header_id");s=this._getRealColIndex("head",p)+this.defaultColCnt}
var m,f=this.colWidthList[(s+g)%(this.columnOrder.length+this.defaultColCnt)];if((n+=f)-(m=.3*f>10?10:parseInt(.3*f,10))<e&&e<n+m)return void("init"!==this.resizeStatus&&"col-resize"!==this.resizeStatus||this.isColumnResizable(s)&&(this.resizeStatus="col-resize"));this.resizeStatus="drag"!==this.resizeStatus?"init":this.resizeStatus}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.doColumnResize=function(t){try{if(2==t.button)return;if(a.D.isMobile()&&this.handleColumnResize(t),!this.options.columnMove&&!this.options.groupbyZone&&"init"==this.resizeStatus||"drag"==this.resizeStatus)return;var e=this.event.getTargetIterator(t,this.render),i=null;for(this.resize_colIndex=null,this.resize_colId=null;e.next();)e.match(this.options.headerTdClass)&&(i=e.getElement());if(null==i)return;this.startResizeX=u.B.getScreenX(t);var o=i.getAttribute("header_id");if("col-resize"==this.resizeStatus){u.B.preventDefault(t),this.resizeStarted=!0,this.resizeStatus="drag";var s=u.B.getMouseX(t),n=WebSquare.style.getAbsoluteLeft(i),l=parseInt(i.getAttribute("colSpan")||1,10),h=this._getRealColIndex("head",o)+this.defaultColCnt;"_headerRowNumber"!=o&&"_headerRowStatus"!=o||(h=parseInt(i.getAttribute("colindex"),10));var d=n;this.resizeColIndex=this._getMouseColumnIndex({colIndex:h,offsetX:s,offsetLeft:d,colSpan:l})}else if(this.options.columnMove&&(0===this.getHeaderRowIndex(o)||this.options.allColumnMove)){this.resizeStatus="drag";var c=null,p=this.htmlInfo.head.rowArr[0],g=!0;if(0!=parseInt(this.options.stopColumnMoveRow,10))for(var m=0;m<p.length;m++)if(p[m].id==o){g=!1;break}if(this.options.allColumnMove)for(m=1;m<this.htmlInfo.head.rowArr.length;m++)if(parseInt(this.options.stopColumnMoveRow,10)!=m)for(var f=0;f<this.htmlInfo.head.rowArr[m].length;f++)if(this.htmlInfo.head.rowArr[m][f].id==o){g=!1,c=o,o=this.htmlInfo.head.rowArr[0][f].id;break}if(g)return;this.resizeStauts="init","_headerRowNumber"!=o&&"_headerRowStatus"!=o&&(null!=c&&(this.realColumnMoveTarget=this.getHeaderIndex(c)),this.columnMoveTarget=this.getHeaderIndex(o),this.columnMoveTargetId=o,this.getElementById(this.id+"_head_table").style.cursor="pointer",this.addClass("w2noselect"),a.D.emptySelection())}else if(this.options.groupbyZone&&(this.resizeStatus="drag","_headerRowNumber"!=o&&"_headerRowStatus"!=o)){if(this.groupbyZoneStatus.clickedHeaderInfo={},this.groupbyZoneStatus.clickedHeaderInfo.index=this._getRealHeaderColIndex(o),this.groupbyZoneStatus.clickedHeaderInfo.value=i.getAttribute("value"),this.groupbyZoneStatus.clickedHeaderInfo.headerID=o,null!=this.groupbyStatus.sortIndexArr&&null!=this.groupbyStatus.sortOrderArr){this.resizeStatus="init";var b=!1,y={};y.render=i,y.parentRender=this.render.getElementsByTagName("div")[0],y.headerID=i.getAttribute("header_id"),y.headerIndex=this.getHeaderIndex(y.headerID);for(m=0;m<this.groupbyStatus.sortIndexArr.length;m++)if(y.headerIndex==this.groupbyStatus.sortIndexArr[m]){b=!0;break}b?this.groupbyFilterList?this.toggleGroupbyFilterList(y):this.createGroupbyFilterList(y):(this.hideGroupbyFilterList(),this.showGroupbyHeaderGhost(t,o))}else this.showGroupbyHeaderGhost(t,o);this.getElementById(this.id+"_head_table").style.cursor="pointer",this.addClass("w2noselect"),a.D.emptySelection()}this.handleResizeLine(t)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.endColumnResize=function(t){try{if(2==t.button)return;if("drag"!==this.resizeStatus&&(this.resizeStatus="init"),this.options.columnMove&&null!=this.columnMoveTarget){var e=this.event.getTargetIterator(t,this.render),i=null;if(this.event.isMe(t,this.render))for(;e.next();)e.match(this.options.headerTdClass)&&(e.match(this.options.headerTdClass+"_rowNumber")||e.match(this.options.headerTdClass+"_rowStatus")||(i=e.getElement()),e.stop());var o=this.resize_colId;null!=i&&(o=i.getAttribute("header_id")||this.resize_colId),this.moveColumnByHeaderId(this.columnMoveTargetId,o),this.resizeStatus="init",this.resizeStarted=!1,this.columnMoveTarget=null,
this.realColumnMoveTarget=null,this.handleResizeLine(t),a.D.emptySelection(),!1===this.options.noSelect&&!1===this.options.preventCopy&&this.removeClass("w2noselect")}else if(null!=this.groupbyZoneStatus.clickedHeaderInfo){for(e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2grid_groupbyZone")){e.getElement(),null==this.groupbyStatus.sortIndexArr&&(this.groupbyStatus.sortIndexArr=[]),null==this.groupbyStatus.sortOrderArr&&(this.groupbyStatus.sortOrderArr=[]);for(var s=0;s<this.groupbyStatus.sortIndexArr.length;s++)if(this.groupbyZoneStatus.clickedHeaderInfo.index==this.groupbyStatus.sortIndexArr[s])return this.groupbyZoneStatus.clickedHeaderInfo=null,void(this.resizeStarted=!1);if(-1!=this.options.groupbyMaxCount&&this.options.groupbyMaxCount<=this.groupbyStatus.sortIndexArr.length)return c.k.printLog("groupby max column count has been exceeded.["+this.id+"]"),this.groupbyZoneStatus.clickedHeaderInfo=null,void(this.resizeStarted=!1);this.groupbyStatus.sortIndexArr.push(this.groupbyZoneStatus.clickedHeaderInfo.index),this.groupbyStatus.sortOrderArr.push(1);var n={};if(n.sortIndex=this.groupbyStatus.sortIndexArr,n.sortOrder=this.groupbyStatus.sortOrderArr,null!=this.groupbyStatus.filter&&(n.filter=this.groupbyStatus.filter),!1===u.B.fireEvent(this,"ongroupby",n)){var l=this.getColCnt()+this.defaultColCnt;n.rowNumHeader={colSpan:l,inputType:"expression",expression:" toggle() + depthStr() + ' [ ' + count() + ' 건 ] ' ",align:"left"},n.footerVisible=!1,n.rowNumFooter={colSpan:l},this.groupby(n)}this.groupbyFilterList&&this.hideGroupbyFilterList();break}this.groupbyZoneStatus.clickedHeaderInfo=null,this.resizeStatus="init",this.handleResizeLine(t),a.D.emptySelection(),!1===this.options.noSelect&&!1===this.options.preventCopy&&this.removeClass("w2noselect")}else if("drag"===this.resizeStatus){this.endResizeX=u.B.getScreenX(t);for(var h=this.resizeColIndex;1==this.hiddenList[h]&&!(--h<0););if(h>=0&&this.isColumnResizable(h)){var d=this.colWidthList[h],p=d+this.endResizeX-this.startResizeX,g=this.cellInfoHash[this.getColumnID(this.columnOrder[h-this.defaultColCnt])];p=g&&p<g.options.minWidth?g.options.minWidth:p,this.setColumnWidth(h,p,!0),0!=Math.abs(d-p)&&u.B.fireEvent(this,"onaftercolumnresize",h-this.defaultColCnt,d,p)}this.resizeStatus="init",this.resizeStarted=!1,this.columnMoveTarget=null,this.realColumnMoveTarget=null,this.handleResizeLine(t),a.D.emptySelection(),!1===this.options.noSelect&&!1===this.options.preventCopy&&this.removeClass("w2noselect")}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.handleResizeLine=function(t){try{var e=this.getElementById(this.id+"_resize_line");if(this.resize_ghost||(this.resize_ghost=document.createElement("div"),this.resize_ghost.className="w2grid_columnMove_ghost",this.resize_ghost.style.display="none",document.body.appendChild(this.resize_ghost),this.resize_arrow=document.createElement("div"),this.resize_arrow.className="w2grid_columnMove_arrow",this.resize_arrow.style.display="none",document.body.appendChild(this.resize_arrow)),this.options.columnMove&&null!=this.columnMoveTarget){for(var i=this.event.getTargetIterator(t,this.render),o=null;i.next();)i.match(this.options.headerTdClass)&&(o=i.getElement());if(null!=o){this.columnBlock||this.createBlockedHeaderInfo();var s=this.columnMoveTargetId,n=this.getHeaderColIndex(s);n=this.columnBlock.hash[n-this.defaultColCnt],s=this.getHeaderColID(n+this.defaultColCnt);var l=o.getAttribute("header_id"),h=this.getHeaderColIndex(l);h=this.columnBlock.hash[h-this.defaultColCnt],l=this.getHeaderColID(h+this.defaultColCnt);var d=this.getHeaderIndex(s),c=this.getHeaderIndex(l);if(d<c)for(var p=this.columnBlock.info[h],g=p.length-1;g>=0;g--){var m=this.getHeaderColID(p[g]+this.defaultColCnt,{firstRow:!0});if(m){l=m,c=this.getHeaderIndex(l);break}}var f=this._getRealColIndex("head",l),b=this.htmlInfo.head.rowArr[0],y=!0;for(g=0;g<b.length;g++)if(b[g].id==l){y=!1;break}
if(this.options.allColumnMove)for(g=1;g<this.htmlInfo.head.rowArr.length;g++)for(var v=0;v<this.htmlInfo.head.rowArr[g].length;v++)if(this.htmlInfo.head.rowArr[g][v].id==l){y=!1,l=this.htmlInfo.head.rowArr[0][v].id,c=this.getHeaderIndex(l),f=this.colMoveHeaderIndexMap[l];break}if(y)return;if("_headerRowNumber"==l||"_headerRowStatus"==l||d==c)e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none";else{if(this.options.fixedColumnNoMove&&(this.getFixedColumnLastIndex()>d+this.defaultColCnt||this.getFixedColumnLastIndex()>c+this.defaultColCnt))return e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none",void(!1===this.isColumnResizable(this.resizeColIndex)&&(this.getElementById(this.id+"_head_table").style.cursor="",this.getElementById(this.id+"_head_table").cursor=""));this.resize_colIndex=c,this.resize_colId=l;var w=null;for(g=0;g<this.htmlInfo.body.rowArr.length;g++){for(v=0;v<this.htmlInfo.body.rowArr[g].length;v++)if(this.htmlInfo.body.rowArr[g][v]["@col"]==f){w=this.bodyIdColIndexMap[this.htmlInfo.body.rowArr[g][v].col_id];break}if(null!==w)break}var S=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),C=WebSquare.style.getAbsoluteTop(this.render),x=WebSquare.style.getAbsoluteLeft(this.render),_=S[c+this.defaultColCnt],I=_.offsetLeft,T=_.offsetWidth,k=I+(d<c?T:0);null!=this.realColumnMoveTarget?this.resize_ghost.innerHTML=S[this.realColumnMoveTarget+this.defaultColCnt].innerHTML:this.resize_ghost.innerHTML=S[this.columnMoveTarget+this.defaultColCnt].innerHTML,this.resize_ghost.style.display="block",this.resize_ghost.style.top=C+S[this.columnMoveTarget].offsetHeight+5+"px",this.resize_ghost.style.left=x+k+5+"px",this.resize_ghost.firstChild&&this.resize_ghost.firstChild.tagName&&"NOBR"!==this.resize_ghost.firstChild.tagName.toUpperCase()?this.resize_ghost.style.width=T+"px":this.resize_ghost.style.width="auto",this.resize_arrow.style.display="block",this.resize_arrow.style.top=C-this.resize_arrow.offsetHeight+"px",this.resize_arrow.style.left=x+k-parseInt(this.resize_arrow.offsetWidth/2,10)+1+"px",e.style.display="block",e.style.zIndex=9999,e.style.border="1px solid #3a3f44",e.style.top=0,e.style.left=k+"px",e.style.height=this.render.offsetHeight+"px",this.getElementById(this.id+"foot_table")&&(e.style.height=this.render.offsetHeight-this.getElementById(this.id+"_foot_table").offsetHeight-this.getElementById(this.id+"_scrollX_div").offsetHeight+"px"),a.D.emptySelection()}}}else if(null!=this.groupbyZoneStatus.clickedHeaderInfo)e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none";else if("drag"==this.resizeStatus&&this.resizeStarted&&this.isColumnResizable(this.resizeColIndex)){e.style.cssText="position:absolute;top:10px; bottom:0px;border:0px dashed #222222; border-left-width:1px; cursor:col-resize;",e.style.display="block",e.style.zIndex=100,e.style.top=0,e.style.height=this.render.offsetHeight+"px",this.getElementById(this.id+"foot_table")&&(e.style.height=this.render.offsetHeight-this.getElementById(this.id+"_foot_table").offsetHeight-this.getElementById(this.id+"_scrollX_div").offsetHeight+"px");var D=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;e.style.left=(u.B.getMouseX(t)-WebSquare.style.getAbsoluteLeft(this.render)*D)/D+"px",this.resize_ghost.style.display="none"}else e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none",!1===this.isColumnResizable(this.resizeColIndex)&&(this.getElementById(this.id+"_head_table").style.cursor="",this.getElementById(this.id+"_head_table").cursor="")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.handleRowResize=function(t){try{if("started"==WebSquare.dragdrop.gDragManager.status)return void(this.rowResizeTarget&&(this.rowResizeTarget.style.cursor="",this.rowResizeTarget.cursor=""));if(this.handleRowResizeLine(t),
null!=this.rowMoveTarget)return;for(var e=this.event.getTargetIterator(t,this.render),i=null;e.next();){var o=e.getElement();if("TD"==o.tagName&&(i=o),"TH"==o.tagName){i=null;break}}if(null==i)return;i.style.cursor="",i.cursor="";var s=u.B.getMouseY(t),a=WebSquare.style.getAbsoluteTop(i),n=parseInt(i.getAttribute("tdIndex"),0),l=parseInt(n/this.realRowDataLength)+this.rowIndex;if(s-a<10&&0!=l)return i.style.cursor="row-resize",i.cursor="row-resize",this.rowResizeTarget&&this.rowResizeTarget!=i&&(this.rowResizeTarget.style.cursor="",this.rowResizeTarget.cursor=""),void(this.rowResizeTarget=i)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.doRowResize=function(t){try{if("started"==WebSquare.dragdrop.gDragManager.status)return;var e=this.event.getTargetIterator(t,this.render),i=null;for(this.resize_rowIndex=null;e.next();)e.match(this.options.bodyTdClass)&&(i=e.getElement());if(null==i)return;if(this.startResizeY=u.B.getScreenY(t),"row-resize"==i.cursor){u.B.preventDefault(t),this.rowResizeStarted=!0,this.rowResizeTarget=i;var o=parseInt(i.getAttribute("tdIndex"),0),s=parseInt(o/this.realRowDataLength)+this.rowIndex;this.resizeRowIndex=s-1}this.handleRowResizeLine(t)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.endRowResize=function(t){try{if(this.rowResizeStarted){this.endResizeY=u.B.getScreenY(t);var e=this.resizeRowIndex||0;if(e>=0){var i=this.rowResizeTarget.offsetHeight+this.endResizeY-this.startResizeY;i=i<20?20:i,this.rowStyleArr[e]="rowResizeStyle_"+e,this.rowStyleValueObj[this.rowStyleArr[e]]||(this.rowStyleValueObj[this.rowStyleArr[e]]={}),this.rowStyleValueObj[this.rowStyleArr[e]].style="height:"+i+"px;",this.applyRowStyleOptions(e),this.drawData(this.rowIndex,e+1,"async")}if(this.rowResizeStarted=!1,this.rowResized=!0,this.rowMoveTarget=null,this.handleRowResizeLine(t),window.getSelection)window.getSelection().removeAllRanges();else if(document.selection)try{document.selection.empty()}catch(t){}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.handleRowResizeLine=function(t){try{var e=this.getElementById(this.id+"_resize_line");this.resize_ghost||(this.resize_ghost=document.createElement("div"),this.resize_ghost.className="w2grid_columnMove_ghost",this.resize_ghost.style.display="none",document.body.appendChild(this.resize_ghost),this.resize_arrow=document.createElement("div"),this.resize_arrow.className="w2grid_columnMove_arrow",this.resize_arrow.style.display="none",document.body.appendChild(this.resize_arrow)),this.rowResizeStarted?(e.style.cssText="position:absolute;left:10px;right:0px;border:0px dashed #222222; border-top-width:1px;",e.style.display="block",e.style.zIndex=100,e.style.top=u.B.getMouseY(t)-WebSquare.style.getAbsoluteTop(this.render)+"px",e.style.width=this.render.offsetWidth+"px",e.style.left=0,this.resize_ghost.style.display="none"):(e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none")}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._setColumnWidth=function(t,e){try{if(this.autoFitColWidthList=null,this.hiddenList[t])this.colWidthList[t]=e;else{var i=isNaN(this.colWidthList[t])?0:this.colWidthList[t];this.colWidthList[t]=e,this.gridWidth+=e-i,this.arrangeOverflowXScroll(),this.setOverflowX(),this.handleScrollX();var o=t-this.defaultColCnt;if(o>=0){var s=this.getCellInfo(o);if("textarea"==s.options.inputType)this.drawColumnData(o);else if(("text"==s.options.inputType||"secret"==s.options.inputType||"calendar"==s.options.inputType)&&s.options.embeddedInput){for(var a=0,n=0;n<=o;n++)if((a+=(s=this.getCellInfo(n)).options.colSpan-0)-1==o){o=n;break}this.embeddedWidthObj[o]&&(this.embeddedWidthObj[o].isChanged=!0),this.drawColumnData(o)}}this.handlerResize_drawInitializer()}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setColumnVisible=function(t,e){try{e=a.D.getBoolean(e)
;for(var i=this.getCellInfo(t),o=this._getRealColIndex("body",i.options.col_id)+this.defaultColCnt,n=0;n<i.options.colSpan;n++)this.hiddenList[o+n]=!e;this.gridWidth=0;for(n=0;n<this.colWidthList.length;n++)this.hiddenList[n]||(this.gridWidth+=this.colWidthList[n]);if(0===this.render.offsetHeight&&0===this.render.offsetWidth&&(this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),this.delayedDraw({rowIndex:-1==this.rowIndex?0:this.rowIndex})),""!=this.options.hiddenClass||""!=i.options.hiddenClass){this.drawData(this.rowIndex,0);var l=this.getColumnID(t),h=this.options.hiddenClass;""!=i.options.hiddenClass&&(h=i.options.hiddenClass);var d=null!=this.bodyToHeaderRelation[l]?this.getHeaderLayer(this.bodyToHeaderRelation[l]):null;e?null!=d&&this.hasClass(d,h)&&this.removeClass(d,h):null==d||this.hasClass(d,h)||this.addClass(d,h)}if(this.options.lazyDrawHiddenColumn&&e&&this.initVisibilityArr&&!this.initVisibilityArr[o]){var u=this.colIndexInfo.body.colInfo.colIndexArr;for(n=0;n<u.length;n++)if(u[n]==o)for(var c=0;c<=this.lastIndex;c++)this.drawCellData(c,c+this.rowIndex,n-this.defaultColCnt),this.applyCellStyleOptions(c+this.rowIndex,n-this.defaultColCnt);this.initVisibilityArr[o]=!0}"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")&&this.setAdaptiveColumnVisible(o,e),s.v.setTimer((function(){try{this.arrangeOverflowXScroll(),this.options.groupbyZone&&this.options.groupbyFilterBox?this.handlerResize_drawInitializer():this.setOverflowX(),this.handleScrollX(),(this.options.autoFit||this.autofitColumn)&&this._setAutoFit()}catch(t){r.w.printStackTrace(t,null,this)}}),{key:this.id+"_setColumnVisible",caller:this})}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setRowVisible=function(t,e,i){try{if((t=parseInt(t,10))<0||t>=this.getTotalRow()||isNaN(t))return void c.k.printLog(this.id+" setRowVisible error : invalid rowIndex "+t);var o=a.D.getBoolean(e);if(this.hiddenRowObj.row[t]===!o||null==this.hiddenRowObj.row[t]&&!0===o)return;this.hiddenRowObj.row[t]=!o,this.hiddenRowObj.init=!0;var s=this.delayedDraw({rowIndex:Math.max(this.rowIndex,0)});if(!1===o?(this.hiddenRowObj.length++,"all"===this.options.visibleRowNum||s||this.hiddenRowObj.extraRow<this.hiddenRowObj.length&&this._addHiddenRow(this.drawedRowLength+this.hiddenRowObj.length-1)):(delete this.hiddenRowObj.row[t],this.hiddenRowObj.length--),s)return;a.D.setTimeout((function(){this.lastTopRowIndex=null,this.initHeightCompleted=!1;var t=this.getDataLength();if(t-this.hiddenRowObj.length<=this.lastIndex+1&&0!==this.rowIndex)return this.bScrollY=0,this.setScrollTop(0),void this.drawData(0);var e=t-this._getVisibleLastIndex(this.lastIndex+1);if(e<this.rowIndex){var i=this.getLastFocusedCell();return this.removeFocusedCell(),this.rowIndex=e,e<this.bScrollTop&&(this.bScrollTop=e),this.setScrollYHeight({restRowCnt:this._getScrollRowIndex(e),skipScrollEnd:!0}),this.drawData(e),void(i.focusedRowIndex>-1&&null!=i.focusedColIndex&&!0===this.getRowVisible(i.focusedRowIndex)&&this.setFocusedCell(i.focusedRowIndex,i.focusedColIndex))}this._applyRowVisible({applyStyle:!0,refreshColumn:!0}),this.setScrollYHeight(),this.dynamicMergeHTML()}),{key:this.id+"_setRowVisible",caller:this,delay:100})}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.clearRowVisible=function(t){try{var e=this.hiddenRowObj.extraRow;if(this.hiddenRowObj.init&&(this.lastTopRowIndex=null),this.hiddenRowObj={length:0,extraRow:e,row:{},init:!1},this._refreshRowVisible({lastIndex:this.lastIndex,noDraw:!0}),t&&!0===t.noDraw)return;0!==this.rowIndex?(this.bScrollY=0,this.setScrollTop(0),this.drawData(0),this.setScrollYHeight()):(this.setScrollYHeight(),this.dynamicMergeHTML(),this.applyStyleOptions(this.lastIndex))}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getRowVisible=function(t){try{return!(null==t||t<0||t>this.getTotalRow())&&!0!==this.hiddenRowObj.row[t]}catch(t){r.w.printStackTrace(t,null,this)}},
p.prototype._getRowVisible=function(t){try{return!(null==t||t<0||t>this.getTotalRow())&&(!(this.hiddenRowObj.length>0)||this.getRowVisible(this.dataList.getRealRowIndex(t)))}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getHiddenRowCount=function(t){try{var e=this.hiddenRowObj.length;if(this.isDrillDown&&isNaN(t)&&(t=0),this.hiddenRowObj.length>0&&(t||this.isDrillDown)){e=0;for(var i=this.getDataLength(),o=t;o<i;o++)this._getRowVisible(o)||e++}return e}catch(t){return r.w.printStackTrace(t,null,this),0}},p.prototype._getVisibleRowIndex=function(t){try{if(this._getHiddenRowCount()<=0)return t;var e=this.getDataLength();if(t>=e)return e;for(var i=t,o=0;i>=0&&o<e;)this._getRowVisible(o)&&i--,i>=0&&o++;return o}catch(e){return r.w.printStackTrace(e,null,this),t}},p.prototype._getVisibleTrRowIndex=function(t,e){try{if(this._getHiddenRowCount()<=0)return t;for(var i=this.getDataLength(),o=0,s=this.drawedRowLength+this.hiddenRowObj.extraRow-1,a=t,n=e;a>=0&&n<i&&s>o;n++)this._getRowVisible(n)&&a--,a>=0&&o++;return o}catch(e){return r.w.printStackTrace(e,null,this),t}},p.prototype._getScrollRowIndex=function(t){try{if(this._getHiddenRowCount()<=0)return t;if(t<=0)return 0;for(var e=0,i=this._getScrollMaxRowIndex(),o=t-1;o>=0&&i>e;o--)this._getRowVisible(o)&&e++;return e}catch(e){return r.w.printStackTrace(e,null,this),t}},p.prototype._getScrollMaxRowIndex=function(){try{var t=parseInt(document.getElementById(this.id+"_size_y").style.height,10)-document.getElementById(this.id+"_scrollY_div").offsetHeight;return Math.floor((t+this._getEpsilon())/this.oneRowScrollHeight)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getEpsilon=function(){try{var t=Math.min(2,Math.round(this.oneRowScrollHeight/10)),e=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;return e<1&&(t=Math.min(Math.round(t/e),Math.round(this.oneRowScrollHeight/2.4))),t}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getVisibleLastIndex=function(t){try{if(this._getHiddenRowCount()<=0)return t;for(var e=t,i=this.getDataLength(),o=0,s=i-1;s>=0&&e>0;s--)this._getRowVisible(s)&&e--,o++;return o}catch(e){return r.w.printStackTrace(e,null,this),t}},p.prototype._getTrIndex=function(t){try{var e=t;return this.rowIndex>=0&&(this.options.fixedRow>0&&this.options.fixedRow>t||this.options.lastFixedRow>0&&t>this.lastIndex-this.options.lastFixedRow||(e-=this.rowIndex)),e}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getTdElem=function(t,e){try{for(var i=0,o=this.rowIndex;o<t&&this.hiddenRowObj.length>0;o++)this._getRowVisible(o)||i++;var s=this._getTrIndex(t);if(s<0||s-i>=this.drawedRowLength)return;return this.data_td_list[s*this.oneRowDataLength+e]}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._addHiddenRow=function(t){try{var e=[];0==this.drawedRowLength&&this.hasSubtotal&&(e=e.concat(this.createSubtotalRows(-1)));for(var i=[],o=0;o<this.oneRowLength;o++){var s=this.tempTr.rows[o].cloneNode(!0);i[o]=s,e.push(s)}this.addBodyRow(t,i),this.hasSubtotal&&(e=e.concat(this.createSubtotalRows(t)));var a=this.getElementById(this.id+"_body_table"),n=this.getElementById(this.id+"_body_tbody");0==this.drawedRowLength?a.style.borderWidth="0px":a.style.borderWidth="";for(o=0;o<e.length;o++)n.appendChild(e[o]);this._setRowDisplay(t,"none"),this.hiddenRowObj.extraRow++}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._applyRowVisible=function(t){try{if(void 0!==t&&null!=t||(t={}),this.delayedDraw({rowIndex:Math.max(this.rowIndex,0)}))return;var e=0,i=!0,o=this.getDataLength()+this._getLastSubtotalCount(),s=this.lastIndex;s=""===this.options.visibleRowNum?Math.min(this.drawedRowLength,o-this.rowIndex)-1:"all"===this.options.visibleRowNum?this.drawedRowLength:Math.min(parseInt(this.options.visibleRowNum,10),o)-1;var a=o-this._getVisibleLastIndex(s+1),n=this.rowIndex;this.subtotalHidden();for(var l=!1,h={skipSubtotal:!0,refreshColumn:t.refreshColumn},d=0,u=s,c=0;c<=s;c++){var p=c+this.rowIndex
;if(!0===t.drawRow&&(this.options.fixedRow>0&&this.options.fixedRow>c?(p=c,this.fastDrawRowData(c,p,h)):this.options.lastFixedRow>0&&c>this.lastIndex-this.options.lastFixedRow||this.fastDrawRowData(c,p,h)),this._getRowVisible(c+this.rowIndex)?(this._setRowDisplay(c,""),i=!1,l=!0):(this._setRowDisplay(c,"none"),e++,i&&n<a&&n++),this.hasSubtotal&&l)this.options.initFixedHeightByRowNum>-1&&(f={maxCount:s-c+e}),(b=this.drawSubtotalRow(c+1,p,f))>0&&(l=!1,this.options.initFixedHeightByRowNum>-1&&(c>=(s-=b)&&(e-=c-s),d+=b));u=c}var g=this.hiddenRowObj.extraRow+d,m=0;for(c=0;c<g&&s>=0;c++){var f,b,y=c+u+1;p=y+this.rowIndex;if(this._getRowVisible(p)&&e>0&&p<o?(this._setRowDisplay(y,""),this.fastDrawRowData(y,p,h),e--,i=!1,l=!0):(this._setRowDisplay(y,"none"),i&&n<a&&n++,e<=0&&(l=n>=a),!0===t.drawRow&&this.fastDrawRowData(y,p,h)),this.hasSubtotal&&y+this.rowIndex<o&&l)this.options.initFixedHeightByRowNum>-1&&(f={maxCount:e}),(b=this.drawSubtotalRow(y+1,p,f))>0&&(l=!1,this.options.initFixedHeightByRowNum>-1&&(m+=b,e-=b))}n!==this.rowIndex&&!0!==t.noDraw?this.drawData(n):""===this.options.visibleRowNum?(!0===t.applyStyle&&this.applyStyleOptions(s),this.cutGridBottom()):this.lastIndex=s-m}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setCellVisible=function(t,e,i){try{if(!0!==i&&!1!==i)return;e=this.getColumnIndex(e);var o,s=!0===this.hiddenCellObj[t+"_"+e],n=!1;if(!0===i&&s?(this.hiddenCellObj[t+"_"+e]=!1,o=!0,this.hiddenCellObj.length--):!1!==i||s||(this.hiddenCellObj[t+"_"+e]=!0,o=!0,this.hiddenCellObj.length++,this.hiddenCellObj.init||(n=!0),this.hiddenCellObj.init=!0),!0===o){var l=this._getTdElem(t,e);null!=l&&(l.style.display=!0===i?"":"none")}n&&(""!==this.options.visibleRowNum&&"native"!==this.options.drawType&&(this.options.visibleRowNum=""),this.setDataTable()),"native"!==this.options.drawType&&a.D.setTimeout(this._setCellVisibleRefresh,{key:this.id+"_setCellVisibleRefresh",caller:this,delay:100})}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._setCellVisibleRefresh=function(){try{if("native"===this.options.drawType)return;this.lastTopRowIndex=null;var t=this.rowIndex,e=Math.max(this.getDataLength()-this.drawedRowLength,0);this.rowIndex=e,this.subtotalHidden();var i=this.completiveDrawData(0,{extraRowByCellHidden:!0});if(this.lastTopRowIndex=e+i,0===e&&0===i){0!==(o=this.getElementById(this.id+"_size_y")).offsetHeight&&(o.style.height="0px",this.handlerResize_drawInitializer())}else{var o=this.getElementById(this.id+"_size_y"),s=this.getElementById(this.id+"_scrollY_div"),a=o.offsetHeight;if(a<1e6&&(a=parseInt(o.style.height,10)),o.style.height=s.offsetHeight+this.oneRowScrollHeight*this.lastTopRowIndex+"px",t=Math.min(t,this.lastTopRowIndex),this.hasSubtotal&&this.struct.subtotalArr&&this.struct.subtotalArr.length>0)this.lastTopRowIndex+=this.struct.subtotalArr.length,this.drawData(t);else{var n=this.oneRowScrollHeight*t;t!==this.rowIndex?this.drawData(t):s.scrollTop!==n&&(this.bScrollY=n,s.scrollTop=n),this.handlerResize_drawInitializer()}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getCellVisible=function(t,e){try{e=this.getColumnIndex(e);return!0!==this.hiddenCellObj[t+"_"+e]}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.clearCellVisible=function(){try{for(var t in this.hiddenCellObj)if(!0===this.hiddenCellObj[t]){var e=t.split("_"),i=Number(e[0]),o=Number(e[1]),s=this._getTdElem(i,o);null!=s&&(s.style.display="")}this.hiddenCellObj={length:0,init:!1},this.cutGridBottom(this.lastIndex)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._moveCellVisible=function(t,e,i){try{if(!(this.hiddenCellObj.length>0))return;void 0!==i&&null!=i||(i={});var s=[];t.sort((function(t,e){return t-e}));for(var a={},n=0;n<t.length;n++)a[t[n]]=!0;var l=this.getRowCount();for(n=0;n<l;n++)!0===i.remove&&!0===a[n]||s.push(n);!0===i.insert&&(s=s.slice(0,e).concat(t).concat(s.slice(e)));var h={};for(n=0;n<s.length;n++)s[n]!==n&&(h[s[n]]=n);var d=o.x.extend({},this.hiddenCellObj),u=this.getColumnCount()
;for(var c in h){var p=Number(c),g=h[p];if(p!==g)for(var m=0;m<u;m++)this.setCellVisible(g,m,!d[p+"_"+m])}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._refreshRowVisible=function(t){try{this._applyRowVisible(t)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setScrollLeft=function(t){t=parseInt(t,10);try{this.getElementById(this.id+"_scrollX_right").scrollLeft=t}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setScrollTop=function(t){t=parseInt(t,10);try{this.scrollEvent=!0,this.getElementById(this.id+"_scrollY_div").scrollTop=t}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getScrollLeft=function(){try{return this.getElementById(this.id+"_scrollX_right").scrollLeft}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getScrollTop=function(){try{return this.getElementById(this.id+"_scrollY_div").scrollTop}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setGridStyle=function(t){try{if(!t)return;if("string"==typeof t){t=t.match(/"\s*N\s*"\s*:\s*"\s*w2:gridView\s*"/)?JSON.parse(t):WebSquare.xml.parse(t)}t instanceof WebSquare.Elem&&(t=t._element),!0===WebSquare.convertPageXML&&s.v.isXML(t)&&(t=WebSquare.xmljs.xml2json(t).E[0]),!0===s.v.isXML(t)&&9==t.nodeType&&(t=t.documentElement);var e=this.getParent();e&&e.parentControl&&"wframe"==e.parentControl.options.pluginName&&(e=e.parentControl);var i,o=this.scope_obj,a=this.parentFrame;this.options.groupbyFilterBox&&this.options.customFilterBox&&this.groupbyFilterBox_history.length>0&&(i=this.groupbyFilterBox_history[this.groupbyFilterBox_select.getSelectedIndex()].customFilterListFilterInfo),this.remove(),this.__removed_object__=!0;var n=WebSquare.controlFactory.create(null,null,t,o,a);n.options&&isNaN(n.options.fixedRightColumn)&&(n.options.fixedRightColumn=0),n.writeTo(e),n.activate(),n.onComplete(),n.options.groupbyFilterBox&&n.options.customFilterBox&&(n.refreshGroupbyFilterBox(),n.applyFilterHistory(),i?(n.customFilterList.customFilterListFilterInfo=JSON.parse(i,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.Z)(i)&&i.constructor===RegExp?i:"object"===(0,l.Z)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})),n.groupbyFilterBox_history[n.groupbyFilterBox_select.getSelectedIndex()].customFilterListFilterInfo=i):n.customFilterList&&(n.customFilterList.customFilterListFilterInfo={}));var h=n.options._sortStatus;if(h){for(var d=JSON.parse(h),u=[],c=[],p=[],g=0;g<d.length;g++){var m=d[g];u.push(m.colID),c.push(m.sortOrder),p.push(m.dataType)}n.dataList.setFilter({type:"sort",sortIndex:u.join(" "),sortOrder:c.join(" "),dataType:p.join(" "),focuseMode:n.options.filterFocusMode,ignoreEmptyStringOnSort:n.options.ignoreEmptyStringOnSort,setEmptyStringFirstOnSort:n.options.setEmptyStringFirstOnSort,setEmptyStringSortableOnSort:n.options.setEmptyStringSortableOnSort}),n.drawHeaderSortImages()}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getGridStyle=function(){try{return"json"===this.element._elementType?WebSquare.jsonUtil.serialize(this.element._element):WebSquare.xml.serialize(this.element._element)}catch(t){r.w.printStackTrace(t)}},p.prototype.getCurrentGridStyle=function(){try{var t=this.element.cloneNode(!0);t.setAttribute("columnOrder",this.getColumnOrder()),t.setAttribute("fixedColumn",this.options.fixedColumn),t.setAttribute("fixedRow",this.options.fixedRow),t.setAttribute("fixedRightColumn",this.options.fixedRightColumn);for(var e=t.getChildNodes(),i=0;i<e.length;i++){if("w2:header"==e[i].getTagName())for(var o=e[i].getChildNodes(),s={},n=0,l=this.htmlInfo.head.rowAttrArr.length,h=0;h<o.length;h++)if("w2:row"===o[h].getTagName()){for(var d=o[h].getChildNodes(),u=[],c=0;c<d.length;c++)"w2:column"==d[c].getTagName()&&u.push(d[c]);for(var p=0,g=0,m={},f=0;f<u.length;f++){for(;null!=s[i]&&null!=s[i][f+p+g];)g+=s[i][f+p+g];m[f+p-0+g]=f
;var b=parseInt(u[f].getAttribute("colSpan"),10)||1,y=parseInt(u[f].getAttribute("rowSpan"),10)||1;if(y>1)for(var v=n;v<n+y-1;v++)null==s[v+1]&&(s[v+1]={}),null==s[v+1][f-0+p+g]?s[v+1][f-0+p+g]=b:s[v+1][f-0+p+g]+=b;b>1&&(p+=b-1)}if(n===l-1){var w=0,S=0;for(f=0;f<u.length;f++){for(;null!=s[n]&&null!=s[n][this.columnOrder[f+S+w]];)S+=s[n][this.columnOrder[f+S+w]];var C=m[[this.columnOrder[f-0+w+S]]];null==C&&(C=0);var x=u[C];(b=parseInt(x.getAttribute("colSpan"),10))>1&&(w+=b-1),x.setAttribute("width",this.colWidthList[f+this.defaultColCnt+w+S]),this.hiddenList[f+this.defaultColCnt+w+S]?x.setAttribute("hidden","true"):x.setAttribute("hidden","false")}}n++}if("w2:gBody"==e[i].getTagName())for(o=e[i].getChildNodes(),h=0;h<o.length;h++)if("w2:row"===o[h].getTagName()){var _=o[h].getChildNodes(),I=[];for(c=0;c<_.length;c++)"w2:column"==_[c].getTagName()&&I.push(_[c]);for(p=0,m={},f=0;f<I.length;f++){m[f+p]=f,(b=parseInt(I[f].getAttribute("colSpan"),10))>1&&(p+=b-1)}for(w=0,f=0;f<I.length;f++){x=I[m[[this.columnOrder[f+w]]]];(b=parseInt(x.getAttribute("colSpan"),10))>1&&(w+=b-1),x.setAttribute("width",this.colWidthList[f+this.defaultColCnt+w]),a.D.isChrome()?x.setAttribute("hidden",this.hiddenList[f+this.defaultColCnt+w]):this.hiddenList[f+this.defaultColCnt+w]?x.setAttribute("hidden","true"):x.setAttribute("hidden","false");var T=x.getAttribute("col_id");T&&(x.setAttribute("id",T),x.removeAttribute("col_id"))}}}var k=this.getSortableStatus();return k&&k.length>0&&t.setAttribute("_sortStatus",JSON.stringify(k)),t.serialize()}catch(t){r.w.printStackTrace(t)}},p.prototype.setTableStruct=function(){try{if(this.headerXml=WebSquare.Elem.api.getElementsByTagName(this.element,"header",s.v._XML_NAMESPACE.W2)[0],this.bodyXml=WebSquare.Elem.api.getElementsByTagName(this.element,"gBody",s.v._XML_NAMESPACE.W2)[0],this.struct={head:this.xml2JSON(this.headerXml),body:this.xml2JSON(this.bodyXml)},this.updateStruct(this.struct.head.rowArr),this.updateStruct(this.struct.body.rowArr),this.changeRowID(this.struct.head.rowAttrArr),this.changeRowID(this.struct.body.rowAttrArr),this.footerXml=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0],this.footerXml&&(this.hasFooter=!0,this.struct.foot=this.xml2JSON(this.footerXml),this.updateStruct(this.struct.foot.rowArr)),this.subtotalXmlArr=WebSquare.Elem.api.getElementsByTagName(this.element,"subTotal",s.v._XML_NAMESPACE.W2),this.subtotalXmlArr.length>0){this.options.showLastRow=!1,this.hasSubtotal=!0,this.drawedSubtotal=[],this.drawedSubtotal.drawedRowLength=0,this.struct.subtotalArr=[];for(var t=0;t<this.subtotalXmlArr.length;t++){var e=this.xml2JSON(this.subtotalXmlArr[t]);this.struct.subtotalArr.push(e),this.struct.subtotalArr[e.attr.id]=e,this.updateStruct(e.rowArr)}}if(this.setCss(),this.setColArr(),this.htmlInfo={head:this.getHeaderHtmlInfo(),body:this.getBodyHtmlInfo()},this.footerXml&&(this.htmlInfo.foot=this.getFooterHtmlInfo()),this.subtotalXmlArr.length>0){this.htmlInfo.subtotalArr=[],this.subtotalStrList={};for(t=0;t<this.struct.subtotalArr.length;t++){e=this.getSubtotalHtmlInfo(this.struct.subtotalArr[t]);this.htmlInfo.subtotalArr.push(e),this.htmlInfo.subtotalArr[e.attr.id]=e,this.subtotalStrList[e.attr.targetColumnID]=e}}this.captionXml=WebSquare.Elem.api.getElementsByTagName(this.element,"caption",s.v._XML_NAMESPACE.W2)[0];var i=this.getColCnt();this.columnOrder=[];for(t=0;t<i;t++)this.columnOrder.push(t)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.updateStruct=function(t){try{for(var e=0,i=[],o=this.getColCnt(),s=0;s<t.length;s++){for(var a=[],n=0;n<o;n++)a.push(null);i.push(a)}for(s=0;s<t.length;s++)for(n=0;n<t[s].length;n++){var l;for(l=0;l<i[s].length&&null!==i[s][l];l++);var h=t[s][n];h["@col"]=l;for(var d=h.colSpan||h.colspan||1,u=h.rowSpan||h.rowspan||1,c=0;c<u;c++)for(var p=0;p<d;p++)i[s+c][l+p]=e;e++}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.changeRowID=function(t){try{for(var e=0;e<t.length;e++){var i=t[e]
;null!=i.id&&(i["data-tr-id"]=i.id,delete i.id)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getRealColIndex=function(t,e){try{for(var i=0;i<this.htmlInfo[t].rowArr.length;i++)for(var o=0;o<this.htmlInfo[t].rowArr[i].length;o++)if(this.htmlInfo[t].rowArr[i][o].col_id==e)return this.htmlInfo[t].rowArr[i][o]["@col"];return null}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getRealHeaderColIndex=function(t){try{return this.getColumnIndex(this.headerToBodyRelation[t])}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getDataColIndex=function(t){try{return this._dataList.getColumnIndex(this.getColumnID(t))}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._moveColumn=function(t,e,i,o,s,a){try{e=e||"td";for(var n=[],l=0;l<t[i].childNodes.length;l++)t[i].childNodes[l].nodeName.toLowerCase()==e&&n.push(t[i].childNodes[l]);var h=n[o];h.parentNode.removeChild(h);var d=[];for(l=0;l<t[i].childNodes.length;l++)t[i].childNodes[l].nodeName.toLowerCase()==e&&d.push(t[i].childNodes[l]);if(a<d.length){var u=d[a];u.parentNode.insertBefore(h,u)}else t[s].appendChild(h)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.moveBodyColumn=function(t,e,i,o){try{var s=this.htmlInfo.body.rowArr[t].splice(e,1);this.htmlInfo.body.rowArr[i].splice(o,0,s[0]),this.updateStruct(this.htmlInfo.body.rowArr),e+=0==t?this.defaultColCnt:0,o+=0==i?this.defaultColCnt:0;var a=this.getElementById(this.id+"_body_tbody"),n=0;this.hasSubtotal&&this.drawedSubtotal&&this.drawedSubtotal.length>0&&(n=this.drawedSubtotal[0].length);for(var l=0;l<this.drawedRowLength;l++){for(var h=[],d=0;d<this.oneRowLength;d++)h.push(a.rows[l*(this.oneRowLength+n)+d+n]);this._moveColumn(h,"td",t,e,i,o);for(d=0;d<n;d++)if(0===t&&0===i){var u=d>0?this.defaultColCnt:0;this._moveColumn([a.rows[l*(this.oneRowLength+n)+d]],"td",0,e-u,0,o-u)}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.moveHeadColumn=function(t,e,i,o){try{var s=this.htmlInfo.head.rowArr[t].splice(e,1);this.htmlInfo.head.rowArr[i].splice(o,0,s[0]),this.updateStruct(this.htmlInfo.head.rowArr),e+=0==t?this.defaultColCnt:0,o+=0==i?this.defaultColCnt:0;var a=this.getElementById(this.id+"_head_table");this._moveColumn(a.rows,"th",t,e,i,o)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._moveFooterColumn=function(t,e,i,o){try{var s=this.htmlInfo.foot.rowArr[t].splice(e,1);this.htmlInfo.foot.rowArr[i].splice(o,0,s[0]),this.updateStruct(this.htmlInfo.foot.rowArr),e+=0==t?this.defaultColCnt:0,o+=0==i?this.defaultColCnt:0;var a=document.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0];this._moveColumn(a.rows,"td",t,e,i,o)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.moveFooterColumn=function(t,e){try{var i,o,s=parseInt(t,10),a=[];"string"==typeof t&&isNaN(s)?(o="id",i=t):(o="@col",i=this.colIndexes.footerColInfo.colIndexArr[s+this.defaultColCnt]-this.defaultColCnt);for(var n=0;n<this.htmlInfo.foot.rowArr.length;n++)for(var l=0;l<this.htmlInfo.foot.rowArr[n].length;l++)this.htmlInfo.foot.rowArr[n][l][o]==i&&a.push({row:n,col:l});var h,d,u=parseInt(e,10);"string"==typeof e&&isNaN(u)?(d="id",h=e):(d="@col",h=this.colIndexes.footerColInfo.colIndexArr[u+this.defaultColCnt]-this.defaultColCnt);for(n=0;n<a.length;n++){var c=null;for(l=0;l<this.htmlInfo.foot.rowArr[a[n].row].length;l++)if(this.htmlInfo.foot.rowArr[a[n].row][l][d]==h){c=l;break}null!==c?this._moveFooterColumn(a[n].row,a[n].col,a[n].row,c):this._moveFooterColumn(a[n].row,a[n].col,a[n].row,u)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.moveColumnByHeaderId=function(t,e){try{if(!t||!e||t===e)return!1;var i=this.getHeaderColIndex(t),o=this.getHeaderColIndex(e);if(isNaN(i)||isNaN(o))return!1;var s=this.columnBlock.hash[i-this.defaultColCnt],a=this.columnBlock.hash[o-this.defaultColCnt];if(s===a)return!1;var n=this.getFixedColumnLastIndex();if(this.options.fixedColumnNoMove&&(n>s||n>a))return!1;for(var l=-1,h=-1,d=0;d<this.columnOrder.length;d++){var c=this.columnOrder[d]
;if(c===s&&(l=d),c===a&&(h=d),l>-1&&h>-1)break}var p=this.headerToBodyRelation[t],g=this.headerToBodyRelation[e];if(!1===u.B.fireEvent(this,"onbeforecolumnmove",{startColumnID:p,startColumnIndex:l,endColumnID:g,endColumnIndex:h}))return!1;this.columnBlock||this.createBlockedHeaderInfo();var m=this.getColumnOrder(),f=-1,b=-1;for(d=0;d<m.length;d++){var y=m[d];if(y===s?f=d:y===a&&(b=d),-1!==f&&-1!==b)break}var v=this.columnBlock.info[s],w=this.columnBlock.info[a],S=m.slice(0);S.splice(f,v.length);var C=b+(f<b?w.length-v.length:0),x=S.slice(0,C).concat(v).concat(S.slice(C)),_=this.setColumnOrder(x);return u.B.fireEvent(this,"onaftercolumnmove",{startColumnID:p,startColumnIndex:l,endColumnID:g,endColumnIndex:h}),_}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.moveColumn=function(t,e){try{if(t==e)return;if(this.options.fixedColumnNoMove&&(this.getFixedColumnLastIndex()>t+this.defaultColCnt||this.getFixedColumnLastIndex()>e+this.defaultColCnt))return;var i=this.getHeaderID(t),o=this._getRealColIndex("head",i)+this.defaultColCnt,s=this.headerToBodyRelation[i];if(!s||this.colMoveBolockedHeaderObj[i])return;var a=this.colMoveIndexMap[s],n=this._getRealColIndex("body",s)+this.defaultColCnt,l=this.getHeaderID(e),h=this.headerToBodyRelation[l];if(!h||this.colMoveBolockedHeaderObj[l])return;var d=this._getRealColIndex("head",l)+this.defaultColCnt,c=this.colMoveIndexMap[h],p=this.colIndexes.bodyColInfo.colIndexArr[c+this.defaultColCnt];if(!1===u.B.fireEvent(this,"onbeforecolumnmove",{startColumnID:s,startColumnIndex:a,endColumnID:h,endColumnIndex:c}))return!1;for(var g=[],m=n-this.defaultColCnt,f=0;f<this.htmlInfo.body.rowArr.length;f++)for(var b=0;b<this.htmlInfo.body.rowArr[f].length;b++)this.htmlInfo.body.rowArr[f][b]["@col"]==m&&g.push({row:f,col:b});var y=p-this.defaultColCnt;for(f=0;f<g.length;f++){var v=null;for(b=0;b<this.htmlInfo.body.rowArr[g[f].row].length;b++)if(this.htmlInfo.body.rowArr[g[f].row][b]["@col"]==y){v=b;break}null!==v?this.moveBodyColumn(g[f].row,g[f].col,g[f].row,v):this.moveBodyColumn(g[f].row,g[f].col,g[f].row,c)}g=[];var w=o-this.defaultColCnt;for(f=0;f<this.htmlInfo.head.rowArr.length;f++)for(b=0;b<this.htmlInfo.head.rowArr[f].length;b++)this.htmlInfo.head.rowArr[f][b]["@col"]==w&&g.push({row:f,col:b});var S=d-this.defaultColCnt;for(f=0;f<g.length;f++){for(v=null,b=0;b<this.htmlInfo.head.rowArr[g[f].row].length;b++)if(this.htmlInfo.head.rowArr[g[f].row][b]["@col"]==S){v=b;break}null!==v?this.moveHeadColumn(g[f].row,g[f].col,g[f].row,v):this.moveHeadColumn(g[f].row,g[f].col,g[f].row,e)}this.hasFooter&&this.options.columnMoveWithFooter&&this.moveFooterColumn(t,e);var C=function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])};if(null!=this.initVisibilityArr)for(f=0;f<this.htmlInfo.body.rowArr.length;f++)C(this.initVisibilityArr,n+f*this.getColCnt(),p+f*this.getColCnt());for(var x in C(this.columnOrder,n-this.defaultColCnt,p-this.defaultColCnt),C(this.colIndexInfo.body.colInfo.colIndexMatch,n,p),C(this.colWidthList,n,p),C(this.hiddenList,o,d),this.colMoveIndexMap)this.colMoveIndexMap[x]==a?this.colMoveIndexMap[x]=c:a<c?a<this.colMoveIndexMap[x]&&this.colMoveIndexMap[x]<=c&&(this.colMoveIndexMap[x]-=1):a>c&&a>this.colMoveIndexMap[x]&&this.colMoveIndexMap[x]>=c&&(this.colMoveIndexMap[x]+=1);for(var x in this.colMoveHeaderIndexMap)this.colMoveHeaderIndexMap[x]==a?this.colMoveHeaderIndexMap[x]=c:a<c?a<this.colMoveHeaderIndexMap[x]&&this.colMoveHeaderIndexMap[x]<=c&&(this.colMoveHeaderIndexMap[x]-=1):a>c&&a>this.colMoveHeaderIndexMap[x]&&this.colMoveHeaderIndexMap[x]>=c&&(this.colMoveHeaderIndexMap[x]+=1);this.arrangeOverflowXScroll(),this._handleScrollX(),u.B.fireEvent(this,"onaftercolumnmove",{startColumnID:s,startColumnIndex:a,endColumnID:h,endColumnIndex:c})}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.resetMoveColumn=function(){try{for(var t=this.getColCnt(),e=[],i=0;i<t;i++)e.push(i);this.setColumnOrder(e)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setColumnOrder=function(t){try{
if(!a.D.isEmptyObject(this.cellMergeInfo))return void c.k.printLog("warning : setColumnOrder refused due to mergeCells. ["+this.id+"]");var e=this.getColCnt(),i=[];"string"==typeof t&&(t=t.split(","));for(var o=0;o<t.length;o++){if(null!=this.bodyIdColIndexMap[t[o]]&&(t[o]=this.bodyIdColIndexMap[t[o]]),t[o]=Number(t[o]),"number"!=typeof t[o])return void $l(this.id+".setColumnOrder : wrong column order array.");i[t[o]]=!0}if(e>t.length){for(o=0;o<t.length;o++)t[o]=this.colIndexes.headerColInfo.colIndexArr[t[o]+this.defaultColCnt]-this.defaultColCnt;for(o=0;o<t.length;o++){var s=this.getCellInfo(t[o]).options.colSpan;if(s>1)for(var n=1;n<s;n++)t.splice(o+n,0,t[o]+n)}for(o=0;o<t.length;o++)i[t[o]]=!0}for(o=t.length-1;o>=0;o--)for(n=o-1;n>=0;n--)t[o]===t[n]&&t.splice(o,1);for(o=0;o<e;o++)i[o]||t.push(o);if(e!=t.length)return $l(this.id+".setColumnOrder : wrong column order array."),!1;var l=[];for(o=0;o<t.length;o++)for(n=0;n<this.columnOrder.length;n++)if(this.columnOrder[n]==t[o]){l[o]=n;break}if(!0===this.checkRefreshAdaptive()&&this.removeAdaptive(),this.columnOrder=l.slice(0),this.drawedRowLength<=0&&this.drawDataTable(),this._moveColumnByOrder(this.id+"_body_tbody",this.htmlInfo.body.rowArr),this._moveColumnByOrder(this.id+"_head_table",this.htmlInfo.head.rowArr),this.hasFooter&&this.options.columnMoveWithFooter){var h=document.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0];this._moveColumnByOrder(h.getAttribute("id"),this.htmlInfo.foot.rowArr)}if(null!=this.initVisibilityArr){var d=[];for(o=0;o<this.initVisibilityArr.length-this.defaultColCnt;o++){var u=Math.floor(o/this.columnOrder.length),p=o%this.columnOrder.length,g=u*this.columnOrder.length+this.columnOrder[p]+this.defaultColCnt;d.push(this.initVisibilityArr[g])}for(o=0;o<d.length;o++)this.initVisibilityArr[o+this.defaultColCnt]=d[o]}this._swapItem(this.colIndexInfo.body.colInfo.colIndexMatch,this.columnOrder,this.defaultColCnt),this._swapItem(this.colWidthList,this.columnOrder,this.defaultColCnt),this.initialColWidthList=this.colWidthList.slice(),this._swapItem(this.hiddenList,this.columnOrder,this.defaultColCnt),"allColumn"===this.options.autoFit&&this._swapItem(this.autoFitColWidthList,this.columnOrder,this.defaultColCnt);for(o=0;o<this.tdIdList.length;o++)for(n=0;n<t.length;n++)if(o==t[n]){this.colMoveIndexMap[this.tdIdList[o]]=n,this.colMoveHeaderIndexMap[this.thIdList[o]]=n;break}return this.columnOrder=t.slice(0),this.arrangeOverflowXScroll(),this._handleScrollX(),!0===this.checkRefreshAdaptive()&&this.addAdaptive(),!0}catch(t){return r.w.printStackTrace(t,null,this),!1}},p.prototype._moveColumnByOrder=function(t,e){try{var i=document.getElementById(t),o=[],s={},n=e.length;(isNaN(n)||n<=0)&&(n=1);for(var l=0;l<n;l++){if(!(C=i.rows[l]))break;var h=0;0===l&&(h=this.defaultColCnt);for(var d={},u=0,c=0,p=h;p<C.childNodes.length;p++){for(;null!=s[l]&&null!=s[l][p+u+c];)c+=s[l][p+u+c];d[p+u-h+c]=p;var g=parseInt(C.childNodes[p].getAttribute("colSpan"),10)||1;this.options.lazyDrawHiddenColumn&&"true"==C.childNodes[p].getAttribute("data-lazydrawtd")&&(g=1);var m=parseInt(C.childNodes[p].getAttribute("rowSpan"),10)||1;if(m>1)for(var f=l;f<l+m-1;f++)null==s[f+1]&&(s[f+1]={}),null==s[f+1][p-h+u+c]?s[f+1][p-h+u+c]=g:s[f+1][p-h+u+c]+=g;g>1&&(u+=g-1)}var b=0,y=0;o[l]=[];for(p=h;p<C.childNodes.length;p++){for(;null!=s[l]&&null!=s[l][this.columnOrder[p+y+b]];)y+=s[l][this.columnOrder[p+y+b]];var v=d[[this.columnOrder[p-h+b+y]]];null==v&&(v=0),o[l].push(v-h);var w=C.childNodes[v];g=parseInt(w.getAttribute("colSpan"),10);this.options.lazyDrawHiddenColumn&&"true"==w.getAttribute("data-lazydrawtd")&&(g=1),g>1&&(b+=g-1)}}for(l=0;l<i.rows.length;l++){h=0;var S=l%n;0===S&&(h=this.defaultColCnt);var C=i.rows[l];a.D.isIEAllVersion()&&"11"==a.D.browserVersion()&&l>=(this.lastIndex+1)*this.oneRowLength&&(C.style.backgroundColor="");var x=[];for(p=0;p<o[S].length;p++)x.push(C.childNodes[o[S][p]+h]);for(p=0;p<x.length;p++)C.appendChild(x[p])}
for(l=0;l<n;l++)this._swapItem(e[l],o[l],0);this.updateStruct(e)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._swapItem=function(t,e,i){try{for(var o=[],s=null==i?0:i,a=0;a<e.length;a++)o.push(t[e[a]+s]);for(a=0;a<o.length;a++)t[a+s]=o[a]}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getColumnOrder=function(t){try{if(t){for(var e=[],i=this.colIndexInfo.body.colInfo.colIndexMatch,o=this.defaultColCnt;o<i.length;o++){if(0==i[o].length)return void $l(this.id+".getColumnOrder : use getColumnOrder(false). cannot express column order by name.");for(var s=this.tdIdList[i[o][0]-this.defaultColCnt],a=!1,n=0;n<e.length;n++)if(e[n]===s){a=!0;break}a||e.push(s)}return e}return this.columnOrder.slice(0)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getDisplayColumnIndex=function(t){try{for(var e=parseInt(t,10),i=0;i<this.columnOrder.length;i++)if(e===this.columnOrder[i])return i;return t}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getColumnMoveIndex=function(t){try{if(t<0||isNaN(t))return t;for(var e=this.colIndexInfo.body.colInfo.colIndexArr[t+this.defaultColCnt],i=this.colIndexInfo.body.colInfo.trIndexArr[t+this.defaultColCnt],o=this.colIndexInfo.body.colInfo.colIndexMatch[e],s=0;s<o.length;s++){var a=o[s];if(a>=t+this.defaultColCnt)break;var n=this.colIndexInfo.body.colInfo.rowSpanArr[a];n>1&&(i=i-n+1)}return o[i]-this.defaultColCnt}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.handleGroupbyZoneClick=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next()&&(!this.options.groupbyZoneSearch||!e.match("w2grid_groupbyZone_search"));){if(e.match("w2grid_groupbyZone_column")){var i=e.getElement(),o={};o.render=i,o.parentRender=this.render.getElementsByTagName("div")[0],o.headerID=i.getAttribute("header_id"),o.headerIndex=this._getColumnMoveIndex(this.getHeaderIndex(o.headerID)),o.dataIndex=this._getDataColIndex(this._getRealHeaderColIndex(o.headerID)),this.toggleGroupbyFilterList(o),u.B.stopEvent(t);break}if(e.match("w2grid_groupbyZone_column_closeButtonImg")){i=e.getElement();this.hideGroupbyFilterList(),this.ungroupColumn(i.getAttribute("col_id"));break}if(e.match("w2grid_groupbyZone")){this.hideGroupbyFilterList(),u.B.stopEvent(t);break}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.toggleGroupbyFilterList=function(t){try{var e=t.render.tagName,i=t.headerIndex;"number"==typeof this.groupbyZoneStatus.beforeOpenedColIndex?(this.groupbyFilterList.saveState(this.groupbyZoneStatus.beforeOpenedColIndex.toString()),i==this.groupbyZoneStatus.beforeOpenedColIndex&&e==this.groupbyZoneStatus.beforeOpenedColTagName?"block"==this.groupbyFilterList.render.style.display?this.hideGroupbyFilterList():this.showGroupbyFilterList(t,!0):this.showGroupbyFilterList(t,!0,!0)):this.createGroupbyFilterList(t)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.applyFilterListFormat=function(t,e){try{if(this.options.displayValueOnUseFilterList)for(var i=0;i<t.length;i++)null!=t[i].id3&&(this.groupbyStatus.grouped?this.groupbyFilterList.setCellDataNM(i,"id2",t[i].id3):this.customFilterList.setCellDataNM(i,"id2",t[i].id3));else if(this.options.useFilterListFormat){var o=this.headerToBodyRelation[e],s=this.getCellInfo(o),a=0,n=this.headerInfoHash[e];if(n&&n.options.hideCustomFilter&&(a=1),s.options.displayFormat||s.options.displayFormatter||s.options.ioFormat)for(i=2-a;i<t.length;i++){var l=s.formatter.format(t[i].id2);this.groupbyStatus.grouped?this.groupbyFilterList.setCellDataNM(i,"id2",l):this.customFilterList.setCellDataNM(i,"id2",l)}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.createGroupbyFilterList=function(t){try{var e=t.render,i=t.parentRender,o=t.headerIndex,s=t.headerID;if(!this.groupbyFilterList){this.groupbyStatus.filter={};"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_groupbyZone_list' virtualized='true' labelCheck='true'>",
"    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_groupbyZone_list_listRow' check_id='id1' >","        <w2:listColumn id='id1' inputType='checkbox' style='' class='w2grid_groupbyZone_list_listColumn_checkbox'/>","        <w2:listColumn id='id2' check_id='id1' inputType='text' style='' class='w2grid_groupbyZone_list_listColumn_text'/>","    </w2:listRow>","</w2:list>";var n=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_groupbyZone_list' virtualized='true' labelCheck='true'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_groupbyZone_list_listRow' check_id='id1' >        <w2:listColumn id='id1' inputType='checkbox' style='' class='w2grid_groupbyZone_list_listColumn_checkbox'/>        <w2:listColumn id='id2' check_id='id1' inputType='text' style='' class='w2grid_groupbyZone_list_listColumn_text'/>    </w2:listRow></w2:list>",!0).documentElement;this.groupbyFilterList=new WebSquare.uiplugin.list(this.id+"_groupbyZone_list","",n),this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]};var l=this;this.groupbyFilterList._handleClickEvent=this.groupbyFilterList.handleClickEvent,this.groupbyFilterList.handleClickEvent=function(t){try{this._handleClickEvent(t),u.B.stopPropagation(t);var e=u.B.getTarget(t),i=e;if((e.className.match("w2grid_groupbyZone_list_listColumn_checkbox")||e.className.match("w2grid_groupbyZone_list_listColumn_text"))&&(i=e.parentElement),!i.className.match("w2grid_groupbyZone_list_listRow"))return;var o=i.children[0],s=l.getHeaderID(this.headerIndex),a=l.getColumnID(this.headerIndex),n=i.getAttribute("unique_id"),h=this.getAllData(),d=o.checked,c=!1,p=!1,g=!1;if(h[0].customerFilter&&h[0].unique_id==n){if(d)return l.hideGroupbyFilterList(),l.firstOpenCustomFilter[s]?(l._dataList.filterManager.headerID=s,l._dataList.filterManager.targetColID=a,void l.setCustomFilterExpression()):(l.firstOpenCustomFilter[s]||(l.firstOpenCustomFilter[s]=!0),void l.showCustomFilter(s));for(var m in l.customFilterStatusObj[s]=!1,l.dataList.removeColumnFilter(a),l.customFilterStatusObj)if(l.customFilterStatusObj[m])return;c=!0,p=!0,g=!0;for(var f=1;f<h.length;f++)h[f].id1=!0}else if(h[1].gridCheckedAll&&h[1].unique_id==n){p=!0,d&&(g=!0);for(f=2;f<h.length;f++)h[f].id1=d}if(!c&&!g&&h.length-2>0){l.groupbyStatus.filter[a]=[];for(f=2;f<h.length;f++)h[f].id1&&l.groupbyStatus.filter[a].push(h[f].id2);l.groupbyStatus.filter[a]=l.changeItemValue("value",a,l.groupbyStatus.filter[a]);var b=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g;for(f=0;f<l.groupbyStatus.filter[a].length;f++){var y=l.groupbyStatus.filter[a][f];"string"==typeof y&&(l.groupbyStatus.filter[a][f]=y.replace(b,(function(t){return l.replacechar(t)})))}}if(p){if(g&&this.filterHistory.column[0]===a)this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift(),delete l.groupbyStatus.filter[a];else if(!g&&this.filterHistory.column[0]!==a&&h.length-2>0){for(f=1;f<this.filterHistory.column.length;f++)if(this.filterHistory.column[f]===a){l.dataList.removeColumnFilter(a,{noRefresh:!0,noRefreshAfter:!0});break}this.filterHistory.column.unshift(a),this.filterHistory.filteredRowIndexArr.unshift(l._dataList.filteredRowIndexArr.slice(0))}}else{var v=h.length-2;if(v>l.groupbyStatus.filter[a].length){if(h[1].id1=!1,this.filterHistory.column[0]!==a){for(var f=1;f<this.filterHistory.column.length;f++)if(this.filterHistory.column[f]===a){l.dataList.removeColumnFilter(a,{noRefresh:!0,noRefreshAfter:!0});break}this.filterHistory.column.unshift(a),this.filterHistory.filteredRowIndexArr.unshift(l._dataList.filteredRowIndexArr.slice(0))}}else l.groupbyStatus.filter[a].length==v&&(h[1].id1=!0,delete l.groupbyStatus.filter[a],this.filterHistory.column[0]===a&&(this.filterHistory.column.shift(),
this.filterHistory.filteredRowIndexArr.shift()))}this.setFirstRowIndex(this.firstListIndex,!0);var w={};if(w.sortIndex=l.groupbyStatus.sortIndexArr,w.sortOrder=l.groupbyStatus.sortOrderArr,null!=l.groupbyStatus.filter&&(w.filter=l.groupbyStatus.filter,l.groupbyStatus.filter[a]&&2*l.groupbyStatus.filter[a].length>h.length)){var S=[],C="*";for(f=2;f<h.length;f++)if(!h[f].id1){if(h[f].id2===l.filterEmptyStr){C="+";continue}S.push(h[f].id2)}var x=l.getCellInfo(a);(x.itemsetObj||x.itemArr)&&(S=l.changeItemValue("value",a,S));var _="^\\n*(?:(?!^";for(b=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,f=0;f<S.length;f++){var I=S[f];"string"==typeof I&&(I=I.replace(b,(function(t){return l.replacechar(t)}))),_+=I+="$)(?!^"}_+="$).)"+C+"\\n*$",w.filterRegExp={},w.filterRegExp[a]=new RegExp(_,"gi")}if(w.noRefreshAfter=!0,!1===u.B.fireEvent(l,"ongroupby",w)){var T=l.getColCnt()+l.defaultColCnt;w.rowNumHeader={colSpan:T,inputType:"expression",expression:" toggle() + depthStr() + ' [ ' + count() + ' 건 ] ' ",align:"left"},w.footerVisible=!1,w.rowNumFooter={colSpan:T},l.groupby(w)}l.options.groupbyFilterBox&&(this.isChanged=!0)}catch(t){r.w.printStackTrace(t,null,this)}},this.groupbyFilterList.writeTo(this),this.groupbyFilterList.activate()}if(!0===t.noDraw)return;var h=e.clientWidth,d=WebSquare.style.getRelativeTop(e,i)+e.offsetHeight,c=WebSquare.style.getRelativeLeft(e,i);this.groupbyFilterList.setPosition(c,d),this.groupbyFilterList.render.style.width=h+"px";var p=this.render.offsetHeight-d;this.groupbyFilterList.options.visibleRowNum=Math.floor(p/21);var g=this.getGroupbyDepthInfo(t);if(this.groupbyFilterList.setJSON(g),this.applyFilterListFormat(g,s),this.groupbyFilterList.currentHeaderID=s,this.groupbyFilterList.headerIndex=o,WebSquare.style.show(this.groupbyFilterList.render),a.D.getBoolean(this.headerInfoHash[s].options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList)){var m=this.groupbyFilterList.getMaxItemWidth();m>h&&(this.groupbyFilterList.render.style.width=m+"px")}this.groupbyFilterList.focus(),this.groupbyZoneStatus.beforeOpenedColIndex=o,this.groupbyZoneStatus.beforeOpenedColTagName=e.tagName}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.showGroupbyFilterList=function(t,e,i){try{var o=t.render,s=t.parentRender,n=t.headerIndex,l=t.headerID;if(this.groupbyFilterList.currentHeaderID=t.headerID,this.groupbyFilterList.headerIndex=n,this.groupbyZoneStatus.beforeOpenedColIndex=n,this.groupbyZoneStatus.beforeOpenedColTagName=o.tagName,WebSquare.style.show(this.groupbyFilterList.render),this.groupbyFilterList.focus(),e){var h,d=WebSquare.style.getRelativeTop(o,s)+o.offsetHeight,u=WebSquare.style.getRelativeLeft(o,s),c=this.render.offsetHeight-d;this.groupbyFilterList.options.visibleRowNum=Math.floor(c/21);var p=this.getGroupbyDepthInfo(t);this.groupbyFilterList.setJSON(p),!0===i&&this.groupbyFilterList.loadState(n),a.D.getBoolean(this.headerInfoHash[l].options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList)?(h=this.groupbyFilterList.getMaxItemWidth(),o.clientWidth>h&&(h=o.clientWidth)):h=o.clientWidth,this.groupbyFilterList.setPosition(u,d),this.groupbyFilterList.render.style.width=h+"px",this.applyFilterListFormat(p,l)}else if(!0===i){this.groupbyFilterList.loadState(n);p=this.getGroupbyDepthInfo(t);this.applyFilterListFormat(p,l)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.hideGroupbyFilterList=function(){try{this.groupbyFilterList&&(WebSquare.style.hide(this.groupbyFilterList.render),this.groupbyFilterList.isChanged&&this.options.groupbyFilterBox&&(this.refreshGroupbyFilterBox(),this.groupbyFilterList.isChanged=!1))}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getGroupbyDepthInfo=function(t){try{var e,i=t.headerIndex,o=this.getColumnID(i),s=t.headerID;e=this.groupbyFilterList.filterHistory.column[0]===o?this.groupbyFilterList.filterHistory.filteredRowIndexArr[0]:this._dataList.filteredRowIndexArr
;var a=this.dataList.getColData(o,e),n=this.getCellInfo(o),l=this.getUniqueValueOfArray(a),h=this.options.useFilterEmptyValue?this.options.useFilterEmptyValue.split(","):[];h.push("");var d,u,c=this.changeItemValue("label",o,l.slice(0)),p=this.customFilterStatusObj[s]||!1,g=WebSquare.language.getMessage("Grid_Customized_Filter")||"사용자필터",m=WebSquare.language.getMessage("Grid_checked_all")||"전체선택",f=[];f.push({id1:p,id2:g,customerFilter:!0}),f.push({id1:!p,id2:m,gridCheckedAll:!0}),!p&&this.groupbyStatus.filter&&o in this.groupbyStatus.filter&&(u=(d=this.groupbyStatus.filter[o]).slice(0));for(var b=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,y=this,v=0;v<c.length;v++){var w={};if(u){var S=!1,C=n.itemArr?n.itemHash[c[v]]:c[v];"string"==typeof C&&(C=C.replace(b,(function(t){return y.replacechar(t)})));for(var x=u.length-1;x>-1;x--){if(C==u[x]){S=!0,u.splice(x,1);break}if("string"==typeof u[x]){for(var _=!1,I=0;I<h.length;I++)if(h[I]==u[x]){_=!0;break}if(_&&(c[v]==this.options.useFilterEmptyMsg||c[v]==this.filterEmptyStr)){S=!0;break}}}w.id1=S}else w.id1=!p;w.id2=c[v],this.options.displayValueOnUseFilterList&&(w.id3=l[v]),f.push(w)}if(d){var T=!0,k=f;for(v=2;v<k.length;v++)if(!k[v].id1){T=!1;break}f[1].id1=!!T}return this._dataList.getDataLength()||(f[1].id1=!1),f}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.showGroupbyZone=function(){try{if((this.options.groupbyZone||this.clearGrouping)&&this.groupbyZoneStatus.groupbyZoneRender){if(this.groupbyZoneStatus.groupbyZoneRender.offsetHeight>0)return;if(WebSquare.style.show(this.groupbyZoneStatus.groupbyZoneRender),this.dom[this.id+"_main_div"].style.top=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight+"px",this.isIE6)try{this.dom[this.id+"_main_div"].style.height=this.dom[this.id+"_main_div"].offsetHeight-this.groupbyZoneStatus.groupbyZoneRender.offsetHeight}catch(t){}this.setDataTable(),this.drawData(this.rowIndex,0)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.hideGroupbyZone=function(){try{if((this.options.groupbyZone||this.clearGrouping)&&this.groupbyZoneStatus.groupbyZoneRender){if(0==this.groupbyZoneStatus.groupbyZoneRender.offsetHeight)return;if(this.dom[this.id+"_main_div"].style.top="0px",this.isIE6)try{this.dom[this.id+"_main_div"].style.height=this.dom[this.id+"_main_div"].offsetHeight+this.groupbyZoneStatus.groupbyZoneRender.offsetHeight}catch(t){}WebSquare.style.hide(this.groupbyZoneStatus.groupbyZoneRender),this.setDataTable(),this.drawData(this.rowIndex,0)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.showGroupbyZoneMessage=function(){try{if((this.options.groupbyZone||this.clearGrouping)&&this.options.groupbyZoneMessage){var t=this.groupbyZoneStatus.groupbyZoneMessageRender;t&&WebSquare.style.show(t)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.hideGroupbyZoneMessage=function(){try{if(this.options.groupbyZone&&this.options.groupbyZoneMessage){var t=this.groupbyZoneStatus.groupbyZoneMessageRender;t&&WebSquare.style.hide(t)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.syncWithGroupbyZone=function(){try{if(this.groupbyStatus.grouped&&this.options.groupbyZone){this.clearGroupbyZone();for(var t=this.groupbyStatus.sortIndexArr,e=0;e<t.length;e++){var i=t[e],o=this.getHeaderID(this._getDisplayColumnIndex(i)),s=this.getColumnID(i),a=document.createElement("div");a.setAttribute("header_id",o),a.className="w2grid_groupbyZone_column";var n=document.createElement("div");n.className="w2grid_groupbyZone_column_closeButtonDiv";var l=document.createElement("div");l.className="w2grid_groupbyZone_column_closeButtonImg",l.setAttribute("col_id",s);var h=document.createElement("div");h.className="w2grid_groupbyZone_column_labelDiv";var d=document.createElement("span"),u="textContent"in d?"textContent":"innerText";d[u]=this.getHeaderValue(o).replace(/<(\/)?br(\\s)*(\/)?>/gi," "),d.setAttribute("title",d[u]),h.appendChild(d),n.appendChild(l),a.appendChild(h),a.appendChild(n),this.groupbyZoneStatus.groupbyZoneRender.appendChild(a),
d.className="w2grid_groupbyZone_column_value"}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.clearGroupbyZone=function(){try{if((this.groupbyStatus.grouped||this.clearGrouping)&&this.options.groupbyZone){for(var t=this.groupbyZoneStatus.groupbyZoneRender,e=t.childNodes,i=[],o=0;o<e.length;o++)null!=e[o].className.match("w2grid_groupbyZone_column")&&i.push(e[o]);for(o=0;o<i.length;o++)t.removeChild(i[o])}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.handleChangeGroupDepth=function(t){try{for(var e=this.event.getTargetIterator(t);e.next();)if(e.match("w2grid_groupbyZone_column")){this.addClass("w2noselect"),a.D.emptySelection();var i=e.getElement().getAttribute("header_id"),o=this.getHeaderIndex(i),s=this.getHeaderValue(i),n=this;return void WebSquare.dragdrop.gDragManager.activate(t,null,{id:this.id+"_drag",className:"w2grid_groupbyZone_column_drag",contents:s,delay:15,applyMousePosition:!0,onDrop:function(t,e,i,s,r,a,l){var h,d=null;for(this.isMobile?(d=new WebSquare.targetIterator(document.elementFromPoint(l.changedTouches[0].clientX,l.changedTouches[0].clientY)),l.preventDefault()):d=n.event.getTargetIterator(l);d.next();){if(d.match("w2grid_groupbyZone_column")){h=n.getHeaderIndex(d.getElement().getAttribute("header_id"));break}if(d.match("w2grid_groupbyZone")){var u=n.groupbyStatus.sortIndexArr;h=u[u.length-1];break}if(d.match(null,null,"body"))return}o!=h&&(!1===n.options.noSelect&&!1===n.options.preventCopy&&n.removeClass("w2noselect"),n.hideGroupbyFilterList(),n.changeGroupDepth(o,h))}})}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.createContextMenu=function(t,e){try{if("object"===(0,l.Z)(e)&&!0===e.hideSystemMenu)return;"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2grid_contextMenu'>","    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_contextMenu_row'>","        <w2:listColumn id='col1' inputType='text' style='' class='w2grid_contextMenu_column'/>","    </w2:listRow>","</w2:list>";var i=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2grid_contextMenu'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_contextMenu_row'>        <w2:listColumn id='col1' inputType='text' style='' class='w2grid_contextMenu_column'/>    </w2:listRow></w2:list>",!0).documentElement;this.contextMenu=new WebSquare.uiplugin.list(this.id+"_contextMenu_list","",i),this.contextMenu.writeTo(WebSquare.getBody()),this.contextMenu.activate();var o=this;this.contextMenu.event.addListener(this.contextMenu.render,"onclick",(function(t){try{u.B.stopPropagation(t);for(var e,i,s=o.event.getTargetIterator(t,this.render),a=o.contextMenu;s.next();){if(s.match("w2grid_contextMenu_column")){e=s.getElement().parentNode;break}if(s.match("w2grid_contextMenu_row")){e=s.getElement();break}if(s.match("w2grid_contextMenu"))break}for(var n=0;n<a.getLength();n++)if(e==a.render.childNodes[n]){i=n;break}o.callSelectedAPI(a.getRowData(n).col1,a.info),o.hideContextMenu();var l=o.contextMenu.getAllData()[i],h={row:a.info.rowIndex,col:a.info.colIndex,focusedCell:a.info.focusedCell,userMenuId:l.userMenuId,isSystemMenu:l.isSystemMenu,systemMenu:l.systemMenu};a.info=null,u.B.fireEvent(o,"oncontextclick",h.row,h.col,h.userMenuId,h.isSystemMenu,h.systemMenu,h.focusedCell)}catch(t){r.w.printStackTrace(t,null,this)}}));var s=this.getContextMenuData(t);if(e&&e.hideSystemMenu&&"object"===(0,l.Z)(e.hideSystemMenu)&&e.hideSystemMenu.indexOf)for(var a=0;a<s.length;a++){var n=s[a].systemMenu;e.hideSystemMenu.indexOf(n)>-1&&(s.splice(a,1),a--)}if(e&&e.appendMenu&&"object"===(0,l.Z)(e.appendMenu)&&e.appendMenu.length)for(a=0;a<e.appendMenu.length;a++){var h=e.appendMenu[a];h.col1=h.label,h.isSystemMenu=!1,s.push(h)}if(s.length>0){this.showContextMenu(t,s);for(a=0;a<s.length;a++){var d=s[a]
;d.className&&(this.contextMenu.render.children[a].className=this.contextMenu.render.children[a].className+" "+d.className)}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getContextMenuData=function(t){try{var e=[],i=!0;if(this.groupbyStatus.grouped)for(var o=WebSquare.language.getMessage("Grid_ungroup")||"선택 컬럼 그룹 해제",s=0;s<this.groupbyStatus.sortIndexArr.length;s++)if(t.focusedCell&&t.focusedCell.length>1){for(var a=0;a<t.focusedCell.length;a++)if(this.groupbyStatus.sortIndexArr[s]==t.focusedCell[a].focusedColIndex){e.push({col1:o,isSystemMenu:!0,systemMenu:"Ungroup"}),i=!1;break}if(!i)break}else if(this.groupbyStatus.sortIndexArr[s]==t.colIndex){e.push({col1:o,isSystemMenu:!0,systemMenu:"Ungroup"}),i=!1;break}if(i){var n=WebSquare.language.getMessage("Grid_group")||"선택 컬럼 그룹";e.push({col1:n,isSystemMenu:!0,systemMenu:"Group"})}var l=WebSquare.language.getMessage("Grid_column_hide")||"선택 컬럼 숨기기";if(e.push({col1:l,isSystemMenu:!0,systemMenu:"ColumnHide"}),0==this.options.fixedColumn||this.options.fixedColumn-1<t.colIndex){var h=WebSquare.language.getMessage("Grid_column_fix")||"선택 컬럼 틀고정";e.push({col1:h,isSystemMenu:!0,systemMenu:"ColumnFix"})}if(this.options.fixedColumn>0){var d=WebSquare.language.getMessage("Grid_column_unfix")||"전체 컬럼 틀고정 취소";e.push({col1:d,isSystemMenu:!0,systemMenu:"ColumnUnfixAll"})}var u=WebSquare.language.getMessage("Grid_column_adjustWidth")||"선택 컬럼 크기 자동 맞추기",c=WebSquare.language.getMessage("Grid_column_showAll")||"전체 컬럼 숨기기 해제";e.push({col1:u,isSystemMenu:!0,systemMenu:"ColumnAdjustWidth"});for(s=0;s<this.hiddenList.length;s++)if(this.hiddenList[s]){e.push({col1:c,isSystemMenu:!0,systemMenu:"ColumnShowAll"});break}var p=WebSquare.language.getMessage("Grid_column_adjustAuto")||"전체 컬럼 크기 자동 맞추기";e.push({col1:p,isSystemMenu:!0,systemMenu:"ColumnAdjustAuto"});var g=WebSquare.language.getMessage("Grid_column_adjustAuto_none")||"컬럼 크기 자동 맞추기 해제";if(e.push({col1:g,isSystemMenu:!0,systemMenu:"ColumnAdjustAutoNone"}),this.groupbyStatus.grouped){var m=WebSquare.language.getMessage("Grid_fold_all")||"전체 그룹 접기",f=WebSquare.language.getMessage("Grid_unfold_all")||"전체 그룹 펼치기",b=WebSquare.language.getMessage("Grid_ungroup_all")||"전체 그룹 해제";e.push({col1:m,isSystemMenu:!0,systemMenu:"FoldAll"}),e.push({col1:f,isSystemMenu:!0,systemMenu:"UnfoldAll"}),e.push({col1:b,isSystemMenu:!0,systemMenu:"UngroupAll"})}return e}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.showContextMenu=function(t,e){try{e||(e=this.getContextMenuData(t),this.contextMenu.setPosition(0,0));var i=e.length*(this.options.contextMenuRowHeight+1);this.contextMenu.show(),this.contextMenu.setSize(null,i),this.contextMenu.setJSON(e);var o=u.B.getMouseX(t.event),s=u.B.getMouseY(t.event),a=document.body.scrollTop;a<document.documentElement.scrollTop&&(a=document.documentElement.scrollTop);var n=(s-a)*WebSquare.style.getScale(),l=document.documentElement.clientHeight-n,h=Math.max(l,n),d=WebSquare.style.getSize(this.contextMenu.render,"outerheight");(h<d&&e.length>0||l<d&&n>d)&&(s-=d),document.documentElement.clientWidth<o+this.contextMenu.render.offsetWidth&&(o-=this.contextMenu.render.offsetWidth)<0&&(o=WebSquare.style.getAbsoluteLeft(this.render)),this.contextMenu.setPosition(o,s),this.contextMenu.info=t}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.hideContextMenu=function(){try{this.contextMenu&&this.contextMenu.hide()}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.callSelectedAPI=function(t,e){try{
var i=WebSquare.language.getMessage("Grid_column_hide")||"선택 컬럼 숨기기",s=WebSquare.language.getMessage("Grid_column_showAll")||"전체 컬럼 숨기기 해제",a=WebSquare.language.getMessage("Grid_column_fix")||"선택 컬럼 틀고정",n=WebSquare.language.getMessage("Grid_column_unfix")||"전체 컬럼 틀고정 취소",l=WebSquare.language.getMessage("Grid_column_adjustWidth")||"선택 컬럼 크기 자동 맞추기",h=WebSquare.language.getMessage("Grid_column_adjustAuto")||"전체 컬럼 크기 자동 맞추기",d=WebSquare.language.getMessage("Grid_column_adjustAuto_none")||"컬럼 크기 자동 맞추기  해제",c=WebSquare.language.getMessage("Grid_fold_all")||"전체 그룹 접기",p=WebSquare.language.getMessage("Grid_unfold_all")||"전체 그룹 펼치기",g=WebSquare.language.getMessage("Grid_ungroup_all")||"전체 그룹 해제",m=WebSquare.language.getMessage("Grid_ungroup")||"선택 컬럼 그룹 해제",f=WebSquare.language.getMessage("Grid_group")||"선택 컬럼 그룹",b=e.focusedCell||[],y=[];if(b.length>0){for(var v=0;v<e.focusedCell.length;v++)y.push(e.focusedCell[v].colIndex);y.sort((function(t,e){return t-e}));for(v=0;v<y.length-1;)y[v]===y[v+1]?y.splice(v,1):v++}switch(t){case i:if(-1===e.colIndex)break;if(y.length>1)for(v=0;v<y.length;v++)this.setColumnVisible(y[v],!1),this.groupbyStatus.grouped&&this.ungroupColumn(y[v]);else this.setColumnVisible(e.colIndex,!1),this.groupbyStatus.grouped&&this.ungroupColumn(e.colIndex);break;case s:for(v=0;v<this.hiddenList.length;v++)this.hiddenList[v]&&this.setColumnVisible(this.columnOrder[v-this.defaultColCnt],!0);break;case a:if(-1===e.colIndex)break;if(y.length>1)for(v=0;v<y.length;v++)this.setFixedColumn(parseInt(y[v],10)+1);else this.setFixedColumn(parseInt(e.colIndex,10)+1);break;case n:if(-1===e.colIndex)break;this.setFixedColumn(0);break;case l:if(-1===e.colIndex)break;if(!this.autofitColumn){var w={type:"selectedColumn",colIndex:e.colIndex};this.setAutoFit(w)}break;case h:w={type:"allColumn"};this.setAutoFit(w);break;case d:this.clearAutoFit();break;case c:if(-1===e.colIndex)break;this.groupbyStatus.grouped&&this.foldAll();break;case p:if(-1===e.colIndex)break;this.groupbyStatus.grouped&&this.unfoldAll();break;case g:if(-1===e.colIndex)break;this.groupbyStatus.grouped&&this.clearGroupby();break;case m:if(-1===e.colIndex)break;if(y.length>1)for(v=0;v<y.length;v++)this.ungroupColumn(y[v]);else this.ungroupColumn(e.colIndex);break;case f:if(-1===e.colIndex)break;if(this.groupbyStatus.grouped){if((w={}).sortIndex=this.groupbyStatus.sortIndexArr,w.sortOrder=this.groupbyStatus.sortOrderArr,y.length>1)for(v=0;v<y.length;v++)w.sortIndex.push(y[v]),w.sortOrder.push(1);else w.sortIndex.push(e.colIndex),w.sortOrder.push(1);!1===u.B.fireEvent(this,"ongroupby",w)&&((w=o.x.extend({},this.groupbyDisplayOptions)).sortIndex=this.groupbyStatus.sortIndexArr,w.sortOrder=this.groupbyStatus.sortOrderArr,this.groupby(w,!0))}else{w={};if(y.length>1){w.sortIndex=y,w.sortOrder=[];for(v=0;v<y.length;v++)w.sortOrder.push(1)}else w.sortIndex=[e.colIndex],w.sortOrder=[1];if(!1===u.B.fireEvent(this,"ongroupby",w)){var S=this.getColCnt()+this.defaultColCnt;w.rowNumHeader={colSpan:S,inputType:"expression",expression:" toggle() + depthStr() + ' [ ' + count() + ' 건 ] ' ",align:"left"},w.rowNumFooter={colSpan:S},this.groupby(w,!0)}}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.createCustomFilterList=function(t,e){try{var i;!0!==e&&(i=this.headerToBodyRelation[t]);var o=this.options.filterListRowHeight+1,s=this.options.filterListVisibleRowNum||this.options.customFilterListVisibleRowNum,n=this.getElementById(this.id+"_head_table");this._dataLayerHeight=this.dataLayerHeight?this.dataLayerHeight:this.getElementById(this.id+"_body_table").parentNode.offsetHeight,this._dataLayerHeight=this._dataLayerHeight-n.offsetHeight;var l=0;this.options.useFilterSearch?(l=Math.min(parseInt(this._dataLayerHeight/o),s),this.customFilterScrollViewRenderHeight=l*o):this.customFilterScrollViewRenderHeight=s*o;"<w2:scrollView xmlns:w2=\"http://www.inswave.com/websquare\" style='position:absolute; z-index:11;' class='w2grid_customFilter_scrollView'>","</w2:scrollView>"
;var h=WebSquare.xml.parse("<w2:scrollView xmlns:w2=\"http://www.inswave.com/websquare\" style='position:absolute; z-index:11;' class='w2grid_customFilter_scrollView'></w2:scrollView>",!0).documentElement;WebSquare.xml.setAttribute(h,"bounce",!1),WebSquare.xml.setAttribute(h,"horizontalScroll",!1),WebSquare.xml.setAttribute(h,"paging",!1),WebSquare.xml.setAttribute(h,"scrollType","auto"),WebSquare.xml.setAttribute(h,"showHorizontalScroll",!1),WebSquare.xml.setAttribute(h,"showVerticalScroll",!1),WebSquare.xml.setAttribute(h,"verticalScroll",!1),this.customFilterScrollView=new WebSquare.uiplugin.scrollView(this.id+"_customFilter_scrollView","",h);var d="";if(this.options.useFilterSearch)d+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_customFilter_list' placeholder='"+(WebSquare.language.getMessage("Grid_filter_search")||"검색")+"' virtualized='true' visibleRowNum='"+(l-1)+"' useSearch='true' wheelRows='1' _listRowHeight='"+o+"'>";else d+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_customFilter_list'>";d+="    <w2:listRow tagName='div' style='height: "+this.options.filterListRowHeight+"px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_customFilter_list_listRow'>",d+="        <w2:listColumn id='id1' inputType='checkbox' style='' class='w2grid_customFilter_list_listColumn_checkbox'/>",d+="        <w2:listColumn id='id2' inputType='text' style='' class='w2grid_customFilter_list_listColumn_text'/>",d+="    </w2:listRow>",d+="</w2:list>";var c=WebSquare.xml.parse(d,!0).documentElement;this.customFilterList=new WebSquare.uiplugin.list(this.id+"_customFilter_list","",c),this.customFilterList.filterHistory={column:[],filteredRowIndexArr:[]},this.customFilterScrollView.addControl(this.customFilterList),this.customFilterScrollView.writeTo(this),this.customFilterScrollView.activate();var p=this;if(this.customFilterScrollView.event.addListener(this.customFilterScrollView.render,"onclick",this.customFilterScrollView.event.bindAsEventListener(this.customFilterList,(function(t){try{u.B.stopPropagation(t);var e=u.B.getTarget(t);if(e.className.match("w2list_input"))return;var i,o=e.parentNode,s=0;if(this.options.virtualized?(i=this.getElementById(this.id+"_items_main").childNodes,s=this.firstListIndex):i=this.render.childNodes,e.className.match("w2grid_customFilter_list_listRow")){e=(o=e).firstChild;for(var a=0;a<this.getLength();a++)if(o==i[a]){this.setCellData(a+s,"id1",!e.checked);break}}if(e.className.match("w2grid_customFilter_list_listColumn_text")&&(i[0]!=o||this.options.virtualized&&s>0)){e=o.firstChild;for(a=0;a<this.getLength();a++)if(o==i[a]){this.setCellData(a+s,"id1",!e.checked);break}}var n=this.currentHeaderID,l=p.headerToBodyRelation[n],h=p._dataList.getColumnIndex(l),d=p.headerInfoHash[n],c=0;if(d&&d.options.hideCustomFilter&&(c=1),1!==c&&o==i[0]&&0===s){if(e.className.match("w2grid_customFilter_list_listColumn_checkbox")){if(e.checked){if(p.firstOpenCustomFilter[n]){p.headerID=n,p.targetColID=l,p.options.useFilterSearch&&p.setAutoCompleteItem(l,n),p.setCustomFilterExpression();for(a=1;a<this.getLength();a++)this.setCellData(a,"id1",!1);if(p.options.useFilterSearch){var g=p.getCustomFilterListJSON({colID:l,headerID:n});p._setFilterListHeight(n,g.length)}return}return p.hideCustomFilterList(),p.firstOpenCustomFilter[n]||(p.firstOpenCustomFilter[n]=!0),void p._showCustomFilter(n)}if(p.customFilterStatusObj[n]=!1,delete this.customFilterListFilterInfo[l],p.dataList.removeColumnFilter(l),p.options.useFilterSearch){(g=p.getCustomFilterListJSON({colID:l,headerID:n}))[0].id1=!1;for(a=1-c;a<g.length;a++)g[a].id1=!0}for(a=1;a<this.getLength();a++)this.setCellData(a,"id1",!0);p.options.useFilterSearch&&(this.setJSON(g),p._setFilterListHeight(n,g.length))
}else if(e.className.match("w2grid_customFilter_list_listColumn_text"))return void p._showCustomFilter(n)}else if(1!==c&&this.setCellData(0,"id1",!1),p.customFilterStatusObj[n]=!1,delete this.customFilterListFilterInfo[l],o==i[1-c-s]){var m=e.checked;if(e.className.match("w2grid_customFilter_list_listColumn_text"))m=!i[1-c].firstChild.checked;for(a=1-c;a<this.getLength();a++)this.setCellData(a,"id1",m)}var f=[],b=[],y=[],v=this.getLength();for(a=2-c;a<v;a++)this.getCellData(a,"id1")?b.push(a):y.push(a);var w=b.length>y.length,S=(p._dataList.getFilterList(),this.getLength()-2+c),C=w?y:b,x="*";for(a=0;a<C.length;a++){var _=this.getCellData(C[a],"id2");w&&_===p.filterEmptyStr?x="+":f.push(_)}f=p.changeItemValue("value",l,f);var I=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g;for(a=0;a<f.length;a++){var T=f[a];"string"==typeof T&&(f[a]=T.replace(I,(function(t){return p.replacechar(t)})))}var k="";0==b.length?k+="/^[a-z0-9_-]{3,16}$/":k+=w?"^\\n*(?:(?!^"+f.join("$)(?!^")+"$).)"+x+"\\n*$":"^"+f.join("$|^")+"$";var D,L=p.getCellInfo(l),W="";if(L&&(W=p.getColumnOption(L.options.col_id,"dataType")),D="number"==W?new RegExp(k):new RegExp(k,"gi"),u.B.fireEvent(p._dataList,"onbeforecolumnfilterchange"),b.length<S&&(WebSquare.DataCollection.stopBroadCast=!0),p.dataList.removeColumnFilter(l,{noRefreshAfter:!0}),this.filterHistory.column[0]!==l&&(this.filterHistory.column.unshift(l),this.filterHistory.filteredRowIndexArr.unshift(p._dataList.filteredRowIndexArr.slice(0))),b.length<S){if(WebSquare.DataCollection.stopBroadCast=!1,w){this.customFilterListFilterInfo[l]=[];for(a=0;a<b.length;a++)this.customFilterListFilterInfo[l].push(this.getCellData(b[a],"id2"));(L.itemsetObj||L.itemArr)&&(this.customFilterListFilterInfo[l]=p.changeItemValue("value",l,this.customFilterListFilterInfo[l]));for(a=0;a<this.customFilterListFilterInfo[l].length;a++){var A=this.customFilterListFilterInfo[l][a];A===p.filterEmptyStr?this.customFilterListFilterInfo[l][a]="":"string"==typeof A&&(A=A.replace(I,(function(t){return p.replacechar(t)})),this.customFilterListFilterInfo[l][a]=A)}}else this.customFilterListFilterInfo[l]=f;p.dataList.setColumnFilter({type:"regExp",colIndex:h,key:D,condition:"and",columnfilterchangeFire:!1,noRefreshAfter:!0})}else delete this.customFilterListFilterInfo[l];var E=p.getElementById(p.id+"_"+n+"_filter");1!==c&&this.getCellData(0,"id1")||WebSquare.style.removeClass(E,"w2grid_customFilter_filter");var M=!0,q=(S=this.getLength()-2+c,this.getAllData());for(a=2-c;a<q.length;a++)if(!q[a].id1){M=!1;break}M?(this.setCellData(1-c,"id1",!0),this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift()):(this.setCellData(1-c,"id1",!1),WebSquare.style.addClass(E,"w2grid_customFilter_filter")),u.B.fireEvent(p._dataList,"onaftercolumnfilterchange"),p.options.groupbyFilterBox&&(this.isChanged=!0)}catch(t){r.w.printStackTrace(t,null,this)}}))),this.options.useFilterSearch&&(this.customFilterList.find=function(){this.search="contain";var t=this.dom.input.value,e=[],i=this.currentHeaderID,o=p.headerToBodyRelation[i],s=p._dataList.getColumnIndex(o),r=p.headerInfoHash[i],a=0;r&&r.options.hideCustomFilter&&(a=1);for(var n=0;n<2-a;n++)e.push({id1:n-a==1,id2:f[n].id2});if(""!=t){p.itemValueObj={},p.customFilterStatusObj[i]=!1,p.firstOpenCustomFilter[i]=!1;var l=e.length;p.dataList.removeColumnFilter(o),delete this.customFilterListFilterInfo[o];for(R=p.getCustomFilterListJSON({colID:o,headerID:i}),n=2-a;n<R.length;n++){var h=!1,d=R[n].id2+"";"contain"==this.search?h=this.myhelper.containWith(d,t):"start"==this.search?h=this.myhelper.startWith(d,t):"none"==this.search&&(h=d==t),h&&e.push({id1:!0,id2:R[n].id2})}l===e.length&&e.splice(1-a,1),this.setJSON(e),p._setFilterListHeight(i,R.length,e.length);var c=[],g=[],m=[],b=this.getLength();for(n=2-a;n<b;n++)this.getCellData(n,"id1")?g.push(n):m.push(n);if(0!=g.length||0!=m.length){var y=g.length>m.length;0===m.length&&(y=!1);var v=y?m:g,w="*";for(n=0;n<v.length;n++){var S=this.getCellData(v[n],"id2")
;y&&S===p.filterEmptyStr?w="+":c.push(S)}c=p.changeItemValue("value",o,c);var C=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g;for(n=0;n<c.length;n++){var x=c[n];"string"==typeof x&&(c[n]=x.replace(C,(function(t){return p.replacechar(t)})))}var _="";0==g.length?_+="/^[a-z0-9_-]{3,16}$/":_+=y?"^\\n*(?:(?!^"+c.join("$)(?!^")+"$).)"+w+"\\n*$":"^"+c.join("$|^")+"$";var I,T=p.getCellInfo(o),k="";T&&(k=p.getColumnOption(T.options.col_id,"dataType")),I="number"==k?new RegExp(_):new RegExp(_,"gi"),u.B.fireEvent(p._dataList,"onbeforecolumnfilterchange");var D=this.getLength()-2+a;if(g.length<D&&(WebSquare.DataCollection.stopBroadCast=!0),p.dataList.removeColumnFilter(o,{noRefreshAfter:!0}),this.filterHistory.column[0]!==o&&(this.filterHistory.column.unshift(o),this.filterHistory.filteredRowIndexArr.unshift(p._dataList.filteredRowIndexArr.slice(0))),g.length<=D){if(WebSquare.DataCollection.stopBroadCast=!1,y){this.customFilterListFilterInfo[o]=[];for(n=0;n<g.length;n++)this.customFilterListFilterInfo[o].push(this.getCellData(g[n],"id2"));(T.itemsetObj||T.itemArr)&&(this.customFilterListFilterInfo[o]=p.changeItemValue("value",o,this.customFilterListFilterInfo[o]));for(n=0;n<this.customFilterListFilterInfo[o].length;n++){var L=this.customFilterListFilterInfo[o][n];L===p.filterEmptyStr?this.customFilterListFilterInfo[o][n]="":"string"==typeof L&&(L=L.replace(C,(function(t){return p.replacechar(t)})),this.customFilterListFilterInfo[o][n]=L)}}else this.customFilterListFilterInfo[o]=c;p.dataList.setColumnFilter({type:"regExp",colIndex:s,key:I,condition:"and",columnfilterchangeFire:!1,noRefreshAfter:!0})}else delete this.customFilterListFilterInfo[o];q=p.getElementById(p.id+"_"+i+"_filter");1!==a&&this.getCellData(0,"id1")||WebSquare.style.removeClass(q,"w2grid_customFilter_filter");var W=!0,A=(D=this.getLength()-2+a,this.getAllData());for(n=2-a;n<A.length;n++)if(!A[n].id1){W=!1;break}W?(this.setCellData(1-a,"id1",!0),this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift(),this.listRowObjArr.length!==f.length&&WebSquare.style.addClass(q,"w2grid_customFilter_filter")):(this.setCellData(1-a,"id1",!1),WebSquare.style.addClass(q,"w2grid_customFilter_filter")),u.B.fireEvent(p._dataList,"onaftercolumnfilterchange"),p.options.groupbyFilterBox&&(this.isChanged=!0)}}else{for(var E=p._dataList.getFilterList(),M=!1,n=0;n<E.length;n++)if(E[n]&&E[n].colIndex===s&&"func"!==E[n].type){M=!0;break}if(this.listRowObjArr.length!==f.length&&M){p.itemValueObj={},p.customFilterStatusObj[i]=!1,delete this.customFilterListFilterInfo[o],p.firstOpenCustomFilter[i]=!1,p.dataList.removeColumnFilter(o);var q=p.getElementById(p.id+"_"+i+"_filter");1!==a&&this.getCellData(0,"id1")||WebSquare.style.removeClass(q,"w2grid_customFilter_filter");for(var R=p.getCustomFilterListJSON({colID:o,headerID:i}),n=2-a;n<R.length;n++)e.push({id1:!0,id2:R[n].id2});this.setJSON(e),p._setFilterListHeight(i,e.length)}}},this.customFilterList._inputKeyDown=this.customFilterList.inputKeyDown,this.customFilterList.inputKeyDown=function(t,e){var i=this;this.mytime=setTimeout((function(t){i.find()}),100,t)}),!0===e)return;var g,m,f=this.getCustomFilterListJSON({colID:i,headerID:t}),b=this.getElementById(this.id+"_"+t),y=(this.options.useFilterSearch?f.length+1:f.length)*o-1,v=WebSquare.style.getSize(this.customFilterScrollView.render,"outerHeight")-WebSquare.style.getSize(this.customFilterScrollView.render,"height"),w=WebSquare.style.getRelativeTop(b,this.render)+b.offsetHeight+1,S=WebSquare.style.getRelativeLeft(b,this.render),C=Math.min(this.customFilterScrollViewRenderHeight,y,this._dataLayerHeight-v);if(this.options.useFilterSearch&&(y=C),a.D.getBoolean(this.headerInfoHash[t].options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList)){this.customFilterList.setJSON(f),this.applyFilterListFormat(f,t),g=this.customFilterList.getMaxItemWidth(),b.clientWidth>g&&(g=b.clientWidth),m=g,
this.options.useFilterSearch||C>=y||(m+=this.getElementById(this.id+"_size_y").clientWidth);var x=this.getElementById(this.id+"_customFilter_scrollView_container");WebSquare.style.setStyle(x,"overflow-x","hidden")}else{var _=parseInt(this.headerInfoHash[t].options.filterListWidth);m=g=_>0?_:this.options.filterListWidth>0?this.options.filterListWidth:b.clientWidth,this.options.useFilterSearch||C>=y||(g-=this.getElementById(this.id+"_size_y").clientWidth),this.customFilterList.setJSON(f),this.applyFilterListFormat(f,t)}if(this.customFilterScrollView.setPosition(S,w-1),this.customFilterScrollView.setSize(m,C),this.customFilterList.setSize(g,y),this.options.useFilterSearch){this.removeFocusedCell(),this.customFilterList.oldSearchedData="";var I=this.customFilterList.getElementById(this.customFilterList.id+"_input"),T=WebSquare.style.getSize(I,"innerwidth")-WebSquare.style.getSize(I,"width");this.customFilterList.dom.input.style.width=g-parseInt(this.customFilterList.getElementById(this.customFilterList.id+"_scroll_main").style.width)-T+"px",this.customFilterList.dom.input.focus()}this.customFilterList.currentHeaderID=t,this.customFilterList.customFilterListFilterInfo={},this.customFilterList.customFilterListAction=!1,this.customFilterList.customUserFilterListAction=!1,WebSquare.style.show(this.customFilterScrollView.render)}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._setFilterListHeight=function(t,e,i){try{var o,s,n=this.getElementById(this.id+"_"+t),l=this.options.filterListRowHeight+1,h=i||e,d=(this.options.useFilterSearch?h+1:h)*l-1,u=WebSquare.style.getSize(this.customFilterScrollView.render,"outerHeight")-WebSquare.style.getSize(this.customFilterScrollView.render,"height"),c=Math.min(this.customFilterScrollViewRenderHeight,d,this._dataLayerHeight-u);if(this.options.useFilterSearch&&(d=c),a.D.getBoolean(this.headerInfoHash[t].options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList)){o=this.customFilterList.getMaxItemWidth(),n.clientWidth>o&&(o=n.clientWidth),s=o,this.options.useFilterSearch||this.customFilterScrollViewRenderHeight>=d||(s+=this.getElementById(this.id+"_size_y").clientWidth);var p=this.getElementById(this.id+"_customFilter_scrollView_container");WebSquare.style.setStyle(p,"overflow-x","hidden")}else{var g=parseInt(this.headerInfoHash[t].options.filterListWidth);s=o=g>0?g:this.options.filterListWidth>0?this.options.filterListWidth:n.clientWidth,this.options.useFilterSearch||c>d||(o-=this.getElementById(this.id+"_size_y").clientWidth)}if(this.customFilterScrollView.setSize(s,c),this.customFilterList.setSize(o,d),this.options.useFilterSearch){var m=this.customFilterList.getElementById(this.customFilterList.id+"_input"),f=WebSquare.style.getSize(m,"innerwidth")-WebSquare.style.getSize(m,"width");this.customFilterList.dom.input.style.width=o-parseInt(this.customFilterList.getElementById(this.customFilterList.id+"_scroll_main").style.width)-f+"px"}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.toggleCustomFilterList=function(t){try{this.customFilterScrollView&&this.customFilterList&&("none"==this.customFilterScrollView.render.style.display||this.customFilterList.currentHeaderID!=t?this.moveCustomFilterList(t):this.hideCustomFilterList())}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.showCustomFilterList=function(t,e){try{if(this.customFilterScrollView&&this.customFilterList){if(e){var i,o;WebSquare.style.show(this.customFilterScrollView.render);var s=this.getElementById(this.id+"_"+t.headerID),n=this.options.filterListRowHeight+1,l=(this.options.useFilterSearch?t.dataLength+1:t.dataLength)*n-1,h=WebSquare.style.getSize(this.customFilterScrollView.render,"outerHeight")-WebSquare.style.getSize(this.customFilterScrollView.render,"height"),d=this.options.filterListVisibleRowNum||this.options.customFilterListVisibleRowNum;if(this.options.useFilterSearch){var u=Math.min(parseInt(this._dataLayerHeight/n),d);this.customFilterScrollViewRenderHeight=u*n
}else this.customFilterScrollViewRenderHeight=d*n;var c=WebSquare.style.getRelativeTop(s,this.render)+s.offsetHeight+1,p=WebSquare.style.getRelativeLeft(s,this.render),g=this.getElementById(this.id+"_head_table"),m=this.dataLayerHeight-g.offsetHeight,f=Math.min(this.customFilterScrollViewRenderHeight,l,m-h);if(this.options.useFilterSearch&&(l=f),a.D.getBoolean(this.headerInfoHash[t.headerID].options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList)){i=this.customFilterList.getMaxItemWidth(),s.clientWidth>i&&(i=s.clientWidth),o=i,this.options.useFilterSearch||this.customFilterScrollViewRenderHeight>=l||(o+=this.getElementById(this.id+"_size_y").clientWidth);var b=this.getElementById(this.id+"_customFilter_scrollView_container");WebSquare.style.setStyle(b,"overflow-x","hidden")}else{var y=parseInt(this.headerInfoHash[t.headerID].options.filterListWidth);o=i=y>0?y:this.options.filterListWidth>0?this.options.filterListWidth:s.clientWidth,this.options.useFilterSearch||f>=l||(i-=this.getElementById(this.id+"_size_y").clientWidth)}this.customFilterScrollView.setPosition(p,c-1),this.customFilterScrollView.setSize(o,f),this.customFilterList.setSize(i,l)}if(this.customFilterList.currentHeaderID=t.headerID,this.options.useFilterSearch){this.removeFocusedCell(),this.customFilterList.dom.input.value="",this.customFilterList.oldSearchedData="";var v=this.customFilterList.getElementById(this.customFilterList.id+"_input"),w=WebSquare.style.getSize(v,"innerwidth")-WebSquare.style.getSize(v,"width");this.customFilterList.dom.input.style.width=i-parseInt(this.customFilterList.getElementById(this.customFilterList.id+"_scroll_main").style.width)-w+"px",this.customFilterList.dom.input.focus()}WebSquare.style.show(this.customFilterScrollView.render)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.moveCustomFilterList=function(t){try{if(this.customFilterScrollView&&this.customFilterList){var e=this.headerToBodyRelation[t],i=this.getCustomFilterListJSON({colID:e,headerID:t});this.customFilterList.setJSON(i),this.applyFilterListFormat(i,t),this.customFilterList.currentHeaderID=t,this.showCustomFilterList({headerID:t,dataLength:i.length},!0)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.hideCustomFilterList=function(){try{this.customFilterScrollView&&this.customFilterList&&(WebSquare.style.hide(this.customFilterScrollView.render),this.customFilterList.isChanged&&this.options.groupbyFilterBox&&(this.refreshGroupbyFilterBox(),this.customFilterList.isChanged=!1))}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.getCustomFilterListJSON=function(t){try{var e;if(this.customFilterList.filterHistory.column[0]!==t.colID||this.options.showAllFilterList)if(this.options.useFilterSearch){var i=this._dataList.getFilterList();if(i.length>0){var o=!1;1==i.length&&this.getColumnID(i[0].colIndex)===t.colID&&(o=!0)}e=o?this._dataList.filterManager.allRowIndexArr:this._dataList.filteredRowIndexArr}else this.options.showAllFilterList?(this.customFilterList.customFilterListFilterInfo,e=this._dataList.filterManager.firstFiltering?this._dataList.filteredRowIndexArr:this._dataList.filterManager.allRowIndexArr):e=this._dataList.filteredRowIndexArr;else e=this.customFilterList.filterHistory.filteredRowIndexArr[0];var s=this.dataList.getColData(t.colID,e),a=this.getCellInfo(t.colID),n=this.getUniqueValueOfArray(s),l=this.options.useFilterEmptyValue?this.options.useFilterEmptyValue.split(","):[];l.push("");var h,d,u=this.changeItemValue("label",t.colID,n.slice(0)),c=this.customFilterStatusObj[t.headerID]||!1,p=WebSquare.language.getMessage("Grid_Customized_Filter")||"사용자필터",g=WebSquare.language.getMessage("Grid_checked_all")||"전체선택",m=[{id1:c,id2:p},{id1:!c,id2:g}];!c&&this.customFilterList.customFilterListFilterInfo&&t.colID in this.customFilterList.customFilterListFilterInfo&&(d=(h=this.customFilterList.customFilterListFilterInfo[t.colID]).slice(0));for(var f=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,b=this,y=0;y<u.length;y++){var v={};if(d){
var w=!1,S=a.itemArr?a.itemHash[u[y]]:u[y];"string"==typeof S&&(S=S.replace(f,(function(t){return b.replacechar(t)})));for(var C=d.length-1;C>-1;C--){if(S==d[C]){w=!0,d.splice(C,1);break}if("string"==typeof d[C]){for(var x=!1,_=0;_<l.length;_++)if(l[_]==d[C]){x=!0;break}if(x&&(u[y]==this.options.useFilterEmptyMsg||u[y]==this.filterEmptyStr)){w=!0;break}}}v.id1=w}else v.id1=!c;v.id2=u[y],this.options.displayValueOnUseFilterList&&(v.id3=n[y]),m.push(v)}var I=0,T=this.headerInfoHash[t.headerID];if(T&&T.options.hideCustomFilter&&(m.shift(),I=1),h){var k=!0,D=m;for(y=2-I;y<D.length;y++)if(!D[y].id1){k=!1;break}m[1-I].id1=!!k}return this._dataList.getDataLength()||(m[1-I].id1=!1),m}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.changeItemValue=function(t,e,i){try{var o=[],s=!1,a=this.getCellInfo(e);if(a.itemHash={},a.itemsetObj&&""!=a.itemsetObj.nodeset&&a.itemsetObj.nodeset.wq_replaceAll(" ","").indexOf("data:")>=0&&(!a.itemArr||a.itemArr.length<1)){a.itemArr=[];var n=a.itemsetObj.nodeset.replace("data:",""),l=this.modelControl.getDataComp(n);if(l&&WebSquare.idCache[l.uuid])switch(l.initializeType){case"linkedDataList":for(var h=[],d={},u=l.getAllNoFilteredData(),c=0;c<l._dataList.getDataLength();c++){var p=u[c*l.cellIdList.length+l.bodyIdColIndexMap[a.itemsetObj.label]],g=u[c*l.cellIdList.length+l.bodyIdColIndexMap[a.itemsetObj.value]];d[p]!=g&&(d[p]=g,h.push({label:p,value:g}))}a.itemArr=h;break;case"dataList":for(h=[],d={},c=0;c<l.getDataLength();c++){p=l.getCellData(c,a.itemsetObj.label),g=l.getCellData(c,a.itemsetObj.value);d[p]!=g&&(d[p]=g,h.push({label:p,value:g}))}a.itemArr=h;break;case"dataMap":for(h=[],d={},c=0;c<l.getCount();c++){p=l.get(a.itemsetObj.label),g=l.get(a.itemsetObj.value);d[p]!=g&&(d[p]=g,h.push({label:p,value:g}))}a.itemArr=h}}if(a.itemArr){var m="label"==t?"value":"label",f=a.itemArr.slice(0);for(c=0;c<i.length;c++)for(var b=f.length-1;b>-1;b--){var y=f[b];if(y[m]==i[c]){o.push(y[t]),f.splice(b,1),"label"==t&&(a.itemHash[y[t]]=y[m]);break}if("label"==t){if(!i[c]||this.useFilterEmptyValueInfo[i[c]]){s||(s=!0,o.push(this.filterEmptyStr));break}}else if("value"==t&&i[c]==this.filterEmptyStr){for(var v in this.useFilterEmptyValueInfo)o.push(v);break}}}else for(c=0;c<i.length;c++){if("label"==t){if(!i[c]&&0!==i[c]||this.useFilterEmptyValueInfo[i[c]]){s||(s=!0,o.push(this.filterEmptyStr));continue}}else if("value"==t&&i[c]==this.filterEmptyStr){for(var v in this.useFilterEmptyValueInfo)o.push(v);continue}o.push(i[c]),a.itemHash[i[c]]=i[c]}return o}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.resizeGridList=function(){try{var t,e;if(this.groupbyFilterList)return;if(!this.customFilterList)return;t=this.customFilterList,e=this.customFilterScrollView;var i=document.getElementById(this.id+"_"+t.currentHeaderID);if(i){var o=i.clientWidth,s=e.render.clientHeight,n=WebSquare.style.getRelativeTop(i,this.render)+i.offsetHeight+1,l=WebSquare.style.getRelativeLeft(i,this.render);(a.D.getBoolean(this.getHeaderInfo(t.currentHeaderID).options.autoFitFilterList)||a.D.getBoolean(this.options.autoFitFilterList))&&(this.customFilterList?s<t.render.clientHeight?(o=Math.max(o,this.customFilterList.getMaxItemWidth()),o+=this.getElementById(this.id+"_size_y").clientWidth):o=Math.max(o,this.customFilterList.getMaxItemWidth()):this.groupbyFilterList&&(o=Math.max(o,this.groupbyFilterList.getMaxItemWidth()))),e.setPosition(l,n),t.setSize(o,null),e.setSize(o,s)}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.showGroupbyHeaderGhost=function(t,e){try{var i=this.getHeaderValue(e);WebSquare.dragdrop.gDragManager.activate(t,null,{id:this.id+"_drag",className:"w2grid_groupbyZone_header_drag",contents:i,delay:15,applyMousePosition:!0,onDrop:function(t,e,i,o,s,r,a){}})}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setAdaptiveColumnVisible=function(t,e){try{if(this.hiddenAdaptiveList[t]==!e||t>=this.hiddenAdaptiveList.length)return;var i=this,o=function t(e){
var o=i.getColumnID(e),s=null!=i.bodyToHeaderRelation[o]?i.getHeaderLayer(i.bodyToHeaderRelation[o]):null;return null!=s?s:t(e-1)}(t),s=document.getElementsByClassName(this.id+"_columnstyle_"+(t-this.defaultColCnt)+"_"),a=this.getColumnStyleValue(t-this.defaultColCnt,"height");if(null==this.oldOptions.headerColBorder&&null!=o&&(this.oldOptions.headerColBorder=WebSquare.style.getStyle(o,"border-top")),null==this.oldOptions.headerPaddingTop&&null!=o&&(this.oldOptions.headerPaddingTop=WebSquare.style.getStyle(o,"padding-top")),null==this.oldOptions.headerPaddingBottom&&null!=o&&(this.oldOptions.headerPaddingBottom=WebSquare.style.getStyle(o,"padding-bottom")),s.length>0&&""!=this.oldOptions.bodyColBorder&&(this.oldOptions.bodyColBorder=WebSquare.style.getStyle(s[0],"border-top")),this.hasSubtotal)for(var n=0,l=0,h=this.drawedSubtotal[0][0].childNodes,d=0;d<h.length&&((v=parseInt(h[d].getAttribute("colSpan")))||(v=1),!(l<=t&&t<l+v));d++)l+=v,n++;if(this.hasFooter){var u=0,c=0,p=this.htmlInfo.foot.rowArr;for(d=0;d<p.length;d++)for(var g=p[d],m=0;m<g.length;m++){var f=g[m];if((v=parseInt(f.colSpan))||(v=1),c<=t-this.defaultColCnt&&t-this.defaultColCnt<c+v)break;c+=v,u++}}if(e){o.style.height=a,o.style.removeProperty("padding"),o.style.borderTop=this.oldOptions.headerColBorder;for(d=0;d<s.length;d++)s[d].style.height=a,s[d].style.removeProperty("padding"),s[d].style.borderTop=this.oldOptions.bodyColBorder;if(this.setAdaptiveColumnStyle(t,"height",a),this.setAdaptiveColumnStyle(t,"padding",""),this.setAdaptiveColumnStyle(t,"border-top",this.oldOptions.bodyColBorder),this.hasFooter)for(d=0;d<p.length;d++){f=p[d][u];var b=parseInt(this.getFooterStyle(f.id,"height"))+parseInt(o.offsetHeight);!(v=parseInt(f.colSpan))||parseInt(this.getFooterStyle(f.id,"height"))<=0?(this.setFooterStyle(f.id,"height",o.style.height),this.setFooterStyle(f.id,"padding",o.style.padding),this.setFooterStyle(f.id,"borderTop",o.style.borderTop)):this.setFooterStyle(f.id,"height",b+"px")}if(this.hasSubtotal)for(d=0;d<this.drawedSubtotal.length;d++)for(m=0;m<this.drawedSubtotal[d].length;m++){var y=this.drawedSubtotal[d][m].childNodes;b=parseInt(y[n].style.height)+parseInt(o.offsetHeight);!(v=parseInt(y[n].getAttribute("colSpan")))||parseInt(y[n].style.height)<=0?(y[n].style.height=o.style.height,y[n].style.padding=o.style.padding,y[n].style.borderTop=o.style.borderTop):y[n].style.height=b+"px"}}else{if(this.hasFooter)for(d=0;d<p.length;d++){f=p[d][u],b=parseInt(this.getFooterStyle(f.id,"height"))-parseInt(o.offsetHeight);!(v=parseInt(f.colSpan))||b<=0?(this.setFooterStyle(f.id,"height","0px"),this.setFooterStyle(f.id,"padding","0px"),this.setFooterStyle(f.id,"borderTop","0px")):this.setFooterStyle(f.id,"height",b+"px")}if(this.hasSubtotal)for(d=0;d<this.drawedSubtotal.length;d++)for(m=0;m<this.drawedSubtotal[d].length;m++){var v;y=this.drawedSubtotal[d][m].childNodes,b=parseInt(y[n].style.height)-parseInt(o.offsetHeight);!(v=parseInt(y[n].getAttribute("colSpan")))||b<=0?(y[n].style.height="0px",y[n].style.padding="0px",y[n].style.borderTop="0px"):y[n].style.height=b+"px"}var w=parseInt(o.colSpan,10),S=!1;if(w>1)for(var C=this.headerToBodyRelation[o.getAttribute("header_id")],x=this.getColumnIndex(C),_=x;_<x+w;_++)this.hiddenList[_]||(S=!0);(w<2||!S)&&(o.style.height="0px",o.style.padding="0px",o.style.borderTop="0px");for(d=0;d<s.length;d++)s[d].style.height="0px",s[d].style.padding="0px",s[d].style.borderTop="0px";this.setAdaptiveColumnStyle(t,"height","0px"),this.setAdaptiveColumnStyle(t,"padding","0px"),this.setAdaptiveColumnStyle(t,"border-top","0px")}parseInt(o.colSpan,10)>1&&this.setAdaptiveGridHeaderHeight(),this.hiddenAdaptiveList[t]=!e}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.applyFilterHistory=function(){try{if(this.getElementById(this.id+"_groupbyFilterBox_apply").checked=this.groupbyFilterBox_history.length>0,!0===this.getElementById(this.id+"_groupbyFilterBox_apply").checked){
var t=this.groupbyFilterBox_select.getSelectedIndex(),e=this.groupbyFilterBox_history[t];if(e.groupbyOptions)this.groupby(JSON.parse(e.groupbyOptions,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.Z)(i)&&i.constructor===RegExp?i:e}catch(t){return e}}))),this.customFilterList&&(this.customFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),e.customFilterStatusObj?this.customFilterStatusObj=JSON.parse(e.customFilterStatusObj):this.customFilterStatusObj={};else{for(var i in this.groupbyStatus.grouped&&this.clearGroupby(),this._dataList.clearFilter(e.filterOption.length>0),this._dataList.sortStatusInfo={},this._dataList.sortStatusArr=[],this.headerInfoHash){var o=this.getElementById(this.id+"_"+i+"_filter");o&&WebSquare.style.removeClass(o,"w2grid_customFilter_filter")}this.refreshCustomFilterHistory(t),this._dataList.broadcast({gridView:["clearHeaderSort"]}),this._dataList.broadcast({gridView:["notifyMultisort"]})}}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._refreshCustomFilterHistory=function(t,e,i){try{for(var o=t?JSON.parse(t,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.Z)(i)&&i.constructor===RegExp?i:"object"===(0,l.Z)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})):[],s="",a="",n=0;n<o.length;n++){var h=o[n];h.noRefresh=n<o.length-1,h.keepTop=!1,h.internal=!0;var d="";for(var u in h.bodyIdColIndexMap)h.bodyIdColIndexMap[u]===h.colIndex&&(d=u);"sort"!==h.type&&(s=',"'+d+'"'+s,a=",["+this._dataList.filteredRowIndexArr.join(",")+"]"+a),this._dataList.setFilter(h);var c=this.bodyToHeaderRelation[this._dataList.cellIdList[h.colIndex]],p=this.getElementById(this.id+"_"+c+"_filter");p&&WebSquare.style.addClass(p,"w2grid_customFilter_filter")}s=s.slice(1)+"],",a=a.slice(1)+"]}",this.customFilterList||this.createCustomFilterList(null,!0);var g='{"column":['+s+'"filteredRowIndexArr":['+a;this.customFilterList.filterHistory=JSON.parse(g),this.customFilterList.customFilterListFilterInfo=e?JSON.parse(e,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.Z)(i)&&i.constructor===RegExp?i:"object"===(0,l.Z)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})):{},this.groupbyFilterList&&(this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),this.customFilterStatusObj=i?JSON.parse(i):{},this.groupbyStatus.grouped||this.drawHeaderSortImages()}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.refreshCustomFilterHistory=function(t){try{for(var e=this.groupbyFilterBox_history[this.groupbyFilterBox_select.getSelectedIndex()],i="",o="",s=0;s<e.filterOption.length;s++){var a=e.filterOption[s];a.noRefresh=s<e.filterOption.length-1,a.keepTop=!1,a.internal=!0;var n="";for(var h in a.bodyIdColIndexMap)a.bodyIdColIndexMap[h]===a.colIndex&&(n=h);"sort"!==a.type&&(i=',"'+n+'"'+i,o=",["+this._dataList.filteredRowIndexArr.join(",")+"]"+o),this._dataList.setFilter(a);var d=this.bodyToHeaderRelation[this._dataList.cellIdList[a.colIndex]],u=this.getElementById(this.id+"_"+d+"_filter");u&&WebSquare.style.addClass(u,"w2grid_customFilter_filter")}i=i.slice(1)+"],",o=o.slice(1)+"]}",this.customFilterList||this.createCustomFilterList(null,!0);var c='{"column":['+i+'"filteredRowIndexArr":['+o;this.customFilterList.filterHistory=JSON.parse(c),e.customFilterListFilterInfo?this.customFilterList.customFilterListFilterInfo=JSON.parse(e.customFilterListFilterInfo,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.Z)(i)&&i.constructor===RegExp?i:"object"===(0,l.Z)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})):this.customFilterList.customFilterListFilterInfo={},this.groupbyFilterList&&(this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),
e.customFilterStatusObj?this.customFilterStatusObj=JSON.parse(e.customFilterStatusObj):this.customFilterStatusObj={}}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.clearFilterHistory=function(){try{this.getElementById(this.id+"_groupbyFilterBox_apply").checked=!1,this.groupbyFilterBox_history=[],this.groupbyFilterBox_select.removeAll(),this.groupbyStatus.grouped?this.clearGroupby():this._dataList.clearFilter()}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.refreshGroupbyFilterBox=function(){try{var t=this._dataList.getFilterList(),e="",i=!(!this.options.customFilterBox||!this.groupbyStatus.groupbyOptions),o=i?"[Groupby] ":"";if(!this.options.customFilterBox&&!this.groupbyStatus.groupbyOptions)return;e+=o,e+="(";for(var s,n=null,h="",d=!0,u=o,c=!1,p=this.options.groupbyFilterBoxLabelSize,g=0;g<t.length;g++){var m="regExp"===(T=t[g]).type,f="func"===T.type&&T.param;if(m||f){d||(e+=" "+T.condition+" ",u+=T.condition),e+="(";var b=this._dataList.cellIdList[T.colIndex],y=this.getHeaderValue(this.bodyToHeaderRelation[b])||b;if(m){var v=this.dataList.getColData(b,this._dataList.filteredRowIndexArr);if((L=this.getUniqueValueOfArray(v)).length<=0){if(a.D.isNullReg(T.key)){n=b,h=y;break}continue}for(var w=0,S=0;S<L.length;S++){var C=L[S];this.useFilterEmptyValueInfo[C]&&(C=this.filterEmptyStr),w>0&&(w<p&&(e+=" OR "),u+="OR"),w<p&&(e+=y+" = "+C),u+=b+"="+C,w++}w>p&&(e+=" OR ... ("+(w-p)+" omitted)")}else if(f)for(S=0;S<T.param.length;S++){null!=(E=T.param[S]).radio&&(e+=1===E.radio?" OR ":" AND ",u+=1===E.radio?" OR ":" AND ");var x="string"==typeof E.auto?E.auto.replace(/[\\](?![\\])/g,""):E.auto;e+=y+" "+this.selectboxItemSet[E.select-1]+" "+x,u+=b+" "+this.selectboxItemSet[E.select-1]+" "+E.auto}e+=")",d=!1}}if(e+=")",n&&(e=o+"("+h+" = NULL)",u=o+n+"_NULL_"),"()"!==e&&e!==o+"()"||(e=o+"ALL",u=o+"_ALL_",c=!0),!c&&this.options.groupbyFilterBoxFormatter){var _=a.D.getGlobalFunction(this.options.groupbyFilterBoxFormatter,this.scope_id);if("function"==typeof _){var I=[];if(u===o+n+"_NULL_")I.push({header:h,filter:[]});else for(g=0;g<t.length;g++){var T;m="regExp"===(T=t[g]).type,f="func"===T.type&&T.param;if(m||f){b=this._dataList.cellIdList[T.colIndex];var k=this.getHeaderValue(this.bodyToHeaderRelation[b])||b;if(m){var D={header:k,filter:[]},L=(v=this.dataList.getColData(b,this._dataList.filteredRowIndexArr),this.getUniqueValueOfArray(v)),W=[];for(S=0;S<L.length;S++){C=L[S];this.useFilterEmptyValueInfo[C]&&(C=this.filterEmptyStr),W.push(C)}var A=this.getCellInfo(b);D.filter.push({operator:"in",values:W,labels:A.itemsetObj||A.itemArr?this.changeItemValue("label",b,L.slice(0)):W}),I.push(D)}else if(f){for(D={header:k,filter:[]},S=0;S<T.param.length;S++){var E=T.param[S],M={};null!=E.radio&&(M.gate=1===E.radio?"or":"and"),M.operator=this.selectboxItemSet[E.select-1];x="string"==typeof E.auto?E.auto.replace(/[\\](?![\\])/g,""):E.auto;M.values=x;A=this.getCellInfo(b);M.labels=A.itemsetObj||A.itemArr?this.changeItemValue("label",b,[x])[0]:x,D.filter.push(M)}T.param.length>0&&I.push(D)}}}var q=_.call(this,I,i);null!=q&&!1!==q&&(e=q)}}if(!c&&!1===this.groupbyFilterBox_select.setValueNM(u))this.groupbyFilterBox_select.addItem(u,e),this.groupbyFilterBox_select.setValueNM(u),u===o+"_ALL_"?s={filterOption:[],customFilterStatusObj:"{}"}:(s={filterOption:t,customFilterStatusObj:JSON.stringify(this.customFilterStatusObj)},this.groupbyStatus.grouped&&this.groupbyStatus.filter?s.customFilterListFilterInfo=JSON.stringify(this.groupbyStatus.filter,(function(t,e){return"function"==typeof e||"object"===(0,l.Z)(e)&&e.constructor===RegExp?e.toString():e})):this.customFilterList&&this.customFilterList.customFilterListFilterInfo&&(s.customFilterListFilterInfo=JSON.stringify(this.customFilterList.customFilterListFilterInfo,(function(t,e){return"function"==typeof e||"object"===(0,l.Z)(e)&&e.constructor===RegExp?e.toString():e})))),this.groupbyStatus.groupbyOptions&&(s.groupbyOptions=this.groupbyStatus.groupbyOptions),
this.groupbyFilterBox_history.push(s);this.getElementById(this.id+"_groupbyFilterBox_apply").checked=!c}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype._getMouseColumnIndex=function(t){try{var e=t.colIndex,i=t.offsetX,o=t.offsetLeft,s=t.colSpan;if(i-o<(n=.3*this.colWidthList[e]>10?10:parseInt(.3*this.colWidthList[e],10))&&0!=e)e--;else for(var a=0;a<s;a++){var n,l=this.colWidthList[(e+a)%this.columnOrder.length];if((o+=l)-(n=.3*l>10?10:parseInt(.3*l,10))<i&&i<o+n){e+=a;break}}return e}catch(t){return r.w.printStackTrace(t,null,this),e}},p.prototype._useRole=function(){try{return!a.D.isMobile()}catch(t){r.w.printStackTrace(t,null,this)}},p.prototype.setAdaptive=function(){try{var t=this.options.adaptive,e=parseInt(this.options.adaptiveThreshold)||480;for(var i in this.hideThresholdObj){parseInt(this.hideThresholdObj[i])>=parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)?this.setColumnVisible(i,!1):this.setColumnVisible(i,!0)}"crosstab"==t&&(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10||(parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=e?this.addAdaptive():this.removeAdaptive()))}catch(t){r.w.printStackTrace(t)}},p.prototype.addAdaptive=function(){try{var t,e=this.options.adaptive;for(var i in"crosstab"==e&&(t=this.hasFooter?"w2grid_adaptive_crosstab w2grid_adaptive_crosstab_footer":"w2grid_adaptive_crosstab"),this.hideThresholdObj){parseInt(this.hideThresholdObj[i])>=parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)?this.setColumnVisible(i,!1):this.setColumnVisible(i,!0)}if(!this.hasClass(t)){this.oldOptions.visibleRowNum=this.options.visibleRowNum,this.options.visibleRowNum="all",this.adjustDraw(this.lastIndex),this.addClass(t),this.setAdaptiveGridBodyHeight(),this.setAdaptiveGridHeaderHeight(),this.hasSubtotal&&this.setAdaptiveGridSubtotalHeight();for(var o=this.defaultColCnt;o<this.hiddenList.length;o++)1==this.hiddenList[o]&&this.setAdaptiveColumnVisible(o,!1);this.event.hasEvent(this.id+"_body_tbody","onscroll")||this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onscroll",this.event.bindAsEventListener(this,this.tbodyMoveXScroll))}if(this.options.adaptiveSlideHeader){var s=this.getElementById(this.id+"_head_table"),n=this.getElementById(this.id+"_body_tbody");this.slideHeadObj||(this.slideHeadObj={},this.slideHeadObj.render=s,this.slideHeadObj.headTableWidth=s.offsetWidth,this.slideHeadObj.hidden=!1),"absolute"!=this.slideHeadObj.render.style.position?n.scrollWidth>n.clientWidth+this.slideHeadObj.headTableWidth&&(this.slideHeadObj.render.style.position="absolute",this.options.adaptiveSlideHeaderOnScroll||($(this.slideHeadObj.render.firstChild).animate({width:"hide"}),this.slideHeadObj.hidden=!0)):n.scrollWidth==n.clientWidth&&(a.D.clearTimeout(this.id+"_adaptiveSlideHeader"),this.slideHeadObj.render.style.position="",this.slideHeadObj.render.firstChild.style.display="",this.slideHeadObj.hidden=!1)}}catch(t){r.w.printStackTrace(t)}},p.prototype.removeAdaptive=function(){try{var t;if("crosstab"==this.options.adaptive&&(t=this.hasFooter?"w2grid_adaptive_crosstab w2grid_adaptive_crosstab_footer":"w2grid_adaptive_crosstab"),this.options.adaptiveSlideHeader&&this.slideHeadObj&&(this.slideHeadObj.render.style.position="",this.slideHeadObj.render.firstChild.style.display="",this.slideHeadObj.hidden=!1),this.hasClass(t)){this.options.visibleRowNum=this.oldOptions.visibleRowNum;for(var e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!0);if(this.removeClass(t),this.removeAdaptiveGridBodyHeight(),this.removeAdaptiveGridHeaderHeight(),this.hasSubtotal&&this.removeAdaptiveGridSubtotalHeight(),""!=this.options.visibleRowNum){this.focusedCell=[],this.initializeDrawController(),this.dataRowList=[],this.drawedRowLength=0,this.lastDisplayedRow=-1;for(var i=this.getElementById(this.id+"_body_tbody");i.firstChild;)i.removeChild(i.firstChild)
;if(this.options.senseReader){for(e=0;e<this.adaptiveEmbeddedInputIdList.length;e++)delete this.dom[this.adaptiveEmbeddedInputIdList[e]];this.adaptiveEmbeddedInputIdList=[]}this.drawDataTable(0)}this.event.removeEvent(this.id+"_body_tbody","onscroll")}}catch(t){r.w.printStackTrace(t)}},p.prototype.doAdaptive=function(){try{if(""!=this.options.adaptive)return;this.options.adaptive="crosstab",this.options.adaptiveThreshold="9999999",this.setAdaptive(),this.adaptiveDoneBy="doAdaptive"}catch(t){r.w.printStackTrace(t)}},p.prototype.undoAdaptive=function(){try{if("doAdaptive"!=this.adaptiveDoneBy)return;this.options.adaptive="crosstab",this.options.adaptiveThreshold="1",this.setAdaptive(),this.options.adaptive="",this.options.adaptiveThreshold="",this.adaptiveDoneBy=""}catch(t){r.w.printStackTrace(t)}},p.prototype.checkRefreshAdaptive=function(){try{var t=!1;if(!(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var e=WebSquare.BootLoader.fullViewed||!1,i=a.D.fullViewed||!1;if(!e&&!i&&this.checkAdaptiveGridType()&&(""!=this.options.adaptive||0!=Object.keys(this.hideThresholdObj).length)){var o=this.options.adaptive,n=parseInt(this.options.adaptiveThreshold)||480;"crosstab"==o&&parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=n&&(t=!0)}}return t}catch(t){r.w.printStackTrace(t)}},p.prototype.refreshAdaptive=function(t){try{if(!0===this.checkRefreshAdaptive())if(t&&!0===t.simple){for(var e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!0);for(var i in this.hasSubtotal&&this.removeAdaptiveGridSubtotalHeight(),this.hideThresholdObj){parseInt(this.hideThresholdObj[i])>=parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)?this.setColumnVisible(i,!1):this.setColumnVisible(i,!0)}this.hasSubtotal&&this.setAdaptiveGridSubtotalHeight();for(e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!1)}else this.removeAdaptive(),this.addAdaptive()}catch(t){r.w.printStackTrace(t)}};var g=function(){};g.prototype.setTableLayout=function(){try{this.initializeHead(),this.initializeFooter(),this.setDataLayerPosition(),this.arrangeOverflowXScroll(),this.handlerResize_drawInitializer(),this.setTrRowTable(),this.setTrSubtotalRowTable(),this.initialColWidthList=this.colWidthList.slice(),this.initialGridWidth=this.gridWidth,this._setAutoFit(),this.realRowDataLength=this.oneRowDataLength+this.defaultColCnt,this.associateHeaderBody(),this.options.columnMove&&this.createBlockedHeaderInfo(),this.lastDisplayedRow=-1;for(var t=0;t<this.oneRowDataLength;t++){var e=this.cellInfoHash2[this.tdIdList[t]],i=new WebSquare.uiplugin.cellInfo(e,this);"textarea"==i.options.inputType&&(this.isExistTextarea=!0),i.options.colMerge&&(this.isColMerge=!0,a.D.getBoolean(this.options.colMergeAnd)&&(this.isColMergeAnd=!0),i.options.upperColumn&&(this.upperToLowerColumnRelation[i.options.upperColumn]||(this.upperToLowerColumnRelation[i.options.upperColumn]=[]),this.upperToLowerColumnRelation[i.options.upperColumn].push(i.options.id))),null!=i.options.maxLength&&""!==i.options.maxLength&&(i.options.maxlength=i.options.maxLength),this.cellInfoHash[i.id]=i,this.cellIdList.push(i.id);var o=i.options.hideThreshold;void 0!==o&&(this.hideThresholdObj[i.id]=o)}this.drawFooter(),this.drawHeader();for(var s=0;s<this.thIdList.length;s++){var n=this.headerInfoHash2[this.thIdList[s]];if(n){var l=new WebSquare.uiplugin.headerInfo(n,this);this.headerInfoHash[l.id]=l,this.colMoveHeaderIndexMap[l.id]=s}}}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.setDataLayerPosition=function(){try{var t=this.getElementById(this.id+"_dataLayer");if(this.hasFooter){var e=this.getElementById(this.id+"_foot_table").offsetHeight;e=0==e?this.footerHeight:e,t.style.bottom=e+"px"}}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.arrangeOverflowXScroll=function(t){try{this.fixedWidth=0
;for(var e=this.getFixedColumnLastIndex(),i=0;i<e;i++)this.hiddenList[i]||(this.fixedWidth+=this.colWidthList[i]);this.fixedWidth=parseInt(this.fixedWidth,10)||0,this.fixedWidthRight=0;var o=this.getFixedRightColumnLastIndex(),s=this.colWidthList.length;for(i=s-1;i>=o;i--)this.hiddenList[i]||(this.fixedWidthRight+=this.colWidthList[i]);if(this.fixedWidthRight=parseInt(this.fixedWidthRight,10)||0,e>this.defaultColCnt||o<s)for(var a=this.getColumnCount(),n=this.data_td_list.length/a,l=0;l<n+1;l++){var h;if(e>this.defaultColCnt)(h=this.data_td_list[l*a+(e-this.defaultColCnt)])&&this.addClass(h,"w2grid_fixedColumn");if(o<s)(h=this.data_td_list[l*a+(o-this.defaultColCnt)])&&this.addClass(h,"w2grid_fixedRightColumn")}if(!0!==t){var d=this.getElementById(this.id+"_scrollX_div"),u=this.getElementById(this.id+"_scrollX_table"),c=0===d.offsetWidth?0:d.offsetWidth-u.offsetWidth,p=this.getElementById(this.id+"_scrollX_left"),g=this.getElementById(this.id+"_scroll_size"),m=this.getElementById(this.id+"_scrollX_fixedRight");p.style.width=this.fixedWidth+"px",g.style.width=this.gridWidth-this.fixedWidth-this.fixedWidthRight-c+"px",m.style.width=this.fixedWidthRight+"px"}}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.handlerResize_drawInitializer=function(){try{if(0==this.render.offsetWidth||0==this.render.offsetHeight)return;if(this.setOverflowY(),this.setOverflowX(),this.setIE6Fix(),this.options.headFiller){var t=this.getElementById(this.id+"_header_bg_td"),e=this.getElementById(this.id+"_dataLayer").offsetWidth-1,i=this.getElementById(this.id+"_head_table").offsetHeight,o=e,s=i;for(t.style.width=e+"px";t.offsetWidth!=o;)t.offsetWidth>o?e--:e++,t.style.width=e+"px";for(t.style.height=i+"px";t.offsetHeight!=s;)t.offsetHeight>s?i--:i++,t.style.height=i+"px"}if(this.options.groupbyZone){var a=this.getElementById(this.id+"_main_div"),n=this.groupbyZoneStatus.groupbyZoneRender?this.groupbyZoneStatus.groupbyZoneRender.offsetHeight:0;if(this.isIE6or7&&(a.style.height=a.offsetHeight-n),this.options.groupbyFilterBox){var l=this.getElementById(this.id+"_groupbyFilterBox_div"),h=this.getElementById(this.id+"_groupbyFilterBox_buttons");if(this.isIE6or7){a.style.height=a.offsetHeight-(this.scrollLayerWidthSize+l.offsetHeight)-3+"px",h.style.left=-h.offsetWidth;var d=this.scrollLayerWidthSize+l.offsetHeight+n,u=Math.ceil(d/this.oneRowScrollHeight),c=this.getElementById(this.id+"_scrollY_div");this.lastIndex>-1&&this.lastIndex>u&&c.offsetHeight<c.scrollHeight&&this.cutGridBottom(this.lastIndex-u)}else"bottom"===this.options.groupbyFilterBoxLocation&&(a.style.bottom=this.scrollLayerWidthSize+l.offsetHeight+"px",a.style.height="")}else this.isIE6or7&&this.cutGridBottom(this.lastIndex-Math.ceil(n/this.oneRowScrollHeight))}}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.setIE6Fix=function(){try{var t=this.options.fixPrint&&(a.D.isIE(9)||a.D.isIE(10)||s.v.browserCheck.ieAllVersion&&"11"==document.documentMode||a.D.isFF());if(this.isIE6or7||a.D.isOpera()||t){var e=this.getElementById(this.id+"_scrollX_div"),i=this.getElementById(this.id+"_scrollY_div"),o=this.getElementById(this.id+"_main_div"),n=this.render.offsetHeight-e.offsetHeight,l=this.render.offsetWidth-i.offsetWidth+2;n=n<0?0:n,l=l<0?0:l,o.style.height=n+"px",o.style.width=l+"px";var h,d=0;if(this.hasFooter&&(d=0==(d=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:d),""!==this.options.visibleRowNum){var u=this.getElementById(this.id+"_body_table");h=!this.defaultDataLayerHeight||u.offsetHeight>this.defaultDataLayerHeight?u.offsetHeight+d:this.defaultDataLayerHeight+d}else h=n-d-1;h=h<0?0:h;var c=this.getElementById(this.id+"_dataLayer");c.style.height=h+"px",this.dataLayerHeight=h;var p=this.getElementById(this.id+"_scrollX_right");p.style.width=p.parentNode.offsetWidth+"px",t&&(o.style.position="relative",o.style.bottom="",o.style.right="",c.style.position="relative",c.style.bottom="")}}catch(t){r.w.printStackTrace(t,null,this)}},
g.prototype._setOverflowXNative=function(t){if("native"===this.options.drawType){var e=document.getElementById(this.id+"_scrollX_div"),i=document.getElementById(this.id+"_dataLayer");if(!1===t||this.options.fixedColumn<=0&&this.options.fixedRightColumn<=0)return e.style.visibility="hidden",void(i.style.overflowX="auto");!0===t&&(e.style.visibility="visible",i.style.overflowX="hidden")}},g.prototype.setOverflowX=function(t){var e=!0;switch(void 0!==t?("hidden"!=t&&"auto"!=t&&"scroll"!=t&&(t="auto"),this.options.overflowX=t):e=!1,t=this.isMobile?"hidden":this.options.overflowX){case"auto":this.setOverflowXAuto();break;case"hidden":this.setOverflowXHidden();break;default:this.setOverflowXScroll()}this.isMobile&&this.setIScrollX(),e&&this.setIE6Fix()},g.prototype.setOverflowXAuto=function(){var t=this.getElementById(this.id+"_scrollX_div"),e=this.getElementById(this.id+"_scrollX_left"),i=this.getElementById(this.id+"_scrollX_right"),o=e.offsetWidth;if(this.options.fixedRightColumn){var s=this.getElementById(this.id+"_scrollX_fixedRight");s&&(o+=s.offsetWidth)}i.firstChild.offsetWidth>t.offsetWidth-o?this.setOverflowXScroll():this.setOverflowXHidden()},g.prototype.setOverflowXScroll=function(){try{var t=(l=this.getElementById(this.id+"_scrollX_div")).style.height;if(l.style.height=this.scrollLayerWidthSize+"px",this.options.scrollFocus){var e=this.getElementById(this.id+"_scrollX_right"),i=this.getElementById(this.id+"_scrollX_left");e.setAttribute("aria-hidden","true"),e.firstChild.offsetWidth>l.offsetWidth-i.offsetWidth?e.setAttribute("tabIndex","0"):e.setAttribute("tabIndex","-1")}var o=this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"===this.options.groupbyFilterBoxLocation;if(-1!==this.rowIndex&&"0px"===t&&!o&&"native"!==this.options.drawType)if(""!==this.options.visibleRowNum){var s=parseInt(this.render.style.height,10);this.setSize(null,s+this.scrollWidthSize)}else{this.dataLayerHeight-=this.scrollWidthSize;var a=this.dataRowList[(this.lastIndex+1)*this.oneRowLength-1];a&&a.offsetTop+a.offsetHeight>this.dataLayerHeight&&(this._setRowDisplay(this.lastIndex,"none"),this.lastIndex=this.lastIndex-1,this.maxRowLength=this.maxRowLength-1,this.lastDisplayedRow=this.lastIndex,this.lastTopRowIndex=null,this.setScrollYHeight({noDraw:!0}),this.setOverflowYAuto())}if(!this.isIE6or7){var n=this.getElementById(this.id+"_main_div"),l=this.getElementById(this.id+"_scrollX_div"),h=parseInt(l.style.height,10);if(n.style.bottom=h+"px",this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"===this.options.groupbyFilterBoxLocation){var d=this.getElementById(this.id+"_groupbyFilterBox_div");n.style.bottom=this.scrollLayerWidthSize+d.offsetHeight+"px"}}if(o)(d=this.getElementById(this.id+"_groupbyFilterBox_div")).style.bottom=this.scrollLayerWidthSize+"px"}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.setOverflowXHidden=function(){try{var t=this.getElementById(this.id+"_scrollX_div"),e=t.style.height;if(t.style.height="0px",this.options.scrollFocus){var i=this.getElementById(this.id+"_scrollX_right"),o=this.getElementById(this.id+"_scrollX_left");i.setAttribute("aria-hidden","true"),i.firstChild.offsetWidth>t.offsetWidth-o.offsetWidth?i.setAttribute("tabIndex","0"):i.setAttribute("tabIndex","-1")}"0px"!=e&&this.handleScrollX();var s=this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"===this.options.groupbyFilterBoxLocation;if(-1!==this.rowIndex&&"0px"!==e&&!s&&"native"!==this.options.drawType)if(""!==this.options.visibleRowNum){var a=parseInt(this.render.style.height,10);this.setSize(null,a-this.scrollWidthSize)}else{this.dataLayerHeight+=this.scrollWidthSize,this.maxRowLength=this.maxRowLength+1;var n=this.getDataLength();this.maxRowLength>=n&&(this.getElementById(this.id+"_size_y").style.height="0px"),this.setOverflowYAuto(),this.drawData(this.rowIndex,this.lastIndex);for(var l=0;l<this.tdIdList.length;l++){var h=this.cellInfoHash[this.tdIdList[l]];if(h.dataComp){
var d=this.modelControl.getDataComp(h.dataComp);"linkedDataList"===d.initializeType&&d.syncWithParent()}}this.lastTopRowIndex=null}var u=this.getElementById(this.id+"_main_div");if(this.isIE6||(u.style.bottom="0px"),s)this.getElementById(this.id+"_groupbyFilterBox_div").style.bottom="0px"}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.setOverflowY=function(t){if("native"!==this.options.drawType){var e=!0;switch(void 0!==t?("hidden"!=t&&"auto"!=t&&"scroll"!=t&&(t="auto"),this.options.overflowY=t):e=!1,t=this.isMobile?"hidden":this.options.overflowY){case"auto":this.setOverflowYAuto();break;case"hidden":this.setOverflowYHidden();break;default:this.setOverflowYScroll()}this.isMobile&&this.setIScrollY(),e&&this.setIE6Fix()}},g.prototype.setOverflowYAuto=function(){if("native"!==this.options.drawType){var t=this.getElementById(this.id+"_scrollY_div");t.offsetHeight<t.scrollHeight?this.setOverflowYScroll():this.setOverflowYHidden()}},g.prototype.setOverflowYScroll=function(){var t=this.getElementById(this.id+"_scrollY_div"),e=this.getElementById(this.id+"_scrollX_div"),i=this.getElementById(this.id+"_main_div"),o=parseInt(t.style.width,10);if(t.style.width=this.scrollLayerWidthSize+"px",t.style.overflowY="scroll",this.isIE6){var s=this.render.offsetWidth-this.scrollWidthSize;e.style.width=(s>0?s:0)+"px",t.style.height=this.render.offsetHeight+"px"}else i.style.right=this.scrollWidthSize-1+"px",e.style.right=this.scrollWidthSize+"px";this.options.groupbyZone&&this.options.groupbyFilterBox&&(this.getElementById(this.id+"_groupbyFilterBox_div").style.right=i.style.right);0==o&&this._setAutoFit(),this.options.scrollFocus&&(t.setAttribute("aria-hidden","true"),t.offsetHeight<t.scrollHeight?t.setAttribute("tabIndex","0"):t.setAttribute("tabIndex","-1"))},g.prototype.setOverflowYHidden=function(){var t=this.getElementById(this.id+"_scrollY_div"),e=parseInt(t.style.width,10);t.style.width="0px",t.style.overflowY="hidden";var i=this.getElementById(this.id+"_main_div");this.isIE6||(i.style.right="0px",this.getElementById(this.id+"_scrollX_div").style.right="0px");this.options.groupbyZone&&this.options.groupbyFilterBox&&(this.getElementById(this.id+"_groupbyFilterBox_div").style.right=i.style.right);0!=e&&this._setAutoFit(),this.options.scrollFocus&&(t.setAttribute("aria-hidden","true"),t.offsetHeight<t.scrollHeight?t.setAttribute("tabIndex","0"):t.setAttribute("tabIndex","-1"))},g.prototype.setTrRowTable=function(){try{this.tempDiv=document.createElement("div"),this.tempDiv.style.width="0px",this.tempDiv.style.height="0px",this.tempDiv.style.overflow="hidden",this.tempDiv.innerHTML="<table id='tempTable' style='table-layout:fixed; border-collapse:collapse; border-spacing:0px;'>"+this.getTableHtml(this.htmlInfo.body,"tbody","td",this.options.bodyTdClass)+"</table>",this.tempTr=this.tempDiv.getElementsByTagName("table")[0];var t=this.tempTr.getElementsByTagName("td");this.aria_labelledby=[];for(var e=0;e<t.length;e++)this.options.autoScope&&0==e&&t[e].setAttribute("scope","row"),this.aria_labelledby[e]=t[e].getAttribute("aria-labelledby"),t[e].innerHTML="";this.tempDiv.id=this.id,this.tempDiv.className=this.options.className+" w2grid",this.render.parentNode.appendChild(this.tempDiv);var i,o=this.tempDiv.getElementsByTagName("tbody")[0],s=o.getElementsByTagName("tr")[0];0==(i=s?s.offsetHeight:o.offsetHeight)?(i=-1!=this.options.defaultCellHeight?this.options.defaultCellHeight:20,this._visibleRowNumFixResetFlag=!0):this._visibleRowNumFixResetFlag=!1,this.oneRowHeight=i+(a.D.isIE(6)||a.D.isIE(7)?1:0),this.options.scrollRowHeight&&(this.oneRowScrollHeight=this.oneRowHeight),this.render.parentNode.removeChild(this.tempDiv)}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.setTrSubtotalRowTable=function(){try{for(var t in this.subtotalTableList={},this.subtotalStrList){var e=document.createElement("div");e.style.width="0px",e.style.height="0px",e.style.overflow="hidden",
this.subtotalClassList&&this.subtotalStrList[t].attr?e.innerHTML="<table id='tempTable' style='width:100%;table-layout:fixed; border-collapse:collapse; border-spacing:0px;'>"+this.getTableHtml(this.subtotalStrList[t],"tbody","td",this.subtotalStrList[t].attr.subtotalClass)+"</table>":e.innerHTML="<table id='tempTable' style='width:100%;table-layout:fixed; border-collapse:collapse; border-spacing:0px;'>"+this.getTableHtml(this.subtotalStrList[t],"tbody","td",this.options.subtotalTdClass)+"</table>";for(var i=e.getElementsByTagName("table")[0],o=i.getElementsByTagName("td"),s=0;s<o.length;s++){var a=o[s],n=a.getAttribute("width");n&&(a.removeAttribute("width"),a.setAttribute("or_wd",n))}this.subtotalTableList[t]=i}}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype._setAutoFit=function(t){if(0!=this.render.offsetWidth&&0!=this.render.offsetHeight){this.autofitDone=!0;var e=(t=t||{}).type?t.type:this.options.autoFit;"none"!==e&&e||(e="clear");var i=t.exceptCol,o=t.exceptWidth||0,s=this.options.autoFitFixYScroll?this.scrollLayerWidthSize:parseInt(this.getElementById(this.id+"_scrollY_div").style.width,10),r=this.render.clientWidth;a.D.isIEAllVersion()&&(r=this.render.clientWidth||parseInt(this.render.style.width,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"width"),10)),this.autofit_clientWidth=r;for(var n=0,l=this.colWidthList.length-1;l>=0;l--)if(0==this.hiddenList[l]){n=l;break}if("selectedColumn"==e&&!this.autofitColumn){if(this.gridWidth>=r)return;this.autofitColumn=!0;var h=this.defaultColCnt+t.colIndex;this.gridWidth-=this.colWidthList[h],this.autofitColumnIndexArr.push(h),this.colWidthList[h]="*",this.autofitColumnWidthArr[h]="*"}if(this.autofitColumn){var d=r,u=this.autofitColumnIndexArr.slice();s>0&&(d-=s);for(l=u.length-1;l>=0;l--){var c=u[l];1!=this.hiddenList[c]&&c!==i||u.splice(l,1)}var p=0,g=[];for(l=0;l<this.colWidthList.length;l++)if(1!=this.hiddenList[l])if(l===i)this._setColumnWidth(l,o),d-=o;else if(l<this.autofitColumnWidthArr.length&&this.autofitColumnWidthArr[l]){var m=this.autofitColumnWidthArr[l].substring(0,this.autofitColumnWidthArr[l].indexOf("*"));m.length>0?g.push(parseInt(m,10)):0==m.length&&g.push(1)}else d-=this.colWidthList[l];var f=function(t){if(!t.length)return 0;for(var e,i=t.length-1,o=t[i];i;)for(var s=t[--i];e=s%o;s=o,o=e);return o}(g);for(l=0;l<g.length;l++)g[l]=g[l]/f,p+=g[l];var b=Math.floor(d/p),y=d-b*p;for(l=0;l<u.length;l++){var v=this.options.autoFitMinWidth||0,w=b*g[l];g[l]=Math.max(w,v)}if(y>0)if(1==u.length)g=[d];else{var S=g.slice();for(l=y;l>0;l--){for(var C={},x=0;x<g.length;x++)if(1!=this.hiddenList[u[x]]){var _=Math.abs((S[x]-(g[x]+1))*(this.gridWidth/S[x]));(null==C.distortion||C.distortion>_)&&(C.distortion=_,C.index=x)}g[C.index]++}}for(var I=0;I<g.length;I++)this._setColumnWidth(u[I],g[I])}if("lastColumn"==e){this.autoFitGridWidth||(this.autoFitGridWidth=this.gridWidth,this.orgLastWidth=this.colWidthList[n],this.orgLastVisibleCol=n),"number"==typeof i&&i!=n&&(this.autoFitGridWidth+=o-this.colWidthList[i],this._setColumnWidth(i,o));var T=r-s-this.gridWidth+this.colWidthList[n];T>this.orgLastWidth?this._setColumnWidth(n,T):this._setColumnWidth(n,this.orgLastWidth)}else if("allColumn"==e){if(!this.autofitColumn){var k=this.autoFitColWidthList||this.colWidthList,D=r-s,L={};if(this.options.keepDefaultColumnWidth)for(l=0;l<this.defaultColCnt;l++)L[l]=!0;for(l=this.defaultColCnt;l<k.length;l++)!1===this.isColumnResizable(l)&&(this.hiddenList[l]||(L[l]=!0));v=parseInt(t.minWidth?t.minWidth:this.options.autoFitMinWidth,10);for(var W in!isNaN(v)&&v>D&&(D=v),D-=o,L)D-=this.colWidthList[W];var A=0;for(l=0;l<k.length;l++)A+=this.hiddenList[l]||l===i||L[l]?0:k[l];var E=0,M=A?D/A:0,q=[];if(M){for(l=0;l<k.length;l++)if(l==i)this.colWidthList[l]=o;else if(L[l]);else{q[l]=M*k[l];var R=Math.round(q[l]);this.colWidthList[l]=R,E+=this.hiddenList[l]?0:R}var N=D-E,F=N>0?1:-1;for(l=0;l<N*F;l++){var O={};for(x=0;x<k.length;x++)if(!this.hiddenList[x]&&x!=i&&!L[x]){
_=Math.abs(q[x]-(this.colWidthList[x]+F))*(E/this.colWidthList[x]);(null==O.value||O.value>_)&&(O.value=_,O.index=x)}this.colWidthList[O.index]+=F,E+=F}if(this.hiddenList[0]&&a.D.isIE(8))for(l=0;l<this.colWidthList.length;l++)if(!this.hiddenList[l]){this.colWidthList[l]=this.colWidthList[l]-2;break}}for(var W in this.autoFitColWidthList||(this.autoFitColWidthList=this.colWidthList.slice(0)),this.gridWidth=E+o,L)this.gridWidth+=this.colWidthList[W];this.arrangeOverflowXScroll();var B="";this.options.autoFitMinWidth||(B="hidden"),this.setOverflowX(B),this.scrollXPreventEndEdit=!0,this.handleScrollX(),this.scrollXPreventEndEdit=!1,this.handlerResize_drawInitializer()}for(l=0;l<this.oneRowDataLength;l++){var V=this.getCellInfo(l);"text"!=V.options.inputType&&"secret"!=V.options.inputType&&"calendar"!=V.options.inputType||!V.options.embeddedInput||!this.options.autoResizeEmbeddedInput&&"calendar"!=V.options.inputType||this.hiddenList[l]||(this.embeddedWidthObj[l]&&(this.embeddedWidthObj[l].isChanged=!0),this.drawColumnData(l))}}else"clear"==e&&"number"==typeof i&&(this.autoFitGridWidth||(this.autoFitGridWidth=this.gridWidth),this.autoFitGridWidth+=o-this.colWidthList[i],this._setColumnWidth(i,o))}},g.prototype.setAutoFit=function(t){try{t&&(this.options.autoFit=t.type),this._setAutoFit(t)}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.clearAutoFit=function(t){try{this.options.autoFit="",-1===this.initialColWidthList.indexOf("*")&&(this.autoFitColWidthList=null,this.gridWidth=this.initialGridWidth,this.colWidthList=this.initialColWidthList.slice(),this.arrangeOverflowXScroll(),this.setOverflowX("auto"),this.handleScrollX())}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.autoFitFunc=function(){this.autofit_clientWidth===this.render.clientWidth?s.v.clearTimer(this.id+"_autofit"):s.v.setTimer(this._setAutoFit,{key:this.id+"_autofit",caller:this,delay:100})},g.prototype.setIScrollX=function(){try{var t=this.getElementById(this.id+"_iScrollX");if(!t)return;var e=this.getElementById(this.id+"_scrollX_right");if(e.offsetWidth>=e.firstChild.offsetWidth)return void(t.style.visibility="hidden");var i=this.getElementById(this.id+"_dataLayer"),o=parseInt(this.getElementById(this.id+"_scrollX_left").style.width,10),s=e.firstChild.offsetWidth-e.offsetWidth,a=parseInt(e.offsetWidth*e.offsetWidth/e.firstChild.offsetWidth,10);t.style.width=(a<30?30:a)+"px",t.style.left=o+e.scrollLeft/s*(i.offsetWidth-o-t.offsetWidth)+"px",t.style.visibility=""}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.setIScrollY=function(){try{var t=this.getElementById(this.id+"_iScrollY");if(!t)return;var e=this.getDataLength(),i=this.rowIndex,o=this.getElementById(this.id+"_size_y").parentNode.offsetHeight;if(0==o&&(o=parseInt(this.getStyleValue("height"))),-1==i||0==i&&i+this.lastIndex+1==e){var s=!this.hasSubtotal;if(this.hasSubtotal&&this.drawedSubtotal.length>0){var a=this.drawedSubtotal[this.drawedSubtotal.length-1];if(a.rowIndex==e-1)"none"!=a[a.length-1].style.display&&(s=!0)}if(s)return void(t.style.visibility="hidden")}var n=this.getElementById(this.id+"_scrollY_div"),l=n.firstChild.offsetHeight,h=this.getElementById(this.id+"_dataLayer"),d=l-h.offsetHeight,u=parseInt(h.offsetHeight*h.offsetHeight/l,10);t.style.height=(u<30?30:u)+"px",t.style.top=n.scrollTop/d*(h.offsetHeight-t.offsetHeight)+"px",t.style.visibility=""}catch(t){r.w.printStackTrace(t,null,this)}},g.prototype.createBlockedHeaderInfo=function(){try{this.columnBlock={info:{},hash:{}};for(var t=[],e=this.getColCnt(),i=0;i<e;i++)t.push(1);for(var o in this.struct){var s;if("subtotalArr"===o)s=this.struct[o][0].rowArr;else{if(!this.struct[o]||!this.struct[o].rowArr)continue;s=this.struct[o].rowArr}for(var a=0;a<s.length;a++)for(var n=0,l=0;l<s[a].length;l++){var h=parseInt(s[a][l].colSpan,10)||1;for(i=1;i<h;i++)t[n+i]=0;n+=h}}var d=0;for(i=0;i<t.length;i++){var u=t[i];1===u?(this.columnBlock.info[i]=[i],this.columnBlock.hash[i]=i,d=i):0===u&&(this.columnBlock.info[d].push(i),
this.columnBlock.hash[i]=d)}}catch(t){r.w.printStackTrace(t,null,this)}};var m=function(){};m.prototype.initializeEvent=function(){try{if(this.otherClickEvent(),this.checkResize(),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),a.D.isIEAllVersion()){if(a.D.isIEAllVersion()){if(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.preventCopy||this.editedCell||"native"===this.options.copyType||u.B.preventDefault(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){this.options.preventCopy||this.editedCell||"native"===this.options.copyType||u.B.preventDefault(t)}))),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){this.options.preventPaste&&!this.editedCell&&"native"!==this.options.copyType&&u.B.preventDefault(t)}))),!0===this.options.noSelect)document.getElementById(this.id+"_main_div").onselectstart=function(t){if(a.D.isIEAllVersion()&&t&&t.srcElement){var e=t.srcElement;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName)return!0}return!1};else!0===this.options.preventCopy&&(this.render.onselectstart=function(){return!1})}}else s.v.browserCheck.safari?(this.event.addListener(WebSquare.getBody().render,"onbeforecopy",this.event.bindAsEventListener(this,this.handleBeforeCopyEvent)),this.event.addListener(WebSquare.getBody().render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent)),this.event.addListener(WebSquare.getBody().render,"onbeforecut",this.event.bindAsEventListener(this,this.handleBeforeCutEvent)),this.event.addListener(WebSquare.getBody().render,"oncut",this.event.bindAsEventListener(this,this.handleCutEvent)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent))):s.v.browserCheck.chrome||(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent)),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,this.handleCutEvent)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent)));this.isMobile||(this.event.addListener(this.getElementById(this.id+"_head_table"),"onmouseover",this.event.bindAsEventListener(this,this.gridDataLayerOut)),this.event.addListener(this.getElementById(this.id+"_scrollX_div"),"onmouseover",this.event.bindAsEventListener(this,this.gridDataLayerOut)),this.event.addListener(this.getElementById(this.id+"_scrollY_div"),"onmouseover",this.event.bindAsEventListener(this,this.gridDataLayerOut)),this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmouseover",this.event.bindAsEventListener(this,this.gridOver)),this.hasFooter&&this.event.addListener(this.getElementById(this.id+"_foot_table"),"onmouseover",this.event.bindAsEventListener(this,this.gridOver)));var t=this.isHammerEnabled();if(this.event.addListener(this.getElementById(this.id+"_dataLayer"),"oncontextmenu",this.event.bindAsEventListener(this,this.clickRightButtonCell)),t||this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.gridOut)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyDownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyUpEvent)),a.D.isOpera()&&this.event.addListener(this.render,"onkeypress",(function(t){9!=t.keyCode&&27!=t.keyCode||u.B.preventDefault(t)})),this.options.dataDragDrop||this.options.dataDragDropSelf)if(1==this.isMobile){if(t){var e=Promise.resolve();"undefined"!=typeof Hammer&&null!=Hammer||(e=inquires("externalJS/hammer.min.js"));var i=this.uuid;e.then((function(t,e){var o=WebSquare.idCache[i];o._manager=new Hammer.Manager(o.getElementById(o.id+"_dataLayer")),
o._manager.add(new Hammer.Press({time:o.options.hammerPressTime})),o._manager.on("press",o.event.bindAsEventListener(o,(function(t){o.handleDragEvent(t)}))),o._bindPressEvent=!0}))}}else this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleDragEvent)),this._bindDrag=!0;else this.options.dataDragDrop||this.options.dataDragDropSelf||!this.options.dataDragSelect||this.isMobile||this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousedown",this.event.bindAsEventListener(this,this.handleDragSelectEvent));if(s.v.setTimer((function(){this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){var e=WebSquare.getBody().getLayerListener();if(e.layers[this.id]){for(var i=e.layers[this.id].component,o={};i.parentControl;)for(var s in i=i.parentControl,e.useOtherComponentId)e.useOtherComponentId[s]==i.id&&(o[s]=!0);WebSquare.getBody().getLayerListener().hideAll(o)}this.parentControl&&this.parentControl.options&&("gridItemTable"==this.parentControl.options.pluginName||"gridViewItemTable"==this.parentControl.options.pluginName)||u.B.stopPropagation(t)})))}),{key:this.id+"initializeEvent",caller:this,delay:100}),this.isMobile?(this.iScroll={},this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTouchEnd))):window.navigator.msPointerEnabled&&-1!=window.navigator.userAgent.toLowerCase().indexOf("touch")?(this.iScroll={},this.render.style.touchAction="none",this.event.addListener(this.render,"onMSPointerDown",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"onMSPointerMove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"onMSPointerUp",this.event.bindAsEventListener(this,this.handleTouchEnd))):this.options.senseReader?(this.options.useStartEndDiv&&(this.event.addListener(this.getElementById(this.id+"_gridstart_div"),"onfocus",this.event.bindAsEventListener(this,this.handleStartDivFocus)),this.event.addListener(this.getElementById(this.id+"_gridstart_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleStartDivKeyDown)),this.event.addListener(this.getElementById(this.id+"_gridend_div"),"onfocus",this.event.bindAsEventListener(this,this.handleEndDivFocus)),this.event.addListener(this.getElementById(this.id+"_gridend_div"),"onkeyup",this.event.bindAsEventListener(this,this.handleEndDivKeyUp))),this.options.scrollFocus?this.event.addListener(this.getElementById(this.id+"_scrollY_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleScrollDivKeyDown)):this.options.useStartEndDiv&&this.event.addListener(this.getElementById(this.id+"_gridend_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleEndDivKeyDown))):this.options.scrollFocus&&this.event.addListener(this.getElementById(this.id+"_scrollY_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleScrollDivKeyDown)),t&&!this._bindPressEvent)try{e=Promise.resolve();"undefined"!=typeof Hammer&&null!=Hammer||(e=inquires("externalJS/hammer.min.js"));i=this.uuid;e.then((function(t,e){var o=WebSquare.idCache[i];o._manager=new Hammer.Manager(o.render),o._manager.add(new Hammer.Press({time:o.options.hammerPressTime})),o._manager.on("press",o.event.bindAsEventListener(o,(function(t){if(!o._bindPressEvent){for(var e=u.B.getTarget(t),i=-1;e&&"BODY"!=e.tagName;){if("TD"==e.tagName&&o.hasClass(e,o.options.bodyTdClass)){i=o.getElemRowIndex(e);break}e=e.parentNode}o.removeFocusedCell(),o._dataList.setRowPosition(i),o.handleDblClickEvent(t),u.B.fireEvent(o,"ondblclick",t)}})))}))}catch(t){r.w.printStackTrace(t,null,this)}if("native"===this.options.drawType){var o=document.getElementById(this.id+"_dataLayer");i=this.uuid
;o&&(o.onscroll=function(){var t=WebSquare.idCache[i];t._endEdit();var e=document.getElementById(t.id+"_dataLayer"),o=e.scrollTop,s=e.offsetHeight;if(a.D.isIEAllVersion())for(var r=document.getElementById(t.id+"_head_table").getElementsByTagName("th"),n=o+"px",l=0;l<r.length;l++){var h=r[l];"relative"!=h.style.position&&(h.style.position="relative"),h.style.top=n}s+o>=e.scrollHeight&&u.B.fireEvent(t,"onscrollend")})}this.initializeLayoutEvents(),n.s.addCheckResize(this.uuid,"checkResize")}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.handleStartDivFocus=function(t){(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0,this.applyFocusedCellOut(),this.focusedCell=[],"true"!==this.options.keepScrollForSenseReader)&&(this.addGridScroll(0-this.rowIndex),0!=this.getElementById(this.id+"_scrollY_div").scrollTop&&this.addGridScroll(0-this.rowIndex))},m.prototype.handleEndDivFocus=function(t){this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0,this.applyFocusedCellOut(),this.focusedCell=[]},m.prototype.handleScrollDivKeyDown=function(t){if(t.shiftKey&&9==t.keyCode){for(var e=this.getRowCount()-1,i=this.getRightMostFocusableColIndex(e);e>=0&&null==i;)e-=1,i=this.getRightMostFocusableColIndex(e);if(null!==i){var o=this.getCellInfo(i);if("radio"===o.options.inputType){var s=0,r=this.getCheckedIndex(o.colID)[0];r>0&&(s=r),this._setFocusedCell(s,i,!1,{tabDirection:"left"}),u.B.stopEvent(t)}}}else switch(t.keyCode){case 38:case 40:case 9:u.B.stopPropagation(t)}},m.prototype.handleStartDivKeyDown=function(t){if(!t.shiftKey&&9==t.keyCode){for(var e=0,i=this.getRowCount()-1,o=this.getLeftMostFocusableColIndex(e);e<i&&null==o;)e+=1,o=this.getRightMostFocusableColIndex(e);var s=this.getCellInfo(o);if("radio"===s.options.inputType){var r=0,a=this.getCheckedIndex(s.colID)[0];a>0&&(r=a),this._setFocusedCell(r,o,!1),u.B.stopEvent(t)}}},m.prototype.handleEndDivKeyDown=function(t){if(t.shiftKey&&9==t.keyCode){var e=this.getElementById(this.id+"_size_y").parentNode.offsetHeight,i=parseInt(this.getElementById(this.id+"_size_y").style.height,10);if(0==i)return;var o=i-e,s=this.getElementById(this.id+"_scrollY_div").scrollTop,r=this._getEpsilon();if(s<o&&(s=Math.min(Math.round(s)+r,o)),o!=s){for(var a=0,n=0;n<this.getRowCount();n++)a+=this.getHasSubtotalCount(n);this.addGridScroll(this.getRowCount()-this.rowIndex-this.lastIndex-1+a)}for(var l=this.getRowCount()-1,h=this.getRightMostFocusableColIndex(l);l>=0&&null==h;)l-=1,h=this.getRightMostFocusableColIndex(l);null!=h&&(this._setFocusedCell(l,h,!1,{tabDirection:"left"}),u.B.stopEvent(t))}},m.prototype.handleEndDivKeyUp=function(t){38==t.keyCode&&"all"!=this.options.visibleRowNum&&(this.getElementById(this.id+"_scrollY_div").scrollTop=0)},m.prototype.handleTdFocus=function(t){var e,i=u.B.getTarget(t),o=this.getLastFocusedCell();if("TD"==i.tagName&&o.focusedTd!=i&&!this.focusedByApi){var s,r,a,n,l,h,d=parseInt(i.getAttribute("tdIndex")),c=parseInt(d/this.realRowDataLength)+this.rowIndex,p=i.getAttribute("col_id");if(this.options.preventDuplicateFocusedCell&&"linear"===this.options.focusFlow&&(e=null!=this.editedCell)){var g=this.getCellInfo(this.editedCell.colID);s=g.editRowIndex,r=this._dataList.getColumnIndex(g.id),a=this.getColumnIndex(g.id),n=this.getRealRowIndex(s),l=this._dataList.dataArr[n*this._dataList.getColumnCount()+r],h=g.comp&&g.comp.selectedIndex}if(this._setFocusedCell(c,p),e){var m=this._dataList.dataArr[n*this._dataList.getColumnCount()+r];if(0===l&&(l="0"),0===m&&(m="0"),l!=m){var f={oldValue:l,newValue:m,rowIndex:s,colIndex:a};isNaN(h)||(f.oldSelectedIndex=h,f.newSelectedIndex=g&&g.comp&&g.comp.selectedIndex),u.B.fireEvent(this,"onviewchange",f)}}}this.focusedByApi=!1},m.prototype.handleDragSelectEvent=function(t){if(!this._bindDrag)for(var e=this.body_table.offsetHeight,i=this.event.getTargetIterator(t);i.next();)if(i.match(this.options.bodyTdClass,null,"td")){var o=this,s=i.getElement();return void WebSquare.dragdrop.gDragManager.activate(t,this.render,{
id:this.id+"_dragSelect",delay:15,handleStart:function(t){a.D.isIEAllVersion()&&(a.D.emptySelection(),u.B.preventDefault(t));var e,i,r,n,l,h,d=null!=o.editedCell;if(d&&(e=o.editedCell.editRowIndex,i=o._dataList.getColumnIndex(o.editedCell.id),r=o.getColumnIndex(o.editedCell.id),n=o._grid.getRealRowIndex(e),l=o._dataList.dataArr[n*o._dataList.getColumnCount()+i]),o.__setFocusedCell(t,s,{editMode:!1}),d&&l!=(h=o._dataList.dataArr[n*o._dataList.getColumnCount()+i])){var c={oldValue:l,newValue:h,rowIndex:e,colIndex:r};u.B.fireEvent(o,"onviewchange",c)}},handleUpdate:function(t,i,s,r,a){for(var n=null,l=null,h=o.event.getTargetIterator(a);h.next();){if(h.match("w2grid")){n=h.getElement().id;break}h.match(o.options.bodyTdClass,null,"td")&&(l=h.getElement())}var d=o.focusedCell[0];o.options.dataDragSelectAutoScroll&&d.focusedColIndex>-1&&o.dragSelectAutoScroll(u.B.getMouseY(a),e,u.B.getMouseX(a)),null!=n&&null!=l&&o.id==n&&d.focusedColIndex>-1&&(l.className.indexOf("_rowNum")>=0||l.className.indexOf("_rowStatus")>=0||o.__setFocusedCell({shiftKey:!0},l,{editMode:!1}))},handleFinish:function(){o.dragSelectAutoScrollFinish()}})}},m.prototype.handleDragEvent=function(t){if((!this.options.rowResize||!this.rowResizeStarted)&&(!this.isDrillDown||this.drillDownDragDrop)&&!this.editedCell&&(0!=this.options.dataDragDrop||0!=this.options.dataDragDropSelf))for(var e=this.event.getTargetIterator(t);e.next();)if(e.match(null,null,"td")){var i=e.getElement(),o=[],r=i.getAttribute("tdIndex");if(null==r)return;var n=this.rowIndex+parseInt(parseInt(r)/(this.oneRowDataLength+this.defaultColCnt));""==this.options.dragDisplayColumn?o.push(i.getAttribute("col_id")):o=this.options.dragDisplayColumn.split(",");for(var l=[],h=0;h<o.length;h++){var d;d=null==o[h]||null==o[h]?(n+1).toString():this._getCellDisplayData(n,o[h].wq_trim()),l.push(d)}if(l=l.join(","),this.isMobile){for(var c=u.B.getTarget(t);c&&"TD"!=c.tagName&&"TH"!=c.tagName&&"DIV"!=c.tagName;)c=c.parentNode;this.__setFocusedCell(t,c)}var p=this,g={id:this.id+"_drag",component:p,className:"w2grid_drag",contents:l,delay:15,applyMousePosition:!0,showNoData:!0,handleStart:function(t){u.B.fireEvent(p,"ondatadragstart",n)},onDragover:function(t,e,i,o,s,r,l){if(t&&e){var h=null;for(h=p.isMobile?new WebSquare.targetIterator(document.elementFromPoint(l.changedTouches[0].clientX,l.changedTouches[0].clientY)):p.event.getTargetIterator(l);h.next();)if(h.match("w2grid")||h.match("w2grid_tooltip")){if(h.match("w2grid_tooltip"))h.getElement().style.display="none",h=new WebSquare.targetIterator(document.elementFromPoint(u.B.getClientX(l),u.B.getClientY(l)));var d=a.D.getComponentById(h.getElement().id);p.id!=d.id&&u.B.fireEvent(d,"ondatadragover",p.id,n),h.stop()}}},onDrop:function(t,e,i,o,r,l,h){var d,c=null,g=null,m=null,f=null,b={},y=null,v=null;for(f=p.isMobile?new WebSquare.targetIterator(document.elementFromPoint(h.changedTouches[0].clientX,h.changedTouches[0].clientY)):p.event.getTargetIterator(h);f.next();){if(f.match(null,null,"body"))return;if(f.match("w2grid")){c=f.getElement().id;break}if(f.match("w2grid_tooltip"))f.getElement().style.display="none",f=new WebSquare.targetIterator(document.elementFromPoint(u.B.getClientX(h),u.B.getClientY(h)));if(null==m&&f.match(null,null,"td")){var w=f.getElement();m=parseInt(w.getAttribute("tdIndex"),10),"number"!=typeof(d=parseInt(w.getAttribute("colindex"),10))&&(d=void 0)}if(f.match("w2treeview")||f.match("w2treeview_virtual")||f.match("w2input")||f.match("w2textarea")){y=f.getElement().id;break}(f.match("w2treeview_node")||f.match("treeview_virtual_node"))&&(v=f.getElement().getAttribute("index"))}if((!p.options.dataDragDropSelf||p.id===c)&&(!p.options.dataDragDropOther||p.id!=c)&&(null!=c&&(g=(c=a.D.getComponentById(c)).getDataLength(),null!=m&&(g=c.rowIndex+parseInt(m/(c.oneRowDataLength+c.defaultColCnt)))),null!=y&&(y=a.D.getComponentById(y)),c||y)){var S,C;if(p.focusedCell.length>1&&c&&""==c.options.dragEndFunction&&""==p.options.dragStartFunction){N=[],
R=[];for(var x=0;x<p.focusedCell.length;x++){var _=p.focusedCell[x].focusedRowIndex;R.push(_)}R.sort((function(t,e){return t-e}));for(x=0;x<R.length;x++)for(var I=p.dataList.getRowArray(R[x]).data,T=0;T<I.length;T++)N.push(I[T])}else S=p.dataList.getRowArray(n).data;var k=t.getAttribute("col_id"),D=p.getColumnIndex(k);if(""!=p.options.dragStartFunction){var L=a.D.getGlobalFunction(p.options.dragStartFunction,p.scope_id);if("function"==typeof L)if(p.drillDownDragDrop){var W,A;p.getRowCount()<=g?(W=void 0,A=void 0):(W=p.getRealRowIndex(g),A=p.dataList.getRowData(g));var E=[O=p.getRealRowIndex(n)].concat(p.drilldown.getRecursiveRowIndex(O)),M=[];for(x=0;x<E.length;x++)M=M.concat(p.dataList.getRowData(p.getDisplayRowIndex(E[x])));if(!L.call(p,{parentRowIndex:W,parentRowData:A,beforeRemoveData:M,beforeRemoveRowIndex:E}))return}else{var q={fromColumnId:k,fromColumnIndex:D};null==C&&(C=p.dataList.getRowXML(n)),C=L.call(p,n,C,q)}}else if(c&&p.id!==c.id&&p.drillDownDragDrop){var R=[O=p.getRealRowIndex(n)].concat(p.drilldown.getRecursiveRowIndex(O)),N=[];for(x=0;x<R.length;x++)N=N.concat(p.dataList.getRowData(p.getDisplayRowIndex(R[x])))}if(c&&""!=c.options.dragEndFunction){var F=a.D.getGlobalFunction(c.options.dragEndFunction,c.scope_id);if("function"==typeof F)if(p.drillDownDragDrop){if(p.id==c.id){if(p.isDrillDown&&g!=n){var O=p.getRealRowIndex(n);if(p.getRowCount()<=g)p.drilldown.bodyDrop=!0,P=(j=p.getRealRowIndex(g-1))+p.drilldown.getRecursiveRowCount(j);else P=p.getRealRowIndex(g)+1;var B=[O].concat(p.drilldown.getRecursiveRowIndex(O)),V=p.drilldown.moveNode(O,P),H=[V.insertedRowIndex].concat(p.drilldown.getRecursiveRowIndex(V.insertedRowIndex));b={removedData:V.detachedData,removedRowIndex:B,insertedData:V.insertedData,insertedRowIndex:H,fromRowIndex:O,toRowIndex:H[0]},F.call(p,P,p.dataList.getRowXML(n),b)}}else if(c.drillDownDragDrop&&c.isDrillDown){O=p.getRealRowIndex(n);if(c.getRowCount()<=g)c.drilldown.bodyDrop=!0,P=(j=c.getRealRowIndex(g-1))+c.drilldown.getRecursiveRowCount(j);else P=c.getRealRowIndex(g);for(E=[O].concat(p.drilldown.getRecursiveRowIndex(O)),M=[],x=0;x<E.length;x++)M=M.concat(p.dataList.getRowData(p.getDisplayRowIndex(E[x])));C=p.dataList.getRowXML(n),b={removedData:E,removedRowIndex:B,fromRowIndex:O,toRowIndex:P},F.call(p,P,C,b)&&p._dataList.removeRow(O)}}else{q={fromColumnId:k,fromColumnIndex:D,toColumnId:"number"==typeof d?c.getColumnID(d):void 0,toColumnIndex:d};!0!==s.v.isXML(C)&&(C=p.dataList.getRowXML(n)),F.call(p,g,C,q)&&p.dataList.removeRow(n)}}else if(c){if(p.isDrillDown)if(p.id==c.id&&g!=n){if(p.drillDownDragDrop){O=p.getRealRowIndex(n);if(p.getRowCount()<=g)p.drilldown.bodyDrop=!0,P=(j=p.getRealRowIndex(g-1))+p.drilldown.getRecursiveRowCount(j);else P=p.getRealRowIndex(g)+1;return void p.drilldown.moveNode(O,P)}}else if(c.drillDownDragDrop&&c.isDrillDown){var P,j;O=p.getRealRowIndex(n);if(c.getRowCount()<=g)c.drilldown.bodyDrop=!0,P=(j=c.getRealRowIndex(g-1))+c.drilldown.getRecursiveRowCount(j);else P=c.getRealRowIndex(g)+1;for(M=[],x=(E=[O].concat(p.drilldown.getRecursiveRowIndex(O))).length-1;x>=0;x--)M=M.concat(p.dataList.getRowData(p.getDisplayRowIndex(E[x])));return c.drilldown.appendNode(P,M),void p.dataList.removeRow(O)}var z=c._dataList.getBroadcast();if(c._dataList.setBroadcast(!1),N&&R){var G=-1;if(p.id==c.id)for(x=0;x<R.length;x++)R[x]<g&&G++;G=Math.max(0,G);var U=c.dataList.getRealRowIndex(g),X={};if(p.options.dataDragDropStatus)for(var K=0;K<R.length;K++)X[K]=p.dataList.getRowStatus(R[K]);p.dataList.removeRows(R),void 0===U&&(U=g,G=0);var $=U-G;p.id==c.id&&($=Math.min($,p.getRowCount())),c._dataList.insertData($,N);var Y=0;if(p.options.dataDragDropStatus){for(var Z in X){var J=$+Y,Q=p._dataList.options.depthColumn?J:p._dataList.getRealRowIndex(J);p._dataList._setRowStatus(Q,X[Z]),Y++}p.setFocusedMultiCell($,0,$+Y-1,0)}p.id===c.id?p._moveCellVisible(R,$,{remove:!0,insert:!0}):(p._moveCellVisible(R,$,{remove:!0}),c._moveCellVisible(R,$,{insert:!0}))}else{
var tt=p.dataList.getRowStatus(n);if(p.dataList.removeRow(n),!0===s.v.isXML(C)?c.dataList.setRowXML(g,C):c.dataList.setRowData(g,S),p.options.dataDragDropStatus){Q=p._dataList.options.depthColumn?g:p._dataList.getRealRowIndex(g);p._dataList._setRowStatus(Q,tt),p.setFocusedCell(Q,0)}p.id===c.id?p._moveCellVisible([n],g,{remove:!0,insert:!0}):(p._moveCellVisible(R,$,{remove:!0}),c._moveCellVisible(R,$,{insert:!0}))}!1!==z&&c._dataList.setBroadcast(!0,!0,{gridView:[{keepTop:!0}]}),p.id!=c.id?(p.removeFocusedCell(),u.B.fireEvent(c,"ondatadrop",{fromId:p.id,fromRowIndex:n,toRowIndex:g})):u.B.fireEvent(c,"ondatadropself",{id:p.id,fromRowIndex:n,toRowIndex:g}),t.blur()}else if(y){var et;null!=v&&(et=y.tree.findNodeByIndex(v),v=parseInt(v,10)),u.B.fireEvent(y,"ondropfromgrid",{dataListId:p._dataList.id,fromRowIndex:n,value:this.contents,dropNode:et,toRowIndex:v}),p.removeFocusedCell(),t.blur()}}}};return this.isMobile&&(g.passive=!1,g.showGhostOnActivate=!0,g.ghostRightTop=!0,g.delay=0),void WebSquare.dragdrop.gDragManager.activate(t,i,g)}},m.prototype.dragSelectAutoScroll=function(t,e,i){try{this._dragSelectAutoScrollStartTime=new Date,a.D.setInterval((function(t,e,i){this._dragSelectAutoScroll(t,e,i)}),{key:this.id+"_dragSelectAutoScroll",caller:this,delay:this.options.dataDragSelectAutoScrollPeriod,args:[t,e,i]})}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype._dragSelectAutoScroll=function(t,e,i){try{var o=0,s=this.getRowCount(),a=null==this.lastTopRowIndex?s-this.lastIndex:this.lastTopRowIndex,n=WebSquare.style.getAbsoluteTop(this.render),l=n+e,h=1;if(t>l?o=t-l:n>t&&(o=n-t,h=-1),0!==o){var d=new Date-this._dragSelectAutoScrollStartTime,u=Math.floor(d/this.options.dataDragSelectAutoScrollLevel),c=Math.pow(2,u),p=Math.ceil(o*this.options.dataDragSelectAutoScrollDPI/100)*c*h,g=Math.max(Math.min(this.rowIndex+p,a-1),0);this.rowIndex!==g&&(this.scrollEvent=!1,this.checkScrollEnd=!0,this.rowIndex=g,this.fastDrawData(0,{scroll:!0}),this._dragSelectAutoScrollFlag=!0,document.getElementById(this.id+"_scrollY_div").scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(g))}for(var m=0,f=WebSquare.style.getAbsoluteLeft(this.render),b=f+this.render.offsetWidth,y=0;y<this.defaultColCnt;y++)f+=this.colWidthList[y];h=1;if(i>b?m=i-b:f>i&&(m=f-i,h=-1),0!==m){var v=this.focusedCell[0],w=this.getLastFocusedCell().focusedTd,S=parseInt(w.getAttribute("tdIndex")),C=parseInt(S/this.realRowDataLength),x=v.focusedRowIndex,_=v.focusedColIndex,I=C+this.rowIndex,T=S%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);T=h<0?Math.max(0,T-1):Math.min(this.oneRowDataLength-1,T+1),this._applyFocusedMultiCell(x,_,I,T),h<0?this.fixScrollLeftDirection():this.fixScrollRightDirection()}}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.dragSelectAutoScrollFinish=function(){try{if(a.D.clearInterval(this.id+"_dragSelectAutoScroll"),!0!==this._dragSelectAutoScrollFlag)return;this._dragSelectAutoScrollFlag=!1,this._dragSelectAutoScrollStartTime=0,s.v.setTimer((function(){var t=this.focusedCell[0],e=this.getLastFocusedCell().focusedTd,i=parseInt(e.getAttribute("tdIndex")),o=parseInt(i/this.realRowDataLength),s=t.focusedRowIndex,r=t.focusedColIndex,a=o+this.rowIndex,n=i%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),l=null==this.lastTopRowIndex?this.getRowCount()-this.lastIndex:this.lastTopRowIndex,h=s<=a?1:-1,d=Math.max(Math.min(this.rowIndex+h,l),0);this.drawData(d,0),this._applyFocusedMultiCell(s,r,a,n)}),{key:this.id+"__dragSelectAutoScroll_drawData",caller:this,delay:this.options.dataDragSelectAutoScrollDelay})}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.otherClickEvent=function(){try{this.isMobile?(this.event.addListener(document.documentElement,"ontouchstart",this.event.bindAsEventListener(this,this.handleClickEventDocument)),this.options.tooltipDisplay&&this.hideTooltip()):WebSquare.getBody().getLayerListener().addListener({component:this,event:{},otherClick:this.handleClickEventDocument,
frameClick:this.handleClickEventFrame})}catch(t){}},m.prototype.handleClickEventFrame=function(t){try{this.editedCell&&this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t,!1,!0]),this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip(),this.hideContextMenu(),this.groupbyFilterList&&this.hideGroupbyFilterList(),this.options.focusAutoRemove&&this.removeFocusedCell()}catch(t){r.w.printStackTrace(t)}},m.prototype.handleClickEventDocument=function(t){this.lastEvent=t,this.isHammerEnabled()&&this.hideTooltip(),this.event.isMe(t,this.render)||this.isMine(t)?this.handleClickEventDocumentAfter(t):(this.editedCell?this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t,!1,{otherClick:!0}],{beforeFunc:function(t,e){t.handleClickEventDocumentAfter(e);var i=WebSquare.getBody();i.layerListener.handleMouseDownEventDocument.call(i,e),i=null},beforeFuncArgs:[this,t]}):this.handleClickEventDocumentAfter(t),this.options.tooltipDisplay&&this.isMobile&&(this.hideTooltip(),t.srcElement.id==this.id+"_tooltip"&&u.B.stopEvent(t)))},m.prototype.handleClickEventDocumentAfter=function(t){if(this.contextMenu){var e=u.B.getTarget(t);e&&e.className.match("contextMenu")||this.hideContextMenu()}if(this.groupbyFilterList||this.customFilterScrollView){var i=this.event.getTargetIterator(t,this.render),o=!0;if(this.customFilterScrollView&&this.customFilterScrollView.render&&"none"==this.customFilterScrollView.render.style.display)o=!1;else for(;i.next();)if(i.match("gridHeaderTDDefault")||i.match("w2grid_groupbyZone_scrollView")||i.match("w2grid_groupbyZone_column")||i.match("w2grid_customFilter_scrollView")||i.match("w2grid_customFilter_column")){o=!1;break}o&&this.hideCustomFilterList()}if(this.options.groupbyZone&&this.options.groupbyFilterBox)for(i=this.event.getTargetIterator(t,this.render),o=!0;i.next();)if(i.match("w2grid_filterBox_select_tbody")||i.match("w2grid_filterBox_itemTable")){o=!1;break}if(this.groupbyFilterList){for(i=this.event.getTargetIterator(t,this.render),o=!0;i.next();)if(i.match("w2grid_groupbyZone_list")||i.match("w2grid_groupbyZone_column")||i.match("gridHeaderTDDefault")){o=!1;break}o&&this.hideGroupbyFilterList()}this.options.focusAutoRemove&&this.removeFocusedCell()},m.prototype.isMine=function(t){try{for(var e=u.B.getTarget(t);null!=e;){if(e.id&&e.id.indexOf&&e.id.indexOf("G_"+this.id+"__")>=0)return!0;e=e.parentNode}return!1}catch(t){r.w.printStackTrace(t)}},m.prototype.handleResize=function(){try{var t=this.render.offsetWidth,e=this.render.offsetHeight;if(t>0&&e>0)if(this.delayedDrawObj)this.resizeObj={width:t,height:e,scrollLeft:this.resizeObj.scrollLeft,scrollTop:this.resizeObj.scrollTop,clientWidth:this.resizeObj.clientWidth},this.setRedrawStatus("draw");else{var i=t-this.resizeObj.width,o=e-this.resizeObj.height,n=!1,l=this.hiddenCellObj.length>0;if(o>0){if(this.options.adaptive){var h=parseInt(this.options.adaptiveThreshold)||480;if(!(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)&&parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=h)return}n=!0;var d=this.getDataLength(),u=this.drawedRowLength;this.lastTopRowIndex=null,this.setDataTable(),this.setScrollYHeight();var c=this._getVisibleLastIndex(this.lastIndex+1);if(d<=0);else if(this.rowIndex+c-1+this.drawedRowLength-u<d){var p=d-this.drawedRowLength+1,g=this.rowIndex;this.rowIndex+1>p&&p>=-1&&(g=p>=0?p:0),l?(this.rowIndex=g,this._setCellVisibleRefresh()):this.drawData(g)}else{var m;if((g=d-this.drawedRowLength>0?d-this.drawedRowLength:0)==this.rowIndex)m=c-1;else this.scrollEvent=!1,this.checkScrollEnd=!0,this.getElementById(this.id+"_scrollY_div").scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(g);l?(this.rowIndex=g,this._setCellVisibleRefresh()):this.drawData(g,m)}}else if(o<0&&"all"!=this.options.visibleRowNum){n=!0;var f=this.getElementById(this.id+"_body_table");this.dataLayerHeight=f.parentNode.offsetHeight;var b=Number(this.options.visibleRowNum),y=this.getVisibleRowNum()
;l?this._setCellVisibleRefresh():(!isNaN(b)&&b>0&&b>=y||(this.lastTopRowIndex=null,this.cutGridBottom(this.lastIndex)),this.setScrollYHeight())}0!=i&&(n=!0,this.resizeObj.clientWidth=this.render.clientWidth,this.setScrollYHeight(),this.options.autoFit||this.setOverflowX(),this._handleScrollX(),this.options.autoFit&&this.autoFitFunc(),l&&this._setCellVisibleRefresh()),n&&this.groupbyZoneStatus.groupbyZoneRender&&this.resizeGroupbyZone()}else this.setRedrawStatus("stop");this.groupbyZoneStatus.groupbyZoneRender&&!this.adjustGroupbyZone&&(this.adjustGroupbyZone=!0,this.resizeGroupbyZone()),this.resizeObj={width:t,height:e,scrollLeft:this.resizeObj.scrollLeft,scrollTop:this.resizeObj.scrollTop,clientWidth:this.resizeObj.clientWidth},this.resizeObj.width>0&&this.resizeObj.height>0&&(this.resizeObj.scrollLeft=this.getElementById(this.id+"_scrollX_right").scrollLeft,this.resizeObj.scrollTop=this.getElementById(this.id+"_scrollY_div").scrollTop)}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.resizeGroupbyZone=function(){if(this.groupbyZoneStatus.groupbyZoneRender){var t=this.resizeObj.clientWidth-this.groupbyZoneStatus.groupbyZoneBorder,e=this.dom[this.id+"_scrollY_div"].offsetWidth;0!=e&&(t-=e),t+="px",this.groupbyZoneStatus.groupbyZoneRender.style.width!=t&&(this.groupbyZoneStatus.groupbyZoneRender.style.width=t)}},m.prototype.checkPercent=function(){var t=WebSquare.WebSquareparser.getAttribute(this.element,"style");if(t.indexOf("%")>0)for(var e=t.split(";"),i=0;i<t.length;i++)if(e[i].indexOf("%")&&e[i].indexOf("height")||e[i].indexOf("%")&&e[i].indexOf("width")){this.checkResize();break}},m.prototype.checkResize=function(){try{if(this.render){var t=!0;if(WebSquare.getBody().modalStack&&WebSquare.getBody().modalStack.length>0&&this.getDisabled()){for(var e=this.parentControl;e&&(!e.options||!("floatingLayer"==e.options.pluginName||"wframe"===e.options.pluginName&&e._isWframePopup));)e=e.parentControl;null==e&&(t=!1)}t&&!this.startedDisplayNone&&this.handleResize(),this.startedDisplayNone&&this.render.offsetWidth>0&&this.render.offsetHeight>0&&this.delayedAction()}}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.handleDblClickEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match(this.options.bodyTdClass)||WebSquare.idToUUID[e.getElement().getAttribute("id")]){this.bodyDblClick(t,e.getElement());break}if(e.match(this.options.headerTdClass)){this.headerDdlClick(t,e.getElement());break}if(this.hasFooter&&e.match(this.options.footerTdClass)){this.footerDblClick(t,e.getElement());break}if(this.hasSubtotal){if(this.subtotalClassList){for(var i=!1,o=0;o<this.subtotalClassList.length;o++)if(this.subtotalClassList[o].length>0&&e.match(this.subtotalClassList[o])){this.subtotalDblClick(t,e.getElement()),i=!0;break}if(i)break}else if(e.match(this.options.subtotalTdClass)){this.subtotalDblClick(t,e.getElement());break}}else e.match("w2grid_customFilter_sortable_open")&&(u.B.stopEvent(t),e.stop())}},m.prototype.handleClickEvent=function(t){if(this.lastEvent=t,u.B.fireEvent(this,"onclick",t),!(this.isMobile&&this.iScroll&&this.iScroll.moveDirection&&this.iScroll.moveDistance>10)){var e,i,o,s,r,a,n,l=this.event.getTargetIterator(t,this.render),h=null!=this.editedCell;h&&(e=this.editedCell.editRowIndex,i=this._dataList.getColumnIndex(this.editedCell.id),n=this.getCellInfo(this.editedCell.id),o=this.getColumnIndex(this.editedCell.id),s=this._grid.getRealRowIndex(e),r=this._dataList.dataArr[s*this._dataList.getColumnCount()+i],a=n.comp&&n.comp.selectedIndex);for(var d=function(t,e){var i=!1;if(e.subtotalClassList)for(var o=0;o<e.subtotalClassList.length;o++)if(e.subtotalClassList[o].length>0&&t.match(e.subtotalClassList[o])){i=!0;break}return i};l.next();){if(l.match(this.options.bodyTdClass)){this.bodyClick(t,l.getElement());break}if(l.match(this.options.headerTdClass)){this.headerClick(t,l.getElement()),h&&null==this.editedCell&&(e=this.getDisplayRowIndex(s));break}
if(this.hasFooter&&l.match(this.options.footerTdClass)){this.footerClick(t,l.getElement());break}if(this.hasSubtotal&&(l.match(this.options.subtotalTdClass)||d(l,this))){this.subtotalClick(t,l.getElement());break}if(this.isMine(t));else{if(l.match(this.options.headerTableClass))break;if(l.getElement().getAttribute("id")==this.id+"_dataLayer"){null!=this.editedCell&&this.editedCell.handleEndEdit(),u.B.fireEvent(this,"onblankclick",t);break}}}if(h){var c=this._dataList.dataArr[s*this._dataList.getColumnCount()+i];if(0===r&&(r="0"),0===c&&(c="0"),r!=c){var p={oldValue:r,newValue:c,rowIndex:e,colIndex:o};isNaN(a)||(p.oldSelectedIndex=a,p.newSelectedIndex=n&&n.comp&&n.comp.selectedIndex),u.B.fireEvent(this,"onviewchange",p)}}}},m.prototype.gridDataLayerOut=function(t){this.overElem&&(this.options.rowMouseOver&&this.removeRowOverStyle(this.overElem.parentNode),this.bodyOut(t,this.overElem),this.overElem=null)},m.prototype.gridHeaderOver=function(t){this.overElem&&(this.options.rowMouseOver&&this.removeRowOverStyle(this.overElem.parentNode),this.bodyOut(t,this.overElem),this.overElem=null)},m.prototype.gridOver=function(t){for(var e=u.B.getTarget(t);e&&("TD"!=e.tagName||null==e.getAttribute("colIndex")||!(this.hasClass(e,this.options.bodyTdClass)||this.hasClass(e,this.options.subtotalTdClass)||this.hasClass(e,this.options.footerTdClass)));){if("TD"==e.tagName&&null!=e.getAttribute("colIndex")&&this.subtotalClassList){for(var i=!1,o=0;o<this.subtotalClassList.length;o++)if(this.subtotalClassList[o].length>0&&this.hasClass(e,this.subtotalClassList[o])){i=!0;break}if(i)break}if(this.options.tooltipHeader&&"TH"==e.tagName&&null!=e.getAttribute("colIndex"))break;if("DIV"==e.tagName&&e.getAttribute("id")==this.id+"_dataLayer")break;if("TABLE"==e.tagName&&e.getAttribute("id")==this.id+"_foot_table")break;if("TH"==e.tagName&&this.hasClass(e,this.options.headerTdClass))break;e=e.parentNode}if(e.id==this.id+"_dataLayer")this.overElem&&(this.removeRowOverStyle(this.overElem.parentNode),this.bodyOut(t,this.overElem),this.overElem=null);else if(e.id==this.id+"_foot_table")this.overElem&&(this.bodyOut(t,this.overElem),this.overElem=null);else if(e&&"TD"==e.tagName){if(this.overElem!=e&&-1==e.className.indexOf(this.options.headerTdClass)){this.bodyOut(t,this.overElem),(this.options.tooltipDisplay||this.options.rowStatusTooltipDisplay)&&this.bodyOver(t,e),this.options.rowMouseOver&&(this.overElem&&"TD"==this.overElem.tagName&&this.removeRowOverStyle(this.overElem.parentNode),this.hasClass(e,"w2grid_groupby")||this.addRowOverStyle(e.parentNode)),this.overElem=e;var s={};e.getAttribute("col_id")&&(s.rowIndex=this._getGroupbyDisplayRowIndex(this.getElemRowIndex(e)),s.colIndex=this.getColumnIndex(e.getAttribute("col_id"))),u.B.fireEvent(this,"onbodymouseover",s)}}else e&&"TH"==e.tagName&&this.overElem!=e&&(this.bodyOut(t,this.overElem),(this.options.tooltipHeader||this.options.headerTooltipDisplay)&&this.headerOver(t,e),this.options.rowMouseOver&&this.overElem&&"TD"==this.overElem.tagName&&this.removeRowOverStyle(this.overElem.parentNode),this.overElem=e)},m.prototype.gridOver1=function(t){var e=u.B.getTarget(t);"NOBR"==e.tagName&&(e=e.parentNode),void 0!==e.tagName&&"TD"==e.tagName&&(this.options.rowMouseOver&&(this.overElem&&this.removeRowOverStyle(this.overElem.parentNode),this.addRowOverStyle(e.parentNode)),this.overElem=e)},m.prototype.gridOver2=function(t){var e=u.B.getTarget(t);"NOBR"==e.tagName&&(e=e.parentNode),void 0!==e.tagName&&"TD"==e.tagName&&(this.options.rowMouseOver&&(this.overElem,this.addRowOverStyle(e.parentNode)),this.overElem=e)},m.prototype.handlePasteEvent=function(t){try{var e=this.options.preventPasteColumn,i=e?e.split(","):[];if(this.options.preventPaste&&!this.editedCell||u.B.getTarget(t)&&u.B.getTarget(t).getAttribute("class")&&u.B.getTarget(t).getAttribute("class").indexOf("w2grid_head_input")>-1)return;if(!1===u.B.fireEvent(this,"oncustompaste",t))return
;var o,n=(a.D.isIEAllVersion()?window.clipboardData:t.clipboardData).getData("Text");if("\r\n"==n.slice(-2)?n=n.slice(0,n.length-2):"\n"==n.slice(-1)&&(n=n.slice(0,n.length-1)),this.options.customPasteFormatter)if("string"==typeof this.options.customPasteFormatter){var l=a.D.getGlobalFunction(this.options.customPasteFormatter.wq_trim(),this.scope_id);if("function"==typeof l){var h=l.call(this,n);n=h||n}}else $l("customPasteFormatter의 type은 string이어야 합니다.");if(o="native"===this.options.copyType?[[n]]:Papa.parse(n,{delimiter:"\t"}).data,a.D.isIEAllVersion("6 7")&&'"'===n.slice(0,1)&&'"'===n.slice(-1)&&-1==n.slice(1,-1).indexOf("\t")&&(o=[[n.slice(1,n.length-1)]]),!o||null==o||"undefined"==o)return;if(this.focusedCell.length>0){for(var d,c=this.getColumnOrder(),p=this.htmlInfo.body.rowAttrArr.length,g=this.getDataLength()*p,m=0,f=c.length,b=0,y=null,v=0,w=0;w<this.focusedCell.length;w++){var S=this.focusedCell[w],C=S.focusedRowIndex,x=S.focusedColIndex,_=this.getLocationRowCol(C,x);C=_.rowIndex,x=_.colIndex,v+=_.rowSize*_.colSize-1,g>C&&(g=C),m<C+_.rowSize-1&&(m=C+_.rowSize-1),f>x&&(f=x),b<x+_.colSize-1&&(b=x+_.colSize-1),g==C&&f==x&&(y=S)}var I=0;for(w=this.defaultColCnt+f;w<this.defaultColCnt+b;w++)1==this.hiddenList[w]&&(I+=1);if(this.focusedCell.length>1&&this.focusedCell.length+v!=(m-g+1)*(b-f-I+1))return;var T=!1;if(v>0&&(T=!0),d={focusedRange:{minRow:g,maxRow:m,minCol:f,maxCol:b},startCell:y},y.focusedRowIndex>=0&&y.focusedColIndex>=0){var k=y.focusedTd;if(k){var D=k.getAttribute("col_id");if(null==D||""==D.wq_trim())return;if("1"==k.getAttribute("colMerged"))return}else{var L=this.getCellInfo(y.focusedColIndex);if(L&&(L.options.colMerge||L.options.colMergeAnd))return}var W=g,A=f,E=this.getOriginalRowCol(g,f),M=(x=E.colIndex,C=E.rowIndex,this.getTotalRow()),q=(this.getTotalCol(),M*p),R=c.length;if(this.options.checkBlankRowOnPaste)for(w=o.length-1;w>-1;w--){for(var N=!0,F=0;F<o[0].length;F++)if(""!=o[w][F].wq_trim()){N=!1;break}N&&o.splice(w,1)}if(!1===u.B.fireEvent(this,"onbeforepaste",{rowIndex:this._getGroupbyDisplayRowIndex(C),colIndex:x,data:o.slice(0)}))return;this.isPaste=!0;var O,B=this,V=function(t){for(var e=B.defaultColCnt+t;e<B.hiddenList.length;e++)if(0==B.hiddenList[e])return e-B.defaultColCnt},H=this.uuid,P=!1,j=function(t){var e=WebSquare.idCache[H],s=e.options.checkReadOnlyOnPasteEnable,r=s?s.split(","):[];if(W+o.length>q&&!a.D.getBoolean(B.options.preventAddRowOnPaste)&&"focus"!==B.options.pasteOption){var n=Math.ceil((W+o.length-q)/p),l=Array(B._dataList.getTotalCol()*n);if(""!=B.depthColumn)for(var h=B._dataList.getCellInfo(B.depthColumn).options.defaultValue,d=0;d<n;d++)l[d*B._dataList.getTotalCol()+B._dataList.getColumnIndex(B.depthColumn)]=h;if(B.options.setDefaultValueOnPaste){var c=B._dataList.getTotalCol();for(d=0;d<c;d++)for(var y=B._dataList.getCellInfo(d).options.defaultValue,v=0;v<n;v++)l[v*c+B._dataList.getColumnIndex(d)]=y}if(B.options.checkReadOnlyOnPaste){var w=!0,S=!1;for(d=0;d<o.length;d++){var C=A,x=W+d;for(v=0;v<o[0].length&&!(null==C||C>=R);v++){var _=(L=B.getOriginalRowCol(x,C)).colIndex,I=L.rowIndex;S=!1;for(var k=0;k<r.length;k++)if(r[k]==e.getColumnID(_)){S=!0;break}if(!B.___getEditReadOnly(I,_)||B.___getEditReadOnly(I,_)&&S){w=!1;break}C=V(C+1)}}if(w)return}if(B.options.checkDisabledOnPaste){var D=!0;for(d=0;d<o.length;d++)for(C=A,x=W+d,v=0;v<o[0].length&&!(null==C||C>=R);v++){var L;_=(L=B.getOriginalRowCol(x,C)).colIndex,I=L.rowIndex;if(!B._getEditDisabled(I,_)){D=!1;break}C=V(C+1)}if(D)return}if(l.length>0){P=!0,B._dataList.setData(l,!0);d=0;for(var E=n,N=new Array(n);d<E;d++)N[d]="C";O=N.length,B._dataList.rowStatusArr=B._dataList.rowStatusArr.slice(0,M).concat(N)}}var F=function(s,n,l){for(var h=function(t,e,i){var o=B.data_td_list[e+(t-B.rowIndex)*B.oneRowDataLength];if(t<B.rowIndex&&(o=null),!(B.groupbyStatus.grouped&&o&&B.hasClass(o,"w2grid_groupby"))){var s=B.getCellInfo(e),r=B._getRealColIndex("body",s.options.col_id)+B.defaultColCnt
;if(!s.options.blockSelect&&!B.hiddenList[r]){var a={focusedTd:o,focusedRowIndex:t,focusedColIndex:e};B.options.groupbyDisplayRowIndex&&(a.groupbyDisplayRowIndex=B._getGroupbyDisplayRowIndex(t)),i?B.focusedCell.push(a):B.focusedCell.unshift(a),null!=o&&B.applyFocusedCellIn(o,i)}}},d=s,c=0;c<o.length;c++){for(var g=n,m=0;m<o[c].length&&!(null==g||g>=R);m++){var f=B.getOriginalRowCol(d,g),b=f.colIndex,y=f.rowIndex;if(f.noLeftTop)f.leftCell&&(g=V(g+f.colSize));else{h(y,b,!0);for(var v=!1,w=0;w<r.length;w++)if(r[w]==e.getColumnID(b)){v=!0;break}if(B.options.checkReadOnlyOnPaste&&B.___getEditReadOnly(y,b)&&!v)g=V(g+f.colSize);else if(B.options.checkDisabledOnPaste&&B._getEditDisabled(y,b))g=V(g+f.colSize);else{var S=!1;for(w=0;w<i.length;w++)if(i[w]==e.getColumnID(b)){g=V(g+f.colSize),S=!0;break}if(!S&&!(a.D.getBoolean(B.options.preventAddRowOnPaste)&&B.dataList.getRowCount()*p-1<y||"focus"===B.options.pasteOption&&(g>t.focusedRange.maxCol||g<t.focusedRange.minCol||d>t.focusedRange.maxRow||d<t.focusedRange.minRow))){var C=b,x=B.tdIdList[C],_=B._dataList.getColumnIndex(x),I=B._dataList.dataArr[B.getRealRowIndex(y)*B._dataList.getColumnCount()+_],T=o[c][m],k=B.getCellInfo(C),D=!(!B.isDrillDown||!B._dataList.options.depthColumn)?B.getRealRowIndex(y):y;if("number"!=k.options.dataType&&"float"!=k.options.dataType||(T=T.wq_trim()),(k.options.selectedDataOnPaste||B.options.selectByLabel)&&("autoComplete"===k.options.inputType||"select"===k.options.inputType)){var L,W=k.getItemArray(),A=k.dataComp;if(k.existGridViewItemsetNode||"gridViewItemset"===k.options.itemTableType){var E=k.itemsetObj.nodeset;E.indexOf("data:")>=0&&(A=E.slice("data:".length))}if(A&&(L=k.mainGrid.modelControl.getDataComp(A)),L&&(!W||0==W.length||1==W.length&&(!0===k.options.chooseOption||!0===k.option.allOption)||2==W.length&&!0===k.options.chooseOption&&!0===k.option.allOption)){var M=L.bodyIdColIndexMap[k.itemsetObj.label],q=L.bodyIdColIndexMap[k.itemsetObj.value],N=L.cellIdList.length,F=L.filteredRowIndexArr.length;if(W=[],L&&"linkedDataList"===L.initializeType&&null!=L.conditionInfo&&L.conditionInfo.filterInfo.useRef)for(var H=0;H<L._dataList.getDataLength();H++){(j={}).label=L._dataList.dataArr[H*N+M],j.value=L._dataList.dataArr[H*N+q],W[H]=j}else for(w=0;w<F;w++){var j={};"linkedDataList"!=L.initializeType&&L.dataArr?(j.label=L.dataArr[L.filteredRowIndexArr[w]*N+M],j.value=L.dataArr[L.filteredRowIndexArr[w]*N+q]):(j.label=L._dataList.dataArr[L.filteredRowIndexArr[w]*N+M],j.value=L._dataList.dataArr[L.filteredRowIndexArr[w]*N+q]),W[w]=j}}var z=!1;if(k.options.selectedDataOnPaste)if(0===W.length)z=!0;else for(var G=0;G<W.length;G++){var U=W[G];switch(k.options.selectedDataOnPaste){case"true":case"both":U.value!==T&&U.label!==T||(z=!0);break;case"value":U.value===T&&(z=!0);break;case"label":U.label===T&&(z=!0);break;default:z=!0}if(z)break}if(!z&&k.options.selectedDataOnPaste){o.length<=O+c&&0===m&&P&&B._drawRowStatus(D-B.rowIndex,D),g=V(g+f.colSize);continue}if(B.options.selectByLabel)for(G=0;G<W.length;G++){if((U=W[G]).label===T){T=U.value;break}}}var X=k.comp&&k.comp.selectedIndex;if("true"===B.options.unformatOnPaste||"true"===k.options.unformatOnPaste){if("calendar"==k.options.inputType&&"date"==k.options.dataType){var K=0;"yearMonthDate"==k.options.calendarValueType?K=8:"yearMonth"==k.options.calendarValueType?K=6:"yearMonthDateHour"==k.options.calendarValueType?K=10:"yearMonthDateTime"==k.options.calendarValueType?K=12:"yearMonthDateTimeSec"==k.options.calendarValueType?K=14:"year"==k.options.calendarValueType&&(K=4);var $=new WebSquare.validator.validateInvoker;$.addCommand(new WebSquare.validator.allowCharCommand("0-9")),$.addCommand(new WebSquare.validator.maxLengthCommand(K)),T=$.validateString(T)}var Y=T,Z=k.formatter.masking,J=k.formatter.type
;T=Y=void 0===J||null==J||"number"!=J&&"float"!=J?void 0!==J&&null!=J&&"date"==J?WebSquare.text.unformatDate2(Z,Y):void 0!==J&&null!=J&&"time"==J?WebSquare.text.unformatTime(Z,Y):WebSquare.text.unformatText(Z,Y):WebSquare.text.unformatCurrency(Z,Y)}if(k.options.maxLength)if("float"==k.options.dataType){T=new WebSquare.validator.maxFloatLengthCommand(k.options.maxLength,k.options.decimalDelimiter,k.options.delimiter).executeValidateString(T)}else{F=parseInt(k.options.maxLength);isNaN(F)||(T=T.slice(0,F))}if(k.options.allowChar){var Q=k.options.allowChar;if(void 0!==Q&&null!=Q&&""!=Q){var tt=new RegExp("["+Q+"]"),et=!0;for(w=0;w<T.length;w++){if(null==T.charAt(w).match(tt)){et=!1;break}}!1===et&&(T="")}}if(k.options.ignoreChar)T=new WebSquare.validator.ignoreCharCommand(k.options.ignoreChar).executeValidateString(T);if((""!==k.options.escape?k.options.escape:B.options.escape)+""=="true"&&(T=WebSquare.xml.decode(T)),"radio"===k.options.inputType&&k.options.trueValue===T)for(var it=B.getCheckedIndex(C),ot=0;ot<it.length;ot++)B._dataList.setCellData(it[ot],_,k.options.falseValue);if("text"===k.options.inputType||"textImage"===k.options.inputType){var st=a.D.getGlobalFunction(k.options.customModelFormatter,B.scope_id);"function"==typeof st?(B.useCustomModelFormatter=!0,T=st.call(B,T,T,k.editRowIndex,k.getColumnIndex(x))):B.useCustomModelFormatter=!1}if(B._dataList.setCellData(D,_,T),!T&&P&&o.length<=O+c&&B._drawRowStatus(D-B.rowIndex,D),I!=T){var rt={oldValue:I,newValue:T,rowIndex:y,colIndex:C};isNaN(X)||(rt.oldSelectedIndex=X,rt.newSelectedIndex=k.comp&&k.comp.selectedIndex),u.B.fireEvent(B,"onviewchange",rt)}g=V(g+f.colSize)}}}}d+=1}},j=g,z=f;if(o.length>0&&!T)for(d=1;d<o.length;d++)if(o[d].length!==o[0].length){T=!0;break}if(B.applyFocusedCellOut(),B.focusedCell=[],T)F(g,f);else if(m-g+1>=o.length&&b-f+1>=o[0].length)for(;j<=m-o.length+1;){for(z=f;z<=b-o[0].length+1;){j+o.length>m-o.length+1&&z+o[0].length>b-o[0].length+1&&!1,F(j,z),z+=o[0].length}j+=o.length}else if(m-g+1>=o.length)for(;j<=m-o.length+1;){j+o.length>m-o.length+1&&!1,F(j,z),j+=o.length}else if(b-f+1>=o[0].length)for(;z<=b-o[0].length+1;){z+o[0].length>b-o[0].length+1&&!1,F(j,z),z+=o[0].length}else F(g,f)};if("true"===this.options.showMessageOnPaste){var z=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/pasteMessage/@value");WebSquare.layer.pasteMessageLoaded=!1,WebSquare.layer.showProcessMessage(z,{type:"pasteMsg",scope:this.scope_id||""});!function t(){WebSquare.layer.pasteMessageLoaded?(a.D.clearTimeout(B.id+"_pasteMessageLoaded"),j(),WebSquare.layer.hideProcessMessage({type:"pasteMsg",scope:this.scope_id||""}),u.B.fireEvent(B,"onafterpaste")):a.D.setTimeout(t,{delay:500,key:B.id+"_pasteMessageLoaded"})}()}else j(d),u.B.fireEvent(this,"onafterpaste")}}this.isPaste=!1,u.B.preventDefault(t)}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.handleBeforeCopyEvent=function(t){u.B.preventDefault(t)},m.prototype.handleBeforeCutEvent=function(t){u.B.preventDefault(t)},m.prototype.handleCopyEvent=function(t){try{if(!1===u.B.fireEvent(this,"oncustomcopy",t))return;var e=this.options.preventCopyColumn,i=e?e.split(","):[];if(this.options.preventCopy||"native"===this.options.copyType)return;if(s.v.browserCheck.safari){for(var o=document.activeElement,n=!1;null!=o;)o.id&&o.id==this.id&&(n=!0),o=o.parentNode;if(!n)return}var l=a.D.isIEAllVersion()?window.clipboardData:t.clipboardData,h=this.options.copyAmount;if(h||(h="cell"),"cell"==h&&this.focusedCell.length>0){for(var d=[],c=this.getColumnOrder(),p=this.htmlInfo.body.rowAttrArr.length,g=this.getDataLength()*p,m=0,f=c.length,b=0,y=0,v=0;v<this.focusedCell.length;v++){var w=this.focusedCell[v],S=w.focusedRowIndex,C=w.focusedColIndex,x=this.getLocationRowCol(S,C);S=x.rowIndex,C=x.colIndex,y+=x.colSize*x.rowSize-1,g>S&&(g=S),m<S+x.rowSize-1&&(m=S+x.rowSize-1),f>C&&(f=C),b<C+x.colSize-1&&(b=C+x.colSize-1)}"row"==this.options.focusMode&&1==this.options.rowCopy&&(f=0,b=c.length-1);var _=0
;for(v=this.defaultColCnt+f;v<b+this.defaultColCnt;v++)1==this.hiddenList[v]&&(_+=1);if(this.focusedCell.length+y==(m-g+1)*(b-f-_+1)||"row"==this.options.focusMode&&1==this.options.rowCopy&&this.focusedCell.length==m-g+1)if(this.isDrillDown){var I=this._dataList.getRealRowIndex(m),T=this.drilldown.getChildrenRowArr(I),k=this._dataList.getRealRowIndex(g),D=I;this.drilldown.isOpen(m)||function t(e){var i=e[e.length-1];D=D<i?i:D;for(var o=0;o<e.length;o++){var s=this.drilldown.getChildrenRowArr(e[o]);s.length>0&&t.call(this,s)}}.call(this,T);for(v=k;v<=D;v++){for(var L=[],W=f;W<=b;W++){var A=(B=this.getOriginalRowCol(v,W)).colIndex,E=B.rowIndex;if((!B.noLeftTop||B.leftCell)&&1!=this.hiddenList[W+this.defaultColCnt]){for(var M=this.getCellInfo(A),q=!1,R=0;R<i.length;R++)if(i[R]==M.colID){q=!0;break}if(!q){var N=""!==M.options.escape?M.options.escape:this.options.escape,F=this.drilldown.statusArr;if("display"==M.options.copyOption)H=!1===F[v]?this._getDisplayData(E,this.getColumnID(A)):this._getDisplayData(this.getRealRowIndex(E),this.getColumnID(A));else{var O=this.getColumnID(A);H=this.dataList.getColData(O)[E]}B.noLeftTop&&(H=""),N+""=="true"&&(H=WebSquare.xml._encode(H+"")),(H||this.focusedCell.length>1)&&L.push(H)}}}d.push(L)}}else for(v=g;v<=m;v++){for(L=[],W=f;W<=b;W++){var B;A=(B=this.getOriginalRowCol(v,W)).colIndex,E=B.rowIndex;if((!B.noLeftTop||B.leftCell)&&1!=this.hiddenList[W+this.defaultColCnt]){for(M=this.getCellInfo(A),q=!1,R=0;R<i.length;R++)if(i[R]==M.colID){q=!0;break}if(!q){N=""!==M.options.escape?M.options.escape:this.options.escape;H="display"==M.options.copyOption?this._getDisplayData(this.getRealRowIndex(E),this.getColumnID(A)):this.dataList.getCellData(E,this.getColumnID(A)),B.noLeftTop&&(H=""),N+""=="true"&&(H=WebSquare.xml._encode(H+"")),(H||this.focusedCell.length>1)&&L.push(H)}}}d.push(L)}else{var V=this.focusedCell[this.focusedCell.length-1];if(null!=V){var H;for(N=""!==(M=this.getCellInfo(V.focusedColIndex)).options.escape?M.options.escape:this.options.escape,v=0;v<i.length;v++)if(i[v]==M.colID)return;H="display"==M.options.copyOption?this._getDisplayData(this.getRealRowIndex(V.focusedRowIndex),this.getColumnID(V.focusedColIndex)):this.dataList._getCellData(V.focusedRowIndex,this.getColumnID(V.focusedColIndex)),N+""=="true"&&(H=WebSquare.xml._encode(H+"")),d.push([H])}}var P=Papa.unparse(d,{delimiter:"\t"});l.setData("Text",P)}u.B.preventDefault(t)}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.handleCutEvent=function(t,e){try{if(!e)if(!1===u.B.fireEvent(this,"oncustomcut",t))return;var i=this.options.preventCopyColumn,o=i?i.split(","):[];if(this.options.preventCopy)return;if(s.v.browserCheck.safari){for(var n=document.activeElement,l=!1;null!=n;)n.id&&n.id==this.id&&(l=!0),n=n.parentNode;if(!l)return}var h=a.D.isIEAllVersion()?window.clipboardData:t.clipboardData,d=this.options.copyAmount;if(d||(d="cell"),"cell"==d&&this.focusedCell.length>0){for(var c=[],p=this.getColumnOrder(),g=this.htmlInfo.body.rowAttrArr.length,m=this.getDataLength()*g,f=0,b=p.length,y=0,v=0,w=0;w<this.focusedCell.length;w++){var S=this.focusedCell[w],C=S.focusedRowIndex,x=S.focusedColIndex,_=this.getLocationRowCol(C,x);C=_.rowIndex,x=_.colIndex,v+=_.rowSize*_.colSize-1,m>C&&(m=C),f<C+_.rowSize-1&&(f=C+_.rowSize-1),b>x&&(b=x),y<x+_.colSize-1&&(y=x+_.colSize-1)}var I=0;for(w=this.defaultColCnt+b;w<y+this.defaultColCnt;w++)1==this.hiddenList[w]&&(I+=1);if(this.focusedCell.length+v==(f-m+1)*(y-b-I+1))for(w=m;w<=f;w++){for(var T=[],k=b;k<=y;k++){var D=this.getOriginalRowCol(w,k),L=D.colIndex,W=D.rowIndex,A=k+this.defaultColCnt;if(1!=this.hiddenList[A]&&!(this.options.checkReadOnlyOnCut&&this.___getEditReadOnly(W,L)||e&&this.___getEditReadOnly(W,L)||this.options.checkDisabledOnCut&&this._getEditDisabled(W,L)||e&&this._getEditDisabled(W,L))){for(var E=this.getCellInfo(L),M=!1,q=0;q<o.length;q++)if(o[q]==E.colID){M=!0;break}if(!M&&!D.noLeftTop){var R=""!==E.options.escape?E.options.escape:this.options.escape
;if(H="display"==E.options.copyOption?this._getDisplayData(this.getRealRowIndex(W),this.getColumnID(L)):this.dataList.getCellData(W,this.getColumnID(L)),R+""=="true"&&(H=WebSquare.xml._encode(H+"")),""!==H){var N={oldValue:H,newValue:"",rowIndex:W,colIndex:L};u.B.fireEvent(this,"onviewchange",N)}T.push(H),this.dataList.setCellData(W,this.getColumnID(L),"")}}}c.push(T)}else{var F=this.focusedCell[this.focusedCell.length-1],O=F.focusedRowIndex,B=this.getColumnID(F.focusedColIndex),V=!1;if(this.options.checkReadOnlyOnCut&&this.___getEditReadOnly(O,B)&&(V=!0),this.options.checkDisabledOnCut&&this._getEditDisabled(O,B)&&(V=!0),null!=F&&!0!==V){var H;for(E=this.getCellInfo(B),w=0;w<o.length;w++)if(o[w]==E.colID)return;R=""!==E.options.escape?E.options.escape:this.options.escape;if(H="display"==E.options.copyOption?this._getDisplayData(this.getRealRowIndex(O),B):this.dataList.getCellData(O,B),R+""=="true"&&(H=WebSquare.xml._encode(H+"")),""!==H){N={oldValue:H,newValue:"",rowIndex:O,colIndex:F.focusedColIndex};u.B.fireEvent(this,"onviewchange",N)}this.dataList.setCellData(O,B,""),c.push([H])}}if(!e){var P=Papa.unparse(c,{delimiter:"\t"});h.setData("Text",P)}}u.B.preventDefault(t)}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.clickRightButtonCell=function(t){for(var e=u.B.getTarget(t);e&&"TD"!=e.tagName&&"TH"!=e.tagName&&"DIV"!=e.tagName;)e=e.parentNode;var i=e&&this.hasClass(e,this.options.headerTdClass);if(e&&this.hasClass(e,this.options.bodyTdClass)&&(i=!1),i)u.B.preventDefault(t),u.B.fireEvent(this,"onheaderrightbuttonclick",e.getAttribute("header_id"));else{for(var o=e;o;){if("TH"===o.tagName&&this.hasClass(o,this.options.headerTdClass)){i=!0;break}if("TD"===o.tagName&&this.hasClass(o,this.options.bodyTdClass)){i=!1;break}if("DIV"===o.tagName&&this.hasClass(o,"w2grid_dataLayer")&&0===this.getRowCount()){i=!1;break}o=o.parentNode}e=o}var s,r,a,n,l,h,d=null!=this.editedCell;if(!i&&d&&(s=this.editedCell.editRowIndex,r=this._dataList.getColumnIndex(this.editedCell.id),y=this.getCellInfo(this.editedCell.id),a=this.getColumnIndex(this.editedCell.id),n=this._grid.getRealRowIndex(s),l=this._dataList.dataArr[n*this._dataList.getColumnCount()+r],h=y.comp&&y.comp.selectedIndex),i&&this.options.useHeaderContextMenu){var c=void 0,p=-1,g=parseInt(e.getAttribute("colIndex"),10)-this.defaultColCnt;(_={}).result=c,_.rowIndex=p,_.colIndex=g,_.event=t;var m=[];if(this.focusedCell)for(var f=0;f<this.focusedCell.length;f++)m.push({rowIndex:this._getGroupbyDisplayRowIndex(this.focusedCell[f].focusedRowIndex),colIndex:this.focusedCell[f].focusedColIndex});_.focusedCell=m;var b={isHeader:!0};b.headerId=e.getAttribute("header_id"),(I=u.B.fireEvent(this,"oncontextopen",p,g,m,b))?this.createContextMenu(_,I):this.contextMenu?this.showContextMenu(_):this.createContextMenu(_)}else if(e&&"TD"==e.tagName&&this.hasClass(e,this.options.bodyTdClass)){var y;if(!1===(c=this.__setFocusedCell(t,e,{allowContextMenuMultiCell:this.options.allowContextMenuMultiCell}))){if(this.focusedCell.length>0)for(f=0;f<this.focusedCell.length;f++)this._applyFocusedCellOut(this.focusedCell[f]);var v=e.className,w=parseInt(e.getAttribute("tdIndex")),S=parseInt(w/this.realRowDataLength);null!=v.match("rowNum")?(p=S,g="rowNum"):null!=v.match("rowStatus")?(p=S,g="rowStatus"):null!=v.match("groupby")?(p="groupby",g=-1):null!=v.match("Subtotal")&&(p="subtotal",g="number"==typeof(g=parseInt(e.getAttribute("colIndex"),10))?g:-1)}else e&&(this.hasClass(e,"w2grid_textImage")||this.hasClass(e,"w2grid_textImage_image"))?(p=parseInt(e.getAttribute("rowIndex"),10),g=parseInt(e.getAttribute("colIndex"),10),this._setFocusedCell(p,g)):i?(p=parseInt(e.getAttribute("rowIndex"),10),g=parseInt(e.getAttribute("colIndex"),10)):(p=this.getFocusedRowIndex(),g=this.getFocusedColumnIndex());if(!i&&e&&d){var C=this._dataList.dataArr[n*this._dataList.getColumnCount()+r];if(l!=C){var x={oldValue:l,newValue:C,rowIndex:s,colIndex:a};isNaN(h)||(x.oldSelectedIndex=h,
x.newSelectedIndex=y&&y.comp&&y.comp.selectedIndex),u.B.fireEvent(this,"onviewchange",x)}}if(this.options.senseReader)("text"!=(y=this.getCellInfo(g)).options.inputType&&"secret"!=y.options.inputType||this.___getEditReadOnly(p,g)||this.options.contextMenu)&&u.B.preventDefault(t);else u.B.preventDefault(t);if(u.B.fireEvent(this,"onrightbuttonclick",this._getGroupbyDisplayRowIndex(p),g,t),this.options.contextMenu){(_={}).result=c,_.rowIndex=p,_.colIndex=g;m=[];if(this.focusedCell)for(f=0;f<this.focusedCell.length;f++)m.push({rowIndex:this._getGroupbyDisplayRowIndex(this.focusedCell[f].focusedRowIndex),colIndex:this.focusedCell[f].focusedColIndex});_.focusedCell=m,_.event=t,(I=u.B.fireEvent(this,"oncontextopen",this._getGroupbyDisplayRowIndex(p),g,m))?this.createContextMenu(_,I):this.contextMenu?this.showContextMenu(_):this.createContextMenu(_)}}else if(e&&"DIV"==e.tagName&&this.hasClass(e,"w2grid_dataLayer")&&0===this.getRowCount()){var _,I;if(u.B.preventDefault(t),u.B.fireEvent(this,"onrightbuttonclick",-1,-1,t),this.options.contextMenu)(_={result:!1,rowIndex:-1,colIndex:-1,focusedCell:null}).event=t,(I=u.B.fireEvent(this,"oncontextopen",-1,-1,null))?this.createContextMenu(_,I):this.contextMenu?this.showContextMenu(_):this.createContextMenu(_)}},m.prototype.fireImageClick=function(t,e){var i=this.getCellInfo(e),o=this._getEditDisabled(t,e);if(this.options.useImageClick||0==o){var s=a.D.getGlobalFunction(i.options.imageClickFunction,this.scope_id);"function"==typeof s&&s.call(this,t,e,this.dataList._getCellData(t,e))}},m.prototype.gridOut=function(t){var e=u.B.getTarget(t);if(this.overElem&&(e.id==this.id+"_dataLayer"||e.id==this.overElem.id||""==e.id)){if(this.options.rowMouseOver&&"TD"==this.overElem.tagName&&this.removeRowOverStyle(this.overElem.parentNode),"TD"===this.overElem.tagName){var i={};this.overElem.getAttribute("col_id")&&(i.rowIndex=this.getElemRowIndex(this.overElem),i.colIndex=this.getColumnIndex(this.overElem.getAttribute("col_id"))),u.B.fireEvent(this,"onbodymouseout",i)}this.bodyOut(t,this.overElem),this.overElem=null}},m.prototype.addRowOverStyle=function(t){for(;null!=t&&(1!=t.nodeType||null==t.getAttribute("trIndex"));)if(null==(t=t.parentNode)||t.id==this.id+"_foot_table")return;if(null!=t){for(var e=parseInt(t.getAttribute("trIndex"));e>0;)e--,t=a.D.prev(t);var i=a.D.first(t),o=parseInt(i.getAttribute("tdIndex"));if(!isNaN(o)){o=parseInt(o/(this.oneRowDataLength+this.defaultColCnt),10)*(this.oneRowDataLength+this.defaultColCnt);for(var s=this.options.rowMouseOverColor.wq_trim(),r=""==this.options.selectedCellOverColor?"":this.options.selectedCellOverColor.wq_trim(),n=""==this.options.selectedRowOverColor?"":this.options.selectedRowOverColor.wq_trim(),l=0;l<this.realRowDataLength;l++){var h=this.all_data_td_list[o+l],d=s;if(""==r||"cell"!=this.options.focusMode&&"both"!=this.options.focusMode){if(!(""==n||"row"!=this.options.focusMode&&"both"!=this.options.focusMode||"row"==this.options.focusMode&&1==this.options.fixedColumnNoBGColor&&l<this.options.fixedColumn))for(u=parseInt(h.getAttribute("tdIndex")),c=parseInt(u/this.realRowDataLength)+this.rowIndex,g=0;g<this.focusedCell.length;g++)if(c==this.focusedCell[g].focusedRowIndex){d=n;break}}else for(var u=parseInt(h.getAttribute("tdIndex")),c=parseInt(u/this.realRowDataLength)+this.rowIndex,p=u%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),g=0;g<this.focusedCell.length;g++)if(c==this.focusedCell[g].focusedRowIndex&&p==this.focusedCell[g].focusedColIndex){d=r;break}if(!("row"==this.options.focusMode&&1==this.options.fixedColumnNoBGColor&&l<this.options.fixedColumn))if(l<this.defaultColCnt){var m=h.className;(""==this.options.rowNumBackgroundColor&&m.indexOf(this.options.bodyTdClass+"_rowNumber")>=0||m.indexOf(this.options.bodyTdClass+"_rowStatus")>=0)&&(h.style.backgroundColor=d)}else h.style.backgroundColor=d;h.removeAttribute("style_bak")}}}},m.prototype.removeRowOverStyle=function(t){
if(!(this.options.tooltipHeader&&t&&t.getElementsByTagName("TH").length>0)){for(;null!=t&&(1!=t.nodeType||null==t.getAttribute("trIndex"));)if(null==(t=t.parentNode)||t.id==this.id+"_foot_table")return;if(null!=t){for(var e=parseInt(t.getAttribute("trIndex"));e>0;)e--,t=a.D.prev(t);var i=a.D.first(t),o=parseInt(i.getAttribute("tdIndex"));if(!isNaN(o)){o=parseInt(o/(this.oneRowDataLength+this.defaultColCnt),10)*(this.oneRowDataLength+this.defaultColCnt);for(var s=0;s<this.realRowDataLength;s++){var r=this.all_data_td_list[o+s];if(s<this.defaultColCnt){var n=r.className;if(""==this.options.rowNumBackgroundColor&&n.indexOf(this.options.bodyTdClass+"_rowNumber")>=0)if("row"==this.options.focusMode||"both"==this.options.focusMode){for(var l=parseInt(r.getAttribute("tdIndex")),h=parseInt(l/this.realRowDataLength)+this.rowIndex,d=!1,u=0;u<this.focusedCell.length;u++)if(h==this.focusedCell[u].focusedRowIndex){d=!0;break}r.style.backgroundColor=d?this.options.selectedRowColor.wq_trim():""}else r.style.backgroundColor="";else if(n.indexOf(this.options.bodyTdClass+"_rowStatus")>=0)if("row"==this.options.focusMode||"both"==this.options.focusMode){for(l=parseInt(r.getAttribute("tdIndex")),h=parseInt(l/this.realRowDataLength)+this.rowIndex,d=!1,u=0;u<this.focusedCell.length;u++)if(h==this.focusedCell[u].focusedRowIndex){d=!0;break}r.style.backgroundColor=d?this.options.selectedRowColor.wq_trim():""}else r.style.backgroundColor=""}else r.style.backgroundColor=r.getAttribute("or_bgColor")||"";r.removeAttribute("style_bak")}}}}},m.prototype.handleKeyDownEvent=function(t){this.parentControl&&this.parentControl.options&&"gridViewItemTable"===this.parentControl.options.pluginName||"gridItemTable"===this.parentControl.options.pluginName||0!=u.B.fireEvent(this,"onkeydown",t)&&(this.lastEvent=t,this.headerFocus||this.handleBodyKeyDown(t))},m.prototype.handleKeyUpEvent=function(t){if(0!=u.B.fireEvent(this,"onkeyup",t)){if(this.lastEvent=t,this.editedCell&&this.editedCell._getEditedValue){var e=this.editedCell.options.inputType;if("custom"===e&&!this.editedCell.internal&&this.editedCell.editRowIndex){var i=this.getRealRowIndex(this.editedCell.editRowIndex);e=this.editedCell.cellManagerHashByRowIndex[i].options.inputType}if("text"===e||"textarea"===e||"calendar"===e||"textImage"===e||"secret"===e){var o=t.charCode?t.charCode:t.keyCode,s={rowIndex:this.editedCell.editRowIndex,colIndex:this.getColumnIndex(this.editedCell.id),colID:this.getColumnID(this.editedCell.id),oldValue:this.editedCell.beforeEditValue||"",newValue:this.editedCell._getEditedValue(),inputType:e,keyCode:o};u.B.fireEvent(this,"oneditkeyup",s)}}else null!=this.beforeEditedCellInfo&&u.B.fireEvent(this,"oneditkeyup",this.beforeEditedCellInfo);this.beforeEditedCellInfo=null}},m.prototype.headerOver=function(t,e){if(!(e.className.indexOf(this.options.headerTdClass+"_rowNumber")>=0||e.className.indexOf(this.options.headerTdClass+"_rowStatus")>=0)){var i=e.offsetWidth;if(!(i<2)&&e.firstChild){var o=e.getAttribute("col_id"),s=null;if(o){var n=this.getHeaderInfo(o),l=(g=this.getHeaderInputType(o),n.options.embeddedInput);if(l&&"text"==g){var h=this.getElemRowIndex(e),d=this.getColumnIndex(e.getAttribute("col_id"));l=!this._getEditDisabled(h,d)&&!this.___getEditReadOnly(h,d)}if("textImage"==g||("autoComplete"==g||"calendar"==g)&&"true"==n.options.viewTypeIconImage)if("100%"==e.firstChild.style.width)s=e.getElementsByTagName("td")[0];else{var u=this.event.getTargetIterator(t),p="w2grid_textImage_image";for("true"===n.options.viewTypeIconImage&&("autoComplete"==g?p=this.mainGrid.options.bodyTdClass+"_autoComplete_img":"calendar"==g&&(p=this.mainGrid.options.bodyTdClass+"_calendar_div_img"));u.next();)if(u.match(null,null,"td")&&u.getElement().id){s=this.hasClass(e,p)?e.previousSibling:e,e=u.getElement();break}}}else var g="text"
;if("text"==g||"textarea"==g||"textImage"==g||"link"==g||"calendar"==g||"expression"==g||"select"==g&&!l||"drilldown"==g||"autoComplete"==g||"checkcombobox"==g||"button"==g||this.options.showImageTooltip&&"image"==g){var m;"textarea"==g?(m=e.cloneNode(!0)).firstChild.style.width="":m=s||e;var f=i,b=e.offsetHeight,y=WebSquare.style.getStyle(e,"text-overflow"),v=20,w=b+3;try{this.options.tooltipPositionX&&(v=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(f,b)),this.options.tooltipPositionY&&(w=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(f,b))}catch(t){c.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}this.options.tooltipShowAlwaysColumns;if(this.options.tooltipHeaderShowAlways){var S=WebSquare.style.getAbsoluteLeft(e)+v,C=WebSquare.style.getAbsoluteTop(e)+w,x="";if(x="text"==g&&l?m.firstChild.value:"link"==g?"NOBR"==e.firstChild.tagName?m.firstChild.firstChild.innerHTML:m.firstChild.innerHTML:"textImage"==g||("autoComplete"==g||"calendar"==g)&&"true"==n.options.viewTypeIconImage?"NOBR"==s.firstChild.tagName?m.firstChild.innerHTML:m.innerHTML:"image"==g?m.firstChild.src:"drilldown"==g?"NOBR"==e.firstChild.tagName?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"BUTTON"==e.firstChild.tagName?m.firstChild.innerHTML:m.innerText.wq_trim(),this.options.tooltipFormatterHeader)try{if("function"==typeof(W=a.D.getGlobalFunction(this.options.tooltipFormatterHeader,this.scope_id)))x=W(e.getAttribute("col_id"),x)}catch(t){r.w.printStackTrace(t,null,this)}""!=x&&this.showTooltip(S,C,x,w)}else if("ellipsis"==y){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),this.render.appendChild(this.toolTipRuler),this.toolTipRuler.className=m.className,"text"==g&&l?(this.toolTipRuler.innerHTML="<div>"+m.firstChild.value+"</div>",this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(m.firstChild,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(m.firstChild,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(m.firstChild,"font-weight")):(this.toolTipRuler.innerHTML=m.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(m,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(m,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(m,"font-weight"));var _=this.toolTipRuler.firstChild.offsetWidth;if("textImage"==g||("autoComplete"==g||"calendar"==g)&&"true"==n.options.viewTypeIconImage)var I=s.clientWidth;else I=e.clientWidth;if(3!=m.firstChild.nodeType){var T=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),k=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");_-=parseInt(T||"0",10),_-=parseInt(k||"0",10),"textImage"==g||("autoComplete"==g||"calendar"==g)&&"true"==n.options.viewTypeIconImage?(I-=parseInt(WebSquare.style.getStyle(s.firstChild,"padding-left"),10),I-=parseInt(WebSquare.style.getStyle(s.firstChild,"padding-right"),10),I-=parseInt(WebSquare.style.getStyle(s,"padding-left"),10),I-=parseInt(WebSquare.style.getStyle(s,"padding-right"),10)):(I-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-left"),10),I-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-right"),10),I-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),I-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10))}if(I<_||"image"==g||I==_&&e.clientWidth<e.scrollWidth){S=WebSquare.style.getAbsoluteLeft(e)+v,C=WebSquare.style.getAbsoluteTop(e)+w,x=""
;if(x="text"==g&&l?m.firstChild.value:"link"==g?"NOBR"==e.firstChild.tagName?m.firstChild.firstChild.innerHTML:m.firstChild.innerHTML:"textImage"==g||("autoComplete"==g||"calendar"==g)&&"true"==n.options.viewTypeIconImage?"NOBR"==s.firstChild.tagName?m.firstChild.innerHTML:m.innerHTML:"image"==g?m.firstChild.src:"drilldown"==g?"NOBR"==e.firstChild.tagName?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"BUTTON"==e.firstChild.tagName?m.firstChild.innerHTML:m.innerText.wq_trim(),this.render.removeChild(this.toolTipRuler),this.options.tooltipFormatterHeader)try{if("function"==typeof(W=a.D.getGlobalFunction(this.options.tooltipFormatterHeader,this.scope_id)))x=W(e.getAttribute("col_id"),x)}catch(t){r.w.printStackTrace(t,null,this)}x.match('href=""')&&(x=x.wq_replaceAll('href=""',"")),this.showTooltip(S,C,x,w)}else this.render.removeChild(this.toolTipRuler)}else{var D=e.firstChild.offsetWidth;if(!0===this.options.showSortableImage){var L=e.firstChild.getElementsByTagName("nobr")[0];L&&(D=L.offsetWidth+parseInt(WebSquare.style.getStyle(e.firstChild,"margin-left"),10))}if(i+3<D){S=WebSquare.style.getAbsoluteLeft(e)+v,C=WebSquare.style.getAbsoluteTop(e)+w,x="";if(x="text"==g&&l?m.firstChild.value:"link"==g?"NOBR"==e.firstChild.tagName?m.firstChild.firstChild.innerHTML:m.firstChild.innerHTML:"image"==g?m.firstChild.src:"drilldown"==g?"NOBR"==e.firstChild.tagName?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"BUTTON"==e.firstChild.tagName?m.firstChild.innerHTML:m.innerText.wq_trim(),this.options.tooltipFormatterHeader)try{var W;if("function"==typeof(W=a.D.getGlobalFunction(this.options.tooltipFormatterHeader,this.scope_id)))x=W(e.getAttribute("col_id"),x)}catch(t){r.w.printStackTrace(t,null,this)}this.showTooltip(S,C,x,w)}}}}}},m.prototype.bodyOver=function(t,e){if(this.options.rowStatusTooltipDisplay&&e.className.indexOf(this.options.bodyTdClass+"_rowStatus")>=0){var i=u=e.offsetWidth,o="",s=20,n=(C=e.offsetHeight)+3;try{this.options.tooltipPositionX&&(s=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(i,C)),this.options.tooltipPositionY&&(n=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(i,C))}catch(t){c.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}var l=WebSquare.style.getAbsoluteLeft(e)+s,h=WebSquare.style.getAbsoluteTop(e)+n,d=this.getElemRowIndex(e);switch(this.getRowStatus(d)){case"C":o=WebSquare.language.getMessage("Grid_rowStatus_insert");break;case"R":o=WebSquare.language.getMessage("Grid_rowStatus_initialValue");break;case"U":o=WebSquare.language.getMessage("Grid_rowStatus_update");break;case"D":o=WebSquare.language.getMessage("Grid_rowStatus_delete");break;case"V":o=WebSquare.language.getMessage("Grid_rowStatus_D_After_C");break;default:return}if(this.options.tooltipFormatter)try{if("function"==typeof(A=a.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id)))o=A(d=this.getElemRowIndex(e),b=this.getColumnIndex(e.getAttribute("col_id")),o)}catch(t){r.w.printStackTrace(t,null,this)}""!=o&&this.showTooltip(l,h,o,n)}else{if(!this.options.tooltipDisplay)return;if(e.className.indexOf(this.options.bodyTdClass+"_rowNumber")>=0||e.className.indexOf(this.options.bodyTdClass+"_rowStatus")>=0)return;var u;if((u=e.offsetWidth)<2||!e.firstChild)return;var p=e.getAttribute("col_id");if(this.options.tooltipDisplayColumn&&p&&-1===this.options.tooltipDisplayColumn.indexOf(p))return;var g=null;if(p){var m=this.getCellInfo(p);if(0==m.internal&&"custom"==m.options.inputType){d=this.getRealRowIndex(this.getElemRowIndex(e));m=m.cellManagerHashByRowIndex[d]?m.cellManagerHashByRowIndex[d]:m}w=m.options.inputType;var f=m.options.embeddedInput;if(f&&"text"==w){d=this.getElemRowIndex(e);var b=this.getColumnIndex(e.getAttribute("col_id"));f=!this._getEditDisabled(d,b)&&!this.___getEditReadOnly(d,b)}
if("textImage"==w||("autoComplete"==w||"calendar"==w)&&"true"==m.options.viewTypeIconImage)if("100%"==e.firstChild.style.width)g=e.getElementsByTagName("td")[0];else{var y=this.event.getTargetIterator(t),v="w2grid_textImage_image";for("true"===m.options.viewTypeIconImage&&("autoComplete"==w?v=this.mainGrid.options.bodyTdClass+"_autoComplete_img":"calendar"==w&&(v=this.mainGrid.options.bodyTdClass+"_calendar_div_img"));y.next();)if(y.match(null,null,"td")&&y.getElement().id){g=this.hasClass(e,v)?e.previousSibling:e,e=y.getElement();break}}}else var w="text";if("checkbox"==w||"radio"==w||"text"==w||"textarea"==w||"textImage"==w||"link"==w||"calendar"==w||"expression"==w||"select"==w&&!f||"drilldown"==w||"autoComplete"==w||"checkcombobox"==w||"button"==w||this.options.showImageTooltip&&"image"==w){var S;"textarea"==w?(S=e.cloneNode(!0)).firstChild.style.width="":S=g||e;i=u;var C=e.offsetHeight,x=WebSquare.style.getStyle(e,"text-overflow");s=20,n=C+3;try{this.options.tooltipPositionX&&(s=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(i,C)),this.options.tooltipPositionY&&(n=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(i,C))}catch(t){c.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}var _=this.options.tooltipShowAlwaysColumns;if(this.options.tooltipShowAlways||p&&_&&_.indexOf(p)>-1){l=WebSquare.style.getAbsoluteLeft(e)+s,h=WebSquare.style.getAbsoluteTop(e)+n,o="";if("text"==w&&f)o=S.firstChild.value;else if("link"==w)o="NOBR"==e.firstChild.tagName?S.firstChild.firstChild.innerHTML:S.firstChild.innerHTML;else if("textImage"==w||("autoComplete"==w||"calendar"==w)&&"true"==m.options.viewTypeIconImage)o="NOBR"==g.firstChild.tagName?S.firstChild.innerHTML:S.innerHTML;else if("image"==w)o=S.firstChild.src;else if("drilldown"==w)o="NOBR"==e.firstChild.tagName?e.firstChild.innerText.replace(/^\s*/,""):e.innerText;else if("select"==w&&"ul"===m.options.tableRender)o=S.innerText.wq_trim();else if("checkbox"==w||"radio"==w){(I=S.getElementsByTagName("label")[0])&&(o=I.innerText)}else o="NOBR"==e.firstChild.tagName||"BUTTON"==e.firstChild.tagName?S.firstChild.innerHTML:S.innerText.wq_trim();if(this.options.tooltipFormatter)try{if("function"==typeof(A=a.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id)))o=A(d=this.getElemRowIndex(e),b=this.getColumnIndex(e.getAttribute("col_id")),o,u<e.scrollWidth)}catch(t){r.w.printStackTrace(t,null,this)}""!=o&&this.showTooltip(l,h,o,n)}else if("ellipsis"==x){var I;if(("checkbox"==w||"radio"==w)&&!(I=S.getElementsByTagName("label")[0]))return;this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),this.render.appendChild(this.toolTipRuler),this.toolTipRuler.className=S.className,"text"==w&&f?(this.toolTipRuler.innerHTML="<div>"+S.firstChild.value+"</div>",this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(S.firstChild,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(S.firstChild,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(S.firstChild,"font-weight")):("drilldown"==w&&"line"==m.options.depthType?this.toolTipRuler.innerHTML=S.getElementsByTagName("nobr")[0].outerHTML:this.toolTipRuler.innerHTML="checkbox"==w||"radio"==w?I.outerHTML:S.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(S,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(S,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(S,"font-weight"));var T=this.toolTipRuler.firstChild.offsetWidth;if(null!=e.getBoundingClientRect&&(T=this.toolTipRuler.firstChild.getBoundingClientRect().width),"textImage"==w||("autoComplete"==w||"calendar"==w)&&"true"==m.options.viewTypeIconImage){var k=g.clientWidth
;null!=e.getBoundingClientRect&&(k=g.getBoundingClientRect().width)}else{k=e.clientWidth;if(null!=e.getBoundingClientRect){var D=(WebSquare.style.getSize(e,"outerwidth")-WebSquare.style.getSize(e,"width"))/2;k=e.getBoundingClientRect().width-D}"drilldown"==w&&"line"==m.options.depthType?k=e.clientWidth-e.firstChild.clientWidth:"checkbox"!=w&&"radio"!=w||(k=e.clientWidth-WebSquare.style.getSize(e.firstChild,"outerMarginWidth"))}if(3!=S.firstChild.nodeType){var L=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),W=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");T-=parseInt(L||"0",10),T-=parseInt(W||"0",10),"textImage"==w||("autoComplete"==w||"calendar"==w)&&"true"==m.options.viewTypeIconImage?(k-=parseInt(WebSquare.style.getStyle(g.firstChild,"padding-left"),10),k-=parseInt(WebSquare.style.getStyle(g.firstChild,"padding-right"),10),k-=parseInt(WebSquare.style.getStyle(g,"padding-left"),10),k-=parseInt(WebSquare.style.getStyle(g,"padding-right"),10)):(k-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-left"),10),k-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-right"),10),k-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),k-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10))}if(k<T||"image"==w||k==T&&e.clientWidth<e.scrollWidth){l=WebSquare.style.getAbsoluteLeft(e)+s,h=WebSquare.style.getAbsoluteTop(e)+n,o="";if(o="text"==w&&f?S.firstChild.value:"link"==w?"NOBR"==e.firstChild.tagName?S.firstChild.firstChild.innerHTML:S.firstChild.innerHTML:"textImage"==w||("autoComplete"==w||"calendar"==w)&&"true"==m.options.viewTypeIconImage?"NOBR"==g.firstChild.tagName?S.firstChild.innerHTML:S.innerHTML:"image"==w?S.firstChild.src:"drilldown"==w?"NOBR"==e.firstChild.tagName?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"BUTTON"==e.firstChild.tagName?S.firstChild.innerHTML:S.innerText.wq_trim(),this.render.removeChild(this.toolTipRuler),this.options.tooltipFormatter)try{if("function"==typeof(A=a.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id)))o=A(d=this.getElemRowIndex(e),b=this.getColumnIndex(e.getAttribute("col_id")),o)}catch(t){r.w.printStackTrace(t,null,this)}o.match('href=""')&&(o=o.wq_replaceAll('href=""',"")),this.showTooltip(l,h,o,n)}else this.render.removeChild(this.toolTipRuler)}else{if(u+3<e.firstChild.offsetWidth){l=WebSquare.style.getAbsoluteLeft(e)+s,h=WebSquare.style.getAbsoluteTop(e)+n,o="";if(o="text"==w&&f?S.firstChild.value:"link"==w?"NOBR"==e.firstChild.tagName?S.firstChild.firstChild.innerHTML:S.firstChild.innerHTML:"image"==w?S.firstChild.src:"drilldown"==w?"NOBR"==e.firstChild.tagName?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:"NOBR"==e.firstChild.tagName||"BUTTON"==e.firstChild.tagName?S.firstChild.innerHTML:S.innerText.wq_trim(),this.options.tooltipFormatter)try{var A;if("function"==typeof(A=a.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id)))o=A(d=this.getElemRowIndex(e),b=this.getColumnIndex(e.getAttribute("col_id")),o)}catch(t){r.w.printStackTrace(t,null,this)}this.showTooltip(l,h,o,n)}}}}},m.prototype.bodyOut=function(t,e){var i=this;(i.options.tooltipDisplay||i.options.headerTooltipDisplay||this.options.tooltipHeader||i.options.rowStatusTooltipDisplay)&&e&&i.hideTooltip()},m.prototype.showTooltip=function(t,e,i,o){if(null==this.editedCell){var r=document.body.scrollWidth;this.tooltip||(this.tooltip=new WebSquare.uiplugin.output(this.id+"_tooltip",{className:"w2grid_tooltip "+this.options.tooltipClass,style:"position:absolute;"+this.options.tooltipStyle}),this.tooltip.parentFrame=this.parentFrame,this.tooltip.writeTo(WebSquare.getBody()),this.tooltip.activate(),"click"===this.options.tooltipHide?this.tooltip.render.onclick=function(){this.style.display="none"}:this.tooltip.render.onmouseover=function(){this.style.display="none"}),"click"===this.options.tooltipHide&&(1==WebSquare.getBody().hasClass("w2drag_activate")?(this.tooltip.render.onclick=null,
this.tooltip.render.onmouseover=function(){this.style.display="none"}):(this.tooltip.render.onclick=function(){this.style.display="none"},this.tooltip.render.onmouseover=null)),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.tooltip.render.innerHTML=i,u.B.fireEvent(this,"ontooltipshow");var a=this.tooltip.render.offsetTop+this.tooltip.render.offsetHeight+20,n=document.body.scrollHeight;if(null!=WebSquare.BootLoader.fullViewRatio&&(n=document.body.clientHeight+Math.abs(document.body.getBoundingClientRect().top)),a>n){var l=e-(o+this.tooltip.render.offsetHeight);l<0&&(l=0),this.tooltip.setStyle("top",l+"px")}if(document.body.scrollWidth>r){var h=t-(document.body.scrollWidth-r);h<0&&(h=0),this.tooltip.setStyle("left",h+"px")}this.options.tooltipDisplayTime>0&&s.v.setTimer(this.hideTooltip,{key:this.id+"_tooltip_hide_timer",caller:this,delay:this.options.tooltipDisplayTime})}},m.prototype.hideTooltip=function(){this.tooltip&&(this.options.tooltipDisplayTime>0&&s.v.clearTimer(this.id+"_tooltip_hide_timer"),u.B.fireEvent(this,"ontooltiphide"),this.tooltip.setStyle("display","none"))},m.prototype.bodyClick=function(t,e){try{var i=this.getLastFocusedCell().focusedTd;this.options.rowMouseOver&&this.removeRowOverStyle(this.lastOverSrc,"grid_body_row_over","grid_body_row");var o=this.rowIndex,s=parseInt(e.getAttribute("tdIndex")),n=(I=parseInt(s/this.realRowDataLength))+this.rowIndex,l=e.getAttribute("col_id"),h=this._dataList.getRowPosition(),d=this.getColumnIndex(this._dataList.getColumnPosition()),c=I+o,p=s%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(l&&(x=this.getCellInfo(l)),"number"!=typeof(D=this.dataList.getRealRowIndex(n)))return void(D&&"header"==D.type&&this.toggleGroup(D.groupId));if(this.options.focusDefaultColumn){var g=e.getAttribute("id")||"",m="_headerRowNumber"===g.slice(0,"_headerRowNumber".length),f="_headerRowStatus"===g.slice(0,"_headerRowStatus".length);if(m||f)return this.__setFocusedCell(t,e,{editMode:!1}),void(f?u.B.fireEvent(this,"onrowstatusclick",c):u.B.fireEvent(this,"onrownumclick",c))}if(null==l)return;this.moveDirection=null;var b=d-p,y=h-c;0==b&&0==y?this.moveDirection="none":(b>0||b<0)&&(y>0||y<0)?this.moveDirection="both":b>0||b<0?this.moveDirection="column":(y>0||y<0)&&(this.moveDirection="row");var v=e.getAttribute("editModeEvent")||"",w=!1;if(""!=v&&"onsecondclick"==v.toLowerCase()||""==v&&"onsecondclick"==this.options.editModeEvent.toLowerCase())for(var S=0;S<this.focusedCell.length;S++)this.focusedCell[S].focusedRowIndex==c&&this.focusedCell[S].focusedColIndex==p&&(w=!0);var C,x=this.getCellInfo(e);u.B.getTarget(t);if(!x.options.blockSelect&&("button"!=x.options.inputType||this._getEditDisabled(c,p)||this.___getEditReadOnly(c,p))){var _=!0;if(this.options.preventDuplicateFocusedCell&&"linear"===this.options.focusFlow&&"link"!==x.options.inputType&&(_=!1),_){if("enter"===this.options.drilldownToggle&&this.isMobile&&this.isHammerEnabled())if(1==this.focusedCell.length)if((x=this.getCellInfo(this.focusedCell[0].focusedColIndex))&&"drilldown"==x.options.inputType){s=parseInt(e.getAttribute("tdIndex"));var I=parseInt(s/this.realRowDataLength),T=(l=parseInt(e.getAttribute("colIndex")),c=this._getGroupbyDisplayRowIndex(I+o),p=s%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),this.focusedCell[0].focusedColIndex),k=this.focusedCell[0].focusedRowIndex;if(c===k&&p===T){var D=this.dataList.getRealRowIndex(k);this.toggle(D)}}this.__setFocusedCell(t,e,{editMode:"none"==x.options.focusMode,dont_fixScroll:this.options.CellClickFixScrollX})}x.options.embeddedInput&&(this.focusedByApi=!1)}if(t.altKey&&!0===this.options.contextMenuAltClick)return void this.clickRightButtonCell(t);var L=!0;switch(C=a.D.isIE()?t.srcElement:t.target,x.options.inputType){case"radio":case"checkbox":
if("INPUT"!=C.tagName)if(!this.options.checkOnCellClick||"LABEL"==C.tagName||this._getEditDisabled(c,p)||this.___getEditReadOnly(c,p))L=!1;else{var W=e.getElementsByTagName("input")[0];W&&(W.checked=!W.checked)}case"drilldown":this.options.ignoreToggleOnDisabled&&this._getEditDisabled(n,l)&&(L=!1)}var A,E=!1,M=this.isHammerEnabled();if(L&&!(A=this.setCellClickEdit(e))){v=e.getAttribute("editModeEvent")||x.options.editModeEvent||"";var q=null!=i&&i===e,R=""!=v&&"onclick"==v.toLowerCase()||""==v&&"onclick"==this.options.editModeEvent.toLowerCase()||w;if((!M||q)&&R){if(!this._getEditDisabled(n,l)){s=parseInt(e.getAttribute("tdIndex")),I=parseInt(s/this.realRowDataLength),l=parseInt(e.getAttribute("colIndex"));var N=e.getAttribute("col_id");c=this._getGroupbyDisplayRowIndex(I+o),p=s%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(this.hideTooltip(),!("button"===(x=this.getCellInfo(p)).options.inputType||!x.options.embeddedInput&&("checkbox"===x.options.inputType||"radio"===x.options.inputType)&&this.options.preventMultipleClick)){var F=!1;if(0==x.internal&&"custom"==x.options.inputType)("button"===(O=x.cellManagerHashByRowIndex[this.getRealRowIndex(c)]?x.cellManagerHashByRowIndex[this.getRealRowIndex(c)]:x).options.inputType||!O.options.embeddedInput&&("checkbox"===O.options.inputType||"radio"===O.options.inputType)&&this.options.preventMultipleClick)&&(F=!0);F||"drilldown"==x.options.inputType&&this.options.ignoreCellClick&&A||u.B.fireEvent(this,"oncellclick",c,p,N)}E=!0}this.setEditMode(e)}}if(!E&&!this._getEditDisabled(n,l)){s=parseInt(e.getAttribute("tdIndex")),I=parseInt(s/this.realRowDataLength),l=parseInt(e.getAttribute("colIndex")),N=e.getAttribute("col_id"),c=I+o,p=s%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(M||this.options.tooltipDisplay&&this.isMobile?this.bodyOver(t,e):this.hideTooltip(),!("button"===(x=this.getCellInfo(p)).options.inputType||!x.options.embeddedInput&&("checkbox"===x.options.inputType||"radio"===x.options.inputType&&this.options.preventDuplicateFocusedCell)&&this.options.preventMultipleClick&&!(this.options.checkOnCellClick&&"LABEL"!=C.tagName))){var O;if(0==x.internal&&"custom"==x.options.inputType)if("button"===(O=x.cellManagerHashByRowIndex[this.getRealRowIndex(c)]?x.cellManagerHashByRowIndex[this.getRealRowIndex(c)]:x).options.inputType||!O.options.embeddedInput&&"checkbox"===O.options.inputType&&this.options.preventMultipleClick)return;c=this._getGroupbyDisplayRowIndex(c),"drilldown"==x.options.inputType&&this.options.ignoreCellClick?A||u.B.fireEvent(this,"oncellclick",c,p,N):("radio"!==x.options.inputType&&"checkbox"!==x.options.inputType||"LABEL"!==C.tagName)&&u.B.fireEvent(this,"oncellclick",c,p,N)}}}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.bodyDblClick=function(t,e){if("INPUT"==e.tagName)var i=this.getLastFocusedCell(),o=i.focusedRowIndex,s=i.focusedColIndex;else{var r=parseInt(e.getAttribute("tdIndex"));o=parseInt(r/this.realRowDataLength)+this.rowIndex,s=e.getAttribute("col_id")}if(null!=s){var a=e.getAttribute("editModeEvent")||"";if((""!=a&&"ondblclick"==a.toLowerCase()||""==a&&"ondblclick"==this.options.editModeEvent.toLowerCase())&&this.setEditMode(e),!this._getEditDisabled(o,s)){this.rollbackCommitFlag=!1;var n=this.isHammerEnabled(),l=this.getCellInfo(s);if(n||l.options.blockSelect)u.B.fireEvent(this,"oncelldblclick",this._getGroupbyDisplayRowIndex(o),this.getColumnIndex(s),this.getColumnID(s));else{var h=this.getFocusedColumnIndex();u.B.fireEvent(this,"oncelldblclick",this._getGroupbyDisplayRowIndex(this._getFocusedRowIndex()),h,this.getColumnID(h))}this.rollbackCommitFlag=!0}}},m.prototype.headerClick=function(t,e){this.focusedByApi=!1,this.options.tooltipHeader&&this.hideTooltip();var i=e.getAttribute("header_id")
;if(this.options.preventMultipleClick&&this.headerInfoHash[i]&&this.headerInfoHash[i].options&&"checkbox"===this.headerInfoHash[i].options.inputType||1!=this._getHeaderDisabled(i)&&u.B.fireEvent(this,"onheaderclick",i),null!=this.editedCell&&this.editedCell.handleEndEdit(),1==this.noevent);else if(this.getDataLength()>0&&"onclick"==this.options.sortEvent&&(this.options.sortable||"true"==e.getAttribute("sortable"))&&!this.groupbyStatus.grouped&&(this.fireSortEvent(t,e),this.options.sortHeaderDiv)){var o=e.getElementsByTagName("button");if(o.length>0)o[o.length-1].focus(),1==this.options.senseReader&&(this.focusedCell=[],this.addGridScroll(0-this.rowIndex))}this.noevent=!1},m.prototype.headerDdlClick=function(t,e){u.B.fireEvent(this,"onheaderdblclick",e.getAttribute("header_id")),this.getDataLength()>0&&("ondblclick"!=this.options.sortEvent||!this.options.sortable&&"true"!=e.getAttribute("sortable")||this.groupbyStatus.grouped||this.fireSortEvent(t,e)),this.groupbyStatus.grouped&&this.options.sortable||(this.noevent=!1)},m.prototype.fireGroupByRangeSortEvent=function(t,e){try{return}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.recursiveRangeSort=function(t,e,i){try{return}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.fireSortEvent=function(t,e){if(!e.disabled&&!(e.className.indexOf(this.options.headerTdClass+"_rowNumber")>=0||e.className.indexOf(this.options.headerTdClass+"_rowStatus")>=0)){var i=e.getAttribute("header_id");if("false"!==this.getHeaderConfigValue(e,i,"sortable")){var o=this.headerToBodyRelation[i],s=e.getAttribute("orderByColumn");s&&this.bodyIdColIndexMap[s]&&(o=s);var r=!this.options.useCtrlOnMultisort||(t.ctrlKey||t.metaKey);this.options.preventMultisort&&(r=!1);var a=this.cellInfoHash[o];if("gridView"!=this.initializeType||"expression"!=a.options.inputType||"true"==a.options.expressionSort){if(null==this.headerSortStatusArr&&(this.headerSortStatusArr=[]),this.headerSortStatusArr[o]){if(this.options.noSortInit?-1==this.headerSortStatusArr[o].sortOrder?this.headerSortStatusArr[o].sortOrder=1:this.headerSortStatusArr[o].sortOrder=-1:this.options.sortOrderReverse?this.headerSortStatusArr[o].sortOrder=(this.headerSortStatusArr[o].sortOrder+3)%3-1:this.headerSortStatusArr[o].sortOrder=(this.headerSortStatusArr[o].sortOrder-3)%3+1,!r){var n=this.headerSortStatusArr[o];this.clearHeaderSort(),this.headerSortStatusArr.push(n),this.headerSortStatusArr[o]=this.headerSortStatusArr[0]}}else{(n={}).headerId=i,n.colID=o,this.options.sortOrderReverse?n.sortOrder=-1:n.sortOrder=1;a=this.getCellInfo(o);var l=this.getColumnOption(a.options.col_id,"dataType"),h=this._dataList.getCellInfo(o).options.dataType;n.dataType="number"==l||"bigDecimal"===l||"float"==l?l:h,r?(this.headerSortStatusArr.push(n),this.headerSortStatusArr[o]=this.headerSortStatusArr[this.headerSortStatusArr.length-1]):(this.clearHeaderSort(),this.headerSortStatusArr.push(n),this.headerSortStatusArr[o]=this.headerSortStatusArr[0])}var d=[],c=[],p=(l=[],{});if(p.headerId=i,p.bodyColId=o,p.sortOrder=this.headerSortStatusArr[o].sortOrder,0==this.headerSortStatusArr.length)this.dataList.clearSortFilter();else{for(var g=this.headerSortStatusArr.length-1;g>=0;g--)if(0==this.headerSortStatusArr[g].sortOrder){var m=this.headerSortStatusArr[g].colID;if(this.setHeaderSortImage(i,0,0),this.headerSortStatusArr.splice(g,1),delete this.headerSortStatusArr[m],0==this.headerSortStatusArr.length)return u.B.fireEvent(this,"onbeforesort",p),this.dataList.clearSort(),void u.B.fireEvent(this,"onsort",p)}else d.push(this.headerSortStatusArr[g].colID),c.push(this.headerSortStatusArr[g].sortOrder),l.push(this.headerSortStatusArr[g].dataType);if(d.reverse(),c.reverse(),l.reverse(),0==u.B.fireEvent(this,"onbeforesort",p))return;this.dataList.setFilter({type:"sort",sortIndex:d.join(" "),sortOrder:c.join(" "),dataType:l.join(" "),focuseMode:this.options.filterFocusMode,ignoreEmptyStringOnSort:this.options.ignoreEmptyStringOnSort,
setEmptyStringFirstOnSort:this.options.setEmptyStringFirstOnSort,setEmptyStringSortableOnSort:this.options.setEmptyStringSortableOnSort})}this.drawHeaderSortImages(),u.B.fireEvent(this,"onsort",p)}}}},m.prototype.footerClick=function(t,e){u.B.fireEvent(this,"onfooterclick",e.getAttribute("footer_id")),null!=this.editedCell&&this.editedCell.handleEndEdit()},m.prototype.footerDblClick=function(t,e){u.B.fireEvent(this,"onfooterdblclick",e.getAttribute("footer_id")),null!=this.editedCell&&this.editedCell.handleEndEdit()},m.prototype.subtotalClick=function(t,e){try{for(var i=e.getAttribute("id"),o=e.parentNode.getAttribute("targetcolumnid"),s=0,a=-1,n=0;n<this.subtotalRowHash[o].length;n++)if(this.subtotalRowHash[o][n]===e.parentNode){a=parseInt(e.parentNode.getAttribute("data-subtotalrowindex"),10);break}if(a>-1){var l=this._dataList.getCellData(a,o);for(s=a-1;this._dataList.getCellData(s,o)==l&&s>=0;s--);s++}var h={colID:i,startRowIndex:s,endRowIndex:a,element:e};u.B.fireEvent(this,"onsubtotalclick",h),null!=this.editedCell&&this.editedCell.handleEndEdit()}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.subtotalDblClick=function(t,e){try{for(var i=e.getAttribute("id"),o=e.parentNode.getAttribute("targetcolumnid"),s=0,a=-1,n=0;n<this.subtotalRowHash[o].length;n++)if(this.subtotalRowHash[o][n]===e.parentNode){a=parseInt(e.parentNode.getAttribute("data-subtotalrowindex"),10);break}if(a>-1){var l=this._dataList.getCellData(a,o);for(s=a-1;this._dataList.getCellData(s,o)==l&&s>=0;s--);s++}var h={colID:i,startRowIndex:s,endRowIndex:a,element:e};u.B.fireEvent(this,"onsubtotaldblclick",h)}catch(t){r.w.printStackTrace(t,null,this)}},m.prototype.handleTouchStart=function(t){!this.isHammerEnabled()&&this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip(),s.v.clearTimer(this.id+"_iScroll_slideX");var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;(e||i)&&(this.iScrollAddMoveClass(),this.iScroll.moveDirection=null,this.iScroll.propagation=null,this.iScroll.prevTouches=[{x:e?t.touches[0].pageX:t.pageX,y:e?t.touches[0].pageY:t.pageY}],s.v.setTimer((function(){this.iScrollRemoveMoveClass(),this.iScroll.prevTouches=[],this.iScroll.propagation="pass"}),{key:this.id+"_iScroll",caller:this,delay:this.options.iScrollMoveEffectTime}))},m.prototype.handleTouchMove=function(t){if("pass"!=this.iScroll.propagation){this.iScroll.addMoveClass&&(this.iScrollAddMoveClass(),this.iScroll.addMoveClass=!1);var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;if(e||i){var o=this.scrollX_right,r=this.getElementById(this.id+"_scrollY_div");this.iScroll.prevTouches.push({x:e?t.touches[0].pageX:t.pageX,y:e?t.touches[0].pageY:t.pageY});var a=this.iScroll.prevTouches=this.iScroll.prevTouches.splice(-2),n=a[0].x-a[1].x,l=a[0].y-a[1].y,h=this.iScroll.moveDirection;if(h||(h=this.iScroll.moveDirection=Math.abs(l)>=Math.abs(n)?"Y":"X",this.iScroll.moveDistance=Math.abs(l)>=Math.abs(n)?Math.abs(l):Math.abs(n)),this.options.scrollByColumnAdaptive&&this.event.hasEvent(this.id+"_body_tbody","onscroll")&&"X"===h)return void u.B.stopEvent(t);var d=this.hasSubtotal&&this.lastSubtotalRow&&"none"==this.lastSubtotalRow.style.display;if("X"==h&&n<0&&0==o.scrollLeft||"X"==h&&n>0&&o.scrollLeft>=o.firstChild.offsetWidth-o.offsetWidth||"Y"==h&&l<0&&0==r.scrollTop||"Y"==h&&l>0&&this.rowIndex+this.lastIndex+1==this.getDataLength()&&!d||"Y"==h&&this.hasClass("w2grid_adaptive_crosstab")||"Y"==h&&0===this.getDataLength())return void("stop"==this.iScroll.propagation?u.B.stopEvent(t):(this.iScrollRemoveMoveClass(),this.iScroll.prevTouches=[],this.iScroll.propagation="pass"));"X"==h?this.moveXScroll(n):this.moveYScroll(l),this.iScroll.propagation="stop",u.B.stopEvent(t),s.v.setTimer((function(){this.iScrollRemoveMoveClass(),this.iScroll.addMoveClass=!0}),{key:this.id+"_iScroll",caller:this,delay:this.options.iScrollMoveEffectTime})}}},m.prototype.handleTouchEnd=function(t){
if(this.isMobile||window.navigator.msPointerEnabled&&this.iScroll.prevTouches&&"touch"==t.pointerType){s.v.clearTimer(this.id+"_iScroll"),this.iScroll.prevTouches=this.iScroll.prevTouches.splice(-2);var e=this.iScroll.prevTouches;if(e.length>=2){var i=e[0].x-e[1].x;if(this.options.scrollByColumnAdaptive&&this.event.hasEvent(this.id+"_body_tbody","onscroll")&&"X"===this.iScroll.moveDirection){var o=this.getElementById(this.id+"_body_tbody"),r=o.firstChild.offsetWidth,a=0;return i>0?a=Math.ceil(i/r)*r:i<0&&(a=Math.floor(i/r)*r),void(o.scrollLeft=Math.floor((o.scrollLeft+a)/r)*r)}var n=new Date;this.slideX(i,n)}else this.iScrollRemoveMoveClass()}},m.prototype.iScrollAddMoveClass=function(){var t=this.getElementById(this.id+"_iScrollX"),e=this.getElementById(this.id+"_iScrollY");this.__addClass(t,"w2grid_iScrollX_move"),this.__addClass(e,"w2grid_iScrollY_move")},m.prototype.iScrollRemoveMoveClass=function(){var t=this.getElementById(this.id+"_iScrollX"),e=this.getElementById(this.id+"_iScrollY");this.__removeClass(t,"w2grid_iScrollX_move"),this.__removeClass(e,"w2grid_iScrollY_move")},m.prototype.moveXScroll=function(t){var e=this.getElementById(this.id+"_iScrollX"),i=this.getElementById(this.id+"_dataLayer"),o=this.getElementById(this.id+"_scrollX_left"),s=this.scrollX_right;s.scrollLeft+=t;var r=parseInt(o.style.width,10),a=s.firstChild.offsetWidth-s.offsetWidth,n=parseInt(s.offsetWidth*s.offsetWidth/s.firstChild.offsetWidth,10);e.style.width=(n<30?30:n)+"px",e.style.left=r+s.scrollLeft/a*(i.offsetWidth-r-e.offsetWidth)+"px",this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip()},m.prototype.slideX=function(t,e){var i=new Date,o=parseInt(t/3,10);this.moveXScroll(o),t-=o,Math.abs(t)>=0&&i-e<this.options.iScrollSlideTime?(s.v.clearTimer(this.id+"_iScroll_slideX"),s.v.setTimer(this.slideX,{key:this.id+"_iScroll_slideX",caller:this,delay:this.options.iScrollSlidePeriod,args:[t,e]})):this.iScrollRemoveMoveClass()},m.prototype.moveYScroll=function(t){t*=parseInt(this.options.touchScrollDelta,10)||5;var e=this.getElementById(this.id+"_iScrollY"),i=this.getElementById(this.id+"_scrollY_div");i.scrollTop+=t;var o=i.firstChild.offsetHeight,s=this.getElementById(this.id+"_dataLayer"),r=o-s.offsetHeight,a=parseInt(s.offsetHeight*s.offsetHeight/o,10);e.style.height=(a<30?30:a)+"px",e.style.top=i.scrollTop/r*(s.offsetHeight-e.offsetHeight)+"px",this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip()},m.prototype.tbodyMoveXScroll=function(t){if(this.editedCell&&this.editedCell.handleEndEdit(),!this.mobile&&this.options.scrollByColumnAdaptive,this.options.adaptiveSlideHeader){var e=this.options.adaptive,i=parseInt(this.options.adaptiveThreshold)||480;if("crosstab"==e&&!(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)&&parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=i&&this.slideHeadObj&&"absolute"==this.slideHeadObj.render.style.position){this.slideHeadObj.hidden&&($(this.slideHeadObj.render.firstChild).animate({width:"show"}),this.slideHeadObj.hidden=!1);var o=this;!function t(){a.D.setTimeout((function(){null!=WebSquare.userTimerHash[o.id+"_adaptiveSlideHeader"]?(a.D.clearTimeout(o.id+"_adaptiveSlideHeader"),t()):o.slideHeadObj.hidden||($(o.slideHeadObj.render.firstChild).animate({width:"hide"}),o.slideHeadObj.hidden=!0)}),{delay:1e3,key:o.id+"_adaptiveSlideHeader"})}()}}};var f=function(){};f.prototype.nonCharKeys={4:"insert",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",9:"tab",13:"enter",46:"del",16:"shift",17:"ctrl",18:"alt",21:"hanyoung",25:"hanja",91:"window",20:"capslock",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"numlock",145:"scrolllock"},f.prototype.handleBodyKeyDown=function(t){if(this.isKeyPressed=!0,this.editMode){var e=this.editedCell.options.inputType;switch("text"!==e&&"textarea"!==e&&"calendar"!==e&&"textImage"!==e&&"secret"!==e||(this.beforeEditedCellInfo={
rowIndex:this.editedCell.editRowIndex,colIndex:this.getColumnIndex(this.editedCell.id),colID:this.getColumnID(this.editedCell.id),oldValue:this.editedCell.beforeEditValue||"",newValue:this.editedCell._getEditedValue(),inputType:e,keyCode:t.charCode?t.charCode:t.keyCode}),T=t.keyCode){case 9:if(u.B.stopEvent(t),"down"==this.options.tabKeyMove){if("textarea"==this.editedCell.options.inputType&&!t.ctrlKey)break;if(0==this.editedCell.internal&&"custom"==this.editedCell.options.inputType&&"textarea"==(this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]?this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]:this.editedCell).options.inputType)break;l=!1,"calendar"===e&&(l=this.options.keyMoveEditMode&&"down"==this.options.tabKeyMove);var i=this.editedCell.id}if(!1!==this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t,l],{checkFunc:function(t){return t+""!="false"}})){var o=!1;if("down"===this.options.tabKeyMove){var r=this.getLastFocusedCell().focusedColIndex;o=this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode,i);var n=this.getLastFocusedCell().focusedColIndex;"focusNextTabOrder"===o?(this._fireOnviewchange(i,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(i))]),this.focusNextTabOrder()):(!o||r!==n&&null!=r&&null!=n)&&this._fireOnviewchange(i,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(i))])}else o=this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode);o||this._setFocusedCell(this.editMode)}break;case 13:if("textarea"==this.editedCell.options.inputType&&!t.ctrlKey)break;if(0==this.editedCell.internal&&"custom"==this.editedCell.options.inputType&&"textarea"==(this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]?this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]:this.editedCell).options.inputType)break;var l=!1;a.D.isIEAllVersion()&&"calendar"===e&&(l=this.options.keyMoveEditMode&&"right"!=this.options.enterKeyMove&&"none"!=this.options.enterKeyMove);i=this.editedCell.id;if(!1!==this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t],{checkFunc:function(t){return t+""!="false"}}))if(l){x=this;setTimeout((function(){var e=!1;if("right"==x.options.enterKeyMove||"editRight"==x.options.enterKeyMove)e=x.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode);else if("none"!=x.options.enterKeyMove&&"edit"!=x.options.enterKeyMove){var o=x.getLastFocusedCell().focusedColIndex;e=x.moveVertical(t,t.shiftKey?"up":"down",x.options.keyMoveEditMode,i);var s=x.getLastFocusedCell().focusedColIndex;"focusNextTabOrder"===e?(x._fireOnviewchange(i,"_handleEndEdit_focus",[x.getInput(x.getCellInfo(i))]),x.focusNextTabOrder()):(!e||o!==s&&null!=o&&null!=s)&&x._fireOnviewchange(i,"_handleEndEdit_focus",[x.getInput(x.getCellInfo(i))])}e||x._setFocusedCell(x.editMode)}),1)}else{o=!1;if("right"==this.options.enterKeyMove||"editRight"==this.options.enterKeyMove)o=this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode);else if("none"!=this.options.enterKeyMove&&"edit"!=this.options.enterKeyMove){r=this.getLastFocusedCell().focusedColIndex;o=this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode,i);n=this.getLastFocusedCell().focusedColIndex;"focusNextTabOrder"===o?(this._fireOnviewchange(i,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(i))]),this.focusNextTabOrder()):(!o||r!==n&&null!=r&&null!=n)&&this._fireOnviewchange(i,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(i))])}o||this._setFocusedCell(this.editMode)}break;case 27:this.editedCell.handleCancelEdit(t),this._setFocusedCell(),u.B.stopEvent(t);break;case 86:if((t.ctrlKey||t.metaKey)&&this.options.preventPaste&&!this.editedCell){u.B.stopEvent(t);break}default:var h={};h.rowIndex=this.editedCell.editRowIndex,h.colIndex=this._dataList.getColumnIndex(this.editedCell.id),h.colID=this.editedCell.id,h.keyCode=t.charCode?t.charCode:t.keyCode,
this.editedCell._getEditedValue&&(this.editedCell.beforeEditValue=this.editedCell._getEditedValue()),u.B.fireEvent(this,"oneditkeydown",h)}}else{if(this.options.ignoreKeyCheckFunction){var d=null,c=!1;try{if("function"==typeof this.options.ignoreKeyCheckFunction?d=this.options.ignoreKeyCheckFunction:"function"==typeof(d=a.D.getGlobalFunction(this.options.ignoreKeyCheckFunction,this.scope_id))&&(this.options.ignoreKeyCheckFunction=d),"function"==typeof d&&(c=d.call(this,t)),c)return void u.B.preventDefault(t)}catch(t){d=null}}if("none"!=this.options.focusMode&&(-1==this._getFocusedRowIndex()||null==this.getFocusedColumnIndex())){if(13==t.keyCode&&document.activeElement==this.render&&(this._setFocusedCell(),u.B.stopEvent(t)),"A"!=u.B.getTarget(t).tagName)return;for(var p=this.event.getTargetIterator(t,this.render),g=!1;p.next();)if(p.match("gridBodyDefault")){g=!0;var m=p.getElement(),f=parseInt(m.getAttribute("tdIndex")),b=parseInt(f/this.realRowDataLength),y=m.getAttribute("col_id"),v=this.getColumnIndex(y);this.focusedCell.push({focusedTd:m,focusedRowIndex:b,focusedColIndex:v});var w=m.getElementsByTagName("a");if(-1==this.focusedCellLinkIndex)for(var S=0;S<w.length;S++)document.activeElement==w[S]&&(this.focusedCellLinkIndex=S);this.focusedCellLinkLength=w.length;break}if(!g)return}var C=!1;if(s.v.browserCheck.safari&&(t.ctrlKey||t.metaKey)){this.tempEditableCell=document.activeElement,this.tempEditableCell.contentEditable="true",this.tempEditableCell.style.textShadow="0 0 0 "+WebSquare.style.getStyle(this.tempEditableCell,"color"),this.tempEditableCell.style.color="transparent";var x=this;s.v.setTimer((function(){x.tempEditableCell.contentEditable="inherit",this.tempEditableCell.style.color="",this.tempEditableCell.style.textShadow=""}),{key:this.id+"_tempEditableCell_contentEditable",caller:this,delay:500})}switch(t.keyCode){case 37:case 39:if(this.options.moveKeyEditMode){var _=37==t.keyCode?"left":"right";return this.moveHorizontal({byApi:!0},_,!0),void u.B.stopEvent(t)}case 38:case 40:if(this.skipScrollEndEvent=!1,this.skipScrollStartEvent=!1,this.options.moveKeyEditMode){_=38==t.keyCode?"up":"down";return this.moveVertical({},_,!0),void u.B.stopEvent(t)}case 33:case 34:case 35:case 36:case 9:C=!0;break;case 13:if(this.options.senseReader&&this.options.focusImage&&this.getLastFocusedCell().focusedColIndex)if((k=this.getCellInfo(this.getLastFocusedCell().focusedColIndex))&&"image"==k.options.inputType)for(p=this.event.getTargetIterator(t,this.render);p.next();)if(p.match("w2grid_image")){var I=a.D.getGlobalFunction(k.options.imageClickFunction,this.scope_id);"function"==typeof I&&I.call(this,this.getLastFocusedCell().focusedRowIndex,k.id,this.dataList.getCellData(this.getLastFocusedCell().focusedRowIndex,k.id))}if(this.options.senseReader&&null!=this.getLastFocusedCell().focusedColIndex)if((k=this.getCellInfo(this.getLastFocusedCell().focusedColIndex))&&"select"==k.options.inputType&&"ul"==k.options.tableRender)return this.setEditHtml(t),void u.B.stopEvent(t);C=!0;break;default:C=!1}if(1==C&&"false"==this.options.focusMove){var T=t.charCode?t.charCode:t.keyCode;if(!this.options.senseReader)return;if(9!=T)return}if(this.F2Mode)switch(t.keyCode){case 8:case 46:case 35:case 36:case 37:case 38:case 39:case 40:return}switch(t.keyCode){case 4:break;case 46:this.removeCellData(t),u.B.stopEvent(t);break;case 32:this.doDefaultAction(t);break;case 33:this.movePageUp(t),u.B.stopEvent(t);break;case 34:this.movePageDown(t),u.B.stopEvent(t);break;case 35:this.moveHorizontal(t,"end"),u.B.stopEvent(t);break;case 36:this.moveHorizontal(t,"home"),u.B.stopEvent(t);break;case 37:this.moveHorizontal(t,"left"),u.B.stopEvent(t);break;case 38:this.moveVertical(t,"up"),u.B.stopEvent(t);break;case 39:this.moveHorizontal(t,"right"),u.B.stopEvent(t);break;case 40:this.moveVertical(t,"down"),u.B.stopEvent(t);break;case 9:var k=this.getCellInfo(this.getLastFocusedCell().focusedColIndex)
;if(this.options.senseReader&&k&&"image"==k.options.inputType&&this.options.focusImage&&this.getLastFocusedCell().focusedColIndex){u.B.stopPropagation(t);for(p=this.event.getTargetIterator(t,this.render);p.next();){if(p.match("w2grid_image"))if(u.B.getTarget(t)==this.render)this.getLastFocusedCell().focusedTd.setAttribute("tabIndex",-1);else(this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode)||"linear"!=this.options.focusFlow)&&u.B.stopEvent(t)}}else if(u.B.getTarget(t)==this.render)this.getLastFocusedCell().focusedTd.setAttribute("tabIndex",-1);else{(("down"==this.options.tabKeyMove?this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode):"none"==this.options.tabKeyMove||this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode))||"linear"!=this.options.focusFlow)&&u.B.stopEvent(t)}break;case 13:k=this.getCellInfo(this.focusedCell[0].focusedColIndex);if("enter"===this.options.drilldownToggle&&1==this.focusedCell.length&&k&&"drilldown"==k.options.inputType){var D=this.focusedCell[0].focusedRowIndex,L=this.dataList.getRealRowIndex(D);this.toggle(L);break}if(this.editMode||"autoComplete"!==k.options.inputType&&"select"!==k.options.inputType||!k.options.directOpen)if("edit"==this.options.enterKeyMove||"editRight"==this.options.enterKeyMove||"editDown"==this.options.enterKeyMove)this.setEditHtml(t);else if("none"==this.options.enterKeyMove);else if("right"==this.options.enterKeyMove){if(!0===this.options.senseReader)if(1==this.focusedCell.length)if("text"===k.options.inputType)(W=this.getInput(k,this.focusedCell[0].focusedTd))&&W.blur();this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode)}else{var W;if(!0===this.options.senseReader)if(1==this.focusedCell.length)if("text"===k.options.inputType)(W=this.getInput(k,this.focusedCell[0].focusedTd))&&W.blur();this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode)}else"autoComplete"===k.options.inputType&&(k.autoCompleteImageClicked=!0),this.setEditHtml(t);u.B.stopEvent(t);break;case 67:if("native"===this.options.copyType)break;if(t.ctrlKey||t.metaKey){if(a.D.isIEAllVersion())this.handleCopyEvent({});else if(!a.D.isIEAllVersion()&&(s.v.browserCheck.moz||s.v.browserCheck.chrome&&!this.options.preventCopy)){var A=document.activeElement,E=document.createElement("textarea"),x=this,M=document.getElementsByTagName("body")[0];E.oncopy=function(t){x.handleCopyEvent(t),M.removeChild(this),document.activeElement!=A&&A.focus()},E.textContent="temp",M.appendChild(E),E.select();try{document.execCommand("copy")}catch(t){}}}else a.D.getBoolean(t.srcElement.getAttribute("directItemChoice"))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t);break;case 88:if(t.ctrlKey||t.metaKey){if(a.D.isIEAllVersion())this.handleCutEvent({});else if(!a.D.isIEAllVersion()&&(s.v.browserCheck.moz||s.v.browserCheck.chrome)){E=document.createElement("textarea"),x=this,M=document.getElementsByTagName("body")[0];E.oncut=function(t){x.handleCutEvent(t),M.removeChild(this)},E.textContent="temp",M.appendChild(E),E.select();try{document.execCommand("cut")}catch(t){}}}else a.D.getBoolean(t.srcElement.getAttribute("directItemChoice"))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t);break;case 86:if(t.ctrlKey||t.metaKey){if(this.options.preventPaste&&!this.editedCell){u.B.stopEvent(t);break}if(a.D.isIEAllVersion())this.handlePasteEvent({});else if(!a.D.isIEAllVersion()&&(s.v.browserCheck.moz||s.v.browserCheck.chrome||s.v.browserCheck.safari)){E=document.createElement("textarea"),x=this;E.style.opacity="0",E.onpaste=function(t){x.handlePasteEvent(t),M.removeChild(this)},E.textContent="temp",(M=document.getElementsByTagName("body")[0]).appendChild(E),E.select();try{document.execCommand("paste")}catch(t){}}}else{
a.D.getBoolean(t.srcElement.getAttribute("directItemChoice"))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t)}break;case 90:if(t.ctrlKey);else a.D.getBoolean(t.srcElement.getAttribute("directItemChoice"))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t);break;case 27:"none"!=this.options.focusMode&&"linear"!=this.options.focusFlow&&(this.getLastFocusedCell().focusedTd.setAttribute("tabIndex",-1),this.render.focus());break;case 16:case 17:case 18:case 21:case 229:case 25:case 91:case 20:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:break;case 65:if(this.options.useSelectAll&&t.ctrlKey){this.setFocusedMultiCell(0,0,this.getRowCount()-1,this.getColumnCount()-1);break}default:if(!t.ctrlKey&&!t.metaKey&&!t.altKey)a.D.getBoolean(t.srcElement.getAttribute("directItemChoice"))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t)}}this.isKeyPressed=!1},f.prototype.handleOnfocus=function(t){if(this.getDataLength()>0&&(-1==this._getFocusedRowIndex()||null==this.getFocusedColumnIndex())){for(var e=null,i=this.colIndexInfo.body.colInfo.colIndexMatch,o=this.colIndexes.bodyColInfo.trIndexArr,s=o[this.defaultColCnt],r=0;r<i.length;r++){var a=i[r];if(!this.hiddenList[r]){for(var n=a.length-1;n>=0;n--){var l=a[n]-this.defaultColCnt;if(o[a[n]]<=s){if(this.options.readOnlyTabIgnore&&this.___getEditReadOnly(0,l))break;if(this.options.ignoreNonEditableCell&&(this.___getEditReadOnly(0,l)||this._getEditDisabled(0,l)))break;e=l;break}}if(null!==e)break}}null!==e&&this._setFocusedCell(0,e)}},f.prototype.removeCellData=function(t){this.handleCutEvent(t,!0)},f.prototype.doDefaultAction=function(t){if("none"==this.options.focusMode){for(var e=u.B.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;e&&this.getCellInfo(e).doDefaultAction(t)}else this.getCellInfo(this.getLastFocusedCell().focusedColIndex).doDefaultAction(t)},f.prototype.setEditHtml=function(t){var e=u.B.getTarget(t);if(this.options.fastEditMode||"INPUT"==e.tagName||u.B.stopEvent(t),this.focusedCell.length>0){var i=this.focusedCell[this.focusedCell.length-1];null!=i.focusedTd&&this.setEditMode(i.focusedTd)}},f.prototype.getFirstTdTrIndex=function(t){for(var e=t.parentNode;"0"!=e.getAttribute("trIndex");)e=a.D.prev(e);return e},f.prototype.fixScrollRightDirection=function(){var t=this.getLastFocusedCell(),e=this.getElementById(this.id+"_dataLayer").offsetWidth,i=this.getElementById(this.id+"_scrollX_right");if(t&&t.focusedTd){if("native"===this.options.drawType){var o=document.getElementById(this.id+"_scrollX_div");"hidden"===o.style.visibility||o.offsetWidth}var s=t.focusedTd.offsetLeft,r=t.focusedTd.offsetWidth+1;a.D.isFF()&&(r-=1),a.D.isOpera()&&(r+=2);var n=s+r-e;if(this.options.lazyDrawHiddenColumn){var l=this.focusedCell[0].focusedTd;if("none"==l.style.display||n>0)if(this.options.scrollByColumn){for(var h=e-this.fixedWidth,d=0;d<this.columnOrder.length;d++)if(this.columnOrder[d]==t.focusedColIndex){f=d+this.defaultColCnt;break}var u=-1,c=0;a.D.isOpera()&&(c=2);for(var p=f;p>=0;p--)if(!this.hiddenList[p]&&(h-=this.colWidthList[p])<0){u=p;break}p=0;for(this.fixedWidth>0&&(p=this.getFixedColumnLastIndex());p<=u;p++)this.hiddenList[p]||(c+=this.colWidthList[p]);this.scrollXPreventEndEdit=!0,i.scrollLeft=c,this._handleScrollX()}else{var g=parseInt(l.getAttribute("colIndex"),10),m=0;a.D.isOpera()&&(m=2);for(d=0;d<=g;d++)this.hiddenList[d]||(m+=this.colWidthList[d]);this.scrollXPreventEndEdit=!0,i.scrollLeft=m-e,this._handleScrollX()}}else if(n>0)if(this.options.scrollByColumn){h=e-this.fixedWidth;var f,b=t.focusedColIndex%this.columnOrder.length;for(d=0;d<this.columnOrder.length;d++)if(this.columnOrder[d]==b){f=d+this.defaultColCnt;break}for(u=-1,c=0,p=f;p>=0;p--)if(!this.hiddenList[p])if(0!=this.colIndexes.bodyColInfo.colSpanArr.length){
if((h-=this.colWidthList[p]*(this.colIndexes.bodyColInfo.colSpanArr[p]?this.colIndexes.bodyColInfo.colSpanArr[p]:1))<0){u=p;break}}else if((h-=this.colWidthList[p])<0){u=p;break}p=0;for(this.fixedWidth>0&&(p=this.getFixedColumnLastIndex());p<=u;p++)this.hiddenList[p]||(0!=this.colIndexes.bodyColInfo.colSpanArr.length?c+=this.colWidthList[p]*(this.colIndexes.bodyColInfo.colSpanArr[p]?this.colIndexes.bodyColInfo.colSpanArr[p]:1):c+=this.colWidthList[p]);this.scrollXPreventEndEdit=!0,i.scrollLeft=c,this._handleScrollX()}else this.scrollXPreventEndEdit=!0,i.scrollLeft=i.scrollLeft+n,this._handleScrollX()}},f.prototype.fixScrollLeftDirection=function(){var t=this.getLastFocusedCell();if(t&&t.focusedTd){if("native"===this.options.drawType){var e=document.getElementById(this.id+"_scrollX_div");"hidden"===e.style.visibility||e.offsetWidth}var i=t.focusedTd.getAttribute("colIndex");i=parseInt(i);for(var o=this.getElementById(this.id+"_scrollX_right"),s=0,r=this.getFixedColumnLastIndex();r<i;r++){if(!this.hiddenList[r])s+=this.colWidthList[r]}o.scrollLeft>s&&(this.scrollXPreventEndEdit=!0,o.scrollLeft=s,this._handleScrollX())}},f.prototype.getLeftMostFocusableColIndex=function(t){var e=this.colIndexInfo.body.colInfo.colIndexArr,i=null;if(t>=this.dataList.getRowCount()||t<0)return i;for(var o=0;o<e.length-this.defaultColCnt;o++){var s=!1,r=this.getCellInfo(o);if(this.options.readOnlyTabIgnore&&(s=this.___getEditReadOnly(t,o)),(this.options.ignoreNonEditableCell||this.options.senseReader)&&(s=this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o)),this.options.senseReader&&"radio"==r.options.inputType&&this.getCellData(t,o)!=r.options.trueValue){var a=this.getCheckedIndex(r.colID);a?s=a[0]!==t:0!=t&&(s=!0)}if(this.options.senseReader&&this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o))if("user"==r.options.inputType||"link"==r.options.inputType)0!=this.data_td_list[o+(t-this.rowIndex)*this.oneRowDataLength].getElementsByTagName("a").length&&(s=!1);if(this.isColMerge&&this.cellInfoHash[this.tdIdList[o]].options.colMerge){var n=this.dataList.getCellData(t-1,o),l=this.upperGroupingTest(t,o);n==this.dataList.getCellData(t,o)&&l&&(s=!0)}if(this.hiddenRowObj.length>0&&!this._getRowVisible(t)&&(s=!0),this.getMerged(t,o)&&!this.cellMergeInfo[t+"_"+o]&&(s=!0),!this.hiddenList[o]&&!s){i=o;break}}return i},f.prototype.getRightMostFocusableColIndex=function(t){var e=this.colIndexInfo.body.colInfo.colIndexArr,i=null;if(t>=this.getRowCount()||t<0)return i;for(var o=e.length-1-this.defaultColCnt;o>=0;o--){var s=!1,r=this.getCellInfo(o);if(this.options.readOnlyTabIgnore&&(s=this.___getEditReadOnly(t,o)),(this.options.ignoreNonEditableCell||this.options.senseReader)&&(s=this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o)),this.options.senseReader&&"radio"==r.options.inputType&&this.getCellData(t,o)!=r.options.trueValue){var a=this.getCheckedIndex(r.colID);a?s=a[0]!==t:0!=t&&(s=!0)}if(this.options.senseReader&&this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o))if("user"==r.options.inputType||"link"==r.options.inputType)if(t<this.rowIndex)s=!0;else s=0==this.data_td_list[o+(t>=this.rowIndex?t-this.rowIndex:t)*this.oneRowDataLength].getElementsByTagName("a").length;if(this.isColMerge&&this.cellInfoHash[this.tdIdList[o]].options.colMerge){var n=this._dataList.getCellData(t-1,o),l=this.upperGroupingTest(t,o);n==this._dataList.getCellData(t,o)&&l&&(s=!0)}if(this.hiddenRowObj.length>0&&!this._getRowVisible(t)&&(s=!0),this.getMerged(t,o)&&!this.cellMergeInfo[t+"_"+o]&&(s=!0),!this.hiddenList[o+this.defaultColCnt]&&!s){i=o;break}}return i},f.prototype.moveHorizontal=function(t,e,i,o){if("false"==this.options.focusMove||"vertical"==this.options.focusMove){o=t.charCode?t.charCode:t.keyCode;if(!this.options.senseReader)return!1;if(9!=o)return!1}var s,r=this.getLastFocusedCell(),n=r.focusedRowIndex,l=r.focusedColIndex,h=(this.colIndexInfo.body.colInfo.colIndexArr,
this._getRealColIndex("body",this.tdIdList[l])+this.defaultColCnt),d=this.colIndexInfo.body.colInfo.colIndexMatch,u=this.columnOrder,c=this.colIndexes.bodyColInfo.trIndexArr,p=c[l+this.defaultColCnt],g=!!t&&9==t.keyCode,m=!!t&&(9==t.keyCode||13==t.keyCode),f=!!t&&t.shiftKey,b=(e=e||"right",0==t||t&&!0===t.byApi);s=1==this.options.moveKeyEditModeAll&&b?!!o&&(37==o||39==o):!!t&&(37<=t.keyCode&&t.keyCode<=40),r.bTrIndex&&(p=r.bTrIndex);var y=null,v=n;if(this.options.focusMultiRow){if("left"==e)var w=h-1,S=this.defaultColCnt-1,C=-1;else if("right"==e)w=h+1,S=d.length,C=1;else if("home"==e)w=this.defaultColCnt,S=d.length,C=1;else w=d.length-1,S=this.defaultColCnt-1,C=-1;for(var x=w;x!=S;x+=C){var _=d[x];if(!this.hiddenList[x]){for(var I=_.length-1;I>=0;I--){var T=_[I]-this.defaultColCnt;if(!(this.hiddenRowObj.length>0)||this._getRowVisible(n))if(!this.getMerged(n,T)||this.cellMergeInfo[n+"_"+T])if(c[_[I]]<=p&&("left"!=e&&"right"!=e||T!=l)){if((this.options.readOnlyTabIgnore||this.options.senseReader)&&this.___getEditReadOnly(n,T))break;if(m&&(this.options.ignoreNonEditableCell||this.options.senseReader)&&(this.___getEditReadOnly(n,T)||this._getEditDisabled(n,T)))break;if(this.isColMerge&&this.cellInfoHash[this.tdIdList[T]].options.colMerge){var k=this.dataList.getCellData(n-1,T),D=this.upperGroupingTest(n,T);if(k==this.dataList.getCellData(n,T)&&D)break}y=T;break}}if(null!==y)break}}}else{var L=this.getCellInfo(l),W=!1;this.options.senseReader&&"user"==L.options.inputType&&this.___getEditReadOnly(n,l)?W=!0:(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0);var A=this.getLocationRowCol(n,l),E=A.rowIndex,M=A.colIndex,q=this.htmlInfo.body.rowAttrArr.length;r.bMovedRow&&(E=r.bMovedRow);var R=E%q;if("left"==e)if(W&&this.focusedCellLinkIndex>0)w=M,S=u.length,C=1;else w=M-1,S=-1,C=-1;else if("right"==e)if(W&&this.focusedCellLinkIndex+1<this.focusedCellLinkLength)w=M,S=u.length,C=1;else{this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0;w=M+A.colSize,S=u.length,C=1}else if("home"==e){w=0,S=u.length,C=1;E-=R}else{w=u.length-1,S=0,C=-1;E=E+q-R-1}for(x=w;;x+=C){if(x==S)if("left"==e&&R>0)x=u.length-1,E--;else{if(!("right"==e&&R<q-1))break;x=0,E++}var N=this.getOriginalRowCol(E,x);if(!N.noLeftTop){C>0&&(C=N.colSize);T=N.colIndex;if(!this.hiddenList[x+this.defaultColCnt]&&(!(this.hiddenRowObj.length>0)||this._getRowVisible(n))&&(!this.getMerged(n,T)||this.cellMergeInfo[n+"_"+T])){L=this.getCellInfo(T);if(this.options.senseReader&&"radio"==L.options.inputType&&this.getCellData(n,T)!=L.options.trueValue&&0!=n){if(this.getCheckedIndex(L.colID))continue;if(0!=n)continue}if("left"!=e&&"right"!=e||(W||T!=l)){var F=!1;if(g&&this.___getEditReadOnly(n,T)&&(this.options.readOnlyTabIgnore||this.options.senseReader)){if("user"!=L.options.inputType&&"link"!=L.options.inputType||!this.options.senseReader)continue;var O=this.data_td_list[T+(v-this.rowIndex)*this.oneRowDataLength].getElementsByTagName("a");if("right"==e)for(var B=0;B<O.length;B++){if(document.activeElement==O[B]){this.focusedCellLinkIndex=B;break}this.focusedCellLinkIndex=-1}else if("left"==e)for(B=O.length-1;B>-1;B--){if(document.activeElement==O[B]){this.focusedCellLinkIndex=B;break}this.focusedCellLinkIndex=-1}if(!O[0])continue;("right"==e&&this.focusedCellLinkIndex!=O.length-1||"left"==e&&0!=this.focusedCellLinkIndex)&&(F=!0)}if((m||s)&&(this.options.ignoreNonEditableCell||this.options.senseReader)&&(this.___getEditReadOnly(n,T)||this._getEditDisabled(n,T))&&(!g||1!=F))continue;if(this.isColMerge&&this.cellInfoHash[this.tdIdList[T]].options.colMerge){k=this.dataList.getCellData(n-1,T),D=this.upperGroupingTest(n,T);if(k==this.dataList.getCellData(n,T)&&D)continue}y=T;break}if(null!==y)break}}}}if(null===y&&(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),null!==y){if(i&&(this.___getEditReadOnly(v,y)||this._getEditDisabled(v,y))&&(i=!1),i&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){L=this.getCellInfo(y)
;a.D.getBoolean(L.options.skipKeyMoveEditMode)&&(i=!1)}return this._setFocusedCell(n,y,i,{tabDirection:e}),(r=this.getLastFocusedCell()).bTrIndex=p,r.bMovedRow=E,!0}if("linear"==this.options.focusFlow){if(n>0&&f){var V=this.getRightMostFocusableColIndex(n-1);if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&null==V)for(;n>=0&&null==V;){this._setGridBorderNoRefresh=!0;var H=-1;this.hasSubtotal&&(H-=this.getHasSubtotalCount(n-1)),"true"!==this.options.keepScrollForSenseReader&&this.addGridScroll(H),this._setGridBorderNoRefresh=!1,1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&(V=this.getRightMostFocusableColIndex(n-1)),null==V&&(n-=1)}else for(;n>=0&&null==V;)n-=1,V=this.getRightMostFocusableColIndex(n-1);if(null==V)return this.editedCell&&this.editedCell.handleEndEdit(t),!1;if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),n-1<this.rowIndex){this._setGridBorderNoRefresh=!0;H=-1;this.hasSubtotal&&(H-=this.getHasSubtotalCount(n-1)),this.addGridScroll(H),this._setGridBorderNoRefresh=!1,1==this.options.senseReader&&null!=V&&"all"!=this.options.visibleRowNum&&(V=this.getRightMostFocusableColIndex(n-1))}return"custom"==(L=this.getCellInfo(V)).options.inputType&&n-1>=0&&(v=n-1),i&&(this.___getEditReadOnly(v,V)||this._getEditDisabled(v,V))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)&&a.D.getBoolean(L.options.skipKeyMoveEditMode)&&(i=!1),this._setGridBorderNoRefresh=!0,this._setFocusedCell(n-1,V,i,{tabDirection:e}),this._setGridBorderNoRefresh=!1,!0}if("left"==e&&n>0&&!f){for(var P=this.getRightMostFocusableColIndex(n-1);n>0&&null==P;)n-=1,P=this.getRightMostFocusableColIndex(n-1);if(null==P)return this.editedCell&&this.editedCell.handleEndEdit(t),!1;if(n-1>0&&n==this.rowIndex){this._setGridBorderNoRefresh=!0;H=-1;this.addGridScroll(H),this._setGridBorderNoRefresh=!1}if(i&&(this.___getEditReadOnly(v,P)||this._getEditDisabled(v,P))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){L=this.getCellInfo(P);a.D.getBoolean(L.options.skipKeyMoveEditMode)&&(i=!1)}return this._setGridBorderNoRefresh=!0,this._setFocusedCell(n-1,P,i,{tabDirection:e}),this._setGridBorderNoRefresh=!1,!0}if("right"==e&&!f&&n<this.getDataLength()-this._getVisibleLastIndex(1)){for(P=this.getLeftMostFocusableColIndex(n+1);n!=this.dataList.getRowCount()&&null==P;)n+=1,P=this.getLeftMostFocusableColIndex(n+1);if(null==P)return this.editedCell&&this.editedCell.handleEndEdit(t),1==this.options.moveKeyEditModeAll&&n==this.dataList.getRowCount()&&document.getElementById(this.id+"_gridend_div").focus(),!1;var j=this._getVisibleLastIndex(this.lastIndex+1);if(n+1>this.rowIndex+j-1){this._setGridBorderNoRefresh=!0;H=1;this.hasSubtotal&&(H+=this.getHasSubtotalCount(n+1)),1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&(H+=n-(this.rowIndex+j-1),this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),this.addGridScroll(H),this._setGridBorderNoRefresh=!1}if(i)"custom"==(L=this.getCellInfo(P)).options.inputType&&(v=n+1),(this.___getEditReadOnly(v,P)||this._getEditDisabled(v,P))&&(i=!1);if(i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){L=this.getCellInfo(P);a.D.getBoolean(L.options.skipKeyMoveEditMode)&&(i=!1)}return this._setGridBorderNoRefresh=!0,this._setFocusedCell(n+1,P,i,{tabDirection:e}),this._setGridBorderNoRefresh=!1,!0}}if(g&&null!=WebSquare.tabOrder[this.id])if(0===h&&0===n&&"left"==e){if(null!=WebSquare.tabOrder[this.id].preTabID&&(z=a.D.getPreTabbableComp(this.id)))return z.focus(),!0}else if(h===d.length-1&&n===this.getDataLength()-this._getVisibleLastIndex(1)&&"right"==e){var z;if(null!=WebSquare.tabOrder[this.id].nextTabID)if(z=a.D.getNextTabbableComp(this.id))return z.focus(),!0}
return this.editedCell?(this._setGridBorderNoRefresh=!0,this.editedCell.handleEndEdit(t),this._setGridBorderNoRefresh=!1):this.options.moveKeyEditMode&&(this._setGridBorderNoRefresh=!0,this._setFocusedCell(n,l,!1),this._setGridBorderNoRefresh=!1),this.moveDirection=null,!1},f.prototype.moveVertical=function(t,e,i){if(this.moveDirection="row","false"==this.options.focusMove||"horizontal"==this.options.focusMove)return!1;var o=this.getLastFocusedCell(),s=o.focusedRowIndex,r=o.focusedColIndex,n=this.defaultColCnt,l=this.colIndexInfo.body.colInfo.colIndexArr,h=this.colIndexes.bodyColInfo.trIndexArr,d=this.colIndexes.bodyColInfo.colSpanArr,c=this.colIndexes.bodyColInfo.rowSpanArr,p=l[r+n],g=h[r+n],m=d[r+n],f=c[r+n],b=r,y=s,v=!!t&&13==t.keyCode,w=!!t&&9==t.keyCode,S=this.getDataLength()-this._getVisibleLastIndex(1),C=!1;if(m&&o.bColIndex&&(p=o.bColIndex),"up"==e)var x=0==g?this.oneRowDataLength-1:r-1,_=-1,I=-1;else x=g+f==this.oneRowLength?0:r+1,_=this.oneRowDataLength,I=1;for(var T=!1,k=x;k!=_;k+=I){var D=l[k+n],L=D+(d[k+n]?d[k+n]:1)-1,W=this._getArrayIndexOf(this.columnOrder,l[k+n]-n)+n;if(D<=p&&p<=L&&(!this.hiddenList[W]||T)){if(b=k,W=this._getArrayIndexOf(this.columnOrder,b+1)+this.defaultColCnt,y==S&&"down"==e&&this.hiddenList[W]){T=!0,p++;continue}if(W=this._getArrayIndexOf(this.columnOrder,b-1)+this.defaultColCnt,0==y&&"up"==e&&this.hiddenList[W]){T=!0,p--;continue}if("up"==e){for(var A=s;A>=0;A--)if(y=0==g?A-1:A,(!(this.hiddenRowObj.length>0)||this._getRowVisible(y))&&(!this.getMerged(y,b)||this.cellMergeInfo[y+"_"+b])){if(this.hiddenCellObj.length>0&&!1===this.getCellVisible(y,b))for(;!1===this.getCellVisible(y,b);){if(0===(q=h[b+this.defaultColCnt])&&y>0){y--;for(var E=!1,M=b+1+n;M<l.length;M++)if(l[M]===r+n&&h[M]===this.oneRowLength-1){b=M-n,E=!0;break}if(!E)break}else if(q>0){for(E=!1,M=b+n;M>=0;M--)if(l[M]===r+n&&h[M]===q-1){b=M-n,E=!0;break}if(!E)break}}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(y,b)&&!this._getEditDisabled(y,b))break;if(!w&&!v&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(y,b))break}}else for(A=s;A<=S;A++)if(y=g+f==this.oneRowLength?A+1:A,(!(this.hiddenRowObj.length>0)||this._getRowVisible(y))&&(!this.getMerged(y,b)||this.cellMergeInfo[y+"_"+b])){if(this.hiddenCellObj.length>0)for(;!1===this.getCellVisible(y,b);){var q;if((q=h[b+this.defaultColCnt])>=this.oneRowLength-1&&y<=S){y++;for(E=!1,M=n;M<l.length;M++)if(l[M]===r+n&&0===h[M]){b=M-n,E=!0;break}if(!E)break}else if(q<this.oneRowLength-1){for(E=!1,M=b+1+n;M<l.length;M++)if(l[M]===r+n&&h[M]===q+1){b=M-n,E=!0;break}if(!E)break}}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(y,b)&&!this._getEditDisabled(y,b))break;if(!w&&!v&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(y,b))break}break}}if(0<=y&&y<=S&&(s!=y||r!=b)){if(u.B.stopEvent(t),i&&(this.___getEditReadOnly(y,b)||this._getEditDisabled(y,b))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){var R=this.getCellInfo(b);a.D.getBoolean(R.options.skipKeyMoveEditMode)&&(i=!1)}return!!this.setFocusedCell2(y,b,i,{tabDirection:e})&&((o=this.getLastFocusedCell()).bColIndex=p,!0)}if("linear"==this.options.focusFlow){var N=!1;if((-1==y&&"up"==e&&0==r||y==S+1&&"down"==e&&null==l[r+n+1])&&(N=!0),!N&&(-1==y||y==S+1)){var F=this.getLastFocusedCell().focusedTd;if("text"==(R=this.getCellInfo(F)).options.inputType&&R.options.embeddedInput){var O=this.getInput(R,F);this.showFakeInput(O),this.fakeInput.setValue(O.getValue()),this.F2Mode=!1,O.select()}else{var B=!1;if("up"==e&&-1==y&&b-1>-1)for(var V=b-1;null!=l[V+n];V--){for(var H=S;H>-1;H--){if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(H,V)&&!this._getEditDisabled(H,V)){y=H,b=V,B=!0;break}
if(!w&&!v&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(H,V)){y=H,b=V,B=!0;break}}if(B)break}else if("down"==e&&y==S+1)for(V=b+1;null!=l[V+n];V++){for(H=0;H<=S;H++){if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(H,V)&&!this._getEditDisabled(H,V)){y=H,b=V,B=!0;break}if(!w&&!v&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&!this.options.senseReader&&!this._getEditDisabled(H,V)){y=H,b=V,B=!0;break}}if(B)break}if(B){if(u.B.stopEvent(t),i&&(this.___getEditReadOnly(y,b)||this._getEditDisabled(y,b))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){R=this.getCellInfo(b);a.D.getBoolean(R.options.skipKeyMoveEditMode)&&(i=!1)}return!!this.setFocusedCell2(y,b,i,{tabDirection:e})&&((o=this.getLastFocusedCell()).bColIndex=p,!0)}w&&WebSquare.tabOrder[this.id]&&WebSquare.tabOrder[this.id].nextTabID&&(C=!0)}}}return this.editedCell?this.editedCell.handleEndEdit(t):this.options.moveKeyEditMode&&(this._setGridBorderNoRefresh=!0,this._setFocusedCell(s,r,!1),this._setGridBorderNoRefresh=!1),this.moveDirection=null,!0===C&&"focusNextTabOrder"},f.prototype.moveEnd=function(t){if("false"!=this.options.focusMove&&"vertical"!=this.options.focusMove){for(;this._moveRight(t););for(var e=!1;!e;){for(var i=!0,o=this.getLastFocusedCell(),s=parseInt(o.focusedTd.getAttribute("colIndex")),r=parseInt(o.focusedTd.getAttribute("colSpan")||1),a=0;a<r;a++)if(0==this.hiddenList[s+a]){i=!1;break}1==i?this._moveLeft(t):e=!0}this.fixScrollRightDirection()}},f.prototype.moveHome=function(t){if("false"!=this.options.focusMove&&"vertical"!=this.options.focusMove){for(;this._moveLeft(t););for(var e=!1;!e;){for(var i=!0,o=this.getLastFocusedCell(),s=parseInt(o.focusedTd.getAttribute("colIndex")),r=parseInt(o.focusedTd.getAttribute("colSpan")||1),a=0;a<r;a++)if(0==this.hiddenList[s+a]){i=!1;break}1==i?this._moveRight(t):e=!0}this.fixScrollLeftDirection()}},f.prototype.movePageUp=function(t){if("false"!=this.options.focusMove&&"horizontal"!=this.options.focusMove&&!(this.rowIndex<=0)){var e=this.getLastFocusedCell(),i=e.focusedRowIndex;if(!(i<0)){i-=this.rowIndex;var o=e.focusedColIndex;this._applyFocusedCellOut(e),this.focusedCell&&this.focusedCell.pop();var s,r=this._getScrollRowIndex(this.rowIndex);return(s=r<this.lastIndex?-1:this._getVisibleRowIndex(r-this.lastIndex))>=0?(this.setTopRowIndex(s),this._setFocusedCell(i+this.rowIndex,o)):(this.setTopRowIndex(0),this._setFocusedCell(0,o)),!0}}},f.prototype.movePageDown=function(t){if("false"!=this.options.focusMove&&"horizontal"!=this.options.focusMove&&!(null!=this.lastTopRowIndex&&this.rowIndex>=this.lastTopRowIndex)){var e=this.getLastFocusedCell(),i=e.focusedRowIndex;if(!(i<0)){i-=this.rowIndex;var o=e.focusedColIndex;this._applyFocusedCellOut(e);var s=this.rowIndex+this.lastIndex,r=this.getDataLength(),a=r-this._getVisibleLastIndex(1),n=r-this._getVisibleLastIndex(this.lastIndex+1);return s<=n?(this.setTopRowIndex(s),this._setFocusedCell(Math.min(i+this.rowIndex,a),o)):(this.setTopRowIndex(n),this._setFocusedCell(a,o)),!0}}},f.prototype.findTd=function(t,e,i){for(var o=0;null!=t;){for(var s=a.D.first(t);null!=s;){var r=parseInt(s.getAttribute("colIndex"));if(r<=e&&e<=r+s.colSpan-1&&o<=i&&i<=o+s.rowSpan-1)return s;if(r>e)break;s=a.D.next(s)}if(t=a.D.next(t),o>i)break;o++}},f.prototype.pasteFromClipboard=function(){for(var t=this.parseClipboardExcel(),e=this._getFocusedRowIndex(),i=this.getFocusedColumnIndex(),o=[],s=0;s<t.length;s++){o.push([]);for(var r=0;r<t[0].length;r++)o[s][r]=this.dataList._getCellData(s+e,this.getColumnID(r+i))}for(s=0;s<t.length;s++)for(r=0;r<t[0].length;r++){var a=t[s][r];try{a=a.wq_trim();var n=this.getCellInfo(r+i),l=this.mainGrid.getColumnOption(n.options.col_id,"dataType");"number"==l&&(a=a.replace(/[^(\-0-9)]/g,""))}catch(t){}
1!=this.___getEditReadOnly(s+e,r+i)&&1!=this._getEditDisabled(s+e,r+i,!0)&&this.dataList.__setCellData(s+e,this.getColumnID(r+i),a)}var h=this;WebSquare.historyManager.set("grid","grid1",{focusRowIndex:e,focusColIndex:i,data2d:o},{onRestore:function(t){for(var o=t.data2d,s=0;s<o.length;s++)for(var r=0;r<o[0].length;r++){var a=o[s][r];h.dataList.__setCellData(s+e,this.getColumnID(r+i),a)}}})},f.prototype.parseClipboardExcel=function(){for(var t=[],e=window.clipboardData.getData("Text").split("\n"),i=0;i<e.length-1;i++){var o=e[i].split("\t");t.push(o)}return t},f.prototype.copyToClipboard=function(){var t=this.options.copyAmount;if(t||("cell"==this.options.focusMode?t="cell":"both"!=this.options.focusMode&&"row"!=this.options.focusMode||(t="row")),"cell"==t){for(var e=this.getDataLength(),i=this.getTotalCol(),o=[],s=0;s<this.focusedCell.length;s++){var r=(u=this.focusedCell[s]).focusedRowIndex,a=u.focusedColIndex;null==o[r]&&(o[r]=[]),o[r][a]=u,e>r&&(e=r),i>a&&(i=a)}var n=[];for(s=e;s<o.length;s++){var l=[];if(void 0!==(c=o[s]))for(var h=i;h<c.length;h++){o[s][h]?l.push(this.dataList._getCellData(s,this.getColumnID(h))):l.push("")}n.push(l.join("\t"))}window.clipboardData.setData("Text",n.join("\n"))}else if("row"==t){var d=[];for(s=0;s<this.focusedCell.length;s++){var u;d[(u=this.focusedCell[s]).focusedRowIndex]=1}var c=[];for(var r in d)c.push(r);c.sort((function(t,e){return parseInt(t)>parseInt(e)?1:-1}));for(o=[],s=0;s<c.length;s++){r=c[s];var p=this.getRowData(r);o.push(p.join("\t"))}window.clipboardData.setData("Text",o.join("\n"))}},f.prototype.getEditCursorEnable=function(t,e){try{if(!t)return!1;var i=u.B.getTarget(t);if(!i)return!1;var o=i.tagName.toUpperCase();if(("INPUT"==o||"TEXTAREA"==o)&&null!=i.value){if(a.D.isIEAllVersion("6 7 8")){var s=document.selection.createRange();if(s.text.length>0)return!0;s.moveStart("character",-i.value.length);var n=s.text.length;if("left"===e){if(n>0)return!0}else if("right"===e&&n<i.value.length)return!0;return!1}if(null!=i.selectionStart&&i.selectionStart!=i.selectionEnd)return!0;if("left"===e){if(i.selectionEnd>0)return!0}else if("right"===e&&i.selectionEnd<i.value.length)return!0}return!1}catch(t){return r.w.printStackTrace(t,null,this),!1}},f.prototype._moveKeyEdit=function(t,e,i){try{if(void 0!==i&&null!=i||(i={}),!(this.options.moveKeyEditModeAll||!0===i.oldMode&&this.options.moveKeyEditMode))return;var o=this.uuid,s=WebSquare.idCache[t];s["_"+e]=s[e];var a=i.itemTable,n=i.skipVertical,l=i.skipHorizontal,h=this.options.moveKeyEditModeAll||!0===i.oldMode&&this.options.arrowMove;s[e]=function(t,i){this["_"+e]&&this["_"+e](t,i);var s=WebSquare.idCache[o],r=!1;if(s&&s.editedCell){var d=s.getCellInfo(s.editedCell.colID);(s.options.keyMoveEditMode||s.options.moveKeyEditMode||s.options.moveKeyEditModeAll)&&d.options.skipKeyMoveEditMode&&(r=!0)}var c={37:"left",38:"up",39:"right",40:"down"}[t.keyCode];if(c)switch(c){case"left":case"right":if(!0!==l&&(a||0==this.getValue().length||h&&!s.getEditCursorEnable(t,c)))s._fireOnviewchange(s.editedCell.id,"handleEndEdit",[t],{checkFunc:function(t){return t+""!="false"}})+""!="false"&&s.moveHorizontal({byApi:!0},c,!0,t.keyCode),u.B.stopEvent(t);break;case"up":case"down":if(!0!==n&&(!a||0==this.getItemCount()||this._keyIndex<0||this._keyIndex===this.getItemCount())){if(s._fireOnviewchange(s.editedCell.id,"handleEndEdit",[t],{checkFunc:function(t){return t+""!="false"}})+""!="false"){var p=!0!==r;s.moveVertical({},c,p,t.keyCode)}u.B.stopEvent(t)}}}}catch(t){r.w.printStackTrace(t,null,this)}},f.prototype._directEdit=function(t){var e=this.focusedCell[this.focusedCell.length-1],i=this.getCellInfo(e.focusedTd);if("textarea"!==i.options.inputType||!this._getEditDisabled(e.focusedRowIndex,e.focusedColIndex)&&!this.___getEditReadOnly(e.focusedRowIndex,e.focusedColIndex)){var o,s=i.comp,r=this.getInput(i);r&&(r.reFocus=!0,r._focusStatus="cancel");var a=s.render.tagName.toLowerCase()
;(o="input"===a||"textarea"===a?s.render:s.render.getElementsByTagName("input")[0])&&WebSquare.text.setCaretPos(o,o.value.length);var n=t.keyCode,l=null;t.key&&1===t.key.length?l=t.key:!t.shiftKey&&65<=n&&n<=90?(n+=32,l=String.fromCharCode(n)):l=n>=96||n<65?{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"}[n+""]||"":String.fromCharCode(n),"autoComplete"===i.options.inputType?(s.dom.input.value=l,s.inputKeyDown(t)):r&&r.setValueNM(l)}};var b=function(t){};b.prototype.initializeDrawController=function(){this.data_td_list=[],this.data_num_td_list=[],this.data_status_td_list=[],this.all_data_td_list=[]},b.prototype.showAllBodyTR=function(t){t=t||"";for(var e=0;e<this.drawedRowLength;e++)this._setRowDisplay(e,t);this.lastDisplayedRow="none"===t?-1:this.drawedRowLength-1},b.prototype._setRowDisplay=function(t,e){for(var i=null,o=0;o<this.oneRowLength;o++)(i=this.dataRowList[this.oneRowLength*t+o])&&(i.style.display=e,"none"==e?this.__addClass(i,"w2grid_hidedRow"):this.__removeClass(i,"w2grid_hidedRow"));return i},b.prototype.drawColumnData=function(t,e){var i=this._dataList.rowPosition,o=!1;t=this.getColumnIndex(t);var s=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex,r=this.getCellInfo(t);if(r.dataComp){var a=this.modelControl.getDataComp(r.dataComp);null!=a&&"linkedDataList"===a.initializeType&&null!=a.conditionInfo&&a.conditionInfo.filterInfo.useRef&&"number"==typeof i&&(o=!0)}for(var n=0;n<=s;n++){var l=n+this.rowIndex;e&&r.select&&r.hasRef&&(r.select.itemArr=r.getRefItemArr(l),r.select.setSelectOptions(),r.select.setValueNM(r.mainGrid._dataList._getData(l,t))||r.mainGrid._dataList._setData(l,t,"")),o&&n===i||this.drawCellData(n,l,t)}o&&this.drawCellData(i,i+this.rowIndex,t)},b.prototype._setMouseOverTr=function(t,e){this.setOverClass(e,"overTd",!0)},b.prototype._setMouseOutTr=function(t,e){this.setOverClass(e,"overTd",!1)},b.prototype.setOverClass=function(t,e,i){for(var o=t.parentNode,s=parseInt(o.getAttribute("trIndex"));s>0;)s--,o=a.D.prev(o);do{for(var r=a.D.first(o);null!=r&&!(r.offsetLeft>this.render.offsetWidth);)r.offsetWidth>0&&(i?(r.setAttribute("row_out_style",r.style.cssText),r.style.cssText=r.style.cssText+";background-color:"+this.options.rowMouseOverColor):r.style.cssText=r.getAttribute("row_out_style")),r=a.D.next(r);o=a.D.next(o)}while(null!=o&&"0"!=o.getAttribute("trIndex"))},b.prototype.changeFocusedCellPosition=function(t,e,i){if(0!=this.focusedCell.length){this.applyFocusedCellOut();for(var o=0;o<this.focusedCell.length;o++){var s=this.focusedCell[o].focusedRowIndex-t,r=this.focusedCell[o].focusedColIndex,a=null;if(this.options.fixedRow>0&&this.options.fixedRow>this.focusedCell[o].focusedRowIndex||this.options.lastFixedRow>0&&this.focusedCell[o].focusedRowIndex>this.lastIndex-this.options.lastFixedRow)a=this.data_td_list[r+this.focusedCell[o].focusedRowIndex*this.oneRowDataLength],this.applyFocusedCellIn(a,e);else if(s<0||s>this.maxRowLength+this.hiddenRowObj.extraRow)a=null;else if(a=this.data_td_list[r+s*this.oneRowDataLength]){var n=this.getCellInfo(r);i&&n.options.embeddedInput&&(e=!1),this.applyFocusedCellIn(a,e)}this.focusedCell[o].focusedTd=a}}},b.prototype.setTRClass=function(t,e,i){for(var o=t.parentNode,s=parseInt(o.getAttribute("trIndex"));s>0;)s--,o=a.D.prev(o);do{for(var r=a.D.first(o);null!=r;)i?this.addClass(r,e):this.removeClass(r,e),r=a.D.next(r);o=a.D.next(o)}while(null!=o&&"0"!=o.getAttribute("trIndex"))},b.prototype.setEditMode=function(t){var e=t.getAttribute("col_id");if(null!=e&&""!=e.wq_trim()){var i,o=parseInt(t.getAttribute("tdIndex")),r=parseInt(o/this.realRowDataLength);if(this.options.fixedRow>0&&this.options.fixedRow>r)i=r;else if(this.options.lastFixedRow>0&&r>this.lastIndex-this.options.lastFixedRow){i=this.getDataLength()-1-(this.lastIndex-r)}else i=r+this.rowIndex
;var n=a.D.getBoolean(s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/colIdToColIndex/@value"))?this.getColumnIndex(t.getAttribute("col_id")):t.getAttribute("col_id"),l=this.getCellInfo(n);if((l.options.colMergeEdit||"1"!=t.getAttribute("colMerged"))&&!l.options.embeddedInput&&!this.groupbyStatus.grouped){if(this.__getEditReadOnly(t,i))return this.editMode=!1,void(l.options.showReadOnly&&(this.editMode=!0,l.showReadonly(t,i)));if(this._getEditDisabled(i,n))return this.editMode=!1,void(l.options.showReadOnly&&(this.editMode=!0,l.showReadonly(t,i)));0!=u.B.fireEvent(this,"onbeforeedit",i,n,this.dataList._getCellData(i,this.getColumnID(n)))&&null==this.editedCell&&(this.editMode=!0,this.setCellEditMode(t,i),l.comp&&l.comp.setReadOnly(this.__getEditReadOnly(t,i)))}}},b.prototype.getEditReadOnly=function(t,e){var i=t.getAttribute("col_id");return this._getEditReadOnly(e,i)},b.prototype.getReadOnly=function(){var t=a.D.getBoolean,e=arguments[0];if("grid"==e||0==arguments.length)return t(this.options.readOnly);if("row"==e)return t(this.getRowReadOnly(arguments[1]));if("column"==e){var i=this.getColumnID(arguments[1]);return t(this.getColumnReadOnly(i))}if("cell"==e){var o=arguments[1];i=this.getColumnID(arguments[2]);return t(this.getCellReadOnly(o,i))}if("all"==e){o=arguments[1],i=this.getColumnID(arguments[2]);return this._getEditReadOnly(o,i)}},b.prototype.setReadOnly=function(){try{var t=arguments[0];if(1==arguments.length||"grid"==t){var e=arguments[arguments.length-1],i=this.options.readOnly,o=a.D.getBoolean(e);"clear"==e?(this.rowReadOnlyArr=[],this.cellReadOnlyArr=[]):this.options.readOnly=o;var s=this.getDataLength();if(0!=s&&i!==o){var n=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex;for(var l in this.cellInfoHash){var h=this.getColumnIndex(l);if(!isNaN(h)){for(var d=0;d<=n;d++)this.drawCellData(d,d+this.rowIndex,h);this.applyColumnStyleOptions(h)}}}this.options.readOnly?this.addClass(" w2grid_readonly_outer"):this.removeClass("w2grid_readonly_outer")}else"row"==t?this.setRowReadOnly(arguments[1],arguments[2]):"column"==t?this.setColumnReadOnly(arguments[1],arguments[2]):"cell"==t&&this.setCellReadOnly(arguments[1],arguments[2],arguments[3])}catch(t){r.w.printStackTrace(t)}},b.prototype._getEditReadOnly=function(t,e,i){try{e=this.getColumnID(e);var o=this.getCellReadOnly(t,e,i),s=this.cellInfoHash[e];if(null==s)return;var n=a.D.getBoolean;if(o+""!="")return n(o);var l=this.options.readOnlyPriority,h=s.options.readOnly,d=this.getRowReadOnly(t,i);return"column"==l&&""!==h?n(h):"row"==l&&""!==d?n(d):h+""=="true"||d+""=="true"||h+""!="false"&&d+""!="false"&&(this.options.readOnly+""!=""&&n(this.options.readOnly))}catch(t){r.w.printStackTrace(t)}},b.prototype.__getEditReadOnly=function(t,e){var i=t.getAttribute("col_id");return this.___getEditReadOnly(e,i)},b.prototype.___getEditReadOnly=function(t,e,i){var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)?this.dataList.getRealRowIndex(t):this._getGroupbyDisplayRowIndex(t);return this._getEditReadOnly(o,e,i)},b.prototype.getDisabled=function(){var t=a.D.getBoolean,e=arguments[0];if("grid"==e||null==e)return t(this.options.disabled);if("row"==e)return t(this.getRowDisabled(arguments[1]));if("column"==e){var i=this.getColumnID(arguments[1]);return t(this.getColumnDisabled(i))}if("cell"==e){var o=arguments[1];i=this.getColumnID(arguments[2]);return t(this.getCellDisabled(o,i))}if("all"==e){o=arguments[1],i=this.getColumnID(arguments[2]);return this.getEditDisabled(o,i)}},b.prototype.setDisabled=function(t,e,i,o){try{for(var s=[t,e,i,o];s.length>0&&null==s[s.length-1];)s.pop();var n=s[0],l=1==s.length||"grid"==n,h=2==s.length&&"boolean"==typeof s[0]&&"boolean"==typeof s[1];if(l||h){var d=l?s[s.length-1]:s[0];if((d=a.D.getBoolean(d))!=this.options.disabled){this.options.disabled=d;var u=this.getElementById(this.id+"_dataLayer");!l&&d||(u.disabled=d),(h||!d&&u.disabledW2)&&(u.disabledW2=d),d?(this.addClass(u,"w2grid_disabled"),
this.addClass("w2grid_disabled_outer"),this.options.disabledScrollHidden&&(this.setOverflowXHidden(),this.setOverflowYHidden())):(this.removeClass(u,"w2grid_disabled"),this.removeClass("w2grid_disabled_outer"),this.options.disabledScrollHidden&&(this.setOverflowX(),this.setOverflowY()));for(var c=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),p=0;p<c.length;p++){var g=c[p].getAttribute("header_id"),m=this.headerObj[g];m?m.setDisabled?m.setDisabled(d):m.render?m.render.disabled=d:m.disabled=d:c[p].disabled=d}for(var f in this.cellInfoHash){var b=this.cellInfoHash[f];b&&"checkbox"===b.options.inputType&&(""===b.options.disabled?(b._oriDisabled=b.options.disabled,b.options.disabled=d):""===b._oriDisabled&&(b.options.disabled=d));var y=this.getColumnIndex(f);this.drawColumnData(y),this.applyColumnStyleOptions(y)}}return d}"row"==n?this.setRowDisabled(s[1],s[2]):"column"==n?this.setColumnDisabled(s[1],s[2]):"cell"==n&&this.setCellDisabled(s[1],s[2],s[3])}catch(t){r.w.printStackTrace(t)}},b.prototype.getEditDisabled=function(t,e,i){return this._getEditDisabled(this._getGroupbyGroupedRowIndex(t),e,i)},b.prototype._getEditDisabled=function(t,e,i){try{var o=-1,s="";"number"==typeof e?(o=e,s=this.cellIdList[e]):(o=this.bodyIdColIndexMap[e],s=e);var a=-1;if(!0===i)a=t;else if(this._linkedDataList)a=this._linkedDataList.filteredRowIndexArr[t];else if(this.groupbyStatus.grouped){var n=!0;for(var l in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[l]){a=this._dataList.filteredRowIndexArr[t],n=!1;break}n&&(a=this.groupbyStatus.groupedRowIndexArr[t])}else a=this._dataList.filteredRowIndexArr[t];var h=this.cellInfoHash[s]||{options:{}},d=this.cellDisabledArr[a*this.oneRowDataLength+o];if(!0!==d&&!1!==d){var u=h.options.disabled,c=this.rowDisabledArr[a],p=this.options.disabledPriority;!0!==c&&!1!==c&&(c=""),d="column"===p&&""!==u?u:"row"===p&&""!==c?c:u+""=="true"||c+""=="true"||u+""!="false"&&c+""!="false"&&(""!==this.options.disabled&&this.options.disabled)}return d}catch(t){r.w.printStackTrace(t)}},b.prototype.getElemRowIndex=function(t){var e=parseInt(t.getAttribute("tdIndex"));return parseInt(e/this.realRowDataLength)+this.rowIndex},b.prototype.notifyDataChanged=function(t){if("active"==this.activeStatus){this.initHeightCompleted=!1,this.checkResize();var e=t&&t.append||!1,i=t&&t.keepTop||!1,o=t&&t.refreshScroll||!1,s=t&&t.refreshInstance||!1,r=i&&this.rowIndex>=0?this.rowIndex:0,a=t&&!0===t.gridData;if(this.delayedDraw({rowIndex:r}))!0===s&&this._refreshInstance(void 0,e);else{this._mergeRefresh();var n=this._setGridBorderNoRefresh||!1;if(this._setGridBorderNoRefresh=!0,this.options.senseReader&&this.rowIndex<=0)return this.senseReaderMode=!0,this.setDataTable(),this.drawData(0),o&&"all"!==this.options.visibleRowNum&&(this.lastTopRowIndex=null,this.setScrollYHeight()),this.drawFooter(),this.drawHeader(),this.senseReaderMode=!1,this.displayNoResultMessage(),this._setGridBorderNoRefresh=n,!0===s&&this._refreshInstance(void 0,e),void this.refreshAdaptive({simple:!0});if("native"===this.options.drawType)return this.setDataTable(),this.drawData(0),this.drawFooter(),this.drawHeader(),this.displayNoResultMessage(),!0===s&&this._refreshInstance(void 0,e),void this.refreshAdaptive({simple:!0});if(e&&!this.loadFlag)return this.drawFooter(),this.drawHeader(),void(!0===s&&this._refreshInstance(void 0,e));if(this.changeCount++,!0===e&&"true"===this.options.keepScrollForSenseReader&&!0===this.options.senseReader&&this.options.visibleRowNum>0)var l=this.drawDataTable(0,{keepScrollTop:!0});else l=this.drawDataTable(0);for(var h in o&&(this.lastTopRowIndex=null,this.setScrollYHeight()),0==l&&(e&&!o&&(this.lastTopRowIndex=null,this.setScrollYHeight()),this.hiddenCellObj.length>0?(this.rowIndex=r,!0!==a&&this._setCellVisibleRefresh()):this.drawData(r)),this.displayNoResultMessage(),this.drawFooter(),this.drawHeader(),this._setGridBorderNoRefresh=n,this.refreshAdaptive({simple:!0}),
this.cellInfoHash)this.cellInfoHash[h].refreshCell();if(this.hasCustomInputType)for(var d=0;d<this.cellIdList.length;d++){var u=this.cellInfoHash[this.cellIdList[d]];u&&u.options&&"custom"===u.options.inputType&&u.options.typeGetter&&u.refreshCellManagerHash()}!0===s&&this._refreshInstance(void 0,e)}}},b.prototype.notifyCellChanged=function(t,e,i,o){if(this.changeCount++,!this.delayedDraw({})){var s=t;if(this.rowIndex>=0){var r=this.getDataLength();this.options.fixedRow>0&&this.options.fixedRow>t||(this.options.lastFixedRow>0&&s>=r-this.options.lastFixedRow?s=this.lastIndex-(r-1-s):s-=this.rowIndex)}if(e=this.getColumnIndex(e),this._drawRowStatus(s,t),!0!==i&&(this.drawCellData(s,t,e),this.groupbyStatus.grouped&&this.options.groupbyDisplayRowIndex)){for(var a=t+1,n=s+1;"number"==typeof this.groupbyStatus.groupedRowIndexArr[a]&&a<this.groupbyStatus.groupedRowIndexArr.length;)a++,n++;if("object"===(0,l.Z)(this.groupbyStatus.groupedRowIndexArr[a])&&"footer"===this.groupbyStatus.groupedRowIndexArr[a].type){var h=this.dataList.getRealRowIndex(a);if(null!=h){var d=this.all_data_td_list[n*this.realRowDataLength];d&&this.drawGroupData(d,h,n)}}}var u=this.getColumnID(e),c=this.expressionAssArr[u];if(null!=c){var p=this.searchExpression(c);for(var g in p){var m=this.getColumnIndex(g);this.drawCellData(s,t,m),this.drawFooter(m),this.drawHeader(m)}}var f=this.labelColumnAssArr[u];if(null!=f)for(g=0;g<f.length;g++){var b=this.getColumnIndex(f[g]);this.drawCellData(s,t,b)}this.displayNoResultMessage(),this.hasSubtotal&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex)),this.drawFooter(u),this.drawHeader(u),o||this._setCheckboxHead(u)}},b.prototype.searchExpression=function(t){for(var e={},i=[t];i.length>0;)for(var o=i.pop(),s=0;s<o.length;s++)if(e[o[s]]=!0,this.expressionAssArr[o[s]]){var r=this.expressionAssArr[o[s]];if(r.length>1)i.push(r);else null!=this.expressionAssArr[r]&&i.push(r),e[r]=!0}return e},b.prototype.notifyRowChanged=function(t,e){if(this.changeCount++,!this.delayedDraw({rowIndex:t})){if(this.options.senseReader&&this.rowIndex<=0)return this.senseReaderMode=!0,this.setDataTable(),this.drawData(0),this.drawFooter(),this.drawHeader(),this.senseReaderMode=!1,this.displayNoResultMessage(),void this.refreshAdaptive({simple:!0});if("native"===this.options.drawType)return this.setDataTable(),this.drawData(0),this.drawFooter(),this.drawHeader(),this.displayNoResultMessage(),void this.refreshAdaptive({simple:!0});if(-1==this.rowIndex)this.drawDataTable(0),(this.options.fixedColumn>0||this.options.fixedRightColumn>0)&&this.arrangeOverflowXScroll(!0);else if(e&&!0===e.keepScrollTop)this.lastTopRowIndex=null,this.drawData(this.rowIndex,0,null,null,{keepScrollTop:!0});else{this.lastTopRowIndex=null;var i=this._dataList.options.depthColumn?this.getDrawCount()+this.rowIndex:this.getDataLength(),o=(t=t||this.rowIndex)-this.rowIndex,s=this.rowIndex;if(0<=o&&o<=this.lastIndex&&(this.rowIndex<=0||this.rowIndex+this.lastIndex<i))if(this.isDrillDown&&!this.drilldown.isOpen(t)){var r=("linkedDataList"===this.drilldown.mode?this._linkedDataList.filteredRowIndexArr:this._dataList.filteredRowIndexArr).length-(t+1),n=this.lastIndex-o-r;s=l=n<=0?this.rowIndex:(l=this.rowIndex-n)>0?l:0}else s=this.rowIndex;else if(0<=o&&o<=this.lastIndex||o<0){var l;(l=this.rowIndex-1)+this.lastIndex>=i&&(l=i-this.lastIndex-1),s=l=l>0?l:0}this.hiddenCellObj.length>0?(this.rowIndex=s,a.D.setTimeout(this._setCellVisibleRefresh,{key:this.id+"_setCellVisibleRefresh",caller:this,delay:200})):this.drawData(s,0)}this.displayNoResultMessage(),this.hasSubtotal&&this.refreshSubtotalRow(t),this.drawFooter(),this.drawHeader(),this.refreshAdaptive({simple:!0})}},b.prototype.notifyRowInserted=function(t){if(t=parseInt(t,10),this.changeCount++,!this.delayedDraw({rowIndex:t})){if(this.options.senseReader&&this.rowIndex<=0)return this.senseReaderMode=!0,this.setDataTable(),this.drawData(0),"all"!==this.options.visibleRowNum&&(this.lastTopRowIndex=null,
this.setScrollYHeight()),this.drawFooter(),this.drawHeader(),this.senseReaderMode=!1,this.displayNoResultMessage(),void this.refreshAdaptive({simple:!0});if("native"===this.options.drawType)return this.setDataTable(),this.drawData(0),this.drawFooter(),this.drawHeader(),this.displayNoResultMessage(),void this.refreshAdaptive({simple:!0});if(this.lastTopRowIndex=null,-1==this.rowIndex)0==this.drawDataTable(0)&&this.drawData(0,0),(this.options.fixedColumn>0||this.options.fixedRightColumn>0)&&this.arrangeOverflowXScroll(!0);else if(""!==this.options.visibleRowNum||this.options.initFixedHeightByRowNum>0)this.setDataTable(),this.drawData(0);else{var e=t-this.rowIndex,i=this.getElementById(this.id+"_scrollY_div");if(e<0){var o=this.getElementById(this.id+"_scrollY_div");this.scrollEvent=!1,o.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t),this.drawData(t,0)}else(i.offsetHeight>=i.scrollHeight||e<=this.lastIndex)&&(this.hasSubtotal&&(e=0),this.drawData(this.rowIndex,e))}0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight();var s=this._getVisibleLastIndex(this.lastIndex+1);if(this.rowIndex+s-1<t){this.scrollEvent=!1,(o=this.getElementById(this.id+"_scrollY_div")).scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t);var r=this._getEpsilon(),n=Math.round(o.scrollTop)+r,l=this._getVisibleRowIndex(parseInt(n/this.oneRowScrollHeight));this.hiddenCellObj.length>0?(this.rowIndex=l,a.D.setTimeout(this._setCellVisibleRefresh,{key:this.id+"_setCellVisibleRefresh",caller:this,delay:200}),this.lastTopRowIndex=null):this.drawData(l)}this.displayNoResultMessage(),this.drawFooter(),this.drawHeader(),this.refreshAdaptive({simple:!0})}},b.prototype.displayNoResultMessage=function(){var t="removed"!==this.options.noResultMessageExclude||0==this.removed,e=this.getElementById(this.id+"_noresult");if(e&&this.options.noResultMessageVisible&&t&&0==this.initFlag&&0==this.getDataLength()){e.innerHTML=this.options.noResultMessage,e.style.display="block";var i=this.getElementById(this.id+"_main_div"),o=i.offsetHeight,s=this.getElementById(this.id+"_body_table").offsetHeight+3,r=this.getElementById(this.id+"_foot_table"),a=0;r&&(a=r.offsetHeight);var n=this.getElementById(this.id+"_noresult"),l=parseInt(WebSquare.style.getStyle(n,"margin-top"),10)||0,h=parseInt(WebSquare.style.getStyle(n,"margin-bottom"),10)||0,d=n.offsetHeight+l+h,u=o-s-a,c=this.getElementById(this.id+"_scrollX_div").offsetHeight;if(u<=0);else if(u<=d)this.getElementById(this.id+"_noresult").style.top=s+l+"px",this.setSize(i,s+a+d+c+l+h);else{var p=this.getElementById(this.id+"_head_table"),g=this.getElementById(this.id+"_noresult").style.top,m=0;if(p&&p.childNodes)for(var f=0;f<p.childNodes.length;f++)"string"==typeof p.childNodes[f].tagName&&"TR"===p.childNodes[f].tagName.toUpperCase()&&m++;m>1&&"40%"==g&&(this.getElementById(this.id+"_noresult").style.top=parseInt(m*this.oneRowHeight/2+4*o/10)+"px")}}else e.style.display="none";this.removed=!1,this.delayedDrawObj||this.removeAllFinish||(this.initFlag=!1)},b.prototype.delayedDraw=function(t){return!!this.startedDisplayNone||(0==this.resizeObj.width||0==this.resizeObj.height)&&(this.delayedDrawObj||(this.delayedDrawObj={}),this.delayedDrawObj.redraw=!0,t.hasOwnProperty("rowIndex")?this.delayedDrawObj.rowIndex=t.rowIndex:t.hasOwnProperty("subTotalVisible")&&(this.delayedDrawObj.subTotalVisible=t.subTotalVisible),!0)},b.prototype.delayedAction=function(){this.startedDisplayNone=!1,this.setPreAction(),this.getRowCount&&this.getRowCount()>0&&this.notifyDataChanged(),this.options.focusOnSetData&&this._setFocusedCell(0,0);var t=WebSquare.BootLoader.fullViewed||!1,e=a.D.fullViewed||!1;t||e||this.checkAdaptiveGridType()&&(""==this.options.adaptive&&0==Object.keys(this.hideThresholdObj).length||(this.oldOptions.headerColBorder="",this.oldOptions.bodyColBorder="",this.setAdaptive(),
a.D.isMobile()&&this.options.fixAdaptive||this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive)))),this.delayedDrawObj=null,this.initFlag=!1},b.prototype.setRedrawStatus=function(t){if(!this.startedDisplayNone||"stop"!=t)if("stop"==t)this.delayedDrawObj||(this.delayedDrawObj={});else{this.setDataLayerPosition(),this.scrollX_right.scrollLeft=this.resizeObj.scrollLeft,this.getElementById(this.id+"_scrollY_div").scrollTop=this.resizeObj.scrollTop,this.handlerResize_drawInitializer(),this._handleScrollX();for(var e=!1,i=0;i<this.colWidthList.length;i++)if(this.colWidthList[i].toString().indexOf("*")>-1){e=!0;break}if((this.options.autoFit||e)&&this.autoFitFunc(),this.delayedDrawObj.redraw){this.lastTopRowIndex=null,this.setDataTable(),this.setTrRowTable(),this.setColIndexInfo();var o=this.delayedDrawObj.rowIndex||0,s=o,r=this.getDataLength();if(r-this.drawedRowLength<s&&(s=r-this.drawedRowLength)<0&&(s=0),"all"!==this.options.visibleRowNum)for(;this.hiddenRowObj.extraRow<this.hiddenRowObj.length;)this._addHiddenRow(this.drawedRowLength+this.hiddenRowObj.extraRow);this.drawData(s),null!=this.delayedDrawObj.subTotalVisible&&this.delayedDrawObj.subTotalVisible!==this.hasSubtotal?this.setSubtotalVisible(this.delayedDrawObj.subTotalVisible):this.setScrollYHeight();var a=this.rowIndex+this.lastIndex,n=this._getScrollRowIndex(o);if(a<o||n<o){this.scrollEvent=!1;var l=this.getElementById(this.id+"_scrollY_div");l.scrollTop=this.oneRowScrollHeight*n;var h=this._getVisibleRowIndex(parseInt(l.scrollTop/this.oneRowScrollHeight));this.drawData(h)}this.drawFooter(),this.drawHeader(),this.displayNoResultMessage();var d="never"===this.options.mergeCells&&"never"===this.options.mergeCellsFixedRows&&"never"===this.options.mergeCellsFixedCols;for(var u in d||(this._mergeRefresh(),this.dynamicMergeHTML()),this.cellInfoHash)this.cellInfoHash[u].refreshCell()}this._setVisibleRowNumFix(),this.delayedDrawObj=null,this.initFlag=!1}};var y=function(){};y.prototype.setScrollYHeight=function(t){void 0!==t&&null!=t||(t={});var e=this.getDataLength(),i=this.rowIndex,o=!0===t.noDraw,r=!0===t.keepScrollTop,n=this.getElementById(this.id+"_size_y"),l=this.getElementById(this.id+"_scrollY_div"),h=n.parentNode.offsetHeight;0==h&&(h=parseInt(this.getStyle("height")));var d=this._getScrollRowIndex(i);if(-1==i||0==d&&d+this._getVisibleLastIndex(this.lastIndex+1)==e){var u=!0;if(this.hasSubtotal&&this.drawedSubtotal.length>0){var c=this.drawedSubtotal[this.drawedSubtotal.length-1];(c.rowIndex+1!=e||"none"===c[c.length-1].style.display||this._getLastSubtotalCount()>this.drawedSubtotal.length)&&(u=!1)}else this.hasSubtotal&&0==this.drawedSubtotal.length&&this.lastSubtotalRow&&e>0&&(u=!1);if(u)return"table"==n.tagName.toLowerCase()&&(l.innerHTML=this.getScrollY(),this.dom[this.id+"_size_y"]=null,n=this.getElementById(this.id+"_size_y")),void(0!==n.offsetHeight&&(n.style.height="0px",this.handlerResize_drawInitializer()))}var p=l.scrollTop;if(!0!==t.skipResize){var g;if("number"==typeof t.restRowCnt)g=t.restRowCnt;else if(""!==this.options.visibleRowNum)this.options.senseReader&&"all"===this.options.visibleRowNum||this.isDrillDown?g=e-(this.lastIndex+1):(g=e-this.drawedRowLength,this.options.initFixedHeightByRowNum>-1&&(g+=this._getLastSubtotalCount())),g<0&&(g=0),g=Math.max(0,g-this._getHiddenRowCount());else if(this.lastTopRowIndex&&this.lastTopRowIndex>0)g=this._getScrollRowIndex(Math.ceil(this.lastTopRowIndex));else{var m=this.getElementById(this.id+"_head_table"),f=this.dataLayerHeight-m.offsetHeight,b=parseInt(f/this.oneRowHeight),y=this.drawedRowLength;b+(this.isMobile?0:1)<y&&(y=b+(this.isMobile?0:1)),g=this.options.fixHeight||this.hasSubtotal?e-b>1?e-b:1:this.options.senseReader?e-(this.lastIndex+1)>0?e-(this.lastIndex+1):1:e-y+1>1?e-y+(this.isMobile?0:1):1,g=Math.max(0,g-this._getHiddenRowCount())}var v=h+this.oneRowScrollHeight*g;if(h=l.offsetHeight,
v<=1e6&&"table"!=n.tagName.toLowerCase())n.style.height=v+"px";else if(v<=1e6)l.innerHTML=this.getScrollY(),this.dom[this.id+"_size_y"]=null,(n=this.getElementById(this.id+"_size_y")).style.height=v+"px";else if(s.v.browserCheck.ieAllVersion&&!this.isIE6or7||a.D.isSpartan()){var w=[];for(w.push("<table id='"+this.id+"_size_y' style='border-collapse:collapse; border-spacing:0px;height:0px; position:absolute; top:0px; left:0px; width:18px'><tbody>");v>1e6;)w.push("<tr style='height:1000000px'><td></td></tr>"),v-=1e6;w.push("<tr style='height:"+v+"px'><td></td></tr></tbody></table>"),l.innerHTML=w.join(""),this.dom[this.id+"_size_y"]=null,n=this.getElementById(this.id+"_size_y")}else"table"==n.tagName.toLowerCase()&&(l.innerHTML=this.getScrollY(),this.dom[this.id+"_size_y"]=null,n=this.getElementById(this.id+"_size_y")),s.v.browserCheck.moz?n.style.height=v+1+"px":n.style.height=v+"px"}else h=l.offsetHeight;if(!0!==t.skipScrollEnd){var S=n.offsetHeight;S<1e6&&(S=parseInt(n.style.height,10));var C=S-h,x=this._getEpsilon(),_=Math.min(Math.round(p)+x,C),I=this._getScrollMaxRowIndex();if(I>e-this._getHiddenRowCount())this._applyScrollEnd(I,{noDraw:!0});else{if((this.options.syncWithScrollTrack?Math.ceil:Math.floor).call(this,_/this.oneRowScrollHeight)!=this._getScrollRowIndex(i)){this.lastTopRowIndex&&this.lastTopRowIndex==i&&(i=this.lastTopRowIndex+1);var T=this._getScrollRowIndex(i);o&&l.scrollTop!=this.oneRowScrollHeight*T&&(this.scrollEvent=!1),_=Math.min(this.oneRowScrollHeight*T,C),l.scrollTop=_,this.bScrollTop=this._getVisibleRowIndex(parseInt(_/this.oneRowScrollHeight))}!r&&C>0&&C==_&&this._applyScrollEnd(this.rowIndex),this.lastScrollYTop=l.scrollTop,!0!==t.skipResize&&this.handlerResize_drawInitializer(),this.isMobile&&this.setIScrollY()}}else this.handlerResize_drawInitializer()},y.prototype._checkScrollEnd=function(){try{var t=this.getElementById(this.id+"_size_y"),e=this.getElementById(this.id+"_scrollY_div"),i=e.offsetHeight,o=t.offsetHeight;o<1e6&&(o=parseInt(t.style.height,10));var s=o-i,a=this._getEpsilon(),n=e.scrollTop,l=Math.min(Math.round(n)+a,s);return s>0&&s===l}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype._checkScrollEnd2=function(){try{var t=this.getElementById(this.id+"_size_y"),e=this.getElementById(this.id+"_scrollY_div"),i=e.offsetHeight,o=parseInt(t.style.height,10)-i,s=this._getEpsilon(),a=e.scrollTop,n=Math.min(Math.round(a)+s,o);return o<=0?-1:n<3?1:n<o?0:2}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype._applyScrollEnd=function(t,e){try{if(""!==this.options.visibleRowNum||this.lastTopRowIndex>0||0===this.lastTopRowIndex||this.groupbyStatus.grouped)return 0;if(this.hiddenCellObj.length>0)return 0;if(isNaN(t)&&(t=this.rowIndex),void 0!==e&&null!=e||(e={}),this._applyScrollEndCnt){if(this._applyScrollEndCnt>4)return;this._applyScrollEndCnt++}else this._applyScrollEndCnt=0;var i=0,o=this.getDataLength(),s=!1;if(this.hasSubtotal){if(this.drawedSubtotal.length>0){var a=this.drawedSubtotal[this.drawedSubtotal.length-1];if(a.rowIndex==o-1)"none"!=a[a.length-1].style.display&&(s=!0)}}else s=!0;var n=this.lastIndex+1,l=this._getVisibleLastIndex(n);if(t+l==o&&s)this.lastTopRowIndex=t;else{var h=o-l;i=this._getScrollRowIndex(h)-this._getScrollRowIndex(t);var d=this.getElementById(this.id+"_size_y");if(this.hasSubtotal&&!s)if(this.struct.subtotalArr.length>1&&""===this.options.visibleRowNum&&!0!==e.noDraw){var u=this._getDrawedRowCount();if(u>0)return this.options.initFixedHeightByRowNum=u,this.options.visibleRowNum=u,this.drawedRowLength=u,this.lastTopRowIndex=null,this.drawedRowLength=this.options.initFixedHeightByRowNum,void this.drawData(this.rowIndex,0);i+=this.struct.subtotalArr.length}else i+=this.struct.subtotalArr.length;if(0!==i){this.lastTopRowIndex=null;var c=d.offsetHeight;c<1e6&&(c=parseInt(d.style.height,10)),d.style.height=c+this.oneRowScrollHeight*i+"px",!0!==e.noDraw&&this.drawData(t+i),this.handlerResize_drawInitializer()}}return this._applyScrollEndCnt=0,i}catch(t){
r.w.printStackTrace(t,null,this)}},y.prototype.addGridScroll=function(t){var e=this.rowIndex+t;e=(e=e<0?0:e)>=this.getDataLength()-this.lastIndex?this.getDataLength()-this.lastIndex:e,this.scrollEvent=!1,this.checkScrollEnd=!0,this.drawData(e,0)},y.prototype.handleScrollY=function(t,e){var i=this.getElementById(this.id+"_scrollY_div").scrollTop;if(i!=this.bScrollY&&(this.bScrollY=i,0!==this.getElementById(this.id+"_size_y").offsetHeight)){var o=this._getEpsilon(),s=Math.round(i)+o,r=this._getVisibleRowIndex(parseInt(s/this.oneRowScrollHeight)),n=this.getDataLength(),l=this._checkScrollEnd();if(this.scrollEvent&&(null!=this.editedCell&&this._fireOnviewchange(this.editedCell.id,"handleScrollY",[t]),this.bScrollTop!=r)){this.hasClass(document.activeElement,this.options.bodyTdClass)&&document.activeElement.blur&&document.activeElement.blur();var h="async";(e&&!0===e.changedHeight||l)&&(h="sync"),this.drawData(r,null,h)}this.bScrollTop=r;var d=this._getVisibleLastIndex(this.lastIndex+1);if(0==i&&this.checkScrollStart&&(this.skipScrollStartEvent||(this.scrollEvent=!0,this.checkScrollStart=this.options.alwaysTriggerScrollStart,u.B.stopEvent(t),a.D.setTimeout((function(){u.B.fireEvent(this,"onscrollstart")}),{key:this.id+"_scrollstart",caller:this,delay:150}))),(this.scrollEvent||this.checkScrollEnd)&&this.options.loadCount>0&&this.loadFlag){var c=r+d-1;n-this.options.loadCount-1<=c&&null==this.loadCheck[n]&&(this.skipScrollEndEvent||(this.loadCheck[n]=!0,this.scrollEvent=!0,this.loadFlag=!1,u.B.stopEvent(t),a.D.setTimeout((function(){u.B.fireEvent(this,"onscrollend")}),{key:this.id+"_scrollend",caller:this,delay:150})))}else(this.scrollEvent||this.checkScrollEnd)&&0==this.options.loadCount&&!0===l&&(!this.scrollEvent||this._applyScrollEnd(this.rowIndex)<=0)&&(u.B.stopEvent(t),a.D.setTimeout((function(){u.B.fireEvent(this,"onscrollend")}),{key:this.id+"_scrollend",caller:this,delay:150}));if(this.skipScrollStartEvent=!1,this.skipScrollEndEvent=!1,this.scrollEvent=!0,this.checkScrollEnd=!1,1==this.options.syncScroll&&this.options.syncScrollId)for(var p=this.options.syncScrollId.split(","),g=0;g<p.length;g++){var m=a.D.getComponentById(p[g],this.scope_id);m&&this.getRowCount()==m.getRowCount()&&m.setScrollTop(i)}u.B.fireEvent(this,"onscrolly",t)}},y.prototype.drawDataTable=function(t,e){try{null==t&&(t=this.rowIndex),-1==t&&(t=0);var i=this.drawedRowLength;return this.setDataTable(),this.headerTds=null,this.footerTds=null,this.drawedRowLength!=i&&(this.setColIndexInfo(),e&&e.keepScrollTop?this.drawData(this.rowIndex,0,null,null,{keepScrollTop:!0}):this.drawData(t,0)),this.drawedRowLength-i}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.drawData=function(t,e,i,o,a){try{s.v.clearTimer(this.id+"_drawData"),s.v.clearTimer(this.id+"_completiveDrawData"),s.v.clearTimer(this.id+"_adjustDraw");i=i||"sync";var n=!0;this.options.senseReader&&(n=!1),t=Math.min(t,this.getDataLength()),this.changeFocusedCellPosition(t,n,!0);var l=this.maxRowLength;if(this.rowIndex=t,null!=this.editedCell&&this.editedCell.handleEndEdit(null,o),this.subtotalHidden(e?{startRowIndex:e+this.rowIndex}:null),-1!=this.rowIndex&&"sync"!=i&&"all"!==this.options.visibleRowNum||this.startedDisplayNone)e=this.fastDrawData(e,{scroll:!0}),s.v.setTimer((function(e){s.v.setTimer(this.completiveDrawData,{key:this.id+"_completiveDrawData",caller:this,delay:120,args:[e],callback:function(e){s.v.setTimer((function(){this.startedDisplayNone||(this.adjustDraw(e),this._setGridBorder(),this._setCheckboxHead()),l!=this.maxRowLength&&this.changeFocusedCellPosition(t,n)}),{key:this.id+"_adjustDraw",caller:this})}})}),{key:this.id+"_drawData",caller:this,delay:1,args:[e]});else{var h=this.completiveDrawData(e,!1);this.adjustDraw(h,a),this._setGridBorder(),this._setCheckboxHead(),l!=this.maxRowLength&&this.changeFocusedCellPosition(t,n)}}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.fastDrawData=function(t,e){try{var i=this.options.initFixedHeightByRowNum>-1
;i&&(void 0===e||null==e?e={skipSubtotal:!0}:e.skipSubtotal=!0),this.options.measureTime&&s.v.measureTime((function(t){var e=t.aver,i=parseInt(1e3/e*10,10)/10;c.k.printLog("Id : "+this.id+", time : "+e+"ms   ,fps : "+i)}),{key:this.id+"_measureDrawTime",caller:this});var o=this.rowIndex,a=this.getDataLength();t=t||0;!0===this.hiddenRowObj.init&&(t=0);var n=this._getVisibleTrRowIndex(t,o),h=this.hiddenCellObj.length>0;if(a>0){0==t&&o!=this.lastTopRowIndex&&""===this.options.visibleRowNum&&this.drawSubtotalRow(0,o-1);new Date;var d,u=1;h?(d=a,u=a):""===this.options.visibleRowNum?d=this._getVisibleTrRowIndex(this.drawedRowLength,o):("all"===this.options.visibleRowNum||(u=parseInt(this.options.visibleRowNum,10)-t),d=a);for(this._getVisibleTrRowIndex(this.options.drawLimitRow,o);n<d&&n+o<a&&u>0;n++){var p=!this.hiddenRowObj.length>0||this._getRowVisible(n+o);p&&!0===this.hiddenRowObj.init&&this._setRowDisplay(n,""),this.options.fixedRow>0&&this.options.fixedRow>n?this.fastDrawRowData(n,n,e):this.options.lastFixedRow>0&&n>this.lastIndex-this.options.lastFixedRow||this.fastDrawRowData(n,n+o,e);var g=this.options.backgroundColorMode.toLowerCase();if("always"==g?"object"!=(0,l.Z)(this.dataList.getRealRowIndex())&&(this.options.fixedRow>0&&this.options.fixedRow>n?this.applyRowStyleOptions(n):this.options.lastFixedRow>0&&n>this.lastIndex-this.options.lastFixedRow||this.applyRowStyleOptions(o+n)):"full"==g&&"object"!=(0,l.Z)(this.dataList.getRealRowIndex())&&(this.options.fixedRow>0&&this.options.fixedRow>n?(this.applyRowStyleOptions(n),this.setEvenOddBackground(n,n)):this.options.lastFixedRow>0&&n>this.lastIndex-this.options.lastFixedRow||(this.applyRowStyleOptions(o+n),this.setEvenOddBackground(n,o+n))),p?this.lastDisplayedRow<n&&!0!==this.hiddenRowObj.init&&(this._setRowDisplay(n,""),h||(this.lastDisplayedRow=n)):this._setRowDisplay(n,"none"),p&&""!==this.options.visibleRowNum)if(u--,i&&this.hasSubtotal&&u>=1)u-=this.drawSubtotalRow(n+1,n+o,{maxCount:u});if(h)for(var m=0;m<this.oneRowDataLength;m++){var f=n+o,b=this._getTdElem(n+o,m);if(b){var y=!0===this.hiddenCellObj[f+"_"+m];b.style.display=y?"none":""}}}}if(this.hideDataLayer&&(this.hideDataLayer.style.display="none"),null!==this.lastTopRowIndex&&o>=this.lastTopRowIndex&&!0!==this.hiddenRowObj.init&&!h){for(m=n;m<=this.lastDisplayedRow;m++)this._setRowDisplay(m,"none");this.lastDisplayedRow=n-1}return this.options.mergeRefreshAlways&&this.dynamicMergeHTML(),!0===this.hiddenRowObj.init?t:n}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.completiveDrawData=function(t,e){try{!this.autofitDone&&this.options.autoFit&&this._setAutoFit();var i=this.getDataLength();t=t||0;!0===this.hiddenRowObj.init&&(t=0);var o=this.rowIndex,s=t-1,n=this.dataLayerHeight,l=this.hiddenCellObj.length>0;if(i>0){if(!0===this.hiddenRowObj.init)this._applyRowVisible({applyStyle:!0,drawRow:!0}),s=this.lastIndex;else{var h=this.options.initFixedHeightByRowNum>-1;0==t&&o!=this.lastTopRowIndex&&""===this.options.visibleRowNum&&this.drawSubtotalRow(0,o-1);var d,u=this.drawedRowLength;h&&this.hasSubtotal&&this.drawedSubtotal&&(u-=this.drawedSubtotal.drawedRowLength),h&&(d={skipSubtotal:!0});for(var c=t;c<u&&c+o<i;c++){var p=c+this.rowIndex;if(this.options.fixedRow>0&&this.options.fixedRow>c?this.fastDrawRowData(c,c,d):this.fastDrawRowData(c,p,d),s=c,h&&this.hasSubtotal&&c<u-1)u-=this.drawSubtotalRow(c+1,p,{maxCount:u-c-1})}if(h&&this.hasSubtotal&&u>s+1&&(u-=this.drawSubtotalRow(0,o-1,{maxCount:u-s-1})),this.options.rowResize&&this.rowResized){var g=n-this.getElementById(this.id+"_head_table").offsetHeight,m=0;for(c=0;c<this.dataRowList.length;c++){if(!(m<g)){s=c;break}m+=this.dataRowList[c].offsetHeight}}if("native"==this.options.drawType&&0!=t&&(s=this.getDataLength()-1),l){for(c=s+1;c<this.drawedRowLength+this.hiddenRowObj.extraRow;c++)this._setRowDisplay(c,"none");for(c=0;c<=s;c++)this._setRowDisplay(c,"")}else{for(c=s+1;c<=this.lastDisplayedRow+this.hiddenRowObj.extraRow;c++)this._setRowDisplay(c,"none")
;for(c=this.lastDisplayedRow+1;c<=s;c++)this._setRowDisplay(c,"")}var f=l||""===this.options.visibleRowNum&&-1==this.options.initFixedHeightByRowNum;if(f){var b=0,y=this.options.backgroundColorMode.toLowerCase();"always"!==y&&"full"!==y||(b=t);for(c=b;c<=s;c++)this.options.fixedRow>0&&this.options.fixedRow>c?this.applyRowStyleOptions(c):this.applyRowStyleOptions(o+c);this.options.autoResizeEmbeddedInput&&this.firstEmbeddedInputResize&&(this.setAutoResizeEmbeddedInput(),this.firstEmbeddedInputResize=!1)}this.lastDisplayedRow=s,f&&"all"!==this.options.visibleRowNum&&(s=this.cutGridBottom(s,e))}for(c=0;c<=s;c++)this.options.fixedRow>0&&this.options.fixedRow>c?this.setEvenOddBackground(c,c):this.setEvenOddBackground(c,o+c);if(this.options.lastFixedRow>0)for(c=0;c<this.options.lastFixedRow;c++)this.options.lastFixedRowStartIndex>0?(this.fastDrawRowData(s-c,this.options.lastFixedRowStartIndex+1-c),f&&this.applyRowStyleOptions(s-c),this.setEvenOddBackground(s-c,this.options.lastFixedRowStartIndex+1-c)):(this.fastDrawRowData(s-c,i-1-c),f&&this.applyRowStyleOptions(s-c),this.setEvenOddBackground(s-c,i-1-c));if(!0!==this.hiddenRowObj.init&&!l){var v=this._getVisibleLastIndex(s+1);s+1<this.drawedRowLength&&(this._setRowDisplay(v,""),this.setEvenOddBackground(v,o+v),this.applyRowStyleOptions(o+v),this.options.showLastRow&&!this.hasSubtotal?this.getDataLength()<=o+v&&this._setRowDisplay(v,"none"):this._setRowDisplay(v,"none"))}}else{var w=this.options.showLastRow&&!this.hasSubtotal?1:0,S=this.lastDisplayedRow+w;!0===this.hiddenRowObj.init&&(S=this.drawedRowLength+this.hiddenRowObj.extraRow-1);for(c=0;c<=S;c++)this._setRowDisplay(c,"none");s=this.lastDisplayedRow=-1}if(this.hideDataLayer&&(this.hideDataLayer.style.display="none"),this.focusedCell.length>0&&!this.editedCell){var C=this.focusedCell[this.focusedCell.length-1].focusedRowIndex-this.rowIndex,x=this.focusedCell[this.focusedCell.length-1].focusedColIndex;if(0<=C&&C<=s){var _=this.data_td_list[x+C*this.oneRowDataLength];_&&this.applyFocusedCellIn(_)}}var I=WebSquare.BootLoader.fullViewed||!1,T=a.D.fullViewed||!1;if(!I&&!T&&"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")){this.hasSubtotal&&this.setAdaptiveGridSubtotalHeight();for(c=this.defaultColCnt;c<this.hiddenList.length;c++)1==this.hiddenList[c]&&this.setAdaptiveColumnVisible(c,!1)}return s}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.adjustDraw=function(t,e){try{void 0!==e&&null!=e||(e={});var i=this.rowIndex;this.dataLayerHeight;if(this.options.lazyDrawHiddenColumn)this.initVisibilityArr=this.colIndexInfo.body.visibilityArr.slice(0),this.hideInvisibleTds();else{this.rollbackCommitFlag=!1;var o=this.lastDisplayedRow;!0===this.hiddenRowObj.init&&(o=this.drawedRowLength+this.hiddenRowObj.extraRow-1);for(var s=0;s<=o-this.options.lastFixedRow;s++)this.groupbyStatus.grouped&&"object"==(0,l.Z)(this.dataList.getRealRowIndex(s+i))||(!0!==this.hiddenRowObj.init||this._getRowVisible(s+i))&&(this.options.fixedRow>0&&s<=this.options.fixedRow-1?this.lazyDrawRowData(s,s):this.lazyDrawRowData(s,s+i));this.rollbackCommitFlag=!0}t=this.options.initFixedHeightByRowNum>-1?this.adjustInitFixedByRowNum(t):""!==this.options.visibleRowNum?this.adjustVisibleRowNum(t):this.adjustDefault(t),this.maxRowLength=t,!this.isIE6or7||1==this.options.senseReader&&""==this.options.visibleRowNum||(this._setRowDisplay(t+1,""),this.dataRowList[(t+1)*this.oneRowLength]&&this.dataRowList[(t+1)*this.oneRowLength].offsetHeight,this._setRowDisplay(t+1,"none")),this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.adjustVisibleRowNum=function(t){try{if(""===this.options.visibleRowNum||"native"===this.options.drawType)return t;var e=this.rowIndex,i=this.getDataLength();this.setDataTable();var o={noDraw:!0,skipResize:null!=this.lastTopRowIndex};this.setScrollYHeight(o),!0===this.hiddenRowObj.init&&this.applyStyleOptions(t)
;var s,n=this.getElementById(this.id+"_scrollX_div"),l=parseInt(n.style.height,10),h=this.getElementById(this.id+"_body_table"),d=0;if(!0===this.hiddenRowObj.init)this.lastDisplayedRow=t,this.lastIndex=t,s=h.offsetHeight,a.D.isIE(9)&&(s=h.getBoundingClientRect().height),this.hasFooter&&(d=0==(d=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:d);else{var u="all"==this.options.visibleRowNum?i:u=parseInt(this.options.visibleRowNum,10);this.options.initFixedHeightByRowNum>-1&&this.hasSubtotal&&this.drawedSubtotal&&(u-=this.drawedSubtotal.drawedRowLength);for(var c=t+1;c+e<i&&c<u;c++)this.drawRowData(c,c+e),t++;for(c=this.lastDisplayedRow+1;c<=t;c++)this._setRowDisplay(c,"");this.applyStyleOptions(t);for(c=t+1;c<=this.lastDisplayedRow;c++)this._setRowDisplay(c,"none");this.lastDisplayedRow=t,this.lastIndex=t,s=h.offsetHeight,a.D.isIE(9)&&(s=h.getBoundingClientRect().height),this.hasFooter&&(d=0==(d=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:d)}!(this.options.initFixedHeightByRowNum>-1&&i>this.options.initFixedHeightByRowNum)&&s<this.defaultDataLayerHeight&&!0!==this.options.isItemTable&&(s=this.defaultDataLayerHeight);var p=this.getSize("height"),g=s+l+d,m="native"!==this.options.drawType;if(this.options.visibleRowNumFix){var f=this.options.initFixedHeightByRowNum>-1?this.options.initFixedHeightByRowNum:this.options.visibleRowNum;if(!isNaN(f)){var b=this.getElementById(this.id+"_head_table").offsetHeight;g<this.oneRowHeight*f+b+l+d+1&&(m=!1)}}if(i>0&&p!=g&&(m&&this.setSize(null,g),null!=this.lastTopRowIndex)){var y=this._getScrollRowIndex(this.lastTopRowIndex);y!==this._getScrollMaxRowIndex()&&(o.skipResize=!1,o.restRowCnt=y,this.lastTopRowIndex=null)}if(this.options.autoFit&&this._setAutoFit(),this.resizeObj={width:this.render.offsetWidth,height:this.render.offsetHeight,clientWidth:this.render.clientWidth},this.dataLayerHeight=h.parentNode.offsetHeight,this.setScrollYHeight(o),null==this.lastTopRowIndex){var v=this._getVisibleRowIndex(this._getScrollMaxRowIndex()),w=this._getVisibleLastIndex(this.lastIndex+1);this.rowIndex===v&&this.rowIndex+w===i&&(this.lastTopRowIndex=this.rowIndex)}return t}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.adjustInitFixedByRowNum=function(t){try{return this.adjustVisibleRowNum(t)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.adjustDefault=function(t){try{return""!==this.options.visibleRowNum||(this.adjustDraw_keepTop?this.adjustDraw_keepTop=null:this.setScrollYHeight({skipResize:!0})),t}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.drawBottomData=function(t){if(!(this.rowIndex<0||0==this.rowIndex&&t<=this.lastIndex||this.rowIndex>=0&&this.rowIndex+this.lastIndex==t||isNaN(Number(t)))){var e=this.getDataLength();t>=e&&(t=e-1),this.subtotalHidden();for(var i=0;i<=this.lastDisplayedRow;i++)this._setRowDisplay(i,"none");var o=t+1-this.drawedRowLength;o<0&&(o=0);var s=(e<this.drawedRowLength?e:this.drawedRowLength)-1;for(i=0;i<=s;i++)this.drawRowData(i,i+o),this._setRowDisplay(i,"");var r=t-o,a=this.dataRowList[(t-o+1)*this.oneRowLength-1];if(this.hasSubtotal&&this.drawedSubtotal.length>0)for(i=0;i<this.drawedSubtotal.length;i++){var n=this.drawedSubtotal[i];if(n.rowIndex==t){a=n[n.length-1];break}}var l=a.offsetTop+a.offsetHeight,h=this.dataLayerHeight;if(l<=h){this.rowIndex=o,this.lastIndex=this.cutGridBottom(s);for(i=this.rowIndex;i<=this.rowIndex+this.lastIndex;i++)this.applyRowStyleOptions(i);this.setScrollYHeight({noDraw:!0})}else{this.subtotalHidden({startRowIndex:t+1});for(i=r+1;i<=s;i++)this._setRowDisplay(i,"none");var d=o-(this.hasSubtotal?.5:0),u=0,c=0;if(this.hasSubtotal)for(var p in this.subtotalTableList)c+=this.subtotalTableList[p].rows.length;for(;d<e;){if(this.hasSubtotal){for(i=0;i<this.drawedSubtotal.length;i++)if(this.drawedSubtotal[i].rowIndex==d-.5)for(var g=0;g<this.drawedSubtotal[i].length;g++)l-=this.drawedSubtotal[i][g].offsetHeight;if(d+=.5,l<=h){this.subtotalHidden({endRowIndex:d-1})
;break}u+=c}for(i=0;i<this.oneRowLength;i++)l-=this.dataRowList[this.oneRowLength*(d-o)+i].offsetHeight;if(u+=this.oneRowLength,d+=this.hasSubtotal?.5:1,l<=h){if(this.hasSubtotal){d+=.5;for(i=0;i<this.drawedSubtotal.length;i++)if(this.drawedSubtotal[i].rowIndex==d-1){d-=.5;break}}break}}var m=[],f=this.getElementById(this.id+"_body_tbody");for(i=0;i<u;i++){var b=f.removeChild(f.rows[0]);b.style.cssText="display:none",m.push(b)}for(i=c;i<m.length;i++)f.appendChild(m[i]);for(i=0;i<c;i++)f.appendChild(m[i]);for(var p in this.dataRowList=[],this.all_data_td_list=[],this.data_num_td_list=[],this.data_status_td_list=[],this.data_td_list=[],this.subtotalRowHash)this.subtotalRowHash[p]=[];var y=0;for(i=0;i<c;i++){p=(w=f.rows[y++]).getAttribute("targetcolumnid");this.subtotalRowHash[p].push(w)}for(i=0;i<this.drawedRowLength;i++){var v=[];for(g=0;g<this.oneRowLength;g++)v.push(f.rows[y++]);this.addBodyRow2(i,v);for(g=0;g<c;g++){var w;p=(w=f.rows[y++]).getAttribute("targetcolumnid");this.subtotalRowHash[p].push(w)}}this.hideDataLayer&&(this.hideDataLayer.style.display="none"),this.rowIndex=parseInt(d+.5,10),this.lastIndex=s=t-this.rowIndex,t>=e-1&&(this.lastTopRowIndex=d);for(i=0;i<=s;i++)this.setEvenOddBackground(i,this.rowIndex+i);for(i=t;i>=d;i--)this.applyRowStyleOptions(i);if(s+1<this.drawedRowLength){var S=this._getVisibleLastIndex(s+1);this._setRowDisplay(S,""),this.setEvenOddBackground(S,this.rowIndex+S),this.rowIndex--,this.applyRowStyleOptions(this.rowIndex+S),this.rowIndex++,this._setRowDisplay(s+1,"none")}this.setScrollYHeight({noDraw:!0}),this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds()}}},y.prototype.cutGridBottom=function(t,e){try{if("native"===this.options.drawType)return;var i=this.rowIndex,o=this.dataLayerHeight,s=this.getElementById(this.id+"_head_table"),n=this.getElementById(this.id+"_body_tbody"),l=WebSquare.style.getStyle(s,"border-top-width");l="thin"==l?a.D.isIE(6)||a.D.isIE(7)?2:1:"medium"==l?a.D.isIE(6)||a.D.isIE(7)?4:3:"thick"==l?a.D.isIE(6)||a.D.isIE(7)||a.D.isOpera()?6:5:parseInt(l,10);var h=parseInt(l/2,10)-s.offsetTop;if(n.getBoundingClientRect){var d=n.getBoundingClientRect(),u=d.bottom-d.top;h+=u-parseInt(u,10)>0?1:0}for(var c=o-h,p=this.getElementById(this.id+"_body_tbody").childNodes,g=(t=-1,!0),m=this.getDataLength(),f=this.oneRowLength*m-1,b=i*this.oneRowLength,y=this.hiddenCellObj.length>0,v={row:[],cnt:0},w=0;w<p.length;w++){var S=p[w],C=!1,x=!1;if(0!==S.offsetHeight){v.row[w]="visible",v.cnt++,this.hasClass(S,"grid_body_row")?(g&&b+t<f?t++:(S.style.display="none",this.addClass(S,"w2grid_hidedRow")),C=!0):S.getAttribute("data-subtotal")&&(g||this._subtotalHidden([S]),x=!0);var _=S.offsetTop+S.offsetHeight-c;if(g&&_>0){if(g=!1,C){var I=t%this.oneRowLength;if(y){var T=this.oneRowHeight/this.oneRowLength;I=Math.floor(_/T)}for(var k=0;k<=I&&w>=k;k++){var D=p[w-k];D.style.display="none",this.addClass(D,"w2grid_hidedRow"),t--}}x&&this._subtotalHidden([S])}}else v.row[w]="hidden"}if(v.cnt-=t+1,y){var L=-1,W=-1;for(w=0;w<v.row.length&&W<t;w+=this.oneRowLength){var A=!1;for(k=0;k<this.oneRowLength;k++)"visible"===v.row[w+k]&&(!1===A&&(L++,A=!0),W++)}t=L}else if(t=Math.floor(t/this.oneRowLength),!this.senseReaderMode){if(!0!==this.hiddenRowObj.init)for(w=t+1;w<=this.drawedRowLength;w++)this._setRowDisplay(w,"none");this.lastDisplayedRow=t}var E=this.options.showLastRow&&!this.hasSubtotal,M=!(1==this.options.senseReader&&"all"!==this.options.visibleRowNum);if(E&&(!this.senseReaderMode||M)){m=this.getDataLength();var q=y?Math.floor(t/this.oneRowLength):t,R=this._getVisibleRowIndex(this._getScrollRowIndex(this.rowIndex)+q+1);if(m>0){for(;!this._getRowVisible(R)&&R<m;)R++;R<m&&this._getRowVisible(R)&&(this._setRowDisplay(R-this.rowIndex,""),this.lazyDrawRowData(R-this.rowIndex,R))}}this.lastIndex=t,!0===this.hiddenRowObj.init&&(this.lastDisplayedRow=t);var N=t;if(e&&!0===e.extraRowByCellHidden){var F=0;for(w=0;w<v.row.length&&v.cnt>0;w+=this.oneRowLength)for(A=!1,
k=0;k<this.oneRowLength;k++)"visible"===v.row[w+k]&&(!1===A&&(F++,A=!0),v.cnt--);N=F}return N}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.getLastIndex=function(t){try{var e=this.dataLayerHeight;if(t<0)return this.lastDisplayedRow=-1,-1;for(;;){var i=this.dataRowList[(t+1)*this.oneRowLength-1];if(!(t>0&&i.offsetTop+i.offsetHeight>e))break;t--}return t}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.lazyDrawRowData=function(t,e){try{for(var i=0;i<this.colIndexInfo.body.invisibleTds.length;i++){var o=this.colIndexInfo.body.invisibleTds[i]-this.defaultColCnt,s=this._getColumnMoveIndex(o);s>=0&&this.drawCellData(t,e,s,!0)}}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.fastDrawRowData=function(t,e,i){try{var o=this.dataList.getRealRowIndex(this.rowIndex+t),s=this.all_data_td_list[t*this.realRowDataLength],a=0;if("number"==typeof o){if((this.groupbyStatus.grouped||this.clearGrouping)&&this.defaultColCnt>0)for(var n=s,h=!0,d=0;d<this.defaultColCnt;d++){var u=this.colIndexes.bodyColInfo.colSpanArr[d]||1;n.setAttribute("colSpan",u),n.style.display="",n.innerText="",n.textContent="",n.className.match("w2grid_groupby")&&(n.className=s.className.split(" ").splice(0,1),this.options.rowNumVisible&&h?(n.className+=" gridBodyDefault_rowNumber",h=!1):n.className+=" gridBodyDefault_rowStatus"),n=n.nextSibling}if(this.options.rowMerge){var c={rowMergeStartPoint:[],rowMergeSameDataLength:[]},p=this.getRowData(e),g=!1,m=0;for(d=0;d<p.length;d++)p[d]==p[d+1]?(g||c.rowMergeStartPoint.push(d),m++,g=!0):(g&&(m++,c.rowMergeSameDataLength.push(m)),g=!1,m=0)}this._drawRowNumData(t,e,i),this._drawRowStatus(t,e,i);var f=this.colIndexInfo.body.visibleTds,b=f.length;i&&!0===i.refreshColumn&&(b=this.oneRowDataLength);for(d=0;d<b;d++){var y;if(i&&!0===i.refreshColumn)y=d;else{var v=f[d]-this.defaultColCnt;y=this._getColumnMoveIndex(v)}if(y>=0)if(this.options.rowMerge){u=null;for(var w=0;w<c.rowMergeStartPoint.length;w++)y==c.rowMergeStartPoint[w]?u=c.rowMergeSameDataLength[w]:c.rowMergeStartPoint[w]<y&&y<c.rowMergeStartPoint[w]+c.rowMergeSameDataLength[w]&&(u=-1);this.drawCellData(t,e,y,null,u,i)}else this.drawCellData(t,e,y,null,null,i)}i&&!0===i.skipSubtotal||(a=this.drawSubtotalRow(t+1,e))}else"object"==(0,l.Z)(o)&&this.drawGroupData(s,o,t);return a}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.clearGroupedRow=function(t,e){try{if(this.defaultColCnt>0)for(var i=this.all_data_td_list[t*this.realRowDataLength],o=i,s=!0,a=0;a<this.defaultColCnt;a++){var n=this.colIndexes.bodyColInfo.colSpanArr[a]||1;o.setAttribute("colSpan",n),o.style.display="",o.innerText="",o.textContent="",o.className.match("w2grid_groupby")&&(o.className=i.className.split(" ").splice(0,1),this.options.rowNumVisible&&s?(o.className+=" gridBodyDefault_rowNumber",s=!1):o.className+=" gridBodyDefault_rowStatus"),o=o.nextSibling}for(a=0;a<this.oneRowDataLength;a++){var l=a,h=this._getColumnMoveIndex(l);h>=0&&this.drawCellData(t,e,h)}this.drawSubtotalRow(t+1,e)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.drawRowData=function(t,e,i){try{var o=this.dataList.getRealRowIndex(this.rowIndex+t),s=0;if(null==o)return s;var a=this.all_data_td_list[t*this.realRowDataLength];if("number"==typeof o){this._drawRowNumData(t,e),this._drawRowStatus(t,e);for(var n=0;n<this.oneRowDataLength;n++){var l=n,h=this.getCellInfo(l);if(this.drawCellData(t,e,l),h&&h.options.colMerge&&!this.groupbyStatus.grouped)for(var d=this._dataList.getColumnIndex(this.getColumnID(l)),u=this._dataList.dataArr[e*this._dataList.oneRowDataLength+d],c=0;c<=this.maxRowLength-t;c++){var p=this.data_td_list[(t+c)*this.oneRowDataLength+l];if(p){var g=u==this.dataList.getCellData(t+c+1,l)?"1":"0";p.setAttribute("colMerged",g),this.drawCellData(t+c,e+c,l)}}}i&&!0===i.skipSubtotal||(s=this.drawSubtotalRow(t+1,e))}else this.drawGroupData(a,o,t);return s}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.hideNochangeDataLayer=function(t){if(null==this.hideDataLayer){
this.hideDataLayer=document.createElement("div"),this.hideDataLayer.className="w2grid_fastScroll_layer";var e=document.createElement("div");e.innerHTML=this.options.scrollMsg,e.className="w2grid_fastScroll_msg",this.hideDataLayer.appendChild(e),this.getElementById(this.id+"_dataLayer").appendChild(this.hideDataLayer)}var i=this.all_data_td_list[(t-1)*this.realRowDataLength],o=i.offsetHeight;0!=o?(this.hideDataLayer.style.display="block",this.hideDataLayer.style.top=i.offsetTop+o+1+"px"):this.hideDataLayer.style.display="none"},y.prototype.setEvenOddBackground=function(t,e){if(this.options.oddEvenColorDisplay){var i=this.data_td_list[t*this.oneRowDataLength],o=null;if(i){o=i.parentNode;do{o.style.backgroundColor=e%2==1?this.options.evenRowBackgroundColor:this.options.oddRowBackgroundColor,o=a.D.next(o)}while(null!=o&&"0"!=o.getAttribute("trIndex"))}}},y.prototype._drawRowNumData=function(t,e,i){if(this.options.rowNumVisible){var o=this.data_num_td_list[t],s="";s=o&&null!=o.textContent?"textContent":o&&null!=o.innerText?"innerText":"innerHTML",this.rowNumArr?"number"==typeof this.rowNumArr[e]&&(o[s]=1+this.rowNumArr[e]):o&&(o[s]=1+e+this.startRowNumber)}},y.prototype._drawRowStatus=function(t,e,i){if(this.options.rowStatusVisible){var o=this.data_status_td_list[t];if(o){var s=this._linkedDataList||this._dataList,r="";switch("linkedDataList"==s.initializeType?s.getRowStatusValue(e):this._dataList.options.depthColumn||this.groupbyStatus.grouped?s._getRowStatusValue(this.getRealRowIndex(e)):s.getRowStatusValue(e)){case 0:r="R";break;case 1:r="U";break;case 2:r="C";break;case 3:r="D";break;case 4:r="V"}if(void 0===o.imageName&&(o.imageName=""),o.imageName!=r||this.clearGrouping){switch(o.imageName){case"":case"R":break;case"C":this.removeClass(o,"w2grid_rowStatus_C");break;case"U":this.removeClass(o,"w2grid_rowStatus_U");break;case"D":this.removeClass(o,"w2grid_rowStatus_D");break;case"V":this.removeClass(o,"w2grid_rowStatus_V")}"R"!=r&&""!=r&&this.addClass(o,"w2grid_rowStatus_"+r),o.imageName=r}}}},y.prototype.drawCellData=function(t,e,i,o,s,a){try{o||null==this.editedCell||this.editedCell.options.colIndex+""!=i+""||this.editedCell.handleCancelEdit();var n=this.data_td_list[i+t*this.oneRowDataLength];if(n){var l=this.cellInfoHash[this.tdIdList[i]];if(this.groupbyStatus.grouped||this.clearGrouping){var h=this.colIndexes.bodyColInfo.colSpanArr[i+this.defaultColCnt]||1;n.setAttribute("colSpan",h),n.style.display="",n.style.textAlign=l.options.textAlign}if(this.options.rowMerge)if(null==s)n.setAttribute("colSpan",""),n.style.display="",n.style.textAlign="";else if(s>0){h=s;n.setAttribute("colSpan",h),n.style.display="",n.style.textAlign=l.options.textAlign}else-1==s&&(n.style.display="none");!l.options.embeddedInput&&this.groupbyStatus.grouped&&(n.innerText="",n.textContent=""),(this.groupbyStatus.grouped||this.clearGrouping)&&this.hasClass(n,"w2grid_groupby")&&(n.className="gridBodyDefault");var d=this.aria_labelledby[i];if(d){var u=t+e+1;n.setAttribute("aria-labelledby",d+" r"+u)}if(l.options.headers&&this.options.applyScopeHeaders){var c=this.scope_id?this.scope_id+"_":"";n.setAttribute("headers",c+l.options.headers)}this.isColMerge&&l.options.colMerge&&!this.groupbyStatus.grouped?this.setColMergeCellData(t,e,i,a):this.setInnerHTML(n,e,i,a)}}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.setColMergeCellData=function(t,e,i,o){if(this.isColMergeAnd)return this.setColMergeAndCellData(t,e,i,o);var s=this.data_td_list[i+t*this.oneRowDataLength],r=this.getHasSubtotalCount(e);if(0==t)return 0!=r&&(s.style.borderBottomWidth="1px"),void this.setInnerHTML(s,e,i,o);var a=this.getColumnID(i),n=this.dataList._getCellData(e-1,a),l=this.data_td_list[i+(t-1)*this.oneRowDataLength],h=this.upperGroupingTest(e,i,t);if(n==this.dataList._getCellData(e,a)&&h){if(l.style.borderBottomWidth="0px",s.style.borderTopWidth="0px",s.style.borderBottomWidth="0px",s.innerHTML="","icon"==s.getAttribute("viewType")){var d=s.getAttribute("inputType")
;this.removeClass(s,this.options.bodyTdClass+"_"+d)}if(this.options.senseReader&&(0==r&&t!=this.lastDisplayedRow&&t!=this.lastIndex||(s.style.borderBottomWidth="1px"),t-1!=this.lastDisplayedRow&&t-1!=this.lastIndex||(l.style.borderBottomWidth="1px")),0!=r&&(s.style.borderBottomWidth="1px"),null!=l)return this.applyCellStyleOptions(e,i,!1),"mergeCellBackgroundColor"}else{var u=s.style.borderTopWidth;this.getCellInfo(i).options.colMergeEdit&&"0px"==u&&!this.groupbyStatus.grouped&&(u="1px"),s.style.borderTopWidth="0px",this.setInnerHTML(s,e,i,o),s.style.borderTopWidth=u}},y.prototype.setColMergeAndCellData=function(t,e,i,o){var s=this.data_td_list[i+t*this.oneRowDataLength],r=this.getHasSubtotalCount(e);if(0==t)return 0!=r&&(s.style.borderBottomWidth="1px"),void this.setInnerHTML(s,e,i,o);this.colMergeObj?this.colMergeObj.displayRowIndex!=e&&(this.colMergeObj={displayRowIndex:e,colArr:[]}):this.colMergeObj={displayRowIndex:e,colArr:[]};var a=this.getColumnID(i);if(null==this.colMergeObj.colArr[i]){var n=this.dataList._getCellData(e-1,a),l=this.dataList._getCellData(e,a);if(this.colMergeObj.colArr[i]=n==l,this.colMergeObj.colArr[i])for(var h=0;h<this.oneRowDataLength;h++){if(null==this.colMergeObj.colArr[h])if(this.getCellInfo(h).options.colMerge){var d=this.getColumnID(h),u=this.dataList._getCellData(e-1,d),c=this.dataList._getCellData(e,d);this.colMergeObj.colArr[h]=u==c}else this.colMergeObj.colArr[h]=!0}}var p=!0;for(h=0;h<this.colMergeObj.colArr.length;h++)if(!this.colMergeObj.colArr[h]){p=!1;break}var g=this.data_td_list[i+(t-1)*this.oneRowDataLength];if(p)g.style.borderBottomWidth="0px",s.style.borderTopWidth="0px",s.style.borderBottomWidth="0px",s.innerHTML="",this.options.senseReader&&(0==r&&t!=this.lastDisplayedRow&&t!=this.lastIndex||(s.style.borderBottomWidth="1px"),t-1!=this.lastDisplayedRow&&t-1!=this.lastIndex||(g.style.borderBottomWidth="1px")),0!=r&&(s.style.borderBottomWidth="1px");else{var m=s.style.borderTopWidth;this.getCellInfo(i).options.colMergeEdit&&"0px"==m&&(m="1px"),s.style.borderTopWidth="0px",this.setInnerHTML(s,e,i,o),s.style.borderTopWidth=m}},y.prototype.drawColMergeCellData=function(t,e,i,o){if(this.isColMergeAnd)return this.drawColMergeAndCellData(t,e,i,o);var s=this.getColumnID(i),r=this.data_td_list[i+t*this.oneRowDataLength];if(r.style.borderBottomWidth="0px",0!=t||o){var a=this.getHasSubtotalCount(e);0==a&&(r.style.borderBottomWidth="0px");var n=this.dataList._getCellData(e-1,s),l=this.data_td_list[i+(t-1)*this.oneRowDataLength];r.style.borderTopWidth="0px";var h=this.upperGroupingTest(e,i,t);if(n==this.dataList._getCellData(e,i)&&h){if(null!=l&&(l.style.borderBottomWidth="0px"),r.style.borderTopWidth="0px",r.style.borderBottomWidth="0px",r.setAttribute("colMerged","1"),r.innerHTML="",0!=a&&(r.style.borderBottomWidth="1px"),"icon"===r.getAttribute("viewType")){var d=r.getAttribute("inputType");this.removeClass(r,this.options.bodyTdClass+"_"+d)}if(null!=l&&this.options.oddEvenColorDisplay&&!this.options.oddEvenColorMerged)return"mergeCellBackgroundColor"}else r.style.borderTopWidth="1px"}},y.prototype.drawColMergeAndCellData=function(t,e,i,o){var s=this.getColumnID(i),r=this.data_td_list[i+t*this.oneRowDataLength];if(r.style.borderBottomWidth="0px",0!=t||o){var a=this.getHasSubtotalCount(e);if(0==a&&(r.style.borderBottomWidth="0px"),this.colMergeObj?this.colMergeObj.displayRowIndex!=e&&(this.colMergeObj={displayRowIndex:e,colArr:[]}):this.colMergeObj={displayRowIndex:e,colArr:[]},null==this.colMergeObj.colArr[i]){var n=this.dataList._getCellData(e-1,s),l=this.dataList._getCellData(e,s);if(this.colMergeObj.colArr[i]=n==l,this.colMergeObj.colArr[i])for(var h=0;h<this.oneRowDataLength;h++){if(null==this.colMergeObj.colArr[h])if(this.getCellInfo(h).options.colMerge){var d=this.getColumnID(h),u=this.dataList._getCellData(e-1,d),c=this.dataList._getCellData(e,d);this.colMergeObj.colArr[h]=u==c}else this.colMergeObj.colArr[h]=!0}}var p=!0
;for(h=0;h<this.colMergeObj.colArr.length;h++)if(!this.colMergeObj.colArr[h]){p=!1;break}if(p){var g=this.data_td_list[i+(t-1)*this.oneRowDataLength];if(null!=g&&(g.style.borderBottomWidth="0px"),r.style.borderTopWidth="0px",r.style.borderBottomWidth="0px",r.setAttribute("colMerged","1"),r.innerHTML="",0!=a&&(r.style.borderBottomWidth="1px"),null!=g&&this.options.oddEvenColorDisplay&&!this.options.oddEvenColorMerged)return"mergeCellBackgroundColor"}else r.style.borderTopWidth="1px"}},y.prototype.upperGroupingTest=function(t,e,i){var o=this.getCellInfo(e),s=o.options.upperColumn;if(this.hasSubtotal&&this.hasUpperSubtotalRow(t))return!1;if(""!=s){if(i){var r=this.getColumnIndex(s),a=this.data_td_list[r+i*this.oneRowDataLength],n=this.getCellInfo(r);if(a&&""==a.style.width&&(""==n.options.upperColumn||n.options.upperColumn&&"1"!=a.getAttribute("colMerged"))&&"1"!=a.getAttribute("colMerged")&&1==n.options.colMerge&&!this.groupbyStatus.grouped)return!1}if(this.dataList._getCellData(t,s)!=this.dataList._getCellData(t-1,s))return!1;var l=this.getCellInfo(s);if(l.options.upperColumn&&""!=l.options.upperColumn&&l.options.upperColumn!=o.id)return this.upperGroupingTest(t,l.options.upperColumn,i)}else{if(this.dataList._getCellData(t,e)!=this.dataList._getCellData(t-1,e))return!1}return!0},y.prototype.setDataTable=function(){try{var t=this.getElementById(this.id+"_head_table"),e=this.getElementById(this.id+"_body_table"),i=this.getElementById(this.id+"_body_tbody");if(this.dataLayerHeight=e.parentNode.offsetHeight,""===this.options.visibleRowNum&&0==this.dataLayerHeight)return this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),void this.delayedDraw({rowIndex:-1==this.rowIndex?0:this.rowIndex});this.defaultDataLayerHeight||(this.isIE6or7||a.D.isOpera()?this.defaultDataLayerHeight=this.getElementById(this.id+"_main_div").offsetHeight:this.defaultDataLayerHeight=this.dataLayerHeight);var o=0;if(this.options.senseReader&&"all"===this.options.visibleRowNum)o=this.getDataLength();else if(""===this.options.visibleRowNum)if(this.options.initFixedHeightByRowNum>-1)o=parseInt(this.options.initFixedHeightByRowNum,10)+1;else{var s=this.oneRowHeight;this.hiddenCellObj.length>0&&(s=this.oneRowHeight/this.oneRowLength),o=parseInt((this.dataLayerHeight-t.offsetHeight)/s)+1}else o="all"===this.options.visibleRowNum?this.getDataLength():parseInt(this.options.visibleRowNum,10);if(0==this.drawedRowLength&&(this.tdCellClassArr=new Array(o*this.oneRowLength)),o>this.drawedRowLength){var n=this.drawedRowLength;this.drawedRowLength=o;var l=[];0==n&&this.hasSubtotal&&(l=l.concat(this.createSubtotalRows(-1)));for(var h=n;h<this.drawedRowLength;h++){for(var d=[],u=0;u<this.oneRowLength;u++){var c=this.tempTr.rows[u].cloneNode(!0);d[u]=c,l.push(c),this.tdCellClassArr.push(null)}this.addBodyRow(h,d),this.hasSubtotal&&(l=l.concat(this.createSubtotalRows(h)))}0==this.drawedRowLength?e.style.borderWidth="0px":e.style.borderWidth="";for(u=0;u<l.length;u++)i.appendChild(l[u]);for(h=n+this.hiddenRowObj.extraRow;h<this.drawedRowLength+this.hiddenRowObj.extraRow;h++)this._setRowDisplay(h,"none")}}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.applyStyleOptions=function(t){try{for(var e=this.rowIndex>=0?this.rowIndex:0,i=0;i<=t+1+this.hiddenRowObj.extraRow&&i<this.drawedRowLength+this.hiddenRowObj.extraRow;i++)"object"!=(0,l.Z)(this.dataList.getRealRowIndex(i+e))&&(this.options.fixedRow>0&&i<=this.options.fixedRow-1||this.options.lastFixedRow>0&&i>t-this.options.lastFixedRow?this.applyRowStyleOptions(i):(!this.hiddenRowObj.length>0||this._getRowVisible(i+e))&&this.applyRowStyleOptions(i+e))}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype._setCheckboxHead=function(t){try{if(t)this.checkHeader(this.bodyToHeaderRelation[t]);else for(var e in this.headerInfoHash)this.checkHeader(e)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.applyColumnStyleOptions=function(t){try{
for(var e=0;e<this.drawedRowLength;e++)this.applyCellStyleOptions(e+this.rowIndex,t)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.applyRowStyleOptions=function(t){try{for(var e=this._getTrIndex(t),i=0,o=this.rowIndex;o<t&&this.hiddenRowObj.length>0;o++)this._getRowVisible(o)||i++;if(e<0||e-i>=this.drawedRowLength)return;var s=this.dataRowList[this.oneRowLength*e];if(!s)return;if("none"==s.style.display)return;if(this.options.fixedRow>0&&e==this.options.fixedRow-1){var a=this.dataRowList[this.oneRowLength*(e+1)-1];this.addClass(a,"w2grid_fixedRow")}if(this.options.lastFixedRow>0&&e==this.lastIndex-this.options.lastFixedRow+1){a=this.dataRowList[this.oneRowLength*(e-1)];this.addClass(a,"w2grid_lastFixedRow")}if(this.options.lazyDrawHiddenColumn){var n=this.colIndexInfo.body.visibleTds,l=e*this.oneRowDataLength;for(o=this.defaultColCnt;o<n.length;o++){var h=n[o]-this.defaultColCnt;this.all_data_td_list[l+h]&&this.applyCellStyleOptions(t,h)}}else for(o=0;o<this.oneRowDataLength;o++){l=e*this.oneRowDataLength;this.data_td_list[l+o]&&this.applyCellStyleOptions(t,o)}t===this.getRowCount()-1?this.__addClass(s,"w2grid_lastRow"):this.hasClass(s,"w2grid_lastRow")&&this.__removeClass(s,"w2grid_lastRow")}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.setAutoResizeEmbeddedInput=function(){try{for(var t=this.data_td_list,e="",i=null,o=null,s=0,n=0,l=!1,h=0;h<t.length;h++)if("text"==t[h].getAttribute("inputType")||"secret"==t[h].getAttribute("inputType")){e=t[h].getAttribute("col_id"),o=this.cellInfoHash[e];var d=!1;if((this.dom[o.mainGridId+o.id]||this.dom[t[h].getAttribute("id")+"_"+t[h].getAttribute("inputType")])&&(d=!0),1==o.options.embeddedInput&&d){null==(i=this.getInput(o,t[h])).render.parentNode&&(t[h].innerHTML="",t[h].appendChild(i.render)),"none"==t[h].parentNode.style.display&&(t[h].parentNode.style.display="",l=!0);var u=parseInt(t[h].getAttribute("colindex"),10);this.embeddedStyleObj||(this.embeddedStyleObj={top:parseInt(WebSquare.style.getStyle(t[h],"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t[h],"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t[h],"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t[h],"padding-right"),10),inputTop:parseInt(WebSquare.style.getStyle(i.render,"padding-top"),10),inputBottom:parseInt(WebSquare.style.getStyle(i.render,"padding-bottom"),10),inputLeft:parseInt(WebSquare.style.getStyle(i.render,"padding-left"),10),inputRight:parseInt(WebSquare.style.getStyle(i.render,"padding-right"),10)});var c=parseInt(WebSquare.style.getStyle(i.render,"border-top-width"),10),p=parseInt(WebSquare.style.getStyle(i.render,"border-bottom-width"),10),g=parseInt(WebSquare.style.getStyle(i.render,"border-left-width"),10),m=parseInt(WebSquare.style.getStyle(i.render,"border-right-width"),10);s=t[h].offsetHeight-parseInt(WebSquare.style.getStyle(t[h],"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t[h],"border-bottom-width"),10),s-=this.embeddedStyleObj.top+this.embeddedStyleObj.bottom,s-=c+p,this.embeddedWidthObj[u]&&!this.embeddedWidthObj[u].isChanged||(this.embeddedWidthObj[u]={isChanged:!1,width:t[h].clientWidth}),n=this.embeddedWidthObj[u].width,n-=this.embeddedStyleObj.left+this.embeddedStyleObj.right,n-=g+m,n-=this.embeddedStyleObj.inputLeft+this.embeddedStyleObj.inputRight,a.D.isOpera()&&(s+=2),l?t[h].parentNode.style.display="none":a.D.isIE("6 7")&&(s-=2),i.setSize(n-2,s-(this.embeddedStyleObj.inputTop+this.embeddedStyleObj.inputBottom)),i.setStyle("lineHeight",s+"px")}}else if("calendar"==t[h].getAttribute("inputType")){e=t[h].getAttribute("col_id"),o=this.cellInfoHash[e];var f=null;1==o.options.embeddedInput&&(null==(f=this.getInput(o,t[h])).render.parentNode&&(t[h].innerHTML="",t[h].appendChild(f.render)),"none"==t[h].parentNode.style.display&&(t[h].parentNode.style.display="",l=!0)),s=t[h].offsetHeight-parseInt(WebSquare.style.getStyle(t[h],"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t[h],"border-bottom-width"),10),
s-=this.embeddedCalendarStyleObj.top+this.embeddedCalendarStyleObj.bottom;u=parseInt(t[h].getAttribute("colindex"),10);this.embeddedWidthObj[u]&&!this.embeddedWidthObj[u].isChanged||(this.embeddedWidthObj[u]={isChanged:!1,width:t[h].clientWidth}),n=this.embeddedWidthObj[u].width,n-=this.embeddedCalendarStyleObj.left+this.embeddedCalendarStyleObj.right,l?t[h].parentNode.style.display="none":a.D.isIE("6 7")&&(s-=2),f.setSize(n-2,s)}}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.applyCellStyleOptions=function(t,e,i,o){try{var s=this._getTrIndex(t),n=this._getTdElem(t,e);if(n){var l,h,d,u=[],c=!1;if("number"==typeof e?(l=e,h=this.cellIdList[e]):(l=this.bodyIdColIndexMap[e],h=e),this._linkedDataList)d=this._linkedDataList.filteredRowIndexArr[t];else if(this.groupbyStatus.grouped){var p=!0;for(var g in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[g]){d=this._dataList.filteredRowIndexArr[t],p=!1;break}p&&(d=this.groupbyStatus.groupedRowIndexArr[t])}else d=this._dataList.filteredRowIndexArr[t];var m=this.cellInfoHash[h]||{options:{}};if("custom"==m.options.inputType&&(m=m.cellManagerHashByRowIndex[d]?m.cellManagerHashByRowIndex[d]:m),"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")&&"true"==m.options.hidden)return;null!=this.initStyleValueObj[l]&&u.push(this.initStyleValueObj[l].style),""!=m.options.textAlign&&u.push("text-align:"+m.options.textAlign),this.options.adjustAlign&&"left"==m.options.textAlign&&u.push("padding-left:"+this.options.adjustAlign+"px"),null!=this.defaultStyleValueObj[l]&&u.push(this.defaultStyleValueObj[l].style);var f=null,b=null,y=null,v=null,w=null,S=!1;(t<this.options.fixedRow||l<this.options.fixedColumn||l>=this.tdIdList.length-this.options.fixedRightColumn)&&(S=!0),null!=d?(f="number"==typeof d?this.rowStyleArr[d]:this.rowStyleArr[d.type+"_"+d.groupId],b="number"==typeof d?this.rowStyleFixedArr[d]:this.rowStyleFixedArr[d.type+"_"+d.groupId],y="number"==typeof d?this.rowStyleDataArr[d]:this.rowStyleDataArr[d.type+"_"+d.groupId],v="number"==typeof d?this.cellStyleArr[d*this.oneRowDataLength+l]:this.cellStyleArr[d.type+"_"+d.groupId+"_"+l],w=this.cellClassArr[d*this.oneRowDataLength+l]):w=this.cellClassArr[t*this.oneRowDataLength+l],null!=f&&u.push(this.rowStyleValueObj[f].style),null!=b&&S&&u.push(this.rowStyleFixedValueObj[b].style),null==y||S||u.push(this.rowStyleDataValueObj[y].style);var C=this.columnStyleValueObj[l],x=this.columnStyleFixedValueObj[l],_=this.columnStyleDataValueObj[l];if(null!=C&&u.push(this.columnStyleValueObj[l].style),null!=x&&S&&u.push(this.columnStyleFixedValueObj[l].style),null==_||S||u.push(this.columnStyleDataValueObj[l].style),null!=this.adaptiveColumnStyleValueObj[l]&&!0===this.checkRefreshAdaptive()&&u.push(this.adaptiveColumnStyleValueObj[l].style),null!=v&&u.push(this.cellStyleValueObj[v].style),f=="rowResizeStyle_"+t&&u.push(this.rowStyleValueObj[f].style),""!=this.options.readOnlyBackgroundColor&&"number"==typeof d)1==this.___getEditReadOnly(t,e)?(u.push(this.readOnlyTdStyle),n.readOnly=!0,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",-1)):(n.readOnly=!1,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",0));if(""!=this.options.readOnlyBackgroundImg||""!=this.options.readOnlyBackgroundImgCSS)1==this.___getEditReadOnly(t,e)?(u.push(this.readOnlyTdImg),this.options.readOnlyBackgroundImgCSS||(a.D.isIE(8)||a.D.isIE(6)||a.D.isIE(7))&&(u.push("filter: \"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', src='"+this.options.readOnlyBackgroundImg+"', sizingMethod='scale')\""),u.push("-ms-filter: \"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', src='"+this.options.readOnlyBackgroundImg+"', sizingMethod='scale')\"")),n.readOnly=!0,
"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",-1)):(n.readOnly=!1,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",0));n.disabled=!1,n.removeAttribute("disabled");var I=this.cellDisabledArr[d*this.oneRowDataLength+l],T=I;if(!0!==I&&!1!==I){var k=m.options.disabled,D=this.rowDisabledArr[d],L=this.options.disabledPriority;!0!==D&&!1!==D&&(D=""),I="column"===L&&""!==k?k:"row"===L&&""!==D?D:k+""=="true"||D+""=="true"||k+""!="false"&&D+""!="false"&&(""!==this.options.disabled&&this.options.disabled)}!0!==I&&"true"!==I||(u.push(this.disabledTdStyle),this.disabledCellStyleObj&&this.disabledCellStyleObj[t+"_"+e]&&this.disabledCellStyleObj[t+"_"+e].style&&u.push(this.disabledCellStyleObj[t+"_"+e].style));var W=this.options.focusMode;if(o&&(W="cell"),!i&&"transparent"!=this.options.selectedRowColor&&("row"==W||"both"==W))for(var A=0;A<this.focusedCell.length;A++)if(t==this.focusedCell[A].focusedRowIndex&&!("row"==this.options.focusMode&&1==this.options.fixedColumnNoBGColor&&e<this.options.fixedColumn)){u.push("background-color:"+this.options.selectedRowColor),c=!0;break}if(!i&&"transparent"!=this.options.selectedCellColor&&("cell"==W||"both"==W))for(A=0;A<this.focusedCell.length;A++)if(t==this.focusedCell[A].focusedRowIndex&&e==this.focusedCell[A].focusedColIndex){u.push("background-color:"+this.options.selectedCellColor),c=!0;break}("none"!=n.style.display||this.hiddenCellObj.length>0)&&!0!==this.hiddenCellObj[t+"_"+e]||u.push("display:none");var E=!1;this.hiddenCellObj.length>0&&(!0===this.hiddenCellObj[t+"_"+e]&&"none"!==n.style.display||!0!==this.hiddenCellObj[t+"_"+e]&&"none"===n.style.display)&&(E=!0);var M=u.join(";"),q=n.style.borderBottomWidth;(M!=n.getAttribute("style_bak")||this.groupbyStatus.grouped||E)&&(n.style.cssText=M);var R=this.cellStyleValueObj[v];if(R&&R["background-repeat"]?n.style.backgroundRepeat=R["background-repeat"]:R&&R["background-size"]?n.style.backgroundSize=R["background-size"]:R&&R["background-position"]&&(n.style.backgroundPosition=R["background-position"]),this.isColMerge&&m.options.colMerge&&!this.groupbyStatus.grouped){n.setAttribute("colMerged","0");var N=this.drawColMergeCellData(s,t,e);if(this.options.senseReader&&q&&-1!=q.indexOf("px")&&(n.style.borderBottomWidth=q),"mergeCellBackgroundColor"===N&&!c){var F,O=this.getCellStyleValue(t-1,h,"background-color",!0)||this.getColumnStyleValue(e,"background-color"),B=!0;n.readOnly||this.__getEditReadOnly(n,t)?(F=O,this.options.readOnlyBackgroundColor?F=this.options.readOnlyBackgroundColor:(m.options.readOnlyClass||this.options.readOnlyClass)&&(B=!1)):(F=""!=O?O:t%2?this.options.oddRowBackgroundColor:this.options.evenRowBackgroundColor,!this.options.disabledClass||!0!==I&&"true"!==I||(B=!1)),B&&(n.style.backgroundColor=F,this._setMergeCellBackground(t,h,F)),""!=m.options.readOnlyClass&&(this.__getEditReadOnly(n,t)?this.addClass(n,m.options.readOnlyClass):this.removeClass(n,m.options.readOnlyClass)),""!=this.options.readOnlyClass&&(this.__getEditReadOnly(n,t)?this.addClass(n,this.options.readOnlyClass):this.removeClass(n,this.options.readOnlyClass))}}if(n.setAttribute("style_bak",M),n.setAttribute("or_bgColor",n.style.backgroundColor),this.cellReadOnlyArr[d*this.oneRowDataLength+e]?(n.setAttribute("readonly","true"),"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",-1)):!1===this.cellReadOnlyArr[d*this.oneRowDataLength+e]?(n.setAttribute("readonly","false"),"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",0)):n.removeAttribute("readonly"),null!=w){var V=s*this.oneRowDataLength+e;this.tdCellClassArr[V]&&this.tdCellClassArr[V]!=w&&this.removeClass(n,this.tdCellClassArr[V]),this.tdCellClassArr[V]=w,this.addClass(n,w)}else{V=s*this.oneRowDataLength+e
;this.tdCellClassArr[V]&&(this.removeClass(n,this.tdCellClassArr[V]),this.tdCellClassArr[V]=void 0)}if(""!=m.options.disabledClass&&(!0===I||"true"===I?this.addClass(n,m.options.disabledClass):this.removeClass(n,m.options.disabledClass)),!0!==T&&"true"!==T||(""!=this.options.disabledClass?this.addClass(n,this.options.disabledClass):this.removeClass(n,this.options.disabledClass)),""!=this.options.hiddenClass||""!=m.options.hiddenClass){var H=this.options.hiddenClass;""!=m.options.hiddenClass&&(H=m.options.hiddenClass);var P=this._getRealColIndex("body",m.options.col_id)+this.defaultColCnt;this.hiddenList[P]?this.addClass(n,H):this.removeClass(n,H)}}}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.dynamicMergeHTML=function(){try{for(var t in this.tdMergeInfo){var e=this.data_td_list[t];this.tdMergeInfo[t].orgColSpan>1?e.setAttribute("colSpan",this.tdMergeInfo[t].orgColSpan):e.removeAttribute("colSpan"),this.tdMergeInfo[t].orgRowSpan>1?e.setAttribute("rowSpan",this.tdMergeInfo[t].orgRowSpan):e.removeAttribute("rowSpan"),e.style.display=this.tdMergeInfo[t].display,delete this.tdMergeInfo[t]}var i=this.getRowCount(),o="native"===this.options.drawType?i:Math.min(this.lastIndex+2,i),s=!(!this.isDrillDown||!this._dataList.options.depthColumn),n=!1;for(var l in this.cellMergeInfo){var h=l.split("_"),d=Number(h[0]);if(!(s&&(d=this.getDisplayRowIndex(d),isNaN(d)||d<0))){var u=Number(h[1]),c=d;this.rowIndex>=0&&(this.options.fixedRow>0&&this.options.fixedRow>d||this.options.lastFixedRow>0&&d>this.lastIndex-this.options.lastFixedRow||(c-=this.rowIndex));var p=this.cellMergeInfo[l].rowSpan,g=this.cellMergeInfo[l].colSpan,m=p,f=0;if(this.hiddenRowObj.length>0)for(var b=this.rowIndex;b<d;b++)this._getRowVisible(b)||f++;if(!(c<0&&c+p<=0||c-f>=o||(c<this.options.fixedRow&&c+p>this.options.fixedRow&&(m=c+p-this.options.fixedRow-f,c=this.options.fixedRow),c<this.options.fixedRow&&d>=this.options.fixedRow))){var y=0,v=0;if(this.hiddenRowObj.length>0)for(b=0;b<m;b++)this._getRowVisible(c+b+this.rowIndex)||(v++,b===y&&y++);c+(m-=v)>o+f&&(m=o-c+f);var w=m,S=this.oneRowLength;for(b=0;b<w;b++){for(var C=!1,x=0;x<g;x++){t=(c+b)*this.oneRowDataLength+(u+x);if(null!=(e=this.data_td_list[t]))if(this.hiddenRowObj.length>0&&!this._getRowVisible(c+b+this.rowIndex))e.removeAttribute("colSpan"),e.removeAttribute("rowSpan"),C=!0;else if(this.tdMergeInfo[t]={orgColSpan:e.getAttribute("colSpan"),orgRowSpan:e.getAttribute("rowSpan"),display:e.style.display},b===y&&0===x){g>1?(e.setAttribute("colSpan",g),n=!0):e.removeAttribute("colSpan");var _=m*S;if(_>1)if(S>1){var I=parseInt(e.getAttribute("rowSpan"),10);!isNaN(I)&&I>1&&(e.setAttribute("rowSpan",_),n=!0)}else e.setAttribute("rowSpan",m),n=!0;else e.removeAttribute("rowSpan");e.style.display=""}else e.removeAttribute("colSpan"),e.removeAttribute("rowSpan"),e.style.display="none"}!0===C&&w++}}}}!0===n&&this.isWebKit&&a.D.setTimeout(this.redrawTable,{key:this.id+"_dynamicMergeHTML",delay:50,caller:this})}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.createSubtotalRows=function(t){var e=[];for(var i in this.subtotalTableList){var o=this.subtotalRowHash[i];null==o&&(o=[]);for(var s=this.subtotalTableList[i],r=0;r<s.rows.length;r++){var a=s.rows[r].cloneNode(!0);if(a.style.display="none",this.options.rowNumStatusUniqueId)for(var n=a.getElementsByTagName("td"),l=0;l<this.defaultColCnt;l++){var h=n[l].getAttribute("id");"_headerRowNumber"!==h&&"_headerRowStatus"!==h||n[l].setAttribute("id",h+"_subtotal_"+t)}a.setAttribute("data-subtotal",i+"_"+r),o.push(a),e.push(a)}this.subtotalRowHash[i]=o}return e},y.prototype.addBodyRow=function(t,e){var i=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowNumber(\\s|$)"),o=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowStatus(\\s|$)"),s=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_data(\\s|$)"),r=0,a=0,n="grid_body_row";"native"===this.options.drawType&&(n+=" "+this.options.gridNativeClass);for(var l=0;l<e.length;l++){this.dataRowList.push(e[l]),
e[l].className=n;for(var h=e[l].getElementsByTagName("td"),d=0;d<h.length;d++){var u=h[d],c=u.className;u.setAttribute("tdIndex",t*this.realRowDataLength+r),u.removeAttribute("title");var p=u.getAttribute("width");if(p&&(u.removeAttribute("width"),u.setAttribute("or_wd",p)),this.options.rowNumStatusUniqueId){var g=u.getAttribute("id");"_headerRowNumber"!==g&&"_headerRowStatus"!==g||u.setAttribute("id",g+"_bodyRow_"+t)}if(r++,this.all_data_td_list.push(u),i.test(c))this.data_num_td_list.push(u);else if(o.test(c))this.data_status_td_list.push(u);else if(!this.hasSubtotal||s.test(c)){this.data_td_list.push(u);var m=this.id+"_columnstyle_"+a+"_";this.addClass(u,m);var f=u.getAttribute("col_id"),b=this.getCellInfo(f);this.addClass(u,b.options.className),u.style.cssText=""==b.options.textAlign?"":"text-align:"+b.options.textAlign+";",u.setAttribute("id",this.id+"_cell_"+t+"_"+a),a++,"linear"==this.options.focusFlow&&"none"!=this.options.focusMode&&(b.options.embeddedInput||"custom"==b.options.inputType&&1==this.options.senseReader||("link"!=b.options.inputType&&"button"!=b.options.inputType&&"image"!=b.options.inputType&&"user"!=b.options.inputType&&"ul"!=b.options.tableRender&&("expression"==b.options.inputType&&1==this.options.senseReader||u.setAttribute("tabIndex","0")),this.event.addListener(u,"onfocus",this.event.bindAsEventListener(this,this.handleTdFocus))))}"native"===this.options.drawType&&(u.className=c?c+" "+this.options.gridNativeClass:this.options.gridNativeClass)}}var y=[];if(!this.options.duplicateColumnId){for(l=0;l<e.length;l++){h=e[l].getElementsByTagName("td");var v=[];for(d=0;d<h.length;d++)v[d]=h[d];for(d=0;d<v.length;d++){c=v[d].className;i.test(c)||o.test(c)||y.push(v[d].parentNode.removeChild(v[d]))}}for(l=0;l<this.htmlInfo.body.rowArr.length;l++)for(d=0;d<this.htmlInfo.body.rowArr[l].length;d++)for(var w=this.htmlInfo.body.rowArr[l][d].col_id,S=0;S<y.length;S++)if(y[S].getAttribute("col_id")==w){e[l].appendChild(y[S]);break}}},y.prototype.addBodyRow2=function(t,e){for(var i=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowNumber(\\s|$)"),o=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowStatus(\\s|$)"),s=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_data(\\s|$)"),r=[],a=0;a<e.length;a++){this.dataRowList.push(e[a]),e[a].className="grid_body_row";for(var n=e[a].getElementsByTagName("td"),l=0;l<n.length;l++){var h=n[l],d=h.className,u=parseInt(h.getAttribute("tdIndex"),10)%this.realRowDataLength;h.setAttribute("tdIndex",t*this.realRowDataLength+u),h.removeAttribute("title");var c=h.getAttribute("width");if(c&&(h.removeAttribute("width"),h.setAttribute("or_wd",c)),this.options.rowNumStatusUniqueId){var p=h.getAttribute("id");"_headerRowNumber"!==p&&"_headerRowStatus"!==p||h.setAttribute("id",p+"_bodyRow_"+t)}if(i.test(d))this.data_num_td_list.push(h),this.all_data_td_list.push(h);else if(o.test(d))this.data_status_td_list.push(h),this.all_data_td_list.push(h);else if(!this.hasSubtotal||s.test(d)){var g=u-this.defaultColCnt;r[g]=h;var m=this.id+"_columnstyle_"+g+"_";this.addClass(h,m);var f=h.getAttribute("col_id"),b=this.getCellInfo(f);this.addClass(h,b.options.className),h.style.cssText=""==b.options.textAlign?"":"text-align:"+b.options.textAlign+";",h.setAttribute("id",this.id+"_cell_"+t+"_"+g),"linear"==this.options.focusFlow&&"none"!=this.options.focusMode&&(b.options.embeddedInput||("link"!=b.options.inputType&&"button"!=b.options.inputType&&"image"!=b.options.inputType&&h.setAttribute("tabIndex","0"),this.event.addListener(h,"onfocus",this.event.bindAsEventListener(this,this.handleTdFocus))))}}}[].push.apply(this.all_data_td_list,r),[].push.apply(this.data_td_list,r)},y.prototype.addRows=function(t){for(var e=this.drawedRowLength,i=[],o=0;o<t;o++){for(var s=0;s<this.oneRowLength;s++){var r=this.tempTr.rows[s].cloneNode(!0);i.push(r)}this.addBodyRow(e+o,[]),this.hasSubtotal&&(i=i.concat(this.createSubtotalRows(e+o)))}var a=this.getElementById(this.id+"_body_tbody")
;for(o=0;o<i.length;o++)a.appendChild(i[o])},y.prototype.notifyStatusChanged=function(t){var e,i,o=!1;"object"==(0,l.Z)(t.rowIndex)?(e=0,i=t.rowIndex.length,o=!0):"all"==t.rowIndex?(e=0,i=this.getRowCount()):"number"==typeof t.startIndex&&"number"==typeof t.endIndex&&(e=t.startIndex,i=t.endIndex);for(var s=e;s<i;s++){var r;if(r=o?t.rowIndex[s]:s,null!=this.rowStatusColIDArr)for(var a=0;a<this.rowStatusColIDArr.length;a++){var n=this.getColumnIndex(this.rowStatusColIDArr[a]);this.drawCellData(r-this.rowIndex,r,n)}}this.hasFooter&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&this.drawFooter(),this.hasSubtotal&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex))},y.prototype.refreshColumn=function(t){try{t=this.getColumnIndex(t),this.redrawColumn(t)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.refreshRow=function(t){try{var e=t-this.rowIndex;this.drawRowData(e,t)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype.refreshCell=function(t,e){try{e=this.getColumnIndex(e);var i=t-this.rowIndex;this.drawCellData(i,t,e)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype._setVisibleRowNumFix=function(){try{if(!this.options.visibleRowNumFix)return;var t=this.options.initFixedHeightByRowNum>-1?this.options.initFixedHeightByRowNum:this.options.visibleRowNum;if(isNaN(t))return;var e=this.getElementById(this.id+"_scrollX_div"),i=parseInt(e.style.height,10),o=0;this.hasFooter&&(o=0==(o=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:o);var s=this.getElementById(this.id+"_head_table").offsetHeight;!0===this._visibleRowNumFixResetFlag&&this.setTrRowTable();var a=this.oneRowHeight*t+s+i+o+1;this.setSize(null,a)}catch(t){r.w.printStackTrace(t,null,this)}},y.prototype._getDrawedRowCount=function(){try{for(var t=0,e=this.getElementById(this.id+"_body_tbody").childNodes,i=0;i<e.length;i++){e[i].offsetHeight>0&&t++}}catch(e){r.w.printStackTrace(e,null,this),t=this.drawedRowLength}return t};var v=function(){};v.prototype.setCellInfo=function(){for(var t=this.tempDiv.getElementsByTagName("td"),e=0;e<t.length;e++){"drilldown"==t[e].getAttribute("inputType")&&(this.isDrillDown=!0,this.depthColumn=t[e].getAttribute("depthColumn"),this.showDepth=t[e].getAttribute("showDepth"),this._dataList.options.depthColumn||"grid"==this.options.pluginName&&!this.options.drilldownRealRowIndex||(this._dataList.options.depthColumn=this.depthColumn))}},v.prototype.setDataListCellInfo=function(){if(this.successBinding)for(var t=this.getColCnt(),e=0;e<t;e++){var i=this.getColumnID(e),o=this.getCellInfo(i);if(o&&o.options&&o.options.importExp){var s=this._dataList.getCellInfo(i);s&&s.options&&!s.options.importExp&&(s.options.importExp=o.options.importExp)}}},v.prototype.setInnerHTML=function(t,e,i,o){var s=this.getColumnID(i),r=this.dataList._getCellData(e,s),a=this.cellInfoHash[this.tdIdList[i]];""===r&&(r=a.options.groupName?this.dataList._getCellData(e,a.options.groupName)==a.options.groupValue?a.options.trueValue:a.options.falseValue:a.options.defaultValue);if(a.setInnerHTML(t,r,e,i,o),""!=a.options.disabledClass&&(this._getEditDisabled(e,i)?this.addClass(t,a.options.disabledClass):this.removeClass(t,a.options.disabledClass)),""!=this.options.disabledClass&&!1===this.options.disabled&&(this._getEditDisabled(e,i)?this.addClass(t,this.options.disabledClass):this.removeClass(t,this.options.disabledClass)),""!=a.options.readOnlyClass&&(this.___getEditReadOnly(e,s)?this.addClass(t,a.options.readOnlyClass):this.removeClass(t,a.options.readOnlyClass)),""!=this.options.readOnlyClass&&(this.___getEditReadOnly(e,s)?this.addClass(t,this.options.readOnlyClass):this.removeClass(t,this.options.readOnlyClass)),""!=this.options.hiddenClass||""!=a.options.hiddenClass){var n=this.options.hiddenClass;""!=a.options.hiddenClass&&(n=a.options.hiddenClass);var l=this._getRealColIndex("body",s)+this.defaultColCnt
;this.hiddenList[l]?this.addClass(t,n):this.removeClass(t,n)}},v.prototype.getCellInfo=function(t){try{var e="";return e="string"==typeof t?t:"number"==typeof t?this.tdIdList[t]:t?t.getAttribute("col_id"):null,this.cellInfoHash[e]||{options:{}}}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype._endEdit=function(){null!=this.editedCell&&this.editedCell.handleEndEdit()},v.prototype.initColumns=function(){for(var t in this.cellInfoHash){var e=this.cellInfoHash[t];if("select"==e.options.inputType&&(e.initializeCellInfo(e.element),e.style="",e.comp=null),this.options.initColumns)for(var i in e.dynamicAttrInfo){var o=e.dynamicAttrInfo[i];o&&(e.options[i]=o.originalValue,"displayFormat"!=i&&"displayFormatter"!=i||e.initFormatter())}}},v.prototype.initHeaders=function(){for(var t in this.headerInfoHash){"checkbox"==this.headerInfoHash[t].options.inputType&&this.setHeaderValue(t,!1)}},v.prototype._setCellInfo=function(t,e){this.cellInfoHash2[t]=e},v.prototype.getColumnCount=function(){return this.tdIdList.length},v.prototype.getColumnID=function(t){if("string"==typeof t)return t;var e=this.tdIdList[t];return e||null},v.prototype.getMovedColumnID=function(t){if("string"==typeof t)return t;var e=this.tdIdList[this.columnOrder[t]];return e||null},v.prototype.getColumnIndex=function(t){return"number"==typeof t?t:this.bodyIdColIndexMap[t]},v.prototype.getDisplayColumnIndex=function(t){return"number"==typeof t?t:this.colMoveIndexMap[t]},v.prototype.setExpressionAssociation=function(t,e){try{null==this.expressionAssArr[t]&&(this.expressionAssArr[t]=[]),this.expressionAssArr[t].push(e)}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.setLabelColumnAssociation=function(t,e){try{null==this.labelColumnAssArr[t]&&(this.labelColumnAssArr[t]=[]),this.labelColumnAssArr[t].push(e)}catch(t){r.w.printStackTrace(t,null,this)}},v.prototype.setCellEditMode=function(t,e){this.hideTooltip();var i=this.getCellInfo(t);this.editedCell=i,this.rollbackCommitFlag=!1;var o=this.render.offsetWidth,s=this.render.offsetHeight;i.setEditMode(t,e),o===this.render.offsetWidth&&s===this.render.offsetHeight||(this.handleResize(),i.setEditMode(t,e)),this.rollbackCommitFlag=!0},v.prototype.setCellClickEdit=function(t){var e=this.getElemRowIndex(t),i=this.getCellInfo(t);if("custom"==i.options.inputType&&!i.internal){var o=e;this.isDrillDown&&this._dataList.options.depthColumn&&(o=this.getRealRowIndex(e)),i=i.cellManagerHashByRowIndex[o]?i.cellManagerHashByRowIndex[o]:i}var s=!1;switch(i.options.inputType){case"checkbox":case"radio":case"drilldown":s=i.handleClick(t,e)}return s},v.prototype.getInput=function(t,e,i){var n=t.options.inputType||"text",l=t.options.embeddedInput,h=this.getColumnOption(t.id,"dataType");"text"===n&&"number"===h&&"true"===this.options.floatNumber&&(h="float",t.options.dataType="float");var d,p="bigDecimal"==h,g=this;if(this.options.titleFormatter)try{if("function"!=typeof this.options.titleFormatter){var m=a.D.getGlobalFunction(this.options.titleFormatter,this.scope_id);"function"==typeof m&&(this.options.titleFormatter=m,d=m.call(this,this.getElemRowIndex(e),this.getColumnIndex(t.id),i))}else d=this.options.titleFormatter.call(this,this.getElemRowIndex(e),this.getColumnIndex(t.id),i)}catch(t){r.w.printStackTrace(t,null,this)}if(l){if("custom"==t.options.inputType&&!t.internal){var f=this.getElemRowIndex(e);this.isDrillDown&&this._dataList.options.depthColumn&&(f=this.getRealRowIndex(f)),t=t.cellManagerHashByRowIndex[f]?t.cellManagerHashByRowIndex[f]:t}b=t.parentColumnInfo?this.id+"_"+t.id:e.getAttribute("id")+"_"+n,this.fakeInput||"text"!=n&&"secret"!=n&&"calendar"!=n||(this.makeFakeInput=function(){this.fakeInput=new WebSquare.uiplugin.input(this.id+"_fakeInput",{style:"visibility:hidden;position:absolute;z-index:100;background-color:"+this.options.selectedCellColor,className:"w2grid_embedded_input",ioFormat:"$blank",ioFormatter:"$blank",displayFormat:"$blank",displayFormatter:"$blank",readOnly:"$blank",disabled:"$blank",useKeyupBlur:!1,
xmlEvents:[{name:"onmousedown",action:"script",param:{handler:function(t){g.lastEvent=t,u.B.stopEvent(t);var e=this;setTimeout((function(){e.lastInput.focus()}),1)}}},{name:"oncontextmenu",action:"script",param:{handler:function(t){g.lastEvent=t}}},{name:"ondblclick",action:"script",param:{handler:function(t){g.lastEvent=t,g.hideFakeInput(this),u.B.stopPropagation(t),g.F2Mode=!0,WebSquare.text.setCaretPos(this.lastInput.render,this.lastInput.render.value.length)}}}]}),this.fakeInput.setAction=function(){},this.fakeInput.writeTo(this.render),this.fakeInput.activate(),this.fakeInput.render.parentNode.removeChild(this.fakeInput.render);var t=null;this.showFakeInput=function(e){var i=e.render.parentNode;if(this.render.appendChild(this.fakeInput.render),!t){var o=this.all_data_td_list[0];t=1-o.offsetLeft}var s=this.getElementById(this.id+"_dataLayer");this.fakeInput.setPosition(i.offsetLeft+t-s.scrollLeft,i.offsetTop+t-s.scrollTop),this.fakeInput.setSize(i.clientWidth,i.clientHeight),a.D.isIE()&&this.fakeInput.setVerticalAlign(),this.fakeInput.lastInput=e;var r=e.getStyle("text-align");r?this.fakeInput.setStyle("text-align",r):this.fakeInput.setStyle("text-align","")},this.hideFakeInput=function(t){this.fakeInput.render.parentNode&&this.fakeInput.render.parentNode.removeChild(this.fakeInput.render)}})}else var b=t.mainGridId+t.id;var y=!!(q=this.dom[b]);if(q&&!q.render&&q.ownerDocument&&!q.parentNode&&(y=!1),y){if("checkbox"==n&&l){if(t.options.checkboxLabel||t.options.checkboxLabelColumn||t.options.checkboxLabelFormatter){_=this.getElemRowIndex(e),I=this._getGroupbyDisplayRowIndex(_),T=(x=t.mainGridId+"_checkbox_"+t.id)+"_"+_,k=t.options.checkboxLabel||"";if(t.options.checkboxLabelColumn){for(D=t.options.checkboxLabelColumn.split(","),L="",W=t.options.checkboxLabelDelimiter||this.options.labelDelimiter||" ",A=0;A<D.length;A++)A===D.length-1?L+=this._getCellDisplayData(_,D[A]):L+=this._getCellDisplayData(_,D[A])+W;k=k?L+W+k:L}if(t.options.checkboxLabelFormatter)try{"function"==typeof(E=a.D.getGlobalFunction(t.options.checkboxLabelFormatter,t.scope_id))&&(k=E.call(this,I,this.getColumnIndex(t.colID),k))}catch(e){c.k.printLog(this.id+"_"+t.id+" checkboxLabelFormatter error : "+e.message)}(v=e.getElementsByTagName("label")[0])&&(v.innerText=k)}}else if("radio"==n&&l&&(t.options.radioLabel||t.options.radioLabelColumn||t.options.radioLabelFormatter)){var v;_=this.getElemRowIndex(e),I=this._getGroupbyDisplayRowIndex(_),F=(N=t.mainGridId+"_radio_"+t.id)+"_"+_,O=t.options.radioLabel||"";if(t.options.radioLabelColumn){for(D=t.options.radioLabelColumn.split(","),L="",W=t.options.radioLabelDelimiter||this.options.labelDelimiter||" ",A=0;A<D.length;A++)A===D.length-1?L+=this._getCellDisplayData(_,D[A]):L+=this._getCellDisplayData(_,D[A])+W;O=O?L+W+O:L}if(t.options.radioLabelFormatter)try{"function"==typeof(B=a.D.getGlobalFunction(t.options.radioLabelFormatter,t.scope_id))&&(O=B.call(this,I,this.getColumnIndex(t.colID),O))}catch(e){c.k.printLog(this.id+"_"+t.id+" radioLabelFormatter error : "+e.message)}(v=e.getElementsByTagName("label")[0])&&(v.innerText=O)}this.options.titleFormatter&&l&&d&&q.title!==d&&(q.title=d)}else{if("text"!=n&&"secret"!=n||!l){if("select"==n&&l){var w=d||t.options.title||"";if(this.options.titleAuto&&!w){$=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";w=""!==i&&null!=i?$+" "+(this.changeItemValue("label",t.id,[i])[0]||i):$+WebSquare.language.getMessage("Grid_select")}q=new WebSquare.uiplugin.selectbox_native(b,{className:"w2grid_embedded_select",style:"$blank",pluginName:"selectbox",renderType:"native",title:w,chooseOption:t.options.chooseOption,chooseOptionLabel:t.options.chooseOptionLabel,_scope_obj_uuid:t.options._scope_obj_uuid,xmlEvents:[{name:"onmousedown",action:"script",param:{handler:function(t){u.B.stopPropagation(t)}}},{name:"onclick",action:"script",param:{handler:function(t){
var e=parseInt(this.render.getAttribute("rowIndex"),10),i=this.render.parentNode.getAttribute("col_id"),o=g.getColumnIndex(i);u.B.fireEvent(g,"oncellclick",e,o,i)}}},{name:"onkeydown",action:"script",param:{handler:function(t){switch(t.keyCode){case 38:case 40:case 27:return void u.B.stopPropagation(t)}}}}]},t.xml),e.innerHTML=q.toHTML();var S=WebSquare.uiplugin.selectbox_native.prototype.handleOnchange;q.handleOnchange=function(t){var e=this.render.parentNode.getAttribute("col_id"),i=parseInt(this.render.getAttribute("rowindex"),10),o=g._getGroupbyDisplayRowIndex(i),s=g.getColumnIndex(e),r=this.selectedIndex,a=this.getValue();if(S.call(this,t),g.dataList.__setCellData(i,e,this.getValue()),g._dataList.setRowPosition(i),r!=this.selectedIndex){var n={oldValue:a,newValue:this.getValue(),oldSelectedIndex:r,newSelectedIndex:this.selectedIndex,rowIndex:i,colIndex:s};u.B.fireEvent(g,"onviewchange",n)}u.B.fireEvent(g,"onafteredit",o,s,this.getValue(),t)},q.activate();var C=q.uuid;q.event.addListener2(q.dom.select,"onfocus",(function(t){g.lastEvent=t;var e=WebSquare.idCache[C];g.getLastFocusedCell().focusedTd==e.render.parentNode||g.focusedByApi||g._setFocusedCell(e.render.getAttribute("rowindex"),e.render.parentNode.getAttribute("col_id")),g.focusedByApi=!1}))}else if("checkbox"==n&&l){if(t.options.checkboxLabel||t.options.checkboxLabelColumn||t.options.checkboxLabelFormatter){var x,_=this.getElemRowIndex(e),I=this._getGroupbyDisplayRowIndex(_),T=(x=t.mainGridId+"_checkbox_"+t.id)+"_"+_,k=t.options.checkboxLabel||"";if(t.options.checkboxLabelColumn){for(var D=t.options.checkboxLabelColumn.split(","),L="",W=t.options.checkboxLabelDelimiter||this.options.labelDelimiter||" ",A=0;A<D.length;A++)A===D.length-1?L+=this._getCellDisplayData(_,D[A]):L+=this._getCellDisplayData(_,D[A])+W;k=k?L+W+k:L}if(t.options.checkboxLabelFormatter)try{var E;"function"==typeof(E=a.D.getGlobalFunction(t.options.checkboxLabelFormatter,t.scope_id))&&(k=E.call(this,I,this.getColumnIndex(t.colID),k))}catch(e){c.k.printLog(this.id+"_"+t.id+" checkboxLabelFormatter error : "+e.message)}R="<INPUT style='border-width:0px;' type='checkbox' class='w2grid_embedded_check'  id='"+T+"' name='"+x+"'/>";var M="<label class='w2checkbox_label ' for='"+T+"'>"+k+"</label>";"left"===t.options.checkboxLabelPosition?R=M+R:R+=M,e.innerHTML=R;var q=e.getElementsByTagName("input")[0]}else{R="<INPUT style='border-width:0px;' type='checkbox' class='w2grid_embedded_check' />",e.innerHTML=R;q=e.getElementsByTagName("input")[0];if(d)q.title=d;else if(t.options.title)q.title=t.options.title;else if(this.options.titleAuto){$=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";q.title=i?$+WebSquare.language.getMessage("Grid_title"):$+WebSquare.language.getMessage("Grid_title_not_choose"),k&&(q.title=q.title+k)}}if(this.event.addListener(q,"onclick",this.event.bindAsEventListener(this,(function(t){var e=u.B.getTarget(t);this.lastEvent=t;var i=this.getLastFocusedCell(),o=e.parentNode,s=this.getElemRowIndex(o),r=this.getCellInfo(o),a=r.id,n=this.getColumnIndex(a);i.focusedTd==e.parentNode||this.focusedByApi||this._setFocusedCell(s,a),this.focusedByApi=!1,r.options.noDisabledOnReadOnly&&this._getEditReadOnly(s,n)&&u.B.preventDefault(t)}))),t.options.noDisabledOnReadOnly){var _=this.getElemRowIndex(e);this._getEditReadOnly(_,t.id)?this.addClass(q,this.options.readOnlyClass+"_nodisabled"):this.removeClass(q,this.options.readOnlyClass+"_nodisabled")}}else if("radio"==n&&l){var R;if(t.options.radioLabel||t.options.radioLabelColumn||t.options.radioLabelFormatter){var N,_=this.getElemRowIndex(e),I=this._getGroupbyDisplayRowIndex(_),F=(N=t.mainGridId+"_radio_"+t.id)+"_"+_,O=t.options.radioLabel||"";if(t.options.radioLabelColumn){for(var D=t.options.radioLabelColumn.split(","),L="",W=t.options.radioLabelDelimiter||this.options.labelDelimiter||" ",A=0;A<D.length;A++)A===D.length-1?L+=this._getCellDisplayData(_,D[A]):L+=this._getCellDisplayData(_,D[A])+W;O=O?L+W+O:L}
if(t.options.radioLabelFormatter)try{var B;"function"==typeof(B=a.D.getGlobalFunction(t.options.radioLabelFormatter,t.scope_id))&&(O=B.call(this,I,this.getColumnIndex(t.colID),O))}catch(e){c.k.printLog(this.id+"_"+t.id+" radioLabelFormatter error : "+e.message)}R="<INPUT style='border-width:0px;' type='radio' class='w2grid_embedded_radio'  id='"+F+"' name='"+N+"'/>";M="<label class='w2radio_label ' for='"+F+"'>"+O+"</label>";"left"===t.options.radioLabelPosition?R=M+R:R+=M,e.innerHTML=R;q=e.firstChild}else{R="<INPUT style='border-width:0px;' type='radio' name='"+(t.mainGridId+"_radio_"+t.id)+"' class='w2grid_embedded_radio' />",e.innerHTML=R;q=e.firstChild;if(d)q.title=d;else if(t.options.title)q.title=t.options.title;else if(this.options.titleAuto){$=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";q.title=i?$+WebSquare.language.getMessage("Grid_title"):$+WebSquare.language.getMessage("Grid_title_not_choose"),O&&(q.title=q.title+O)}}if(this.event.addListener(q,"onclick",this.event.bindAsEventListener(this,(function(t){var e=u.B.getTarget(t);this.lastEvent=t;var i=this.getLastFocusedCell(),o=e.parentNode,s=this.getElemRowIndex(o),r=this.getCellInfo(o),a=r.id,n=this.getColumnIndex(a);i.focusedTd==e.parentNode||this.focusedByApi||this._setFocusedCell(s,a),this.focusedByApi=!1,r.options.noDisabledOnReadOnly&&this._getEditReadOnly(s,n)&&u.B.preventDefault(t)}))),t.options.noDisabledOnReadOnly){_=this.getElemRowIndex(e);this._getEditReadOnly(_,t.id)?this.addClass(q,this.options.readOnlyClass+"_nodisabled"):this.removeClass(q,this.options.readOnlyClass+"_nodisabled")}}else if("calendar"==n&&l){K=d||t.options.title||"";if(this.options.titleAuto&&!K){$=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";K=""!==i?$+" "+i:$+WebSquare.language.getMessage("Grid_calendar")}var V=t.options.ioFormat,H={style:"width:0px; height:0px;",delimiter:"$blank",calendarValueType:t.options.calendarValueType,calendarClass:t.options.calendarClass||"class1",ioFormat:V,ioFormatter:"$blank",displayFormat:t.options.displayFormat||V,displayFormatter:"$blank",displayFormatFunc:t.options.displayFormatFunc,calendarDisplayFormatFunc:t.options.calendarDisplayFormatFunc,footerDiv:!0,renderDiv:!0,keepFocusSelect:!0,focusOnOuterDiv:!0,renderType:"native",readOnly:"$blank",disabled:"$blank",title:K,validCheck:!1,_scope_obj_uuid:t.options._scope_obj_uuid,senseReader:t.options.senseReader,xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute("rowIndex"),10),i=this.render.parentNode.getAttribute("col_id"),o=g.getColumnIndex(i);u.B.fireEvent(g,"oncellclick",e,o,i),u.B.stopPropagation(t)}}},{name:"onafterviewchange",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute("rowindex"),10),i=g._getGroupbyDisplayRowIndex(e),o=g.getColumnIndex(this.render.parentNode.getAttribute("col_id"));t.oldValue!=t.newValue&&u.B.fireEvent(g,"onviewchange",{oldValue:t.oldValue,newValue:t.newValue,rowIndex:i,colIndex:o})}}},{name:"ondateselect",action:"script",param:{handler:function(t,e){this.options.senseReader||this.dom.input.blur();var i=this.render.getAttribute("rowindex"),o=this.render.parentNode.getAttribute("col_id"),s=q.validator.validateString(this.getValue());g.dataList.__setCellData(i,o,s)}}},{name:"onconfirm",action:"script",param:{handler:function(){this.options.senseReader||this.dom.input.blur();var t=this.render.getAttribute("rowindex"),e=this.render.parentNode.getAttribute("col_id"),i=q.validator.validateString(this.getValue());g.dataList.__setCellData(t,e,i)}}}]};q=new WebSquare.uiplugin.inputCalendar(b,H,t.element);try{t.element&&!t.element.getAttribute("dateValidCheck")&&(q.options.dateValidCheck=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="calendar"]/dateValidCheck/@value')||"false")}catch(t){r.w.printStackTrace(t,null,this)}e.innerHTML="",q.writeTo(e),V!=q.options.ioFormat&&(t.options.ioFormat=q.options.ioFormat,t.initFormatter()),
q.setVerticalAlign=function(){},q.handleKeyupEvent=function(){};var P=WebSquare.uiplugin.inputCalendar.prototype.handleFocusEvent;q.handleFocusEvent=function(t){if(g.editEndFlag&&g.fakeInput.lastInput!=this)return u.B.stopEvent(t),!1;var e=this.render.getAttribute("rowindex"),i=g._getGroupbyDisplayRowIndex(e),o=this.render.parentNode.getAttribute("col_id");if(g.lastEvent=t,g.getLastFocusedCell().focusedTd==this.render.parentNode||g.focusedByApi||g._setFocusedCell(e,o),P.call(this,t),g.focusedByApi=!1,!this.reFocus&&(g.showFakeInput(this),g.fakeInput.setValue(this.getValue()),this.select(),this.focus(),g.fakeInput.render.parentNode)){var s=g.getColumnIndex(o);u.B.fireEvent(g,"onbeforeedit",i,s,g._dataList.getCellData(e,s))}g.F2Mode=!1,this.reFocus=!1};var j=WebSquare.uiplugin.inputCalendar.prototype.handleKeyEvent;q.handleKeyEvent=function(t){switch(g.lastEvent=t,j.call(this,t),t.keyCode){case 46:return!g.F2Mode&&g.fakeInput.render.parentNode&&(this.setValue(""),g.fakeInput.setValue("")),void u.B.stopPropagation(t);case 27:return g.F2Mode=!1,g.showFakeInput(this),this.setValue(g.dataList.getCellData(g._getFocusedRowIndex(),g.getFocusedColumnIndex())),this.select(),void u.B.stopPropagation(t);case 113:return g.F2Mode=!0,WebSquare.text.setCaretPos(this.render,this.render.value.length),g.hideFakeInput(this),void u.B.stopPropagation(t);case 9:for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_divInput")){u.B.stopPropagation(t);break}return}var i=t.which||t.keyCode;g.nonCharKeys[i]||(32!=i?(g.fakeInput.render.parentNode&&g.hideFakeInput(this),u.B.stopPropagation(t)):u.B.stopPropagation(t))};var z=WebSquare.uiplugin.inputCalendar.prototype.handleBlurEvent;q.handleBlurEvent=function(t){var e=this.render.getAttribute("rowindex"),i=g._getGroupbyDisplayRowIndex(e),o=this.render.parentNode.getAttribute("col_id"),s=g.getColumnIndex(o),r=q.validator.validateString(this.getValue());if(!1===this.validate(r)&&""!=r){if(this.options.dateValidSet&&this.options.dateValidSetCustom);else if("false"!==this.options.displaymessage){var a=WebSquare.language.getMessage("IC_invalidCalendarSelect")||"날짜 형식이 잘못 되었습니다.";alert(a)}return!1}var n,l=WebSquare.historyManager.get(this.options.pluginName,this.id);if(l&&(n=l.value),u.B.fireEvent(g,"oneditend",i,s,r,t)+""=="false")return g.editEndFlag=!0,this.reFocus=!0,g.fakeInput.lastInput==this&&this.focus(),g.getLastFocusedCell().focusedTd!=this.render.parentNode&&g._setFocusedCell(e,o),u.B.stopEvent(t),!1;g.editEndFlag=!1,z.call(this,t);var h=g.getCellInfo(o);g.dataList.__setCellData(e,o,r),r=g._dataList.getCellData(e,o),"all"==h.options.applyFormat||this.options.displayFormat||(r=h.getDisplayData(r)),this.setValue(r),u.B.fireEvent(this,"onafterviewchange",{oldValue:n,newValue:r});u.B.fireEvent(g,"onafteredit",e,s,r,g.lastEvent);g.F2Mode=!1},q.setStyle("z-index","10"),q.activate(),this.fakeInput||this.makeFakeInput()}else if("text"==n||"textImage"==n||"drilldown"==n||"secret"==n){Y=t.options.type?t.options.type:"text",K=d||"";"secret"==n&&(Y="password"),p&&(h="bigDecimal");J={style:"position:absolute;display:none;border:1px solid "+this.options.selectedCellColor+";outline:none;z-index:10;",ioFormat:"$blank",ioFormatter:"$blank",displayFormat:"all"==t.options.applyFormat?"":"$blank",displayFormatter:"$blank",readOnly:"$blank",disabled:"$blank",title:K,type:Y,dataType:h,editType:t.options.editType,byteCheckIgnoreChar:t.options.byteCheckIgnoreChar,maxlength:t.options.maxLength||t.options.maxlength||-1,maskFormat:t.options.maskFormat,maskFormatModelNumber:t.options.maskFormatModelNumber,useMaxLength:t.options.useMaxLength,adjustMaxLength:t.options.adjustMaxLength,useKeyupBlur:!1,inputMode:t.options.inputMode||"",_scope_obj_uuid:t.options._scope_obj_uuid,xmlEvents:[{name:"ondblclick",action:"script",param:{handler:function(e){var i=t.editRowIndex,o=g.getColumnIndex(t.id);u.B.fireEvent(g,"oneditdblclick",i,o,t.id)}}}]}
;t.options.maskFormat&&"display"==t.options.applyFormat&&(J.displayFormat=t.options.displayFormat),t.internal&&(J=o.x.extend(o.x.extend(J,t.initializeInfo.options))),"float"===t.options.dataType&&(J.dataType=t.options.dataType),(q=new WebSquare.uiplugin.input(b,J,t.element)).writeTo(this),this.options.editInputClass&&"text"==n&&this.addClass(q.render,this.options.editInputClass),q.event.addListener(q.render,"oncopy",this.event.bindAsEventListener(this,(function(t){u.B.stopPropagation(t)}))),q.event.addListener(q.render,"onpaste",this.event.bindAsEventListener(this,(function(t){u.B.stopPropagation(t)}))),q.activate(),"number"==t.options.dataType?""==t.options.displayFormat?q.validator.addCommand(new WebSquare.validator.allowCharCommand("+\\-.0-9")):t.options.maskFormat||q.validator.addCommand(new WebSquare.validator.numberCommand):"euro"==t.options.dataType?q.validator.addCommand(new WebSquare.validator.euroCommand(q.options.delimiter,q.options.decimalDelimiter)):"text"==t.options.dataType&&(t.options.maskFormat||(t.options.applyFormat="display")),q.setVerticalAlign=function(){},this._moveKeyEdit(q.uuid,"handleKeydownEvent",{oldMode:!0})}else if("textarea"==n){if(l){var G,U,X;e&&(_=this.getElemRowIndex(e),G=this.getColumnIndex(e.getAttribute("col_id")),U=this._getEditDisabled(_,G),X=this.___getEditReadOnly(_,G)),q=new WebSquare.uiplugin.textarea(b,{style:"position:relative;display:none;width:150px;height:60px;z-index:1000;resize:none;",className:"$blank",readOnly:!0===X?X:"$blank",disabled:!0===U?U:"$blank",maxlength:t.options.maxLength||-1,_scope_obj_uuid:t.options._scope_obj_uuid,xmlEvents:[{name:"onkeydown",action:"script",param:{handler:function(t){u.B.stopPropagation(t)}}}]},t.element);z=WebSquare.uiplugin.textarea.prototype.handleBlurEvent;q.handleBlurEvent=function(t){z.call(this,t);var e=parseInt(this.render.getAttribute("rowindex"),10),i=this.render.parentNode.getAttribute("col_id"),o=g.getCellInfo(i),s=this.getValue();"number"==o.mainGrid.getColumnOption(o.options.col_id,"dataType")&&""!=s&&(s=Number(s)),o.mainGrid.dataList.__setCellData(e,i,s)}}else{H={style:"position:absolute;display:none;width:150px;height:60px;z-index:1000;resize:none;",className:"$blank",readOnly:"$blank",disabled:"$blank",maxlength:t.options.maxLength||-1,_scope_obj_uuid:t.options._scope_obj_uuid};!0===t.options.keepCellClass&&(H.className=""),t.internal&&(H=o.x.extend(o.x.extend(H,t.initializeInfo.options))),q=new WebSquare.uiplugin.textarea(b,H,t.element)}q.writeTo(this),q.event.addListener(q.render,"oncopy",this.event.bindAsEventListener(this,(function(t){u.B.stopPropagation(t)}))),q.event.addListener(q.render,"onpaste",this.event.bindAsEventListener(this,(function(t){u.B.stopPropagation(t)}))),this._moveKeyEdit(q.uuid,"handleKeydownEvent"),q.activate()}else if("calendar"==n){V=t.options.ioFormat,H={style:"position:absolute;display:none;border:1px solid "+this.options.selectedCellColor+";outline:none;",delimiter:"$blank",calendarValueType:t.options.calendarValueType,calendarClass:t.options.calendarClass||"class1",ioFormat:V,ioFormatter:"$blank",displayFormat:t.options.displayFormat||V,applyFormat:t.options.applyFormat||"display",displayFormatter:"$blank",holidayRef:t.options.holidayRef||"",keepFocusSelect:!0,focusOnOuterDiv:!0,footerDiv:t.options.footerDiv,_scope_obj_uuid:t.options._scope_obj_uuid,readOnly:"$blank",disabled:"$blank",validCheck:!1,renderDiv:!0,inputReadOnly:t.options.inputReadOnly,unformatOnPaste:t.options.unformatOnPaste,xmlEvents:[{name:"ondateselect",action:"script",param:{handler:function(e,i){var o=t.editRowIndex,s=g.getColumnIndex(t.id);u.B.fireEvent(g,"ondateselect",o,s,e,i)}}},{name:"onmonthselect",action:"script",param:{handler:function(e){var i=t.editRowIndex,o=g.getColumnIndex(t.id);u.B.fireEvent(g,"onmonthselect",i,o,{oldValue:e.oldValue,newValue:e.newValue})}}},{name:"onyearselect",action:"script",param:{handler:function(e){var i=t.editRowIndex,o=g.getColumnIndex(t.id);u.B.fireEvent(g,"onyearselect",i,o,{
oldValue:e.oldValue,newValue:e.newValue})}}}]};t.internal&&(H=o.x.extend(o.x.extend(H,t.initializeInfo.options)));q=new WebSquare.uiplugin.inputCalendar(b,H,t.element);try{0==t.internal?t.element&&!t.element.getAttribute("dateValidCheck")&&(q.options.dateValidCheck=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="calendar"]/dateValidCheck/@value')||"false"):1!=t.options.dateValidCheck&&"true"!=t.options.dateValidCheck||(q.options.dateValidCheck="true")}catch(t){r.w.printStackTrace(t,null,this)}q.writeTo(this),q.event.addListener(q.render,"oncopy",this.event.bindAsEventListener(this,(function(t){u.B.stopPropagation(t)}))),q.event.addListener(q.render,"onpaste",this.event.bindAsEventListener(this,(function(t){u.B.stopPropagation(t)}))),V!=q.options.ioFormat&&(t.options.ioFormat=q.options.ioFormat,t.initFormatter()),this._moveKeyEdit(q.uuid,"handleKeyEvent"),q.activate(),q.setVerticalAlign=function(){},"display"===t.options.applyFormat&&(q.handleKeyupEvent=function(){}),q.setStyle("z-index","10"),q.options.dateValidSet&&q.options.dateValidSetCustom&&(q._skipDateValidSet=!0)}}else{var K=d||t.options.title||"",$=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";K||this.options.titleAuto&&("text"==n&&""!==i?K=$+" "+i:"text"==n&&""==i?K=$+WebSquare.language.getMessage("Grid_text"):"secret"==n&&(K=$+WebSquare.language.getMessage("Grid_secret")));var Y=t.options.type?t.options.type:"text",Z="w2grid_embedded_input";"secret"==n&&(Y="password",a.D.isIEAllVersion()?Z+=" w2grid_secret":Z="w2grid_embedded_secret");var J={className:Z,style:"$blank",ioFormat:"$blank",ioFormatter:"$blank",readOnly:"$blank",disabled:"$blank",hidden:"$blank",title:K,type:Y,adjustMaxLength:t.options.adjustMaxLength,useMaxLength:t.options.useMaxLength,useKeyupBlur:!1,xmlEvents:[{name:"onmousedown",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute("rowIndex"),10),i=this.render.parentNode.getAttribute("col_id");if(e-g.rowIndex>=g.lastIndex+1)return u.B.stopEvent(t),g.addGridScroll(1),void g._setFocusedCell(e,i,!0)}}},{name:"onclick",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute("rowIndex"),10),i=this.render.parentNode.getAttribute("col_id"),o=g.getColumnIndex(i);u.B.fireEvent(g,"oncellclick",e,o,i),u.B.stopPropagation(t)}}},{name:"oncopy",action:"script",param:{handler:function(t){u.B.stopPropagation(t)}}},{name:"onpaste",action:"script",param:{handler:function(t){u.B.stopPropagation(t)}}},{name:"oncut",action:"script",param:{handler:function(t){u.B.stopPropagation(t)}}},{name:"onkeydown",action:"script",param:{handler:function(t){this._SenSeReaderBeforeEditValue=null;var e={},i=this.render.parentNode.getAttribute("col_id");e.rowIndex=parseInt(this.render.getAttribute("rowIndex"),10),e.colIndex=g.getColumnIndex(i),e.colID=i,e.keyCode=t.charCode?t.charCode:t.keyCode,this._SenSeReaderBeforeEditValue=this.render.value,e.oldValue=this.render.value,u.B.fireEvent(g,"oneditkeydown",e)}}},{name:"onkeyup",action:"script",param:{handler:function(t){var e=t.charCode?t.charCode:t.keyCode,i=this.render.parentNode.getAttribute("col_id"),o={rowIndex:parseInt(this.render.getAttribute("rowIndex"),10),colIndex:g.getColumnIndex(i),colID:i,oldValue:this._SenSeReaderBeforeEditValue||"",newValue:this.render.value,inputType:"text",keyCode:e};this._SenSeReaderBeforeEditValue=null,u.B.fireEvent(g,"oneditkeyup",o),u.B.stopPropagation(t)}}}]};"float"===t.options.dataType&&(J.dataType=t.options.dataType),t.options.delimiter="",q=new WebSquare.uiplugin.input(b,o.x.extend(o.x.extend({},t.options),J)),e.innerHTML="",q.writeTo(e),"number"==t.options.dataType&&(""==t.options.displayFormat?q.validator.addCommand(new WebSquare.validator.allowCharCommand("+\\-.0-9")):q.validator.addCommand(new WebSquare.validator.numberCommand)),a.D.isIE()&&q.setVerticalAlign(),q.setVerticalAlign=function(){};var Q=WebSquare.uiplugin.input.prototype.handleBlurEventBasic,tt=this.uuid
;q.handleBlurEventBasic=function(t){var e=parseInt(this.render.getAttribute("rowindex"),10),i=g._getGroupbyDisplayRowIndex(e),o=this.render.parentNode.getAttribute("col_id"),s=g._dataList.getColumnIndex(o),r=g.getColumnIndex(o),n=q.validator.validateString(this.getValue());if(u.B.fireEvent(g,"oneditend",i,r,n,t)+""=="false")return g.editEndFlag=!0,this.reFocus=!0,g.fakeInput.lastInput==this&&this.focus(),g.getLastFocusedCell().focusedTd!=this.render.parentNode&&g._setFocusedCell(e,o),u.B.stopEvent(t),!1;g.editEndFlag=!1,Q.call(this,t);var l=g.getCellInfo(o),h=g.getColumnOption(l.id,"dataType");if("number"==h||"float"==h){var d=n.wq_trim();"."!==d&&"-"!==d&&"+"!==d||(n="")}var c=!(!g.isDrillDown||!g._dataList.options.depthColumn),p=e,m=g._dataList.getRealRowIndex(p);c&&(p=m);var f=g._dataList.dataArr[m*g._dataList.getColumnCount()+s];if(g.dataList.__setCellData(e,o,n),n=g._dataList.getCellData(p,o),"all"==l.options.applyFormat||this.options.displayFormat||this.options.displayFormatter||(n=l.getDisplayData(n)),this.setValue(n),WebSquare.idCache[tt].options.senseReader&&this.options.customFormatter){var b=null;try{"function"==typeof this.options.customFormatter?b=this.options.customFormatter:"function"==typeof(b=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=b)}catch(t){b=null}var y=n,v=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;if(this.formatter&&v&&(y=this.formatter.format(n)),"function"==typeof b){this.useCustomFormatter=!0;var w=b.call(this.mainGrid,n,y,i,s);this.render.value=w}}u.B.fireEvent(g,"onafteredit",i,r,n,g.lastEvent);f!=n&&u.B.fireEvent(g,"onviewchange",{oldValue:f,newValue:n,rowIndex:i,colIndex:r}),g.hideFakeInput(q),g.F2Mode=!1};var et=WebSquare.uiplugin.input.prototype.handleFocusValueEventAdv;q.handleFocusValueEventAdv=function(t){if(g.editEndFlag&&g.fakeInput.lastInput!=this)return u.B.stopEvent(t),!1;var e=parseInt(this.render.getAttribute("rowindex"),10),i=g._getGroupbyDisplayRowIndex(e),o=this.render.parentNode.getAttribute("col_id");g.lastEvent=t;var s=g.getLastFocusedCell();!(!g.isDrillDown||!g._dataList.options.depthColumn)&&(e=g._dataList.getRealRowIndex(e)),s.focusedTd!=this.render.parentNode&&(!g.focusedByApi||s.focusedRowIndex===e&&s.focusedColIndex===g.getColumnIndex(o)?g._setFocusedCell(e,o):g._setFocusedCell(e,o,!1));var r=this.reFocus;if(et.call(this,t),this.reFocus=r,g.focusedByApi=!1,!this.reFocus&&(this.setValue(g._dataList.getCellData(e,o)),g.showFakeInput(this),g.fakeInput.setValue(this.getValue()),"select"===this.options.editType&&this.select(),this.focus(),g.fakeInput.render.parentNode)){var a=g.getColumnIndex(o);u.B.fireEvent(g,"onbeforeedit",i,a,g._dataList.getCellData(e,a))}g.F2Mode=!1,this.reFocus=!1};var it=WebSquare.uiplugin.input.prototype.handleKeydownEvent;q.handleKeydownEvent=function(t){switch(g.lastEvent=t,it.call(this,t),t.keyCode){case 46:return!g.F2Mode&&g.fakeInput.render.parentNode&&(this.setValue(""),g.fakeInput.setValue("")),void u.B.stopPropagation(t);case 27:return g.F2Mode=!1,g.showFakeInput(this),this.setValue(g.dataList.getCellData(g._getFocusedRowIndex(),g.getFocusedColumnIndex())),this.select(),void u.B.stopPropagation(t);case 113:return g.F2Mode=!0,WebSquare.text.setCaretPos(this.render,this.render.value.length),g.hideFakeInput(this),void u.B.stopPropagation(t);case 9:for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_divInput")){u.B.stopPropagation(t);break}return}var i=t.which||t.keyCode;if(!g.nonCharKeys[i])if(32!=i){if(g.fakeInput.render.parentNode){var o=this.render.getAttribute("rowindex"),s=g._getGroupbyDisplayRowIndex(o),r=this.render.parentNode.getAttribute("col_id"),a=g.getColumnIndex(r);u.B.fireEvent(g,"onbeforeedit",s,a,g.dataList._getCellData(o,a)),g.hideFakeInput(this)}u.B.stopPropagation(t)}else u.B.stopPropagation(t)},q.activate(),this.fakeInput||this.makeFakeInput()}this.dom[b]=q,
l&&this.adaptiveEmbeddedInputIdList.push(b)}return q},v.prototype.getTemporaryDataCollectionItemArr=function(t){try{var e=[],i=this.modelControl.getDataComp(t.dataCompID);if(i)switch(i.initializeType){case"linkedDataList":for(var o={},s=0;s<i.filteredRowIndexArr.length;s++){var a=i.getRealRowIndex(s),n=i._dataList.dataArr[a*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.label]],l=i._dataList.dataArr[a*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.value]];o[n]!=l&&(o[n]=l,e.push({label:n,value:l}))}break;case"dataList":for(o={},s=0;s<i.filteredRowIndexArr.length;s++){n=i.dataArr[i.filteredRowIndexArr[s]*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.label]],l=i.dataArr[i.filteredRowIndexArr[s]*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.value]];o[n]!=l&&(o[n]=l,e.push({label:n,value:l}))}break;case"dataMap":for(o={},s=0;s<i._dataList.oneRowDataLength;s++){n=i._dataList.dataArr[i.bodyIdColIndexMap[t.itemsetObj.label]],l=i._dataList.dataArr[i.bodyIdColIndexMap[t.itemsetObj.value]];o[n]!=l&&(o[n]=l,e.push({label:n,value:l}))}}return e}catch(t){r.w.printStackTrace(t)}};var w=function(){};w.prototype.initializeHead=function(){try{this.headerObj={},this.headerConfigOptions={};for(var t=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),e=[],i={},o=0;o<t.length;o++){if(i[t[o].id]){var n=WebSquare.language.getMessage("E_comp_duplicated_Msg",t[o].id)||"id["+t[o].id+"] 가 중복사용되었습니다. 소스코드를 확인하세요.";$l(n)}else i[t[o].id]=t[o].id;e.push(t[o])}for(o=0;o<e.length;o++){var l=e[o];if(!l.getAttribute("header_id")){var h=l.getAttribute("inputType"),d=l.getAttribute("dataType"),u=l.getAttribute("value"),c=null;if(this.setConfigOptions(l,u),"checkbox"==h)l.innerHTML="",(c=this.setCheckboxHead(l,u)).headInputType="checkbox";else if("select"==h)(c=this.setSelectboxHead(l,u)).headInputType="select";else if("text"==h&&"own"==d)(c=this.setInputHead(l,u)).headInputType="input";else if("checkcombobox"==h)(c=this.setCheckcomboboxHead(l,u)).headInputType="checkcombobox";else{var p=l.getAttribute("value"),g=l.getAttribute("useLocale");if("true"===g||this.options.useLocale&&!g){var m=l.getAttribute("localeRef");if(m){(b=this.getLocaleValue(m))&&(p=b)}else{var f=l.getAttribute("id");if(null!=f&&f.match("RowNumber")&&this.options.rowNumLocaleRef)(b=this.getLocaleValue(this.options.rowNumLocaleRef))&&(p=b);else if(null!=f&&f.match("RowStatus")&&this.options.rowStatusLocaleRef){var b;(b=this.getLocaleValue(this.options.rowStatusLocaleRef))&&(p=b)}}}p=null!=p?p:"",l.innerHTML="<nobr>"+p+"</nobr>"}var y=l.getAttribute("id");l.setAttribute("header_id",y);var v=l.className;if("native"===this.options.drawType&&(v+=" "+this.options.gridNativeClass),v+=" "+this.id+"_header__column"+o,this.headCellInfoHash[y]){var w=this.headCellInfoHash[y].getAttribute("class");w&&(v+=" "+w)}if(l.className=v,l.setAttribute("id",this.id+"_"+y),this.options.autoScope&&l.setAttribute("scope","col"),y&&!y.match("RowNumber")&&!y.match("RowStatus")){var S="/WebSquare/"+this.options.pluginName+"/header/column[@inputType='"+h+"']/useFilter/@value",C=a.D.getBoolean(s.v.getConfiguration(S)),x=this.headCellInfoHash[y].getAttribute("useFilter");if((x=""===x||"string"!=typeof x||a.D.getBoolean(x))&&(C||"true"==l.getAttribute("useFilter"))){var _="width:100%;height:100%;",I="";this.options.filterShowAlways&&(_+="table-layout:fixed;",I="overflow:hidden;");var T=document.createElement("table");T.style=_;var k=document.createElement("tr"),D=document.createElement("td");D.style.cssText="width:100%;"+I;for(var L=l.childNodes.length,W=0;l.childNodes.length>0&&W<L;W++)D.appendChild(l.childNodes[0]);k.appendChild(D);var A=document.createElement("td");if(A.innerHTML="<input type='button' id='"+this.id+"_"+y+"_filter' class='w2trigger w2grid_customFilter_open' onclick='"+this.id+'.showCustomFilter("'+y+"\");'/>",k.appendChild(A),T.appendChild(k),l.appendChild(T),this.options.filterShowAlways){var E=document.getElementById(this.id+"_"+y+"_filter")
;E&&E.parentNode&&(E.parentNode.style.width=E.offsetWidth+2+"px")}}}"true"===l.getAttribute("sortable")&&(l.className+=" w2grid_head_sortable"),this.headerObj[y]=c,l.disabled=!1;var M=l.getAttribute("toolTip");M&&WebSquare.getBody().setToolTip(l,M)}}this.clearHeaderSort()}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.associateHeaderBody=function(){try{for(var t=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),e=0,i=-1,o="",s=0;s<t.length;s++){var n=t[s];if(n.className.indexOf(this.options.headerTdClass+"_rowNumber")>=0||n.className.indexOf(this.options.headerTdClass+"_rowStatus")>=0);else{var l=n.getAttribute("colIndex");parseInt(l)<=i&&e++,i=parseInt(l);var h=e;h+1>this.tempTr.rows.length&&(h=this.tempTr.rows.length-1);for(var d=null;h>=0;){for(var u=this.tempTr.rows[h],c=a.D.first(u);c;){if(l==c.getAttribute("colIndex")){d=c;break}c=a.D.next(c)}if(d)break;h--}if(d){var p=n.getAttribute("header_id"),g=d.getAttribute("col_id");o=g,this.headerToBodyRelation[p]=g,this.bodyToHeaderRelation[g]=p}else{p=n.getAttribute("header_id");this.passiveColSpanRelation[p]=o}}}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setConfigOptions=function(t,e){try{var i=t.getAttribute("col_id"),o=this.options.pluginName,a=t.getAttribute("inputType");this.headerConfigOptions[i]=s.v.getConfig(o+"/header[@inputType='"+a+"']")}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getHeaderConfigValue=function(t,e,i){try{var o=t.getAttribute("col_id"),s=t&&(t.getAttribute(i)||t.getAttribute(i.toLowerCase())),a=this.headerConfigOptions[o]&&this.headerConfigOptions[o][i];return s||a||""}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setCheckboxHead=function(t,e){try{var i=t.getAttribute("col_id"),o=t.getAttribute("onChangeFunction")||t.getAttribute("onchangeFunction"),n="<INPUT type='checkbox' />",l=this.getHeaderConfigValue(t,e,"checkboxLabel");if(this.options.useLocale){var h=t.getAttribute("localeRef");if(h){var d=this.getLocaleValue(h);d&&(l=d)}}if(l){var c=this.uuid+"_header__"+i+"_checkboxLabel_",p=c+"_id";n="left"===this.getHeaderConfigValue(t,e,"checkboxLabelPosition")?"<label class='w2checkbox_label ' for='"+p+"'>"+l+"</label><INPUT type='checkbox' name='"+c+"' id='"+p+"'/>":"<INPUT type='checkbox' name='"+c+"' id='"+p+"'/><label class='w2checkbox_label ' for='"+p+"'>"+l+"</label>",t.getAttribute("checkboxLabel")||t.setAttribute("checkboxLabel",l)}t.innerHTML=n;var g=t.getElementsByTagName("input")[0];g.setAttribute("colId",e),("true"==t.getAttribute("disabled")||a.D.isIE()&&parseInt(s.v.browserVersion(),10)<9&&"true"==this.headCellInfoHash[i].getAttribute("disabled"))&&g.setAttribute("disabled","disabled");var m=t.getAttribute("title");m&&g.setAttribute("title",m);var f=this;u.B.addListener(g,"onkeydown",(function(t){u.B.fireEvent(f,"onkeydown",t),"32"==(t.charCode?t.charCode:t.keyCode)&&u.B.stopPropagation(t)})),u.B.addListener(g,"ondblclick",(function(t){u.B.stopPropagation(t)})),u.B.addListener(g,"onfocus",(function(t){var e=f.headerToBodyRelation[i];f.getCellInfo(e).options.focusOutOnCheckHeaderClick&&(f.removeFocusedCell(),1==f.options.senseReader&&f.rowIndex>0&&f.addGridScroll(0-f.rowIndex))}));var b=this.uuid;return null!=o&&""!=o?u.B.addListener(g,"onclick",(function(t){if(!WebSquare.idCache[b].options.checkHeaderOnly){f.noevent=!0;var s=a.D.getGlobalFunction(o,f.scope_id);if("function"==typeof s)try{s.call(this,this.checked,e)}catch(t){}f.options.preventMultipleClick&&u.B.fireEvent(f,"onheaderclick",i)}})):u.B.addListener(g,"onclick",(function(t){if(!WebSquare.idCache[b].options.checkHeaderOnly){f.noevent=!0;var e,o,s,a,n,l,h=f.headerToBodyRelation[i],d=f.getCellInfo(h),c=d,p=d.options.trueValue,g=d.options.falseValue,m=!(!f.isDrillDown||!f._dataList.options.depthColumn),y=!("checkbox"!==d.options.inputType||!f.options.ref);if(!0===y){var v=f._dataList._getXPath({colID:h,skipValueNode:!0});y=(e=WebSquare.ModelUtil.findInstanceNodes(v,null,f.scope_id)).length>=f.getTotalRow()}
if("checkbox"===d.options.inputType||"custom"===d.options.inputType||"radio"===d.options.inputType){if(f.editedCell)try{n=f.editedCell.editRowIndex,l=f.getColumnIndex(f.editedCell.id);var w=f._dataList.getColumnIndex(f.editedCell.id);a=f._grid.getRealRowIndex(n)*f._dataList.getColumnCount()+w,s=f._dataList.dataArr[a]}catch(t){r.w.printStackTrace(t,null,this)}if(this.checked){for(var S=f.getUnCheckedIndex(h),C=0;C<S.length;C++)if("custom"==d.options.inputType&&0==d.internal&&(c=d.cellManagerHashByRowIndex[S[C]])&&(p=c.options.trueValue,g=c.options.falseValue),c.options.checkAlways||!f.___getEditReadOnly(S[C],h,m)&&!f._getEditDisabled(S[C],h,m)){var x=S[C];m?f._dataList._setCellData(x,h,p,!0,!0,null,null,y):f.dataList.setCellData(x,h,p,!0,!0,null,null,y),o=p;var _=x;m&&(_=f._dataList.getFilteredRowIndex(_)),null!=_&&f._dataList.broadcast({gridView:["notifyCellChanged",[_,h,null,!0]]})}}else{var I=f.getCheckedIndex(h);for(C=0;C<I.length;C++)if("custom"==d.options.inputType&&0==d.internal&&(c=d.cellManagerHashByRowIndex[I[C]])&&(p=c.options.trueValue,g=c.options.falseValue),c.options.checkAlways||!f.___getEditReadOnly(I[C],h,m)&&!f._getEditDisabled(I[C],h,m)){x=I[C];m?f._dataList._setCellData(x,h,g,!0,!0,null,null,y):f.dataList.setCellData(x,h,g,!0,!0,null,null,y),o=g;_=x;m&&(_=f._dataList.getFilteredRowIndex(_)),null!=_&&f._dataList.broadcast({gridView:["notifyCellChanged",[_,h,null,!0]]})}}if(f.checkHeader(i),!0===y)for(C=0;C<e.length;C++){var T=e[C];(c.options.checkAlways||!f.___getEditReadOnly(C,h,m)&&!f._getEditDisabled(C,h,m))&&(f._dataList.valueNode?T.setAttribute(f._dataList.valueNode,o):WebSquare.xml.setTextNodeValue(T,o))}f._dataList.broadcast({linkedDataList:["notifyRowChanged"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"})}if(f.options.senseReader&&f.rowIndex<=0&&(f.senseReaderMode=!0,f._setGridBorderNoRefresh=!0),f.options.senseReader&&f.rowIndex<=0&&(f.senseReaderMode=!1,f._setGridBorderNoRefresh=!1),f.drawFooter(),f.drawHeader(),f.options.preventMultipleClick&&u.B.fireEvent(f,"onheaderclick",i),null!=a)try{var k=f._dataList.dataArr[a];s!=k&&u.B.fireEvent(f,"onviewchange",{oldValue:s,newValue:k,rowIndex:n,colIndex:l})}catch(t){r.w.printStackTrace(t,null,this)}}})),g}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.checkHeader=function(t){try{if(this.headerObj){var e=this.headerObj[t],i=this.headerToBodyRelation[t],o=this.headerInfoHash[t];if(e&&o&&o.options&&"checkbox"==o.options.inputType){var s=!(!this.isDrillDown||!this._dataList.options.depthColumn),n=this.getCellInfo(i),l=s?this.getTotalRow():this.getRowCount();if("checkbox"!==n.options.inputType&&"custom"!==n.options.inputType&&"radio"!==n.options.inputType)return;if(this.hasCustomInputType&&0==n.internal&&"custom"==n.options.inputType){for(var h=l,d=0;d<h;d++){var u=s?d:this.dataList.getRealRowIndex(d),c=n.cellManagerHashByRowIndex[u]?n.cellManagerHashByRowIndex[u]:n;"checkbox"!=c.options.inputType&&"radio"!=c.options.inputType&&l--}if(0===l)return}var p="exclude"===this.options.checkAllType?this.getCheckedIndex(i,!0):this.getCheckedIndex(i),g=p.length;if(0==l)e.checked=!1,e.indeterminate=!1;else if(l==g)e.checked=!0,e.indeterminate=!1;else if(g>0){var m=!1;if(n.options.checkAlways)n.options.usePartialCheck&&"uncheck"===n.options.partialCheckNextClick&&(m=!0);else{for(d=0;d<p.length;d++)if(!this.___getEditReadOnly(p[d],i,s)&&!this._getEditDisabled(p[d],i,s)){(n.options.usePartialCheck||a.D.isIEAllVersion())&&(m=!0);break}n.options.usePartialCheck&&"check"===n.options.partialCheckNextClick&&m&&(m=!1)}a.D.isIEAllVersion()?e.checked=!m:e.checked=m,n.options.usePartialCheck&&(e.indeterminate=!0)}else l-g==l&&(e.checked=!1,e.indeterminate=!1)}}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setSelectboxHead=function(t,e){try{var i,o=this,n=t.getAttribute("id"),l=this.headCellInfoHash[n]
;if("json"===l._elementType)(i=l.cloneNode(!0)._element).N="w2:select",i.A={style:"width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"};else{this.tmpSelectbox||(this.tmpSelectbox=new WebSquare.uiplugin.selectbox("___tmp_selectbox__"+this.id,{},null));var h=WebSquare.Elem.api.getElementsByTagName(l,"choices",s.v._XML_NAMESPACE.W2)[0],d=WebSquare.xml.serialize(h);for(var u in i=WebSquare.xml.parse('<w2:select xmlns:w2="http://www.inswave.com/websquare">'+d+"</w2:select>",!0).documentElement,this.tmpSelectbox.options){var c=t.getAttribute(u);null!=c&&""!=c&&("style"==u&&(c="width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"),i.setAttribute(u,c))}a.D.isIE(8)&&"true"==this.headCellInfoHash[n].getAttribute("disabled")&&i.setAttribute("disabled","true")}t.style.position="static",t.innerHTML="";var p=WebSquare.controlFactory.createControl(this.id+"_head_selectbox_"+t.getAttribute("id"),{pluginType:"uiplugin.selectbox",pluginName:"selectbox"},i,this.scope_obj,!0,this.parentFrame);p.writeTo(t),window[p.id]=p,p.activate(),p.itemArr.length>0&&p.setValueNM(p.itemArr[0].value);var g=t.getAttribute("onChangeFunction")||t.getAttribute("onchangeFunction");return p.changeFuncName=g,p.colId=e,p.headerId=n,p.addEvent("onchange",(function(t){var e=a.D.getGlobalFunction(this.changeFuncName,this.scope_id);if("function"==typeof e)try{e.call(this,this.getValue(),this.colId,this.headerId)}catch(t){}})),p.addEvent("onclick",(function(t){o.noevent=!0})),this.addControl(p),p}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setInputHead=function(t,e){try{t.innerHTML="<input type='text' class='w2grid_head_input' style='width:95%; height:18px;' />";var i=a.D.first(t),o=this,s=t.getAttribute("onChangeFunction")||t.getAttribute("onchangeFunction");i.setAttribute("changeFuncName",s),i.setAttribute("colId",e),i.scope_id=this.scope_id,i.headerId=t.getAttribute("col_id");var n=WebSquare.idCache[this.uuid];return u.B.addListener(i,"onfocus",(function(){o.noevent=!0,o.headerFocus=!0})),u.B.addListener(i,"onblur",(function(t){o.headerFocus=!1;var e=a.D.getGlobalFunction(this.getAttribute("changeFuncName"),this.scope_id);if("function"==typeof e)try{e.call(this,this.value,this.getAttribute("colId"),this.headerId)}catch(t){}})),u.B.addListener(i,"onclick",(function(t){o.noevent=!0})),u.B.addListener(i,"onkeyup",(function(t){13==t.keyCode&&this.blur()})),u.B.addListener(i,"onpaste",(function(t){n.options.preventPaste?u.B.preventDefault(t):13==t.keyCode&&this.blur()})),i}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setCheckcomboboxHead=function(t,e){try{var i,o=this,n=t.getAttribute("id"),l=this.headCellInfoHash[n];if("json"===l._elementType)(i=l.cloneNode(!0)._element).N="w2:checkcombobox",i.A={style:"width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"};else{this.tmpCheckcombobox||(this.tmpCheckcombobox=new WebSquare.uiplugin.checkcombobox("___tmp_checkcombobox__"+this.id,{},null));var h=WebSquare.Elem.api.getElementsByTagName(l,"choices",s.v._XML_NAMESPACE.W2)[0],d=WebSquare.xml.serialize(h);for(var u in i=WebSquare.xml.parse('<w2:checkcombobox xmlns:w2="http://www.inswave.com/websquare">'+d+"</w2:checkcombobox>",!0).documentElement,this.tmpCheckcombobox.options){var c=t.getAttribute(u);null!=c&&""!=c&&("style"==u&&(c="width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"),i.setAttribute(u,c))}}t.style.position="static",t.innerHTML="";var p=WebSquare.controlFactory.createControl(this.id+"_head_checkcombobox_"+t.getAttribute("id"),{pluginType:"uiplugin.checkcombobox",pluginName:"checkcombobox"},i,this.scope_obj,!0,this.parentFrame);p.writeTo(t),window[p.id]=p,p.activate(),p.itemArr.length>0&&p.setValueNM(p.itemArr[0].value);var g=t.getAttribute("onChangeFunction")||t.getAttribute("onchangeFunction");return p.changeFuncName=g,p.colId=e,p.headerId=n,p.addEvent("onchange",(function(t){
var e=a.D.getGlobalFunction(this.changeFuncName,this.scope_id);if("function"==typeof e)try{e.call(this,this.getValue(),this.colId,this.headerId)}catch(t){}})),p.addEvent("onclick",(function(t){o.noevent=!0})),p}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getHeaderDIV=function(t){return this.getHeaderLayer(t)},w.prototype.getHeaderLayer=function(t){for(var e=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),i=0;i<e.length;i++){var o=e[i],s=o.getAttribute("header_id");if(null!=s&&null!=t&&t.toLowerCase()==s.toLowerCase())return o}},w.prototype.getHeaderInfo=function(t){try{return this.headerInfoHash[t]||{options:{}}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getTotalHeaderCol=function(t){try{var e=this.getTotalCol();if(t){if(t.mergedColumn){e=0;for(var i=this.htmlInfo.head.headerTdHtml,o=0,s=i.length;o<s;o++)e+=i[o].length}t.defaultColumn&&(e+=this.defaultColCnt)}return e}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getHeaderColumnVisible=function(t){var e=this.getHeaderInfo(t),i=this._getRealColIndex("head",t),o=i+this.defaultColCnt,s=!this.hiddenList[o];if(e&&(0===i||i)){for(var r=0;r<e.options.colSpan;r++)s=!this.hiddenList[o+r]||s;return s}c.k.printLog("[getHeaderColumnVisible] 존재하지 않는 header 컬럼입니다.")},w.prototype.setHeaderValue=function(t,e,i){var o=this.getHeaderLayer(t);if(o)if("function"==typeof e)e(o);else{var s=this.headerObj[t],r=e;if(i&&(e=this.getFormattedHeaderValue(t,e)),s)if("select"==s.headInputType||"checkcombobox"==s.headInputType)s.setValue(e);else if("checkbox"==s.headInputType)s.checked!=a.D.getBoolean(e)&&(s.click(),s.checked=a.D.getBoolean(e));else if("input"==s.headInputType){if(s.value!=e){s.value=e;var n=a.D.getGlobalFunction(s.getAttribute("changeFuncName"),this.scope_id);if("function"==typeof n)try{n.call(s,s.value,s.getAttribute("colId"))}catch(t){}}}else"user"==s.headerInputType&&s.setValue(e);else{this.headerDataObj&&t&&(this.headerDataObj[t].value=r);var l=o.getElementsByTagName("nobr")[0];l?l.innerHTML=e:o.innerHTML="<nobr>"+e+"</nobr>"}o.setAttribute("value",e);for(var h=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],d=WebSquare.Elem.api.getElementsByTagName(h,"w2:column"),u=0;u<d.length;u++){var c=d[u];if(t==c.getAttribute("id")){c.setAttribute("value",e);break}}}},w.prototype.setHeaderNodeSet=function(t,e,i,o){if(this.getHeaderLayer(t)){var s=this.headerObj[t];s&&("select"!=s.headInputType&&"checkcombobox"!=s.headInputType||s.setNodeSet(e,i,o))}},w.prototype.setHeaderUserObject=function(t,e){this.headerObj[t]=e,e.headerInputType="user";var i=this.getHeaderLayer(t);i.innerHTML="",i.appendChild(e.getContent())},w.prototype.getHeaderValue=function(t){var e="";if(t&&(e=this.getHeaderLayer(t)),e){if(this.options.titleAuto&&"text"==e.getAttribute("inputtype")){var i=e.getElementsByTagName("NOBR")[0];return null!=i.textContent?i.textContent:i.innerHTML||""}var o=this.headerObj[t];if(o){var s="";return"select"==o.headInputType||"checkcombobox"==o.headInputType?s=o.getValue():"checkbox"==o.headInputType?s=!o.indeterminate&&o.checked:"input"==o.headInputType?s=o.value:"user"==o.headerInputType&&(s=o.getValue()),s}if(a.D.getBoolean(e.getAttribute("usefilter")))return e.getAttribute("value");var r=a.D.first(e),n=r.getElementsByTagName("NOBR")[0];if(n)r=n;else for(n=r;n&&"NOBR"!=n.tagName;){if("TD"==n.tagName){r=a.D.first(n);break}n=a.D.first(n)}return r?r.innerHTML:""}},w.prototype.getFormattedHeaderValue=function(t,e){var i=this.getHeaderLayer(t);if(i)return this.headerDataObj[i.getAttribute("header_id")]&&(e=this.headerDataObj[i.getAttribute("header_id")].formatter.format(e)),e},w.prototype.getHeaderValueList=function(t){for(var e=[],i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),o=0;o<i.length;o++)if(null==this.hiddenList[o]||1==t||1!=this.hiddenList[o]){var s=i[o],r=s.getAttribute("header_id");if(null!=r&&s)if(this.options.captionAuto||this.options.summaryOnlyAuto){
if("text"!=s.getAttribute("inputtype"))continue;var n=s.getElementsByTagName("NOBR")[0];null!=n.innerText&&""!=n.innerText&&"\n"!=n.innerText?e.push(n.innerText):null!=n.textContent&&""!=n.textContent?e.push(n.textContent):null!=n.innerHTML&&""!=n.innerHTML?e.push(n.innerHTML):e.push("")}else{var l,h=this.headerObj[r];h&&("select"==h.headInputType||"checkcombobox"==h.headInputType?l=h.getValue():"checkbox"==h.headInputType?l=h.checked:"input"==h.headInputType?l=h.value:"user"==h.headerInputType&&(l=h.getValue()),e.push(l));for(var d=a.D.first(s),u=d;u&&"NOBR"!=u.tagName;){if("TD"==u.tagName){d=a.D.first(u);break}u=a.D.first(u)}d?e.push(d.innerHTML):e.push("")}}return e},w.prototype.getHeaderSpan=function(t,e){for(var i=0;i<this.htmlInfo.head.rowArr.length;i++)for(var o=0;o<this.htmlInfo.head.rowArr[i].length;o++)if(this.htmlInfo.head.rowArr[i][o].id===t){if("row"===e)return this.htmlInfo.head.rowArr[i][o].rowSpan;if("col"===e)return this.htmlInfo.head.rowArr[i][o].colSpan}},w.prototype.getHeaderInputType=function(t){for(var e=0;e<this.htmlInfo.head.rowArr.length;e++)for(var i=0;i<this.htmlInfo.head.rowArr[e].length;i++)if(this.htmlInfo.head.rowArr[e][i].id===t)return this.htmlInfo.head.rowArr[e][i].inputType},w.prototype.getSortableArr=function(){for(var t=[],e=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),i=0;i<e.length;i++)"true"===e[i].getAttribute("sortable")?t.push(!0):"false"===e[i].getAttribute("sortable")?t.push(!1):1==this.options.sortable?t.push(!0):t.push(!1);return t},w.prototype.getSortableStatus=function(){return this.headerSortStatusArr.slice(0)},w.prototype.clearHeaderSort=function(){this.headerSortStatusArr=[];for(var t=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),e=0;e<t.length;e++){var i=t[e].getAttribute("header_id");"_headerRowNumber"!==i&&"_headerRowStatus"!==i&&("false"===t[e].getAttribute("sortable")&&!0!==this.options.showSortableImage||this.setHeaderSortImage(i,0,0))}},w.prototype.drawHeaderSortImages=function(){for(var t=this.htmlInfo.head.rowArr,e=0;e<this.headerSortStatusArr.length;e++){var i="";if(t.length>1&&"top"==this.options.sortedImagePosition){for(var o=this.headerSortStatusArr[e].colID,s=this.getColumnIndex(o),r=t[0],a=0;a<r.length;a++)if(r[a]["@col"]==s){i=r[a].id;break}}else if(!(i=this.bodyToHeaderRelation[this.headerSortStatusArr[e].colID])){var n=this.headerSortStatusArr[e].colID,l=this.getColumnIndex(n);for(l--;l>=0&&(n=this.getColumnID(l),!(i=this.bodyToHeaderRelation[n]));)l--}i&&this.setHeaderSortImage(i,this.headerSortStatusArr[e].sortOrder,e+1)}},w.prototype.setHeaderSortImage=function(t,e,i){var o=this.getElementById(this.id+"_"+t);if(null!=o){e=parseInt(e,10),i=parseInt(i,10);isNaN(i)||i<=0||this.headerSortStatusArr.length<2?i="":i+="",this._clearHeaderSortImage(o,"table"),this._clearHeaderSortImage(o,"div");var r="",n=this.options.showSortableImage;if(this.options.showSortableImage){var l=o.getAttribute("sortable");n=!!(r=l?a.D.getBoolean(l):this.options.sortable)}var h=o.getAttribute("inputType"),d="/WebSquare/"+this.options.pluginName+"/header/column[@inputType='"+h+"']/useFilter/@value",u=a.D.getBoolean(s.v.getConfiguration(d)),p=o.getAttribute("useFilter"),g=!1;if((p=""===p||"string"!=typeof p||a.D.getBoolean(p))&&(u||"true"==o.getAttribute("useFilter"))&&(g=!0),!0!==this.options.showSortableImage){var m;if(0!==e){m=a.D.first(o);var f=null,b=null,y=null;try{this._useCheckboxLabel(t)&&(b=document.createElement("div"),f=a.D.next(m),b.appendChild(f))}catch(t){}"nobr"==m.nodeName.toLowerCase()?(m=o.innerHTML,o.innerHTML=""):m=o.removeChild(m),this.headerObjArr[t]=m;var v=0,w="w2grid_head_sort_table_main",S="w2grid_head_sort_td",C="<table sort='sort' class='"+w+"'><tr><td></td><td class='"+S+" "+(T=1==e?"w2grid_head_sort_asc":"w2grid_head_sort_desc")+"'>"+i+"</td></tr></table>";"left"===this.options.sortedIconPosition&&(v=1,
C="<table sort='sort' class='"+w+"'><tr><td class='"+S+" "+T+"'>"+i+"</td><td></td></tr></table>"),o.innerHTML=C;var x=o.getElementsByTagName("td");"string"==typeof m?x[v].innerHTML=m:(x[v].appendChild(m),f&&b&&(x[v].appendChild(b.removeChild(f)),b=null))}}else{var _=this.headerObj[t];_?_.render&&(_=_.render):_=o.getElementsByTagName("nobr")[0];f=null;var I=null;try{this._useCheckboxLabel(t)&&("left"===this.headerInfoHash2[t].getAttribute("checkboxLabelPosition")?(I="left",b=document.createElement("div"),f=a.D.prev(_),b.appendChild(f)):(b=document.createElement("div"),f=a.D.next(_),b.appendChild(f)))}catch(t){}try{g&&this.options.showSortableUseFilter&&(y=o.getElementsByTagName("input")[0])}catch(t){}_.parentNode.removeChild(_);var T="",k="";switch(e){case 0:!1!==n||r?(T="w2grid_head_sort_none",k=WebSquare.language.getMessage("Grid_sort_asc")):(T="w2grid_head_sort_image_none",k="");break;case 1:T="w2grid_head_sort_asc",k=WebSquare.language.getMessage("Grid_sort_desc");break;case-1:T="w2grid_head_sort_desc",k=WebSquare.language.getMessage("Grid_sort_none");break;default:T="w2grid_head_sort_none",k=WebSquare.language.getMessage("Grid_sort_asc")}if(this.options.sortHeaderDiv){T+="_btn";o.innerHTML="<div sort='sort' class='w2grid_head_sort_div_main_outer'><button class='w2grid_head_sort_div_main_btn "+T+"' >"+k+"</button></div>";x=o.getElementsByTagName("div");var D=o.getElementsByTagName("button")[0];if(x[0].insertBefore(_,D),f&&b)this._useCheckboxLabel(t)&&"left"!==this.headerInfoHash2[t].getAttribute("checkboxLabelPosition")?x[0].insertBefore(b.removeChild(f),D):x[0].insertBefore(b.removeChild(f),_),b=null;else if(g&&this.options.showSortableUseFilter){E=x[0].parentElement;(A=document.createElement("div")).appendChild(x[0]),A.appendChild(y),this.addClass(A,"w2grid_head_sort_div_main_outer_box"),E.appendChild(A),this.addClass(y,"w2grid_customFilter_sortable_open"),a.D.isIE()&&parseInt(s.v.browserVersion(),10)<8?this.addClass(x[1],"w2grid_head_sort_usefilter_div_main_ie"):this.addClass(x[1],"w2grid_head_sort_usefilter_div_main")}}else{var L="w2grid_head_sort_div_main",W="w2grid_head_sort_div_sub";if("left"===this.options.sortedIconPosition&&(L="w2grid_head_sort_div_main_left"),!0===this.options.showSortableImage&&(W="left"===this.options.sortedIconPosition?"w2grid_head_sort_div_sub_sortable_image_left":"w2grid_head_sort_div_sub_sortable_image"),o.innerHTML="<div sort='sort' class = '"+L+" "+T+"'><div class = '"+W+"'>"+i+"</div></div>",(x=o.getElementsByTagName("div"))[0].appendChild(_),f&&b)"left"===I?x[0].insertBefore(b.removeChild(f),_):x[0].appendChild(b.removeChild(f)),b=null;else if(g&&this.options.showSortableUseFilter){var A,E=x[0].parentElement;(A=document.createElement("div")).appendChild(x[0]),A.appendChild(y),this.addClass(A,"w2grid_head_sort_div_main_outer_box"),E.appendChild(A),this.addClass(y,"w2grid_customFilter_sortable_open"),a.D.isIE()&&parseInt(s.v.browserVersion(),10)<8?this.addClass(x[1],"w2grid_head_sort_usefilter_div_main_ie"):this.addClass(x[1],"w2grid_head_sort_usefilter_div_main")}}}}else c.k.printLog("headerId : "+t+"를 찾을 수 없습니다.["+this.id+"]")},w.prototype._clearHeaderSortImage=function(t,e){var i=t.getElementsByTagName(e);if(i.length>0&&"sort"==i[0].getAttribute("sort")){var o=t.getAttribute("header_id"),s=this.headerObjArr[o];if(s)if("string"==typeof s)t.innerHTML=s;else{var r=null,n=null;try{this._useCheckboxLabel(o)&&(n=document.createElement("div"),r=a.D.next(s),n.appendChild(r))}catch(t){}s=t.appendChild(s),r&&n&&(t.appendChild(n.removeChild(r)),n=null),t.removeChild(s.previousSibling)}}},w.prototype.getColIdByHeaderId=function(t){return this.headerToBodyRelation[t]},w.prototype.setHeaderHide=function(t){if(t=a.D.getBoolean(t),this.options.hideHeader!=t){this.options.hideHeader=t;var e=this.getElementById(this.id+"_head_table"),i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));if(t){e.style.display="none";for(var o=0;o<i.length;o++){var s=i[o].getAttribute("class")
;null!=s&&(i[o].setAttribute("data-bkclass",s),i[o].removeAttribute("class"))}}else{e.style.display="";for(o=0;o<i.length;o++){var r=i[o].getAttribute("data-bkclass");null!=r&&(i[o].setAttribute("class",r),i[o].removeAttribute("data-bkclass"))}}this.refresh(),this.setScrollYHeight()}},w.prototype.setHeaderDisabled=function(t,e){try{e=a.D.getBoolean(e);var i=this.getHeaderLayer(t);if(i){var o=this.headerObj[t];o?(o.setDisabled?o.setDisabled(e):o.render?o.render.disabled=e:o.disabled=e,i.disabled=e):i.disabled=e}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype._getHeaderDisabled=function(t){try{var e=!1,i=this.getHeaderLayer(t);if(i){var o=this.headerObj[t];o?o.getDisabled?e=o.getDisabled():o.render?e=o.render.disabled:o.disabled&&(e=o.disabled):i.disabled&&(e=i.disabled)}return e}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getHeaderID=function(t){try{if("string"==typeof t)return t;var e=this.head_table;if(!e)return null;for(var i=t+=this.defaultColCnt,o=0,s=0;s<e.children.length;s++){var a=e.children[s].children;if((o+=a.length)>t){var n=a[i];return n?n.id.replace(this.id+"_",""):null}i-=a.length}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getHeaderIDArr=function(t){try{if("string"==typeof t)return t;var e=this.head_table;if(!e)return null;for(var i=t+=this.defaultColCnt,o=0,s=[],a=0;a<e.children.length;a++){var n=e.children[a].children;if((o+=n.length)>t){var l=n[i];l&&s.push(l.id.replace(this.id+"_",""))}else i-=n.length}return s}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getHeaderIndex=function(t){try{if("number"==typeof t)return t;var e=this.head_table;e||(e=this.getElementById(this.id+"_head_table"));for(var i=0,o=0;o<e.children.length;o++){for(var s=e.children[o].children,a=0;a<s.length;a++){if(s[a].id.replace(this.id+"_","")==t)return i+a-this.defaultColCnt}i+=s.length}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getHeaderRowIndex=function(t){for(var e=0;e<this.htmlInfo.head.rowArr.length;e++)for(var i=0;i<this.htmlInfo.head.rowArr[e].length;i++)if(this.htmlInfo.head.rowArr[e][i].id===t)return e},w.prototype.getHeaderColIndex=function(t){for(var e=0;e<this.htmlInfo.head.rowArr.length;e++)for(var i=0;i<this.htmlInfo.head.rowArr[e].length;i++)if(this.htmlInfo.head.rowArr[e][i].id===t)return this.htmlInfo.head.rowArr[e][i].colIndex},w.prototype.getHeaderColID=function(t,e){try{void 0!==e&&null!=e||(e={});for(var i="",o=this.struct.head.rowArr,s=!0===e.firstRow?1:o.length,a=0;a<s;a++){for(var n=o[a],l=0;l<n.length;l++)if(n[l].colIndex===t){i=n[l].id;break}if(i)break}return i}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setHeaderStyle=function(t,e,i){try{var o,s=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus";else if("number"==typeof t){t=(o=s[t+this.defaultColCnt]).getAttribute("header_id")}for(var a=0;a<s.length;a++)(o=s[a]).getAttribute("header_id")==t&&WebSquare.style.setStyle(o,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.setHeaderClass=function(t,e){try{var i,o=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus";else if("number"==typeof t){t=(i=o[t+this.defaultColCnt]).getAttribute("header_id")}for(var s=0;s<o.length;s++)(i=o[s]).getAttribute("header_id")==t&&(this.addClass(i,e),this.headerCellClassObj[t]=e)}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.getHeaderClass=function(t){try{var e=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus";else if("number"==typeof t){t=e[t+this.defaultColCnt].getAttribute("header_id")}
for(var i=0;i<e.length;i++)if(e[i].getAttribute("header_id")==t)return this.headerCellClassObj[t]}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.removeHeaderClass=function(t,e){try{var i,o=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus";else if("number"==typeof t){t=(i=o[t+this.defaultColCnt]).getAttribute("header_id")}for(var s=0;s<o.length;s++)(i=o[s]).getAttribute("header_id")==t&&(this.removeClass(i,e),delete this.headerCellClassObj[t])}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.drawHeader=function(t){try{if(!this.head_table)return;null==this.headerDataObj&&this.initHeaderDataObj();var e=this.head_table.getElementsByTagName("th");if(this.headerTempSum=[],t){t=this.getColumnID(t);for(var i=0;i<e.length;i++){if(n=(a=e[i]).getAttribute("header_id"))if(l=this.headerDataObj[n])if("expression"==l.inputType){var o=l.expression.match(/headercol(sum|avg|max|min)\s*\([^\)]*/g);if(o)for(var s=0;s<o.length;s++)o[s].split("(")[1].wq_replaceAll("'","").wq_replaceAll('"',"").wq_trim()==t&&(l.value=new Function("_this","return "+l.expression)(this),isNaN(l.value)&&"NaN"!=l.NaNFormat&&(l.value=l.NaNFormat),a.innerHTML="<nobr>"+l.formatter.format(l.value)+"</nobr>")}else""===l.displayFormat||"number"!=l.dataType||"text"!=l.inputType&&"textarea"!=l.inputType&&"button"!=l.inputType&&"textImage"!=l.inputType||(a.innerHTML="<nobr>"+l.formatter.format(l.value)+"</nobr>")}}else for(i=0;i<e.length;i++){var a,n,l;if(n=(a=e[i]).getAttribute("header_id"))if(l=this.headerDataObj[n])if("expression"==l.inputType){try{l.value=new Function("_this","return "+l.expression)(this),isNaN(l.value)&&"NaN"!=l.NaNFormat&&(l.value=l.NaNFormat)}catch(t){}a.innerHTML="<nobr>"+l.formatter.format(l.value)+"</nobr>"}else""===l.displayFormat||"number"!=l.dataType||"text"!=l.inputType&&"textarea"!=l.inputType&&"button"!=l.inputType&&"textImage"!=l.inputType||(a.innerHTML="<nobr>"+l.formatter.format(l.value)+"</nobr>")}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.initHeaderDataObj=function(){try{var t=this.head_table.getElementsByTagName("th");this.headerDataObj={};for(var e=0;e<t.length;e++){var i=t[e],o={};o.id=i.getAttribute("header_id");var a=i.getAttribute("expression")||"";if(""!=a&&(a=(a=(a=(a=a.replace(/[sS][uU][mM][\s]*[(]/g,"_this.headercolsum( ")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.headercolavg( ")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.headercolmax( ")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.headercolmin( ")),o.value=i.getAttribute("value")||"",this.options.useLocale){var n=i.getAttribute("localeRef");if(n){var l=this.getLocaleValue(n);l&&(o.value=l)}}o.inputType=i.getAttribute("inputType"),o.dataType=i.getAttribute("dataType")||"text",o.expression=a,o.displayFormat=i.getAttribute("displayFormat")||"",o.displayFormatter=i.getAttribute("displayFormatter")||"",o.formatter=WebSquare.format.createFormatter(o.dataType,o.displayFormat,o.displayFormatter,null,null,null,this.scope_id,this.id),o.NaNFormat=i.getAttribute("NaNFormat")||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/column[@inputType='expression']/NaNFormat/@value")||"NaN","$blank"==o.NaNFormat&&(o.NaNFormat=""),this.headerDataObj[o.id]=o}}catch(t){r.w.printStackTrace(t,null,this)}},w.prototype.headercolsum=function(t){if(this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={}),void 0===this.headerTempSum[t].sum){var e="";if(this.groupbyStatus.grouped);else{var i=this.getColumnAllDataArray(t);e=a.D.sum(i)}this.headerTempSum[t].sum=e}return a.D.setPrecision(this.headerTempSum[t].sum)},w.prototype.headercolavg=function(t){var e=this.getColumnAllDataArray(t);this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={});var i="";if(this.groupbyStatus.grouped)return i;if(void 0===this.headerTempSum[t].sum){if(e.length>0){
for(var o=0;o<e.length;o++)""==e[o].replace(/^\s+|\s+$/g,"")&&(e[o]="0");i=a.D.sum(e)}this.headerTempSum[t].sum=i}return""==this.headerTempSum[t].sum?"":this.headerTempSum[t].sum/e.length},w.prototype.headercolmax=function(t){if(this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={}),void 0===this.headerTempSum[t].max){var e=null;if(this.groupbyStatus.grouped);else{for(var i=this.getColumnAllDataArray(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e<s)&&(e=s)}e=null==e?"":e,e=a.D.setPrecision(e)}this.headerTempSum[t].max=e}return this.headerTempSum[t].max},w.prototype.headercolmin=function(t){if(this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={}),void 0===this.headerTempSum[t].min){var e=null;if(this.groupbyStatus.grouped);else{for(var i=this.getColumnAllDataArray(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e>s)&&(e=s)}e=null==e?"":e,e=a.D.setPrecision(e)}this.headerTempSum[t].min=e}return this.headerTempSum[t].min},w.prototype._getMatchedHeaderId=function(t){try{return this.bodyToHeaderRelation[t]}catch(t){r.w.printStackTrace(t,null,this)}};var S=function(t,e){try{this.options={id:"",value:"",inputType:"text",useFilter:!1,textAlign:""},this.mainGrid=e,this.mainGridId="G_"+this.mainGrid.id+"__",t&&this.setOptions(t),this.id=this.options.id}catch(t){r.w.printStackTrace(t,null,this)}};w.prototype._setHeaderInfo=function(t,e){this.headerInfoHash2[t]=e},w.prototype.setCheckboxHeader=function(t){try{"function"==typeof this.cellInfoHash[t].checkHeader&&this.cellInfoHash[t].checkHeader()}catch(t){r.w.printStackTrace(t,null,this)}},S.prototype.setOptions=function(t){this.options.useFilter=a.D.getBoolean(s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/header/column/useFilter/@value")),this.options.hideCustomFilter=a.D.getBoolean(s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/header/column/hideCustomFilter/@value"));var e=[];for(var i in this.options)e[i.toLowerCase()]=i;var o=this.mainGrid.headerConfigOptions[t.getAttribute("id")]||{};for(var i in o)this.options[i]=o[i];var r=WebSquare.Parser.parseAttribute(t);for(var n in r){var l=r[n];"class"==n?this.options.className=l:""!=String(l).wq_trim()&&(e[n]&&(n=e[n]),"boolean"==typeof this.options[n]?l=a.D.getBoolean(l):"number"==typeof this.options[n]&&(l=a.D.getNumber(l)),this.options[n]=l)}},w.prototype._useCheckboxLabel=function(t){try{var e=this.getHeaderLayer(t);return"checkbox"===e.getAttribute("inputType")&&(e.getAttribute("checkboxLabel")||e.getAttribute("checkboxlabel"))}catch(t){r.w.printStackTrace(t,null,this)}};var C=function(){};C.prototype.getLastFocusedCell=function(){if(this.focusedCell.length>0)return this.focusedCell[this.focusedCell.length-1];var t={focusedRowIndex:-1,focusedColIndex:null};return this.options.groupbyDisplayRowIndex&&(t.groupbyDisplayRowIndex=-1),t},C.prototype.getFocusedRowIndex=function(){return this._getFocusedRowIndex(this.options.groupbyDisplayRowIndex)},C.prototype._getFocusedRowIndex=function(t){return this.getLastFocusedCell()[!0===t&&this.options.groupbyDisplayRowIndex?"groupbyDisplayRowIndex":"focusedRowIndex"]},C.prototype.getFocusedRealRowIndex=function(){return this.getLastFocusedCell().focusedRealRowIndex},C.prototype.getAllFocusedIndex=function(){for(var t=this.focusedCell,e=[],i=this.options.groupbyDisplayRowIndex?"groupbyDisplayRowIndex":"focusedRowIndex",o=0;o<t.length;o++){var s={};s.col=t[o].focusedColIndex,s.row=t[o][i],e.push(s)}return e},C.prototype.getAllFocusedRowIndex=function(){for(var t=[],e={},i=this.options.groupbyDisplayRowIndex?"groupbyDisplayRowIndex":"focusedRowIndex",o=0;o<this.focusedCell.length;o++){e[this.focusedCell[o][i]]=!0}for(var s in e)t.push(parseInt(s,10));return t},C.prototype.getFocusedColumnIndex=function(){return this.getLastFocusedCell().focusedColIndex},C.prototype.getFocusedColumnID=function(){return this.getColumnID(this.getFocusedColumnIndex())},
C.prototype.getFocusedRowStatus=function(){var t=this._getFocusedRowIndex(!0);return-1==t?null:this.dataList.getRowStatus(t)},C.prototype.setFocusedCell2=function(t,e,i,o){try{o=o||{};i=a.D.getBoolean(i),e=this.getColumnIndex(e);var s=!1;try{s=this.lastEvent&&void 0!==this.lastEvent.type&&"unknown"!=typeof this.lastEvent.type&&("focus"==this.lastEvent.type||"focusin"==this.lastEvent.type)}catch(t){s=!1}var n=this.getLastFocusedCell(),l=i&&n.focusedColIndex==e;if((this.___getEditReadOnly(t,e)||this._getEditDisabled(t,e))&&(l=!1),this.editedCell&&!this.editedCell.handleEndEdit(null,l))return!1;if(!s&&"native"!==this.options.drawType){var h=this._getVisibleLastIndex(this.lastIndex+1),d=this.getDataLength(),u=this.rowIndex+this._getVisibleTrRowIndex(this.lastIndex,this.rowIndex);!0===this.hiddenRowObj.init&&this.rowIndex===d-h&&(u=d-this._getVisibleLastIndex(1));var c=this.rowIndex,p=this.hiddenCellObj.length>0;if(p&&t===u&&(u=Math.max(u-1,0)),t<c||t>u){var g=t<c?t-c:t-u;if(t>u&&this.hasSubtotal){for(var m in this.rollbackCommitFlag=!1,this.subtotalTableList){if(u<d-1)this.dataList._getCellData(u,m)!=this.dataList._getCellData(u+1,m)&&g++}this.rollbackCommitFlag=!0}var f=this.rowIndex+g;f=(f=f<0?0:f)>d-h?d-h:f,p&&!isNaN(this.lastTopRowIndex)&&null!=this.lastTopRowIndex&&(f=Math.min(f,this.lastTopRowIndex)),f!==this.rowIndex&&(this.scrollEvent=!1,this.checkScrollEnd=!0,f=Math.max(0,f),isNaN(this.lastTopRowIndex)||null==this.lastTopRowIndex||(f=Math.min(f,this.lastTopRowIndex)),this.drawData(f,0,"keymove",l),!0===this.hiddenRowObj.init||p||(this.lastIndex=this.getLastIndex(this.lastDisplayedRow)))}}var b=t-(this.rowIndex>0?this.rowIndex:0),y=this.data_td_list[e+b*this.oneRowDataLength];return!!y&&("rollback"==this.__setFocusedCell({ctrl:!1},y,{editMode:i,dont_hide:l,dont_fixScroll:!0,tabDirection:o.tabDirection})&&this._setFocusedCell(n.focusedRowIndex,n.focusedColIndex,!0,{tabDirection:o.tabDirection}),!0)}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.setFocusedCell=function(t,e,i,o){try{(o=o||{}).groupbyDisplayRowIndex=this.options.groupbyDisplayRowIndex;var s=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll),a=t;if(s&&(a=this.getDisplayRowIndex(t)),!isNaN(a))return this._setFocusedCell(a,e,i,o)}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype._setFocusedCell=function(t,e,i,o){try{if(o=o||{},"none"==this.options.focusMode)return;if(!0===o.groupbyDisplayRowIndex&&(t=this._getGroupbyGroupedRowIndex(t,!0)),0==arguments.length||1==arguments.length){i=0!=arguments.length&&arguments[0];var s=this.colIndexInfo.body.colInfo.colIndexMatch;if(this.focusedCell.length>0)t=this.focusedCell[this.focusedCell.length-1].focusedRowIndex,e=this.focusedCell[this.focusedCell.length-1].focusedColIndex;else if(this.lastFocusedCell&&null!=this.lastFocusedCell.focusedColIndex&&this.lastFocusedCell.focusedRowIndex>=0)t=this.lastFocusedCell.focusedRowIndex,e=this.lastFocusedCell.focusedColIndex;else{var n=this.getLastFocusedCell();t=n.focusedRowIndex;if(null==(e=n.focusedColIndex)||-1==t)return this.focusedCell=[{focusedRowIndex:0,focusedColIndex:s.length-this.defaultColCnt-1}],this.moveHorizontal(null,"home"),void(i&&this._setFocusedCell(!0))}}var l=this.getDataLength(),h=this.getDataLength()-this._getVisibleLastIndex(1);if(e=this.getColumnIndex(e),t<0||t>h||e<0||e>=this.oneRowDataLength)return;var d=!1;try{d=this.lastEvent&&void 0!==this.lastEvent.type&&"unknown"!=typeof this.lastEvent.type&&("focus"==this.lastEvent.type||"focusin"==this.lastEvent.type)}catch(t){d=!1}if(i=a.D.getBoolean(i),this.delayedDraw({rowIndex:t}))return this.focusedCell=[{focusedRowIndex:t,focusedColIndex:e}],this._linkedDataList?this._linkedDataList.setRowPosition(t):this._dataList.setRowPosition(t),void this._dataList.setColumnPosition(this.getColumnID(e));var u=this.getElementById(this.id+"_scrollY_div");"native"!==this.options.drawType&&u&&0==u.scrollTop&&this.rowIndex>0&&(u.scrollTop=this.lastScrollYTop);var c=t-(this.rowIndex>0?this.rowIndex:0)
;if(!d&&"native"!==this.options.drawType)if(c<0)this.scrollEvent=!1,u.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t),this.drawData(t,0),c=0;else if(this.options.showLastRow&&c-this.lastIndex==1&&""===this.options.visibleRowNum);else if(c>this._getVisibleTrRowIndex(this.lastIndex,this.rowIndex)){var p=this._getVisibleLastIndex(this.lastIndex+1);this.hiddenCellObj.length>0&&!isNaN(this.lastTopRowIndex)&&null!=this.lastTopRowIndex&&(p=l-this.lastTopRowIndex);var g=t+p>l?l-p:t;this.hiddenCellObj.length>0&&(g=Math.max(0,g)),g!==this.rowIndex&&(this.scrollEvent=!1,this.checkScrollEnd=!o.isSort||"string"!=typeof this.options.filterFocusMode||"followfocus"!==this.options.filterFocusMode.toLowerCase(),u.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(g),g>this.rowIndex+p-1&&(this.adjustDraw_keepTop=!0),this.drawData(g,0),c=t-this.rowIndex)}var m=this.data_td_list[e+c*this.oneRowDataLength];if(m){for(var f=5;"native"!==this.options.drawType&&this.hiddenCellObj.length>0&&0===m.offsetHeight&&f>0;){this.lastTopRowIndex++;var b=this.getElementById(this.id+"_size_y"),y=(u=this.getElementById(this.id+"_scrollY_div"),b.offsetHeight);y<1e6&&(y=parseInt(b.style.height,10)),b.style.height=u.offsetHeight+this.oneRowScrollHeight*this.lastTopRowIndex+"px",this.drawData(this.lastTopRowIndex,0),c--,m=this.data_td_list[e+c*this.oneRowDataLength],f--}o.editMode=i,this.__setFocusedCell({ctrl:!1},m,o)}}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.removeFocusedCell=function(){try{this.lastFocusedCell=this.getLastFocusedCell(),this.applyFocusedCellOut(),this.focusedCell=[],this._dataList.setRowPosition(null)}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.applyFocusedCell=function(t,e){if(e||(this.applyFocusedCellOut(),this.focusedCell=[]),null!=t){this.applyFocusedCellIn(t);var i={};i.focusedTd=t,this.focusedCell.push(i)}},C.prototype.__setFocusedCell=function(t,e,i){i=i||{};var o=t.ctrlKey||i.ctrled,s=t.shiftKey||i.shifted,r=e.className;if(this.options.focusDefaultColumn){if(r.indexOf("_groupby")>=0||r.indexOf("Subtotal")>=0)return null!=this.editedCell&&this.editedCell.handleEndEdit(),!1}else if(r.indexOf("_rowNum")>=0||r.indexOf("_rowStatus")>=0||r.indexOf("_groupby")>=0||r.indexOf("Subtotal")>=0)return null!=this.editedCell&&this.editedCell.handleEndEdit(),!1;var n=parseInt(e.getAttribute("tdIndex")),l=parseInt(n/this.realRowDataLength),h=parseInt(e.getAttribute("colIndex")),d=l+this.rowIndex,c=this._getGroupbyDisplayRowIndex(d),p=d;this.isDrillDown&&this._dataList.options.depthColumn&&(p=this.getRealRowIndex(d));var g=n%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),m=this.getColumnID(g),f=!0,b=this.getLastFocusedCell();if(this.focusedCell.length>0&&b.focusedTd==e&&(f=!1),f&&this.editedCell&&!this.editedCell.handleEndEdit(t,!!i.dont_hide,{focuseChanged:f}))return!1;var y=this._linkedDataList?this._linkedDataList.setRowPosition(c):this._dataList.setRowPosition(p),v=this._dataList.setColumnPosition(m);if(!1===y||!1===v)return!1;var w=this._getFocusedRowIndex(),S=this.getFocusedColumnIndex(),C=!(a.D.getBoolean(this.options.useCtrlKey)&&o||a.D.getBoolean(this.options.useShiftKey)&&s),x=!1;if(C&&a.D.getBoolean(i.allowContextMenuMultiCell)&&(C=!1,x=!0,this.focusedCell)){for(var _=!1,I=0;I<this.focusedCell.length;I++)if(this.focusedCell[I].focusedTd==e){_=!0;break}_||(C=!0,x=!1)}if(C&&(this.applyFocusedCellOut(),this.focusedCell=[]),i.tabDirection||(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),this.focusedCell.length>0&&a.D.getBoolean(this.options.useShiftKey)&&s){var T=this.focusedCell[0],k=T.focusedRowIndex,D=T.focusedColIndex;this._applyFocusedMultiCell(k,D,d,g,i.ignoreFocusMode),i.dont_fixScroll||(h>=this.getFixedColumnLastIndex()&&this.fixScrollLeftDirection(),this.fixScrollRightDirection()),this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds()}else if(!x){var L;if(this.getCellInfo(e).options.blockSelect)return;var W={focusedTd:e,focusedRealRowIndex:p,
focusedRowIndex:L=this.rowIndex>0&&this.options.fixedRow>0&&this.options.fixedRow>d-this.rowIndex||this.options.lastFixedRow>0&&d-this.rowIndex>this.lastIndex-this.options.lastFixedRow?d-this.rowIndex:d,focusedColIndex:g};this.options.groupbyDisplayRowIndex&&(W.groupbyDisplayRowIndex=this._getGroupbyDisplayRowIndex(L)),this.focusedCell.push(W),i.dont_fixScroll||(h>=this.getFixedColumnLastIndex()&&this.fixScrollLeftDirection(),this.fixScrollRightDirection()),this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds();var A="native"!==this.options.drawType&&!!i.editMode;if(this.applyFocusedCellIn(e,A,i.tabDirection,i.ignoreFocusMode),"linear"===this.options.focusFlow&&!0===i.editMode&&(this.focusedByApi=!1),b=this.getLastFocusedCell(),i.ignoreFocusMode||"cell"==this.options.focusMode){for(I=this.focusedCell.length-2;I>=0;I--)if(this.focusedCell[I].focusedTd==b.focusedTd){this._applyFocusedCellOut(this.focusedCell[I]),this.focusedCell.pop(),this.focusedCell.splice(I,1);break}}else if("both"==this.options.focusMode){for(I=this.focusedCell.length-2;I>=0;I--)if(this.focusedCell[I].focusedTd==b.focusedTd){this._applyFocusedCellOut(this.focusedCell[I]),this.focusedCell.pop(),this.focusedCell.splice(I,1),this.changeFocusedCellPosition(this.rowIndex);break}}else if("row"==this.options.focusMode){var E=b.focusedTd?b.focusedTd.parentNode:null;for(I=this.focusedCell.length-2;I>=0;I--){var M=this.focusedCell[I];if(null!=M.focusedTd){var q=M.focusedTd.parentNode;for(l=parseInt(q.getAttribute("trIndex"));l>0;)l--,q=a.D.prev(q);do{if(q==E){this._applyFocusedCellOut(this.focusedCell[I]),this.focusedCell.pop(),this.focusedCell.splice(I,1),this.changeFocusedCellPosition(this.rowIndex,!0);break}if(!(q=a.D.next(q)))break}while("0"!=q.getAttribute("trIndex"))}}}}var R=this.getCellInfo(g);if("custom"==R.options.inputType&&(R=R.cellManagerHashByRowIndex[d]),(w=this._getGroupbyDisplayRowIndex(w))==(d=this._getGroupbyDisplayRowIndex(d))&&S==g||u.B.fireEvent(this,"oncellindexchange",d,g,w,S),w!=d&&u.B.fireEvent(this,"onrowindexchange",d,w),S!=g&&u.B.fireEvent(this,"oncolumnindexchange",g,S),i.editMode)if("native"===this.options.drawType){var N=this.uuid,F=e.id,O=e.parentNode,B=this.id+"_dataLayer",V=document.getElementById(B),H=Math.max(O.offsetTop-V.offsetHeight+O.offsetHeight*this.oneRowLength+2,0);a.D.setTimeout((function(){document.getElementById(B).scrollTop=H,a.D.setTimeout((function(){var t=WebSquare.idCache[N],e=document.getElementById(F);t.setEditMode(e)}),{key:this.id+"__setFocusedCell_after",delay:50})}),{key:this.id+"__setFocusedCell",delay:50})}else this.setEditMode(e)},C.prototype.applyFocusedCellOut=function(){if(this.focusedCell.length>0)for(var t=0;t<this.focusedCell.length;t++){var e=this.focusedCell[t];this._applyFocusedCellOut(e)}},C.prototype._applyFocusedCellOut=function(t){if("row"==this.options.focusMode||"both"==this.options.focusMode){if(null==(o=t.focusedTd)&&this.options.showLastRow){var e=t.focusedRowIndex,i=t.focusedColIndex;o=this.data_td_list[i+e*this.oneRowDataLength]}null!=o&&this.removeFocusRowStyle(o)}if("cell"==this.options.focusMode||"both"==this.options.focusMode){var o;if(null==(o=t.focusedTd)&&this.options.showLastRow){e=t.focusedRowIndex,i=t.focusedColIndex;o=this.data_td_list[i+e*this.oneRowDataLength]}null!=o&&("linear"!=this.options.focusFlow&&o.setAttribute("tabIndex",-1),this.removeClass(o,"focusedTd"),(!this.options.focusDefaultColumn||t.focusedColIndex>=0)&&(this.options.fixedRow>0&&t.focusedRowIndex-this.rowIndex>=0&&this.options.fixedRow>t.focusedRowIndex-this.rowIndex||this.options.lastFixedRow>0&&t.focusedRowIndex-this.rowIndex>this.lastIndex-this.options.lastFixedRow?this.applyCellStyleOptions(t.focusedRowIndex-this.rowIndex,t.focusedColIndex,!0):this.applyCellStyleOptions(t.focusedRowIndex,t.focusedColIndex,!0)),this.options.rowMouseOver&&this.addRowOverStyle(this.overElem))}},C.prototype.removeFocusRowStyle=function(t){if(null!=t){for(var e=t.parentNode,i=parseInt(e.getAttribute("trIndex"));i>0;)i--,
e=a.D.prev(e);for(var o=a.D.first(e),s=parseInt(o.getAttribute("tdIndex")),r=(i=parseInt(s/this.realRowDataLength),0);r<this.realRowDataLength;r++){var n=r;r>=this.defaultColCnt&&(n=Math.floor((r-this.defaultColCnt)/this.columnOrder.length)*this.columnOrder.length+this.columnOrder[(r-this.defaultColCnt)%this.columnOrder.length]+this.defaultColCnt);var l=i*this.realRowDataLength+n,h=this.all_data_td_list[l];if(this.removeClass(h,"focusedTr"),r<this.defaultColCnt){var d=h.className;d.indexOf(this.options.bodyTdClass+"_rowNumber")>=0?""==this.options.rowNumBackgroundColor&&(h.style.backgroundColor="",h.removeAttribute("style_bak")):d.indexOf(this.options.bodyTdClass+"_rowStatus")>=0&&(h.style.backgroundColor="",h.removeAttribute("style_bak"))}else{var u=parseInt(h.getAttribute("tdIndex")),c=i+this.rowIndex,p=u%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.applyCellStyleOptions(c,p,!0)}}}},C.prototype.applyFocusedCellIn=function(t,e,i,o){if("none"!=this.options.focusMode){var s=this.getCellInfo(t.getAttribute("col_id")),r=s.options.inputType||"text";if(this.focusedByApi=!0,s.options.embeddedInput)if(e){var n=this.getElemRowIndex(t);if("text"!=r&&"link"!=r||!this._getEditDisabled(n,s.id)&&!this.__getEditReadOnly(t,n))this.getInput(s,t).focus();else t.focus()}else{if(i)this.getInput(s,t).focus()}else{var l=!1;try{var h=this.focusedCell[this.focusedCell.length-1].focusedRealRowIndex-this.rowIndex;(this.rowIndex>0&&this.options.fixedRow>0&&h>=0&&this.options.fixedRow>h||this.options.lastFixedRow>0&&h-this.rowIndex>this.lastIndex-this.options.lastFixedRow)&&(l=!0)}catch(t){}if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum||this.___getEditReadOnly(h,t.getAttribute("col_id"))&&!0===this.options.readOnlyTabIgnore||t.setAttribute("tabIndex",0),"custom"==r&&this.options.senseReader){n=this.getElemRowIndex(t);var d=s.cellManagerHashByRowIndex[n];r=d?d.options.inputType:"text"}if(e&&("text"==r||"secret"==r||"textarea"==r||"textImage"==r||"calendar"==r)||l);else if("button"==r&&this.options.senseReader){var u=t.getElementsByTagName("button");(u=u[0]).focus()}else if("link"==r&&this.options.senseReader){(p=(p=t.getElementsByTagName("a"))[0]).focus()}else if("checkbox"==r&&this.options.senseReader){t.getElementsByTagName("input")[0].focus()}else if("user"==r&&this.options.senseReader){var c,p=t.getElementsByTagName("a");if(-1!=this.focusedCellLinkIndex)if("right"==i){for(var g=0;g<p.length;g++)document.activeElement==p[g]&&(this.focusedCellLinkIndex=g);c=this.focusedCellLinkIndex+1}else c=this.focusedCellLinkIndex-1;else{if("right"==i)c=0;else if(null==i){if(c=0,document.activeElement)for(g=0;g<p.length;g++)document.activeElement==p[g]&&(c=g)}else c=p.length-1;this.focusedCellLinkLength=p.length}p=p[c],this.focusedCellLinkIndex=c,p?i&&p.focus():this._getEditDisabled(n,s.id)||this.__getEditReadOnly(t,n)?t.blur():t.focus()}else if("select"!=r||1!=this.options.senseReader||"ul"!=s.options.tableRender||this.isVirtualCursor())a.D.isIE(8)?"none"!=t.parentElement.style.display&&t.focus():t.focus();else{(p=(p=t.getElementsByTagName("a"))[0]).focus()}}var m=!1;try{m=this.lastEvent&&void 0!==this.lastEvent.type&&"unknown"!=typeof this.lastEvent.type&&("focus"==this.lastEvent.type||"focusin"==this.lastEvent.type)}catch(t){m=!1}if(!m&&!e&&"native"!==this.options.drawType){var f=this.getElementById(this.id+"_dataLayer");f.scrollLeft=0,f.scrollTop=0}var b=this.options.focusMode;if(o&&(b="cell"),"row"!=b&&"both"!=b||this.setFocusRowStyle(t),"cell"==b||"both"==b){this.addClass(t,"focusedTd");var y=parseInt(t.getAttribute("tdIndex")),v=parseInt(y/this.realRowDataLength),w=v+this.rowIndex;(this.rowIndex>0&&this.options.fixedRow>0&&this.options.fixedRow>v||this.options.lastFixedRow>0&&v>this.lastIndex-this.options.lastFixedRow)&&(w=v);var S=y%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(this.options.focusDefaultColumn&&S<0)return;this.applyCellStyleOptions(w,S,null,o)}}},
C.prototype.setFocusRowStyle=function(t){if(null!=t){for(var e=t.parentNode,i=parseInt(e.getAttribute("trIndex"));i>0;)i--,e=a.D.prev(e);for(var o=a.D.first(e),s=parseInt(o.getAttribute("tdIndex")),r=(i=parseInt(s/this.realRowDataLength),0);r<this.realRowDataLength;r++){var n=r;r>=this.defaultColCnt&&(n=Math.floor((r-this.defaultColCnt)/this.columnOrder.length)*this.columnOrder.length+this.columnOrder[(r-this.defaultColCnt)%this.columnOrder.length]+this.defaultColCnt);var l=i*this.realRowDataLength+n,h=this.all_data_td_list[l];if(this.addClass(h,"focusedTr"),r<this.defaultColCnt){var d=h.className;d.indexOf(this.options.bodyTdClass+"_rowNumber")>=0?""==this.options.rowNumBackgroundColor&&(h.style.backgroundColor=this.options.selectedRowColor.wq_trim(),h.removeAttribute("style_bak")):d.indexOf(this.options.bodyTdClass+"_rowStatus")>=0&&(h.style.backgroundColor=this.options.selectedRowColor.wq_trim(),h.removeAttribute("style_bak"))}else{var u=parseInt(h.getAttribute("tdIndex")),c=i+this.rowIndex,p=u%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.applyCellStyleOptions(c,p)}}}},C.prototype.outFocusedCell=function(){this.removeFocusedCell()},C.prototype.getFocusedCellData=function(){var t=this._getFocusedRowIndex(),e=this.getFocusedColumnIndex(),i=this.getColumnID(e);return t>-1?this.dataList._getCellData(t,i):null},C.prototype.getFocusedRowData=function(){var t=this._getFocusedRowIndex();return t>-1?this.dataList.getRowData(t):null},C.prototype.getFocusedRowXML=function(){var t=this._getFocusedRowIndex(!0);return t>-1?this.dataList.getRowXML(t):null},C.prototype.removeRowFocus=function(t){for(var e=[],i=0;i<this.focusedCell.length;i++)t!=this.focusedCell[i].focusedRowIndex?e.push(this.focusedCell[i]):this._applyFocusedCellOut(this.focusedCell[i]);this.focusedCell=e},C.prototype.setFocusedHeaderObj=function(t){if(this.getHeaderLayer(t)){var e=this.headerObj[t];if(e)switch(e.headInputType){case"checkcombobox":case"select":case"checkbox":case"input":e.focus()}}},C.prototype.focus=function(){try{var t=this.getLastFocusedCell(),e=-1!=t.focusedRowIndex?t.focusedRowIndex:0,i=null!=t.focusedColIndex?t.focusedColIndex:0;this._setFocusedCell(e,i,!1)}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.setFocusedMultiCell=function(t,e,i,o,s){try{s=s||{};var a=this.options.useShiftKey;this.options.useShiftKey=!0,this._setFocusedCell(Number(t),Number(e),null,{ignoreFocusMode:s.ignoreFocusMode}),this._setFocusedCell(Number(i),Number(o),!1,{shifted:!0,ignoreFocusMode:s.ignoreFocusMode}),this.options.useShiftKey=a}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype.removeFocusedMultiCell=function(t,e,i,o){try{for(var s="focusedColIndex",a="focusedRowIndex",n=this.focusedCell.length-1;n>=0;n--){var l=this.focusedCell[n];l[a]>=t&&l[a]<=i&&l[s]>=e&&l[s]<=o&&(this._applyFocusedCellOut(l),this.focusedCell.splice(n,1))}}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype._applyFocusedMultiCell=function(t,e,i,o,s){try{this.applyFocusedCellOut(),this.focusedCell=[];var a=this.getLocationRowCol(t,e);t=a.rowIndex,e=a.colIndex;var n=t,l=e,h=this.getLocationRowCol(i,o);i=h.rowIndex,o=h.colIndex;for(var d=i,u=o,c=t>i,p=e>o,g=this.htmlInfo.body.rowAttrArr.length,m=c?i:t,f=c?t:i,b=p?o:e,y=p?e:o,v=!0;v;){v=!1;var w=f,S=0;for(var C in this.cellMergeInfo)this.cellMergeInfo.hasOwnProperty(C)&&S++;f-m>g&&S<1&&(w=m+g);for(var x=b,_=m;_<=w;_++){var I=this.getOriginalRowCol(_,b);I.colSize>1&&x>(I=this.getLocationRowCol(I.rowIndex,I.colIndex)).colIndex&&(x=I.colIndex,v=!0),b=x}var T=y;for(_=m;_<=w;_++){var k=this.getOriginalRowCol(_,y);k.colSize>1&&T<(k=this.getLocationRowCol(k.rowIndex,k.colIndex)).colIndex+k.colSize-1&&(T=k.colIndex+k.colSize-1,v=!0),y=T}for(var D=m,L=b;L<=y;L++){var W=this.getOriginalRowCol(m,L);W.rowSize>1&&D>(W=this.getLocationRowCol(W.rowIndex,W.colIndex)).rowIndex&&(D=W.rowIndex,v=!0),m=D}var A=f;for(L=b;L<=y;L++){var E=this.getOriginalRowCol(f,L)
;E.rowSize>1&&A<(E=this.getLocationRowCol(E.rowIndex,E.colIndex)).rowIndex+E.rowSize-1&&(A=E.rowIndex+E.rowSize-1,v=!0),f=A}}i=c?m:f,e=p?y:b,o=p?b:y;for(_=t=c?f:m;c?_>=i:_<=i;c?_--:_++)for(L=e;p?L>=o:L<=o;p?L--:L++){var M=this.getOriginalRowCol(_,L),q=M.colIndex,R=M.rowIndex;if(!M.noLeftTop){var N=this.data_td_list[q+(R-this.rowIndex)*this.oneRowDataLength];if(R<this.rowIndex&&(N=null),!(this.groupbyStatus.grouped&&N&&this.hasClass(N,"w2grid_groupby"))){var F=this.getCellInfo(q),O=this._getRealColIndex("body",F.options.col_id)+this.defaultColCnt;if(!F.options.blockSelect&&!this.hiddenList[O]){var B={focusedTd:N,focusedRowIndex:R,focusedColIndex:q};if(this.options.groupbyDisplayRowIndex&&(B.groupbyDisplayRowIndex=this._getGroupbyDisplayRowIndex(R)),_==n&&L==l?this.focusedCell.unshift(B):this.focusedCell.push(B),null!=N){var V=!0;(F.options.embeddedInput||L==u&&_==d)&&(V=!1),this.applyFocusedCellIn(N,V,null,s)}(""==F.options.inputType||"text"==F.options.inputType&&!F.options.embeddedInput||"textImage"==F.options.inputType||"calendar"==F.options.inputType)&&(this.getInput(F).options.editType=F.options.editType?F.options.editType:this.options.editType)}}}}}catch(t){r.w.printStackTrace(t,null,this)}},C.prototype._addFocus=function(t){try{var e=parseInt(t.getAttribute("tdIndex")),i=parseInt(e/this.realRowDataLength)+this.rowIndex,o=i;this.isDrillDown&&this._dataList.options.depthColumn&&(o=this.getRealRowIndex(i));var s,a=e%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),n={focusedTd:t,focusedRealRowIndex:o,focusedRowIndex:s=this.rowIndex>0&&this.options.fixedRow>0&&this.options.fixedRow>i-this.rowIndex||this.options.lastFixedRow>0&&i-this.rowIndex>this.lastIndex-this.options.lastFixedRow?i-this.rowIndex:i,focusedColIndex:a};this.options.groupbyDisplayRowIndex&&(n.groupbyDisplayRowIndex=this._getGroupbyDisplayRowIndex(s)),this.focusedCell.push(n)}catch(t){r.w.printStackTrace(t,null,this)}};var x=function(t){};x.prototype._subtotalHidden=function(t){try{for(var e=0;e<t.length;e++){if(this.isIE6or7)for(var i=t[e].getElementsByTagName("td"),o=0;o<i.length;o++)i[o].style.borderWidth="0px";"none"!==t[e].style.display&&(this.drawedSubtotal&&this.drawedSubtotal.drawedRowLength--,t[e].style.display="none")}}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.subtotalHidden=function(t){try{if(!this.hasSubtotal)return;if(t){if("number"==typeof t.index)for(var e=this.drawedSubtotal.splice(t.index,1),i=0;i<e.length;i++)this._subtotalHidden(e[i]);if("number"==typeof t.rowIndex)for(i=this.drawedSubtotal.length-1;i>=0;i--)if(this.drawedSubtotal[i].rowIndex==t.rowIndex){e=this.drawedSubtotal.splice(i,1);for(var o=0;o<e.length;o++)this._subtotalHidden(e[o])}if("number"==typeof t.startRowIndex)for(i=this.drawedSubtotal.length-1;i>=0;i--)if(this.drawedSubtotal[i].rowIndex>=t.startRowIndex)for(e=this.drawedSubtotal.splice(i,1),o=0;o<e.length;o++)this._subtotalHidden(e[o]);if("number"==typeof t.endRowIndex)for(i=this.drawedSubtotal.length-1;i>=0;i--)if(this.drawedSubtotal[i].rowIndex<=t.endRowIndex)for(e=this.drawedSubtotal.splice(i,1),o=0;o<e.length;o++)this._subtotalHidden(e[o])}else{for(var s in this.subtotalTableList){var a=this.subtotalRowHash[s];a&&this._subtotalHidden(a)}this.drawedSubtotal=[],this.drawedSubtotal.drawedRowLength=0}}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.refreshSubtotalRow=function(t){try{for(var e=t-this.rowIndex;e<=this.lastIndex;e++)this.drawSubtotalRow(e+1,e+this.rowIndex);var i=WebSquare.BootLoader.fullViewed||!1,o=a.D.fullViewed||!1;if(!i&&!o){var n=this.options.adaptive,l=parseInt(this.options.adaptiveThreshold)||480;if("crosstab"==n&&!(a.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)&&parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=l){for(e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!0);this.removeAdaptiveGridSubtotalHeight(),this.setAdaptiveGridSubtotalHeight()
;for(e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!1);this.event.hasEvent(this.id+"_body_tbody","onscroll")||this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onscroll",this.event.bindAsEventListener(this,this.tbodyMoveXScroll))}}}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.drawSubtotalRow=function(t,e,i){try{var o=0;if(!this.hasSubtotal||e<0||e>=this.getDataLength())return o;var s=NaN;if(i&&!isNaN(i.maxCount)&&(s=i.maxCount),s<=0)return o;for(var a in this.subtotalTableList){var n=this.dataList._getCellData(e,a),l=n+"_12";if(e<this.getDataLength()-1)l=this.dataList._getCellData(e+1,a);if(n!=l){var h=this.subtotalRowHash[a],d=this.subtotalTableList[a],u=d.rows.length,c=[];c.rowIndex=e,c.targetID=a;for(var p=0;p<u;p++){var g=h?h[t*u+p]:void 0;if(g){if(this.isIE6or7)for(var m=g.getElementsByTagName("td"),f=0;f<m.length;f++)m[f].style.borderWidth="";o>=s?g.style.display="none":(g.style.display="",o++),g.setAttribute("data-subtotalrowindex",e),c.push(g),this.lastSubtotalRow=g}}if(this.drawedSubtotal.push(c),this.drawedSubtotal.drawedRowLength+=o,this.setSubtotalData(d,a,n,e,c,i),o>=s)break}}return o}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.hasUpperSubtotalRow=function(t){try{if(!this.hasSubtotal||t<0||t>=this.getDataLength())return!1;for(var e in this.subtotalTableList){var i=this.dataList._getCellData(t,e),o=i;if(t<this.getDataLength())o=this.dataList._getCellData(t-1,e);if(i!=o)return!0}return!1}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.getHasSubtotalCount=function(t){try{if(!this.hasSubtotal||t<0||t>=this.getDataLength())return 0;var e=0;for(var i in this.subtotalTableList){var o=this.dataList._getCellData(t,i),s=o;t+1<this.getDataLength()?s=this.dataList._getCellData(t+1,i):t+1==this.getDataLength()&&e++,o!=s&&e++}return e}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.setSubtotalData=function(t,e,i,o,s,n){try{var l,h=this.subtotalDataArr[e+"_"+i];if(null==h&&(h=this.getSubtotalData(t,e,i,o)),this.options.subtotalStyleFormatter)try{"function"==typeof this.options.subtotalStyleFormatter?l=this.options.subtotalStyleFormatter:null!=(l=a.D.getGlobalFunction(this.options.subtotalStyleFormatter,this.scope_id))&&(this.options.subtotalStyleFormatter=l)}catch(t){l=null}for(var d=0;d<s.length;d++)for(var u=s[d].getElementsByTagName("td"),c=0;c<u.length;c++){var p=u[c],g=p.getAttribute("id");if(null!=h[g]){var m=h[g];if("expression"==p.getAttribute("inputType")&&isNaN(m)&&null!=p.getAttribute("NaNFormat")&&"NaN"!=p.getAttribute("NaNFormat")&&(m=p.getAttribute("NaNFormat")),p.innerHTML="<nobr>"+m+"</nobr>","function"==typeof l){var f=h[g+"_org"];null==f&&(f=m);var b=l(f,m,p.id);if(p&&b){var y=p.getAttribute("data-bkclassname");null==y&&(y=p.className,p.setAttribute("data-bkclassname",y)),p.className=p.getAttribute("data-bkclassname")+" "+b}}}else if("true"!=p.getAttribute("colMerge")||this.groupbyStatus.grouped){var v=p.getAttribute("value"),w=p.getAttribute("useLocale"),S=p.getAttribute("inputType");if("true"===w||this.options.useLocale&&!w){var C=p.getAttribute("localeRef");if(C&&"expression"!==S){var x=this.getLocaleValue(C);x&&(v=x)}}v=null!=v?v:"",p.innerHTML="<nobr>"+v+"</nobr>"}else p.style.borderTopWidth="0px",p.style.borderBottomWidth="0px"}}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.getSubtotalData=function(t,e,i,o){try{var s=e,n=this.subtotalObj[e];if(null==n){n={};for(var l=0;l<t.rows.length;l++)for(var h=t.rows[l].getElementsByTagName("td"),d=0;d<h.length;d++){var u=h[d];if("expression"==u.getAttribute("inputType")){(w={}).id=u.getAttribute("id");var c=u.getAttribute("expression")||""
;""!=c&&(c=(c=(c=(c=(c=(c=(c=(c=c.replace(/[sS][uU][mM][\s]*[(]/g,"this.subtotalcolsum( obfuscator_st, obfuscator_en ,")).replace(/[aA][vV][gG][\s]*[(]/g,"this.subtotalcolavg( obfuscator_st, obfuscator_en ,")).replace(/[mM][aA][xX][\s]*[(]/g,"this.subtotalcolmax( obfuscator_st, obfuscator_en ,")).replace(/[mM][iI][nN][\s]*[(]/g,"this.subtotalcolmin( obfuscator_st, obfuscator_en ,")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"this.subtotalcolcnt( obfuscator_st, obfuscator_en ,")).replace(/[tT][aA][rR][gG][eE][tT][cC][oO][lL][vV][aA][lL][uU][eE][\s]*[(]/g,"this.dataList._getCellData( obfuscator_en, obfuscator_targetID")).replace(/[tT][aA][rR][gG][eE][tT][cC][oO][lL][lL][aA][bB][eE][lL][\s]*[(]/g,"this.subtotaltargetcollabel( obfuscator_st, obfuscator_en, obfuscator_targetID")).replace(/[tT][aA][rR][gG][eE][tT][fF][oO][oO][tT][eE][rR][vV][aA][lL][uU][eE][\s]*[(]/g,"this.subtotaltargetfootervalue( obfuscator_st, obfuscator_en,"));var p="text",g=parseInt(u.getAttribute("colindex"))-this.defaultColCnt;g>=0&&(p=this._dataList.getCellInfo(g).options.dataType),w.dataType=u.getAttribute("dataType")||p,w.expression=c,w.displayFormat=u.getAttribute("displayFormat")||"",w.displayFormatter=u.getAttribute("displayFormatter")||"",w.formatter=WebSquare.format.createFormatter(w.dataType,w.displayFormat,w.displayFormatter,null,null,null,this.scope_id,this.id),n[w.id]=w}}this.subtotalObj[e]=n}for(var m=o;m>0&&i==this.dataList._getCellData(m-1,e);)m--;var f=m,b=o,y={};for(var v in n){var w=n[v],S=a.D.scopingFuncBody(w.expression,this.scope_id);this._subtotalDisplayFormat=w.displayFormat||"";var C=Function("obfuscator_st","obfuscator_en","obfuscator_targetID",S).call(this,f,b,s),x=w.formatter.format(C);y[v]=x,this.options.subtotalStyleFormatter&&C!==x&&(y[v+"_org"]=C)}return this._subtotalDisplayFormat="",y}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.getSubtotalRowList=function(t){try{var e=[];t&&"object"===t.returnType&&(e={});var i=this.getDataLength();for(var o in this.subtotalStrList)for(var s=1;s<i;s++){this.dataList._getCellData(s-1,o)!=this.dataList._getCellData(s,o)&&(t&&"object"===t.returnType?e[s]=!0:e.push(s))}return e}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.subtotalcolsum=function(t,e,i){try{var o,s=this.getColumnSubtotalRangeDataArray(t,e,i),n="";if(s.length>0)if(o=this.getColumnOption(i,"dataType"),n=0,"bigDecimal"===o)for(var l=0;l<s.length;l++)n=WebSquare.bigDecimal(n+"").plus(s[l]);else if("time"===o)for(l=0;l<s.length;l++){var h=WebSquare.text.fillZero(n,4);n=WebSquare.date.dateTimeAdd(h,s[l],"hour","time")}else n=a.D.sum(s,{displayFormat:this._subtotalDisplayFormat});return a.D.setPrecision(n)}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.subtotalcolavg=function(t,e,i){try{var o=this.getColumnSubtotalRangeDataArray(t,e,i),s="";if("bigDecimal"===this.getColumnOption(i,"dataType")){for(var n in s="0",o)s=WebSquare.bigDecimal(s).plus(o[n]);s=s.divide(WebSquare.bigDecimal(o.length))}else o.length>0&&(s=a.D.sum(o,{displayFormat:this._subtotalDisplayFormat})/o.length);return s}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.subtotalcolmax=function(t,e,i){try{var o=this.getColumnSubtotalRangeDataArray(t,e,i),s=this.getColumnOption(i,"dataType"),n=null;if("bigDecimal"===s)for(var l in o)n=null==n?o[l]:n.compare(o[l]);else for(l=0;l<o.length;l++){var h=parseFloat(o[l]);isNaN(h)||(null==n||n<h)&&(n=h)}return n=null==n?"":n,a.D.setPrecision(n)}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.subtotalcolmin=function(t,e,i){try{var o=this.getColumnSubtotalRangeDataArray(t,e,i),s=this.getColumnOption(i,"dataType"),n=null;if("bigDecimal"===s)for(var l in o)n=null==n?o[l]:n.compare(o[l],!0);else for(l=0;l<o.length;l++){var h=parseFloat(o[l]);isNaN(h)||(null==n||n>h)&&(n=h)}return n=null==n?"":n,a.D.setPrecision(n)}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.subtotalcolcnt=function(t,e,i,o){try{o=o||{};return(this.getColumnSubtotalRangeDataArray(t,e,i,o)||[]).length}catch(t){
r.w.printStackTrace(t,null,this)}},x.prototype.subtotaltargetcollabel=function(t,e,i,o){var s="";try{s=this.dataList._getCellData(e,i);var a=this.getCellInfo(i),n=a.options.inputType;"select"!==n&&"autoComplete"!==n&&"checkcombobox"!==n||(s=a.getData(s,e))}catch(t){r.w.printStackTrace(t,null,this)}return s},x.prototype.subtotaltargetfootervalue=function(t,e,i,o){var s;try{this.hasFooter&&this.footerTempSum&&this.footerTempSum[i]&&(s=this.footerTempSum[i].sum)}catch(t){r.w.printStackTrace(t,null,this)}return s},x.prototype.getColumnSubtotalRangeDataArray=function(t,e,i,o){try{for(var s,a=[],n=this.getColumnID(i),h=this.getColumnOption(n,"dataType"),d=this.dataList.getDeletedIndex(),u=this.dataList.getModifiedIndex(),c=t;c<=e;c++){if(this.options.excludeDeletedRows){for(var p=!1,g=0;g<d.length;g++)if(d[g]===c){p=!0;break}if(p)continue}if(this.options.excludeModifiedRows){for(p=!1,g=0;g<u.length;g++)if(u[g]===c){p=!0;break}if(p)continue}"bigDecimal"===h?s=WebSquare.bigDecimal(this.dataList._getCellData(c,i)):(s=this.dataList._getCellData(c,i),s+=""),void 0===s||""==s?(s="0","object"===(0,l.Z)(o)&&!1!==o.blank&&a.push(s)):a.push(s)}return a}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype._getLastSubtotalCount=function(){try{if(!this.hasSubtotal)return 0;for(var t=0,e=this.getDataLength(),i=Math.max(e-this._getVisibleLastIndex(this.drawedRowLength),0),o=0,s=e-1;s>=i;s--){for(var a=0;a<this.struct.subtotalArr.length;a++){var n=this.struct.subtotalArr[a],l=n.attr.targetColumnID,h=this.dataList._getCellData(s,l),d=h+"_12";if(s<e-1)d=this.dataList._getCellData(s+1,l);if(h!=d&&(t+=n.rowArr.length,this.options.initFixedHeightByRowNum>-1)){if(o+t>=this.options.initFixedHeightByRowNum){i=s+1;break}i=Math.max(e-this._getVisibleLastIndex(this.drawedRowLength-t),0)}}o++}return t}catch(t){r.w.printStackTrace(t,null,this)}},x.prototype.setSubtotalVisible=function(t){try{if(0===this.render.offsetHeight&&0===this.render.offsetWidth)return this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),void this.delayedDraw({subTotalVisible:t});!0===t?(this.hasSubtotal=!0,this.lastTopRowIndex=null,this._applyRowVisible(),this.setScrollYHeight()):!1===t&&(this.subtotalHidden(),this.lastTopRowIndex=null,this.hasSubtotal=!1,this.setScrollYHeight())}catch(t){r.w.printStackTrace(t,null,this)}};var _=function(t){};_.prototype.initializeFooter=function(){try{if(!this.hasFooter)return;for(var t=this.getDomList("foot_tds","td",this.getElementById(this.id+"_foot_table")),e=0;e<t.length;e++){var i=t[e],o=i.getAttribute("id");if(o&&!i.getAttribute("footer_id")){for(var s="",a=0;a<this.struct.foot.rowArr.length;a++)for(var n=0;n<this.struct.foot.rowArr[a].length;n++)if(this.struct.foot.rowArr[a][n].id==o&&this.struct.foot.rowArr[a][n].class){s=this.struct.foot.rowArr[a][n].class;break}if("_headerRowNumber"!==o&&"_headerRowStatus"!==o||(o+="_footer"),i.setAttribute("footer_id",o),i.setAttribute("id",this.id+"_"+o),i.setAttribute("class",i.getAttribute("class")+" "+this.id+"_footer__column"+e+" "+s),"expression"!=i.getAttribute("inputType")){var l=i.getAttribute("value"),h=i.getAttribute("useLocale");if("true"===h||this.options.useLocale&&!h){var d=i.getAttribute("localeRef");if(d){var u=this.getLocaleValue(d);u&&(l=u)}}l=null!=l?l:"",i.innerHTML="<nobr>"+l+"</nobr>"}}}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.drawFooter=function(t){try{if(!this.hasFooter||!this.drawFooterStatus)return;null==this.footerDataObj&&this.initFooterDataObj();var e=this.getElementById(this.id+"_foot_table").getElementsByTagName("td");if(this.footerTempSum=[],t){t=this.getColumnID(t);for(var i=0;i<e.length;i++){var o=(d=e[i]).getAttribute("footer_id"),s=parseInt(d.getAttribute("colindex"))-this.defaultColCnt;if(o)if("expression"==(u=this.footerDataObj[o]).inputType){var n=u.expression.match(/footercol(sum|avg|max|min|custom)\s*\([^\)]*/g);if(n){for(var l=0;l<n.length;l++)if(n[l].indexOf(t)>=0){
var h=a.D.scopingFuncBody(u.expression,this.scope_id);u.value=Function("_this",h).call(this,this),isNaN(u.value)?"NaN"!=u.NaNFormat&&(u.value=u.NaNFormat):"number"===u.dataType&&0===Number(u.value)&&(u.value=0),d.innerHTML="<nobr>"+u.formatter.format(u.value)+"</nobr>"}}else if(t==this.getCellInfo(s).id){try{h=a.D.scopingFuncBody(u.expression,this.scope_id);u.value=Function("_this",h).call(this,this),isNaN(u.value)&&"NaN"!=u.NaNFormat&&(u.value=u.NaNFormat)}catch(t){}d.innerHTML="<nobr>"+u.formatter.format(u.value)+"</nobr>"}}}}else for(i=0;i<e.length;i++){var d;if(o=(d=e[i]).getAttribute("footer_id")){var u;if("expression"==(u=this.footerDataObj[o]).inputType)try{h=a.D.scopingFuncBody(u.expression,this.scope_id);u.value=Function("_this",h).call(this,this),isNaN(u.value)?"NaN"!=u.NaNFormat&&(u.value=u.NaNFormat):"number"===u.dataType&&0===Number(u.value)&&(u.value=0)}catch(t){}d.innerHTML="<nobr>"+u.formatter.format(u.value)+"</nobr>"}}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.initFooterDataObj=function(t){try{var e=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),i=-1,o=!1;t?(i=this.getColumnIndex(t),o=!0):this.footerDataObj={};for(var a=0;a<e.length;a++){var n=e[a],l=n.getAttribute("footer_id");l||(l="f_"+Math.random().toString(),n.setAttribute("footer_id",l));var h=parseInt(n.getAttribute("colindex"))-this.defaultColCnt;if(!(i>=0&&i!==h)){var d={};d.id=l;var u=n.getAttribute("expression")||"";""!=u&&(u=(u=(u=(u=(u=(u=u.replace(/[sS][uU][mM][\s]*[(]/g,"_this.footercolsum( ")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.footercolavg( ")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.footercolmax( ")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.footercolmin( ")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"_this.footercolcnt( ")).replace(/[cC][uU][sS][tT][oO][mM][\s]*[(]/g,"_this.footercolcustom( ")),d.value=n.getAttribute("value");var c=n.getAttribute("useLocale");if("true"===c||this.options.useLocale&&!c){var p=n.getAttribute("localeRef");if(p){var g=this.getLocaleValue(p);g&&(d.value=g)}}if(d.inputType=n.getAttribute("inputType"),d.dataType=n.getAttribute("dataType"),!d.dataType)try{if(d.dataType=this.getColumnOption(d.col_id,"dataType"),"expression"===d.inputType)d.col_id=new Function("_this","return "+u.substring(u.indexOf("(")+1,u.indexOf(")")))(this),d.dataType=this._dataList.getCellInfo(d.col_id).options.dataType||"text";else{var m="text",f=h;f>=0&&(m=this._dataList.getCellInfo(f).options.dataType),d.dataType=m}}catch(t){d.dataType="text"}d.expression=u,d.displayFormat=n.getAttribute("displayFormat")||"",d.displayFormatter=n.getAttribute("displayFormatter")||"",d.formatter=this._initFooterFormatter(d.col_id,d.dataType,d.displayFormat,d.displayFormatter,this.scope_id,this.id,o),d.NaNFormat=n.getAttribute("NaNFormat")||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/column[@inputType='expression']/NaNFormat/@value")||"NaN","$blank"==d.NaNFormat&&(d.NaNFormat=""),this.footerDataObj[d.id]=d}}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype._initFooterFormatter=function(t,e,i,o,a,n,l){try{if(t){var h=this.getCellInfo(t).options.dataType,d=i;return"euro"==h?(e=h,i||(d=this.options.euroMask||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/euroMask/@value')||""),".",","):"rupee"==h?(e=h,i||(d=this.options.rupeeMask||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/rupeeMask/@value')||""),",","."):"tenge"==h?(e=h,i||(d=this.options.tengeMask||s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/tengeMask/@value')||"")," ","-"):!l||"number"!==h&&"float"!==h&&"bigDecimal"!==h||(e=h,i||(d=this.options.numberMask||s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/numberMask/@value')||"")," ","-"),WebSquare.format.createFormatter(e,d,o,null,null,null,a,n)}
return WebSquare.format.createFormatter(e,i,o,null,null,null,a,n)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolsum=function(t){try{if(this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={}),void 0===this.footerTempSum[t].sum){var e="",i=5e3;if(this.groupbyStatus.grouped)e=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"SUM('"+t+"')");else{var o=this.getColumnAllDataArray(t),s=this.getColumnOption(t,"dataType"),n=!1;if("bigDecimal"!==s&&"euro"!==s&&"tenge"!==s&&"rupee"!=s||(n=!0),o.length>0&&n){for(var l=WebSquare.bigDecimal("0"),h=0;h<o.length;h++)""==o[h].replace(/^\s+|\s+$/g,"")&&(o[h]="0");for(var d=0;d<o.length;d++)o[d]=WebSquare.bigDecimal(o[d]),l=l.plus(o[d]);e=l.toString()}else if(o.length>0)if(o.length>i){var u,c=Math.ceil(o.length/i),p=0;e=0;for(h=0;h<c;h++){for(var g=o.slice(p,i*(h+1)),m=0;m<g.length;m++)""==g[m].replace(/^\s+|\s+$/g,"")&&(g[m]="0"),g[m]=g[m]-0+"";u=a.D.sum(g),p=parseInt(p,10)+parseInt(g.length,10),e=parseFloat(e,10)+parseFloat(u,10)}}else e=a.D.sum(o)}this.footerTempSum[t].sum=e}return a.D.setPrecision(this.footerTempSum[t].sum)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolavg=function(t){try{var e=this.getColumnAllDataArray(t);this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={});var i="",o=5e3;if(this.groupbyStatus.grouped)return i=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"AVG('"+t+"')");if(void 0===this.footerTempSum[t].sum){var s=this.getColumnOption(t,"dataType");if(e.length>0&&"bigDecimal"==s){for(var n=WebSquare.bigDecimal("0"),l=0;l<e.length;l++)""==e[l].replace(/^\s+|\s+$/g,"")&&(e[l]="0");for(var h in e)e[h]=WebSquare.bigDecimal(e[h]),n=n.plus(e[h]);return n.divide(WebSquare.bigDecimal(e.length)).toString()}if(e.length>0)if(e.length>o){var d,u=Math.ceil(e.length/o),c=0;i=0;for(l=0;l<u;l++){for(var p=e.slice(c,o*(l+1)),g=0;g<p.length;g++)""==p[g].replace(/^\s+|\s+$/g,"")&&(p[g]="0");d=a.D.sum(p),c=parseInt(c,10)+parseInt(p.length,10),i=parseFloat(i,10)+parseFloat(d,10)}}else i=a.D.sum(e);this.footerTempSum[t].sum=i}return""===this.footerTempSum[t].sum?"":i=this.cellInfoHash[t]&&"bigDecimal"==this.cellInfoHash[t].options.dataType?WebSquare.bigDecimal(this.footerTempSum[t].sum).divide(WebSquare.bigDecimal(e.length)).toString():this.footerTempSum[t].sum/e.length}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolmax=function(t){try{if(this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={}),void 0===this.footerTempSum[t].max){var e=null;if(this.groupbyStatus.grouped)e=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"MAX('"+t+"')");else{var i=this.getColumnAllDataArray(t),o=this.getColumnOption(t,"dataType");if(i.length>0&&"bigDecimal"==o){for(var s,n=0;n<i.length;n++)""==i[n].replace(/^\s+|\s+$/g,"")&&(i[n]="0");for(var l in i)i[l]=WebSquare.bigDecimal(i[l]),s=null==s?i[l]:s.compare(i[l],!1);e=s.toString()}else{for(n=0;n<i.length;n++){var h=parseFloat(i[n]);isNaN(h)||(null==e||e<h)&&(e=h)}e=null==e?"":e,e=a.D.setPrecision(e)}this.footerTempSum[t].max=e}}return this.footerTempSum[t].max}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolmin=function(t){try{if(this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={}),void 0===this.footerTempSum[t].min){var e=null;if(this.groupbyStatus.grouped)e=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"MIN('"+t+"')");else{var i=this.getColumnAllDataArray(t),o=this.getColumnOption(t,"dataType");if(i.length>0&&"bigDecimal"==o){for(var s,n=0;n<i.length;n++)""==i[n].replace(/^\s+|\s+$/g,"")&&(i[n]="0");for(var l in i)i[l]=WebSquare.bigDecimal(i[l]),s=null==s?i[l]:s.compare(i[l],!0);e=s.toString()}else{
for(n=0;n<i.length;n++){var h=parseFloat(i[n]);isNaN(h)||(null==e||e>h)&&(e=h)}e=null==e?"":e,e=a.D.setPrecision(e)}this.footerTempSum[t].min=e}}return this.footerTempSum[t].min}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolcnt=function(t,e){try{e=e||{};return(this.getColumnAllDataArray(t,e)||[]).length}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getColumnAllDataArray=function(t,e){try{var i=[],o=this.getColumnID(t),s=this.dataList.getDeletedIndex(),n=this.dataList.getModifiedIndex();if(null!==o){for(var h=this.isDrillDown&&a.D.getBoolean(this.options.drilldownFooterExpressionAllData)?this.getTotalRow():this.getDataLength(),d=0;d<h;d++){if(this.options.excludeDeletedRows){for(var u=!1,p=0;p<s.length;p++)if(s[p]===d){u=!0;break}if(u)continue}if(this.options.excludeModifiedRows){for(u=!1,p=0;p<n.length;p++)if(n[p]===d){u=!0;break}if(u)continue}var g;g=this.isDrillDown&&a.D.getBoolean(this.options.drilldownFooterExpressionAllData)?this._dataList.getCellData(d,o):this.dataList._getCellData(d,o),void 0===(g+="")||""==g?(g="0","object"===(0,l.Z)(e)&&!1!==e.blank&&i.push(g)):i.push(g)}return i}c.k.printLog("[Warning] Invalid colIndex("+t+"). ["+this.id+"] getColumnAllDataArray.")}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getFooterData=function(t,e){try{var i=this.getElementById(this.id+"_foot_table").getElementsByTagName("td");if("number"==typeof t){t=i[t+this.defaultColCnt].getAttribute("footer_id");var o=(l=this.footerDataObj[t]).value;if("expression"==l.inputType){var s=a.D.scopingFuncBody(l.expression,this.scope_id);o=Function("_this",s).call(this,this)}return"displayData"!=e?o:l.formatter.format(o)}for(var n=0;n<i.length;n++)if(i[n].getAttribute("footer_id")==t){var l;o=(l=this.footerDataObj[t]).value;if("expression"==l.inputType){s=a.D.scopingFuncBody(l.expression,this.scope_id);o=Function("_this",s).call(this,this)}return"displayData"!=e?o:l.formatter.format(o)}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.setFooterValue=function(t,e){this.setFooterData(t,e)},_.prototype.setFooterData=function(t,e){try{var i,o=this.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0].getElementsByTagName("td");if("number"==typeof t)t=(i=o[t+this.defaultColCnt]).getAttribute("footer_id");for(var s=0;s<o.length;s++)if((i=o[s]).getAttribute("footer_id")==t){var a=this.footerDataObj[t];"text"==a.inputType&&(a.value=e,i.innerHTML="<nobr>"+a.formatter.format(a.value)+"</nobr>")}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.setFooterDisplayFormat=function(t,e){try{var i,o=this.getElementById(this.id+"_foot_table").getElementsByTagName("td");if("number"==typeof t)t=(i=o[t+this.defaultColCnt]).getAttribute("footer_id");for(var s=0;s<o.length;s++)if((i=o[s]).getAttribute("footer_id")==t){var a=this.footerDataObj[t];a.displayFormat=e,a.formatter=WebSquare.format.createFormatter(a.dataType,a.displayFormat,a.displayFormatter,null,null,null,this.scope_id,this.id),"number"==a.dataType&&(i.innerHTML="<nobr>"+a.formatter.format(a.value)+"</nobr>")}var n=this.footerXml;if(n)for(var l=WebSquare.xml.getElementsByTagName(n,"w2:row"),h=0;h<l.length;h++){var d=WebSquare.xml.getElementsByTagName(l[h],"w2:column");for(s=0;s<d.length;s++){var u=d[s];if(u.getAttribute("id")==t){u.setAttribute("displayFormat",e);break}}}}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getFooterStyle=function(t,e){try{var i,o=this.getElementById(this.id+"_foot_table").getElementsByTagName("td");if("number"==typeof t)t=(i=o[t+this.defaultColCnt]).getAttribute("footer_id");for(var s=0;s<o.length;s++)if((i=o[s]).getAttribute("footer_id")==t)return WebSquare.style.getStyle(i,e)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.setFooterStyle=function(t,e,i){try{var o,s=this.getElementById(this.id+"_foot_table").getElementsByTagName("td")
;if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber_footer";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus_footer";else if("number"==typeof t){t=(o=s[t+this.defaultColCnt]).getAttribute("footer_id")}for(var a=0;a<s.length;a++)(o=s[a]).getAttribute("footer_id")==t&&WebSquare.style.setStyle(o,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getExcelAllFooterXML=function(t){try{if(t||(t=","),!this.hasFooter)return"<array><![CDATA[[]]]></array>";var e=[];e.push("<array><![CDATA["),e.push('["'),this.footerDataObj||this.initFooterDataObj();for(var i="",o=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0].getChildNodes(),n=0;n<o.length;n++){var l=o[n];if(1==l.nodeType)for(var h=l.getChildNodes(),d=0;d<h.length;d++){var u=h[d];if(1==u.nodeType){var c=u.getAttribute("id"),p=this.footerDataObj[c];if("expression"!=p.inputType)i=p.value,i=p.formatter.format(i);else{var g=a.D.scopingFuncBody(p.expression,this.scope_id);i=Function("_this",g).call(this,this),i=p.formatter.format(i)}e.push(i),e.push('"'+t+'"')}}}return e[e.length-1]='"]',e.push("]]></array>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getExcelAllFooterXMLDisplay=function(t){try{if(t||(t=","),!this.hasFooter)return"<array><![CDATA[[]]]></array>";var e=[];e.push("<array><![CDATA["),e.push('["');var i=this.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0].getElementsByTagName("td");if(this.groupbyStatus.grouped){this.footerDataObj||this.initFooterDataObj();var o=0;if(this.options.rowNumVisible){var n=(g=this.footerDataObj[i[o].getAttribute("footer_id")]).value||"";e.push(n),e.push('"'+t+'"'),o++}if(this.options.rowStatusVisible){n=(g=this.footerDataObj[i[o].getAttribute("footer_id")]).value||"";e.push(n),e.push('"'+t+'"')}}this.footerDataObj||this.initFooterDataObj();n="";for(var l=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0].getChildNodes(),h=0;h<l.length;h++){var d=l[h];if(1==d.nodeType)for(var u=d.getChildNodes(),c=0;c<u.length;c++){var p=u[c];if(1==p.nodeType){var g,m=p.getAttribute("id");if("expression"!=(g=this.footerDataObj[m]).inputType)n=g.value,n=g.formatter.format(n);else{var f=a.D.scopingFuncBody(g.expression,this.scope_id);n=Function("_this",f).call(this,this),n=g.formatter.format(n)}e.push(n),e.push('"'+t+'"')}}}return e[e.length-1]='"]',e.push("]]></array>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getExcelAllFooterXMLRaw=function(t){try{if(t||(t=","),!this.hasFooter)return"<array><![CDATA[[]]]></array>";this.footerDataObj||this.initFooterDataObj();for(var e=[],i="",o=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0].getChildNodes(),a=0;a<o.length;a++){var n=o[a];if(1==n.nodeType)for(var l=n.getChildNodes(),h=0;h<l.length;h++){var d=l[h];if(1==d.nodeType){var u=d.getAttribute("id"),c=this.footerDataObj[u];i=c.value,i=c.formatter.format(i),e[e.length]=i}}}return e[0]='<array><![CDATA[["'+e[0],e[e.length-1]+='"]]]></array>',e.join('"'+t+'"')}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.getExpressionValue=function(t){try{return this.hasFooter||(this.footerTempSum=[]),t=(t=(t=(t=(t=(t=t.replace(/[sS][uU][mM][\s]*[(]/g,"_this.footercolsum( ")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.footercolavg( ")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.footercolmax( ")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.footercolmin( ")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"_this.footercolcnt( ")).replace(/[cC][uU][sS][tT][oO][mM][\s]*[(]/g,"_this.footercolcustom( "),new Function("_this","return "+t)(this)}catch(t){r.w.printStackTrace(t,null,this)}},_.prototype.footercolcustom=function(t,e){try{var i=a.D.getGlobalFunction(t,this.scope_id),o="";return"function"==typeof i&&(o=i(this.getColumnAllDataArray(e),this.getColumnOption(e,"dataType"))),o}catch(e){c.k.printLog("[Warning] "+t+" is not valid function.["+this.id+"]")}};var I=i(2014),T=function(t){}
;T.prototype.setStartRowNumber=function(t){this.startRowNumber=t;for(var e=0;e<=this.lastIndex;e++)this._drawRowNumData(e,e+this.rowIndex)},T.prototype.setNoResultMessage=function(t){this.options.noResultMessage=t,this.displayNoResultMessage()},T.prototype.setNoResultMessageVisible=function(t){this.options.noResultMessageVisible=t,this.displayNoResultMessage()},T.prototype.checkAll=function(t,e){var i=!1,o=this.getCellInfo(t),s=o.id;if("checkbox"!=o.options.inputType){if("custom"!=o.options.inputType){var r=WebSquare.language.getMessage("Grid_warning1")||"선택하신 컬럼은 checkbox가 아닙니다.";return void $l(r)}i=!0}var a=o.options.trueValue,n=o.options.falseValue;this.drawFooterStatus=!1;var l,h=!(!this.isDrillDown||!this._dataList.options.depthColumn),d=h?this.getTotalRow():this.getDataLength(),u=!1,c=!1;if(this._linkedDataList){(c=this._linkedDataList.getBroadcast())&&this._linkedDataList.setBroadcast(!1);for(var p=0;p<d;p++){var g=this._linkedDataList.initialRowIndexArr[p],m=h?g:this._dataList.getFilteredRowIndex(g);if(i){if("checkbox"!=(b=o.cellManagerHashByRowIndex[g]?o.cellManagerHashByRowIndex[g]:o).options.inputType)continue;a=b.options.trueValue,n=b.options.falseValue}if(l=this._dataList.getCellData(m,s),1==e||1==e||e==a)l!=a&&this._dataList.setCellData(m,s,a);else if(0==e||0==e||e==n)l!=n&&this._dataList.setCellData(m,s,n);else{var f=l==a?n:a;this._dataList.setCellData(m,s,f)}}}else{(u=this._dataList.getBroadcast())&&this._dataList.setBroadcast(!1);for(m=0;m<d;m++){if(i){var b;g=this.dataList.getRealRowIndex(m);if("checkbox"!=(b=o.cellManagerHashByRowIndex[g]?o.cellManagerHashByRowIndex[g]:o).options.inputType)continue;a=b.options.trueValue,n=b.options.falseValue}if(l=this._dataList.getCellData(m,s),1==e||1==e||e==a)l!=a&&this._dataList.setCellData(m,s,a);else if(0==e||0==e||e==n)l!=n&&this._dataList.setCellData(m,s,n);else{f=l==a?n:a;this._dataList.setCellData(m,s,f)}}}c&&this._linkedDataList.setBroadcast(!0,!0,{gridView:[{keepTop:!0,refreshInstance:!1}]}),u&&this._dataList.setBroadcast(!0,!0,{gridView:[{keepTop:!0,refreshInstance:!1}]}),this.drawFooterStatus=!0,this.drawFooter(),this.drawHeader()},T.prototype.getColumnType=function(t){return this.getCellInfo(t).options.inputType},T.prototype.getColumnNodeSet=function(t){return this.getCellInfo(t).itemsetObj},T.prototype.getDefaultStyle=function(){return this.options.style},T.prototype.setCellChecked=function(t,e,i){if("boolean"==typeof i){var o=this.getCellInfo(e),s=o.id,r=!1;if(0==o.internal&&"custom"==o.options.inputType){var a=this.dataList.getRealRowIndex(t);o=o.cellManagerHashByRowIndex[a]?o.cellManagerHashByRowIndex[a]:o,r=!0}if("checkbox"==o.options.inputType||"radio"==o.options.inputType){if("radio"==o.options.inputType&&0!=i){var n=!(!this.isDrillDown||!this._dataList.options.depthColumn),l=n?this.getTotalRow():this.getDataLength();if(this._linkedDataList)if(r);else for(var h=0;h<l;h++){a=this._linkedDataList.initialRowIndexArr[h];var d=n?a:this._dataList.getFilteredRowIndex(a);this._dataList.setCellData(d,s,o.options.falseValue)}else if(r);else for(d=0;d<l;d++)this._dataList.setCellData(d,s,o.options.falseValue);this.drawColumnData(e)}i=1==i?o.options.trueValue:o.options.falseValue,this._dataList.setCellData(t,s,i)}else{var u=WebSquare.language.getMessage("Grid_warning3")||"checkbox나 radio가 아닙니다.";alert(u)}}else{var c=WebSquare.language.getMessage("Grid_warning2")||"입력데이터가 옳바르지 않습니다. true/false boolean 타입으로 입력하세요";alert(c)}},T.prototype.getGridHTML=function(){alert("현재 구현중")},T.prototype.redrawColumn=function(t,e){try{var i=void 0===e||e;this.drawColumnData(t,i)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getDrawCount=function(){return this.getVisibleRowNum()},T.prototype.getVisibleRowNum=function(){return this.rowIndex>=0?this.lastIndex+1:0},T.prototype.getTopRowIndex=function(){return this.rowIndex},T.prototype.setTopRowIndex=function(t,e,i){var o=this.getElementById(this.id+"_scrollY_div");if(t<=0&&(t=0),
null!==this.lastTopRowIndex)t>this.lastTopRowIndex&&(t=parseInt(this.lastTopRowIndex+.5,10));else if(o.offsetHeight<o.scrollHeight){if(this.rowIndex<t){var s=this._getVisibleLastIndex(this.lastIndex+1);(t=t+s>this.getDataLength()?this.getDataLength()-s:t)>this.rowIndex+s-1&&(this.adjustDraw_keepTop=!0)}}else t=0;if(this.rowIndex!=t){if(this.delayedDraw({rowIndex:t}))return;this.scrollEvent=!1,this.checkScrollEnd=!e,i&&this.setFocusedCell2(0,0,!1),this.drawData(t),o.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t)}},T.prototype.getBottomRowIndex=function(){return this.rowIndex>=0?this.rowIndex+this.lastIndex:-1},T.prototype.setBottomRowIndex=function(t){this.drawBottomData(t)},T.prototype.getCellPosition=function(t,e,i){e=this.getColumnIndex(e),i=(i||"").toLowerCase();var o=this.data_td_list[e+t*this.oneRowDataLength];if(!o){var s=t-this.rowIndex;o=this.data_td_list[e+s*this.oneRowDataLength]}if(o){if("top"==i)return o.offsetTop;if("left"==i)return o.offsetLeft}return null},T.prototype.getCellSize=function(t,e,i){e=this.getColumnIndex(e),i=(i||"").toLowerCase();var o=t-this.rowIndex,s=this.data_td_list[e+o*this.oneRowDataLength];return"width"==i?s.clientWidth:"height"==i?s.clientHeight:null},T.prototype.getHeaderPosition=function(t,e){e=(e||"").toLowerCase();var i=this.getHeaderLayer(t);if("top"==e){var o=i.offsetTop;return this.options.groupbyZone&&(o+=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight),o}return"left"==e?i.offsetLeft:null},T.prototype.getHeaderSize=function(t,e){e=(e||"").toLowerCase();var i=this.getHeaderLayer(t);return"width"==e?i.clientWidth:"height"==e?i.clientHeight:null},T.prototype.setSummary=function(t){this.getElementById(this.id+"_body_table").setAttribute("summary",t)},T.prototype.setFooterSummary=function(t){this.hasFooter&&this.getElementById(this.id+"_foot_table").setAttribute("summary",t)},T.prototype.setCaption=function(t){var e=this.getElementById(this.id+"_body_table").getElementsByTagName("caption")[0];if(e)e.innerHTML=t;else{(e=document.createElement("caption")).innerHTML=t;var i=this.render.getElementsByTagName("colgroup")[0];i.parentNode.insertBefore(e,i)}var o=e.className;e.className=o&&""!=o?o+" setcaption":"setcaption"},T.prototype.setCaptionAuto=function(t){for(var e=this.getHeaderValueList(),i="",o="",s=0;s<e.length;s++)i.length>0&&(o=","),i=i+o+e[s];t&&(this.options.captionTitle=t),this.options.captionTitle?this.setCaption(this.options.captionTitle+WebSquare.language.getMessage("Grid_caption2")+i+WebSquare.language.getMessage("Grid_caption")):this.setCaption(i+WebSquare.language.getMessage("Grid_caption"))},T.prototype.setFooterCaption=function(t){if(this.hasFooter){var e=this.getElementById(this.id+"_foot_table"),i=e.getElementsByTagName("caption")[0];if(i)i.innerHTML=t;else{(i=document.createElement("caption")).innerHTML=t;var o=e.getElementsByTagName("colgroup")[0];o.parentNode.insertBefore(i,o)}}},T.prototype.groupby=function(t){try{this.hideCustomFilterList(),this._clearMergeCellBackground(),this.clearSearchData({clearValue:!0});var e="string"==typeof t.sortIndex?t.sortIndex.split(" "):t.sortIndex,i="string"==typeof t.sortOrder?t.sortOrder.split(" "):t.sortOrder,s=e.length;if(-1!=this.options.groupbyMaxCount&&this.options.groupbyMaxCount<s)return void c.k.printLog("groupby max column count has been exceeded.["+this.id+"]");for(var n=0;n<s;n++){var h=parseInt(e[n],10);e[n]=isNaN(h)?this.getColumnIndex(e[n]):h}if(!(t=t||{}).filter&&!this.groupbyStatus.grouped&&this.options.customFilterBox&&this.groupbyFilterBox_history&&this.groupbyFilterBox_history.length>0&&!0===this.getElementById(this.id+"_groupbyFilterBox_apply").checked){var d=this.groupbyFilterBox_history[this.groupbyFilterBox_select.getSelectedIndex()];if(!d.groupbyOptions&&d.customFilterListFilterInfo){t.filter=JSON.parse(d.customFilterListFilterInfo,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.Z)(i)&&i.constructor===RegExp?i:"object"===(0,
l.Z)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}}));var u=e.length-1,p=!1;for(var g in t.filter){var m=!1;for(n=u;n>=0;n--)if(this.tdIdList[e[n]]===g){m=!0;break}m||(e.push(this.bodyIdColIndexMap[g]),i.push(i[i.length-1]),p=!0)}p&&(t.sortIndexArr=e,t.sortOrderArr=i),this.groupbyFilterList||this.createGroupbyFilterList({noDraw:!0}),this.groupbyStatus.filter=t.filter,this._dataList.sortStatusInfo={},this._dataList.sortStatusArr=[],s=e.length}}this.removeFocusedCell(),this._dataList.clearFilter(!0),this.clearHeaderSort(),this.headerSortStatusArr=[],this.groupbyStatus.groupbyOptions=JSON.stringify(t,(function(t,e){return"function"==typeof e||"object"===(0,l.Z)(e)&&e.constructor===RegExp?e.toString():e}));var f={};if(t.filter){var b="",y="";for(var g in t.filter){var v,w=t.filter[g];b=',"'+g+'"'+b,y=",["+this._dataList.filteredRowIndexArr.join(",")+"]"+y,"func"===w.type?(w.noRefresh=!0,w.noRefreshAfter=!0,f[this.bodyToHeaderRelation[w.colIndex]]=!0,this.dataList.setColumnFilter(w)):(w.constructor===/a/.constructor?v=w:t.filterRegExp&&t.filterRegExp[g]&&t.filterRegExp[g].constructor===/a/.constructor?v=t.filterRegExp[g]:"object"===(0,l.Z)(w)&&(w=0==w.length?"/^[a-z0-9_-]{3,16}$/":"^"+w.join("$|^")+"$",v=new RegExp(w,"gi")),v&&this.dataList.setColumnFilter({type:"regExp",colIndex:g,key:v,condition:"and",noRefresh:!0,noRefreshAfter:!0}))}if(this.groupbyFilterList){var S='{"column":['+(b=b.slice(1)+"],")+'"filteredRowIndexArr":['+(y=y.slice(1)+"]}");if(this.groupbyFilterList.filterHistory=JSON.parse(S),this.getRowCount()<=0)for(;this.groupbyFilterList.filterHistory.filteredRowIndexArr.length>0&&this.groupbyFilterList.filterHistory.filteredRowIndexArr[0].length<=0;)this.groupbyFilterList.filterHistory.column.shift(),this.groupbyFilterList.filterHistory.filteredRowIndexArr.shift()}t.noRefreshAfter||this._dataList.broadcast({gridView:["notifyAfterSettedColumnFilter"]})}if(t.sortOrder&&t.sortIndex){var C=o.x.extend({},t);C.noRefresh=!0,C.sortIndex=[];for(n=0;n<e.length;n++)C.sortIndex.push(this.getColumnID(e[n]));this.dataList.multisort(C)}this.groupbyInfo={},this.statusArr=[];var x=this._linkedDataList?this._linkedDataList.filteredRowIndexArr:this._dataList.filteredRowIndexArr,_=[],I=[],T=0,k=[],D=[];for(var L in this.groupbyStatus.groupedRowIndexArr=[],this.groupbyStatus.groupbyRowIndexArr=x.slice(),this.groupbyStatus.groupbyDepthDelimiter="||",this.customFilterStatusObj={},f)this.customFilterStatusObj[L]=!0;this.groupbyStatus.grouped=!0,this.groupbyStatus.filter=t.filter||{},this.groupbyStatus.sortIndexArr=e,this.groupbyStatus.sortOrderArr=i,this.groupbyStatus.headerValueObj={},this.groupbyStatus.footerValueObj={},t.keepDisplayOptions||(this.groupbyDisplayOptions={},this.groupbyDisplayOptions.rowNumHeader=t.rowNumHeader||{},this.groupbyDisplayOptions.rowStatusHeader=t.rowStatusHeader||{},this.groupbyDisplayOptions.groupbyHeader=t.groupbyHeader||[],this.groupbyDisplayOptions.rowNumFooter=t.rowNumFooter||{},this.groupbyDisplayOptions.rowStatusFooter=t.rowStatusFooter||{},this.groupbyDisplayOptions.groupbyFooter=t.groupbyFooter||[],this.groupbyDisplayOptions.closeGroup=t.closeGroup||!1,this.groupbyDisplayOptions.hideHeader=t.hideHeader||!1,this.groupbyDisplayOptions.hideFooter=t.hideFooter||!1);for(n=0;n<x.length;n++){k=D,D=[];for(var W=x[n],A=W*this._dataList.cellIdList.length,E=0;E<s;E++){var M=this.tdIdList[e[E]],q=this.cellInfoHash[M];q&&"expression"==q.options.inputType?D[E]=q.getExpressionValue(W):D[E]=this._dataList.dataArr[A+this._dataList.bodyIdColIndexMap[M]]||""}if(n>0){var R=!1,N=[];for(E=0;E<s;E++)if(R||k[E]!==D[E]){var F=k.slice(0,E+1).join(this.groupbyStatus.groupbyDepthDelimiter);R=!0;var O={type:"footer",groupId:F,depth:E,status:"open",index:""};this.groupbyInfo[F]=this.groupbyInfo[F]?this.groupbyInfo[F]:{},this.groupbyInfo[F].footer=O,N.push(O)}for(E=N.length-1;E>=0;E--)N[E].index=_.length,this.groupbyDisplayOptions.hideFooter||(_.push(N[E]),I.push("footer"))}
var B=!1;for(E=0;E<s;E++)if(B||0==n||k[E]!==D[E]){F=D.slice(0,E+1).join(this.groupbyStatus.groupbyDepthDelimiter);B=!0;O={type:"header",groupId:F,depth:E,status:"open",index:_.length};this.groupbyInfo[F]={header:O},this.groupbyDisplayOptions.hideHeader||(_.push(O),I.push("header"))}_.push(x[n]),I.push(T++)}if(I.length>0)for(n=s-1;n>=0;n--){O={type:"footer",groupId:F=D.slice(0,n+1).join(this.groupbyStatus.groupbyDepthDelimiter),depth:n,status:"open",index:_.length};this.groupbyInfo[F]=this.groupbyInfo[F]?this.groupbyInfo[F]:{},this.groupbyInfo[F].footer=O,this.groupbyDisplayOptions.hideFooter||(_.push(O),I.push("footer"))}if(this.groupbyStatus.groupedRowIndexArr=_,this.rowNumArr=I,this.options.foldAll)for(var F in this.groupbyInfo){"open"==(H=this.groupbyInfo[F].header).status&&0==H.depth&&this._foldRow(H)}else if(this.groupbyDisplayOptions.closeGroup&&I.length>0)for(var V in this.groupbyInfo){var H;s==(H=this.groupbyInfo[V].header).groupId.split(this.groupbyStatus.groupbyDepthDelimiter).length&&"number"!=typeof H&&this.groupbyStatus.groupedRowIndexArr[H.index]==H&&this._foldRow(H)}this.lastTopRowIndex=null,this.rowIndex=0,this.setScrollYHeight(),t.sortOrder&&t.sortIndex?(this._dataList.broadcast({gridView:["notifyMultisort"]}),this._dataList.broadcast({gridView:["notifySettedFilter",[{isSort:!0,keepTop:t.keepTop}]],generalComp:"both"})):this.notifyDataChanged(),this.options.groupbyZoneMessage&&this.hideGroupbyZoneMessage(),this.options.groupbyZone&&this.syncWithGroupbyZone();var P=e.length;if(this.groupbyStatus.beforeSortIndexLength=P,a.D.isIE("8")&&this.drawData(0,null,"async"),this.groupbyStatus.grouped){var j=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));for(n=0;n<j.length;n++){var z=j[n],G=z.getAttribute("id");!G||G.match("RowNumber")||G.match("RowStatus")||"true"==z.getAttribute("useFilter")&&(document.getElementById(G+"_filter").style.display="none")}}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.clearGroupby=function(){try{this.clearGrouping=!0,this.groupbyStatus={},this.groupbyZoneStatus.beforeOpenedColIndex=null,this.groupbyZoneStatus.beforeOpenedColTagName=null,this.groupbyZoneStatus.clickedHeaderInfo=null,this.groupbyDisplayOptions=null,this.rowIndex=0,this.dataList.clearFilter(),this.clearHeaderSort(),this.clearGroupbyZone(),a.D.isIE("8"),this.options.groupbyZoneMessage&&this.showGroupbyZoneMessage(),this.groupbyFilterList&&this.hideGroupbyFilterList();var t=this.getDataLength();if(t<this.rowIndex+this.drawedRowLength)for(var e=t-this.rowIndex;e<this.drawedRowLength;e++)this.clearGroupedRow(e,e+this.rowIndex);this.clearGrouping=!1;var i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));for(e=0;e<i.length;e++){var o=i[e],s=o.getAttribute("id");!s||s.match("RowNumber")||s.match("RowStatus")||"true"==o.getAttribute("useFilter")&&(document.getElementById(s+"_filter").style.display="")}if(this.options.customFilterBox&&this.groupbyFilterBox_history&&this.groupbyFilterBox_history.length>0&&!0===this.getElementById(this.id+"_groupbyFilterBox_apply").checked){var n=this.groupbyFilterBox_select.getSelectedIndex();this.groupbyFilterBox_history[n].groupbyOptions&&(this.notifyBeforeSettedColumnFilter(),this.refreshCustomFilterHistory(n),this.notifyAfterSettedColumnFilter())}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.toggleGroup=function(t){if(this.groupbyInfo[t]){var e=this.groupbyInfo[t].header;"number"!=typeof e&&this.dataList.getRealRowIndex(e.index)==e&&("open"==e.status?this._foldRow(e):this._unfoldRow(e),this.lastTopRowIndex=null,this.setScrollYHeight(),"open"==e.status?this.notifyRowInserted(e.index):this.notifyRowChanged(e.index),this.removeFocusedCell(),this.drawFooter())}},T.prototype._foldRow=function(t){if("open"==t.status){if(t.status="closed",this.groupbyDisplayOptions.hideFooter){for(var e,i=t.index+1;i<this.rowNumArr.length&&!("header"==this.rowNumArr[i]&&this.groupbyStatus.groupedRowIndexArr[i].depth<=t.depth);i++)e=i
;t.closedChildArr=this.groupbyStatus.groupedRowIndexArr.splice(t.index+1,e-t.index)}else{var o=this.groupbyInfo[t.groupId].footer;t.closedChildArr=this.groupbyStatus.groupedRowIndexArr.splice(t.index+1,o.index-t.index-1)}var s=[],r=t.closedChildArr.slice(0).sort();for(i=0;i<this.groupbyStatus.groupbyRowIndexArr.length;i++){for(var a=!1,n=0,l=r.length-1,h=0,d=this.groupbyStatus.groupbyRowIndexArr[i];n<=l;){if(d==r[h=Math.floor((n+l)/2)]){a=!0;break}d<r[h]?l=h-1:n=h+1}a||s.push(this.groupbyStatus.groupbyRowIndexArr[i])}this.groupbyStatus.groupbyRowIndexArr=s;var u=this.groupbyStatus.groupedRowIndexArr.length,c=0;this.rowNumArr=[];for(i=0;i<u;i++)"number"==typeof this.groupbyStatus.groupedRowIndexArr[i]?this.rowNumArr.push(c++):(this.groupbyInfo[this.groupbyStatus.groupedRowIndexArr[i].groupId][this.groupbyStatus.groupedRowIndexArr[i].type].index=this.rowNumArr.length,this.rowNumArr.push(this.groupbyStatus.groupedRowIndexArr[i].type))}},T.prototype._unfoldRow=function(t){if("closed"==t.status){t.status="open",t.closedChildArr.unshift(t.index+1,0),[].splice.apply(this.groupbyStatus.groupedRowIndexArr,t.closedChildArr),t.closedChildArr=[];var e=0;this.rowNumArr=[],this.groupbyStatus.groupbyRowIndexArr=[];for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++)"number"==typeof this.groupbyStatus.groupedRowIndexArr[i]?(this.rowNumArr.push(e++),this.groupbyStatus.groupbyRowIndexArr.push(this.groupbyStatus.groupedRowIndexArr[i])):(this.groupbyInfo[this.groupbyStatus.groupedRowIndexArr[i].groupId][this.groupbyStatus.groupedRowIndexArr[i].type].index=this.rowNumArr.length,this.rowNumArr.push(this.groupbyStatus.groupedRowIndexArr[i].type))}},T.prototype.foldAll=function(){for(var t in this.groupbyInfo){var e=this.groupbyInfo[t].header;"open"==e.status&&0==e.depth&&this._foldRow(e)}this.lastTopRowIndex=null,this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),this.drawFooter(),this.drawHeader()},T.prototype.unfoldAll=function(){for(var t=0;t<this.groupbyStatus.groupedRowIndexArr.length;t++){var e=this.groupbyStatus.groupedRowIndexArr[t];"number"!=typeof e&&"header"==e.type&&"closed"==e.status&&this._unfoldRow(e)}this.lastTopRowIndex=null,this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),this.drawFooter(),this.drawHeader()},T.prototype.drawGroupData=function(t,e,i){var o,s,r,a=t,n=i*this.realRowDataLength,h=this.realRowDataLength;if("header"==e.type)o=this.groupbyDisplayOptions.rowNumHeader,s=this.groupbyDisplayOptions.rowStatusHeader,r=this.groupbyDisplayOptions.groupbyHeader;else{if("footer"!=e.type)return void(t.innerHTML="");o=this.groupbyDisplayOptions.rowNumFooter,s=this.groupbyDisplayOptions.rowStatusFooter,r=this.groupbyDisplayOptions.groupbyFooter}this.options.rowNumVisible&&(this._drawGroupData(a,e,o),o.hidden||(h-=o.colSpan||1),n++,a=this.all_data_td_list[n]),this.options.rowStatusVisible&&(this._drawGroupData(a,e,s),s.hidden||(h-=s.colSpan||1),n++,a=this.all_data_td_list[n]);for(var d={},u=0;u<h;u++)if(!d["domIndex_"+n]){n++;var c={};if(r instanceof Array?c=r[u]||{}:r instanceof Object&&"object"==(0,l.Z)(r)&&(c=r["depth_"+e.depth][u]||{}),Number(c.targetIndex)>-1){var p=i*this.realRowDataLength+c.targetIndex;d["domIndex_"+p]=!0,this._drawGroupData(this.all_data_td_list[p],e,c)}else this._drawGroupData(a,e,c);a=this.all_data_td_list[n]}},T.prototype._drawGroupData=function(t,e,i){try{var o=i.className||"",s="gridBodyDefault w2grid_groupby w2grid_groupby_depth_"+e.depth+" "+o;t.className=s,t.innerHTML="";var a,n=i.colSpan,l=i.value||"",h=i.inputType||"",d=i.depthVisible||!1,u=i.align||"",c=i.expression||"",p=(n=i.colSpan||1,i.hidden?"none":""),g=i.displayFormatType||"text",m=i.displayFormat||"",f=i.displayFormatter||null;if(t.setAttribute("colSpan",n),t.style.align="",t.style.textAlign="",t.style.display=p,t.style.borderTopWidth="1px",t.style.borderBottomWidth="1px",
h)switch((m||f)&&(a=new WebSquare.format.createFormatter(g,m,f,null,null,null,this.scope_id,this.id)),h){case"toggleButton":var b="<span class='"+("open"==e.status?"w2grid_minus":"w2grid_plus")+"' style='display:inline-block;"+(u?"float:"+u+";":"")+" margin-left:"+20*e.depth+"px;'></span>";t.innerHTML+=b;break;case"expression":if(c){var y=this.groupbyInfo[e.groupId].header;y.colID=t.getAttribute("col_id");var v=0;if("open"==y.status){for(var w,S=!0,C=0,x=y.index;x<this.groupbyStatus.groupedRowIndexArr.length;x++){var _=this.groupbyStatus.groupedRowIndexArr[x];if(this.groupbyDisplayOptions.hideFooter&&S){S=!1;for(var I=x+1;I<this.groupbyStatus.groupedRowIndexArr.length;I++){var T=this.groupbyStatus.groupedRowIndexArr[I];if("header"==T.type&&_.depth>=T.depth)break;C=I}}if(this.groupbyDisplayOptions.hideFooter){if(x>=C){w=x;break}}else if("footer"==_.type&&_.depth==y.depth){w=_.index;break}}v=this.groupExpression(this.groupbyStatus.groupedRowIndexArr,y.index,w,c,y)}else v=this.groupExpression(y.closedChildArr,0,y.closedChildArr.length-1,c,y);a&&(v=a.format(v));var k="<span style='display:inline-block;"+(u?"float:"+u+";":"")+"''>"+v+"</span>";t.innerHTML+=k}}if(d){var D="";"toggleButton"!=h&&(D="margin-left: "+20*e.depth+"px"),t.innerHTML+="<span style='display:inline-block;"+(u?"float:"+u+";":"")+" "+(D||"")+"'>"+e.groupId.wq_replaceAll(this.groupbyStatus.groupbyDepthDelimiter," - ")+"</span>"}l&&(a&&(l=a.format(l)),t.innerHTML+="<span style='display:inline-block;"+(u?"float:"+u+";":"")+"'>"+l+"</span>")}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.groupExpression=function(t,e,i,o,s){try{var a=o;return a=(a=(a=(a=(a=(a=(a=(a=a.replace(/[sS][uU][mM][\s]*[(]/g,"_this.groupbySum(arr, startIndex, endIndex,")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.groupbyAvg(arr, startIndex, endIndex,")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.groupbyMax(arr, startIndex, endIndex,")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.groupbyMin(arr, startIndex, endIndex,")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"_this.groupbyCount(arr, startIndex, endIndex,")).replace(/[dD][eE][pP][tT][hH][\s]*[(]/g,"_this.groupbyDepth(header")).replace(/[tT][oO][gG][gG][lL][eE][\s]*[(]/g,"_this.groupbyToggle(header")).replace(/[dD][eE][pP][tT][hH][sS][tT][rR][\s]*[(]/g,"_this.groupbyDepthStr(header"),a=new Function("_this","arr","startIndex","endIndex","expression","header","return "+a)(this,t,e,i,o,s)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.groupbySum=function(t,e,i,o){for(var s=this.getColumnIndex(o),r=0,a=e;a<=i;a++)"number"==typeof t[a]?r+=parseFloat(this.dataList._getCellData(t[a],this.getColumnID(s),3))||0:"header"==t[a].type&&"closed"==t[a].status&&(r+=this.groupbySum(t[a].closedChildArr,0,t[a].closedChildArr.length-1,o));return r},T.prototype.groupbyAvg=function(t,e,i,o){var s=this._groupbyAvg(t,e,i,o);return s.sum/s.number},T.prototype._groupbyAvg=function(t,e,i,o){for(var s=this.getColumnIndex(o),r={sum:0,number:0},a=e;a<=i;a++)if("number"==typeof t[a])r.sum+=parseFloat(this.dataList._getCellData(t[a],this.getColumnID(s),3))||0,r.number++;else if("header"==t[a].type&&"closed"==t[a].status){var n=this._groupbyAvg(t[a].closedChildArr,0,t[a].closedChildArr.length-1,o);r.sum+=n.sum,r.number+=n.number}return r},T.prototype.groupbyMax=function(t,e,i,o){for(var s=this.getColumnIndex(o),r=0,a=0,n=!1,l=e;l<=i;l++)"number"==typeof t[l]?r=parseFloat(this.dataList._getCellData(t[l],this.getColumnID(s),3))||0:"header"==t[l].type&&"closed"==t[l].status&&(r=this.groupbyMax(t[l].closedChildArr,0,t[l].closedChildArr.length-1,o)),n||(a=n=r),n&&a<r&&(a=r);return a},T.prototype.groupbyMin=function(t,e,i,o){for(var s,r=this.getColumnIndex(o),a=0,n=!1,l=e;l<=i;l++)"number"==typeof t[l]?a=parseFloat(this.dataList._getCellData(t[l],this.getColumnID(r),3))||0:"header"==t[l].type&&"closed"==t[l].status&&(a=this.groupbyMin(t[l].closedChildArr,0,t[l].closedChildArr.length-1,o)),n||(s=n=a),n&&s>a&&(s=a);return s},T.prototype.groupbyToggle=function(t){
return"<span class='"+("open"==t.status?"w2grid_minus":"w2grid_plus")+"' style='display:inline-block; margin-left:"+20*t.depth+"px;'></span>"},T.prototype.groupbyDepth=function(t){return t.depth},T.prototype.groupbyDepthStr=function(t){for(var e=t.groupId.wq_replaceAll(this.groupbyStatus.groupbyDepthDelimiter," - "),i=!1,o=e.split(" - "),s=0;s<this.groupbyStatus.sortIndexArr.length;s++){var r=this.getCellInfo(this.groupbyStatus.sortIndexArr[s]);if("true"==r.options.groupbyDepthStrLabel)try{i=!0;var n=o[s];if(r.dataComp){var l=a.D.getComponentById(r.dataComp,r.scope_id);if(l){var h,d;r.itemsetObj&&(h=r.itemsetObj.label||"label",d=r.itemsetObj.value||"value"),r.element&&(h=r.element.getValue("w2:label","ref"),d=r.element.getValue("w2:value","ref"));for(var u=l.getAllJSON(),c=0;c<u.length;c++){var p=u[c];if(n==p[d]){o[s]=p[h];break}}}}else for(c=0;c<r.itemArr.length;c++)if(n==r.itemArr[c].value){o[s]=r.itemArr[c].label;break}}catch(t){break}}return i&&(e=o.join(" - ")),e},T.prototype.groupbyCount=function(t,e,i){for(var o=0,s=e;s<=i&&s<t.length;s++)"number"==typeof t[s]?o++:"header"!=t[s].type||"closed"!=t[s].status||this.groupbyDisplayOptions.hideFooter||(o+=this.groupbyCount(t[s].closedChildArr,0,t[s].closedChildArr.length-1));return o},T.prototype.getCellInputType=function(t,e){try{var i=this.getCellInfo(e);if("custom"==i.options.inputType){var o=this.getRealRowIndex(t);return i.cellManagerHashByRowIndex[o].options.inputType}return i.options.inputType}catch(t){r.w.printStackTrace(t)}},T.prototype.setCellOption=function(t,e,i,o){var s=this.getColumnIndex(e),r=this.getExtraDataObj("cell",t,s);switch(i){case"viewType":r.key=o,this.rowIndex>=0&&this.drawCellData(t-this.rowIndex,t,s);break;default:var a=WebSquare.language.getMessage("Grid_warning4",this.id,i)||"["+this.id+"] "+i+"에 대한 변경은 처리할 수 없습니다.";$l(a)}},T.prototype.getCellOption=function(t,e,i){var o=this.getColumnIndex(e),s=this.getCellInfo(e);if("custom"!=s.options.inputType){var r=this.getExtraDataObj("cell",t,o);return null==r.key?s.options[i]:r.key}var a=s.cellManagerHashByRowIndex[t];if(a)return a.options[i]},T.prototype.getCustomCellOptions=function(t,e){try{var i=this.getCellInfo(e),o={};if("custom"==i.options.inputType){var s=this.getRealRowIndex(t),a=i.cellManagerHashByRowIndex[s];for(var n in a.initializeInfo)"id"!=n&&"displayRowIndex"!=n&&"realRowIndex"!=n&&(o[n]=a.initializeInfo[n])}return o}catch(t){r.w.printStackTrace(t)}},T.prototype.ungroupColumn=function(t){try{if(this.groupbyStatus.grouped){var e;"string"==typeof t?e=this.getColumnIndex(t):"number"==typeof t&&(e=t);for(var i=!0,o=this.groupbyStatus.sortIndexArr.length-1;o>=0;o--)if(this.groupbyStatus.sortIndexArr[o]==e){this.groupbyStatus.sortIndexArr.splice(o,1),this.groupbyStatus.sortOrderArr.splice(o,1),delete this.groupbyStatus.filter[this.getColumnID(e)],i=!1;break}if(i)return;if(this.groupbyFilterList&&this.groupbyFilterList.filterHistory.column.length>0)if(this.groupbyFilterList.filterHistory.column[0]===this.getColumnID(e))this.groupbyFilterList.filterHistory.column.shift(),this.groupbyFilterList.filterHistory.filteredRowIndexArr.shift();else{var s=this.groupbyFilterList.filterHistory.column.length,a=this.groupbyFilterList.filterHistory.filteredRowIndexArr[s-1].slice(0),n=0;for(o=0;o<s;o++)if(this.groupbyFilterList.filterHistory.column[o]===this.getColumnID(e)){this.groupbyFilterList.filterHistory.column.splice(o,1),this.groupbyFilterList.filterHistory.filteredRowIndexArr.splice(o,1),n=1;break}for(o=0;o<s-n;o++)this.groupbyFilterList.filterHistory.filteredRowIndexArr[o]=a}if(this.clearSearchData({clearValue:!0}),0==this.groupbyStatus.sortIndexArr.length)this.clearGroupby();else{var l=this.groupbyDisplayOptions;l.filter=this.groupbyStatus.filter,l.sortIndex=this.groupbyStatus.sortIndexArr,l.sortOrder=this.groupbyStatus.sortOrderArr,this.groupby(l)}}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.changeGroupDepth=function(t,e){try{if(this.groupbyStatus.grouped){var i,o,s,a
;"string"==typeof t?i=this.getColumnIndex(t):"number"==typeof t&&(i=t),"string"==typeof e?o=this.getColumnIndex(e):"number"==typeof e&&(o=e);for(var n=0;n<this.groupbyStatus.sortIndexArr.length;n++)this.groupbyStatus.sortIndexArr[n]==i&&(a=n),this.groupbyStatus.sortIndexArr[n]==o&&(s=n);if("number"!=typeof a||"number"!=typeof s||a==s)return;this.groupbyStatus.sortIndexArr.splice(a,1),this.groupbyStatus.sortIndexArr.splice(s,0,i);var l=this.groupbyStatus.sortOrderArr.splice(a,1);this.groupbyStatus.sortOrderArr.splice(s,0,l);var h=this.groupbyDisplayOptions;h.filter=this.groupbyStatus.filter,h.sortIndex=this.groupbyStatus.sortIndexArr,h.sortOrder=this.groupbyStatus.sortOrderArr,this.groupby(h)}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.removeGroupbyFilterList=function(){try{this.groupbyFilterList&&this.groupbyFilterList.remove()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._getGroupbyDisplayRowIndex=function(t,e){try{return this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped?this.__getGroupbyDisplayRowIndex(t,e):t}catch(e){return r.w.printStackTrace(e,null,this),t}},T.prototype.__getGroupbyDisplayRowIndex=function(t,e){try{if(!this.groupbyStatus.grouped)return t;var i=this._dataList.getFilteredRowIndex(this.getRealRowIndex(t));return null==i&&!0!==e&&(i=t),i}catch(e){return r.w.printStackTrace(e,null,this),t}},T.prototype._getGroupbyGroupedRowIndex=function(t,e){try{return this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped?this.__getGroupbyGroupedRowIndex(t,e):t}catch(e){return r.w.printStackTrace(e,null,this),t}},T.prototype.__getGroupbyGroupedRowIndex=function(t,e){try{if(!this.groupbyStatus.grouped)return t;for(var i,o=this._dataList.getRealRowIndex(t),s=0;s<this.groupbyStatus.groupedRowIndexArr.length;s++)if(o===this.groupbyStatus.groupedRowIndexArr[s]){i=s;break}return null==i&&!0!==e&&(i=t),i}catch(e){return r.w.printStackTrace(e,null,this),t}},T.prototype.isEditing=function(){try{return!!this.editedCell}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.readExcelFile=function(t,e,i,o,s,r,a,n){this.readFile(t,e,i,o,s,"excel",null,r,a,n)},T.prototype.readFile=function(t,e,i,o,s,r,a,n,l,h){o=void 0===o||"string"!=typeof o?this.options.excelUploadPopupURL:this.getURL(o),void 0!==s&&"string"==typeof s||(s="top=280,height=80,left=160,width=400,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no"),o+=1==(t=parseInt(t,10))?"?header=true":"?header=false",o+=1==(e=parseInt(e,10))?"&append=true":"&append=false",o+=1==n?"&fillHidden=true":"&fillHidden=false",o+=1==(i=parseInt(i,10))?"&hidden=true":"&hidden=false",o+=1==(h=h||0)?"&type=true":"&type=false",a&&(o+="&"+a),o+="&action="+this.options.excelUploadURL,o+="&gridID="+this.id;for(var d=[],u=this.defaultColCnt;u<this.hiddenList.length;u++)1==this.hiddenList[u]&&d.push(u-this.defaultColCnt);o+="&columnNum="+this.getTotalCol(),o+="&expressionColumns="+this.getExpressionColumnArr().join(","),o+="&hiddenColumns="+d.join(","),o+="&headerRows="+this.getElementById(this.id+"_head_table").rows.length,o+=l?"&gridStartRow="+l:"&gridStartRow=1",WebSquare.domain&&(o+="&domain="+WebSquare.text.URLEncoder(WebSquare.domain)),window.open(o,"fileupWindow",s)},T.prototype.getExpressionColumnArr=function(t){var e,i=[];e=t&&"1"==t.ignoreSpan?this.getColCnt():this.getTotalCol();for(var o=0;o<e;o++)"expression"==this.getCellInfo(o).options.inputType?i.push("true"):i.push("false");return i},T.prototype.saveExcelFile=function(t,e,i,o,s,r,a,n){var l={};l.fileName=t,l.hidden=e,l.checkButton=i,l.type=o,l.hiddenExpand=s,l.saveList=r,l.useEuroLocale=a,l.httpReadOnly=n,this.saveExcel(l)},T.prototype.saveExcel=function(t){var e=t.processMsg;e&&e.length>0?WebSquare.layer.showProcessMessage(e,{scope:this.scope_id||""}):WebSquare.layer.showProcessMessage("download...",{scope:this.scope_id||""})
;for(var i=t.fileName||"default",o=t.hidden||0,r=t.checkButton||0,a=t.type+""||"0",n=t.hiddenExpand||0,l=t.saveList||[],h=t.useEuroLocale||"false",d=t.password||"",u=new I.h.Hashtable,c=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],p=WebSquare.Elem.api.getElementsByTagName(c,"w2:column"),g=0;g<p.length;g++){var m=p[g],f=m.getAttribute("id");m.setAttribute("value",this.getHeaderValue(f))}if(u.put("style",WebSquare.xml.serialize(this.element._element)),"0"==a||""==a)u.put("data",this.getExcelAllXML()),u.put("footer_data",this.getExcelAllFooterXML());else if("2"==a){var b=this.getExcelAllXMLRaw();u.put("data",b),u.put("footer_data",this.getExcelAllFooterXMLRaw())}else{b=this.getExcelAllXMLDisplay(a);u.put("data",b),u.put("footer_data",this.getExcelAllFooterXMLDisplay())}var y=[];for(g=0;g<this.getTotalCol();g++){var v=this.getCellInfo(g).options.inputType;"checkbox"!=v&&"radio"!=v&&"button"!=v||y.push('"'+g+'"')}u.put("hiddenArr",this.getHiddenColumnArr()),u.put("fileName",i),u.put("hidden",o),u.put("checkButton",r),u.put("type",a),u.put("rowNumVisible",this.options.rowNumVisible+"");var w=this.options.rowNumHeaderValue||"";if(this.options.useLocale&&this.options.rowNumLocaleRef){var S=this.getLocaleValue(this.options.rowNumLocaleRef);S&&(w=S)}u.put("rowNumHeaderValue",w),u.put("hiddenExpand",n),u.put("checkButtonArr","<array><![CDATA[["+y.join(",")+"]]]></array>"),u.put("saveList",'<array><![CDATA[["'+l.join('","')+'"]]]></array>'),u.put("useEuroLocale",h),u.put("password",d),t.scopeId=this.scope_id||"",s.v.excelDownload(this.options.excelDownloadURL,u.toString(),"post",t)},T.prototype.saveExcelFile2=function(t,e,i,o,s,r){var a={};if(a.fileName=t,a.type=o,e+""=="0"){for(var n=[],l=this.defaultColCnt;l<this.hiddenList.length;l++)this.hiddenList[l]&&n.push(l-this.defaultColCnt);a.removeColumns=n.join(",")}var h=[];if(i+""=="0")for(l=0;l<this.getTotalCol();l++){var d=this.getCellInfo(l).options.inputType;"checkbox"!=d&&"radio"!=d&&"button"!=d||h.push(this.getCellInfo(l).options.colIndex-this.defaultColCnt)}for(l=this.defaultColCnt;l<this.hiddenList.length;l++)e+""=="1"&&s+""=="0"&&1==this.hiddenList[l]&&h.push(l-this.defaultColCnt);a.foldColumns=h.join(","),this.advancedExcelDownload(a)},T.prototype.getHiddenColumnArr=function(){for(var t=[],e=this.defaultColCnt;e<this.hiddenList.length;e++)t.push(this.hiddenList[e]);return'<array><![CDATA[["'+t.join('","')+'"]]]></array>'},T.prototype.fireFileReadEnd=function(t){var e=this;setTimeout((function(){u.B.fireEvent(e,"onfilereadend",t)}),10)},T.prototype.readCSV=function(t){var e={};t=t||{};e.wframe=t.wframe||!1;var i=t.type||"1",s=t.delim||",",r=t.escapeChar||"",n=t.header||"1",h=t.footer||"1",d=t.startRowIndex||"0",u=t.startColumnIndex||"0",c=t.append||"0",p=t.hidden||"0",g=t.advancedHidden||"0",m=t.fillHidden||"0",f=t.skipSpace||"0",b=t.removeColumns||"",y=t.optionParam||"",v=document.location.protocol+"//"+document.location.host+"/",w=t.popupUrl?v+t.popupUrl:o.x.baseURI+WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/csvfileUpload.js"),S=t.popupUrl||this.options.csvUploadPopupURL;S+="?";var C,x=t.processMsg||"",_="";if(e.name=t.name||"FILE UPLOAD",this.options.dataList){var I=this.modelControl.getDataComp(this.options.dataList);null!=I&&(_=I.id)}var T=t.status||"R",k=t.expression||"1",D=t.ignoreSpan||"0",L=t.maxFileSize||-1,W=t.csvUploadURL||"",A=1==this.options.postMsg?this.options.postMsg:t.postMsg||"false",E=t.columnOrder||"",M=t.useModalDisable||"false",q=1==this.options.useXHR?this.options.useXHR:t.useXHR||"false";if(e.className=t.className||"",e.resizable=0!=t.resizable||t.resizable,e.windowDragMove=t.windowDragMove||!1,void 0===t.features||"string"!=typeof t.features)C="top=280,height=137,left=160,width=446,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no";else if(1==t.wframe){
for(var R=t.features.split(","),N={},F=0;F<R.length;F++)0!=R[F].toLowerCase().indexOf("top")?0!=R[F].toLowerCase().indexOf("left")?0!=R[F].toLowerCase().indexOf("height")?0!=R[F].toLowerCase().indexOf("width")||(N.width=parseInt(R[F].split("=")[1])):N.height=parseInt(R[F].split("=")[1]):N.left=parseInt(R[F].split("=")[1]):N.top=parseInt(R[F].split("=")[1]);C=N}else C=t.features;e.sFeatures=C,n=parseInt(n,10),c=parseInt(c,10),p=parseInt(p,10),i=i||0,e.type=1==i?"true":"false",e.uploadType=i,e.delim=s,e.escapeChar=r,e.header=1==n?"true":"false",e.footer=1==h?"true":"false",e.append=1==c?"true":"false",e.hidden=1==p?"true":"false",1==g?(S+="&advancedHidden=true",e.advancedHidden="true"):(S+="&advancedHidden=false",e.advancedHidden="false"),e.fillHidden=1==m?"true":"false",e.skipSpace=1==f?"true":"false",e.removeColumns=b,e.optionParam=y,S+="&gridID="+this.id,e.gridID=this.id;var O=[];for(F=this.defaultColCnt;F<this.hiddenList.length;F++)1==this.hiddenList[F]&&O.push(F-this.defaultColCnt);var B,V=this.getExpressionColumnArr(t);if(e.expressionColumns=V.join(","),e.columnNum=V.length,e.hiddenColumns=O.join(","),e.headerRows=this.getElementById(this.id+"_head_table").rows.length,e.gridStartRow=d||"1",e.gridStartCol=u||"1",WebSquare.domain?(S+="&domain="+WebSquare.text.URLEncoder(WebSquare.domain),e.domain=WebSquare.text.URLEncoder(WebSquare.domain)):e.domain="",""==W&&(W=this.options.csvUploadURL),e.action=W,e.processMsg=WebSquare.text.BASE64URLEncoder(x),e.dataList=_,1==D){var H=[],P={},j=0;for(F=0;F<this.cellIdList.length;F++){for(var z=this.cellInfoHash[this.cellIdList[F]],G=parseInt(z.options.rowSpan)||1,U=parseInt(z.options.colSpan)||1,X=j,K=0;K<this.getRowCount()*this.getColCnt()&&H[X+K];K++)j++;for(var $=0;$<U;$++){var Y=j;H[Y]=z.id,P[Y]=!0;for(K=1;K<G;K++){var Z=j+K*this.getColCnt();H[Z]=z.id,P[Z]=!0}j+=1}}B=H.join(",")}else B=this.cellIdList.join(",");e.columnIds=B,e.expression=1==k?"false":"true",e.status=T,e.maxFileSize=L,e.postMsg=A,e.columnOrder=E,e.useModalDisable=M,e.useXHR=q;var J=a.D.getBoolean(e.wframe);if(this._csvUploadInfo=JSON.stringify(e),!0===J){e.sizeInfo={},e.osName="",e.sizeInfo.top=e.sFeatures.top?e.sFeatures.top:160,e.sizeInfo.left=e.sFeatures.left?e.sFeatures.left:280,-1!=navigator.userAgent.indexOf("Windows")?e.osName="window":-1!=navigator.userAgent.indexOf("Macintosh")&&(e.osName="mac"),a.D.isIE(6)?(e.sizeInfo.height=212,e.sizeInfo.width=456):a.D.isIE(7)||a.D.isIE(8)?(e.sizeInfo.height=218,e.sizeInfo.width=457):a.D.isIE(9)?(e.sizeInfo.height=204,e.sizeInfo.width=446):a.D.isIE(10)?(e.sizeInfo.height=162,e.sizeInfo.width=455):a.D.isIEAllVersion(11)?(e.sizeInfo.height=161,e.sizeInfo.width=455):a.D.isSpartan()?(e.sizeInfo.height=178,e.sizeInfo.width=446):a.D.isChrome()?-1!=navigator.userAgent.indexOf("OPR")?"window"==e.osName?(e.sizeInfo.height=198,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=200,e.sizeInfo.width=454):"window"==e.osName?(e.sizeInfo.height=198,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=197,e.sizeInfo.width=454):a.D.isFF()?"window"==e.osName?(e.sizeInfo.height=163,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.D.isSafari()?"window"==e.osName?(e.sizeInfo.height=160,e.sizeInfo.width=470):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.D.isOpera()&&("window"==e.osName?(e.sizeInfo.height=189,e.sizeInfo.width=446):"mac"==e.osName&&(e.sizeInfo.height=233,e.sizeInfo.width=460)),"object"==(0,l.Z)(e.sFeatures)&&(e.sizeInfo.height=e.sFeatures.height?e.sFeatures.height:e.sizeInfo.height,e.sizeInfo.width=e.sFeatures.width?e.sFeatures.width:e.sizeInfo.width);var Q={type:"json",name:"csvPopupParam",data:e},tt={id:this.id+"_csvPop",type:"wframePopup",dataObject:Q,popupName:e.name,style:"",useIFrame:!1,className:e.className,modal:!0,srcORurl:"",srcData:null,destData:null,xml:null,popupUrl:w,left:e.sizeInfo.left,top:e.sizeInfo.top,width:e.sizeInfo.width,height:e.sizeInfo.height,resizable:e.resizable,status:!1,menubar:!1,
scrollbars:!1,title:!0,useControl:!1,controls:{minimize:!0,maximize:!0,close:!0},disableCloseButton:!1,fullscreen:!1,alwaysOnTop:!0,foldSize:{width:500},windowDragMove:e.windowDragMove,processMsgFrame:!0};this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]&&(tt.scope_uuid=this.scope_obj.uuid),a.D.openPopup(tt.popupUrl,tt)}else S=WebSquare.BootLoader.getEngineUri(S),window.open(S,"csvupWindow",e.sFeatures)},T.prototype.saveCSV=function(t){var e=t.maxCellCount||-1;if(-1!=(e=parseInt(e,10))&&e<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()*this.getColCnt()){var i=WebSquare.language.getMessage("Grid_warning8",e)||"Cell 개수가 제한 크기를 초과 하였습니다.\n 제한 개수 : "+e;return void alert(i)}var o=t.maxRowCount||-1;if(-1!=(o=parseInt(o,10))&&o<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()){i=WebSquare.language.getMessage("Grid_warning10",o)||"Row 개수가 제한 크기를 초과 하였습니다.\n 제한 개수 : "+o;return void alert(i)}WebSquare.layer.showProcessMessage("download...",{scope:this.scope_id||""}),this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.orgStatusArr=this.drilldown.statusArr,this.orgFilteredRowIndexArr=this._dataList.filteredRowIndexArr,this.orgShowDepth=this.showDepth,this.showDepth="9999",this.initDrilldown());var r=(t=t||{}).fileName||"csvfile.csv",n=t.type||"1",l=t.delim||";",h=t.displayDelim||"true",d=t.removeColumns||"",u=t.header||"1",c=t.hidden||"0",p=t.checkButton||"1",g=t.removeQuotation||"1",m=t.removeNewLine||"1",f=t.saveList||"",b=this.options.rowNumHeaderValue||"";this.options.useLocale&&this.options.rowNumLocaleRef&&((V=this.getLocaleValue(this.options.rowNumLocaleRef))&&(b=V));var y="";"1"!=t.rowNumVisible&&"true"!=t.rowNumVisible&&1!=t.rowNumVisible||(y=this.options.rowNumVisible||"false");var v=t.textTable||"false",w=t.textTableAlign||"right",S=t.useFooter||"false",C=t.columnMove+""=="true",x=t.columnOrder||"",_=t.optionParam||"",T=t.aposPrefixOnNum||"0",k=t.aposPrefixOnText||"0",D=t.ignoreSpan||"0",L=t.maxDataSize||-1;L=parseInt(L,10);var W=t.csvDownloadURL||"",A=1==this.options.useXHR?this.options.useXHR:t.useXHR||"false";t.useXHR=A+""=="true";for(var E=t.openFile||"false",M=t.sameSite||"",q=t.useHeaderCheckBoxLabel+""=="true",R=t.opencsv+""=="true",N=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],F=WebSquare.Elem.api.getElementsByTagName(N,"w2:column"),O=0;O<F.length;O++){var B=F[O];if("checkbox"===B.getAttribute("inputType")&&!0===q){var V,H=B.getAttribute("checkboxLabel")||B.getAttribute("value"),P=B.getAttribute("localeRef");if(this.options.useLocale&&P)(V=this.getLocaleValue(P))&&(H=V);B.setAttribute("value",H+"")}else{var j=B.getAttribute("id");B.setAttribute("value",this.getHeaderValue(j)+"")}}var z=new I.h.Hashtable,G="";G="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),z.put("style",G),"0"==n?(z.put("data",this.getExcelAllXML()),"true"==S?z.put("footer_data",this.getExcelAllFooterXML()):z.put("footer_data","<array><![CDATA[[]]]></array>")):(z.put("data",this.getExcelAllXMLDisplay(n)),"true"==S?z.put("footer_data",this.getExcelAllFooterXMLDisplay()):z.put("footer_data","<array><![CDATA[[]]]></array>"));var U,X=[];for(O=0;O<this.getTotalCol();O++){var K=this.getCellInfo(O).options.inputType;"checkbox"!=K&&"radio"!=K&&"button"!=K||X.push('"'+O+'"')}C&&(U=""==x?this.getColumnOrder()||"":x.split(","));var $=[];if(""!=d){var Y=(d+="").split(",");if(C)for(O=0;O<Y.length;O++)for(var Z=0;Z<U.length;Z++)Y[O]==U[Z]&&$.push(Z);else $=Y;$.sort((function(t,e){return 1*t-1*e})),d=$.join(",")}var J=d;J='"'+J.wq_replaceAll(",",'","')+'"',z.put("hiddenArr",this.getHiddenColumnArr()),z.put("fileName",r),z.put("hidden",c),z.put("checkButton",p),z.put("type",n),z.put("rowNumVisible",y),z.put("rowNumHeaderValue",b),z.put("removeQuotation",g),z.put("delim",l),z.put("displayDelim",h),z.put("header",u),z.put("textTable",v),z.put("textTableAlign",w),z.put("useFooter",S),
z.put("columnMove",C),z.put("columnOrder",U),z.put("optionParam",_),z.put("aposPrefixOnNum",T),z.put("aposPrefixOnText",k),z.put("ignoreSpan",D),z.put("removeNewLine",m),z.put("checkButtonArr","<array><![CDATA[["+X.join(",")+"]]]></array>"),""!=f&&z.put("saveList",'<array><![CDATA[["'+f.join('","')+'"]]]></array>'),z.put("removeColumns","<array><![CDATA[["+J+"]]]></array>"),z.put("openFile",E),""!=M&&z.put("sameSite",M),z.put("opencsv",R),z.put("useXHR",A);var Q=z.toString();if(-1!=L&&L<a.D.getByteLengthUtf8(Q)){i=WebSquare.language.getMessage("Grid_warning9",L)||"전송 data가 제한 크기를 초과 하였습니다.\n 제한 크기 : "+e+" byte";return!1===t.showProcess?WebSquare.getBody().hideModal(!0):!0===t.showConfirm?this.hideDownloadLayer():WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(i)}""==W&&(W=this.options.csvDownloadURL),t.scopeId=this.scope_id||"",s.v.excelDownload(W,Q,"post",t),this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.drilldown.statusArr=this.orgStatusArr,this._dataList.filteredRowIndexArr=this.orgFilteredRowIndexArr,this.showDepth=this.orgShowDepth,this.orgStatusArr=null,this.orgFilteredRowIndexArr=null,this.orgShowDepth=null,this.drawData(this.rowIndex,0))},T.prototype.saveCSVFile=function(t,e,i,o,r,a,n,l,h){WebSquare.layer.showProcessMessage("download...",{scope:this.scope_id||""}),n+="";var d=new I.h.Hashtable,u="";u="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),d.put("style",u),"0"==n||""==n?(d.put("data",this.getExcelAllXML()),d.put("footer_data",this.getExcelAllFooterXML())):(d.put("data",this.getExcelAllXMLDisplay(n)),d.put("footer_data",this.getExcelAllFooterXMLDisplay()));for(var c=[],p=0;p<this.getTotalCol();p++){var g=this.getCellInfo(p).options.inputType;"checkbox"!=g&&"radio"!=g&&"button"!=g||c.push('"'+p+'"')}var m=h||"";m='"'+m.wq_replaceAll(",",'","')+'"',d.put("hiddenArr",this.getHiddenColumnArr()),d.put("fileName",t),d.put("hidden",o),d.put("checkButton","1"),d.put("type",n),d.put("rowNumVisible",this.options.rowNumVisible);var f=this.options.rowNumHeaderValue||"";if(this.options.useLocale&&this.options.rowNumLocaleRef){var b=this.getLocaleValue(this.options.rowNumLocaleRef);b&&(f=b)}d.put("rowNumHeaderValue",f),d.put("removeQuotation",a),d.put("delim",e),d.put("header",i),d.put("checkButtonArr","<array><![CDATA[["+c.join(",")+"]]]></array>"),void 0!==l&&l&&d.put("saveList",'<array><![CDATA[["'+l.join('","')+'"]]]></array>'),d.put("removeColumns","<array><![CDATA[["+m+"]]]></array>"),s.v.excelDownload(this.options.csvDownloadURL,d.toString(),"post",{scopeId:this.scope_id||""})},T.prototype.getExcelUploadInfo=function(t){var e={},i=(t=t||{}).type||"0",o=t.removeColumns||"",s=t.startRowIndex||"0",r=t.startColumnIndex||"0",a=t.endColumnIndex||"-1",n=t.ignoreStartRowIndexInSAX+""||"1",l=t.ignoreStartColumnIndexInSAX+""||"1",h=t.sheetNo||"0",d=t.sheetName||"",u=t.activeSheet||!1,c=t.headerExist||"0";0===t.footerExist&&(t.footerExist="0");var p=t.footerExist||"1",g=t.append||"0",m=t.hidden||"0",f=t.fillHidden||"0",b=t.optionParam||"",y=t.skipSpace||"0",v=t.insertColumns||[],w=t.processMsg||"",S="";if(this.options.dataList){var C=this.modelControl.getDataComp(this.options.dataList);null!=C&&(S=C.id)}for(var x=t.status||"R",_=t.delim||",",I="",T="",k="",D=t.pwd||"",L=t.loadingMode||"",W=t.maxFileSize||"-1",A=t.cellDataConvertor||"",E=t.decimal||"4",M=t.applyDecimal||"0",q=t.useModalDisable||"false",R=t.useMaxByteLength||"false",N=1==this.options.postMsg?this.options.postMsg:t.postMsg||"false",F=t.dateFormat||"yyyy-MM-dd",O=t.byteCheckEncoding||"EUC-KR",B=t.columnOrder||"",V=t.columnMove+""=="true",H=t.chunkNum||0,P=t.trim||0,j=t.useXHR+""=="true",z=0;z<v.length;z++){var G=v[z],U=G.columnIndex+""||"",X=G.columnValue+""||"";""!=U&&(I=I+T+U+","+X,T="|")}
if(void 0===t.features||"string"!=typeof t.features)k="top=280,height=137,left=160,width=446,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no";else if(1==t.wframe){var K=t.features.split(","),$={};for(z=0;z<K.length;z++)0!=K[z].toLowerCase().indexOf("top")?0!=K[z].toLowerCase().indexOf("left")?0!=K[z].toLowerCase().indexOf("height")?0!=K[z].toLowerCase().indexOf("width")||($.width=parseInt(K[z].split("=")[1])):$.height=parseInt(K[z].split("=")[1]):$.left=parseInt(K[z].split("=")[1]):$.top=parseInt(K[z].split("=")[1]);k=$}else k=t.features;e.sFeatures=k,c=parseInt(c,10),g=parseInt(g,10),m=parseInt(m,10),p=parseInt(p,10),e.header=1==c?"true":"false",e.footer=1==p?"true":"false",e.append=1==g?"true":"false",e.removeColumns=o,e.fillHidden=1==f?"true":"false",e.hidden=1==m?"true":"false",e.type=1==i?"true":"false",e.uploadType=i,e.skipSpace=1==y?"true":"false",e.insertColumns=I,e.optionParam=b,t.advancedExcelUploadURL?e.action=t.advancedExcelUploadURL:e.action=this.options.advancedExcelUploadURL,e.gridID=this.id;var Y=[];for(z=this.defaultColCnt;z<this.hiddenList.length;z++)1==this.hiddenList[z]&&Y.push(z-this.defaultColCnt);if(e.columnNum=this.getTotalCol(),e.expressionColumns=this.getExpressionColumnArr().join(","),e.hiddenColumns=Y.join(","),e.headerRows=this.getElementById(this.id+"_head_table").rows.length,e.gridStartRow=s||"1",e.gridStartCol=r||"1",e.gridEndCol=a,e.ignoreStartRowIndexInSAX="0"==n?"true":"false",e.ignoreStartColumnIndexInSAX="0"==l?"true":"false",e.gridSheetNo=h||"0",e.gridSheetName=d,e.activeSheet=u,e.applyDecimal="0"==M?"false":"true",WebSquare.domain&&(e.domain=WebSquare.text.URLEncoder(WebSquare.domain)),e.processMsg=WebSquare.text.BASE64URLEncoder(w),e.delim=_,e.dataList=S,!0===V){var Z=this.htmlInfo.body.rowAttrArr.length,J=this.getColumnOrder(),Q=J.length,tt=new Array(Q);for(z=0;z<Z;z++)for(var et=0;et<Q;et++)tt[Q*z+et]=this.getColumnID(Q*z+J[et]);e.columnIds=tt.join(",")}else e.columnIds=this.cellIdList.join(",");return e.trim=1==P,e.status=x,e.pwd=D,e.loadingMode=L,e.maxFileSize=W,e.cellDataConvertor=A,e.decimal=E,e.useModalDisable=q+"",e.useMaxByteLength=R+"",e.postMsg=N+"",e.dateFormat=F,e.byteCheckEncoding=O,e.columnOrder=B,e.wframe=t.wframe||!1,e.name=t.name||"FILE UPLOAD",e.className=t.className||"",e.resizable=0!=t.resizable||t.resizable,e.windowDragMove=t.windowDragMove||!1,e.chunkNum=parseInt(H,10),e.useXHR=j,t.convertIndex&&(t.convertIndex=t.convertIndex.wq_replaceAll(" ",""),e.convertIndexArr=t.convertIndex.split(",")),"grid"==this.initializeType&&this.options.ref&&t.instanceBind&&(e.instanceBind=t.instanceBind),e},T.prototype.advancedExcelUpload=function(t){var e=this.getExcelUploadInfo(t),i=t.popupUrl||this.options.advancedExcelUploadPopupURL,s=document.location.protocol+"//"+document.location.host+"/",r=t.popupUrl?s+t.popupUrl:o.x.baseURI+WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/advancedfileUpload.js"),n=t.advancedHidden||"0",h="";i+="?gridID="+e.gridID,WebSquare.domain&&(i+="&domain="+e.domain),i+=1==n?"&advancedHidden=true":"&advancedHidden=false",""!=e.pwd&&(h=WebSquare.text.BASE64Encoder(e.pwd)),e.pwd=h;var d=a.D.getBoolean(e.wframe);if(this._excelUploadInfo=JSON.stringify(e),!0===d){e.sizeInfo={},e.osName="",e.sizeInfo.top=e.sFeatures.top?e.sFeatures.top:160,e.sizeInfo.left=e.sFeatures.left?e.sFeatures.left:280,-1!=navigator.userAgent.indexOf("Windows")?e.osName="window":-1!=navigator.userAgent.indexOf("Macintosh")&&(e.osName="mac"),a.D.isIE(6)?(e.sizeInfo.height=212,e.sizeInfo.width=456):a.D.isIE(7)||a.D.isIE(8)?(e.sizeInfo.height=218,e.sizeInfo.width=457):a.D.isIE(9)?(e.sizeInfo.height=204,e.sizeInfo.width=446):a.D.isIE(10)?(e.sizeInfo.height=162,e.sizeInfo.width=455):a.D.isIEAllVersion(11)?(e.sizeInfo.height=198,e.sizeInfo.width=455):a.D.isSpartan()?(e.sizeInfo.height=178,e.sizeInfo.width=446):a.D.isChrome()?-1!=navigator.userAgent.indexOf("OPR")?"window"==e.osName?(e.sizeInfo.height=164,
e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):"window"==e.osName?(e.sizeInfo.height=200,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=198,e.sizeInfo.width=454):a.D.isFF()?"window"==e.osName?(e.sizeInfo.height=163,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.D.isSafari()?"window"==e.osName?(e.sizeInfo.height=160,e.sizeInfo.width=470):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.D.isOpera()&&("window"==e.osName?(e.sizeInfo.height=189,e.sizeInfo.width=446):"mac"==e.osName&&(e.sizeInfo.height=233,e.sizeInfo.width=460)),"object"==(0,l.Z)(e.sFeatures)&&(e.sizeInfo.height=e.sFeatures.height?e.sFeatures.height:e.sizeInfo.height,e.sizeInfo.width=e.sFeatures.width?e.sFeatures.width:e.sizeInfo.width);var u={type:"json",name:"popupParam",data:e},c={id:this.id+"_excelPop",type:"wframePopup",dataObject:u,popupName:e.name,style:"",useIFrame:!1,className:e.className,modal:!0,srcORurl:"",srcData:null,destData:null,xml:null,popupUrl:r,left:e.sizeInfo.left,top:e.sizeInfo.top,width:e.sizeInfo.width,height:e.sizeInfo.height,resizable:e.resizable,status:!1,menubar:!1,scrollbars:!1,title:!0,useControl:!1,controls:{minimize:!0,maximize:!0,close:!0},disableCloseButton:!1,fullscreen:!1,alwaysOnTop:!0,foldSize:{width:500},windowDragMove:e.windowDragMove,processMsgFrame:!0};if(this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]){c.scope_uuid=this.scope_obj.uuid;for(var p=this.scope_obj;p;){if(p._isWframePopup){c.useModalStack=!0;break}p=p.getParentFrame()}}a.D.openPopup(c.popupUrl,c)}else i=WebSquare.BootLoader.getEngineUri(i),window.open(i,"fileupWindow",e.sFeatures)},T.prototype.advancedExcelDownload=function(t,e){try{var i=t.maxCellCount||-1;if(-1!=(i=parseInt(i,10)))if(i<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()*this.getColCnt()){var o=WebSquare.language.getMessage("Grid_warning8",i)||"Cell 개수가 제한 크기를 초과 하였습니다.\n 제한 개수 : "+i;return WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(o)}var s=t.maxRowCount||-1;if(-1!=(s=parseInt(s,10)))if(s<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()){o=WebSquare.language.getMessage("Grid_warning10",s)||"Row 개수가 제한 크기를 초과 하였습니다.\n 제한 개수 : "+s;return WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(o)}this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.orgStatusArr=this.drilldown.statusArr,this.orgFilteredRowIndexArr=this._dataList.filteredRowIndexArr,this.orgShowDepth=this.showDepth,this.showDepth="9999",this.initDrilldown());var a=parseInt(t.rowsByN);switch(t.rowsByN=a>100?a:100,t.dataLength=this.getDataLength(),t.multiexcel=!1,t.dataProvider=t.dataProvider||"",t.splitProvider=t.splitProvider||"",t.scope=this.scope_id||"",t.type+""){case"":case"0":t.type=0;break;case"2":t.type=2;break;default:t.type=1}if(!1===t.showProcess)WebSquare.getBody().showModal("w2modal_gridDownload");else if(!0===t.showConfirm)t.massStorage=!0,window.downloadGridId=this.id,WebSquare.getBody().showModal(),this.showSendExcelLayer();else{var n=t.processMsg;n&&n.length>0?WebSquare.layer.showProcessMessage(n,t):WebSquare.layer.showProcessMessage("download...",t)}if(0===t.type||1===t.type||2==t.type){t.cellInfo=[],t.isPlainDataCol=[],t.isSelectCol=[],t.isBasicCol=[],t.isExpCol=[],t.isCustomCol=[],t.isCustomModelCol=[],t.isCustomType=[],t.isEscapeFormatter=[];for(var l=this.oneRowDataLength,h=0;h<l;h++){var d=this.getCellInfo(h),u=d.options.inputType;t.cellInfo[h]=d,t.isCustomType[h]="custom"===u,t.isPlainDataCol[h]="checkbox"===u||"image"===u||"radio"===u,t.isSelectCol[h]="select"===u||"checkcombobox"===u||"autoComplete"===u,t.isExpCol[h]="expression"===u,t.isCustomCol[h]=d.useCustomFormatter,t.isCustomModelCol[h]=d.useCustomModelFormatter,t.isBasicCol[h]=!(t.isPlainDataCol[h]||t.isSelectCol[h]||t.isExpCol[h]||t.isCustomCol[h]||t.isCustomModelCol[h]||t.isCustomType[h]),t.isEscapeFormatter[h]=d.useEscapeFormatter}}this.makeExcelData(0,[],t,e)
}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.showSendExcelLayer=function(){if(void 0!==window.gridExceldownloadIframe){window.gridExceldownloadIframe.style.visibility="hidden",window.gridExceldownloadIframe.style.display="block";var t=document.documentElement.scrollTop+document.documentElement.clientHeight/2-parseInt(window.gridExceldownloadIframe.offsetHeight)/2,e=document.documentElement.scrollLeft+document.documentElement.clientWidth/2-parseInt(window.gridExceldownloadIframe.offsetWidth)/2;window.gridExceldownloadIframe.style.left=e+"px",window.gridExceldownloadIframe.style.top=t+"px",window.gridExceldownloadIframe.style.visibility="visible",window.gridExceldownloadIframe.contentWindow.initialize()}else{window.gridExceldownloadIframe=document.createElement("iframe"),window.gridExceldownloadIframe.style.visibility="hidden",window.gridExceldownloadIframe.setAttribute("id","gridDownLoadLayer"),window.gridExceldownloadIframe.setAttribute("src",this.options.advancedExcelDownloadPopupURL),window.gridExceldownloadIframe.setAttribute("frameBorder","0"),window.gridExceldownloadIframe.className="w2grid_downloadIframe",window.gridExceldownloadIframe.style.width="300px",window.gridExceldownloadIframe.style.overflow="hidden",document.body.appendChild(window.gridExceldownloadIframe);t=document.documentElement.scrollTop+document.documentElement.clientHeight/2-parseInt(window.gridExceldownloadIframe.offsetHeight)/2,e=document.documentElement.scrollLeft+document.documentElement.clientWidth/2-parseInt(window.gridExceldownloadIframe.offsetWidth)/2;window.gridExceldownloadIframe.style.left=e+"px",window.gridExceldownloadIframe.style.top=t+"px",window.gridExceldownloadIframe.style.position="absolute",window.gridExceldownloadIframe.style.visibility="visible"}},T.prototype.checkUpload=function(){var t=this;setTimeout((function(){1==t.downloadInit?window.gridExceldownloadIframe.contentWindow.checkUpload("end"):t.checkUpload()}),10)},T.prototype.sendExcelData=function(t,e,i){"boolean"==typeof t.useFooter&&(t.useFooter=t.useFooter+"");var o=WebSquare.xml.encode(t.fileName)||"excel",r=t.sheetName||"sheet",n=t.type||"0",l="false";if(1==t.multiexcel){var h=t.multipleSheet;void 0===t.multipleSheet&&(h=""),l=h+""=="true"||h+""==""?"true":"false"}else l="false";var d=t.removeColumns||"",u=t.removeHeaderRows||"",c=t.foldColumns||"",p=t.startRowIndex||"0",g=t.startColumnIndex||"0",m=t.headerColor||"",f=t.headerFontName||"",b=t.headerFontSize||"",y=t.headerFontColor||"",v=t.headerFontBold||"",w=t.bodyColor||"",S=t.bodyFontName||"",C=t.bodyFontSize||"",x=t.bodyFontColor||"",_=t.footerColor||"",I=t.footerFontName||"",T=t.footerFontSize||"",k=t.footerFontColor||"",D=t.subTotalColor||"",L=t.subTotalFontName||"",W=t.subTotalFontSize||"",A=t.subTotalFontColor||"",E=t.rowNumHeaderColor||"",M=t.rowNumHeaderFontName||"",q=t.rowNumHeaderFontSize||"",R=t.rowNumHeaderFontColor||"",N=t.rowNumBodyColor||"",F=t.rowNumBodyFontName||"",O=t.rowNumBodyFontSize||"",B=t.rowNumBodyFontColor||"",V=t.rowNumFooterColor||"",H=t.rowNumFooterFontName||"",P=t.rowNumFooterFontSize||"",j=t.rowNumFooterFontColor||"",z=t.rowNumSubTotalColor||"",G=t.rowNumSubTotalFontName||"",U=t.rowNumSubTotalFontSize||"",X=t.rowNumSubTotalFontColor||"",K=t.dataProvider||"",$=t.footerDataProvider||"",Y=t.splitProvider||"",Z=t.providerRequestXml||"",J=t.userDataXml||"",Q=t.optionParam||"",tt=t.bodyWordwrap||"",et=t.subtotalWordwrap||"",it=t.footerWordwrap||"",ot=t.useEuroLocale||"false",st=t.useHeader||"true",rt=t.useSubTotal||"false",at=t.useFooter||"true";t.printSet=t.printSet||{}
;var nt=t.printSet.fitToPage||"false",lt=t.printSet.landScape||"false",ht=t.printSet.fitWidth||"1",dt=t.printSet.fitHeight||"1",ut=t.printSet.scale||"100",ct=t.printSet.pageSize||"A4",pt=t.separator||",",gt=t.subTotalScale||-1,mt=t.subTotalRoundingMode||"",ft=t.footerScale||-1,bt=t.footerRoundingMode||"",yt=t.useStyle+""=="true",vt=t.setFontSize+""=="true",wt=t.freezePane||"",St=t.autoSizeColumn||"false",Ct=t.autoSizeAdjustWith||512,xt=t.displayGridlines||"",_t=t.colMerge||"false",It=t.colMergeValue||"false",Tt=t.colMergeTextAlign||"center",kt=t.useDataFormat||"false",Dt=t.applyDataFormat||"false",Lt=t.customToDataType||"false",Wt=t.useSubTotalData+""=="true",At=t.useFooterData+""=="true",Et=t.calcFooter+""=="true",Mt=t.columnMove+""=="true",qt=t.columnOrder||"";Et&&(Mt=!1);var Rt=t.columnMoveWithSubTotal||"",Nt=t.columnMoveWithFooter||"",Ft=t.oddRowBackgroundColor||"",Ot=t.evenRowBackgroundColor||"",Bt=t.indent||"0",Vt=WebSquare.xml.encode(this.options.rowNumHeaderValue)||t.rowNumHeaderValue||"";this.options.useLocale&&this.options.rowNumLocaleRef&&((ti=this.getLocaleValue(this.options.rowNumLocaleRef))&&(Vt=ti));var Ht=t.rowNumVisible+""=="true",Pt=this.options.startRowNumber||"1",jt=t.bodyNumberDefaultValue||"",zt=t.numberToText||"false",Gt=t.rowHeight||"-1",Ut=t.headerRowHeight||"-1",Xt=t.maxDataSize||-1;Xt=parseInt(Xt,10);var Kt=t.pwd||"",$t=t.useImage||"false",Yt=t.headerAutoFilter||"false",Zt=t.filterRowIndex||"-1",Jt=t.mergeCell+""=="true",Qt=t.noMerge+""=="true";t.httpReadOnly=t.httpReadOnly+""=="true";var te=t.advancedExcelDownloadURL||"",ee=1==this.options.useXHR?this.options.useXHR:t.useXHR||"false";t.useXHR=ee+""=="true";var ie,oe=t.openFile||"false",se=t.macroFileName||"",re=t.useMacro||"false",ae=t.showDialog||"false",ne=t.dialogFilter||"",le=t.keepType||"false",he=t.useHeaderCheckBoxLabel+""=="true",de=t.lazyInfoArr||"false",ue=t.decimal||"",ce=t.sameSite||"",pe=t.customProvider||"",ge=t.customProviderIndex||"",me=t.rowAccessWindowSize||"",fe=t.trim||"",be=t.chart||{};if(be.chartName)var ye=be.chartName||"line",ve=be.chartType||"",we=be.title||"",Se=be.xTitle||"",Ce=be.yTitle||"",xe=be.startRowIndex||0,_e=be.startColIndex||0,Ie=be.endRowIndex||0,Te=be.endColIndex||0,ke=be.serAxis||"true",De=be.catAxis||"true",Le=be.catAxisRange||{},We=Le.startColIndex||0,Ae=Le.startRowIndex||0,Ee=Le.endColIndex||0,Me=Le.endRowIndex||0,qe=be.serAxisRange||{},Re=qe.startColIndex||0,Ne=qe.startRowIndex||0,Fe=qe.endColIndex||0,Oe=qe.endRowIndex||0,Be=be.dataAxisRange||{},Ve=Be.startColIndex||0,He=Be.startRowIndex||0,Pe=Be.endColIndex||0,je=Be.endRowIndex||0,ze=be.catGridLines||"true",Ge=be.serGridLines||"true",Ue=be.legend||"true",Xe=be.legendPosition||"bottom";Mt&&(ie=""==qt?this.getColumnOrder()||"":qt.split(","));var Ke=[];if(""!=d){var $e=(d+="").split(",");if(Mt)for(var Ye=0;Ye<$e.length;Ye++)for(var Ze=0;Ze<ie.length;Ze++)$e[Ye]==ie[Ze]&&Ke.push(Ze);else Ke=$e;Ke.sort((function(t,e){return 1*t-1*e})),d=Ke.join(",")}var Je=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],Qe=WebSquare.Elem.api.getElementsByTagName(Je,"w2:column");for(Ye=0;Ye<Qe.length;Ye++){if("checkbox"===(fi=Qe[Ye]).getAttribute("inputType")&&!0===he){var ti,ei=fi.getAttribute("checkboxLabel")||fi.getAttribute("value"),ii=fi.getAttribute("localeRef");if(this.options.useLocale&&ii)(ti=this.getLocaleValue(ii))&&(ei=ti);fi.setAttribute("value",ei+"")}else{var oi=fi.getAttribute("id");fi.setAttribute("value",this.getHeaderValue(oi)+"")}}var si=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:gBody");if(si.length>0){var ri=si[0],ai=WebSquare.Elem.api.getElementsByTagName(ri,"w2:row");for(Ye=0;Ye<ai.length;Ye++)for(Qe=WebSquare.Elem.api.getElementsByTagName(ai[Ye],"w2:column"),Ze=0;Ze<Qe.length;Ze++){oi=(fi=Qe[Ze]).getAttribute("id");var ni=this.getCellInfo(oi);ni.options.displayFormat&&fi.setAttribute("displayFormat",ni.options.displayFormat);var li=fi.getAttribute("excelCellType"),hi=""
;(hi=null==li?this._dataList.getColumnOption(oi,"dataType"):li)?fi.setAttribute("dataType",hi):fi.setAttribute("dataType","text");var di=fi.getAttribute("excelFormatter");if(bi=a.D.getGlobalFunction(di,this.scope_id)){var ui=bi.call(this,oi);fi.setAttribute("excelFormat",ui)}}}var ci=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:subTotal");for(Ye=0;Ye<ci.length;Ye++){ai=WebSquare.Elem.api.getElementsByTagName(ci[Ye],"w2:row");for(Ze=0;Ze<ai.length;Ze++){Qe=WebSquare.Elem.api.getElementsByTagName(ai[Ze],"w2:column");for(var pi=0;pi<Qe.length;pi++){oi=(fi=Qe[pi]).getAttribute("id"),di=fi.getAttribute("excelFormatter");if(bi=a.D.getGlobalFunction(di,this.scope_id)){ui=bi.call(this,oi);fi.setAttribute("excelFormat",ui)}}}}var gi=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:footer");if(gi.length>0){var mi=gi[0];ai=WebSquare.Elem.api.getElementsByTagName(mi,"w2:row");for(Ye=0;Ye<ai.length;Ye++)for(Qe=WebSquare.Elem.api.getElementsByTagName(ai[Ye],"w2:column"),Ze=0;Ze<Qe.length;Ze++){var fi,bi;oi=(fi=Qe[Ze]).getAttribute("id"),di=fi.getAttribute("excelFormatter");if(bi=a.D.getGlobalFunction(di,this.scope_id)){ui=bi.call(this,oi);fi.setAttribute("excelFormat",ui)}}}var yi=[];yi.push("<vector result='1'>"),yi.push("<data vectorkey='0'><hashtable>");var vi="";vi="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),yi.push("<data hashkey='style'>"+vi+"</data>"),yi.push("<data hashkey='data'>"+i+"</data>"),(this.startedDisplayNone||0==this.resizeObj.width||0==this.resizeObj.height)&&this.drawFooter(),yi.push("<data hashkey='groupby' value='"+this.groupbyStatus.grouped+"'/>"),t.groupby&&this.groupbyStatus.grouped?(yi.push("<data hashkey='groupbyStyle'>"+this.getExcelGroupbyStyle()+"</data>"),yi.push("<data hashkey='groupbyHeaderValue'>"+this.getExcelGroupbyHeaderValue()+"</data>"),yi.push("<data hashkey='groupbyFooterValue'>"+this.getExcelGroupbyFooterValue()+"</data>"),yi.push("<data hashkey='groupbyStatusValue'>"+this.getExcelGroupbyStatusValue()+"</data>"),yi.push("<data hashkey='groupbyStyleData'>"+this.getExcelGroupbyStyleData()+"</data>"),yi.push("<data hashkey='rowNumVisible' value='"+this.options.rowNumVisible+"'/>"),yi.push("<data hashkey='rowStatusVisible' value='"+this.options.rowStatusVisible+"'/>"),a.D.isEmptyObject(this.groupbyDisplayOptions.rowNumHeader)&&a.D.isEmptyObject(this.groupbyDisplayOptions.rowStatusHeader)||yi.push("<data hashkey='rowNone' value='true'/>")):yi.push("<data hashkey='rowNumVisible' value='"+Ht+"'/>"),0==n?yi.push("<data hashkey='footer_data'>"+this.getExcelAllFooterXML(pt)+"</data>"):1==n?yi.push("<data hashkey='footer_data'>"+this.getExcelAllFooterXMLDisplay(pt)+"</data>"):yi.push("<data hashkey='footer_data'>"+this.getExcelAllFooterXMLRaw(pt)+"</data>"),yi.push("<data hashkey='fileName' value='"+o+"'/>"),yi.push("<data hashkey='sheetName' value='"+r+"'/>"),yi.push("<data hashkey='multipleSheet' value='"+l+"'/>"),yi.push("<data hashkey='stRowIndex' value='"+p+"'/>"),yi.push("<data hashkey='stColIndex' value='"+g+"'/>"),yi.push("<data hashkey='removeColumns' value='"+d+"'/>"),yi.push("<data hashkey='removeHeaderRows' value='"+u+"'/>"),yi.push("<data hashkey='foldColumns' value='"+c+"'/>"),yi.push("<data hashkey='headerColor' value='"+m+"'/>"),yi.push("<data hashkey='headerFontName' value='"+f+"'/>"),yi.push("<data hashkey='headerFontSize' value='"+b+"'/>"),yi.push("<data hashkey='headerFontColor' value='"+y+"'/>"),yi.push("<data hashkey='headerFontBold' value='"+v+"'/>"),yi.push("<data hashkey='bodyColor' value='"+w+"'/>"),yi.push("<data hashkey='bodyFontName' value='"+S+"'/>"),yi.push("<data hashkey='bodyFontSize' value='"+C+"'/>"),yi.push("<data hashkey='bodyFontColor' value='"+x+"'/>"),yi.push("<data hashkey='footerColor' value='"+_+"'/>"),yi.push("<data hashkey='footerFontName' value='"+I+"'/>"),yi.push("<data hashkey='footerFontSize' value='"+T+"'/>"),
yi.push("<data hashkey='footerFontColor' value='"+k+"'/>"),yi.push("<data hashkey='subTotalColor' value='"+D+"'/>"),yi.push("<data hashkey='subTotalFontName' value='"+L+"'/>"),yi.push("<data hashkey='subTotalFontSize' value='"+W+"'/>"),yi.push("<data hashkey='subTotalFontColor' value='"+A+"'/>"),Ht&&(yi.push("<data hashkey='rowNumHeaderColor' value='"+E+"'/>"),yi.push("<data hashkey='rowNumHeaderFontName' value='"+M+"'/>"),yi.push("<data hashkey='rowNumHeaderFontSize' value='"+q+"'/>"),yi.push("<data hashkey='rowNumHeaderFontColor' value='"+R+"'/>"),yi.push("<data hashkey='rowNumBodyColor' value='"+N+"'/>"),yi.push("<data hashkey='rowNumBodyFontName' value='"+F+"'/>"),yi.push("<data hashkey='rowNumBodyFontSize' value='"+O+"'/>"),yi.push("<data hashkey='rowNumBodyFontColor' value='"+B+"'/>"),yi.push("<data hashkey='rowNumFooterColor' value='"+V+"'/>"),yi.push("<data hashkey='rowNumFooterFontName' value='"+H+"'/>"),yi.push("<data hashkey='rowNumFooterFontSize' value='"+P+"'/>"),yi.push("<data hashkey='rowNumFooterFontColor' value='"+j+"'/>"),yi.push("<data hashkey='rowNumSubTotalColor' value='"+z+"'/>"),yi.push("<data hashkey='rowNumSubTotalFontName' value='"+G+"'/>"),yi.push("<data hashkey='rowNumSubTotalFontSize' value='"+U+"'/>"),yi.push("<data hashkey='rowNumSubTotalFontColor' value='"+X+"'/>")),yi.push("<data hashkey='footerDataProvider' value='"+$+"'/>"),yi.push("<data hashkey='dataProvider' value='"+K+"'/>"),yi.push("<data hashkey='splitProvider' value='"+Y+"'/>"),yi.push("<data hashkey='providerRequestXml' value=''>"+Z+"</data>"),yi.push("<data hashkey='userDataXml' value=''>"+J+"</data>"),yi.push("<data hashkey='optionParam' value='"+Q+"'/>"),""!=tt&&yi.push("<data hashkey='bodyWordwrap' value='"+tt+"'/>"),""!=et&&yi.push("<data hashkey='subtotalWordwrap' value='"+et+"'/>"),""!=it&&yi.push("<data hashkey='footerWordwrap' value='"+it+"'/>"),yi.push("<data hashkey='useEuroLocale' value='"+ot+"'/>"),yi.push("<data hashkey='useHeader' value='"+st+"'/>"),yi.push("<data hashkey='useSubTotal' value='"+rt+"'/>"),yi.push("<data hashkey='useFooter' value='"+at+"'/>"),yi.push("<data hashkey='fitToPage' value='"+nt+"'/>"),yi.push("<data hashkey='landScape' value='"+lt+"'/>"),yi.push("<data hashkey='fitWidth' value='"+ht+"'/>"),yi.push("<data hashkey='fitHeight' value='"+dt+"'/>"),yi.push("<data hashkey='scale' value='"+ut+"'/>"),yi.push("<data hashkey='pageSize' value='"+ct+"'/>"),yi.push("<data hashkey='separator' value='"+pt+"'/>"),yi.push("<data hashkey='subTotalScale' value='"+gt+"'/>"),yi.push("<data hashkey='subTotalRoundingMode' value='"+mt+"'/>"),yi.push("<data hashkey='footerScale' value='"+ft+"'/>"),yi.push("<data hashkey='footerRoundingMode' value='"+bt+"'/>"),yi.push("<data hashkey='useStyle' value='"+yt+"'/>"),1==vt&&yi.push("<data hashkey='setFontSize' value='"+yt+"'/>"),yi.push("<data hashkey='freezePane' value='"+wt+"'/>"),yi.push("<data hashkey='autoSizeColumn' value='"+St+"'/>"),yi.push("<data hashkey='autoSizeAdjustWith' value='"+Ct+"'/>"),yi.push("<data hashkey='displayGridlines' value='"+xt+"'/>"),yi.push("<data hashkey='colMerge' value='"+_t+"'/>"),yi.push("<data hashkey='colMergeValue' value='"+It+"'/>"),yi.push("<data hashkey='colMergeTextAlign' value='"+Tt+"'/>"),yi.push("<data hashkey='useDataFormat' value='"+kt+"'/>"),yi.push("<data hashkey='customToDataType' value='"+Lt+"'/>"),yi.push("<data hashkey='applyDataFormat' value='"+Dt+"'/>"),yi.push("<data hashkey='useSubTotalData' value='"+Wt+"'/>"),yi.push("<data hashkey='useFooterData' value='"+At+"'/>"),yi.push("<data hashkey='calcFooter' value='"+Et+"'/>"),yi.push("<data hashkey='columnMove' value='"+Mt+"'/>"),yi.push("<data hashkey='columnOrder' value='"+ie+"'/>"),""!=Rt&&yi.push("<data hashkey='columnMoveWithSubTotal' value='"+Rt+"'/>"),""!=Nt&&yi.push("<data hashkey='columnMoveWithFooter' value='"+Nt+"'/>"),yi.push("<data hashkey='oddRowBgColor' value='"+Ft+"'/>"),yi.push("<data hashkey='evenRowBgColor' value='"+Ot+"'/>"),
yi.push("<data hashkey='indent' value='"+Bt+"'/>"),yi.push("<data hashkey='rowNumHeaderValue' value='"+Vt+"'/>"),yi.push("<data hashkey='startRowNumber' value='"+Pt+"'/>"),yi.push("<data hashkey='bodyNumberDefaultValue' value='"+jt+"'/>"),yi.push("<data hashkey='numberToText' value='"+zt+"'/>"),yi.push("<data hashkey='rowHeight' value='"+Gt+"'/>"),yi.push("<data hashkey='headerRowHeight' value='"+Ut+"'/>"),yi.push("<data hashkey='pwd' value='"+Kt+"'/>"),yi.push("<data hashkey='useImage' value='"+$t+"'/>"),yi.push("<data hashkey='headerAutoFilter' value='"+Yt+"'/>"),yi.push("<data hashkey='filterRowIndex' value='"+Zt+"'/>"),yi.push("<data hashkey='mergeCell' value='"+Jt+"'/>"),yi.push("<data hashkey='noMerge' value='"+Qt+"'/>"),yt&&yi.push("<data hashkey='styleData'><array><![CDATA[["+this._getExcelStyle(t)+"]]]></array></data>"),Wt&&yi.push("<data hashkey='subtotalData'><array><![CDATA[["+this._getExcelSubtotalData(pt)+"]]]></array></data>");var wi="",Si=t.mergeCellHeaderInfo||"";Jt&&(rt=a.D.getBoolean(rt),wi=this.getMergeAll(d,rt)),yi.push("<data hashkey='mergeCellInfo'><array><![CDATA[["+wi+"]]]></array></data>"),yi.push("<data hashkey='mergeCellHeaderInfo'><array><![CDATA[["+Si+"]]]></array></data>"),yi.push("<data hashkey='openFile' value='"+oe+"'/>"),yi.push("<data hashkey='macroFileName' value='"+se+"'/>"),yi.push("<data hashkey='useMacro' value='"+re+"'/>"),yi.push("<data hashkey='showDialog' value='"+ae+"'/>"),yi.push("<data hashkey='dialogFilter' value='"+ne+"'/>"),yi.push("<data hashkey='keepType' value='"+le+"'/>"),yi.push("<data hashkey='lazyInfoArr' value='"+de+"'/>"),yi.push("<data hashkey='decimal' value='"+ue+"'/>"),""!=ce&&yi.push("<data hashkey='sameSite' value='"+ce+"'/>"),yi.push("<data hashkey='customProvider' value='"+pe+"'/>"),yi.push("<data hashkey='customProviderIndex' value='"+ge+"'/>"),yi.push("<data hashkey='rowAccessWindowSize' value='"+me+"'/>"),yi.push("<data hashkey='trim' value='"+fe+"'/>"),yi.push("<data hashkey='useXHR' value='"+ee+"'/>"),be.chartName&&(yi.push("<data hashkey='c_chartName' value='"+ye+"'/>"),yi.push("<data hashkey='c_chartType' value='"+ve+"'/>"),yi.push("<data hashkey='c_title' value='"+we+"'/>"),yi.push("<data hashkey='c_xTitle' value='"+Se+"'/>"),yi.push("<data hashkey='c_yTitle' value='"+Ce+"'/>"),yi.push("<data hashkey='c_startRowIndex' value='"+xe+"'/>"),yi.push("<data hashkey='c_startColIndex' value='"+_e+"'/>"),yi.push("<data hashkey='c_endRowIndex' value='"+Ie+"'/>"),yi.push("<data hashkey='c_endColIndex' value='"+Te+"'/>"),yi.push("<data hashkey='c_serAxis' value='"+ke+"'/>"),yi.push("<data hashkey='c_catAxis' value='"+De+"'/>"),yi.push("<data hashkey='c_catAxisStartX' value='"+We+"'/>"),yi.push("<data hashkey='c_catAxisStartY' value='"+Ae+"'/>"),yi.push("<data hashkey='c_catAxisEndX' value='"+Ee+"'/>"),yi.push("<data hashkey='c_catAxisEndY' value='"+Me+"'/>"),yi.push("<data hashkey='c_serAxisStartX' value='"+Re+"'/>"),yi.push("<data hashkey='c_serAxisStartY' value='"+Ne+"'/>"),yi.push("<data hashkey='c_serAxisEndX' value='"+Fe+"'/>"),yi.push("<data hashkey='c_serAxisEndY' value='"+Oe+"'/>"),yi.push("<data hashkey='c_dataAxisStartX' value='"+Ve+"'/>"),yi.push("<data hashkey='c_dataAxisStartY' value='"+He+"'/>"),yi.push("<data hashkey='c_dataAxisEndX' value='"+Pe+"'/>"),yi.push("<data hashkey='c_dataAxisEndY' value='"+je+"'/>"),yi.push("<data hashkey='c_catGridLines' value='"+ze+"'/>"),yi.push("<data hashkey='c_serGridLines' value='"+Ge+"'/>"),yi.push("<data hashkey='c_legend' value='"+Ue+"'/>"),yi.push("<data hashkey='c_legendPosition' value='"+Xe+"'/>")),null!=e&&void 0!==e||(e=[]),yi.push("<data hashkey='information'><vector result='"+e.length+"'>");for(Ye=0;Ye<e.length;Ye++){var Ci=e[Ye];for(var xi in yi.push("<data vectorkey='"+Ye+"'><hashtable>"),Ci)"text"==xi?yi.push("<data hashkey='"+xi+"' value='"+WebSquare.xml.encode(Ci[xi])+"'/>"):yi.push("<data hashkey='"+xi+"' value='"+Ci[xi]+"'/>");yi.push("</hashtable></data>")}if(yi.push("</vector></data>"),
0!=t.multiexcel)return yi.push("</hashtable></data>"),yi.push("</vector>"),yi;yi.push("</hashtable></data>"),yi.push("</vector>");var _i=yi.join("");if(-1!=Xt&&Xt<a.D.getByteLengthUtf8(_i)){var Ii=WebSquare.language.getMessage("Grid_warning9",Xt)||"전송 data가 제한 크기를 초과 하였습니다.\n 제한 크기 : "+Xt+" byte";return!1===t.showProcess?WebSquare.getBody().hideModal(!0):!0===t.showConfirm?this.hideDownloadLayer():WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(Ii)}""==te&&(te=this.options.advancedExcelDownloadURL),t.scopeId=this.scope_id||"",s.v.excelDownload(te,_i,"post",t),this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.drilldown.statusArr=this.orgStatusArr,this._dataList.filteredRowIndexArr=this.orgFilteredRowIndexArr,this.showDepth=this.orgShowDepth,this.orgStatusArr=null,this.orgFilteredRowIndexArr=null,this.orgShowDepth=null,this.drawData(this.rowIndex,0)),this.xmlData=null,!1===t.showProcess?WebSquare.getBody().hideModal(!0):!0===t.showConfirm&&this.hideDownloadLayer()},T.prototype.saveFile=function(t){var e=t.type||"xml",i=t.fileName||"gridView",o=t.extension||"xml",r=t.sameSite||"",a=[];a.push("<vector result='1'>"),a.push("<data vectorkey='0'><hashtable>"),a.push("<data hashkey='type' value='"+e+"'/>"),a.push("<data hashkey='fileName' value='"+i+"'/>"),a.push("<data hashkey='extension' value='"+o+"'/>"),a.push("<data hashkey='sameSite' value='"+r+"'/>"),a.push("</hashtable></data>"),a.push("</vector>");var n=a.join("");n+="\x3c!----VALUESTR----!>",n+=WebSquare.xml.serialize(this.getAllXML());var l=t.action||WebSquare.baseServletURI+"gridToFile.wq";s.v.excelDownload(l,n,"post",t)},T.prototype.getExcelExpression=function(t){var e,i="";return void 0!==t.type&&void 0!==t.id&&void 0!==t.attr&&("header"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"header",s.v._XML_NAMESPACE.W2)[0]:"body"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"gBody",s.v._XML_NAMESPACE.W2)[0]:"footer"==t.type&&(e=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0]),void 0!==e&&(i=this._getAttribute(e,t))),i},T.prototype.setExcelExpression=function(t){var e;void 0!==t.type&&void 0!==t.id&&void 0!==t.excelExpression&&("header"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"header",s.v._XML_NAMESPACE.W2)[0]:"body"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"gBody",s.v._XML_NAMESPACE.W2)[0]:"footer"==t.type&&(e=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",s.v._XML_NAMESPACE.W2)[0]),void 0!==e&&this._setAttribute(e,t))},T.prototype._getAttribute=function(t,e){for(var i="",o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];if(1==s.nodeType)for(var r=0;r<s.childNodes.length;r++){var a=s.childNodes[r];if(1==a.nodeType){if(("body"==e.type?a.getAttribute("col_id"):a.getAttribute("id"))==e.id){i=a.getAttribute(e.attr);break}}}}return i},T.prototype._setAttribute=function(t,e){for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes[i];if(1==o.nodeType)for(var s=0;s<o.childNodes.length;s++){var r=o.childNodes[s];if(1==r.nodeType){if(("body"==e.type?r.getAttribute("col_id"):r.getAttribute("id"))==e.id){r.setAttribute("excelExpression",e.excelExpression);break}}}}},T.prototype.cancleDownload=function(){clearTimeout(this.excelTime),this.hideDownloadLayer()},T.prototype.hideDownloadLayer=function(){window.gridExceldownloadIframe.style.display="none",this.excelOptions=null,this.excelInfoArr=null,this.excelFinalStr=null,window.downloadGridId=null,WebSquare.getBody().hideModal(!0)},T.prototype.saveBigExcelFile=function(t,e,i){i&&(t.rowsByN=i),t.massStorage=!0,this.advancedExcelDownload(t,e)},T.prototype._getExcelStyle=function(t){for(var e={},i={},o={},s={},r={},n=this.getColumnCount(),l=0;l<n;l++){var h=(u=this.getCellInfo(l)).options.className;if(h){var d=document.querySelector("."+h);d&&(e[l]={"text-align":WebSquare.style.getComputedStyle(d,"text-align")})}}for(var l in this.columnStyleValueObj){var u,c={}
;for(var p in this.columnStyleValueObj[l])"style"!=p&&(c[p]=this.columnStyleValueObj[l][p]);if((u=this.getCellInfo(parseInt(l,10)))&&u.options.textAlign){var g="";""==(g=this.getColumnStyleValue(parseInt(l,10),"text-align"))&&""==(g=u.options.textAlign)&&(g="center"),c["text-align"]=g}e[l]=c}for(l=0;l<this.rowStyleArr.length;l++)if(this.rowStyleArr[l]){c={};for(var p in this.rowStyleValueObj[this.rowStyleArr[l]])"style"!=p&&(c[p]=this.rowStyleValueObj[this.rowStyleArr[l]][p]);var m=this.getDisplayRowIndex(l);isNaN(m)||(i[m]=c)}for(l=0;l<this.cellStyleArr.length;l++)if(this.cellStyleArr[l]){c={};var f=parseInt(l/this.oneRowDataLength,10),b=(m=this.getDisplayRowIndex(f),l%this.oneRowDataLength);for(var p in this.cellStyleValueObj[this.cellStyleArr[l]])"style"!=p&&this.cellStyleValueObj[this.cellStyleArr[l]][p]&&(c[p]=this.cellStyleValueObj[this.cellStyleArr[l]][p]);o[m+","+b]=c}for(l=0;l<this.cellClassArr.length;l++)if(this.cellClassArr[l]){c={},f=parseInt(l/this.oneRowDataLength,10),m=this.getDisplayRowIndex(f),b=l%this.oneRowDataLength;var y=a.D.getStyleFromCssStr(this.cellClassArr[l],["backgroundColor","color","textAlign","fontSize","fontWeight","fontFamily"]);o[m+","+b]&&(c=o[m+","+b]),y.backgroundColor&&(c["background-color"]=y.backgroundColor),y.color&&(c.color=y.color),y.textAlign&&(c["text-align"]=y.textAlign),y.fontSize&&(c["font-size"]=y.fontSize),y.fontWeight&&(c["font-weight"]=y.fontWeight),y.fontFamily&&(c["font-family"]=y.fontFamily),o[m+","+b]=c}var v="",w=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));for(l=this.defaultColCnt;l<w.length;l++){var S="",C=w[l].id.replace(this.id+"_",""),x=this.headerCellStyleValueObj[C];v=x&&x["background-color"]?x["background-color"]:t.headerColor?t.headerColor:WebSquare.style.getStyle(w[l],"background-color"),S+="color:"+WebSquare.style.getStyle(w[l],"color")+";",S+="background-color:"+v+";",S+="font-weight:"+WebSquare.style.getStyle(w[l],"font-weight")+";",S+="font-family:"+WebSquare.style.getStyle(w[l],"font-family")+";",S+="text-align:"+WebSquare.style.getStyle(w[l],"text-align")+";",s[w[l].getAttribute("header_id")]=S}if(this.hasFooter){var _=this.getDomList("foot_tds","th",this.getElementById(this.id+"_foot_table"));for(l=this.defaultColCnt;l<_.length;l++){S="";S+="color:"+WebSquare.style.getStyle(_[l],"color")+";",S+="background-color:"+WebSquare.style.getStyle(_[l],"background-color")+";",S+="font-weight:"+WebSquare.style.getStyle(_[l],"font-weight")+";",S+="font-family:"+WebSquare.style.getStyle(_[l],"font-family")+";",S+="text-align:"+WebSquare.style.getStyle(_[l],"text-align")+";",r[_[l].getAttribute("footer_id")]=S}}return JSON.stringify({row:i,col:e,cell:o,header:s,footer:r})},T.prototype._getExcelSubtotalData=function(t){t||(t=",");var e=[];e.push('"');for(var i=this.getDataLength(),o=0;o<i;o++){var s=o;for(var r in this.subtotalTableList){var a=this.dataList._getCellData(s,r),n=a+"_12";if(s<i-1)n=this.dataList._getCellData(s+1,r);if(a!=n){var l=this.subtotalTableList[r],h=this.subtotalDataArr[r+"_"+a];null==h&&(h=this.getSubtotalData(l,r,a,s));for(var d="",u=l.getElementsByTagName("td"),c=0;c<u.length;c++){var p=u[c],g=p.getAttribute("id");if(!g.startsWith("_headerRowNumber")&&!g.startsWith("_headerRowStatus")){if(null!=h[g])d=h[g];else if("true"==p.getAttribute("colMerge"))d="";else{d=null!=(d=p.getAttribute("value"))?d:""}e.push(d),e.push('"'+t+'"')}}}}}return e[e.length-1]='"',e.join("")},T.prototype.getExcelGroupbyStyle=function(){try{if(this.groupbyStatus.grouped){var t={rowNumHeader:{type:"H",index:2},rowNumFooter:{type:"F",index:2},rowStatusHeader:{type:"H",index:3},rowStatusFooter:{type:"F",index:3},groupbyHeader:{type:"H",index:-1},groupbyFooter:{type:"F",index:-1}},e=4,i=4,o=!1,s=!1,a=[],n=[],l=[],h={};a.push("<w2:groupby>"),n.push("<w2:groupbyHeader>"),l.push("<w2:groupbyFooter>"),n.push("<w2:row>"),l.push("<w2:row>");var d=this.defaultColCnt+this.getColCnt(),u=0,c=0
;this.options.rowNumVisible&&(this.groupbyDisplayOptions.rowNumHeader&&(this.groupbyDisplayOptions.rowNumHeader.hidden||(c+=parseInt(this.groupbyDisplayOptions.rowNumHeader.colSpan,10)||1)<=d&&(h.rowNumHeader=this.groupbyDisplayOptions.rowNumHeader)),this.groupbyDisplayOptions.rowNumFooter&&(this.groupbyDisplayOptions.rowNumFooter.hidden||(u+=parseInt(this.groupbyDisplayOptions.rowNumFooter.colSpan,10)||1)<=d&&(h.rowNumFooter=this.groupbyDisplayOptions.rowNumFooter))),this.options.rowStatusVisible&&(this.groupbyDisplayOptions.rowStatusHeader&&(this.groupbyDisplayOptions.rowStatusHeader.hidden||(c+=parseInt(this.groupbyDisplayOptions.rowStatusHeader.colSpan,10)||1)<=d&&(h.rowStatusHeader=this.groupbyDisplayOptions.rowStatusHeader)),this.groupbyDisplayOptions.rowStatusFooter&&(this.groupbyDisplayOptions.rowStatusFooter.hidden||(u+=parseInt(this.groupbyDisplayOptions.rowStatusFooter.colSpan,10)||1)<=d&&(h.rowStatusFooter=this.groupbyDisplayOptions.rowStatusFooter))),h.groupbyHeader=[],h.groupbyFooter=[];for(var p=this.groupbyDisplayOptions.groupbyHeader,g=0;g<p.length;g++)p[g].hidden||(c+=parseInt(p[g].colSpan,10)||1,h.groupbyHeader[g]=p[g]);var m=this.groupbyDisplayOptions.groupbyFooter;for(g=0;g<m.length;g++)m[g].hidden||(u+=parseInt(m[g].colSpan,10)||1,h.groupbyFooter[g]=m[g]);if(e<d){var f=d-c;for(g=0;g<f;g++)h.groupbyHeader.push({temp:!0})}if(i<d)for(f=d-u,g=0;g<f;g++)h.groupbyFooter.push({temp:!0});for(var b in this.groupbyStatus.excelDisplayOptions=h,h){var y,v=[];switch(b){case"rowNumHeader":case"rowNumFooter":case"rowStatusHeader":case"rowStatusFooter":v.push("<w2:column");var w=h[b],S=!1;for(var C in w)if("align"==C||"hidden"==C||"colSpan"==C){if("hidden"==C){S=!0;break}v.push(" "+C+'="'+w[C]+'"'),"rowNumHeader"!=b&&"rowNumFooter"!=b||"colspan"==C.toLowerCase()&&w[C]>=this.defaultColCnt+this.getColCnt()&&("rowNumHeader"==b?o=!0:s=!0)}if(S)break;if("rowStatusHeader"==b&&o)break;if("rowStatusFooter"==b&&s)break;b.match("rowNum")?v.push(' type="rowNum"'):b.match("rowStatus")&&v.push(' type="rowStatus"'),v.push("/>"),y=t[b];break;case"groupbyHeader":case"groupbyFooter":S=!1;var x=h[b];if(x.length>0){var _,I=0,T=0,k=0,D=0,L=this.htmlInfo?this.htmlInfo.body.rowArr:this.struct.body.rowArr;for(g=0;g<L.length;g++){for(var W=L[g],A=0;A<W.length;A++){var E=W[A];I+=parseInt(E.colSpan,10)||1}T<I&&(T=I),I=0}_=new Array(T);for(g=0;g<x.length;g++){var M=[];for(var C in M.push("<w2:column"),x[g])if("align"==C||"hidden"==C||"colSpan"==C||"rowSpan"==C||"displayFormat"==C){if("hidden"==C){M.pop();break}M.push(" "+C+'="'+x[g][C]+'"')}M.push("/>"),v.push(M.join(""));var q=parseInt(x[g].colSpan,10)||1,R=parseInt(x[g].rowSpan,10)||1;if(0===D){if(void 0===_[k])if(q>1)for(var N=0;N<q;N++)_[k+N]=R;else _[k]=R}else{_[k]>1?_[k]-=1:_[k]=R;for(var F=k+1;1!==_[F]&&F<T;)_[F]-=1,k+=1,F+=1}T<=(k+=q)&&g!=x.length-1&&(v.push("</w2:row><w2:row>"),k=0,D+=1)}}y=t[b]}y&&("H"==y.type?-1==y.index?(n[e]=v.join(""),e++):n[y.index]=v.join(""):"F"==y.type&&(-1==y.index?(l[i]=v.join(""),i++):l[y.index]=v.join(""))),y=null}return n.push("</w2:row>"),l.push("</w2:row>"),n.push("</w2:groupbyHeader>"),l.push("</w2:groupbyFooter>"),a.push(n.join("")),a.push(l.join("")),a.push("</w2:groupby>"),a.join("")}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getExcelGroupbyHeaderValue=function(){this.groupbyStatus.headerValueObj={},this.getAllGroupbyHeaderValueObj();var t=[];t.push("<array><![CDATA["),t.push("[");for(var e=0;e<this.groupbyStatus.groupedRowIndexArr.length;e++){var i=this.groupbyStatus.groupedRowIndexArr[e];if("header"==i.type){for(var o=this.groupbyStatus.headerValueObj[i.groupId],s=0;s<o.length;s++)null!=o[s]&&(t.push('"'+o[s]+'"'),s<o.length-1&&t.push(","));o.length>0&&t.push(",")}}return t.pop(),t.push("]"),t.push("]]></array>"),t.join("")},T.prototype.getExcelGroupbyFooterValue=function(){this.groupbyStatus.footerValueObj={},this.getAllGroupbyFooterValueObj();var t=[];t.push("<array><![CDATA["),t.push("[")
;for(var e=0;e<this.groupbyStatus.groupedRowIndexArr.length;e++){var i=this.groupbyStatus.groupedRowIndexArr[e];if("footer"==i.type){for(var o=this.groupbyStatus.footerValueObj[i.groupId],s=0;s<o.length;s++)null!=o[s]&&(t.push('"'+o[s]+'"'),s<o.length-1&&t.push(","));o.length>0&&t.push(",")}}return t.pop(),t.push("]"),t.push("]]></array>"),t.join("")},T.prototype.getExcelGroupbyStatusValue=function(){var t=[];t.push("<array><![CDATA["),t.push("[");for(var e=0;e<this.groupbyStatus.groupedRowIndexArr.length;e++){var i=this.groupbyStatus.groupedRowIndexArr[e];if("number"==typeof i)t.push('"0B"');else{switch(i.type){case"header":var o='"'+i.depth+'H"';break;case"footer":o='"'+i.depth+'F"'}t.push(o)}e<this.groupbyStatus.groupedRowIndexArr.length-1&&t.push(",")}return t.push("]"),t.push("]]></array>"),t.join("")},T.prototype.getExcelGroupbyStyleData=function(){var t=this.getElementById(this.id+"_body_tbody").childNodes,e=[];e.push("<array><![CDATA["),e.push("[");for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++){var o=this.groupbyStatus.groupedRowIndexArr[i];if("number"!=typeof o){var s=t[o.index];if(!e[o.depth+2]){var r,a='"';for(var n in 0!=i&&(a=',"'),this.groupbyStatus.excelDisplayOptions){var l=!1;switch(n){case"rowNumHeader":l=!0,r=0;break;case"rowStatusHeader":l=!0,r=this.defaultColCnt-1;break;case"groupbyHeader":l=!0,r=this.defaultColCnt}if(l)break}var h=s.getElementsByTagName("TD")[r];a+="background-color:"+WebSquare.style.getStyle(h,"background-color")+";",a+="font-size:"+WebSquare.style.getStyle(h,"font-size")+";",a+="color:"+WebSquare.style.getStyle(h,"color")+";",a+="font-weight:"+WebSquare.style.getStyle(h,"font-weight")+";",a+="font-family:"+WebSquare.style.getStyle(h,"font-family")+";",a+='"',e[o.depth+2]=a}}}return e.push("]"),e.push("]]></array>"),e.join("")},T.prototype.getAllGroupbyHeaderValueObj=function(){for(var t=0;t<this.groupbyStatus.groupedRowIndexArr.length;t++)if("number"!=typeof this.groupbyStatus.groupedRowIndexArr[t]){var e=this.groupbyStatus.groupedRowIndexArr[t],i=0;this.options.rowNumVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowNumHeader),i++),this.options.rowStatusVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowStatusHeader),i++);for(var o=0;o<this.groupbyStatus.excelDisplayOptions.groupbyHeader.length;o++)this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.groupbyHeader[o]),i++}},T.prototype.getAllGroupbyFooterValueObj=function(){for(var t=0;t<this.groupbyStatus.groupedRowIndexArr.length;t++)if("number"!=typeof this.groupbyStatus.groupedRowIndexArr[t]){var e=this.groupbyStatus.groupedRowIndexArr[t],i=0;this.options.rowNumVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowNumFooter),i++),this.options.rowStatusVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowStatusFooter),i++);for(var o=0;o<this.groupbyStatus.excelDisplayOptions.groupbyFooter.length;o++)this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.groupbyFooter[o]),i++}},T.prototype.getGroupbyData=function(t){try{if(this.options.groupbyZone)return!1===t?this.groupbyStatus.groupbyOptions:JSON.parse(this.groupbyStatus.groupbyOptions)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setGroupbyData=function(t,e,i){var o,s,r=(i=i||{}).value||"",a=i.inputType||"",n=i.depthVisible||!1,l=i.expression||"",h=i.hidden?"none":"",d=i.displayFormatType||"text",u=i.displayFormat||"",c=i.displayFormatter||null;if(a)switch((u||c)&&(o=new WebSquare.format.createFormatter(d,u,c,null,null,null,this.scope_id,this.id)),a){case"toggleButton":s="open"==t.status?"-":"+";break;case"expression":if(l){var p=this.groupbyInfo[t.groupId].header;p.colIndex=e;var g=0;if("open"==p.status){for(var m,f=p.index;f<this.groupbyStatus.groupedRowIndexArr.length;f++){if("footer"==(b=this.groupbyStatus.groupedRowIndexArr[f]).type&&b.depth==p.depth){m=b.index;break}}if(!m){
for(f=p.index+1;f<this.groupbyStatus.groupedRowIndexArr.length;f++){var b;if("header"==(b=this.groupbyStatus.groupedRowIndexArr[f]).type&&b.depth==p.depth){m=b.index;break}}m||(m=this.groupbyStatus.groupedRowIndexArr.length-1)}g=this.groupExpression(this.groupbyStatus.groupedRowIndexArr,p.index,m,l,p)}else g=this.groupExpression(p.closedChildArr,0,p.closedChildArr.length-1,l,p);if(o&&(g=o.format(g)),"string"==typeof(s=g)&&(s.match("w2grid_minus")||s.match("w2grid_plus"))){var y=s.lastIndexOf("</span>");y>-1&&(y+=7,s=s.slice(y),"open"==t.status?s="-||"+s:"closed"==t.status&&(s="+||"+s))}}}if(n&&(s=t.groupId),r&&(o&&(r=o.format(r)),s=r),!s){s="";f=0;for(var v in i)f++;0==f&&(h="none")}"none"!=h&&("header"==t.type?(this.groupbyStatus.headerValueObj[t.groupId]||(this.groupbyStatus.headerValueObj[t.groupId]=[]),this.groupbyStatus.headerValueObj[t.groupId][e]=s):"footer"==t.type&&(this.groupbyStatus.footerValueObj[t.groupId]||(this.groupbyStatus.footerValueObj[t.groupId]=[]),this.groupbyStatus.footerValueObj[t.groupId][e]=s))},T.prototype.getTotalRow=function(){return this.dataList.getTotalRow()},T.prototype.getTotalCol=function(){return this.oneRowDataLength},T.prototype.editEndBeforeGetData=function(){this.editedCell&&this.rollbackCommitFlag&&1==this.options.rollbackCommit&&(1==this.options.moveKeyEditModeAll&&1==this.checkScrollEnd||(this.rollbackCommitFlag=!1,this.editedCell.handleEndEdit(),this.rollbackCommitFlag=!0))},T.prototype.getExtraDataObj=function(t,e,i){var o=this.extraData;return"grid"==t?o.grid:"row"==t?(o.row[e]||(o.row[e]={}),o.row[e]):"col"==t?(o.col[e]||(o.col[e]={}),o.col[e]):"cell"==t?(o.cell[e]||(o.cell[e]=[]),o.cell[e][i]||(o.cell[e][i]={}),o.cell[e][i]):null},T.prototype.finalize=function(){try{for(var t in null!=this.tempDiv&&null!=this.tempDiv.parentNode&&(this.tempDiv.innerHTML=""),null!=this.tempTr&&null!=this.tempTr.parentNode&&(this.tempTr.innerHTML=""),n.s.removeCheckResize(this.uuid),a.D.clearInterval(this.id+"_dragSelectAutoScroll"),s.v.clearTimer(this.id+"initializeEvent"),this.dom){var e=this.dom[t],i=null;null!=e&&(i=WebSquare.idCache[e.uuid]),i&&"function"==typeof i.remove&&i.remove(),delete this.dom[t]}this._dataList&&this._dataList.childCompHash&&delete this._dataList.childCompHash[this.id],null!=this._manager&&this._manager.destroy(),null!=this.customFilter&&this.customFilter.remove()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setFixedColumn=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.fixedColumn>0)for(var e=this.getColumnCount(),i=0;i<this.lastIndex+1;i++){var o=this.data_td_list[i*e+this.options.fixedColumn];o&&this.removeClass(o,"w2grid_fixedColumn")}this.options.fixedColumn=t,this.arrangeOverflowXScroll()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setFixedRightColumn=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.fixedRightColumn>0)for(var e=this.getColumnCount(),i=this.getFixedRightColumnLastIndex(),o=0;o<this.lastIndex+1;o++){var s=this.data_td_list[o*e+(i-this.defaultColCnt)];s&&this.removeClass(s,"w2grid_fixedRightColumn")}this.options.fixedRightColumn=t,this.arrangeOverflowXScroll(),this._handleScrollX()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setFixedRow=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.fixedRow>0){var e=this.dataRowList[this.oneRowLength*(this.options.fixedRow-1)];e&&this.removeClass(e,"w2grid_fixedRow")}this.options.fixedRow=t,this.applyRowStyleOptions(t-1)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setLastFixedRow=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.lastFixedRow>0){var e=this.dataRowList[this.oneRowLength*(this.lastIndex-this.options.lastFixedRow)];e&&this.removeClass(e,"w2grid_lastFixedRow")}this.options.lastFixedRow=t,this.drawData(this.rowIndex,this.lastIndex-t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getOverflowX=function(){return this.options.overflowX},T.prototype.getOverflowY=function(){
return this.options.overflowY},T.prototype.getColumnVisible=function(t){var e=t,i=(t=this.getColumnIndex(t),s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/getColumnVisible/@useRealColIndex"));if(a.D.getBoolean(i)){if("number"!=typeof e){for(var o=this.getCellInfo(e),r=this._getRealColIndex("body",e),n=r+this.defaultColCnt,l=!this.hiddenList[n],h=0;h<o.options.colSpan;h++)l=!this.hiddenList[n+h]||l;return 0===r||r?l:void c.k.printLog("[getColumnVisible] 존재하지 않는 body 컬럼입니다.")}t=e%this.columnOrder.length;for(var d=0;d<this.columnOrder.length;d++)if(this.columnOrder[d]==t){t=d;break}if(e>this.columnOrder.length||d===this.columnOrder.length)return void c.k.printLog("[getColumnVisible] 존재하지 않는 body 컬럼입니다.")}return!this.hiddenList[this.defaultColCnt+t]},T.prototype.getColumnWidth=function(t,e){var i=e?this.defaultColCnt:0;if(t=this.getColumnIndex(t)+i,this.colWidthList[t])return this.colWidthList[t]},T.prototype.setColumnWidth=function(t,e,i){t=this.getDisplayColumnIndex(t);var o=this.colWidthList[t],s=!0===i?0:this.defaultColCnt;this.colWidthList[t]&&(this.options.autoFit&&!this.hiddenList[t+s]?(this.autoFitColWidthList=null,this._setAutoFit({exceptCol:s+t,exceptWidth:e})):this._setColumnWidth(s+t,e)),i&&(t-=this.defaultColCnt),u.B.fireEvent(this,"oncolumnwidthchange",{columnIndex:t,columnID:this.getColumnID(t),oldWidth:o,newWidth:e})},T.prototype.isColumnResizable=function(t){try{if(t<this.defaultColCnt)return!0===this.options.rowNumStatusResize;if(void 0===t||""===t)return!1;if(isNaN(t)&&(t=this.getColumnIndex(t)+this.defaultColCnt),isNaN(t)||t>=this.getColumnCount()+this.defaultColCnt)return!0;for(var e,i=this.htmlInfo.head.rowArr[0],o=!0,s=0;s<i.length;s++)if(i[s].colIndex==this.columnOrder[t]&&"string"==typeof i[s].fixColumnWidth&&"true"===i[s].fixColumnWidth.toLowerCase()){o=!1;break}if(!this.cellInfoHash||a.D.isEmptyObject(this.cellInfoHash))(e=this.cellInfoHash2[this.getColumnID(this.columnOrder[t-this.defaultColCnt])])&&!0===a.D.getBoolean(e.getAttribute("fixColumnWidth"))&&(o=!1);else(e=this.cellInfoHash[this.getColumnID(this.columnOrder[t-this.defaultColCnt])])&&e.options.fixColumnWidth&&(o=!1);return o}catch(t){return r.w.printStackTrace(t,null,this),!0}},T.prototype.setColumnDisableEdit=function(t,e){try{var i=this.getCellInfo(t);"autoComplete"==i.options.inputType&&i.setColumnDisableEdit(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnNodeSet=function(t,e,i,o){try{var s=this.getCellInfo(t);("select"==s.options.inputType||"autoComplete"==s.options.inputType||"checkcombobox"==s.options.inputType)&&s.setColumnNodeSet(e,i,o),s.hasRef&&(s.refHash=[]),s.itemsetObj&&s.mainGrid.refresh()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnGridItemset=function(t,e){try{var i=this.getCellInfo(t);("select"==i.options.inputType||"autoComplete"==i.options.inputType||"checkcombobox"==i.options.inputType)&&i.setColumnGridItemset(e),i.hasRef&&(i.refHash=[]),i.itemsetObj&&i.mainGrid.refresh()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnDisplayFormat=function(t,e){try{var i=this.getCellInfo(t);return i.options.displayFormat=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnDisplayFormatter=function(t,e){try{var i=this.getCellInfo(t);return i.options.displayFormatter=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnIoFormat=function(t,e,i){try{"object"===(0,l.Z)(arguments[0])?this._setColumnIoFormat(arguments[0]):this._setColumnIoFormat({colIndex:t,ioFormat:e,dateMask:i})}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._setColumnIoFormat=function(t){try{var e=t.colIndex,i=t.ioFormat,o=t.dateMask,s=t.useMonthYearFormat,a=t.calendarDisplayFormat,n=this.getCellInfo(e);if(!n||"date"!==n.options.dataType)return;var l=!1,h=n.options.ioFormat;if("string"==typeof i&&(l=i!==h,n.options.ioFormat=i),"string"==typeof o&&(n.options.displayFormat=o),
"calendar"===n.options.inputType&&(n.options.useMonthYearFormat=s,"string"==typeof a&&(n.options.calendarDisplayFormat=a)),n.initFormatter(),!0===l){var d=this.getInput(n);if(d&&"function"==typeof d.setIoFormat){t={ioFormat:i,displayFormat:o,useMonthYearFormat:s,calendarDisplayFormat:a};d.setIoFormat(t)}if(n.options.useMonthYearFormat)this.drawColumnData(e);else for(var u=this.getRowCount(),c=WebSquare.format.createFormatter(n.options.dataType,i,"",h,null,null,this.scope_id,this.id),p=0;p<u;p++){var g=this.dataList._getCellData(p,n.colID),m=c.format(g);this.dataList.__setCellData(p,n.colID,m)}}else this.drawColumnData(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnChooseOption=function(t,e,i){try{var o=this.getCellInfo(t);"select"==o.options.inputType&&o.setColumnChooseOption(e,i)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnVisibleColumn=function(t,e,i){try{var o=this.getCellInfo(t);!0==={select:!0,checkcombobox:!0,autoComplete:!0}[o.options.inputType]&&(null==o[o.options.inputType]&&o._createComponent(0),o[o.options.inputType]&&"function"==typeof o[o.options.inputType].setVisibleColumn&&o[o.options.inputType].setVisibleColumn(e,i))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnEnableColumn=function(t,e,i){try{var o=this.getCellInfo(t);!0==={select:!0,checkcombobox:!0,autoComplete:!0}[o.options.inputType]&&(null==o[o.options.inputType]&&o._createComponent(0),o[o.options.inputType]&&"function"==typeof o[o.options.inputType].setEnableColumn&&o[o.options.inputType].setEnableColumn(e,i))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.showChooseOption=function(t,e){try{var i=this.getCellInfo(t);"select"==i.options.inputType&&i.showChooseOption(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setRowNumColumnWidth=function(t){this.options.rowNumVisible&&!isNaN(Number(t))&&this._setColumnWidth(0,t)},T.prototype.setRowStatusColumnWidth=function(t){var e=0;this.options.rowNumVisible&&(e=1),this.options.rowStatusVisible&&(this.options.autoFit&&!this.hiddenList[e]?(this.autoFitColWidthList=null,this._setColumnWidth(e,t),this._setAutoFit()):this._setColumnWidth(e,t))},T.prototype.setGridHeight=function(t){try{parseInt(t)+""==t&&(t+="px"),this.setStyle("height",t),-1!==this.options.initFixedHeightByRowNum&&(this.options.initFixedHeightByRowNum=-1,this.options.visibleRowNum=""),this.handleScrollY({},{changedHeight:!0}),this.handleResize()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setGridWidth=function(t){parseInt(t)+""==t&&(t+="px"),this.setStyle("width",t),this.handlerResize_drawInitializer()},T.prototype.setGridSize=function(t,e){var i=parseInt(t),o=parseInt(e);i>=0&&o>=0?(this.setGridWidth(t),this.setGridHeight(e)):c.k.printLog("[Warning] Number of Entered in the width and height must be a valid integer greater than 0.["+this.id+"]")},T.prototype.setGridReadOnly=function(t){try{t=a.D.getBoolean(t),this.options.readOnly=t,this.notifyDataChanged()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getGridReadOnly=function(){try{return this.options.readOnly}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.initGrid=function(){try{this.loadCheck=[],this.initFlag=!0,this.skipScrollEndEvent=!0,this.skipScrollStartEvent=!0,this.removeAllFinish=!0,this.lastIndex=-1,this.lastTopRowIndex=null,this.bScrollTop=-1;var t=this.hiddenRowObj.extraRow;this.hiddenRowObj={length:0,extraRow:t,row:{},init:!1},this.initHeightCompleted=!1,this.hasFooter&&this.initFooterDataObj(),this.initHeaderDataObj();var e=this.dataList.removeAll();return this.removeAllFinish=!1,this.dataList.clearFilter(),this.initColumns(),e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setInitValue=function(){try{this.initGrid()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setDisplayFormat=function(t,e){try{var i=this.getCellInfo(t);return i.element&&i.element.setAttribute("displayFormat",e),i.options.displayFormat=e,i.initFormatter(),void this.drawColumnData(t)
}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setDisplayFormatter=function(t,e){try{var i=this.getCellInfo(t);return i.options.displayFormatter=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setFormat=function(t,e){try{var i=this.getCellInfo(t);if(e.ioFormat){var o=i.mainGridId+i.id,s=this.dom[o];s&&s.setFormat({ioFormat:e.ioFormat,displayFormat:e.ioFormat});for(var a=WebSquare.format.createFormatter("date",e.ioFormat,"",i.options.ioFormat,null,null,this.scope_id,this.id),n=0;n<this.getDataLength();n++){var l=this.getColumnID(t),h=this.dataList._getCellData(n,l),d=a.format(h);this.dataList.__setCellData(n,l,d)}}return i.options.ioFormat=e.ioFormat||i.options.ioFormat,i.options.displayFormat=e.displayFormat||i.options.displayFormat,i.options.displayFormatter=e.displayFormatter||i.options.displayFormatter,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCustomFormatter=function(t,e){try{var i=this.getCellInfo(t);return i.options.customFormatter=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setAllowChar=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if("text"!=o&&"input"!=o&&"textImage"!=o&&"secret"!=o)return $l("cell의 inputType이 올바르지 않습니다."),!1;var s=this.getInput(i);return i.options.allowChar=e,void(s&&s.options&&("input"===s.options.pluginName||"textarea"===s.options.pluginName)&&s.setAllowChar(e))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.changeCurrency=function(t,e,i,o,a){try{var n=this.getColumnIndex(t),l=this.getCellInfo(n);if(!e||"float"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e)return;"number"===e&&"true"===this.options.floatNumber&&(e="float");var h=e;switch(e){case"number":case"float":i||(this.options.numberMask||(this.options.numberMask=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+h+'"]/numberMask/@value')||""),i=this.options.numberMask),l.options.delimiter=o||",",l.options.decimalDelimiter=a||".";break;case"euro":i||(this.options.euroMask||(this.options.euroMask=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+h+'"]/euroMask/@value')||""),i=this.options.euroMask),l.options.delimiter=o||".",l.options.decimalDelimiter=a||",";break;case"rupee":i||(this.options.rupeeMask||(this.options.rupeeMask=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+h+'"]/rupeeMask/@value')||""),i=this.options.rupeeMask),l.options.delimiter=o||",",l.options.decimalDelimiter=a||".";break;case"tenge":i||(this.options.tengeMask||(this.options.tengeMask=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+h+'"]/tengeMask/@value')||""),i=this.options.tengeMask),l.options.delimiter=o||" ",l.options.decimalDelimiter=a||"-"}if(!i)return;l.options.dataType=e,l.options.displayFormat=i,l.initFormatter(),this.drawColumnData(n),this.initFooterDataObj(l.colID),this.drawFooter(l.colID);var d=l.mainGridId+l.id,u=this.dom[d];if(u)if(u.options.dataType=e,u.options.displayFormat=i,u.options.delimiter=l.options.delimiter,u.options.decimalDelimiter=l.options.decimalDelimiter,u.validator.clearCommand(),"number"===u.options.dataType)u.validator.addCommand(new WebSquare.validator.numberCommand(u.options.delimiter,u.options.decimalDelimiter)),u.validator.addCommand(new WebSquare.validator.digitCommand(u.options.delimiter,u.options.decimalDelimiter),!0);else if("euro"===u.options.dataType||"rupee"===u.options.dataType||"tenge"===u.options.dataType)if(u.options.maxlength>=0||-1!==(u.options.maxlength+"").indexOf("*")||u.floatMaxlength>=0){var c=u.floatMaxlength>=0?u.floatMaxlength:u.options.maxlength
;u.validator.addCommand(new WebSquare.validator.floatCommand(u.options.delimiter,u.options.decimalDelimiter,u.options.applyFormat)),u.validator.addCommand(new WebSquare.validator.maxFloatLengthCommand(c,u.options.decimalDelimiter,u.options.delimiter)),u.validator.removeCommand(new WebSquare.validator.maxLengthCommand(c)),u.floatMaxlength=c,u.options.maxlength="-1"}else u.validator.addCommand(new WebSquare.validator.floatCommand(u.options.delimiter,u.options.decimalDelimiter,u.options.applyFormat),!0)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setDataType=function(t,e){try{if(!e||"number"!=e&&"text"!=e&&"float"!=e)return;var i=this.getCellInfo(t);if(i.options.dataType==e)return;i.options.dataType;i.options.dataType=e;var o=this.getColumnID(t);this.setColumnOption(o,"dataType",e);var s=i.mainGrid.getElementById(i.mainGridId+o);if(i.options.displayFormat="",s){switch(s.validator.clearCommand(),e){case"number":s.validator.addCommand(new WebSquare.validator.allowCharCommand("+\\-.0-9"));break;case"float":s.validator.addCommand(new WebSquare.validator.floatCommand(s.options.delimiter,s.options.decimalDelimiter,s.options.applyFormat))}var a=s.options.maxlength&&parseInt(s.options.maxlength)>-1?s.options.maxlength:null;a||(a=s.options.maxLength&&parseInt(s.options.maxLength)>-1?s.options.maxLength:null),a&&("float"==e?(i.setFloatMaxLength(a),s.render&&"input"==s.render.tagName.toLowerCase()&&s.render.removeAttribute("maxLength")):i.setMaxLength(a))}i.initFormatter()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setDefaultDate=function(t,e){try{var i=this.getCellInfo(t);if("calendar"!=i.options.inputType)return $l("cell의 inputType이 올바르지 않습니다."),!1;var o=this.getInput(i);i.options.defaultDate=e,o&&o.setDefaultDate(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.disableBeforeDate=function(t,e){try{var i=this.getCellInfo(t);if("calendar"!=i.options.inputType)return $l("cell의 inputType이 올바르지 않습니다."),!1;var o=this.getInput(i);i.options.disableBeforeDate=e,o&&o.disableBeforeDate(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.disableAfterDate=function(t,e){try{var i=this.getCellInfo(t);if("calendar"!=i.options.inputType)return $l("cell의 inputType이 올바르지 않습니다."),!1;var o=this.getInput(i);i.options.disableAfterDate=e,o&&o.disableAfterDate(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setMaxLength=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if("text"!=o&&"textarea"!=o&&"input"!=o&&"textImage"!=o&&"secret"!=o)return;"text"==o&&"float"==i.options.dataType?i.setFloatMaxLength(e):i.setMaxLength(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getMaxLength=function(t){try{var e=this.getCellInfo(t),i=e.options.inputType;if("text"!=i&&"textarea"!=i&&"input"!=i&&"textImage"!=i&&"secret"!=i)return;return e.options.maxLength}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.spanAll=function(t){try{"number"==typeof t?this.showDepth=t+"":(t=a.D.getBoolean(t),this.showDepth=1==t?"9999":"1"),this.initDrilldown(),this.rowIndex=-1,this.lastIndex=-1,this.lastTopRowIndex=null,this.drawData(0,0),this.setScrollYHeight({noDraw:!0}),this.displayNoResultMessage()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getCellDisplayData=function(t,e){try{var i=(this._linkedDataList||this._dataList).getRealRowIndex(t);return this._getDisplayData(i,e)}catch(t){r.w.printStackTrace(t)}},T.prototype._getCellDisplayData=function(t,e,i){try{var o=this.getRealRowIndex(t);return this._getDisplayData(o,e,i)}catch(t){r.w.printStackTrace(t)}},T.prototype._getDisplayData=function(t,e,i){try{this.editEndBeforeGetData();e=this.getColumnID(e);var o=this.getColumnIndex(e),s=this.cellInfoHash[e];0==s.internal&&"custom"==s.options.inputType&&s.cellManagerHashByRowIndex[t]&&(s=s.cellManagerHashByRowIndex[t]);var n=this.dataList._getData(t,e),l=this.getDisplayRowIndex(t),h=this._getGroupbyDisplayRowIndex(l);if(s.options.customModelUnformatter){
var d=a.D.getGlobalFunction(s.options.customModelUnformatter,this.scope_id);"function"==typeof d&&(n=d.call(this,n,h,o))}if(s.options.maskFormat&&(n=this.getInput(s[o]).maskFormatModelUnFormat(n)),s.useEscapeFormatter){var u=a.D.getGlobalFunction(s.options.escapeFormatter,this.scope_id);"function"==typeof u&&(n=u.call(this,n,h,o))}if(s.useCustomFormatter&&1!=this.options.keepBeforeDisplayData){var c="true"===s.getEscape()?s.getDisplayData(WebSquare.xml._encode(n+""),t):s.getDisplayData(n,t),p=a.D.getGlobalFunction(s.options.customFormatter,this.scope_id);"function"==typeof p&&(n=this.options.customFormatterRealRowIndex?p.call(this,n,c,t,o):p.call(this,n,c,h,o))}else 0==s.internal&&"custom"==s.options.inputType&&(s=s.cellManagerHashByRowIndex[t]?s.cellManagerHashByRowIndex[t]:s),n=s.getDisplayData(n,t,i);return null==n&&(n=""),n}catch(t){r.w.printStackTrace(t)}},T.prototype.initPasteDrilldown=function(){try{var t={showDepth:this.showDepth,depthColumn:this.depthColumn,dataColumn:""};"string"==typeof t.depthColumn&&(null==this.bodyIdColIndexMap[t.depthColumn]?(t.dataColumn="dataList",t.depthColumn=this._dataList.bodyIdColIndexMap[t.depthColumn]):(t.dataColumn="gridview",t.depthColumn=this.bodyIdColIndexMap[t.depthColumn])),this.drilldown.pasteDrilldownInitialize(this,t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.initDrilldown=function(t){try{"string"==typeof(t={showDepth:this.showDepth,depthColumn:this.depthColumn,dataColumn:""}).depthColumn&&(null==this.bodyIdColIndexMap[t.depthColumn]?(t.dataColumn="dataList",t.depthColumn=this._dataList.bodyIdColIndexMap[t.depthColumn]):(t.dataColumn="gridview",t.depthColumn=this.bodyIdColIndexMap[t.depthColumn])),this.drilldown.initialize(this,t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getRealRowIndex=function(t){return this.dataList.getRealRowIndex(t)},T.prototype.toggle=function(t){if("number"!=typeof t)return!1;var e=t;if(this.options.drilldownRealRowIndexAll&&"number"!=typeof(e=this.getDisplayRowIndex(t)))return!1;this._toggle(e)},T.prototype._toggle=function(t){t=parseInt(t),this.drilldown.toggle(t);var e=this.options.drilldownToggleScrollFix?{keepScrollTop:!0}:null;this.lastTopRowIndex=null,this.setScrollYHeight(e),this.notifyRowChanged(t,e),this.options.autoFit&&this.autoFitFunc()},T.prototype.drillTo=function(t){try{var e=this.drilldown.drillTo(t),i=this.options.drilldownToggleScrollFix?{keepScrollTop:!0}:null;this.setScrollYHeight(i),this.notifyRowChanged(e,i),this.options.autoFit&&this.autoFitFunc()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getParentRowIndex=function(t){return t=parseInt(t),this.drilldown.getParentRowIndex(t)},T.prototype.getChildrenRowIndexArray=function(t){return t=parseInt(t),this.drilldown.getChildrenRowArr(t)},T.prototype.getAncestorRowIndexArray=function(t){return t=parseInt(t),this.drilldown.getAncestorRowArr(t)},T.prototype.getDescendantRowIndexArray=function(t){return t=parseInt(t),this.drilldown.getChildRowArr(t,!0)},T.prototype.getOpenStatus=function(t){var e=t=parseInt(t);return(!this.options.drilldownRealRowIndexAll||"number"==typeof(e=this.getDisplayRowIndex(t)))&&this.drilldown.isOpen(e)},T.prototype.getDataLength=function(){var t;if(this.successBinding)if(this.groupbyStatus.grouped){for(var e in this.customFilterStatusObj)if(this.customFilterStatusObj[e])return this._dataList.getDataLength();t=this.groupbyStatus.groupedRowIndexArr.length}else t=this._dataList.getDataLength();else t=0;return t},T.prototype.focusedRowMoveUp=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveUp(t)},T.prototype.focusedRowMoveDown=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveDown(t)},T.prototype.initStyleArr=function(t){t<=0&&(this.rowStyleArr=[],this.rowReadOnlyArr=[],this.rowDisabledArr=[]);var e=this.getTotalRow(),i=e*this.oneRowDataLength;t<=0?(this.rowStyleArr=new Array(e),this.rowReadOnlyArr=new Array(e),this.rowDisabledArr=new Array(e),this.rowStyleFixedArr=new Array(e),
this.rowStyleDataArr=new Array(e),this.cellStyleArr=new Array(i),this.cellClassArr=new Array(i),this.cellReadOnlyArr=new Array(i),this.cellDisabledArr=new Array(i)):(this.rowStyleArr[e-1]=void 0,this.rowStyleFixedArr[e-1]=void 0,this.rowStyleDataArr[e-1]=void 0,this.rowReadOnlyArr[e-1]=void 0,this.rowDisabledArr[e-1]=void 0,this.cellStyleArr[i-1]=void 0,this.cellClassArr[i-1]=void 0,this.cellReadOnlyArr[i-1]=void 0,this.cellDisabledArr[i-1]=void 0)},T.prototype.modifyCheckedStatus=function(t,e){try{var i=this.getCheckedIndex(t);if("R"==(e=e.toUpperCase())||"U"==e||"V"==e||"D"==e||"C"==e){for(var o=0;o<i.length;o++)this.dataList.modifyRowStatus(i[o],e),this._drawRowStatus(o-this.rowIndex,o),this.displayNoResultMessage();this.notifyStatusChanged({rowIndex:i})}else c.k.printLog("[Warning] Is not exist status Value!["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.modifyUncheckStatus=function(t,e){try{if("R"==(e=e.toUpperCase())||"U"==e||"V"==e||"D"==e||"C"==e){for(var i=this.getUnCheckedIndex(t),o=0;o<i.length;o++)this.dataList.modifyRowStatus(i[o],e),this._drawRowStatus(o-this.rowIndex,o),this.displayNoResultMessage();this.notifyStatusChanged({rowIndex:i})}else c.k.printLog("[Warning] Is not exist status Value!["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getVisibleColData=function(t){var e=[];t=this.getColumnIndex(t);for(var i=this.getColumnID(t),o=this.getDataLength(),s=0;s<o;s++)e.push(this.dataList._getCellData(s,i));return e},T.prototype.getCheckedIndex=function(t,e){try{var i,o=[],s=[],a=0,n=this.cellInfoHash[this.getColumnID(t)];if("checkbox"==n.options.inputType||"radio"==n.options.inputType||"custom"==n.options.inputType){i=this.isDrillDown&&this._dataList.options.depthColumn?this.dataList.getColData(t):this.getVisibleColData(t);for(var h=n,d=0;d<i.length;d++){if(0==n.internal&&"custom"==n.options.inputType){var u=this.dataList.getRealRowIndex(d);if("checkbox"!=(h=n.cellManagerHashByRowIndex[u]?n.cellManagerHashByRowIndex[u]:n).options.inputType&&"radio"!=h.options.inputType)continue}else if(this.groupbyStatus.grouped&&"object"==(0,l.Z)(this.dataList.getRealRowIndex(d)))continue;if(e){s.push(d);var c=!(!this.isDrillDown||!this._dataList.options.depthColumn);this.___getEditReadOnly(d,t,c)||this._getEditDisabled(d,t,c)?a++:i[d]==h.options.trueValue&&o.push(d)}else i[d]==h.options.trueValue&&o.push(d)}}return e&&a!==s.length&&a+o.length==s.length?s:o}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getUnCheckedIndex=function(t){return this.getUncheckedIndex(t)},T.prototype.getUncheckedIndex=function(t){try{var e=[],i=this.cellInfoHash[this.getColumnID(t)];if("checkbox"==i.options.inputType||"radio"==i.options.inputType||"custom"==i.options.inputType){var o=[];o=this.isDrillDown&&this._dataList.options.depthColumn?this.dataList.getColData(t):this.getVisibleColData(t);for(var s=i,a=0;a<o.length;a++){if(0==i.internal&&"custom"==i.options.inputType){var n=this.dataList.getRealRowIndex(a);if("checkbox"!=(s=i.cellManagerHashByRowIndex[n]?i.cellManagerHashByRowIndex[n]:i).options.inputType&&"radio"!=s.options.inputType)continue}else if(this.groupbyStatus.grouped&&"object"==(0,l.Z)(this.dataList.getRealRowIndex(a)))continue;o[a]!=s.options.trueValue&&e.push(a)}}return e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getAllDisplayData=function(){try{var t=this._linkedDataList||this._dataList;if(t.getTotalRow()==t.getDataLength())return this.getAllVisibleData();this._endEdit();for(var e=this.getTotalRow(),i=this.getColumnCount(),o=[],s=0;s<e;s++)for(var a=0;a<i;a++)o.push(this._getDisplayData(s,a));return o}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getAllDisplayJSON=function(t){try{t||(t={emptyValue:"$$_blank_"});var e=this._linkedDataList||this._dataList;if(e.getTotalRow()==e.getDataLength())return this.getAllVisibleJSON(t);this._endEdit();for(var i=this.getTotalRow(),o=this.getColumnCount(),s=[],a=0;a<i;a++){
for(var n={},l=0;l<o;l++)n[this.tdIdList[l]]=this._getDisplayData(a,l,t);s.push(n)}return s}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getAllVisibleJSON=function(t){try{this._endEdit();for(var e=this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped,i=e?this.groupbyStatus.groupedRowIndexArr.length:this.getDataLength(),o=this.getColumnCount(),s=[],a=0;a<i;a++)if(!e||"number"==typeof this.groupbyStatus.groupedRowIndexArr[a]){for(var n={},l=0;l<o;l++)n[this.tdIdList[l]]=this._grid._getCellDisplayData(a,l,t);s.push(n)}return s}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getAllDisplayXML=function(){try{var t=this._linkedDataList||this._dataList;return t.getTotalRow()==t.getDataLength()?this.getAllVisibleXML("displayData"):(this._endEdit(),this.getAllArrXML("displayData",this.id))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getAllVisibleXML=function(t){try{this._endEdit();for(var e=this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped,i=e?this.groupbyStatus.groupedRowIndexArr.length:this.getDataLength(),o=[],s=0;s<i;s++)e&&"number"!=typeof this.groupbyStatus.groupedRowIndexArr[s]||o.push(s);return this.getArrXML(o,t,e)}catch(t){r.w.printStackTrace(t)}},T.prototype.getAllVisibleData=function(t){try{this._endEdit();for(var e=this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped,i=e?this.groupbyStatus.groupedRowIndexArr.length:this.getDataLength(),o=this.getColumnCount(),s=[],a=0;a<i;a++)if(!e||"number"==typeof this.groupbyStatus.groupedRowIndexArr[a])for(var n=0;n<o;n++)"displayData"===t?s.push(this._getCellDisplayData(a,n)):s.push(this.dataList.getCellData(a,n));return s}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.changeToRealRowIndexArr=function(t){try{for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getCheckedData=function(t){try{this._endEdit();for(var e=[],i=this.getCheckedIndex(t),o=0;o<i.length;o++)e.push(this.dataList.getRowData(i[o]));return e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getCheckedJSON=function(t){try{this._endEdit();for(var e=[],i=this.getCheckedIndex(t),o=0;o<i.length;o++)e.push(this._dataList.getRowJSON(i[o]));return e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getCheckedXML=function(t){try{this._endEdit();var e=this.getCheckedIndex(t);return this.getArrXML(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getUncheckedData=function(t){try{this._endEdit();for(var e=[],i=this.getUncheckedIndex(t),o=0;o<i.length;o++)e.push(this.dataList.getRowData(i[o]));return e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getUncheckedJSON=function(t){try{this._endEdit();for(var e=[],i=this.getUncheckedIndex(t),o=0;o<i.length;o++)e.push(this._dataList.getRowJSON(i[o]));return e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getUncheckedXML=function(t){try{this._endEdit();var e=this.getUncheckedIndex(t);return this.getArrXML(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getCellChecked=function(t,e){try{var i=this.cellInfoHash[this.getColumnID(e)],o=i.id;if(0==i.internal&&"custom"==i.options.inputType){var s=this.dataList.getRealRowIndex(t);i=i.cellManagerHashByRowIndex[s]?i.cellManagerHashByRowIndex[s]:i}if("checkbox"!=i.options.inputType&&"radio"!=i.options.inputType)return!1;var a=this.dataList._getCellData(t,o);return a=a==i.options.trueValue}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.hasChild=function(t){return this.drilldown.hasChild(t)},T.prototype.comparator=function(t,e){return parseInt(e)==parseInt(t)?0:parseInt(e)>parseInt(t)?1:-1},T.prototype.getExcelAllXML=function(t){try{var e=new Array;e.push("<array><![CDATA["),e.push('["');for(var i=0;i<this.getDataLength();i++)for(var o=0;o<this.getTotalCol();o++)e.push(this.dataList._getCellData(i,this.getColumnID(o))),e.push('","');return e[e.length-1]='"]',e.push("]]></array>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},
T.prototype.getExcelAllXMLDisplay=function(t){try{null==t&&(t=1);var e=new Array;e.push("<array><![CDATA["),e.push('["');for(var i=this.getDataLength(),o=this.getColumnCount(),s=0;s<i;s++)for(var a=0;a<o;a++){var n,l=this.getCellInfo(a);if("custom"==l.options.inputType){var h=this.dataList.getRealRowIndex(s);l.cellManagerHashByRowIndex[h]||(this.drawData(s),l=l.cellManagerHashByRowIndex[h]||l)}(n=l.useCustomFormatter||"custom"==l.options.inputType?this._getDisplayData(this.dataList.getRealRowIndex(s),a):1==t?l.getDisplayData(this.dataList._getCellData(s,this.getColumnID(a)),s):this.dataList._getCellData(s,this.getColumnID(a))+"").indexOf("javascript:")>-1&&(n=n.wq_replaceAll("javascript:","")),e.push(n),e.push('","')}return e[e.length-1]='"]',e.push("]]></array>"),e.join("")}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getExcelAllXMLRaw=function(t){try{var e=this.dataArr.length,i=this.dataArr[0],o=this.dataArr[e-1];this.dataArr[0]='<array><![CDATA[["'+i,this.dataArr[e-1]=o+'"]]]></array>';var s=this.dataArr.join('","');return this.dataArr[0]=i,this.dataArr[e-1]=o,s}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.makeExcelData=function(t,e,i,o){try{var n=e.length,l=t+i.rowsByN;l=l<i.dataLength?l:i.dataLength;var h,d=this.oneRowDataLength,u=i.separator||",";if(i.convertIndex&&(h=i.convertIndex.split(",")),""==i.dataProvider&&""==i.splitProvider)if(0===i.type)for(var c=t;c<l;c++){if("number"==typeof(y=this.dataList.getRealRowIndex(c)))for(var p=0;p<d;p++){var g=!1;if(h)for(var m=0;m<h.length;m++)if(h[m]==p.toString()){g=!0;break}n=g?(e=this._getExcelDisplayData(y,p,e,i,c)).length:(e=this._getExcelRealData(y,p,e,i)).length}}else if(1===i.type||2==i.type)for(c=t;c<l;c++){if("number"==typeof(y=this.dataList.getRealRowIndex(c)))for(p=0;p<d;p++){g=!1;if(h)for(m=0;m<h.length;m++)if(h[m]==p.toString()){g=!0;break}n=g?(e=this._getExcelRealData(y,p,e,i)).length:(e=this._getExcelDisplayData(y,p,e,i,c)).length}}else l=i.dataLength,n=(e=this.dataList.getAllData()).length;var f=this;if(l<i.dataLength&&""==i.dataProvider&&""==i.splitProvider)if(!1!==i.massStorage)this.excelTime=setTimeout((function(){try{!0===i.showConfirm&&window.gridExceldownloadIframe.contentWindow.checkUpload(e.length/f.dataArr.length)}catch(t){}if(0!=i.multiexcel)return f.makeExcelData(l,e,i,o);f.makeExcelData(l,e,i,o)}),10);else{if(0!=i.multiexcel)return this.makeExcelData(l,e,i,o);this.makeExcelData(l,e,i,o)}else{var b;if(""==i.dataProvider&&""==i.splitProvider)if(e.length>=2){if(i.groupby&&this.groupbyStatus.grouped&&this.defaultColCnt>0){var y=1,v=this.oneRowDataLength,w=[];for(c=0;c<e.length;c++){if((c%v==0||0==c)&&(y=parseInt(c/v,10),this.options.rowNumVisible&&w.push(y+1),this.options.rowStatusVisible)){var S=this.getRowStatus(y);w.push(S)}w.push(e[c])}n=(e=w).length}if(n>0){var C=e[0],x=e[n-1];e[0]='<array><![CDATA[["'+C,e[n-1]=x+'"]]]></array>',b=e.join('"'+u+'"'),e[0]=C,e[n-1]=x}else b="<array><![CDATA[["+e+"]]]></array>"}else{b="<array><![CDATA[["+(1===e.length?'"'+e[0]+'"':"")+"]]]></array>"}else b="<array><![CDATA[[ ]]]></array>";if(!0===i.showConfirm)this.excelOptions=i,this.excelInfoArr=o,this.excelFinalStr=b,this.checkUpload();else{if(0!=i.multiexcel)return this.sendExcelData(i,o,b);this.sendExcelData(i,o,b)}}}catch(t){var _=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/excel/download/errorHandler/@value"),I=a.D.getGlobalFunction(_,this.scope_id);"function"==typeof I&&I.call(this,this.id),r.w.printStackTrace(t,null,this)}},T.prototype._getExcelRealData=function(t,e,i,o){try{var s=o.cellInfo,a=o.isExpCol,n=i;if(a[e])n.push(s[e].getExpressionValue(t));else{var l=this.dataList._getData(t,e);n.push(null!=l?l:"")}return n}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._getExcelDisplayData=function(t,e,i,o,s){try{var a,n=o.cellInfo,l=o.isSelectCol,h=o.isBasicCol,d=o.isExpCol,u=o.isCustomCol,c=o.isCustomModelCol,p=o.isCustomType,g=o.isEscapeFormatter,m=i;if(d[e]&&(a=n[e].getExpressionValue(t)),
u[e]||c[e]||g[e]?a=this._getDisplayData(t,e):(a=this.dataList._getData(t,e),n[e].options.useMonthYearFormat&&"calendar"===n[e].options.inputType&&(a=WebSquare.date.getIOFormatDate(a,n[e].options.ioFormat,n[e].options.calendarValueType)),a=null!=a?a:""),h[e]||d[e])n[e].options.maskFormat&&(a=this.getInput(n[e]).maskFormatModelUnFormat(a)),a=n[e].formatter?n[e].formatter.format(a):a;else if(!l[e]||u[e]||c[e]){if(p[e]){_=null;var f,b=n[e].cellManagerHashByRowIndex[s];b?f=(n=b).options.inputType:(n=n[e],f="text");var y=n.useCustomFormatter,v=n.useCustomModelFormatter,w=n.useEscapeFormatter,S="select"===f||"checkcombobox"===f||"autoComplete"===f,C="expression"===f,x=!("checkbox"===f||"image"===f||"radio"===f||S||C||y||v||w);if(y||v||w?a=this._getDisplayData(t,e):(a=this.dataList._getData(t,e),n.options.useMonthYearFormat&&"calendar"===n.options.inputType&&(a=WebSquare.date.getIOFormatDate(a,n.options.ioFormat,n.options.calendarValueType)),a=null!=a?a:""),x||C)n.options.maskFormat&&(a=this.getInput(n).maskFormatModelUnFormat(a)),a=n.formatter?n.formatter.format(a):a;else if(S&&!y&&!v){_=null;null==(_=2==o.type?this.dataList._getData(t,e):n.getData(a,t))&&(_=""),a=_}}}else{var _=null;if(2==o.type)_=this.dataList._getData(t,e);else{var I=n[e].dataComp,T=t;if(I){var k=this.modelControl.getDataComp(I);k&&"linkedDataList"===k.initializeType&&(T=s)}_=n[e].getData(a,T)}null==_&&(_=""),a=_}return"string"==typeof a&&a.indexOf("javascript:")>-1&&(a=a.wq_replaceAll("javascript:","")),m.push(a),m}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._getStyleRowIndex=function(t){try{var e=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(t);return null==e?e=null:"number"!=typeof e&&(e=e.type+"_"+e.groupId),e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getRowStyleClassName=function(t){try{var e=this._getStyleRowIndex(t);return null==e?null:this.rowStyleArr[e]}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setRowStyleClassName=function(t,e){try{var i=this._getStyleRowIndex(t);if(null==i)return;this.rowStyleArr[i]=e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getCellStyleClassName=function(t,e){try{"number"!=typeof e&&(e=this.bodyIdColIndexMap[e]);var i=this._getStyleRowIndex(t);return null==i?void 0:"number"==typeof i?this.cellStyleArr[i*this.oneRowDataLength+e]:this.cellStyleArr[i+"_"+e]}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellStyleClassName=function(t,e,i){try{e=this.getColumnIndex(e);var o=this._getStyleRowIndex(t);if(null==o)return;"number"==typeof o?this.cellStyleArr[o*this.oneRowDataLength+e]=i:this.cellStyleArr[o+"_"+e]=i}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getCellClass=function(t,e){try{"number"!=typeof e&&(e=this.bodyIdColIndexMap[e]);var i=this._getStyleRowIndex(t);return null==i?void 0:"number"==typeof i?this.cellClassArr[i*this.oneRowDataLength+e]:this.cellClassArr[i+"_"+e]}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellDefaultStyleClassName=function(t,e,i){try{e=this.getColumnIndex(e);var o=this.getCellStyleClassName(t,e,i);return null==o&&(this.cellStyleIndex++,o=this.id+"_cellstyle_"+this.cellStyleIndex+"_",this.setCellStyleClassName(t,e,o,i)),null==this.cellStyleValueObj[o]&&(this.cellStyleValueObj[o]={}),o}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellClass=function(t,e,i){try{e=this.getColumnIndex(e);var o,s=this._getStyleRowIndex(t);o=!(!this.isDrillDown||!this._dataList.options.depthColumn)?this.getDisplayRowIndex(t)-this.rowIndex:t-this.rowIndex;var a=this.data_td_list[o*this.oneRowDataLength+e];if(null==s)return;if("number"==typeof s){var n=this.tdCellClassArr[o*this.oneRowDataLength+e];n&&this.removeClass(a,n),this.cellClassArr[s*this.oneRowDataLength+e]=i}else this.cellClassArr[s+"_"+e]=i;a&&(this.tdCellClassArr[o*this.oneRowDataLength+e]=i,this.addClass(a,i))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.removeCellClass=function(t,e,i){try{e=this.getColumnIndex(e)
;var o,s=this._getStyleRowIndex(t);if(o=!(!this.isDrillDown||!this._dataList.options.depthColumn)?this.getDisplayRowIndex(t)-this.rowIndex:t-this.rowIndex,null==s)return;"number"==typeof s?this.cellClassArr[s*this.oneRowDataLength+e]=void 0:this.cellClassArr[s+"_"+e]=void 0;var a=this.data_td_list[o*this.oneRowDataLength+e];a&&(i||(i=this.tdCellClassArr[o*this.oneRowDataLength+e]),this.tdCellClassArr[o*this.oneRowDataLength+e]=void 0,this.removeClass(a,i))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._removeAllTDCellClass=function(){try{for(var t=this.tdCellClassArr.length,e=0;e<t;e++){var i=this.tdCellClassArr[e],o=this.data_td_list[e];o&&i&&this.removeClass(o,i)}this.tdCellClassArr=[]}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._setColumnClass=function(t,e){try{var i=this.getColumnIndex(t);if(this.columnClassObj[i]){var o=this.columnClassObj[i].replace(new RegExp(e,"g"),"").wq_trim();this.columnClassObj[i]=o+" "+e}else this.columnClassObj[i]=e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnClass=function(t,e){try{if("string"!=typeof e)return;for(var i=e.split(" "),o=0;o<i.length;o++)this._setColumnClass(t,i[o]);for(o=this.getColumnIndex(t);o<this.data_td_list.length;o+=this.oneRowDataLength){var s=this.data_td_list[o];s&&this.addClass(s,e)}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._removeColumnClass=function(t,e){try{var i=this.getColumnIndex(t);this.columnClassObj[i]=this.columnClassObj[i].replace(new RegExp(e,"g"),"").wq_trim(),this.columnClassObj[i]||delete this.columnClassObj[i];for(var o=i;o<this.data_td_list.length;o+=this.oneRowDataLength){var s=this.data_td_list[o];s&&this.removeClass(s,e)}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.removeColumnClass=function(t,e){try{if("string"!=typeof e)return;for(var i=e.split(" "),o=0;o<i.length;o++)this._removeColumnClass(t,i[o])}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getColumnClass=function(t){try{var e=this.getColumnIndex(t);return this.columnClassObj[e]}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._refreshColumnClass=function(){try{for(var t in this.columnClassObj)this.setColumnClass(this.columnClassObj[t])}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getRowStyleFixedClassName=function(t){try{var e=this._getStyleRowIndex(t);return null==e?null:this.rowStyleFixedArr[e]}catch(t){$l("getRowStyleFixedClassName :"+t.message),r.w.printStackTrace(t,null,this)}},T.prototype.setRowStyleFixedClassName=function(t,e){try{var i=this._getStyleRowIndex(t);if(null==i)return;this.rowStyleFixedArr[i]=e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getRowStyleDataClassName=function(t){try{var e=this._getStyleRowIndex(t);return null==e?null:this.rowStyleDataArr[e]}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setRowStyleDataClassName=function(t,e){try{var i=this._getStyleRowIndex(t);if(null==i)return;this.rowStyleDataArr[i]=e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.refreshColumnItemset=function(t){try{var e=this.getCellInfo(t);if(e.resetMatchInfo=!0,e.options.embeddedInput){t=this.getColumnIndex(e.options.col_id);for(var i=0;i<this.drawedRowLength;i++){var o=this.data_td_list[t+i*this.oneRowDataLength];if(o){var s=this.dom[o.getAttribute("id")+"_select"];s&&s.refreshItemset()}}}else"select"==e.options.inputType?(e.hasRef&&(e.refHash=[]),e.select&&e.select.refreshItemset(),e.itemsetObj&&e.mainGrid.refresh()):"checkcombobox"==e.options.inputType&&(e.refreshItemArr(),e.checkcombobox)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.refreshRadioGroup=function(t){try{for(var e={},i=[],o=0;o<this.oneRowDataLength;o++){"radio"==(l=this.getCellInfo(o)).options.inputType&&l.options.groupName==t&&(l.options.groupRef&&(l.options.groupValue=WebSquare.ModelUtil.getInstanceValue(l.options.groupRef,null,this.scope_id)),e[l.options.groupValue]=l,i.push(l))}if(0==i.length)return;var s=this.getDataLength();for(o=0;o<s;o++){var a=e[this.dataList._getCellData(o,t)]
;if(a)this.dataList.__setCellData(o,a.id,a.options.trueValue);else{for(var n=0;n<i.length;n++){var l=i[n];this.dataList.__setCellData(o,l.id,l.options.defaultValue)}var h=this.getCellInfo(t);h&&this.dataList.__setCellData(o,t,h.options.defaultValue)}}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.resetRadioGroup=function(t,e){return this._resetRadioGroup.call(this,t,e,!0)},T.prototype._resetRadioGroup=function(t,e,i){try{for(var o=[],s=0;s<this.oneRowDataLength;s++){"radio"==(h=this.getCellInfo(s)).options.inputType&&h.options.groupName==e&&o.push(h)}if(0==o.length)return;if("number"==typeof t)var a=t,n=t+1;else a=0,n=this.getDataLength();for(s=a;s<n;s++){for(var l=0;l<o.length;l++){var h=o[l];this.dataList.__setCellData(s,h.id,h.options.defaultValue)}if(i){var d=this.getCellInfo(e);d&&this.dataList.__setCellData(s,e,d.options.defaultValue)}}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.xmlData2ArrData=function(t,e,i){try{if(null==t)return;if(9==t.nodeType)s=1==e?t.selectNodes("/"+this.options.repeatNode):t.selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode);else if(o=i&&i.baseNode?i.baseNode:this.options.baseNode,i&&i.isRepeatNode)s=(t=WebSquare.xml.parse(WebSquare.xml.serialize(t))).selectNodes("/"+i.repeatNode);else if(o.startsWith(t.tagName))var o=o.replace(t.tagName,"."),s=t.selectNodes(o+"/"+this.options.repeatNode);else t=WebSquare.xml.parse(WebSquare.xml.serialize(t)),s=1==e?t.selectNodes("/"+this.options.repeatNode):t.selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode);for(var n=[],l=this.options.valueNode,h=null==l||""==l,d=a.D.getTextNodeValue,u=s.length,c=this.tdIdList.length,p=[],g=[],m=[],f=0;f<c;f++){p[f]=this.getCellInfo(this.tdIdList[f]);var b=p[f].options;null!=b.importFormatter&&""!=b.importFormatter&&(g[f]=!0),null!=b.importExp&&""!=b.importExp&&(m[f]=!0)}for(f=0;f<u;f++){for(var y=f,v=s[f],w=n.length,S=0;S<c;S++){var C=s[f].selectSingleNode(this.tdIdList[S]);n[w+S]=null!=C?h?d(C):C.getAttribute(l):p[S].options.defaultValue}for(S=0;S<c;S++)if(g[S])try{var x=a.D.getGlobalFunction(p[S].options.importFormatter,this.scope_id);"function"==typeof x&&(n[w+S]=x.call(this,v,y))}catch(t){n[w+S]=p[S].options.defaultValue,r.w.printStackTrace(t,null,this)}for(S=0;S<c;S++)if(m[S])try{var _=new Function("_this","obfuscator_rowXml","return "+p[S].options.importExp)(this,v);n[w+S]=_}catch(t){n[w+S]=p[S].options.defaultValue,r.w.printStackTrace(t,null,this)}for(S=0;S<c;S++){if("radio"==p[S].options.inputType&&p[S].options.groupName&&this.cellInfoHash[p[S].options.groupName]){var I=p[S].options.trueValue,T=p[S].options.falseValue;switch(p[S].options.valueType){case"binary":I="1",T="0";break;case"boolean":I="true",T="false"}this.columnValue(v,p[S].options.groupName)==p[S].options.groupValue?n[w+S]=I:n[w+S]=T}this.options.xmlEncode&&null!=n[w+S]&&(n[w+S]=WebSquare.xml.decode(n[w+S]))}}return n}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.jsonData2ArrData=function(t){try{if(null==t)return;for(var e=[],i=t.length,o=this.cellIdList.length,s=[],n=0;n<o;n++)s[n]=this.getCellInfo(this.cellIdList[n]);for(n=0;n<i;n++)for(var l=n,h=t[n],d=e.length,u=0;u<o;u++)if(s[u].options.importFormatter)try{var c=a.D.getGlobalFunction(s[u].options.importFormatter,this.scope_id);"function"==typeof c&&(e[d+u]=c.call(this,h,l))}catch(t){e[d+u]=s[u].options.defaultValue,r.w.printStackTrace(t,null,this)}else if(s[u].options.importExp)try{var p=new Function("_this","obfuscator_rowXml","return "+s[u].options.importExp)(this,h);e[d+u]=p}catch(t){e[d+u]=s[u].options.defaultValue,r.w.printStackTrace(t,null,this)}else{var g=t[n][this.cellIdList[u]];e[d+u]=null!=g?g:s[u].options.defaultValue}return e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.xpathValue=function(t,e){try{var i=WebSquare.xml.findNode(t,e);if(null==i)return"";if(1!=i.nodeType)return i.nodeValue;for(var o=i.firstChild;null!=o;o=o.nextSibling)if(3==o.nodeType)return o.nodeValue}catch(t){$l("xpath exeption"),
r.w.printStackTrace(t,null,this)}return""},T.prototype.getAllArrXML=function(t){try{var e=!1;this.tagNmArr=this._dataList.options.baseNode.replace(/\[[^\]]+\]/g,"").split("/");for(var i=0;i<this.tagNmArr.length;i++)if(null!=this.tagNmArr[i]&&""!=this.tagNmArr[i].wq_trim())if(e)s.push(o.createElement(this.tagNmArr[i])),s[i-1].appendChild(s[i]);else{var o=WebSquare.xml.parse("<"+this.tagNmArr[i]+"/>"),s=[];s.push(o.documentElement),e=!0}var n=this._dataList.options.repeatNode.replace(/\[[^\]]+\]/g,"").split("/"),l=null;for(i=0;i<this.getTotalRow();i++){var h=i;l=[];for(var d=null,u=0;u<n.length;u++)if(""!=n[u]){var c=o.createElement(n[u]);l.push(c),0==u?s[s.length-1].appendChild(c):l[u-1].appendChild(l[u])}(d=l[n.length-1]).setAttribute("status",this.dataList._getRowStatusValue(h)),d.setAttribute("statusValue",this.dataList._getRowStatus(h)),d.setAttribute("id",h);for(var p=this.getColumnCount(),g=new Array(p),m=0;m<p;m++){var f="";f="displayData"!=t?this._dataList._getData(h,m):this._getDisplayData(h,m),this.options.xmlEncode&&(f=WebSquare.xml.encode(f));var b=this.getColumnID(m),y=this.getCellInfo(m);if(""!=y.options.exportFormatter)try{var v=a.D.getGlobalFunction(y.options.exportFormatter,this.scope_id);"function"==typeof v&&v(d,f,h,b)}catch(t){r.w.printStackTrace(t,null,this),$l("xmlDtaGetter - tdObj.exportFormatter error")}else{if(g[m]=o.createElement(this.getColumnID(m)),""==this._dataList.options.valueAttribute){var w=o.createTextNode(f);g[m].appendChild(w)}else g[m].setAttribute(this._dataList.options.valueAttribute,f);d.appendChild(g[m])}}}return o}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getArrXML=function(t,e,i){try{if(t instanceof Array){var o=!1;this.tagNmArr=this._dataList.options.baseNode.replace(/\[[^\]]+\]/g,"").split("/");for(var s=0;s<this.tagNmArr.length;s++)if(null!=this.tagNmArr[s]&&""!=this.tagNmArr[s].wq_trim())if(o)l.push(n.createElement(this.tagNmArr[s])),l[s-1].appendChild(l[s]);else{var n=WebSquare.xml.parse("<"+this.tagNmArr[s]+"/>"),l=[];l.push(n.documentElement),o=!0}var h=this._dataList.options.repeatNode.replace(/\[[^\]]+\]/g,"").split("/"),d=null;for(s=0;s<t.length;s++){var u=t[s];d=[];for(var c=null,p=0;p<h.length;p++)if(""!=h[p]){var g=n.createElement(h[p]);d.push(g),0==p?l[l.length-1].appendChild(g):d[p-1].appendChild(d[p])}(c=d[h.length-1]).setAttribute("status",this.dataList.getRowStatusValue(u)),c.setAttribute("statusValue",this.dataList.getRowStatus(u)),!0===i?c.setAttribute("id",this._getGroupbyDisplayRowIndex(u)):c.setAttribute("id",u);for(var m=this.getColumnCount(),f=new Array(m),b=0;b<m;b++){var y="";"displayData"!=e?null==(y=this.dataList._getCellData(u,b))&&(y=""):null==(y=this._getCellDisplayData(u,b))&&(y=""),this.options.xmlEncode&&(y=WebSquare.xml.encode(y));var v=this.getColumnID(b),w=this.getCellInfo(b);if(""!=w.options.exportFormatter)try{var S=a.D.getGlobalFunction(w.options.exportFormatter,this.scope_id);"function"==typeof S&&S(c,y,u,v)}catch(t){r.w.printStackTrace(t,null,this),$l("xmlDtaGetter - tdObj.exportFormatter error")}else{if(f[b]=n.createElement(this.getColumnID(b)),""==this._dataList.options.valueAttribute){var C=n.createTextNode(y);f[b].appendChild(C)}else f[b].setAttribute(this._dataList.options.valueAttribute,y);c.appendChild(f[b])}}}return n}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getDisplayRowIndex=function(t){try{return(this._linkedDataList||this._dataList).getFilteredRowIndex(t)}catch(t){r.w.printStackTrace(t)}},T.prototype.getOption=function(t){try{return this.options[t]}catch(t){r.w.printStackTrace(t)}},T.prototype.getDataList=function(){try{var t=this._linkedDataList||this._dataList;return t?t.id:null}catch(t){r.w.printStackTrace(t)}},T.prototype.getRowNumVisible=function(){try{return this.options.rowNumVisible}catch(t){r.w.printStackTrace(t)}},T.prototype.makeCustomFilter=function(t){try{null!=this.customFilter&&this.customFilter.remove(),this.customFilter=new WebSquare.uiplugin.floatingLayer(this.id+"_customFilter",{
style:"position:absolute; border-width:1px;",className:"w2grid_customFilter",useModal:!0,headerLeftClass:"w2grid_customFilter_HL",headerRightClass:"w2grid_customFilter_HR",headerCenterClass:"w2grid_customFilter_HC",bodyLeftClass:"w2grid_customFilter_BL",bodyRightClass:"w2grid_customFilter_BR",bodyCenterClass:"w2grid_customFilter_BC",bodyLeftBottomClass:"w2grid_customFilter_FL",bodyRightBottomClass:"w2grid_customFilter_FR",bodyBottomClass:"w2grid_customFilter_FC",closeButtonClass:"w2grid_customFilter_btnClose",title:WebSquare.language.getMessage("Grid_filter_title")||"사용자 지정 필터",titleClass:"w2grid_customFilter_title"});var e=new WebSquare.uiplugin.textbox(this.id+"_text1_"+this.headerID,{style:"position:absolute; margin:10px;",className:"w2grid_customFilter_text",label:WebSquare.language.getMessage("Grid_filter_search_label")||"찾을 조건"});this.customFilter.addControl(e),this.selectboxItemSet=["=","<>",">",">=","<","<=",WebSquare.language.getMessage("Grid_filter_condition7")||"= (메타문자 사용)",WebSquare.language.getMessage("Grid_filter_condition1")||"시작문자",WebSquare.language.getMessage("Grid_filter_condition2")||"제외할 시작 문자",WebSquare.language.getMessage("Grid_filter_condition3")||"끝 문자",WebSquare.language.getMessage("Grid_filter_condition4")||"제외할 끝 문자",WebSquare.language.getMessage("Grid_filter_condition5")||"포함",WebSquare.language.getMessage("Grid_filter_condition6")||"포함하지 않음"],this._selectboxIgnoreOperatorItemSet=[">",">=","<","<="],this.customFilterItemCnt=0,this.groupList=[];var i=new WebSquare.uiplugin.group(this.id+"_item_"+this.customFilterItemCnt,{style:"position:absolute; width:100%; height:22px; margin-bottom:5px; background-color:transparent;"});this.customFilter.addControl(i),this.groupList.push(i);var o=this,s=new WebSquare.uiplugin.selectbox(i.id+"_selectbox_"+this.headerID,{style:"position:absolute;",className:"w2grid_customFilter_selectbox",textAlign:"left",chooseOption:!0,visibleColumn:"true",wheelRows:1,xmlEvents:[{name:"onchange",action:"script",param:{handler:function(){var t=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-2],e=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-3];7==this.getSelectedIndex()?(t.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label1")||"? 기호를 사용하여 한문자를 나타낼 수 있습니다."),e.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label2")||"* 기호를 사용하여 여러 문자를 나타낼 수 있습니다."),o.setChildrenPosition(),o.customFilterMetacharPos|=1):(o.customFilterMetacharPos&=-2,o.customFilterMetacharPos<=0&&(t.setLabel(""),e.setLabel(""),o.setChildrenPosition()))}}}]});i.addControl(s);var n=this.headerInfoHash[this.headerID].options.filterSubmenuSize||"",l=this.getCellInfo(this.targetColID).options.filterDisplayMode||"label",h=this.getCellInfo(this.targetColID).options.delimiter||" ",d=this.getCellInfo(this.targetColID).options.filterSearchTarget||"label",c=new WebSquare.uiplugin.autoComplete(i.id+"_autocomplete_"+this.headerID,{style:"position:absolute;",className:"w2grid_customFilter_autocomplete",noResult:"useData",ignoreBlankOnNoResult:!0,chooseOption:!0,caseSensitive:this.options.caseSensitive,wheelRows:1,submenuSize:n,displayMode:l,searchTarget:d,delimiter:h});if(c.__setSelectedIndex1=c.setSelectedIndex1,c.setSelectedIndex1=function(t,e){c.__setSelectedIndex1(t,e);var i=c.getValue(),s=this.parentControl.id;if(s)var r=a.D.getComponentById(s+"_selectbox_"+o.headerID);if(r){if(isNaN(i)){for(var n=0;n<r.itemArr.length;n++)void 0!==r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!0);for(var l=r.getValue(),h=0;h<o._selectboxIgnoreOperatorItemSet.length;h++)l===o._selectboxIgnoreOperatorItemSet[h]&&r.setSelectedIndex(0)}else for(n=0;n<r.itemArr.length;n++)!0===r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!1);r.setSelectOptions(r.itemArr)}},i.addControl(c),
"label"==l||"value delim label"==l||"label delim value"==l)for(var p=this.changeItemValue("label",this.targetColID,this.colDataList),g=0;g<this.colDataList.length;g++)c.addItem(p[g],this.colDataList[g]);else if(this.colDataList)for(g=0;g<this.colDataList.length;g++)c.addItem(this.colDataList[g],this.colDataList[g]);for(var m=this.headCellInfoHash[this.headerID].getAttribute("customFilterItemCnt")||2,f=0;f<m-1;f++)this.addCustomFilterItem(f);var b=new WebSquare.uiplugin.textbox(this.id+"_text2_"+this.headerID,{style:"position:absolute; margin-left:10px; margin-top:5px;",className:"w2grid_customFilter_text"});this.customFilter.addControl(b);var y=new WebSquare.uiplugin.textbox(this.id+"_text3_"+this.headerID,{style:"position:absolute; margin:5px; margin-bottom:10px; margin-left:10px;",className:"w2grid_customFilter_text"});this.customFilter.addControl(y);var v=new WebSquare.uiplugin.group(this.id+"_buttonGroup_"+this.headerID,{style:"position:absolute;",className:"w2grid_customFilter_buttonGroup"});if(this.customFilter.addControl(v),this.options.showCustomFilterReset){var w=new WebSquare.uiplugin.textbox(this.id+"_btnReset_"+this.headerID,{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter_button",label:WebSquare.language.getMessage("Grid_filter_reset")||"초기화",xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){o.groupbyStatus&&o.groupbyStatus.grouped&&o.options.groupbyFilterBox;for(var e=0;e<o.groupList.length;e++)for(var i=o.groupList[e].getChildren(),s=0;s<i.length;s++){var r=i[s];if(-1!=r.id.indexOf("_selectbox")){var a=o.itemValueObj[o.targetColID]["select"+e];r.setSelectedIndex(a||0)}else if(-1!=r.id.indexOf("_autocomplete")){var n=o.itemValueObj[o.targetColID]["auto"+e];r.setValue(n||"")}else if(-1!=r.id.indexOf("_radio")){var l=o.itemValueObj[o.targetColID]["radio"+e];r.setSelectedIndex(l||0)}}}}}]});v.addControl(w),w.addEvent("onmousedown",(function(){w.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!0})),w.addEvent("onmouseup",(function(){w.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!1})),w.addEvent("onmouseout",(function(){w.toggleClass("w2grid_customFilter_button_selected")}))}var S=new WebSquare.uiplugin.textbox(this.id+"_btnConform_"+this.headerID,{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter_button",tabIndex:"0",label:WebSquare.language.getMessage("Grid_filter_confirm")||"확인",xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){o.setCustomFilterExpression()}}},{name:"onkeydown",action:"script",param:{handler:function(t){13==(t.charCode?t.charCode:t.keyCode)&&(o.setCustomFilterExpression(),o.hideCustomFilterList())}}}]});v.addControl(S),S.addEvent("onmousedown",(function(){S.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!0})),S.addEvent("onmouseup",(function(){S.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!1})),S.addEvent("onmouseout",(function(){S.toggleClass("w2grid_customFilter_button_selected")}));var C=new WebSquare.uiplugin.textbox(this.id+"_btnCancel",{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter_button",tabIndex:"0",label:WebSquare.language.getMessage("Grid_filter_cancel")||"취소",xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){o.options.groupbyZone&&o.firstOpenCustomFilter[o.headerID]&&(o.firstOpenCustomFilter[o.headerID]=!1),o.customFilter.hide()}}},{name:"onkeydown",action:"script",param:{handler:function(t){var e=t.charCode?t.charCode:t.keyCode;9==e?(C.tabOrderMoveStart=!1,t.shiftKey||(C.tabOrderMoveStart=!0,u.B.preventDefault(t))):13==e&&(o.options.groupbyZone&&o.firstOpenCustomFilter[o.headerID]&&(o.firstOpenCustomFilter[o.headerID]=!1),o.customFilter.hide(),o.hideCustomFilterList())}}},{name:"onkeyup",action:"script",param:{handler:function(t){
9==(t.charCode?t.charCode:t.keyCode)&&(t.shiftKey||C.tabOrderMoveStart&&(C.tabOrderMoveStart=!1,o.customFilter.render.getElementsByClassName("w2floatingLayer_close_button")[0].focus()))}}}]});v.addControl(C),C.addEvent("onmousedown",(function(){C.toggleClass("w2grid_customFilter_button_selected")})),C.addEvent("onmouseup",(function(){C.toggleClass("w2grid_customFilter_button_selected")})),C.addEvent("onmouseout",(function(){C.toggleClass("w2grid_customFilter_button_selected")})),this.customFilter.writeTo(WebSquare.getBody()),this.customFilter.activate(),this.customFilter.dom.closeButton.addEventListener("keydown",(function(t){9==(t.charCode?t.charCode:t.keyCode)&&t.shiftKey&&C.focus()})),this.setChildrenPosition(),this.setDefaultValue(t),C.render.style.left=v.render.offsetWidth-C.render.offsetWidth-10+"px",S.render.style.left=parseInt(C.render.style.left,10)-S.render.offsetWidth-5+"px",this.options.showCustomFilterReset&&(w.render.style.left=parseInt(S.render.style.left,10)-C.render.offsetWidth-17+"px"),this.customFilter.hide()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setDefaultValue=function(t){for(var e=[],i=0;i<this.groupList.length;i++)for(var o=this.groupList[i].getChildren(),s=0;s<o.length;s++){var r,a=o[s];if(-1!=a.id.indexOf("_selectbox")){r=a;for(var n=0;n<this.selectboxItemSet.length;n++)">"===this.selectboxItemSet[n]||">="===this.selectboxItemSet[n]||"<"===this.selectboxItemSet[n]||"<="===this.selectboxItemSet[n]?a.addItemArr(this.selectboxItemSet[n],this.selectboxItemSet[n],!1):a.addItemArr(this.selectboxItemSet[n],this.selectboxItemSet[n]);if(e[i]&&e[i].select){var l=e[i].select;a.setSelectedIndex(l||0)}else{var h=this.itemValueObj[this.targetColID]["select"+i];a.setSelectedIndex(h||0)}}else if(-1!=a.id.indexOf("_autocomplete")){if(e[i]&&e[i].auto){var d=e[i].auto;a.setValue(d||"")}else{var u=this.itemValueObj[this.targetColID]["auto"+i];a.setValue(u||"")}var c=a.getValue();if(r){if(isNaN(c))for(n=0;n<r.itemArr.length;n++)void 0!==r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!0);else for(n=0;n<r.itemArr.length;n++)!0===r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!1);r.setSelectOptions(r.itemArr)}r=null}else if(-1!=a.id.indexOf("_radio"))if(a.addItem("OR","OR","0"),a.addItem("AND","AND","0"),e[i]&&e[i].radio){var p=e[i].radio;a.setSelectedIndex(p||0)}else{var g=this.itemValueObj[this.targetColID]["radio"+i];a.setSelectedIndex(g||0)}}},T.prototype.getUniqueValueOfArray=function(t){t.sort();for(var e=[],i=0;i<t.length;i++)(0===e.length||e[e.length-1]!==t[i]&&e[e.length-1]+""!=t[i]+"")&&e.push(t[i]);return e},T.prototype.setAutoCompleteItem=function(t,e){var i=[];if(this.options.useFilterSearch&&this.customFilterList&&this.customFilterList.filterHistory.column.length>0){var o=this.getCustomFilterListJSON({colID:t,headerID:e}),s=this.headerInfoHash[e],r=0;s&&s.options.hideCustomFilter&&(r=1);for(var n=2-r;n<o.length;n++)i.push(o[n].id2)}else i=this.dataList.getColData(t);for(var l in this.itemValueObj[this.targetColID])-1!=l.indexOf("auto")&&""!=this.itemValueObj[this.targetColID][l]&&i.push(this.itemValueObj[this.targetColID][l]);this.colDataList=this.getUniqueValueOfArray(i),this.colDataList.sort((function(t,e){var i=t-e;a.D.isIE("6 7")&&(i=(t+"").localeCompare(e+""));return i}))},T.prototype.showFilterOptions=function(t){this.options.useFilterList?(this.options.searchFilter,this.customFilterList&&this.customFilterScrollView?this.toggleCustomFilterList(t):this.createCustomFilterList(t)):this.showCustomFilter(t)},T.prototype.showCustomFilter=function(t){this.noevent=!0,!this.options.useFilterList||this.groupbyStatus.grouped?this._showCustomFilter(t):this.showFilterOptions(t)},T.prototype.showCustomFilter2=function(t){this.noevent=!0,this._showCustomFilter(t)},T.prototype._showCustomFilter=function(t){var e,i;(this.headerID=t,this.targetColID=this.getColIdByHeaderId(t),null==this.customFilter&&(this.itemValueObj={},this.customFilterStatusObj={}),
this.itemValueObj[this.targetColID]||(this.itemValueObj[this.targetColID]={}),this.setAutoCompleteItem(this.targetColID,t),this.makeCustomFilter(this.targetColID,t),"BODY"==this.render.parentNode.tagName)?(e=this.render.offsetTop,i=this.render.offsetLeft):(e=WebSquare.style.getAbsoluteTop(this.render),i=WebSquare.style.getAbsoluteLeft(this.render),a.D.isIEAllVersion("5 6 7")||(e-=WebSquare.style.getAbsoluteTop(document.body)));var o=this.getHeaderPosition(t,"top"),s=this.getHeaderPosition(t,"left"),r=this.getHeaderSize(t,"width"),n=this.getHeaderSize(t,"height"),l=0,h=0;"number"==typeof window.innerWidth?(l=window.innerWidth,h=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(l=document.documentElement.clientWidth,h=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(l=document.body.clientWidth,h=document.body.clientHeight);var d,u,c=parseInt(a.D.getStyleProperty(this.customFilter.render,"width"),10),p=parseInt(a.D.getStyleProperty(this.customFilter.render,"height"),10),g=0,m=0;a.D.isIE("6 7 8")?(d=document.documentElement.scrollTop,u=document.documentElement.scrollLeft):(d=window.pageYOffset,u=window.pageXOffset),g=i+s+r+c<=l+u?i+s+r:i+s-c,m=e+o+n+p<=h+d?e+o+n:e+this.render.offsetHeight-p,g<u&&(g=(l-c)/2+u,(m=e+this.render.offsetHeight)+p>h+d&&(m=e-p)),m<d&&(m=(h-p)/2+d),this.customFilter.render.style.left=g+"px",this.customFilter.render.style.top=m+"px",this.customFilter.show();var f=a.D.getComponentById(this.id+"_item_0_selectbox_"+this.headerID);f&&f.focus()},T.prototype.addCustomFilterItem=function(t){this.customFilterItemCnt++;var e=new WebSquare.uiplugin.group(this.id+"_item_"+this.customFilterItemCnt,{style:"position:absolute;",className:"w2grid_customFilter_item"});this.customFilter.addControl(e),this.groupList.push(e);var i=new WebSquare.uiplugin.radio(e.id+"_radio",{style:"position:absolute; left:50px; height:20px;",className:"w2grid_customFilter_radio",selectedIndex:0,cols:2,rows:1});e.addControl(i);var o=this,s=new WebSquare.uiplugin.selectbox(e.id+"_selectbox",{style:"position:absolute; top:25px;",className:"w2grid_customFilter_selectbox",textAlign:"left",chooseOption:!0,visibleColumn:"true",xmlEvents:[{name:"onchange",action:"script",param:{handler:function(){var e=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-2],i=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-3];7==this.getSelectedIndex()?(e.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label1")||"? 기호를 사용하여 한문자를 나타낼 수 있습니다."),i.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label2")||"* 기호를 사용하여 여러 문자를 나타낼 수 있습니다."),o.setChildrenPosition(),o.customFilterMetacharPos|=1<<t+1):(o.customFilterMetacharPos&=~(1<<t+1),o.customFilterMetacharPos<=0&&(e.setLabel(""),i.setLabel(""),o.setChildrenPosition()))}}}]});e.addControl(s);var r=this.headerInfoHash[this.headerID].options.filterSubmenuSize||"",n=this.getCellInfo(this.targetColID).options.filterDisplayMode||"label",l=this.getCellInfo(this.targetColID).options.filterSearchTarget||"label",h=this.getCellInfo(this.targetColID).options.delimiter||" ",d=new WebSquare.uiplugin.autoComplete(e.id+"_autocomplete",{style:"position:absolute; top:25px;",className:"w2grid_customFilter_autocomplete",noResult:"useData",ignoreBlankOnNoResult:!0,chooseOption:!0,caseSensitive:this.options.caseSensitive,submenuSize:r,displayMode:n,searchTarget:l,delimiter:h});if(d.__setSelectedIndex1=d.setSelectedIndex1,d.setSelectedIndex1=function(t,e){d.__setSelectedIndex1(t,e);var i=d.getValue(),s=this.parentControl.id;if(s)var r=a.D.getComponentById(s+"_selectbox");if(r){if(isNaN(i)){for(var n=0;n<r.itemArr.length;n++)void 0!==r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!0);for(var l=r.getValue(),h=0;h<o._selectboxIgnoreOperatorItemSet.length;h++)l===o._selectboxIgnoreOperatorItemSet[h]&&r.setSelectedIndex(0)
}else for(n=0;n<r.itemArr.length;n++)!0===r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!1);r.setSelectOptions(r.itemArr)}},e.addControl(d),"label"==n||"value delim label"==n||"label delim value"==n)for(var u=this.changeItemValue("label",this.targetColID,this.colDataList),c=0;c<this.colDataList.length;c++)d.addItem(u[c],this.colDataList[c]);else if(this.colDataList)for(c=0;c<this.colDataList.length;c++)d.addItem(this.colDataList[c],this.colDataList[c])},T.prototype.setChildrenPosition=function(){for(var t=this.customFilter.getChildren(),e=1;e<=t.length;e++){var i=WebSquare.style.getStyle(t[e-1].render,"top");if(i="auto"===i?"0":i,e===t.length)break;var o=WebSquare.style.getStyle(t[e-1].render,"margin-bottom");o="auto"===o?"0":o,t[e].render.style.top=t[e-1].render.offsetHeight+5+parseInt(i||"0",10)+parseInt(o||"0",10)+"px"}var s=this.customFilter.dom.closeButton.parentNode.offsetHeight,r=t[e-1].render.offsetHeight+10+parseInt(i||"0",10);this.customFilter.setSize(this.customFilter.render.offsetWidth,s+r+6)},T.prototype.replacechar=function(t){return"^"==t||"$"==t||"."==t||"["==t||"]"==t||"{"==t||"}"==t||"+"==t||"("==t||")"==t||"|"==t||"*"==t||"?"==t||"\\"==t?"\\"+t:void 0},T.prototype.setCustomFilterExpression=function(){this.dataList.removeColumnFilter(this.targetColID,{noRefreshAfter:!0});for(var t=!0,e=[],i=0;i<this.groupList.length;i++){for(var o={},s=this.groupList[i].getChildren(),r=0;r<s.length;r++){var a=s[r];if(-1!=a.id.indexOf("_selectbox"))o.select=a.getSelectedIndex(),this.itemValueObj[this.targetColID]["select"+i]=a.getSelectedIndex(),t=t&&0==a.getSelectedIndex(),o.dataType=this.getDataType(this.targetColID);else if(-1!=a.id.indexOf("_autocomplete")){var n=this;o.auto=a.getValue()!=a.options.chooseOptionLabel?(a.getValue()+"").replace(/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,(function(t){return n.replacechar(t)})):"",this.itemValueObj[this.targetColID]["auto"+i]=a.getValue(),t=t&&a.getValue()==a.options.chooseOptionLabel}else-1!=a.id.indexOf("_radio")&&(o.radio=a.getSelectedIndex(),this.itemValueObj[this.targetColID]["radio"+i]=a.getSelectedIndex())}o.select&&e.push(o)}this.customFilterStatusObj[this.headerID]=!0;var h={type:"func",colIndex:this.targetColID,key:this.customFilterOperator,condition:"and",columnfilterchangeFire:!1,param:e},d=!1;if(this.customFilterList&&this.customFilterList.customFilterListFilterInfo){var c=this.customFilterList.customFilterListFilterInfo[this.targetColID];this.customFilterList.customFilterListFilterInfo[this.targetColID]=JSON.stringify(h,(function(t,e){return"function"==typeof e||"object"===(0,l.Z)(e)&&e.constructor===RegExp?e.toString():e})),c!==this.customFilterList.customFilterListFilterInfo[this.targetColID]&&(d=!0,u.B.fireEvent(n._dataList,"onbeforecolumnfilterchange"))}this.dataList.setColumnFilter(h),d&&u.B.fireEvent(n._dataList,"onaftercolumnfilterchange");var p=this.getElementById(this.id+"_"+this.headerID+"_filter");t||0==e.length?WebSquare.style.removeClass(p,"w2grid_customFilter_filter"):WebSquare.style.addClass(p,"w2grid_customFilter_filter"),this.customFilter.hide()},T.prototype.customFilterOperator=function(t,e,i){for(var o=!0,s=0;s<e.length;s++){var r,a=!0,n=e[s].dataType,l=e[s].select,h=e[s].auto,d=e[s].auto.replace(".*","~~").replace(".","~"),u=d,c=t;if(l>=3&&l<=6)if("bigDecimal"===n){d=h.replace("\\.",".");var p=WebSquare.bigDecimal(d);"NaN"===p.big?!1:(u=p,c=WebSquare.bigDecimal(t))}else"number"!==n&&"float"!==n||(u=(d=h.replace("\\.",".")).toString().indexOf(".")>-1?parseFloat(d):parseInt(d,10));switch(e[s].select){case 1:(r=new RegExp(h,"g")).lastIndex=0,a=t==r.exec(t);break;case 2:(r=new RegExp(h,"g")).lastIndex=0,a=t!=r.exec(t);break;case 3:a="bigDecimal"===n?c.minus(u)>0:c>u;break;case 4:a="bigDecimal"===n?c.minus(u)>=0:c>=u;break;case 5:a="bigDecimal"===n?c.minus(u)<0:c<u;break;case 6:a="bigDecimal"===n?c.minus(u)<=0:c<=u;break;case 7:h=(h=h.replace(/\\\*/g,".*")).replace(/\\\?/g,".");var g=(r=new RegExp(h,"g")).exec(t);a=t==g||h==g;break;case 8:
a=""==h?t==h:!!(r=new RegExp("^("+h+")","g")).test(t);break;case 9:a=!!(r=new RegExp("^[^("+h+")]","g")).test(t);break;case 10:a=""==h?t==h:!!(r=new RegExp("("+h+")$","g")).test(t);break;case 11:a=!!(r=new RegExp("[^("+h+")]$","g")).test(t);break;case 12:a=""==h?t==h:!!(r=new RegExp(h,"g")).test(t);break;case 13:a=""==h?t!=h:!!(r=new RegExp("^(?!.*"+h+").*","g")).test(t);break;default:a=t==h}if(1===e.length){o=a;break}0!==s?o=0==e[s].radio?o&&a:o||a:o=a}return o},T.prototype.syncWithSortStatus=function(){try{this.headerSortStatusArr=[];for(var t=this._linkedDataList||this._dataList,e=0;e<t.sortStatusArr.length;e++){var i=t.sortStatusArr[e];"number"==typeof this.getColumnIndex(i.colID)&&(this.headerSortStatusArr.push(i),this.headerSortStatusArr[i.colID]=i)}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getFixedColumnLastIndex=function(t){try{if(!this.options.rowNumStatusFixed&&0===this.options.fixedColumn||!1===t)var e=this.options.fixedColumn;else e=this.options.fixedColumn+this.defaultColCnt;if(e<1)return 0;if(!this.options.fixedColumnWithHidden)for(var i=0,o=0;o<this.hiddenList.length;o++)if(this.hiddenList[o]||i++,i==e)return o+1;return e}catch(t){return r.w.printStackTrace(t,null,this),this.options.fixedColumn+this.defaultColCnt}},T.prototype.getFixedRightColumnLastIndex=function(){try{var t=this.colWidthList.length-this.options.fixedRightColumn,e=0;if(this.colWidthList.length!=t)for(var i=this.hiddenList.length-1;i>=0;i--)if(this.hiddenList[i])t--;else if(e++,this.options.fixedRightColumn==e)break;return t}catch(t){return r.w.printStackTrace(t,null,this),this.colWidthList.length-this.options.fixedRightColumn}},T.prototype.columnValue=function(t,e){try{return e=this.getColumnID(e),null!=t.nodeType&&void 0!==t.selectSingleNode?null==this.options.valueNode||""==this.options.valueNode?a.D.getTextNodeValue(t.selectSingleNode(e)):t.selectSingleNode(e).getAttribute(this.options.valueNode):t[e]}catch(t){r.w.printStackTrace(t,null,this)}return""},T.prototype.rowIndexValue=function(t){return t},T.prototype.getColumnOption=function(t,e){try{var i="";if(this.successBinding){var o=this.cellInfoHash[t];if("dataType"==e)if(o){var s=o.options.dataType;i=s||this._dataList.getColumnOption(t,e)}else(i=this._dataList.getColumnOption(t,e))||(i="text");else i=o.options[e]||"";return i}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setColumnOption=function(t,e,i){try{this.successBinding&&this._dataList.setColumnOption(t,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getColumnDataListInfo=function(t){try{var e=this.getCellInfo(t);return"select"==e.options.inputType||"autoComplete"==e.options.inputType||"checkcombobox"==e.options.inputType?e.getColumnDataListInfo():null}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setInitStyle=function(t){if(WebSquare.initStyle[this.id]){for(var e,i=/([\w-]*)\s*:\s*([^;]*)/g,o={};e=i.exec(WebSquare.initStyle[this.id].style);)o[e[1]]=e[2].wq_trim();var s=o[t]?t:"";if(s){var r=s.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()})),a=o[s]?o[s]:o[s.toUpperCase()];document.getElementById(this.id).style[r]=a}else document.getElementById(this.id).style.cssText=WebSquare.initStyle[this.id].style,this.rowStyleArr=[],this.colStyleArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.columnClassObj={},this._removeAllTDCellClass(),this.applyStyleOptions(this.getTotalRow());document.getElementById(this.id).className=WebSquare.initStyle[this.id].className}},T.prototype.refresh=function(t){try{this._dataList.broadcast({gridView:["notifyRefresh",[t]]})}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.checkAdaptiveGridType=function(){try{if(this.options.groupbyZone){var t=WebSquare.language.getMessage("Grid_warning5",this.id)||"["+this.id+"] adaptive를 지원하지 않는 Grid 입니다.";return!1}if(!this.render)return!1
;var e=this.htmlInfo.head.rowAttrArr.length,i=this.htmlInfo.body.rowAttrArr.length,o=0;if(this.hasSubtotal)for(var s=this.htmlInfo.subtotalArr,n=0;n<s.length;n++)o+=s[n].rowAttrArr.length;if(1==e&&1==i&&(this.adaptiveGridType=1),1==e&&2==i?this.adaptiveGridType=2:2==e&&1==i?this.adaptiveGridType=3:2==e&&2==i?this.adaptiveGridType=4:3==e&&1==i&&(this.adaptiveGridType=5),e>3||i>2||o>3){t=WebSquare.language.getMessage("Grid_warning5",this.id)||"["+this.id+"] adaptive를 지원하지 않는 Grid 입니다.";return $l(t),!1}if(e+(i>o?i:o)>4){t=WebSquare.language.getMessage("Grid_warning5",this.id)||"["+this.id+"] adaptive를 지원하지 않는 Grid 입니다.";return $l(t),!1}return!(a.D.isIE(6)||a.D.isIE(7)||a.D.isIE(8)||a.D.isIE(9))}catch(t){r.w.printStackTrace(t)}},T.prototype.setAdaptiveGridBodyHeight=function(){try{for(var t=function(t){var e=this.getColumnIndex(t),i=parseInt(this.getAdaptiveColumnStyleValue(e,"height"),10);isNaN(i)||(this.orgBodyHeightObj[t]=this.getColumnStyleValue(e,"height"),this.setColumnStyle(t,"height",i+"px"))},e=this.htmlInfo.head.rowArr,i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var a=o[s],n=parseInt(a.colSpan,10),l=a.id,h=this.headerToBodyRelation[l],d=this.getColumnIndex(h);if(!isNaN(n)&&n>1)for(var u=0;u<n;u++)t.call(this,this.getColumnID(d+u));else t.call(this,h)}}catch(t){r.w.printStackTrace(t)}},T.prototype.removeAdaptiveGridBodyHeight=function(){try{for(var t in this.orgBodyHeightObj)this.setColumnStyle(t,"height",this.orgBodyHeightObj[t])}catch(t){r.w.printStackTrace(t)}},T.prototype.setAdaptiveGridHeaderHeight=function(){try{var t=this.getHeaderID(0),e=parseInt(this.getHeaderCellStyleValue(t,"padding-top"),10),i=parseInt(this.getHeaderCellStyleValue(t,"padding-bottom"),10);0===e&&null!=this.oldOptions.headerPaddingTop&&(e=parseInt(this.oldOptions.headerPaddingTop,10)),0===i&&null!=this.oldOptions.headerPaddingBottom&&(i=parseInt(this.oldOptions.headerPaddingBottom,10));for(var o=e+i,s=this.htmlInfo.head.rowArr,a=0;a<s.length;a++)for(var n=s[a],l=0;l<n.length;l++){var h=n[l],d=parseInt(h.colSpan,10),u=h.id,c=this.headerToBodyRelation[u],p=this.getColumnIndex(c),g=parseInt(this.getCellInfo(p).options.colSpan,10),m=0,f=0,b=this.headerInfoHash[u];if(b&&b.options&&"string"==typeof b.options.style)for(var y=b.options.style.split(";"),v=0;v<y.length;v++){if("height"==(C=y[v].split(":"))[0]){f=parseInt(C[1],10);break}}else f=parseInt(this.getHeaderCellStyleValue(u,"height"),10);if(null!=p)if(d>0){var w=d;for(v=p;v<p+d;v++)this.hiddenList[v]?w--:(m+=parseInt(this.getColumnStyleValue(v,"height"),10),m+=o);f!=(m-=o-(w-1))&&(null==this.orgHeaderHeightObj[u]&&(this.orgHeaderHeightObj[u]=f+"px"),w>0&&this.setHeaderStyle(u,"height",m+"px"))}else if(m=parseInt(this.getColumnStyleValue(p,"height"),10),g>1){m-=(o+1)*(g-1);var S=Math.round(m/g);for(v=l;v<l+g;v++){if(u=(h=n[v]).id,this.headerInfoHash[u])for(y=this.headerInfoHash[u].options.style.split(";"),v=0;v<y.length;v++){var C;if("height"==(C=y[v].split(":"))[0]){f=parseInt(C[1],10);break}}else f=parseInt(this.getHeaderCellStyleValue(u,"height"),10);v==l+g-1?(this.orgHeaderHeightObj[u]=f+"px",this.setHeaderStyle(u,"height",m+"px")):(this.orgHeaderHeightObj[u]=f+"px",this.setHeaderStyle(u,"height",S+"px"),m-=S)}}else f!=m&&(null==this.orgHeaderHeightObj[u]&&(this.orgHeaderHeightObj[u]=f+"px"),this.hiddenList[p]||this.setHeaderStyle(u,"height",m+"px"))}if(this.hasFooter){var x=this.htmlInfo.foot.rowArr;for(a=0;a<x.length;a++){var _=x[a];for(l=0;l<_.length;l++){var I=_[l],T=parseInt(I.colSpan),k=I.id,D=(p=l,m=0,parseInt(this.getFooterStyle(k,"height")));if(T>0){for(v=p;v<p+T;v++)m+=parseInt(this.getColumnStyleValue(v,"height")),m+=o;m-=o-(T-1)}else m=parseInt(this.getColumnStyleValue(p,"height"));D!=m&&(this.orgFooterHeightObj[k]=D+"px",this.setFooterStyle(k,"height",m+"px"))}}}}catch(t){r.w.printStackTrace(t)}},T.prototype.removeAdaptiveGridHeaderHeight=function(){try{for(var t in this.orgHeaderHeightObj)this.setHeaderStyle(t,"height",this.orgHeaderHeightObj[t])
;for(var t in this.orgFooterHeightObj)this.setFooterStyle(t,"height",this.orgFooterHeightObj[t])}catch(t){r.w.printStackTrace(t)}},T.prototype.setAdaptiveGridSubtotalHeight=function(){try{var t=this.getHeaderID(0),e=parseInt(this.getHeaderCellStyleValue(t,"padding-top"))+parseInt(this.getHeaderCellStyleValue(t,"padding-bottom"));if(0==Object.keys(this.orgSubtotalHeightObj).length)for(var i=0;i<this.drawedSubtotal.length;i++)for(var o=0;o<this.drawedSubtotal[i].length;o++)for(var s=this.drawedSubtotal[i][o].childNodes,a=this.defaultColCnt;a<s.length;a++){var n=parseInt(s[a].getAttribute("colSpan")),l=s[a].getAttribute("id"),h=0,d=s[a].style.height;if(null!=n&&n>0){for(var u=a;u<a+n;u++)h+=parseInt(this.getColumnStyleValue(u-this.defaultColCnt,"height")),h+=e;h-=e-(n-1)}else h=d;d!=h&&(this.orgSubtotalHeightObj[l]=d,s[a].style.height=h+"px")}}catch(t){r.w.printStackTrace(t)}},T.prototype.removeAdaptiveGridSubtotalHeight=function(){try{for(var t in this.orgSubtotalHeightObj)for(var e=0;e<this.drawedSubtotal.length;e++)for(var i=0;i<this.drawedSubtotal[e].length;i++)for(var o=this.drawedSubtotal[e][i].childNodes,s=this.defaultColCnt;s<o.length;s++){o[s].getAttribute("id")==t&&(o[s].style.height=this.orgSubtotalHeightObj[t])}this.orgSubtotalHeightObj={}}catch(t){r.w.printStackTrace(t)}},T.prototype.setDrillDownDragDrop=function(t){try{this.drillDownDragDrop=a.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getDataListInfo=function(){try{if(this.successBinding){var t={};return t.id=this.options.dataList,t}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=a.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},T.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=a.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},T.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){r.w.printStackTrace(t)}},T.prototype.setNextTabID=function(t,e){try{null!=t&&a.D.setNextTabID(this.id,t,e)}catch(t){r.w.printStackTrace(t)}},T.prototype.getInputType=function(t){try{return this.getCellInfo(t).options.inputType}catch(t){r.w.printStackTrace(t)}},T.prototype.getDataType=function(t){try{return this.getCellInfo(t).options.dataType||this._dataList.getCellInfo(t).options.dataType}catch(t){r.w.printStackTrace(t)}},T.prototype.getFakeExpressionArr=function(){try{for(var t=[],e=[],i=0;i<this.dataList.getRowCount();i++)(t=this._dataList.getRowData(i)).push(""),e=e.concat(t);return e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setUseFilterList=function(t){try{this.options.useFilterList=a.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setUseFilter=function(t,e){try{var i=t,o=this.headerInfoHash[i];if(null==o&&(i=this.bodyToHeaderRelation[i],null==(o=this.headerInfoHash[i])))return!1;var s,n=o.options.useFilter,l=a.D.getBoolean(e);if(n===l)return!1;if(o.options.useFilter=l,!0===n)null!=(s=document.getElementById(this.id+"_"+i+"_filter"))&&(s.style.display="none");else if(null!=(s=document.getElementById(this.id+"_"+i+"_filter")))s.style.display="";else{var h=this.getHeaderLayer(i),d=h.innerHTML;h.innerHTML="<table style='width:100%;height:100%;'><tr><td style='width:100%;'>"+d+"</td><td><input type='button' id='"+this.id+"_"+i+"_filter' class='w2trigger w2grid_customFilter_open' onclick='"+this.id+'.showCustomFilter("'+i+"\");'/></td></tr></table>"}return!0}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getFixedRow=function(){var t=parseInt(this.options.fixedRow,10);return t=isNaN(t)?0:t},T.prototype.getLastFixedRow=function(){var t=parseInt(this.options.lastFixedRow,10);return t=isNaN(t)?0:t},
T.prototype.isVirtualCursor=function(){try{if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum)if(this.getLastFocusedCell().focusedRowIndex>this.lastIndex&&0==this.getElementById(this.id+"_scrollY_div").scrollTop)return!0;return!1}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeCell=function(t){try{if(null==t||null==t.rowIndex||null==t.colIndex)return void c.k.printLog("gridView mergeCell error : invalid argument ["+this.id+"]");null==t.rowSpan&&(t.rowSpan=1),null==t.colSpan&&(t.colSpan=1);var e=parseInt(t.rowIndex,10),i=parseInt(t.colIndex,10),o=parseInt(t.rowSpan,10),s=parseInt(t.colSpan,10);o>1||s>1?(this.cellMergeInfo[e+"_"+i]={rowSpan:o,colSpan:s},this.cellMergeRealInfo[e+"_"+i]=this.getRealRowIndex(e)):null!=this.cellMergeInfo[e+"_"+i]&&(delete this.cellMergeInfo[e+"_"+i],delete this.cellMergeRealInfo[e+"_"+i]);for(var n=this.dataList._getCellData(e,i,"3"),l=0;l<o;l++)for(var h=0;h<s;h++)0===l&&0===h||(this.dataList._setCellData(e+l,i+h,n),this.cellMergeInfo[e+l+"_"+(i+h)]&&delete this.cellMergeInfo[e+l+"_"+(i+h)]);this.dynamicMergeHTML(),this.options.oddEvenColorDisplay&&"native"===this.options.drawType&&a.D.setTimeout(this.redrawTable,{key:this.id+"_mergeCell",delay:100,caller:this})}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeFocusedCell=function(){try{if(this.focusedCell.length>1){var t=this.focusedCell.length-1;this.mergeCell({rowIndex:this.focusedCell[0].focusedRowIndex,colIndex:this.focusedCell[0].focusedColIndex,rowSpan:this.focusedCell[t].focusedRowIndex-this.focusedCell[0].focusedRowIndex+1,colSpan:this.focusedCell[t].focusedColIndex-this.focusedCell[0].focusedColIndex+1})}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeSplitFocusedCell=function(){try{for(var t=0;t<this.focusedCell.length;t++)this.mergeCell({rowIndex:this.focusedCell[t].focusedRowIndex,colIndex:this.focusedCell[t].focusedColIndex,rowSpan:1,colSpan:1})}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeClear=function(t){try{void 0!==t&&null!=t||(t={}),this.cellMergeInfo={},this.cellMergeRealInfo={},this.options.mergeCells="never",this.options.mergeCellsFixedCols="never",this.options.mergeCellsFixedRows="never",!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeNotifyRowChanged=function(t,e){try{var i="removeRow"===t?-1:1,o={};for(var s in this.cellMergeInfo){var a=s.split("_"),n=parseInt(a[0],10),l=parseInt(a[1],10),h=this.cellMergeInfo[s];if(n<=e&&e<n+h.rowSpan)if(-1===i){if(h.rowSpan--,h.rowSpan<=0||1==h.rowSpan&&h.colSpan<=1)continue}else if(n<e){var d=h.rowSpan-(e-n);if((d>1||1==d&&h.colSpan>1)&&(o[e+1+"_"+l]={rowSpan:d,colSpan:h.colSpan}),h.rowSpan-=d,h.rowSpan<=0||1==h.rowSpan&&h.colSpan<=1)continue}(n>e||n==e&&-1!==i)&&(n+=i),o[n+"_"+l]=h}this.cellMergeInfo=o}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeNotifyFilter=function(){try{if("never"===this.options.mergeCells&&"never"===this.options.mergeCellsFixedRows&&"never"===this.options.mergeCellsFixedCols){var t={};for(var e in this.cellMergeRealInfo._hidden){var i=e.split("_"),o=parseInt(i[0],10),s=parseInt(i[1],10),a=this.getDisplayRowIndex(o);isNaN(a)||(t[a+"_"+s]=this.cellMergeRealInfo._hidden[e],delete this.cellMergeRealInfo._hidden[e],this.cellMergeRealInfo[a+"_"+s]=o)}for(var n in this.cellMergeInfo){var l=n.split("_"),h=(s=parseInt(l[1],10),this.cellMergeInfo[n]);o=this.cellMergeRealInfo[n],a=this.getDisplayRowIndex(o);isNaN(a)?(this.cellMergeRealInfo._hidden||(this.cellMergeRealInfo._hidden={}),this.cellMergeRealInfo._hidden[o+"_"+s]=h,delete this.cellMergeRealInfo[n]):(t[a+"_"+s]=h,delete this.cellMergeRealInfo[n],this.cellMergeRealInfo[a+"_"+s]=o)}this.cellMergeInfo=t}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeByFree=function(t,e,i,o){try{return this.mergeCell({rowIndex:t,colIndex:e,rowSpan:i-t+1,colSpan:o-e+1})}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.unmergeByFree=function(t,e){try{return this.mergeCell({
rowIndex:t,colIndex:e,rowSpan:1,colSpan:1})}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeCells=function(t,e){try{this._mergeCells(t,e,{type:"mergeCells"})}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeByCol=function(t){try{this._mergeCells("bycol",t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeByRow=function(t){try{this._mergeCells("byrow",t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeByColRec=function(t){try{this._mergeCells("bycolrec",t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeByRowRec=function(t){try{this._mergeCells("byrowrec",t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeByRestricCol=function(t){try{this._mergeCells("byrestriccol",t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeByRestricRow=function(t){try{this._mergeCells("byrestricrow",t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeCells=function(t,e,i){try{var o=t.toLowerCase();switch(void 0!==i&&null!=i||(i={type:"mergeCells"}),this.options[i.type]=o,o){case"never":this.cellMergeInfo={},this.cellMergeRealInfo={},e&&!0===e.noDraw||this.dynamicMergeHTML();break;case"bycol":this._mergeByCol(e);break;case"byrow":this._mergeByRow(e);break;case"bycolrec":this._mergeByColRec(e);break;case"byrowrec":this._mergeByRowRec(e);break;case"byrestriccol":this._mergeByRestricCol(e);break;case"byrestricrow":this._mergeByRestricRow(e)}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeRefresh=function(){try{if("never"===this.options.mergeCells&&"never"===this.options.mergeCellsFixedRows&&"never"===this.options.mergeCellsFixedCols)return;var t={noDraw:!0};this.cellMergeInfo={},this.cellMergeRealInfo={},"never"!==this.options.mergeCells&&this.mergeCells(this.options.mergeCells,t),"never"!==this.options.mergeCellsFixedRows&&this.mergeCellsFixedRows(this.options.mergeCellsFixedRows,t),"never"!==this.options.mergeCellsFixedCols&&this.mergeCellsFixedCols(this.options.mergeCellsFixedCols,t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeByCol=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getRowCount(),i=this.getColumnCount(),o=this.options.fixedRow,s=this.options.fixedColumn,a=i-this.options.fixedRightColumn,n=e,l={},h=this.getSubtotalRowList({returnType:"object"});!0!==t.keepMerge&&!0!==t.fixedRows&&!0!==t.fixedCols&&(this.cellMergeInfo={},this.cellMergeRealInfo={});var d={};!0===t.keepMerge&&(d=this.getMergedCells()),!0===t.fixedRows&&(o=0,n=this.options.fixedRow,s=0,a=i);var u=!1;!0===t.fixedCols&&(0==this.options.fixedColumn?(s=i-this.options.fixedRightColumn,a=i):0==this.options.fixedRightColumn?(s=0,a=this.options.fixedColumn):(s=0,a=i,u=!0),!1===t.fixedRows?(o=this.options.fixedRow,n=e):(o=0,n=e));for(var c=s;c<a;c++){if(t.mergeCol){if(!1===t.mergeCol[c])continue}else if(!1===this.mergeColObj[c])continue;if(!(u&&c>=this.options.fixedColumn&&c<a-this.options.fixedRightColumn)&&!(this.htmlInfo.body.rowAttrArr.length>1&&1==this.colIndexInfo.body.colInfo.rowSpanArr[c]))for(var p=this.tdIdList[c],g=o;g<n;g++){var m=this.dataList._getCellData(g,p),f=1;if(!0===t.keepMerge&&(f=0),!0===t.upperColumn&&(l[g]=!0),t.mergeRow){if(!1===t.mergeRow[g])continue}else if(!1===this.mergeRowObj[g])continue;for(;f<n-g;){if(t.mergeRow){if(!1===t.mergeRow[g+f])break}else if(!1===this.mergeRowObj[g+f])break;if(g+f>n)break;if(m!=(0===f?m:this.dataList._getCellData(g+f,p)))break;if(!0===t.keepMerge&&!0===d[g+f+"_"+c])break;if(!0===t.upperColumn&&!0===l[g+f])break;if(!0===h[g+f])break;f++}f>1&&(this.cellMergeInfo[g+"_"+c]={rowSpan:f,colSpan:1},g=g+f-1)}}l=void 0,!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeByRow=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getRowCount(),i=this.getColumnCount(),o=this.options.fixedRow,s=this.options.fixedColumn,a=i-this.options.fixedRightColumn,n=e,l={};!0!==t.keepMerge&&!0!==t.fixedRows&&!0!==t.fixedCols&&(this.cellMergeInfo={},
this.cellMergeRealInfo={});var h={};!0===t.keepMerge&&(h=this.getMergedCells()),!0===t.fixedRows&&(o=0,n=this.options.fixedRow,s=0,a=i);var d=!1;!0===t.fixedCols&&(0==this.options.fixedColumn?(s=i-this.options.fixedRightColumn,a=i):0==this.options.fixedRightColumn?(s=0,a=this.options.fixedColumn):(s=0,a=i,d=!0),!1===t.fixedRows?(o=this.options.fixedRow,n=e):(o=0,n=e));for(var u=o;u<n;u++){if(t.mergeRow){if(!1===t.mergeRow[u])continue}else if(!1===this.mergeRowObj[u])continue;for(var c=s;c<a;c++)if(!(d&&c>=this.options.fixedColumn&&c<a-this.options.fixedRightColumn)){var p=this.dataList._getCellData(u,this.tdIdList[c]),g=1;if(!0===t.keepMerge&&(g=0),!0===t.upperRow&&(l[c]=!0),t.mergeCol){if(!1===t.mergeCol[c])continue}else if(!1===this.mergeColObj[c])continue;for(;g<a-c;){if(t.mergeCol){if(!1===t.mergeCol[c+g])break}else if(!1===this.mergeColObj[c+g])break;if(d){if(c+g>=this.options.fixedColumn&&c+g<a-this.options.fixedRightColumn)break}else if(c+g>a)break;if(p!=(0===g?p:this.dataList._getCellData(u,this.tdIdList[c+g])))break;if(!0===t.keepMerge&&!0===h[u+"_"+(c+g)])break;if(!0===t.upperRow&&!0===l[c+g])break;g++}g>1&&(this.cellMergeInfo[u+"_"+c]={rowSpan:1,colSpan:g},c=c+g-1)}}l=void 0,!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeByColRec=function(t){try{void 0!==t&&null!=t||(t={});var e=o.x.extend({},t),i=o.x.extend({},t);e.noDraw=!0,i.keepMerge=!0,i.noDraw=!0,this._mergeByCol(e),this._mergeByRow(i),this._mergeAdjacentCell("col"),!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeByRowRec=function(t){try{void 0!==t&&null!=t||(t={});var e=o.x.extend({},t),i=o.x.extend({},t);e.noDraw=!0,i.keepMerge=!0,i.noDraw=!0,this._mergeByRow(e),this._mergeByCol(i),this._mergeAdjacentCell("row"),!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeAdjacentCell=function(t){try{var e="row"===t?[0,1]:"col"===t?[1,0]:null;if(null==e)return;var i={},o={},s=this.getSubtotalRowList({returnType:"object"});for(var a in this.cellMergeInfo){var n=a.split("_"),l=parseInt(n[e[0]],10),h=parseInt(n[e[1]],10),d=0===e[0]?this.cellMergeInfo[a].colSpan:this.cellMergeInfo[a].rowSpan,u=0===e[0]?this.cellMergeInfo[a].rowSpan:this.cellMergeInfo[a].colSpan;null!=i[h+"_"+d]?(null==o[h+"_"+d]&&(o[h+"_"+d]=[i[h+"_"+d]]),o[h+"_"+d].push({row:l,rowSpan:u})):i[h+"_"+d]={row:l,rowSpan:u}}for(var a in o){var c=parseInt(a.split("_")[0]),p=0===e[0]?"rowSpan":"colSpan";o[a].sort((function(t,e){return t.row>e.row}));for(var g=o[a].length-1;g>=1;g--){var m=!0===s[o[a][g].row];if(o[a][g-1].row+o[a][g-1].rowSpan>=o[a][g].row&&!m)if((0===e[0]?this.dataList._getCellData(o[a][g-1].row,c):this.dataList.getCellData(c,o[a][g-1].row))===(0===e[0]?this.dataList._getCellData(o[a][g].row,c):this.dataList.getCellData(c,o[a][g].row))){o[a][g-1].rowSpan=o[a][g].row+o[a][g].rowSpan-o[a][g-1].row;var f=0===e[0]?o[a][g].row+"_"+c:c+"_"+o[a][g].row;delete this.cellMergeInfo[f];var b=0===e[0]?o[a][g-1].row+"_"+c:c+"_"+o[a][g-1].row;this.cellMergeInfo[b][p]=o[a][g-1].rowSpan}}}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeByRestricCol=function(t){try{void 0!==t&&null!=t||(t={});var e=o.x.extend({},t);e.upperColumn=!0,this._mergeByCol(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._mergeByRestricRow=function(t){try{void 0!==t&&null!=t||(t={});var e=o.x.extend({},t);e.upperRow=!0,this._mergeByRow(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeCellsFixedRows=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"never"!==this.options.mergeCellsFixedRows){var i=this.options.mergeCells;this.mergeClear(e),"never"!==i&&this.mergeCells(i,{noDraw:!0})}e.fixedRows=!0,e.fixedCols=!1,this._mergeCells(t,e,{type:"mergeCellsFixedRows"})}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeCellsFixedCols=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"never"!==this.options.mergeCellsFixedCols){
var i=this.options.mergeCells;this.mergeClear(e),"never"!==i&&this.mergeCells(i,{noDraw:!0})}e.fixedCols=!0,e.fixedRows=!1,this._mergeCells(t,e,{type:"mergeCellsFixedCols"})}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeCol=function(t,e){try{t=this.getColumnIndex(t);isNaN(t)||(this.mergeColObj[t]=e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.mergeRow=function(t,e){try{this.mergeRowObj[t]=e}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getMerged=function(t,e){try{if(this.cellMergeInfo[t+"_"+e])return!0;for(var i in this.cellMergeInfo){var o=i.split("_"),s=this.cellMergeInfo[i],a=parseInt(o[0],10),n=parseInt(o[1],10);if(a<=t&&n<=e&&a+s.rowSpan-1>=t&&n+s.colSpan-1>=e)return!0}}catch(t){r.w.printStackTrace(t,null,this)}return!1},T.prototype.getMergedInfo=function(t,e){try{var i={merged:!1};if(this.cellMergeInfo[t+"_"+e])i.merged=!0,i.startRowIndex=t,i.startColIndex=e;else for(var o in this.cellMergeInfo){var s=o.split("_"),a=this.cellMergeInfo[o],n=parseInt(s[0],10),l=parseInt(s[1],10);n<=t&&l<=e&&n+a.rowSpan-1>=t&&l+a.colSpan-1>=e&&(i.merged=!0,i.startRowIndex=n,i.startColIndex=l,i.endRowIndex=n+a.rowSpan-1,i.endColIndex=l+a.colSpan-1)}}catch(t){r.w.printStackTrace(t,null,this)}return i},T.prototype.getMergeAll=function(t,e){try{for(var i,o=[],s=[],a=t.split(","),n=0;n<a.length;n++)o[n]=parseInt(a[n],10);for(var l in!0===e&&this.hasSubtotal&&(i=this.getSubtotalRowList().sort((function(t,e){return t-e}))),this.cellMergeInfo){var h=l.split("_"),d=this.cellMergeInfo[l],u=parseInt(h[0],10),c=parseInt(h[1],10),p=d.rowSpan,g=d.colSpan,m=c+g-1,f=0,b=0,y=0,v=0;if(!0===e&&this.hasSubtotal){for(var w=0;w<i.length&&u>=i[w];w++)v++;u+=v}if(""!=t){o=o.sort();for(n=0;n<o.length;n++)c>(f=o[n])?y++:c<=f&&f<=m&&(c==f&&1==g?g=-1:b++);g-=b,c-=y}-1!=g&&(g>1||p>1)&&s.push({x:c,y:u,r:p,c:g})}return JSON.stringify(s)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getMergedCells=function(){try{var t={};for(var e in this.cellMergeInfo){var i=e.split("_"),o=this.cellMergeInfo[e],s=parseInt(i[0],10),a=parseInt(i[1],10),n=o.rowSpan||1,l=o.colSpan||1;if(l>1||n>1)for(var h=0;h<n;h++)for(var d=0;d<l;d++)t[s+h+"_"+(a+d)]=!0}return t}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.refreshGrid=function(t){try{var e=null,i=t.op;this.hiddenRowObj.length>0&&"setInstanceValue"!=i&&(e=JSON.stringify(this.hiddenRowObj),this.clearRowVisible());var o,s,a=t.xpath;if("setInstanceValue"==i){o=WebSquare.ModelUtil.findInstanceNodes(this.options.ref+"/"+this.options.repeatNode,null,this.scope_id);var n,l=(p=a.split("/"))[p.length-1],h=this.getColumnIndex(l);if(h>=0){n=this.getCellInfo(l),p.pop();var d=WebSquare.ModelUtil.findInstanceNode(p.join("/"),null,this.scope_id);s=this.getInstanceIndex(o,d);var u=this._dataList.getFilteredRowIndex(s);"radio"==n.options.inputType&&t.value+""==n.options.trueValue&&n.resetOthers(u,!0),u>=0?this._dataList.setCellData(u,h,t.value):this._dataList._setData(s,h,t.value)}}else if("setInstanceNode"==i){if(!(f=this.options.ref==t.replacexpath&&"replace"==t.type?this.xmlData2ArrData(t.replaceNode,!0):this.xmlData2ArrData(t.node,!0)).length)return;this.insertRowByInstance=!0,o=WebSquare.ModelUtil.findInstanceNodes(this.options.ref+"/"+this.repeatNodeTagName[0],null,this.scope_id),"append"==t.type?this.insertRow(null,{insertData:f}):"insertBeforeSibling"==t.type?(s=this.getInstanceIndex(o,t.node),this.insertRow(s,{insertData:f})):"replace"==t.type&&this._dataList.setData(f),this.insertRowByInstance=!1}else if("setInstanceChildNodes"==i){if(this.options.ref==t.replacexpath&&"replace"==t.type)f=this.xmlData2ArrData(t.replaceNode,!0);else t.baseNode&&t.baseNode!=this.options.baseNode&&(m=t.baseNode),f=this.xmlData2ArrData(t.node,!0,{baseNode:m});if(!f.length&&"append"==t.type)return;var c=this.getTotalCol();if(this.insertRowByInstance=!0,o=WebSquare.ModelUtil.findInstanceNodes(this.options.ref+"/"+this.repeatNodeTagName[0],null,this.scope_id),"append"==t.type)for(;f.length>0;)b=f.splice(0,c),
this.insertRow(null,{insertData:b});else"replace"==t.type&&this._dataList.setData(f);this.insertRowByInstance=!1}else if("setInstanceLastNodeChildNodes"==i||"copyLastNodeChildrenNodes"==i){if(!(f=this.xmlData2ArrData(t.node,!0,{repeatNode:t.repeatNode,isRepeatNode:!0})).length)return;this.insertRowByInstance=!0,"replace"!=t.type&&"replaceAll"!=t.type&&"append"!=t.type||this.setRowData(parseInt(t.changeIndex)-1,f,!0),this.insertRowByInstance=!1}else if("removeInstanceNode"==i)this.removeRowByInstance=!0,s=t.deleteIndex,this.removeRow(s),this.removeRowByInstance=!1;else if("removeInstanceNodeAll"==i)this.removeRowByInstance=!0,this.dataList.removeAll(),this.removeRowByInstance=!1;else if("copyChildrenNodes"==i){var p,g,m;t.copiedXPath&&(g=(p=t.copiedXPath.split("/"))[p.length-1]),t.baseNode&&g!=this.options.baseNode&&(m=g);var f=this.xmlData2ArrData(t.node,!0,{baseNode:m});if("replaceAll"==t.type)this.setData(f);else if("append"==t.type){var b;c=this.getTotalCol();for(this.insertRowByInstance=!0;f.length>0;)b=f.splice(0,c),this.insertRow(null,{insertData:b});this.insertRowByInstance=!1}}e&&"setInstanceValue"!=i&&(this.hiddenRowObj=JSON.parse(e),this._refreshRowVisible({lastIndex:this.lastIndex,noDraw:!0}),this.setScrollYHeight(),this._mergeRefresh(),this.applyStyleOptions(this.lastIndex))}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getInstanceIndex=function(t,e){try{if(!Array.prototype.indexOf||a.D.isIEAllVersion()&&parseInt(s.v.browserVersion(),10)>8){for(var i=t.length;i--;)if(t[i]===e)return i;return}return t.indexOf(e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._getArrayIndexOf=function(t,e){try{if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]==e)return i;return}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setRef=function(t){try{if(t&&t.ref){this.options.ref=t.ref,t.baseNode&&(this.options.baseNode=t.baseNode),t.repeatNode&&(this.options.repeatNode=t.repeatNode);var e=null==t.aliasDataCollection?this.scope_id:t.aliasDataCollection,i=WebSquare.ModelUtil.findInstanceNode(this.options.ref,null,e);this.setXML(i,null,{ref:this.options.ref,aliasDataCollection:e})}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._setRef=function(t,e){try{this.filteredRepeatNode=!1,this.repeatNodeChildTagName=[],this.repeatNodeTagName=this.options.repeatNode.split("/"),this.filteredRepeatNodeTagName=[];this.options.ref;for(var i=0;i<this.repeatNodeTagName.length;i++){var o=this.repeatNodeTagName[i];i==this.repeatNodeTagName.length-1&&o.indexOf("[")>=0&&(o.indexOf("[@")>=0||(this.repeatNodeTagNameFilter=!0,o=o.split("[")[0])),1==this.repeatNodeTagNameFilter?this.filteredRepeatNodeTagName.push(o):this.filteredRepeatNodeTagName.push(this.repeatNodeTagName[i]),i!=this.repeatNodeTagName.length-1&&"/"+this.repeatNodeTagName[i]}for(var s=0;s<WebSquare.WebSquaredoc.instanceRefElement.length;s++){var a=WebSquare.WebSquaredoc.instanceRefElement[s].id;try{a==this.id&&WebSquare.WebSquaredoc.instanceRefElement.splice(s,1)}catch(t){}}var n=this.options.aliasDataCollection?this.options.aliasDataCollection:this.scope_id;for(var l in WebSquare.WebSquaredoc.instanceRefElement.push(new WebSquare.ModelUtil.createInstanceRefElement(this.options.ref,this.id,this.options.baseNode,this.repeatNodeTagName,this.cellIdList,n)),this.cellInfoHash)this.repeatNodeChildTagName.push(l)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setImageSrc=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if(!e||"textImage"!=o)return;i.options.imageSrc=e,this.refreshColumn(t)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setSyncScroll=function(t,e){try{this.options.syncScroll=t,null!=e&&(this.options.syncScrollId=e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.resetExpressionFunc=function(){try{if(this.useExpression)for(var t=this.getTotalCol(),e=0;e<t;e++){var i=this.getCellInfo(e)
;if(i&&i.options&&"expression"==i.options.inputType)for(var o=this.drawedRowLength,s=0;s<o;s++)i.options.expressionFunc&&i.options.expressionFunc[s]&&i.options.expressionFunc[s].changeCount&&(i.options.expressionFunc[s]={})}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellDataType=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e),a=s.id;if(0!=s.internal||"custom"!=s.options.inputType)return!1;var n=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[n]?s.cellManagerHashByRowIndex[n]:s,!0;var l=s.options.inputType;if("text"!=l&&"textarea"!=l&&"input"!=l&&"secret"!=l)return $l("cell의 inputType이 올바르지 않습니다."),!1;var h=this.getInput(s);h.setValue(this._dataList.getCellData(o,a));var d=h.getValue();h.setDataType(i),s.options.dataType="float";var u=h.formatter.unformat(d),c=h.validator.validateString(u);h.setValueNM(c),d!==c&&this._dataList.setCellData(o,a,c)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellAllowChar=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e),a=s.id;if(0!=s.internal||"custom"!=s.options.inputType)return!1;var n=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[n]?s.cellManagerHashByRowIndex[n]:s,!0;var l=s.options.inputType;if("text"!=l&&"input"!=l&&"textImage"!=l&&"secret"!=l)return $l("cell의 inputType이 올바르지 않습니다."),!1;var h=this.getInput(s);if(h&&h.options&&("input"===h.options.pluginName||"textarea"===h.options.pluginName)){h.setValue(this._dataList.getCellData(o,a)),h.setAllowChar(i);var d=h.getValue();this._dataList.setCellData(o,a,d)}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellDisplayFormat=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e);if(0!=s.internal||"custom"!=s.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[a]?s.cellManagerHashByRowIndex[a]:s,!0;var n=s.options.inputType;if("text"!=n&&"textarea"!=n&&"input"!=n&&"textImage"!=n&&"secret"!=n)return $l("cell의 inputType이 올바르지 않습니다."),!1;if(s.options.displayFormat=i,s.initFormatter(),s.options.embeddedInput){var l=this.data_td_list[e+(o-this.rowIndex)*this.oneRowDataLength];if(l){var h=this.getInput(s,l);h&&"function"==typeof h.setDisplayFormat&&h.setDisplayFormat(i)}}this.refreshCell(o,e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellDisplayFormatter=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e);if(0!=s.internal||"custom"!=s.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[a]?s.cellManagerHashByRowIndex[a]:s,!0;var n=s.options.inputType;if("text"!=n&&"textarea"!=n&&"input"!=n&&"textImage"!=n&&"secret"!=n)return $l("cell의 inputType이 올바르지 않습니다."),!1;s.options.displayFormatter=i,s.initFormatter(),this.refreshCell(o,e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellMaxLength=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e),a=s.id;if(0!=s.internal||"custom"!=s.options.inputType)return!1;var n=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[n]?s.cellManagerHashByRowIndex[n]:s,!0;var l=s.options.inputType;if("text"!=l&&"textarea"!=l&&"input"!=l&&"textImage"!=l&&"secret"!=l)return $l("cell의 inputType이 올바르지 않습니다."),!1;var h=this.getInput(s);h.setValue(this._dataList.getCellData(o,a)),"float"===s.options.dataType?s.setFloatMaxLength(i.toString()):s.setMaxLength(i);var d=h.getValue();this._dataList.setCellData(o,a,d)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellCustomFormatter=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e);if(0!=s.internal||"custom"!=s.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);s=s.cellManagerHashByRowIndex[a]?s.cellManagerHashByRowIndex[a]:s,!0;var n=s.options.inputType;if("text"!=n&&"textarea"!=n&&"input"!=n&&"textImage"!=n&&"secret"!=n)return $l("cell의 inputType이 올바르지 않습니다."),!1;s.options.customFormatter=i,s.initFormatter(),
this.refreshCell(o,e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellDisableEdit=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,s=this.getCellInfo(e);if("custom"!=s.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);if("autoComplete"!=(s=s.cellManagerHashByRowIndex[a]?s.cellManagerHashByRowIndex[a]:s).options.inputType)return $l("cell의 inputType이 올바르지 않습니다."),!1;s.options.disableEdit=i,s.autoComplete&&(s.autoComplete.options.disableEdit=i),this.refreshCell(o,e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setCellInputType=function(t,e,i){try{if(i&&i.inputType){e=this.getColumnID(e);if(this._linkedDataList){var o=this._linkedDataList.filteredRowIndexArr[t];"number"!=typeof(t=this._dataList.getFilteredRowIndex(o))&&(t=o)}var s={};for(var a in i)s[a]=i[a];this._setCellInputType(t,e,null,s)}}catch(t){r.w.printStackTrace(t)}},T.prototype._setCellInputType=function(t,e,i,o){try{null==i&&(i=""),null==this.editedCell||this.getCellOption(t,e,"embeddedInput")||this.editedCell.handleCancelEdit();var s=this._dataList.getTotalRow();this.groupbyStatus&&this.groupbyStatus.grouped&&(s=this._dataList.filteredRowIndexArr.length);var a,n=this._dataList.getTotalCol(),l=!0;a=this.options&&"grid"===this.options.pluginName&&this.isDrillDown&&this.options.drilldownRealRowIndex?t:this.dataList.getRealRowIndex(t);var h=this.getDisplayRowIndex(a);(isNaN(h)||h<0)&&(l=!1);var d=t,u=(e=this.getColumnID(e),this.getColumnIndex(e)),c=this._dataList.getColumnIndex(e);if(t>=0&&t<s&&c>=0&&c<n){var p=this.cellInfoHash[this.tdIdList[u]];if("custom"==p.options.inputType&&!p.options.embeddedInput){var g,m=t-(this.rowIndex>0?this.rowIndex:0),f=this.data_td_list[u+m*this.oneRowDataLength];if(f&&l)!1===(g=p.getCellManager({element:p.element,rowIndex:d,realRowIndex:a,options:o,dynamicInputType:!0}))?f.innerHTML="<nobr>"+o.value+"</nobr>":(p.clearStyle(g,f),null==o.value||!0===g.existGridViewItemsetNode?i=this.dataList._getCellData(d,e):(i=o.value,this.dataList.setCellData(d,e,i,null,!0,!0)),g.setInnerHTML(f,i,d,u));else(g=p.getCellManager({element:p.element,rowIndex:d,realRowIndex:a,options:o,dynamicInputType:!0}))&&(null!=g.customValue?(i=g.customValue,this.dataList.setCellData(d,e,i,null,!0,!0)):null==o.value||!0===g.existGridViewItemsetNode?i=this.dataList._getCellData(d,e):(i=o.value,this.dataList.setCellData(d,e,i,null,!0,!0)))}}}catch(t){r.w.printStackTrace(t)}},T.prototype.setDataDragDrop=function(t){try{if("boolean"==typeof t&&(this.options.dataDragDrop=t,t))if(1==this.isMobile){if(this.isHammerEnabled()){var e=Promise.resolve();"undefined"!=typeof Hammer&&null!=Hammer||(e=inquires("externalJS/hammer.min.js"));var i=this.uuid;e.then((function(t,e){var o=WebSquare.idCache[i];o._manager=new Hammer.Manager(o.getElementById(o.id+"_dataLayer")),o._manager.add(new Hammer.Press({time:o.options.hammerPressTime})),o._manager.on("press",o.event.bindAsEventListener(o,(function(t){o.handleDragEvent(t)}))),o._bindPressEvent=!0}))}}else!1===this._bindDrag&&(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleDragEvent)),this._bindDrag=!0)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getDataDragDrop=function(){try{return this.options.dataDragDrop}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._fireOnviewchange=function(t,e,i,o){try{var s,a=this.getCellInfo(t),n=a.editRowIndex,l=this._dataList.getColumnIndex(a.id),h=this.getColumnIndex(a.id),d=this.getRealRowIndex(n),c=this._dataList.dataArr[d*this._dataList.getColumnCount()+l],p=a.comp&&a.comp.selectedIndex;if(o&&o.beforeFunc&&o.beforeFunc.apply(o.beforeFunc,o.beforeFuncArgs),e&&(s=a[e].apply(a,i)),o&&o.checkFunc&&!1===o.checkFunc(s))return!1;var g=this._dataList.dataArr[d*this._dataList.getColumnCount()+l];if(0===c&&(c="0"),0===g&&(g="0"),c!=g){var m={oldValue:c,newValue:g,rowIndex:n,colIndex:h};isNaN(p)||(m.oldSelectedIndex=p,m.newSelectedIndex=a.comp&&a.comp.selectedIndex),u.B.fireEvent(this,"onviewchange",m)}
return!0}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._refreshInstance=function(t,e){try{if(!this.options.ref)return;e||WebSquare.ModelUtil.removeInstanceNodes({xpath:this.options.ref+"/"+this.repeatNodeTagName[0],scopeId:this.scope_id,gridNoRefresh:!0}),t||(t=this._dataList.dataArr);var i,o=t.length/this.oneRowDataLength,s=[],a=this.repeatNodeTagName[0],n=WebSquare.xml.parse("<"+a+"></"+a+">").documentElement,l=this._dataList.getBroadcast();this._dataList.setBroadcast(!1);for(var h=0;h<o;h++)if(this.repeatNodeChildTagName&&this.repeatNodeChildTagName.length>0){if(0==h){var d,u=n,c=a;this.repeatNodeTagName.length>1&&(c=this.repeatNodeTagName.slice(1,this.repeatNodeTagName.length).join("/"));for(var p=1;p<this.repeatNodeTagName.length;p++)u=WebSquare.xml.createNode(u,this.repeatNodeTagName[p],!1);i=this.repeatNodeTagName.length>1?WebSquare.xml.findNode(n,c):n;for(p=0;p<this.repeatNodeChildTagName.length;p++){if(d=WebSquare.xml.createNode(i,this.repeatNodeChildTagName[p],!1),s.push(d),m=void 0===(m=t[h*this.oneRowDataLength+p])||null==m?"":m+"",this.options.valueNode.length)d.setAttribute(this.options.valueNode,m);else if(null==d.firstChild){var g=d.ownerDocument.createTextNode(m);WebSquare.xml.appendChild(d,g)}else d.firstChild.nodeValue=m}}else for(p=0;p<this.repeatNodeChildTagName.length;p++){var m;if(d=s[p],m=void 0===(m=t[h*this.oneRowDataLength+p])||null==m?"":m+"",this.options.valueNode.length)d.setAttribute(this.options.valueNode,m);else if(null==d.firstChild){g=d.ownerDocument.createTextNode(m);WebSquare.xml.appendChild(d,g)}else d.firstChild.nodeValue=m}WebSquare.ModelUtil.setInstanceNode(n,this.options.ref,null,"append",!1,this.scope_id)}this._dataList.setBroadcast(l)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.isHammerEnabled=function(){try{return(this.isMobile||a.D.isTouchDevice())&&this.options.hammerEnabled}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.endEdit=function(){try{this._endEdit()}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getColumnIdListMultiRow=function(){try{for(var t=[],e=this.colIndexes.bodyColInfo.colIndexMatch,i={},o=this.defaultColCnt;o<e.length;o++)for(var s=e[o],a=0;a<s.length;a++){null==t[a]&&(t[a]=[]);var n=this.getColumnID(s[a]-this.defaultColCnt);null==i[n]&&(t[a].push(n),i[n]=!0)}return t}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getLocationRowCol=function(t,e){try{var i,o,s=this.struct.body.rowAttrArr.length,a=this.getColumnOrder(),n=[];for(var l in a)n[a[l]]=parseInt(l,10);var h,d=this.cellMergeInfo;for(var u in d){var c=u.split("_"),p=parseInt(c[0]),g=parseInt(c[1]),m=d[u].rowSpan,f=d[u].colSpan;if(t>=p&&t<p+m&&e>=g&&e<g+f){i=m,o=f;break}}for(var b=0,y=e;y>=0;)h=y,y-=this.struct.body.rowArr[b++].length;return b--,o=o||parseInt(this.struct.body.rowArr[b][h].colSpan||1),i=i||parseInt(this.struct.body.rowArr[b][h].rowSpan||1),{rowIndex:t*s+b,colIndex:h=n[h=this.struct.body.rowArr[b][h]["@col"]],rowSize:i,colSize:o}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.getOriginalRowCol=function(t,e){try{for(var i=this.htmlInfo.body.rowAttrArr.length,o=(this.getColumnOrder(),!1),s=!0,a=t%i,n=1,l=1,h=[],d=[],u=0;u<i;u++){for(var c=[],p=0;p<this.htmlInfo.body.rowArr[u].length;p++)c.push({colSpan:parseInt(this.htmlInfo.body.rowArr[u][p].colSpan||1),rowSpan:parseInt(this.htmlInfo.body.rowArr[u][p].rowSpan||1),oriColIndex:parseInt(this.bodyIdColIndexMap[this.htmlInfo.body.rowArr[u][p].col_id])});h.push(c),d.push([])}for(u=0;u<i;u++){var g=0;for(p=0;p<h[u].length;p++){if(h[u][p].rowSpan>1)for(var m=1;m<h[u][p].rowSpan;m++)u+m<d.length&&d[u+m].push({oriRowAttrNum:u,rowIndex:u+m,oriColIndex:h[u][p].oriColIndex,colIndex:g,rowSpan:1,colSpan:h[u][p].colSpan,oriRowSpan:h[u][p].rowSpan});for(var f=0;f<d[u].length;f++)g==d[u][f].colIndex&&(h[u].splice(p,0,d[u][f]),d[u].splice(f,1));g+=h[u][p].colSpan}for(f=0;f<d[u].length;f++)g==d[u][f].colIndex&&(h[u].splice(p,0,d[u][f]),d[u].splice(f,1))}var b,y=h[a],v=0;for(p=0;p<y.length;p++){
var w=parseInt(y[p].colSpan);if((v+=w)>e){e!==v-w&&(e=v-w,o=!0,s=!1),l=w,b=p;break}}n=y[b].rowSpan,void 0!==y[b].oriRowAttrNum&&(a+=y[b].oriRowAttrNum-y[b].rowIndex,n=y[b].oriRowSpan,o=!0),b=y[b].oriColIndex;var S=Math.floor(t/i),C=this.cellMergeInfo;for(var x in C){var _=x.split("_"),I=(c=parseInt(_[0]),parseInt(_[1])),T=C[x].rowSpan,k=C[x].colSpan;if(S>=c&&S<c+T&&b>=I&&b<I+k){if(S==c&&b==I){n=T,l=k;break}b!=I&&(s=!1),S=c,b=I,n=T,l=k,o=!0;break}}return{rowIndex:S,colIndex:b,rowSize:n,colSize:l,noLeftTop:o,leftCell:s}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setImeMode=function(t,e){try{var i=this.getCellInfo(t);"text"!=i.options.inputType&&"textImage"!=i.options.inputType&&"textArea"!=i.options.inputType&&"drilldown"!=i.options.inputType||(i.options.imeMode=e)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._isGridViewItemTable=function(){try{return!(!this.parentControl||!this.parentControl.options||"gridItemTable"!==this.parentControl.options.pluginName&&"gridViewItemTable"!==this.parentControl.options.pluginName)}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.searchData=function(t){try{void 0!==t&&null!=t||(t={}),this.clearSearchData({noRefresh:!0});var e=t.column;e=e?e.split(","):this.tdIdList.slice(0);for(var i=this.getRowCount(),o=[],s=[],a=0;a<i;a++){for(var n=!1,h=this.__getGroupbyGroupedRowIndex(a),d=this.getRealRowIndex(h),u=0;u<e.length;u++){var c=this.getColumnIndex(e[u]);this.getCellDisplayData(a,c).indexOf(t.data)>=0&&(n=!0,s.unshift([d,c]))}n&&o.push(d)}if(this.groupbyStatus.grouped){var p={};for(a=0;a<o.length;a++)p[o[a]+""]=!0;this.groupbyStatus.groupbyRowIndexArr=o.slice(0);var g=this.groupbyStatus.groupedRowIndexArr;this._beforeSearch={groupbyRowIndexArr:o.slice(0),groupedRowIndexArr:g.slice(0)};var m=[];for(a=0;a<g.length;a++)if("object"===(0,l.Z)(g[a])){if(0===g[a].depth&&m.length>0&&"object"===(0,l.Z)(m[m.length-1]))for(;m.length>0&&"object"===(0,l.Z)(m[m.length-1]);)m.pop();m.push(g[a])}else!0===p[g[a]+""]&&m.push(g[a]);for(;m.length>0&&"object"===(0,l.Z)(m[m.length-1]);)m.pop();this.groupbyStatus.groupedRowIndexArr=m}var f={type:"direct",key:o,filterId:this.id+"_searchData"};this.dataList.setFilter(f);for(a=0;a<s.length;a++){var b=this.getDisplayRowIndex(s[a][0]),y=this.__getGroupbyGroupedRowIndex(b);this.setFocusedCell(y,s[a][1],!1,{ctrled:!0})}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.clearSearchData=function(t){try{if(!this.options.groupbyZoneSearch||!this.groupbyZone_searchinput)return;void 0!==t&&null!=t||(t={});var e={filterId:this.id+"_searchData",noRefresh:t.noRefresh};this.groupbyStatus.grouped&&this._beforeSearch&&(this.groupbyStatus.groupbyRowIndexArr=this._beforeSearch.groupbyRowIndexArr.slice(0),this.groupbyStatus.groupedRowIndexArr=this._beforeSearch.groupedRowIndexArr.slice(0)),this._beforeSearch=null,this.dataList.removeFilter(e),this.removeFocusedCell(),!0===t.clearValue&&this.groupbyZone_searchinput.setValue("")}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype._groupbyZoneSearch=function(){try{if(!this.options.groupbyZoneSearch||!this.groupbyZone_searchinput)return;var t=this.groupbyZone_searchinput.getValue();if(""===t)this.clearSearchData();else{var e={};e.data=t,this.searchData(e)}}catch(t){r.w.printStackTrace(t,null,this)}},T.prototype.setBlockSelect=function(t,e){try{if(!0!==e&&!1!==e)return;var i=this.getCellInfo(t);if(i&&i.options.blockSelect!==e){var o=this.getColumnIndex(t);i.options.blockSelect=e;for(var s=0;s<this.focusedCell.length;s++)if(this.focusedCell[s].focusedColIndex===o){var a=this.focusedCell[s];this._applyFocusedCellOut(a)}}}catch(t){r.w.printStackTrace(t,null,this)}};var k=function(){};k.prototype.getColumnReadOnly=function(t){var e=this.getCellInfo(t);return""!=e.options.readOnly?a.D.getBoolean(e.options.readOnly):""},k.prototype.setColumnReadOnly=function(t,e){try{var i=this.getCellInfo(t);""!=e&&(e=a.D.getBoolean(e));var o=i.options.readOnly;if(i.options.readOnly=e,o!==e){if(null!=this.editedCell){
var s=parseInt(this.editedCell.editTd.getAttribute("tdindex"))%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.rollbackCommitFlag=s==t}else this.rollbackCommitFlag=!1;this.drawColumnData(t),this.applyStyleOptions(this.lastIndex)}}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.getRowReadOnly=function(t,e){try{var i=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)||!0===e?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),o=this.rowReadOnlyArr[i];return 1!=o&&0!=o?"":o}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.setRowReadOnly=function(t,e,i){try{var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll),s=o||!0===i?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t));""!=e&&(e=a.D.getBoolean(e));var n=o||!0===i?this.getDisplayRowIndex(s):this._getGroupbyGroupedRowIndex(t),l=this.rowReadOnlyArr[s];this.rowReadOnlyArr[s]=e,l!==e&&(null!=this.editedCell&&this.editedCell.editRowIndex==s?this.rollbackCommitFlag=!0:this.rollbackCommitFlag=!1,n>=0&&(this.drawRowData(n-this.rowIndex,n,!0),this.applyRowStyleOptions(n)))}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.getCellReadOnly=function(t,e,i){try{e=this.getColumnIndex(e);var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)||!0===i?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),s=this.cellReadOnlyArr[o*this.oneRowDataLength+e];return 1!=s&&0!=s?"":s}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.setCellReadOnly=function(t,e,i){try{""!=i&&(i=a.D.getBoolean(i));e=this.getColumnIndex(e);var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll),s=o?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),n=o?this.getDisplayRowIndex(s):this._getGroupbyGroupedRowIndex(t),l=this.cellReadOnlyArr[s*this.oneRowDataLength+e];if(this.cellReadOnlyArr[s*this.oneRowDataLength+e]=i,l!==i){var h=this.rollbackCommitFlag;if(null!=this.editedCell&&this.editedCell.editRowIndex==s){var d=parseInt(this.editedCell.editTd.getAttribute("tdindex"))%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.rollbackCommitFlag=d==e}else this.rollbackCommitFlag=!1;n>=0&&(this.notifyCellChanged(n,e),this.rollbackCommitFlag=h,this.applyCellStyleOptions(n,e))}}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.getColumnDisabled=function(t){var e=this.getCellInfo(t);return a.D.getBoolean(e.options.disabled)},k.prototype.setColumnDisabled=function(t,e){try{e=a.D.getBoolean(e);var i=this.getCellInfo(t),o=i.options.disabled;i.options.disabled=e,o!==e&&(this.drawColumnData(t),this.applyColumnStyleOptions(t))}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.getRowDisabled=function(t){try{var e=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t));return a.D.getBoolean(this.rowDisabledArr[e])}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.setRowDisabled=function(t,e){try{e=a.D.getBoolean(e);var i=!(!this.isDrillDown||!this._dataList.options.depthColumn),o=i?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),s=i?this.getDisplayRowIndex(o):this._getGroupbyGroupedRowIndex(t),n=this.rowDisabledArr[o];this.rowDisabledArr[o]=e,n!==e&&s>=0&&(this.drawRowData(s-this.rowIndex,s,!0),this.applyRowStyleOptions(s))}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.getCellDisabled=function(t,e){try{e=this.getColumnIndex(e);var i=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),o=this.cellDisabledArr[i*this.oneRowDataLength+e];return 1!=o&&0!=o?"":o}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.setCellDisabled=function(t,e,i){try{i=a.D.getBoolean(i);e=this.getColumnIndex(e)
;var o=!(!this.isDrillDown||!this._dataList.options.depthColumn),s=o?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),n=o?this.getDisplayRowIndex(s):this._getGroupbyGroupedRowIndex(t),l=this.cellDisabledArr[s*this.oneRowDataLength+e];this.cellDisabledArr[s*this.oneRowDataLength+e]=i,l!==i&&n>=0&&(this.notifyCellChanged(n,e),this.applyCellStyleOptions(n,e))}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.setTDStyle=function(t,e,i,o,s){""!=this.options.readOnlyBackgroundColor&&this.___getEditReadOnly(e,i)&&(s="background-color:"+this.options.readOnlyBackgroundColor+";"+s),this._getEditDisabled(e,i)?(t.disabled=!0,""!=this.options.disabledBackgroundColor&&(s+=";background-color:"+this.options.disabledBackgroundColor),""!=this.options.disabledFontColor&&(s+=";color:"+this.options.disabledFontColor)):t.disabled=!1,t.style.cssText=o+";"+s},k.prototype.setStyleAll=function(t){try{var e=t.type,i=e.charAt(0).toUpperCase()+e.slice(1),o=t.target||"";"all"!==o&&"default"!==e&&"init"!==e||(o=""),"cell"!==e&&"disabledCell"!==e||(o="");var s=o?o.charAt(0).toUpperCase()+o.slice(1):"",a=t.styleName,n=t.styleValue,l=t.noRefresh,h=t.rowIndex;h=this._getGroupbyGroupedRowIndex(h);var d,u=t.colIndex;if("column"===e||"cell"===e||"default"===e||"init"===e){if(u=this.getColumnIndex(u),!this.getColumnID(u)&&!this.successBinding)return;if(!this.getColumnID(u)&&!this._dataList.getColumnID(u))return void c.k.printLog("[Warning] Invalid colIndex("+u+").["+this.id+"] set"+i+"Style"+s)}var p="ValueObj";"column"===e||"adaptiveColumn"===e||"default"===e||"init"===e?(d=u,i="Column"):"disabledCell"===e?(d=h+"_"+u,i="Cell",p="Obj"):null==(d=this["get"+i+"Style"+s+"ClassName"](h,u))&&(this[e+"Style"+s+"Index"]++,d=this.id+"_"+e+"style"+o+"_"+this[e+"Style"+s+"Index"]+"_",null==u?this["set"+i+"Style"+s+"ClassName"](h,d):this["set"+i+"Style"+s+"ClassName"](h,u,d)),null==(t=this[e+"Style"+s+p][d])&&(t={}),t[a]=n;var g=[];for(var a in t){var m=t[a];"style"!=a&&""!=m&&g.push(a+":"+m)}if(t.style=g.join(";"),this[e+"Style"+s+p][d]=t,!0!==l)if(null==h)this["apply"+i+"StyleOptions"](u);else!(!this.isDrillDown||!this._dataList.options.depthColumn)&&(h=this.getDisplayRowIndex(h)),this["apply"+i+"StyleOptions"](h,u)}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.setRowBackgroundColor=function(t,e){this.setRowStyle(t,"background-color",e)},k.prototype.setRowColor=function(t,e){this.setRowStyle(t,"color",e)},k.prototype.setRowStyle=function(t,e,i){this.setStyleAll({type:"row",rowIndex:t,styleName:e,styleValue:i})},k.prototype.getRowBackgroundColor=function(t){return this.getRowStyleValue(t,"background-color")},k.prototype.getRowColor=function(t){return this.getRowStyleValue(t,"color")},k.prototype.getRowStyleValue=function(t,e){t=this._getGroupbyGroupedRowIndex(t);var i=this.getRowStyleClassName(t);return null==i?"":this.rowStyleValueObj[i][e]||""},k.prototype._getRowStyleStr=function(t){return this.rowStyleValueObj[t].style},k.prototype.setColumnBackgroundColor=function(t,e){this.setColumnStyle(t,"background-color",e)},k.prototype.setColumnColor=function(t,e){this.setColumnStyle(t,"color",e)},k.prototype.setColumnStyle=function(t,e,i){this.setStyleAll({type:"column",colIndex:t,styleName:e,styleValue:i})},k.prototype.setDefaultStyle=function(t,e,i){this.setStyleAll({type:"default",colIndex:t,styleName:e,styleValue:i})},k.prototype._setInitStyle=function(t,e,i){this.setStyleAll({type:"init",colIndex:t,styleName:e,styleValue:i})},k.prototype.setAdaptiveColumnStyle=function(t,e,i){this.setStyleAll({type:"adaptiveColumn",colIndex:t,styleName:e,styleValue:i,noRefresh:!0})},k.prototype.getColumnBackgroundColor=function(t){return this.getColumnStyleValue(t,"background-color")},k.prototype.getColumnColor=function(t){return this.getColumnStyleValue(t,"color")},k.prototype.getColumnStyleValue=function(t,e){var i=this.columnStyleValueObj[t];return null==i?this.getDefaultStyleValue(t,e):i[e]||this.getDefaultStyleValue(t,e)},
k.prototype._getColumnStyleStr=function(t){return this.columnStyleValueObj[t].style},k.prototype.getDefaultStyleValue=function(t,e){var i=this.defaultStyleValueObj[t];return null==i?"":i[e]||""},k.prototype._getInitStyleValue=function(t,e){var i=this.initStyleValueObj[t];return null==i?"":i[e]||""},k.prototype._getDefaultStyleStr=function(t){return this.defaultStyleValueObj[t].style},k.prototype.getAdaptiveColumnStyleValue=function(t,e){var i=this.adaptiveColumnStyleValueObj[t];return null==i?"":i[e]||""},k.prototype.setCellBackgroundColor=function(t,e,i){this.setCellStyle(t,e,"background-color",i)},k.prototype.setCellColor=function(t,e,i){this.setCellStyle(t,e,"color",i)},k.prototype.setCellStyle=function(t,e,i,o,s){var r=this.getColumnID(e);if(this.mergeCellBkStatus&&this.mergeCellBkStatus[r]){var a=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(t);this.mergeCellBkStatus[r][a]=null,delete this.mergeCellBkStatus[r][a]}this.setStyleAll({type:"cell",rowIndex:t,colIndex:e,styleName:i,styleValue:o,noRefresh:s})},k.prototype._refreshCellStyle=function(t){var e=[],i=this.cellStyleValueObj[t];for(var o in i){var s=i[o];"style"!=o&&""!=s&&e.push(o+":"+s)}i.style=e.join(";"),this.cellStyleValueObj[t]=i},k.prototype.setDisabledCellStyle=function(t,e,i,o){e=this.getColumnIndex(e);this._getEditDisabled(t,e)&&this.setStyleAll({type:"disabledCell",rowIndex:t,colIndex:e,styleName:i,styleValue:o})},k.prototype.getCellBackgroundColor=function(t,e){return this.getCellStyleValue(t,e,"background-color")},k.prototype.getCellColor=function(t,e){return this.getCellStyleValue(t,e,"color")},k.prototype.getCellStyleValue=function(t,e,i,o){try{t=this._getGroupbyGroupedRowIndex(t);var s=this.getCellStyleClassName(t,e);return null==s?(!0!==o&&c.k.printLog("[Warning] Is not exist cell!["+this.id+"]"),""):this.cellStyleValueObj[s][i]||""}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype._getCellStyleStr=function(t){return this.cellStyleValueObj[t].style},k.prototype.setHeaderCellStyle=function(t,e,i){try{var o=this.getHeaderLayer(t);WebSquare.style.setStyle(o,e,i)}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.setHeaderBackgroundColor=function(t,e){try{var i=this.getHeaderLayer(t);WebSquare.style.setStyle(i,"background-color",e),this.headerCellStyleValueObj[t]={"background-color":e}}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.setHeaderColor=function(t,e){try{var i=this.getHeaderLayer(t);WebSquare.style.setStyle(i,"color",e)}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.getHeaderCellStyleValue=function(t,e){try{var i=this.getHeaderLayer(t);return WebSquare.style.getStyle(i,e)}catch(t){r.w.printStackTrace(t,null,this)}},k.prototype.getHeaderBackgroundColor=function(t){return this.getHeaderCellStyleValue(t,"background-color")},k.prototype.getHeaderColor=function(t){return this.getHeaderCellStyleValue(t,"color")},k.prototype._setMergeCellBackground=function(t,e,i){var o=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(t),s=this.getColumnID(e),r=this.getColumnIndex(e);if(this.options.groupbyZone&&(this.mergeCellBkStatus||(this.mergeCellBkStatus={}),this.mergeCellBkStatus[s]||(this.mergeCellBkStatus[s]={}),null==this.mergeCellBkStatus[s][o])){var a=this.getCellStyleValue(t,s,"background-color",!0)||this.getColumnStyleValue(r,"background-color");this.mergeCellBkStatus[s][o]=a}var n=this.setCellDefaultStyleClassName(o,r,!0);this.cellStyleValueObj[n]["background-color"]=i,this._refreshCellStyle(n)},k.prototype._clearMergeCellBackground=function(){if(this.mergeCellBkStatus){for(var t in this.mergeCellBkStatus)for(var e in this.mergeCellBkStatus[t]){var i=parseInt(e,10),o=this.mergeCellBkStatus[t][e],s=this.setCellDefaultStyleClassName(i,t,!0);this.cellStyleValueObj[s]["background-color"]=o,this._refreshCellStyle(s),o||delete this.cellStyleValueObj[s]["background-color"]}delete this.mergeCellBkStatus}};var D=function(t){this.statusArr=[],
this.mainGrid=null,this.options=null,this.mode=null};D.prototype.initialize=function(t,e){if(this.mainGrid=t,t._linkedDataList?this.mode="linkedDataList":this.mode="dataList","linkedDataList"===this.mode){this.statusArr=[],this.options=o.x.extend({showDepth:-1,depthColumn:-1},e||{}),t._linkedDataList.initialRowIndexArr.length!==t._linkedDataList.filteredRowIndexArr.length&&(c.k.printLog("경고 : drilldown에서는 filter기능을 사용할 수 없습니다. 개별 filter를 자동으로 전부 해제합니다.["+this.id+"]"),t._linkedDataList.clearFilter()),t._linkedDataList.filteredRowIndexArr=[];for(var i=this.options.depthColumn,s=t._linkedDataList.initialRowIndexArr.length,r=0;r<s;r++){var a=t._linkedDataList.initialRowIndexArr[r];this.statusArr[a]=!1;("dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(a,this.mainGrid._dataList.getColumnID(i))):parseInt(this.mainGrid.dataList._getData(a,this.mainGrid.getColumnID(i))))<=parseInt(this.options.showDepth,10)&&(this.mainGrid._linkedDataList.filteredRowIndexArr.push(a),this.statusArr[a]=!0)}}else{t._dataList.filteredRowIndexArr=[],this.statusArr=[],this.options=o.x.extend({showDepth:-1,depthColumn:-1},e||{});for(i=this.options.depthColumn,s=this.mainGrid.getTotalRow(),a=0;a<s;a++){this.statusArr[a]=!1;("dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(a,this.mainGrid._dataList.getColumnID(i))):parseInt(this.mainGrid.dataList._getData(a,this.mainGrid.getColumnID(i))))<=parseInt(this.options.showDepth,10)&&(this.mainGrid._dataList.filteredRowIndexArr.push(a),this.statusArr[a]=!0)}}},D.prototype.getDepth=function(t){return"dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(t,this.mainGrid._dataList.getColumnID(this.options.depthColumn))):parseInt(this.mainGrid.dataList._getData(t,this.mainGrid.getColumnID(this.options.depthColumn)))},D.prototype.isOpen=function(t){var e=this.getDepth(this.mainGrid.getRealRowIndex(t)),i=0;i="linkedDataList"===this.mode?this.mainGrid._linkedDataList.filteredRowIndexArr[t+1]:this.mainGrid._dataList.filteredRowIndexArr[t+1];var o=this.getDepth(i);return!isNaN(e)&&!isNaN(o)&&e<o},D.prototype.hasChild=function(t){if("linkedDataList"===this.mode){var e=this.mainGrid._linkedDataList.filteredRowIndexArr[t],i=this.mainGrid._linkedDataList.getLinkedRowIndex(t),o=this.mainGrid._linkedDataList.initialRowIndexArr[i+1],s=this.mainGrid.getColumnID(this.options.depthColumn);"dataList"==this.options.dataColumn&&(s=this.mainGrid._dataList.getColumnID(this.options.depthColumn));var r=parseInt(this.mainGrid.dataList._getData(e,s)),a=parseInt(this.mainGrid.dataList._getData(o,s));return r<(a=isNaN(a)?0:a)}o=(e=this.mainGrid.getRealRowIndex(t))+1,s=this.mainGrid.getColumnID(this.options.depthColumn);"dataList"==this.options.dataColumn&&(s=this.mainGrid._dataList.getColumnID(this.options.depthColumn));r=parseInt(this.mainGrid.dataList._getData(e,s)),a=parseInt(this.mainGrid.dataList._getData(o,s));return r<(a=isNaN(a)?0:a)},D.prototype.getOriginalRowIndex=function(t){return this.openRowIndexArr[t]},D.prototype.getDisplayRowIndex=function(t){if("linkedDataList"===this.mode){if(this.mainGrid._linkedDataList.filteredRowIndexArr)for(var e=0;e<this.mainGrid._linkedDataList.filteredRowIndexArr.length;e++)if(parseInt(t,10)===this.mainGrid._linkedDataList.filteredRowIndexArr[e])return e}else if(this.mainGrid._dataList.filteredRowIndexArr)for(e=0;e<this.mainGrid._dataList.filteredRowIndexArr.length;e++)if(parseInt(t,10)===this.mainGrid.getRealRowIndex(e))return e;return t},D.prototype.getChildRowArr=function(t,e){var i=t,o=this.getDepth(t),s=this.mainGrid.getTotalRow(),r=[],a=this.options.depthColumn,n=this.mainGrid.getColumnID(a);if("dataList"==this.options.dataColumn&&(n=this.mainGrid._dataList.getColumnID(a)),"linkedDataList"===this.mode)for(var l=i+1;l<s;l++){var h=this.mainGrid._linkedDataList.initialRowIndexArr[l];if(this.mainGrid.dataList._getData(h,n)==o+1&&r.push(h),e&&this.mainGrid.dataList._getData(h,n)>o+1&&r.push(h),
this.mainGrid.dataList._getData(h,n)<=o)break}else for(h=i+1;h<s&&(this.mainGrid.dataList._getData(h,n)==o+1&&r.push(h),e&&this.mainGrid.dataList._getData(h,n)>o+1&&r.push(h),!(this.mainGrid.dataList._getData(h,n)<=o));h++);return r},D.prototype.pasteDrilldownInitialize=function(t,e){if(this.mainGrid=t,t._linkedDataList?this.mode="linkedDataList":this.mode="dataList","linkedDataList"===this.mode){this.statusArr=[],this.options=o.x.extend({showDepth:-1,depthColumn:-1},e||{}),t._linkedDataList.initialRowIndexArr.length!==t._linkedDataList.filteredRowIndexArr.length&&(c.k.printLog("경고 : drilldown에서는 filter기능을 사용할 수 없습니다. 개별 filter를 자동으로 전부 해제합니다.["+this.id+"]"),t._linkedDataList.clearFilter()),t._linkedDataList.filteredRowIndexArr=[];for(var i=this.options.depthColumn,s=t._linkedDataList.initialRowIndexArr.length,r=0;r<s;r++){var a=t._linkedDataList.initialRowIndexArr[r];this.statusArr[a]=!1;("dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(a,this.mainGrid._dataList.getColumnID(i))):parseInt(this.mainGrid.dataList._getData(a,this.mainGrid.getColumnID(i))))<=parseInt(this.options.showDepth,10)&&(this.mainGrid._linkedDataList.filteredRowIndexArr.push(a),this.statusArr[a]=!0)}}else{this.statusArr=[],this.options=o.x.extend({showDepth:-1,depthColumn:-1},e||{});for(i=this.options.depthColumn,s=this.mainGrid.getTotalRow(),a=0;a<s;a++)this.statusArr[a]=!0}},D.prototype.getChildrenRowArr=function(t){var e=[];if(this.mainGrid){var i=this.mainGrid.getTotalRow(),o=this.options.depthColumn,s=this.mainGrid.getColumnID(o);if("dataList"==this.options.dataColumn&&(s=this.mainGrid._dataList.getColumnID(o)),"linkedDataList"===this.mode){var r=this.mainGrid._linkedDataList.initialRowIndexArr[t+1],a=parseInt(this.mainGrid.dataList._getData(this.mainGrid._linkedDataList.initialRowIndexArr[t],s),10);if(r<i&&this.mainGrid.dataList._getData(r,s)>a){e.push(r);var n=parseInt(this.mainGrid.dataList._getData(r,s),10),l=!0}if(l)for(var h=t+2;h<i;h++){r=this.mainGrid._linkedDataList.initialRowIndexArr[h];if(this.mainGrid.dataList._getData(r,s)<a+1)break;this.mainGrid.dataList._getData(r,s)<n+1&&(e.push(r),n=parseInt(this.mainGrid.dataList._getData(r,s),10))}}else{r=t+1,a=parseInt(this.mainGrid.dataList._getData(t,s),10);if(r<i&&this.mainGrid.dataList._getData(r,s)>a){e.push(r);n=parseInt(this.mainGrid.dataList._getData(r,s),10),l=!0}if(l)for(r=t+2;r<i&&!(this.mainGrid.dataList._getData(r,s)<a+1);r++)this.mainGrid.dataList._getData(r,s)<n+1&&(e.push(r),n=parseInt(this.mainGrid.dataList._getData(r,s),10))}}return e},D.prototype.getParentRowIndex=function(t){if(this.mainGrid){var e=this.options.depthColumn,i=this.mainGrid.getColumnID(e);"dataList"==this.options.dataColumn&&(i=this.mainGrid._dataList.getColumnID(e));var o=parseInt(this.mainGrid.dataList._getData(t,i));if("linkedDataList"===this.mode)for(var s=this.mainGrid._linkedDataList.getLinkedRealRowIndex(t)-1;s>=0;s--){var r=this.mainGrid._linkedDataList.initialRowIndexArr[s];if(this.mainGrid.dataList._getData(r,i)<o)return r}else for(r=t-1;r>=0;r--)if(this.mainGrid.dataList._getData(r,i)<o)return r}return-1},D.prototype.makeOpenRowIndexArr=function(){if("linkedDataList"===this.mode){this.mainGrid._linkedDataList.filteredRowIndexArr=[];for(var t=0;t<this.statusArr.length;t++)1==this.statusArr[t]&&this.mainGrid._linkedDataList.filteredRowIndexArr.push(t)}else{this.mainGrid._dataList.filteredRowIndexArr=[];for(t=0;t<this.statusArr.length;t++)1==this.statusArr[t]&&this.mainGrid._dataList.filteredRowIndexArr.push(t)}},D.prototype.toggle=function(t){var e=this.isOpen(t),i=[];t="linkedDataList"===this.mode?this.mainGrid._linkedDataList.getLinkedRealRowIndex(t):this.mainGrid.getRealRowIndex(t),i=e?this.getChildRowArr(t,!0):this.getChildrenRowArr(t);for(var o=0;o<i.length;o++)this.statusArr[i[o]]=!e;this.makeOpenRowIndexArr(),u.B.fireEvent(this.mainGrid,"ontoggleclick",e,t)},D.prototype.getAncestorRowArr=function(t){if("number"!=typeof t)return!1;for(var e=[],i=t;i>=0;)e.push(i),
i=this.getParentRowIndex(i);return e.shift(),e},D.prototype.drillTo=function(t){if("number"!=typeof t)return!1;var e=this.getAncestorRowArr(t);e.unshift(t);for(var i=0;i<e.length;i++){var o=e[i];if(this.statusArr[o]=!0,0!=i)for(var s=this.getChildrenRowArr(o),r=0;r<s.length;r++)this.statusArr[s[r]]=!0}return this.makeOpenRowIndexArr(),this.getDisplayRowIndex(e[e.length-1])},D.prototype.isLastChild=function(t){var e=this.options.depthColumn,i=this.mainGrid.getColumnID(e);"dataList"==this.options.dataColumn&&(i=this.mainGrid._dataList.getColumnID(e));var o=this.mainGrid.dataList._getData(t,i);if("linkedDataList"===this.mode)for(var s=this.mainGrid._linkedDataList.getLinkedRealRowIndex(t)-1;s>=0;s--){var r=this.mainGrid._linkedDataList.initialRowIndexArr[s];if(this.mainGrid.dataList._getData(r,i)<o)return r}else for(r=t+1;r<this.mainGrid.getTotalRow();r++){if(this.mainGrid.dataList._getData(r,i)==o)return!1;if(this.mainGrid.dataList._getData(r,i)<o)return!0}return!0},D.prototype.getRecursiveRowIndex=function(t){try{for(var e=[],i=this.getChildrenRowArr(t),o=0;o<i.length;o++){var s=i[o];e.push(s),e=e.concat(this.getRecursiveRowIndex(s))}return e}catch(t){r.w.printStackTrace(t,null,this)}},D.prototype.getRecursiveRowCount=function(t){try{for(var e=0,i=this.getChildrenRowArr(t),o=0;o<i.length;o++)e+=this.getRecursiveRowCount(i[o]),e++;return e}catch(t){r.w.printStackTrace(t,null,this)}},D.prototype.appendChild=function(t,e){try{if(e){var i=t+this.getRecursiveRowCount(t);return this.mainGrid._toggle(this.getDisplayRowIndex(t)),this.mainGrid.dataList.setRowData(i+1,e)}$l("data is null. check data.["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},D.prototype.moveNode=function(t,e){try{var i;if(t<e){if(!this.bodyDrop)i=e-(this.getRecursiveRowCount(t)+1)}else(t>e||t==e)&&(i=e);var o=this.detachNode(t),s=this.appendNode(i,o);return"number"!=typeof i&&(i=this.mainGrid.getRealRowIndex(this.mainGrid.getRowCount()-1)),this.bodyDrop=!1,{detachedData:o,insertedData:s,insertedRowIndex:i}}catch(t){r.w.printStackTrace(t,null,this)}},D.prototype.appendNode=function(t,e){try{var i,o,s,a=this.mainGrid._dataList.getColumnCount(),n=e.length/a,l=this.mainGrid._dataList.getColumnID(this.options.depthColumn);if(this.options.depthColumn=parseInt(this.options.depthColumn,10),this.bodyDrop){this.bodyDrop=!1;var h=this,d=this.mainGrid.getRealRowIndex(this.mainGrid.getRowCount()-1),u=this.getDisplayRowIndex(function t(e){var i=h.getParentRowIndex(e);return i=i>-1?t(i):e}(d));i=parseInt(this.mainGrid.dataList.getCellData(u,l),10),o=parseInt(e[a*(n-1)+parseInt(this.options.depthColumn)],10),t=d+this.getRecursiveRowCount(d)+1,s=i-o}else{u=this.getDisplayRowIndex(t-1);s=(i=parseInt(this.mainGrid.dataList.getCellData(u,l),10))-(o=parseInt(e[a*(n-1)+parseInt(this.options.depthColumn)],10))+1}for(var c=[],p=0;p<n;p++)for(var g=0;g<a;g++){var m=e[a*p+g];g==this.options.depthColumn&&(m-=0,m+=s),c.push(m)}this.mainGrid.dataList._insertData(t,c,-1);var f=this.getDisplayRowIndex(t);return this.isOpen(f)&&this.mainGrid._toggle(f),c}catch(t){r.w.printStackTrace(t,null,this)}},D.prototype.detachNode=function(t){try{for(var e=[],i=this.mainGrid.dataList.removeRow(t,{skipNotify:!0}),o=0;o<i.length;o++)e=e.concat(i[o]);return e}catch(t){r.w.printStackTrace(t,null,this)}},D.prototype.insertNextSibling=function(t,e){try{this.options.depthColumn=parseInt(this.options.depthColumn,10);var i=this.mainGrid.dataList.getColumnCount(),o=e.length/this.mainGrid.dataList.getColumnCount(),s=this.mainGrid.getDisplayRowIndex(t),a=parseInt(this.mainGrid.dataList.getCellData(s,this.options.depthColumn),10)-parseInt(e[i*(o-1)+parseInt(this.options.depthColumn)],10),n=[];t+=this.getRecursiveRowCount(t)+1;for(var l=0;l<o;l++)for(var h=0;h<i;h++){var d=e[i*l+h];h==this.options.depthColumn&&(d-=0,d+=a),n.push(d)}if(this.mainGrid.dataList._insertData(t,n,-1),this.mainGrid.options.closeDrillDownSibling)for(l=0;l<o;l++){var u=this.getDisplayRowIndex(t+l)
;this.isOpen(u)&&this.mainGrid._toggle(u)}return n}catch(t){r.w.printStackTrace(t,null,this)}};var L=i(3750),W=function(t){this._linkedDataList._grid=t};W.prototype.getLinkedRowIndex=function(t){return this._linkedDataList.getLinkedRowIndex(t)},W.prototype.getRealRowIndex=function(t){return this._linkedDataList.filteredRowIndexArr[t]},W.prototype.getFilteredRowIndex=function(t){return this._linkedDataList.getFilteredRowIndex(t)},W.prototype.getTotalRow=function(){try{return this._linkedDataList.initialRowIndexArr.length}catch(t){r.w.printStackTrace(t)}},W.prototype.getTotalCol=function(){try{return this._linkedDataList._dataList.getTotalCol()}catch(t){r.w.printStackTrace(t)}},W.prototype.getRowCount=function(){try{return this._linkedDataList.getDataLength()}catch(t){r.w.printStackTrace(t)}},W.prototype.getCellData=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getCellData(i,e)}catch(t){r.w.printStackTrace(t)}},W.prototype.getOriginalCellData=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getOriginalCellData(i,e)}catch(t){r.w.printStackTrace(t)}},W.prototype.getDataLength=function(){return this._linkedDataList.filteredRowIndexArr.length},W.prototype.getColCnt=function(){try{for(var t=0,e=this._grid.htmlInfo?this._grid.htmlInfo.head.rowArr[0]:this._grid.struct.head.rowArr[0],i=0;i<e.length;i++){var o=e[i];t+=parseInt(o.colSpan,10)||1}return t}catch(t){r.w.printStackTrace(t,null,this)}},W.prototype.getRowPosition=function(){try{return this._linkedDataList._dataList.getRowPosition()}catch(t){r.w.printStackTrace(t,null,this)}},W.prototype.getColData=function(t){try{for(var e=[],i=0;i<this._linkedDataList.initialRowIndexArr.length;i++)e.push(this._linkedDataList.getCellData(i,t));return e}catch(t){r.w.printStackTrace(t)}},W.prototype.getRowData=function(t){try{var e=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getRowData(e)}catch(t){r.w.printStackTrace(t)}},W.prototype.getDataRow=function(t){try{var e=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getDataRow(e)}catch(t){r.w.printStackTrace(t)}},W.prototype.getMatchedData=function(t,e,i,o,s){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var a=[],n=this._linkedDataList.getMatchedIndex(t,e,i,o,s),l=0;l<n.length;l++)a.push(this._linkedDataList.getRowData(n[l]));return a}catch(t){r.w.printStackTrace(t)}},W.prototype.getUnmatchedData=function(t,e,i,o,s){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var a=[],n=this._linkedDataList.getUnmatchedIndex(t,e,i,o,s),l=0;l<n.length;l++)a.push(this._linkedDataList.getRowData(n[l]));return a}catch(t){r.w.printStackTrace(t)}},W.prototype.getMatchedColumnData=function(t,e,i,o,s,a){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var n=[],l=this._linkedDataList.getMatchedIndex(t,e,o,s,a),h=0;h<l.length;h++)n.push(this._linkedDataList.getCellData(l[h],i));return n}catch(t){r.w.printStackTrace(t)}},W.prototype.getUnmatchedColumnData=function(t,e,i,o,s,a){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var n=[],l=this._linkedDataList.getUnmatchedIndex(t,e,o,s,a),h=0;h<l.length;h++)n.push(this._linkedDataList.getCellData(l[h],i));return n}catch(t){r.w.printStackTrace(t)}},W.prototype.getFilteredColData=function(t){for(var e=[],i=0;i<this._linkedDataList.getDataLength();i++)e.push(this._linkedDataList.getCellData(this._linkedDataList.filteredRowIndexArr[i],t));return e},W.prototype.getMatchedIndex=function(t,e,i,o,s){try{i=void 0===i||null==i||i,0!=(i=a.D.getBoolean(i))&&(i=!0);var n=this._linkedDataList._dataList.getColumnIndex(t),l=this._linkedDataList.getFilteredColData(n),h=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=l.length),s>l.length&&(s=l.length);for(var d=o;d<s;d++){var u=l[d],c=this._linkedDataList.getRealRowIndex(d);1==i?u===e&&h.push(c):u.indexOf(e)>-1&&h.push(c)}return h}catch(t){
r.w.printStackTrace(t)}},W.prototype.getUnmatchedIndex=function(t,e,i,o,s){try{0!=i&&(i=!0);var a=this._linkedDataList._dataList.getColumnIndex(t),n=this._linkedDataList.getFilteredColData(a),l=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=n.length),s>n.length&&(s=n.length);for(var h=o;h<s;h++){var d=n[h],u=this._linkedDataList.getRealRowIndex(h);1==i?d!==e&&l.push(u):d.indexOf(e)<=-1&&l.push(u)}return l}catch(t){r.w.printStackTrace(t)}},W.prototype.getRangeData=function(t,e){try{var i=[];if(t>e){var o=e;e=t,t=o}t<0&&(t=0),e>this._linkedDataList.getDataLength()&&(e=this._linkedDataList.getDataLength());for(var s=t;s<e;s++){var a=this._linkedDataList.getRealRowIndex(s);i=i.concat(this._linkedDataList.getRowData(a))}return i}catch(t){r.w.printStackTrace(t)}},W.prototype.getAllData=function(){try{return this._linkedDataList._dataList.getAllFilteredData()}catch(t){r.w.printStackTrace(t)}},W.prototype.getAllFilteredData=function(){this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=0;e<this._linkedDataList.getDataLength();e++)t=t.concat(this._linkedDataList.getRowData(e));return t},W.prototype.getColumnDistinctDataArray=function(t){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var e=[],i=[];"string"==typeof t&&(t=this._linkedDataList._dataList.bodyIdColIndexMap[t]);for(var o=this._linkedDataList._dataList.getCellInfo(t),s=this._linkedDataList.getColData(t),a=0;a<s.length;a++){i[s[a]]=1}for(var n in i)e.push(n);return"text"==o.options.dataType?e.sort():e.sort(this._linkedDataList.comparator),e}catch(t){r.w.printStackTrace(t)}},W.prototype.getRangeXML=function(t,e){try{return this._linkedDataList.getRangeXML(t,e)}catch(t){r.w.printStackTrace(t)}},W.prototype.getMatchedXML=function(t,e,i,o,s){try{return this._linkedDataList.getMatchedXML(t,e,i,o,s)}catch(t){r.w.printStackTrace(t)}},W.prototype.getUnmatchedXML=function(t,e,i,o,s){try{return this._linkedDataList.getUnmatchedXML(t,e,i,o,s)}catch(t){r.w.printStackTrace(t)}},W.prototype.getRowXML=function(t){try{return this._linkedDataList.getRowXML(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.getAllXML=function(t){try{return this._linkedDataList.getAllXML(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.getAllFilteredXML=function(t){return this._linkedDataList.getAllFilteredXML(t)},W.prototype.getRowJSON=function(t,e){try{return this._linkedDataList.getRowJSON(t,e)}catch(t){r.w.printStackTrace(t)}},W.prototype.getAllJSON=function(t){try{return this._linkedDataList.getAllJSON(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.getRangeJSON=function(t,e,i){try{return this._linkedDataList.getRangeJSON(t,e,i)}catch(t){r.w.printStackTrace(t)}},W.prototype.getMatchedJSON=function(t,e,i,o,s){try{return this._linkedDataList.getMatchedJSON(t,e,i,o,s)}catch(t){r.w.printStackTrace(t)}},W.prototype.getUnmatchedJSON=function(t,e,i,o,s){try{return this._linkedDataList.getUnmatchedJSON(t,e,i,o,s)}catch(t){r.w.printStackTrace(t)}},W.prototype.getFusionChartData=function(t,e,i){return this._linkedDataList.getFusionChartData(t,e,i)},W.prototype.getRowStatusValue=function(t){try{return this._linkedDataList.getRowStatusValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},W.prototype.getRowStatus=function(t){try{return this._linkedDataList.getRowStatus(t)}catch(t){r.w.printStackTrace(t,null,this)}},W.prototype.getRowIndexByStatus=function(t){try{for(var e=[],i=0;i<this._linkedDataList.getDataLength();i++){var o=this._linkedDataList.getRealRowIndex(i);t.indexOf(this._linkedDataList._dataList.getRowStatus(o))>-1&&e.push(o)}return e}catch(t){r.w.printStackTrace(t)}},W.prototype.getInsertedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("C")}catch(t){r.w.printStackTrace(t)}},W.prototype.getUpdatedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("U")}catch(t){r.w.printStackTrace(t)}},W.prototype.getDeletedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("DV")}catch(t){r.w.printStackTrace(t)}},
W.prototype.getOnlyDeletedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("D")}catch(t){r.w.printStackTrace(t)}},W.prototype.getVoidIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("V")}catch(t){r.w.printStackTrace(t)}},W.prototype.getModifiedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("CUD")}catch(t){r.w.printStackTrace(t)}},W.prototype.getInsertedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getInsertedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getInsertedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getInsertedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.getInsertedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getInsertedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getDeletedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getDeletedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getDeletedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.getDeletedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getVoidData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getVoidIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getVoidXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getVoidIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.getVoidJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getVoidIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getOnlyDeletedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getOnlyDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getOnlyDeletedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getOnlyDeletedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.getOnlyDeletedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getOnlyDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getUpdatedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getUpdatedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getUpdatedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.getUpdatedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]})
;for(var t=[],e=this._linkedDataList.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getModifiedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getModifiedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.getModifiedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getModifiedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.getModifiedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getModifiedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){r.w.printStackTrace(t)}},W.prototype.setColumnFilter=function(t,e,i,o){return"object"!==(0,l.Z)(t)||a.D.isString(t)||(t.internal=!0),this._linkedDataList.setColumnFilter(t,e,i,o)},W.prototype.removeColumnFilter=function(t){return this._linkedDataList.removeColumnFilter(t,{internal:!0})},W.prototype.clearSortFilter=function(){return this._linkedDataList.clearSortFilter()},W.prototype.removeColumnFilterAll=function(){return this._linkedDataList.removeColumnFilterAll()},W.prototype.setFilter=function(t){return t&&(t.internal=!0),this._linkedDataList.setFilter(t)},W.prototype.removeFilter=function(t,e){return t&&(t.internal=!0),this._linkedDataList.removeFilter(t,e)},W.prototype.clearFilter=function(){return this._linkedDataList.clearFilter()},W.prototype.sort=function(t,e){return this._linkedDataList.sort(t,e)},W.prototype.clearSort=function(){return this._linkedDataList.clearSort()},W.prototype.multisort=function(t){return this._linkedDataList.multisort(t)},W.prototype.getRowArray=function(t){try{return this._linkedDataList.getRowArray(t)}catch(t){r.w.printStackTrace(t)}},W.prototype.removeRow=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);return this._grid._dataList.removeRow(i,e)}catch(t){r.w.printStackTrace(t)}},W.prototype.removeRows=function(t){try{for(var e=[],i=0;i<t.length;i++)e.push(this._linkedDataList.getRealRowIndex(t[i]));return this._grid._dataList.removeRows(e)}catch(t){r.w.printStackTrace(t)}},W.prototype.setRowData=function(t,e,i){try{var o=this._linkedDataList.getRealRowIndex(t);this._grid._dataList.setRowData(o,e,i)}catch(t){r.w.printStackTrace(t)}},W.prototype.setRowXML=function(t,e,i){try{var o=this._linkedDataList.getRealRowIndex(t);this._grid._dataList.setRowXML(o,e,i)}catch(t){r.w.printStackTrace(t)}},W.prototype.insertData=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);this._grid._dataList.insertData(i,e)}catch(t){r.w.printStackTrace(t)}};var A=i(5373),E=function(t,e,i){this.options={},o.x.extend(this.options,WebSquare.uiplugin.cellInfo.prototype.defaultOptions);var r=t?t.getAttribute("escape"):"",n=a.D.getEscape(r);this.options.escape=n||this.options.escape,this.internal=!1,(i||"TD"==t.getTagName().toUpperCase())&&(this.internal=!0),this.mainGrid=e,this.mainGridId="G_"+this.mainGrid.id+"__",t&&this.setOptions(t),null!=this.mainGrid.scope_obj&&(this.options._scope_obj_uuid=this.mainGrid.scope_obj.uuid,this.scope_id=this.mainGrid.scope_obj.id),""!=this.options.value&&""==this.options.defaultValue&&(this.options.defaultValue=this.options.value),""==this.options.value&&""!=this.options.defaultValue&&(this.options.value=this.options.defaultValue),this.colID=this.options.col_id,this.id=this.options.col_id,this.options.id=this.options.col_id,this.setController(),this.initFormatter(t),this.initializeCellInfo(t,i),this.expressionStr=null,this.style="",this.heightGap=0;var l=s.v.browserVersion();if(s.v.browserCheck.ie&&"8"!=l&&(this.heightGap=2),""!=this.options.importExp&&(this.options.importExp=this.options.importExp.replace(/[cC][oO][lL][\s]*[(]/g,"_this.columnValue(obfuscator_rowXml, "),
this.options.importExp=this.options.importExp.replace(/[xX][pP][aA][tT][hH][\s]*[(]/g,"_this.xpathValue(obfuscator_rowXml, "),this.options.importExp=this.options.importExp.replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"_this.rowIndexValue(obfuscator_i")),0==this.options.colSpan&&(this.options.colSpan=1),0==this.options.rowSpan&&(this.options.rowSpan=1),t){var h=!this.options.groupName||!this.options.groupValue,d=this.options.inputType;if(h&&("button"!=d&&"image"!=d)&&this.mainGrid.successBinding){var u=e._dataList.getCellInfo(this.id);!(!u||!u.element&&u.id!==this.id)||(this.options.readOnly=!0)}}"radio"==this.options.inputType&&this.options.groupName&&(this.mainGrid.radioGroupRepChk[this.options.groupName]=!0),"$blank"==this.options.NaNFormat&&(this.options.NaNFormat=""),this.changedCellHeight=0,this.dynamicAttrInfo={},"custom"==this.options.inputType&&(this.mainGrid.hasCustomInputType=!0),"expression"===this.options.inputType&&"true"!==this.options.expressionSort&&(this.mainGrid.expressionHeaderInfo[this.mainGrid.bodyToHeaderRelation[this.id]]=!0)};E.prototype.defaultOptions={id:"",col_id:"",colIndex:"",colSpan:0,rowSpan:0,defaultValue:"",value:"",inputType:"text",useFilter:!1,blockSelect:!1,dataType:"",valueType:"binary",viewType:"",trueValue:null,falseValue:null,editType:"",applyFormat:"display",displayFormat:"",displayFormatter:"",chooseOptionLabel:"-선택-",chooseOptionValue:"",chooseOption:!1,allOption:!1,title:"",voidNull:!1,adjustMaxLength:!1,useMaxLength:!1,depthColumn:"",showDepth:0,importExp:"",importFormatter:"",expression:"",colMerge:!1,colMergeEdit:!1,upperColumn:"",readOnly:"",imageWidth:"",imageHeight:"",imageClickFunction:"",imageSrc:"",imageSrcDisabled:"",imageSrcReadOnly:"",useImageClick:!1,alt:"",calendarValueType:"yearMonthDate",disabled:"",textAlign:"",exportFormatter:"",imeMode:"",selectSetter:"",ignoreStatus:!1,dateValidCheck:"",embeddedInput:"",groupName:"",escape:"false"!==s.v.getConfiguration("/WebSquare/escape/@value"),setRecursive:!1,showReadOnly:!1,customFormatter:"",escapeFormatter:"",depthType:"nbsp",moveFocusByChoice:"",directItemChoice:"",directOpen:!1,focusOutOnCheckHeaderClick:!0,usePartialCheck:!0,partialCheckNextClick:"",footerDiv:!1,displayRowIndex:!1,NaNFormat:"NaN",disabledClass:"",hiddenClass:"",displayMode:"0",delimiter:"\t",skipKeyMoveEditMode:!1,checkboxLabel:"",checkboxLabelPosition:"right",checkboxLabelColumn:"",checkboxLabelFormatter:"",radioLabel:"",radioLabelPosition:"right",radioLabelColumn:"",radioLabelFormatter:"",checkAlways:!1,fixColumnWidth:!1,sortLabel:!1,useIOFormatLength:!1,tooltipDisplayItem:!1,itemTooltipDisplay:!1,itemTooltipFormatter:"",tooltipTime:1,minWidth:20,eventPriority:"onviewchange",customModelFormatter:"",customModelUnformatter:"",useMonthYearFormat:!1,editModeEventIcon:"",keepCellClass:!1,inputReadOnly:!1,keyMoveListSync:!1,tableRender:"",copyOption:"",invalidMessageFunc:"",dateValidSetCustom:!1,checkcomboboxUseDrag:!1,checkcomboboxUseEdit:!1,checkcomboboxRangeSeparator:"",checkcomboboxValidateOnInput:!1,checkcomboboxVisibleRowNum:0,checkcomboboxVisibleColNum:1,checkcomboboxVisibleColMax:1,placeholder:"",refInitSync:!1,eventPropagation:!1,noDisabledOnReadOnly:!1},E.prototype.setOptions=function(t){var e=this.mainGrid.options.pluginName,i=t.getAttribute("calendarValueType")||this.options.calendarValueType,r=t.getAttribute("inputType")||"text";this.configOptions=o.x.extend({},s.v.getConfig(e+"/column[@inputType='"+r+"']"));var n=t.getAttribute("dataType")||"text";this.configOptions2=o.x.extend({},s.v.getConfig(e+"/column[@dataType='"+n+"']")),
"calendar"==r&&"grid"==e?this.configOptions.displayFormat=s.v.getConfiguration('/WebSquare/grid/column[@inputType="calendar"]/displayFormat[@valueType="'+i+'"]/@value')||s.v.getConfiguration('/WebSquare/grid/column[@inputType="calendar"]/displayFormat/@value'):"calendar"==r&&"gridView"==e&&(this.configOptions.displayFormat=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/displayFormat[@valueType="'+i+'"]/@value')||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/displayFormat/@value')||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/displayFormat[@valueType="'+i+'"]/@defaultValue')),"textarea"===r&&(this.configOptions.keepCellClass=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="textarea"]/keepCellClass/@value')),this.options=o.x.extendKeepingType(o.x.extendKeepingType(this.options,this.configOptions2),this.configOptions);var l=[];for(var h in this.options)l[h.toLowerCase()]=h;var d=WebSquare.Parser.parseAttribute(t);for(var u in d){var c=d[u];"class"==u?this.options.className=c:""!=String(c).wq_trim()&&(l[u]&&(u=l[u]),"boolean"==typeof this.options[u]?c=a.D.getBoolean(c):"number"==typeof this.options[u]&&(c=a.D.getNumber(c)),this.options[u]=c)}if(!(n=this.options.dataType)&&this.mainGrid.successBinding&&(n=this.mainGrid._dataList.getColumnOption(this.options.col_id,"dataType")),"date"==n&&!this.options.displayFormat){if(this.options.displayFormatFunc){var p=a.D.getGlobalFunction(this.options.displayFormatFunc,this.scope_id);"function"==typeof p&&(this.options.displayFormat=p.call(this,this.options.calendarValueType))}this.options.displayFormat||(this.options.displayFormat=s.v.getConfiguration("/WebSquare/"+e+"/dataType/date/@displayFormat"))}if("date"==n&&this.options.calendarDisplayFormatFunc&&!this.options.calendarDisplayFormat){var g=a.D.getGlobalFunction(this.options.calendarDisplayFormatFunc,this.scope_id);"function"==typeof g&&(this.options.calendarDisplayFormat=g.call(this,this.options.calendarValueType))}if("time"!=n||this.options.displayFormat||(this.options.displayFormat="HH:mm"),this.mainGrid.options.senseReader&&"false"!==this.options.embeddedInput)switch(this.options.inputType||"text"){case"secret":case"text":"none"==this.mainGrid.options.focusMode&&"false"!=this.options.readOnly&&(this.options.readOnly=!0);case"select":case"checkbox":case"radio":case"calendar":this.options.embeddedInput=!0}else this.options.embeddedInput=a.D.getBoolean(this.options.embeddedInput);if("textarea"==this.options.inputType&&(this.options.showReadOnly=!0),this.element=t,"expression"==this.options.inputType){var m=this.options.expression;""!=m&&(m=m.replace(/rowStatus[\s]*[(]/gi,"this.rowStatus(")).match("rowStatus")&&this.mainGrid.rowStatusColIDArr.push(this.options.col_id)}this.options.editModeEventIcon||(this.options.editModeEventIcon=this.mainGrid.options.editModeEventIcon);!0!=={onclick:!0,ondblclick:!0}[this.options.editModeEventIcon]&&(this.options.editModeEventIcon="onclick"),this.options.copyOption||(this.options.copyOption=this.mainGrid.options.copyOption)},E.prototype.setController=function(){switch(this.options.inputType){case"text":o.x.extend(this,WebSquare.uiplugin.cellInfo.text.prototype);break;case"link":o.x.extend(this,WebSquare.uiplugin.cellInfo.link.prototype);break;case"checkbox":o.x.extend(this,WebSquare.uiplugin.cellInfo.checkbox.prototype);break;case"button":o.x.extend(this,WebSquare.uiplugin.cellInfo.button.prototype);break;case"image":o.x.extend(this,WebSquare.uiplugin.cellInfo.image.prototype);break;case"radio":o.x.extend(this,WebSquare.uiplugin.cellInfo.radio.prototype);break;case"select":o.x.extend(this,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(this,WebSquare.uiplugin.cellInfo.select.prototype);break;case"calendar":o.x.extend(this,WebSquare.uiplugin.cellInfo.calendar.prototype);break
;case"textarea":o.x.extend(this,WebSquare.uiplugin.cellInfo.textarea.prototype);break;case"expression":o.x.extend(this,WebSquare.uiplugin.cellInfo.expression.prototype);break;case"drilldown":o.x.extend(this,WebSquare.uiplugin.cellInfo.text.prototype),o.x.extend(this,WebSquare.uiplugin.cellInfo.drilldown.prototype);break;case"textImage":o.x.extend(this,WebSquare.uiplugin.cellInfo.textImage.prototype);break;case"checkcombobox":o.x.extend(this,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(this,WebSquare.uiplugin.cellInfo.checkcombobox.prototype);break;case"autoComplete":o.x.extend(this,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(this,WebSquare.uiplugin.cellInfo.autoComplete.prototype);break;case"spinner":o.x.extend(this,WebSquare.uiplugin.cellInfo.spinner.prototype);break;case"custom":o.x.extend(this,WebSquare.uiplugin.cellInfo.custom.prototype);break;case"user":o.x.extend(this,WebSquare.uiplugin.cellInfo.user.prototype);break;default:o.x.extend(this,WebSquare.uiplugin.cellInfo.text.prototype)}},E.prototype.setInnerHTML=function(t,e,i,o,s){t.innerHTML="<nobr>"+this.getDisplayData(e)+"</nobr>"},E.prototype.setEditMode=function(t,e){this.mainGrid.editedCell=null,this.mainGrid.editMode=!1},E.prototype.initFormatter=function(t){try{var e=this.options.dataType;if(!e&&this.mainGrid.successBinding&&(e=this.mainGrid._dataList.getColumnOption(this.options.col_id,"dataType")),!e&&this.options.expression){var i=this.options.expression;(i=(i=(i=(i=(i=(i=(i=i.replace(/[sS][uU][mM][\s]*[(]/g,"NUMBER(")).replace(/[aA][vV][gG][\s]*[(]/g,"NUMBER(")).replace(/[mM][aA][xX][\s]*[(]/g,"NUMBER(")).replace(/[mM][iI][nN][\s]*[(]/g,"NUMBER(")).replace(/rowStatus[\s]*[(]/gi,"NUMBER(")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"STRING(")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"STRING(")).indexOf("NUMBER(")>-1?e="number":i.indexOf("STRING(")>-1&&(e="text")}var o,a,n,l=e;if("number"!==e&&"bigDecimal"!==e&&"float"!==e&&"euro"!=e&&"rupee"!=e&&"tenge"!=e||"\t"===this.options.delimiter&&(this.options.delimiter=""),"text"==this.options.inputType&&!this.options.displayFormat)if("euro"==e||"rupee"==e||"tenge"==e)"euro"==e?(o=this.mainGrid.options.euroMask||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/euroMask/@value')||"",a=".",n=","):"rupee"==e?(o=this.mainGrid.options.rupeeMask||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/rupeeMask/@value')||"",a=",",n="."):"tenge"==e&&(o=this.mainGrid.options.tengeMask||s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/tengeMask/@value')||"",a=" ",n="-"),this.options.displayFormat=o,this.options.delimiter||(this.options.delimiter=a),this.options.decimalDelimiter||(this.options.decimalDelimiter=n),this.options.customModelFormatter||(this.options.customModelFormatter=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/customModelFormatter/@value')||""),this.options.customModelUnformatter||(this.options.customModelUnformatter=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/customModelUnformatter/@value')||""),l="float";"date"!=l||"calendar"!=this.options.inputType||this.options.ioFormat||(this.options.ioFormat=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/ioFormat[@valueType="'+this.options.calendarValueType+'"]/@defaultValue'),
this.options.ioFormat||("yearMonthDate"==this.options.calendarValueType?this.options.ioFormat="yyyyMMdd":"yearMonth"==this.options.calendarValueType?this.options.ioFormat="yyyyMM":"yearMonthDateTime"==this.options.calendarValueType?this.options.ioFormat="yyyyMMddHHmm":"yearMonthDateTimeSec"==this.options.calendarValueType&&(this.options.ioFormat="yyyyMMddHHmmSS"))),"default"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):"reverse"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):this.formatter="float"===l||"bigDecimal"===l?WebSquare.format.createFormatter(l,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.mainGrid.scope_id,this.mainGrid.id):WebSquare.format.createFormatter(l,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.mainGrid.scope_id,this.mainGrid.id),this.emptyFormatter=WebSquare.format.createFormatter(l,"",null,null,null,null,this.mainGrid.scope_id,this.mainGrid.id)}catch(t){r.w.printStackTrace(t)}},E.prototype.getDisplayData=function(t){return this.formatter&&(t=this.formatter.format(t)),"secret"==this.options.inputType&&(t=t.replace(/./gi,"●")),t},E.prototype.initializeCellInfo=function(){},E.prototype.handleEndEdit=function(t,e,i){try{if(t=t||{},i=i||{},this.options.embeddedInput)return!0;if(this.mainGrid.rollbackCommitFlag=!1,this.mainGrid.editedCell&&0==this.mainGrid.editMode&&(this.mainGrid.editMode=!0),this.mainGrid.editMode){var o=this.mainGrid.editedCell;if(o._getEditedValue){var a=this.mainGrid.getColumnIndex(this.mainGrid.editedCell.id),n=this.editRowIndex,l=this.mainGrid._getGroupbyDisplayRowIndex(n),h=o._getEditedValue();if((d=u.B.fireEvent(this.mainGrid,"oneditend",l,a,h,t))+""=="false")return this.mainGrid.getInput(this).focus(),u.B.stopEvent(t),!1}if(!o.validate())return u.B.stopEvent(t),!1;if(this.mainGrid.editedCell=null,this.mainGrid.editMode=!1,!i.otherClick){p=null;null!=this.editTd&&(p=this.mainGrid.dataList.getCellData(this.editRowIndex,o.options.id),this._handleEndEdit(t,e,i));var d=this._afterEndEdit(o,p);return o=null,d}var c=null,p=null;null!=this.editTd&&(p=this.mainGrid.dataList.getCellData(this.editRowIndex,o.options.id),c=this._handleEndEdit(t,e,i)),s.v.setTimer((function(t,e){null!=this.editTd&&this._handleEndEdit_focus(e),this._afterEndEdit(t,p),t=null,e=null}),{key:this.id+"_handleClickEventDocument",caller:this,args:[o,c]}),c=null,o=null}}catch(t){r.w.printStackTrace(t,null,this)}},E.prototype._afterEndEdit=function(t,e){var i,o=this.mainGrid.dataList._getCellData(this.editRowIndex,t.options.id),s=this.editRowIndex,r=t.options.id,a=s,n=this.mainGrid.getColumnIndex(r);if(this.editTd&&(i=this.editTd.getAttribute("colMerged")),"0"==i&&!t.options.colMergeEdit&&!this.mainGrid.groupbyStatus.grouped){var l=function(t,i,o,s){for(var r=t;t+1<this.mainGrid.getDataLength();){t+=1
;var a=this.mainGrid.upperGroupingTest(t,i),n=this.mainGrid.dataList._getCellData(t,i);if(!a){l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}if(n!=e){var l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}this.mainGrid.dataList.__setCellData(t,i,s)}for(t=r;t-1>=0;){a=this.mainGrid.upperGroupingTest(t,i);t-=1;n=this.mainGrid.dataList._getCellData(t,i);if(!a){l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}if(n!=e){var h,l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}this.mainGrid.dataList.__setCellData(t,i,s)}i=this.mainGrid.getColumnIndex(i);this.mainGrid.applyColumnStyleOptions(i)};l.call(this,s,r,n,o);var h=this.mainGrid.upperToLowerColumnRelation[r];if(h)for(var d=0;d<h.length;d++){var c=h[d],p=this.mainGrid.dataList._getCellData(s,c),g=this.mainGrid.getColumnIndex(c),m=this.mainGrid.getCellInfo(c);l.call(m,s,c,g,p)}}t.options.colMergeEdit&&!this.mainGrid.groupbyStatus.grouped&&this.mainGrid.setColMergeCellData(a-this.mainGrid.rowIndex,a,n);var f=this.mainGrid.dataList._getCellData(a,n),b=a+"_"+n;if(null!=this.mainGrid.cellMergeInfo[b]){var y=this.mainGrid.cellMergeInfo[b].rowSpan,v=this.mainGrid.cellMergeInfo[b].colSpan;for(d=0;d<y;d++)for(var w=0;w<v;w++)0===d&&0===w||this.mainGrid.dataList.__setCellData(a+d,n+w,f)}Math.abs(this.changedCellHeight)>3&&this.mainGrid.notifyRowChanged(a);var S=this.mainGrid._getGroupbyDisplayRowIndex(a),C=u.B.fireEvent(this.mainGrid,"onafteredit",S,n,f,this.mainGrid.lastEvent);return this.mainGrid.lastEvent=null,C=0!=C,this.mainGrid.rollbackCommitFlag=!0,C},E.prototype.handleScrollY=function(t){return this.validate()?this.handleEndEdit(t):this.handleCancelEdit(t)},E.prototype.validate=function(){return!0},E.prototype._handleEndEdit=function(t,e,i){var o=this._handleEndEdit_common(t);if((i=i||{}).otherClick)return o;this._handleEndEdit_focus(o,e,i.focuseChanged)},E.prototype._handleEndEdit_common=function(t,e){return null},E.prototype._handleEndEdit_focus=function(t){return null},E.prototype.handleCancelEdit=function(t){this.options.embeddedInput||(this.mainGrid.editedCell=null,this.mainGrid.editMode=!1,this._handleCancelEdit(t))},E.prototype._handleCancelEdit=function(t){},E.prototype.removeCellData=function(t,e){},E.prototype.doDefaultAction=function(t){},E.prototype.setMergedCol=function(t,e,i,o){var s=t,r=new Array;for(r[t]=!0;t<this.mainGrid.getDataLength();){if(t+=1,!(a=this.mainGrid.upperGroupingTest(t,e)))break;if(this.mainGrid.dataList._getCellData(t,e)!=i)break;this.mainGrid.dataList.__setCellData(t,e,o),r[t]=!0}for(t=s;t>0;){var a=this.mainGrid.upperGroupingTest(t,e);if(t-=1,!a)break;if(this.mainGrid.dataList._getCellData(t,e)!=i)break;this.mainGrid.dataList.__setCellData(t,e,o),r[t]=!0}e=this.mainGrid.getColumnIndex(e);return this.mainGrid.applyColumnStyleOptions(e),r},E.prototype.getEscape=function(){return""!=this.options.escape?this.options.escape:this.mainGrid.options.escape},E.prototype.getColumnIndex=function(t){return t||(t=this.colID),this.mainGrid.getColumnIndex(t)},E.prototype.setMaxLength=function(t){try{this.options.maxlength=this.options.maxLength=t,this.mainGrid.getInput(this).setMaxLength(t)}catch(t){r.w.printStackTrace(t,null,this)}},E.prototype.setFloatMaxLength=function(t){try{this.options.maxlength=this.options.maxLength="-1",this.mainGrid.getInput(this).setFloatMaxLength(t)}catch(t){r.w.printStackTrace(t,null,this)}},E.prototype.refreshCell=function(){},E.prototype._checkFastScroll=function(t,e,i,o){try{var s="string"!=typeof t||!1===this.mainGrid._regDetectDOM.test(t);return e&&null!=e.textContent&&this.mainGrid.hasClass(e,i)&&s&&!0===o}catch(t){r.w.printStackTrace(t,null,this)}},E.itemsetControl=function(){},
E.itemsetControl.prototype.initializeCellInfo=function(t){try{if(this.internal&&this.initializeInfo?this.compID=this.mainGridId+"_"+this.options.inputType+"_"+this.initializeInfo.rowIndex+"_"+this.colID+"_"+this.id:this.compID=this.mainGridId+"_"+this.options.inputType+"_"+this.colID,"select"===this.options.inputType&&""!=this.options.selectSetter)this.selectSetted=!1,this.resetMatchInfo=!0;else{var e,i="";if("json"===t._elementType)t._element.N="w2:"+this.options.inputType,this.xml=t;else{var s=(i=a.D.isIE("6 7")&&this.internal&&t._element.outerHTML?WebSquare.xml.nodeWellFormed(t._element.outerHTML):WebSquare.xml.serialize(t._element)).indexOf("xmlns:w2")<0?' xmlns:w2="http://www.inswave.com/websquare"':"",n=this.options.inputType;i=(i=i.wq_replaceAll("<w2:column","<w2:"+n+s)).wq_replaceAll("</w2:column","</w2:"+n);var l=WebSquare.xml.parse(i,!0);this.xml=new WebSquare.Elem(l.documentElement)}o.x.extend(this,A.E.prototype),this.hasRef=!1,"checkcombobox"!==this.options.inputType&&(this.selectedIndex=void 0===this.options.selectedIndex?-1:parseInt(this.options.selectedIndex,10)),this.options.selectedData="false"!=this.options.selectedData&&!1!==this.options.selectedData,"select"===this.options.inputType?e="SelectBox":"autoComplete"===this.options.inputType?e="AutoComplete":"checkcombobox"===this.options.inputType&&(e="CheckCombobox"),e&&(this.options.chooseOptionLabel="-선택-"===this.options.chooseOptionLabel?WebSquare.language.getMessage(e+"_choose"):this.options.chooseOptionLabel),this.internal?this.itemsetObj=this.initializeInfo.itemSet?this.initializeInfo.itemSet:{nodeset:"",label:"",value:""}:this.itemsetObj=WebSquare.WebSquareparser.parseItemset(this.xml),this.resetMatchInfo=!0;var h=this.itemsetObj.nodeset.wq_replaceAll(" ","");if(this.internal&&"gridViewItemset"==this.options.itemTableType?this.existGridViewItemsetNode=!0:this.existGridViewItemsetNode=WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:gridViewItemset")[0],""!=this.itemsetObj.nodeset&&h.indexOf("ref(")>=0){this.hasRef=!0;var d=this.itemsetObj.nodeset;this.refStr='"'+this.refReplace(d)+'"';for(var u=d.match(/ref\('([^']*)'\)/g),c=0;c<u.length;c++){var p=u[c].slice(5,-2),g=this.mainGrid.getCellInfo(p);g.refArr||(g.refArr=[]),g.refArr.push(this.colID)}if(this.refHash=[],this.refItemArr=[],"select"===this.options.inputType&&this.options.embeddedInput)WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset","")}else if(""!=this.itemsetObj.nodeset&&h.indexOf("data:")>=0){var m=this.itemsetObj.nodeset.replace("data:","").split(".");this.dataComp=m[0]}else this.matchInfo=this.setMatchInfo()}this.refArr||(this.refArr=[]),this._initializeCellInfo()}catch(t){r.w.printStackTrace(t,null,this)}},E.itemsetControl.prototype.getItemText=function(t){try{var e="";if(t>-1&&t<this.itemArr.length){switch(e=this.itemArr[t].label,this.options.displayMode){case"0":case"1":case"2":case"3":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;case"value":this.options.displayMode="3";break;default:this.options.displayMode="0"}switch(this.options.displayMode){case"0":break;case"1":e=this.itemArr[t].value+this.options.delimiter+e;break;case"2":e=e+this.options.delimiter+this.itemArr[t].value;break;case"3":e=this.itemArr[t].value}}return e}catch(t){r.w.printStackTrace(t,null,this)}},E.itemsetControl.prototype.setColumnNodeSet=function(t,e,i,o){try{if(this.internal)this.itemsetObj.nodeset=t,this.itemsetObj.label=e,this.itemsetObj.value=i;else{if("json"===this.xml._elementType){var a=[];a.push({N:"w2:label",T:1,A:{ref:e}}),a.push({N:"w2:value",T:1,A:{ref:i}});var n=WebSquare.Elem.api.getElementsByTagName(this.xml,"itemset",s.v._XML_NAMESPACE.W2)[0];n?(n._element.A.nodeset=t,n._element.E=a):this.xml._element.E=[{T:1,N:"w2:choices",E:[{T:1,N:"w2:itemset",A:{nodeset:t},E:a}]}]}else{
var l=WebSquare.xml.findNode(this.xml,"*['choices'=local-name()]['"+s.v._XML_NAMESPACE.W2+"'=namespace-uri()]");for(null==l&&(l=WebSquare.xml.createNode(this.xml,"w2:choices"),WebSquare.xml.appendChild(this.xml,l));l&&l.firstChild;)l.removeChild(l.firstChild);var h="<w2:itemset xmlns:w2='http://www.inswave.com/websquare' nodeset='"+t+"'><w2:label ref='"+e+"'></w2:label><w2:value ref='"+i+"'></w2:value></w2:itemset>",d=WebSquare.xml.parse(h,!0).documentElement;WebSquare.xml.appendChild(l,d)}this.itemArr=[],this.initializeCellInfo(this.xml)}var u=this.options.inputType;if(1==this.options.embeddedInput){var c=this.mainGrid.tdIdList.length,p=this.mainGrid.getColumnIndex(this.options.id);if(isNaN(o))for(var g=this.mainGrid.getRowCount(),m=this.mainGrid.rowIndex;m<g;m++){(f=this.mainGrid.data_td_list[(m-this.mainGrid.rowIndex)*c+p])&&this.mainGrid.getInput(this,f).setNodeSet(t,e,i)}else{var f,b=o-this.mainGrid.rowIndex;if(b>=0)(f=this.mainGrid.data_td_list[b*c+p])&&this.mainGrid.getInput(this,f).setNodeSet(t,e,i)}}else this[u]&&this[u].setNodeSet(t,e,i);t.indexOf("data:")>=0&&(this.dataComp=t.slice("data:".length))}catch(t){r.w.printStackTrace(t,null,this)}},E.itemsetControl.prototype.setColumnGridItemset=function(t){try{if("select"!==this.options.inputType&&"autoComplete"!==this.options.inputType)return;var e=t.nodeset,i=t.label,o=t.value;if(this.internal)this.itemsetObj.nodeset=e,this.itemsetObj.label=i,this.itemsetObj.value=o;else{if("json"===this.xml._elementType){var a=[],n={};for(var h in t)"object"!==(0,l.Z)(t[h])&&"function"!=typeof t[h]&&null!=t[h]&&(n[h]=t[h]);for(var d=0;d<t.item.length;d++)a.push({N:"w2:item",T:1,A:t.item[d]});var u=WebSquare.Elem.api.getElementsByTagName(this.xml,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0];if(u){for(var h in n)u._element.A[h]=n[h];u._element.E=a}else this.xml._element.E=[{T:1,N:"w2:choices",E:[{T:1,N:"w2:gridViewItemset",A:n,E:a}]}]}else{var c=WebSquare.Elem.api.getElementsByTagName(this.xml,"choices",s.v._XML_NAMESPACE.W2);for(null==c&&(c=WebSquare.xml.createNode(this.xml,"w2:choices"),WebSquare.xml.appendChild(this.xml,c));c&&c.firstChild;)c.removeChild(c.firstChild);if(s.v.isXML(t))WebSquare.xml.appendChild(c,t);else{var p="<w2:gridViewItemset xmlns:w2='http://www.inswave.com/websquare' nodeset='"+e+"'></w2:gridViewItemset>",g=WebSquare.xml.parse(p,!0),m=g.documentElement;for(var f in t)if("item"===f)for(d=0;d<t.item.length;d++){var b=WebSquare.xml.createElement(g,"w2:item"),y=t.item[d];for(var v in y)b.setAttribute(v,y[v]);WebSquare.xml.appendChild(m,b)}else"nodeset"!==f&&m.setAttribute(f,t[f]);WebSquare.xml.appendChild(c,m)}}this.initializeCellInfo(this.xml)}if("select"===this.options.inputType&&1==this.options.embeddedInput){var w=this.mainGrid.tdIdList.length,S=this.mainGrid.getColumnIndex(this.options.id),C=this.mainGrid.getRowCount();for(d=0;d<C;d++)this.mainGrid.getInput(this,this.mainGrid.data_td_list[d*w+S]).setGridItemset(t)}this[this.options.inputType]&&this[this.options.inputType].setGridItemset(t),e.indexOf("data:")>=0&&(this.dataComp=e.slice("data:".length))}catch(t){r.w.printStackTrace(t,null,this)}},E.itemsetControl.prototype.getColumnDataListInfo=function(){try{if(this[this.options.inputType])return this[this.options.inputType].getDataListInfo();var t=WebSquare.Elem.api.getElementsByTagName(this.xml,"choices",s.v._XML_NAMESPACE.W2)[0];if(t){var e=WebSquare.WebSquareparser.parseItemset(t),i={};return e&&""!==e.nodeset?(e.nodeset.match("data:")?(i.nodeset=e.nodeset.slice(0),i.id=i.nodeset.wq_replaceAll("data:",""),i.value=e.value,i.label=e.label):(i.nodeset=e.nodeset.slice(0),i.value=e.value,i.label=e.label),i):null}return null}catch(t){r.w.printStackTrace(t,null,this)}},E.itemsetControl.prototype.getDisplayData=function(t,e,i){var o=this.getData(t,e,i);return null==o&&(o=""),i&&i.emptyValue&&o===i.emptyValue?o="":o!=t&&""==o&&(o=t),o},E.itemsetControl.prototype.setMatchInfo=function(t){
if(this.modelControl=new WebSquare.modelControl(this.colID,this.options.model,this.options.ref,this.options.bind,this.options._scope_obj_uuid),this.existGridViewItemsetNode?this.initializeGridViewItemArr(this.xml):this.initializeItemArr(this.xml),0==this.itemArr.length?this.resetMatchInfo=!0:this.resetMatchInfo=!1,"0"!=this.options.displayMode)for(var e=0;e<this.itemArr.length;e++)this.itemArr[e].label=this.getItemText(e);var i={};if(1==this.options.allOption){var o=WebSquare.language.getMessage("Grid_all")||"-전체-";this.itemArr=[{label:o,value:WebSquare.allValue}].concat(this.itemArr)}if(1==this.options.chooseOption&&"checkcombobox"!==this.options.inputType){var s=this.options.chooseOptionLabel;"$blank"==s&&(s=""),this.itemArr=[{label:s,value:this.options.chooseOptionValue}].concat(this.itemArr)}this.hasRef&&(this.refItemArr[this.itemsetObj.nodeset]=this.itemArr);var r=this.options.inputType.toUpperCase();for(e=0;e<this.itemArr.length;e++){var a=this.itemArr[e];i[r+"_"+a.value]=a.label}return i},E.itemsetControl.prototype.getMatchInfo=function(t){var e=[];return"select"===this.options.inputType&&""!=this.options.selectSetter?e=this.matchInfo:this.hasRef?e=this.getRefMatchInfo(t):this.hasRef||(this.resetMatchInfo&&(this.matchInfo=this.setMatchInfo(t)),e=this.matchInfo),e},E.itemsetControl.prototype.getRefMatchInfo=function(t){this.targetRowIndex=t;var e=new Function("_this","return "+this.refStr)(this);if(null==this.refHash[e]||this.resetMatchInfo){this.itemsetObj.nodeset=e,WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset",e);var i=this.setMatchInfo(t);return this.refHash[e]=i,i}return this.refHash[e]},E.itemsetControl.prototype.getRefItemArr=function(t){this.getRefMatchInfo(t);var e=new Function("_this","return "+this.refStr)(this);return this.refItemArr[e]},E.itemsetControl.prototype.getRefValue=function(t){return'"'+this.mainGrid.dataList._getCellData(this.targetRowIndex,t)+'"'},E.itemsetControl.prototype.refReplace=function(t){try{var e=t.replace(/ref\('([^']*)'\)/,"\"+_this.getRefValue('$1')+\"");return e!=t?this.refReplace(e):e}catch(t){r.w.printStackTrace(t,null,this)}},E.itemsetControl.prototype.refXmlReplace=function(t){try{var e=t.replace(/ref\('([^']*)'\)/,"'+_this.getRefValue('$1')+'");return e!=t?this.refXmlReplace(e):e}catch(t){r.w.printStackTrace(t,null,this)}},E.text=function(){},E.text.prototype.setInnerHTML=function(t,e,i,o,n){var l=this.mainGrid._getGroupbyDisplayRowIndex(i);if(!this.options.embeddedInput||this.mainGrid._getEditDisabled(i,o)||this.mainGrid.___getEditReadOnly(i,o)){if(this.mainGrid.options.titleFormatter)try{var h;if("function"!=typeof this.mainGrid.options.titleFormatter){var d=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof d&&(this.mainGrid.options.titleFormatter=d,h=d.call(this,i,o,e))}else h=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",h)}catch(t){r.w.printStackTrace(t,null,this)}else if(this.options.title)t.setAttribute("title",this.options.title);else if(this.mainGrid.options.titleAuto){var u=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"";""!==e?t.setAttribute("title",u+" "+e):t.setAttribute("title",u+WebSquare.language.getMessage("Grid_text"))}var c=null;if(this.options.escapeFormatter)try{"function"==typeof this.options.escapeFormatter?c=this.options.escapeFormatter:"function"==typeof(c=a.D.getGlobalFunction(this.options.escapeFormatter,this.scope_id))&&(this.options.escapeFormatter=c)}catch(t){c=null}q=null;if(this.options.customFormatter)try{"function"==typeof this.options.customFormatter?q=this.options.customFormatter:"function"==typeof(q=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=q)}catch(t){q=null}var p=null;if(this.options.customModelUnformatter)try{
"function"==typeof this.options.customModelUnformatter?p=this.options.customModelUnformatter:"function"==typeof(p=a.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id))&&(this.options.customModelUnformatter=p)}catch(t){p=null}var g=e;p&&this.options.customModelUnformatter?(this.useCustomModelFormatter=!0,g=p.call(this.mainGrid,e,l,o)):this.useCustomModelFormatter=!1,this.options.maskFormat&&(g=this.mainGrid.getInput(this,t,e).maskFormatModelUnFormat(g)),"function"==typeof c?(this.useEscapeFormatter=!0,g=c.call(this.mainGrid,e,l,o)):this.useEscapeFormatter=!1;var m=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape;(m=a.D.getBoolean(m))&&(g=this.useCustomModelFormatter?WebSquare.xml._encode(g+""):WebSquare.xml._encode(e+""));R=g,N=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;if(this.formatter&&N&&(R=this.formatter.format(g)),"secret"==this.options.inputType&&(R=R.replace(/./gi,"●")),"function"==typeof q?(this.useCustomFormatter=!0,F=q.call(this.mainGrid,e,R,l,o)):(this.useCustomFormatter=!1,F=R),this.mainGrid.options.plainText&&!1===this.useCustomFormatter&&!this.options.displayFormatter&&t.firstChild&&t.firstChild.firstChild)t.firstChild.firstChild.data=F;else{var f=this.mainGrid.___getEditReadOnly(i,o),b=this.mainGrid._getEditDisabled(i,o),y=" class='w2grid_input";this.mainGrid.options.checkEditableInputClass&&(f||b)&&(y=" class='"),"secret"==this.options.inputType&&s.v.browserCheck.ieAllVersion&&(y+=" w2grid_secret"),f&&(y+=" w2grid_input_readonly"),b&&(y+=" w2grid_input_disabled"),y+="'";var v=t.firstChild,w=this._checkFastScroll(F,v,"w2grid_input",n&&!0===n.scroll);if(v&&(!b&&v.className.indexOf("w2grid_input_disabled")>-1||b&&-1===v.className.indexOf("w2grid_input_disabled")||!f&&v.className.indexOf("w2grid_input_readonly")>-1||f&&-1===v.className.indexOf("w2grid_input_readonly"))&&(w=!1),w&&m){var S="string"==typeof F?WebSquare.xml.__decode(F):F;v.textContent=S}else{var C=!1,x=t.firstChild;m&&x&&"NOBR"===x.tagName&&" class='"+x.getAttribute("class")+"'"===y&&1===x.attributes.length&&(C=!0),C?t.firstChild.innerHTML=F:t.innerHTML="<nobr"+y+">"+F+"</nobr>"}this.mainGrid.hasClass(t,"w2grid_input_table")||(t.className="w2grid_input_table "+t.className)}}else{var _=this.mainGrid.getInput(this,t,e);null==_.render.parentNode&&(t.innerHTML="",t.appendChild(_.render)),_.blur(),_.render.setAttribute("rowindex",i);var I=!1;if(this.mainGrid.options.autoResizeEmbeddedInput){var T=!1;this.mainGrid.__bResizeObj&&(T=this.mainGrid.__bResizeObj.width!==this.mainGrid.resizeObj.width||this.mainGrid.__bResizeObj.height!==this.mainGrid.resizeObj.height),this.mainGrid.__bResizeObj={width:this.mainGrid.resizeObj.width,height:this.mainGrid.resizeObj.height},I=!0!==_._autoResizeEmbeddedInput&&!1===T}if(!0===I){var k=0,D=0,L=!1;"none"==t.parentNode.style.display&&(t.parentNode.style.display="",L=!0),null==_.render.parentNode&&(t.innerHTML="",t.appendChild(_.render)),this.mainGrid.embeddedStyleObj||(this.mainGrid.embeddedStyleObj={top:parseInt(WebSquare.style.getStyle(t,"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t,"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t,"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t,"padding-right"),10),inputTop:parseInt(WebSquare.style.getStyle(_.render,"padding-top"),10),inputBottom:parseInt(WebSquare.style.getStyle(_.render,"padding-bottom"),10),inputLeft:parseInt(WebSquare.style.getStyle(_.render,"padding-left"),10),inputRight:parseInt(WebSquare.style.getStyle(_.render,"padding-right"),10)});var W=parseInt(WebSquare.style.getStyle(_.render,"border-top-width"),10),A=parseInt(WebSquare.style.getStyle(_.render,"border-bottom-width"),10),E=parseInt(WebSquare.style.getStyle(_.render,"border-left-width"),10),M=parseInt(WebSquare.style.getStyle(_.render,"border-right-width"),10)
;k=t.offsetHeight-parseInt(WebSquare.style.getStyle(t,"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t,"border-bottom-width"),10),k-=this.mainGrid.embeddedStyleObj.top+this.mainGrid.embeddedStyleObj.bottom,k-=W+A,this.mainGrid.embeddedWidthObj[o]&&!this.mainGrid.embeddedWidthObj[o].isChanged||(this.mainGrid.embeddedWidthObj[o]={isChanged:!1,width:t.clientWidth}),D=this.mainGrid.embeddedWidthObj[o].width,D-=this.mainGrid.embeddedStyleObj.left+this.mainGrid.embeddedStyleObj.right,D-=E+M,D-=this.mainGrid.embeddedStyleObj.inputLeft+this.mainGrid.embeddedStyleObj.inputRight,L?t.parentNode.style.display="none":(a.D.isIE("6 7")||a.D.isSpartan())&&(k-=2),a.D.isOpera()&&(k+=2),_.setSize(D-2,k-(this.mainGrid.embeddedStyleObj.inputTop+this.mainGrid.embeddedStyleObj.inputBottom)),_.setStyle("lineHeight",k+"px"),_._autoResizeEmbeddedInput=!0}else null==_.render.parentNode&&(t.innerHTML="",t.appendChild(_.render));"all"==this.options.applyFormat||this.options.displayFormat||this.options.displayFormatter||(e=this.getDisplayData(e));var q=null;if(this.options.customFormatter)try{"function"==typeof this.options.customFormatter?q=this.options.customFormatter:"function"==typeof(q=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=q)}catch(t){q=null}var R=e,N=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;if(this.formatter&&N&&(R=this.formatter.format(R)),_.setValue(e),"function"==typeof q){this.useCustomFormatter=!0;var F=q.call(this.mainGrid,e,R,l,o);_.render.value=F}this.options.textAlign?_.setStyle("text-align",this.options.textAlign):_.setStyle("text-align",""),t.removeAttribute("tabIndex"),t.removeAttribute("title")}},E.text.prototype.setEditMode=function(t,e){try{if(this.options.embeddedInput)return;this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var i=this.mainGrid.getInput(this);this.comp=i,this.options.maskFormat||(i.formatter="all"==this.options.applyFormat?this.formatter:this.emptyFormatter,i.options.applyFormat=this.options.applyFormat);var o=this.mainGrid.dataList._getCellData(e,this.colID);if("all"===this.options.applyFormat&&this.options.displayFormat&&"text"!=this.options.dataType&&"date"!=this.options.dataType&&"time"!=this.options.dataType){var s=this.options.decimalDelimeter||".",n=o.split(s);n[1]&&0==parseInt(n[1])&&(o=n[0])}i.setValue(o),document.activeElement!=i.render&&i.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==i.options.editType?i.select():"focus"==i.options.editType&&(a.D.isIEAllVersion()||a.D.isFF()||a.D.isSpartan())&&WebSquare.text.setCaretPos(i.render,i.render.value.length)}catch(t){r.w.printStackTrace(t,null,this)}},E.text.prototype.setPosition=function(){var t={top:0,left:0,width:0,height:0};if(a.D.isFF()?t={top:-1,left:0,width:0,height:0}:a.D.isOpera()?t={top:0,left:0,width:0,height:1}:a.D.isIEAllVersion("9 10 11")?t={top:-1,left:-1,width:0,height:0}:a.D.isSpartan()&&(t={top:0,left:-1,width:0,height:0}),"native"===this.mainGrid.options.drawType){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}var i=this.editTd,o=i.offsetTop+1+t.top,s=i.offsetLeft+1+t.left,r=i.clientWidth-6+t.width,n=i.clientHeight-2+t.height,l=this.mainGrid.getInput(this);if(""!=this.options.imeMode)l.render.style.imeMode=this.options.imeMode;else{var h=this.mainGrid.getColumnOption(this.options.col_id,"dataType");l.render.style.imeMode="number"==h?"disabled":""}if(l.show(),this.mainGrid.options.groupbyZone){var d=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(d=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=d}
this.mainGrid.hasClass("w2grid_adaptive_crosstab")&&(s-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft,l.render.style.lineHeight=n+"px");l.render.style.top=o+"px",l.render.style.left=s+"px",l.render.style.width=r+"px",l.render.style.height=n+"px",a.D.isIE()&&(l.render.style.lineHeight=n+"px"),l.render.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign},E.text.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},E.text.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this);return this.setEditData(e),e}catch(t){r.w.printStackTrace(t,null,this)}},E.text.prototype._handleEndEdit_focus=function(t,e){!this.mainGrid.isMobile&&e||t.hide()},E.text.prototype._getEditedValue=function(t){return"bigDecimal"==this.mainGrid.getColumnOption(this.options.col_id,"dataType")?WebSquare.bigDecimal(this.mainGrid.getInput(this).getValue()).toString():this.mainGrid.getInput(this).getValue()},E.text.prototype._handleCancelEdit=function(t){try{var e,i=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid.getInput(this).hide(),e=window.getSelection?window.getSelection():document.selection;var o=document.createRange();o.selectNodeContents(this.editTd),e.removeAllRanges(),e.addRange(o),e.collapseToStart()}catch(t){r.w.printStackTrace(t,null,this)}},E.text.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},E.text.prototype.setEditData=function(t){try{var e=t.getValue();if("number"==(o=this.mainGrid.getColumnOption(this.id,"dataType"))||"float"==o){var i=e.wq_trim();"."!==i&&"-"!==i&&"+"!==i||(e="")}e=t.validator.validateString(e),t.setValueNM(e,!0),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var o=this.mainGrid.getColumnOption(this.options.col_id,"dataType");this.mainGrid.options.numberCasting&&"number"==o&&""!=e&&(e=Number(e));var s={};s[this.mainGrid.id]=!0;var n=a.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);if("function"==typeof n){this.useCustomModelFormatter=!0;var l=this.getDisplayData(e);e=n.call(this.mainGrid,e,l,this.editRowIndex,this.getColumnIndex(this.colID))}else this.useCustomModelFormatter=!1;if(e=this.maskFormatModelFormat(e),"float"===o&&e[e.length-1]===t.options.decimalDelimiter){var h=e.split(t.options.decimalDelimiter);e=h[0]}this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,s)}catch(t){r.w.printStackTrace(t,null,this)}},E.text.prototype.maskFormatModelFormat=function(t){try{if(!t)return t;var e="";if(this.options.maskFormat)if(this.options.maskFormatModelExcludeChar)for(var i=this.options.maskFormatModelExcludeChar.split(""),o=0;o<t.length;o++){for(var s=!1,a=0;a<i.length;a++)if(t[o]==i[a]){s=!0;break}s||(e+=t[o])}else e=t;else e=t;return e}catch(t){r.w.printStackTrace(t,null,this)}},E.link=function(){},E.link.prototype.setInnerHTML=function(t,e,i,o,s){var n=-1,l="tabIndex='"+n+"'";"none"==this.mainGrid.options.focusMode?n=0:1==this.mainGrid.options.keyMoveEditMode&&(l="");var h,d,u=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),c=this.getDisplayData(e);if("function"==typeof u?(this.useCustomFormatter=!0,h=u.call(this.mainGrid,e,c,i,o)):(this.useCustomFormatter=!1,h=c),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var p=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof p&&(this.mainGrid.options.titleFormatter=p,d=p.call(this,i,o,e))}else d=this.mainGrid.options.titleFormatter.call(this,i,o,e)}catch(t){r.w.printStackTrace(t,null,this)}var g="";(d?g=" title='"+d+"'":this.options.title&&(g=" title='"+this.options.title+"'"),g)||this.mainGrid.options.titleAuto&&(g=" title='"+(this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"")+WebSquare.language.getMessage("Grid_link")+"'")
;var m=this.options.voidNull?"javascript:void(null);":"";t.innerHTML=h||g?"<nobr><a href='"+m+"' onclick='event.returnValue=false; return false;'"+l+" "+g+">"+h+"</a></nobr>":"<nobr></nobr>"},E.link.prototype.doDefaultAction=function(t){if("none"==this.mainGrid.options.focusMode){for(var e=u.B.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=this.mainGrid.getColumnIndex(e.getAttribute("col_id"))}else{var r=this.mainGrid.getLastFocusedCell();i=r.focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=r.focusedColIndex}this.mainGrid._getEditDisabled(i,s)||this.mainGrid.___getEditReadOnly(i,s)||u.B.fireEvent(this.mainGrid,"oncellclick",o,s,this.options.id)},E.checkbox=function(){},E.checkbox.prototype.initializeCellInfo=function(t){switch(this.options.valueType){case"binary":this.setBooleanValue("1","0");break;case"boolean":this.setBooleanValue("true","false");break;case"other":"$blank"==this.options.trueValue&&(this.options.trueValue=""),"$blank"==this.options.falseValue&&(this.options.falseValue=""),this.setBooleanValue(this.options.trueValue,this.options.falseValue)}if(this.options.embeddedInput&&(this.mainGrid.options.preventMultipleClick=!1),this.options.checkboxLabelColumn)for(var e=this.options.checkboxLabelColumn.split(","),i=0;i<e.length;i++){var o=e[i];this.mainGrid.getColumnIndex(o)&&this.mainGrid.setLabelColumnAssociation(e[i],this.id)}},E.checkbox.prototype.setBooleanValue=function(t,e){this.options.trueValue=t+"",this.options.falseValue=e+""},E.checkbox.prototype.setInnerHTML=function(t,e,i){var o,s=e+""==this.options.trueValue;if(o=this.options.noDisabledOnReadOnly?this.mainGrid._getEditDisabled(i,t.getAttribute("col_id")):this.mainGrid.__getEditReadOnly(t,i)||this.mainGrid._getEditDisabled(i,t.getAttribute("col_id")),this.options.embeddedInput){var n=this.mainGrid.getInput(this,t,s);n.setAttribute("rowindex",i),n.checked=s,n.disabled=o}else{var l,h;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var d=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof d&&(this.mainGrid.options.titleFormatter=d,h=this.mainGrid.getColumnIndex(this.options.id),l=d.call(this,i,h,e))}else l=this.mainGrid.options.titleFormatter.call(this,i,h,e)}catch(t){r.w.printStackTrace(t,null,this)}var p=l||this.options.title||"";if(p)p=" title='"+p+"'";else if(this.mainGrid.options.titleAuto){var g=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"";p=s?" title='"+g+WebSquare.language.getMessage("Grid_title")+"'":" title='"+g+WebSquare.language.getMessage("Grid_title_not_choose")+"'"}var m="none"==this.mainGrid.options.focusMode?"":" tabIndex='-1'",f=s?" checked":"",b=o?" disabled='true'":"",y=this.options.visibleFunc,v="";if(this.options.checkboxLabel||this.options.checkboxLabelColumn||this.options.checkboxLabelFormatter){var w=this.mainGridId+"_checkbox_"+this.id,S=w+"_"+i,C=this.options.checkboxLabel||"";if(this.options.checkboxLabelColumn){for(var x=this.options.checkboxLabelColumn.split(","),_="",I=this.options.checkboxLabelDelimiter||this.mainGrid.options.labelDelimiter||" ",T=0;T<x.length;T++)T===x.length-1?_+=this.mainGrid._getCellDisplayData(i,x[T]):_+=this.mainGrid._getCellDisplayData(i,x[T])+I;C=C?_+I+C:_}if(this.options.checkboxLabelFormatter)try{var k=a.D.getGlobalFunction(this.options.checkboxLabelFormatter,this.scope_id);"function"==typeof k&&(C=k.call(this.mainGrid,i,this.mainGrid.getColumnIndex(this.colID),C))}catch(t){c.k.printLog(this.mainGrid.id+"_"+this.id+" checkboxLabelFormatter error : "+t.message)}C&&this.mainGrid.options.titleAuto&&!this.options.title&&(p=p.substring(0,p.length-1)+" "+C+"'"),v="<INPUT type='checkbox' "+p+m+f+b+" id='"+S+"' name='"+w+"'/>";var D="<label class='w2checkbox_label ' for='"+S+"'>"+C+"</label>";"left"===this.options.checkboxLabelPosition?v=D+v:v+=D
}else v="<INPUT type='checkbox' "+p+m+f+b+" />";if(y){var L,W=a.D.getGlobalFunction(y,this.scope_id);"function"==typeof W&&(L=W(i)),t.innerHTML=L?v:""}else t.innerHTML=v;if(this.options.noDisabledOnReadOnly)(A=t.getElementsByTagName("input")[0])&&(u.B.addListener(A,"onclick",function(t,e,i){return function(o){t.options.noDisabledOnReadOnly&&t.mainGrid._getEditReadOnly(e,i)&&u.B.preventDefault(o)}}(this,i,this.getColumnIndex(this.options.id))),this.mainGrid._getEditReadOnly(i,this.options.id)?this.mainGrid.addClass(A,this.mainGrid.options.readOnlyClass+"_nodisabled"):this.mainGrid.removeClass(A,this.mainGrid.options.readOnlyClass+"_nodisabled"));if(this.mainGrid.options.preventMultipleClick){var A=t.getElementsByTagName("input")[0],E=t.getElementsByTagName("label")[0];this.labelClicked=!1,A&&u.B.addListener(A,"onclick",function(t,e,i){return function(o){t.options.eventPropagation||u.B.stopPropagation(o),e[2]=o.detail,i.apply(t,e,o)}}(this,[i,t],(function(t,e,i){i=this.labelClicked?0:1,this.labelClicked=!1;var o,s,r,a,n,l,d,c=null!=this.mainGrid.editedCell;c&&(o=this.mainGrid.editedCell.editRowIndex,s=this.mainGrid._dataList.getColumnIndex(this.mainGrid.editedCell.id),d=this.mainGrid.getCellInfo(this.mainGrid.editedCell.id),r=this.mainGrid.getColumnIndex(this.mainGrid.editedCell.id),a=this.mainGrid._grid.getRealRowIndex(o),n=this.mainGrid._dataList.dataArr[a*this.mainGrid._dataList.getColumnCount()+s],l=d.comp&&d.comp.selectedIndex);var p,g,m,f=e.getElementsByTagName("input")[0];if(f&&(p=f.checked,g=this.options.falseValue,p&&(g=this.options.trueValue),""!=(m=this.mainGrid.dataList._getCellData(t,this.colID))||p||(g=m)),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&this.mainGrid._addFocus(e):this.mainGrid._addFocus(e)),this.handleClick(e,t,!0),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode})):(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode}))),t=this.mainGrid._getGroupbyDisplayRowIndex(t),f&&m!=g){var b={oldValue:m,newValue:g,rowIndex:t,colIndex:this.mainGrid.getColumnIndex(this.options.id)};u.B.fireEvent(this.mainGrid,"onviewchange",b)}if(this.mainGrid.options.preventMultipleClick&&!this.mainGrid._getEditDisabled(t,h)&&u.B.fireEvent(this.mainGrid,"oncellclick",this.mainGrid._getGroupbyDisplayRowIndex(t),this.mainGrid.getColumnIndex(this.options.id),this.options.id,{checked:p}),c){var y=this.mainGrid._dataList.dataArr[a*this.mainGrid._dataList.getColumnCount()+s];if(n!=y){var v={oldValue:n,newValue:y,rowIndex:o,colIndex:r};isNaN(l)||(v.oldSelectedIndex=l,v.newSelectedIndex=d&&d.comp&&d.comp.selectedIndex),u.B.fireEvent(this.mainGrid,"onviewchange",v)}}}))),E&&u.B.addListener(E,"onclick",function(t,e,i){return function(o){i.apply(t,e,o)}}(this,[i,t],(function(t,e){this.labelClicked=!0})))}}},E.checkbox.prototype.getDisplayData=function(t){return t},E.checkbox.prototype.handleClick=function(t,e,i){if(this.mainGrid.__getEditReadOnly(t,e)||this.mainGrid._getEditDisabled(e,t.getAttribute("col_id"))||!this.options.embeddedInput&&this.mainGrid.options.preventMultipleClick&&!i&&!this.mainGrid.options.checkOnCellClick)return!0;null!=this.mainGrid.editedCell&&this.mainGrid.editedCell.handleEndEdit();var o=t.getElementsByTagName("input")[0];if(o){var s=this.options.id,r=o.checked,a=this.options.falseValue;r&&(a=this.options.trueValue);var n=this.mainGrid.dataList._getCellData(e,this.colID);""!=n||r||(a=n);var l=null;if((l={})[this.mainGrid.id]=!0,this.mainGrid._isGridViewItemTable()||this.mainGrid.dataList.__setCellData(e,this.colID,a,null,null,null,l),"0"==t.getAttribute("colMerged")&&this.setMergedCol(e,s,n,a),n!=a&&!i){var h={oldValue:n,newValue:a,rowIndex:e,
colIndex:this.mainGrid.getColumnIndex(this.options.id)};u.B.fireEvent(this.mainGrid,"onviewchange",h)}this.mainGrid.checkHeader(this.mainGrid.bodyToHeaderRelation[this.colID])}return!0},E.checkbox.prototype.checkHeader=function(){try{return this.mainGrid.checkHeader(this.mainGrid.bodyToHeaderRelation[this.colID])}catch(t){r.w.printStackTrace(t,null,this)}},E.checkbox.prototype.doDefaultAction=function(t){if(!this.options.embeddedInput){var e=u.B.getTarget(t);if("none"==this.mainGrid.options.focusMode){for(e.focus();e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=this.colID}else i=this.mainGrid.getLastFocusedCell().focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=this.colID;var r=!1;if(!this.mainGrid._getEditDisabled(i,s)&&!this.mainGrid.___getEditReadOnly(i,s)){var a,n,l=e.getElementsByTagName("input")[0];l&&(l.checked?(a=this.options.falseValue,l.checked=!1):(a=this.options.trueValue,l.checked=!0),n=this.mainGrid.dataList._getCellData(i,s)),this.handleClick(e,i,!0),a!=n&&u.B.fireEvent(this.mainGrid,"onviewchange",{oldValue:n,newValue:a,rowIndex:o,colIndex:this.mainGrid.getColumnIndex(s)}),r=!0}this.mainGrid.checkHeader(this.mainGrid.bodyToHeaderRelation[this.colID]),this.mainGrid.options.preventMultipleClick&&r&&u.B.fireEvent(this.mainGrid,"oncellclick",i,s,this.options.id)}},E.checkbox.prototype.refreshCell=function(){try{if(!this.options.refInitSync||"other"!==this.options.valueType)return;for(var t=this.mainGrid._dataList.getRowCount(),e=0;e<t;e++){this.mainGrid._dataList.getCellData(e,this.colID)!=this.options.trueValue&&this.mainGrid._dataList.setCellData(e,this.colID,this.options.falseValue)}}catch(t){r.w.printStackTrace(t,null,this)}},E.button=function(){},E.button.prototype.setInnerHTML=function(t,e,i){this.mainGrid._getEditDisabled(i,t.getAttribute("col_id"));var o=-1,s=" tabIndex='"+o+"' ";"none"==this.mainGrid.options.focusMode?o=0:1==this.mainGrid.options.keyMoveEditMode&&(s="");var n,l=this.mainGrid.getColumnIndex(t.getAttribute("col_id"));if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var h=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof h&&(this.mainGrid.options.titleFormatter=h,n=h.call(this,i,l,e))}else n=this.mainGrid.options.titleFormatter.call(this,i,l,e)}catch(t){r.w.printStackTrace(t,null,this)}var d=n||this.options.title||"";d?d=" title='"+d+"'":this.mainGrid.options.titleAuto&&(d=" title='"+(this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"")+WebSquare.language.getMessage("Grid_button")+"'");if(t.innerHTML="<button type='button' style='width:100%;height:100%' "+s+d+">"+this.getDisplayData(e)+"</button>",1==this.internal){var c=t.childNodes[0];if(0==c.clientHeight){var p=t.clientHeight-2;WebSquare.style.setSize(c,"height",p)}}var g,m,f;l=this.mainGrid.getColumnIndex(t.getAttribute("col_id"));this._listener=(g=this,m=[i,l,t],f=function(t,e,i,o){this.mainGrid._getEditDisabled(e,i)||this.mainGrid.___getEditReadOnly(e,i)||(null!=this.mainGrid.editedCell&&this.mainGrid.editedCell.handleEndEdit(),this.options.blockSelect||this.mainGrid.__setFocusedCell(t,o,{editMode:"none"==this.options.focusMode})),this.mainGrid._getEditDisabled(e,i)||u.B.fireEvent(this.mainGrid,"oncellclick",this.mainGrid._getGroupbyDisplayRowIndex(e),i,this.options.id)},function(t){f.apply(g,[t||window.event].concat(m))}),u.B.addListener(t.getElementsByTagName("button")[0],"onclick",this._listener)},E.button.prototype.doDefaultAction=function(t){if("none"==this.mainGrid.options.focusMode){for(var e=u.B.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=this.mainGrid.getColumnIndex(e.getAttribute("col_id"))}else{var r=this.mainGrid.getLastFocusedCell();i=r.focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),
s=r.focusedColIndex}this.mainGrid._getEditDisabled(i,s)||this.mainGrid.___getEditReadOnly(i,s)||u.B.fireEvent(this.mainGrid,"oncellclick",o,s,this.options.id)},E.image=function(){},E.image.prototype.setInnerHTML=function(t,e,i,o,s){var n="";""!=this.options.imageWidth&&(n+=";width:"+parseInt(this.options.imageWidth)+"px"),""!=this.options.imageHeight&&(n+=";height:"+parseInt(this.options.imageHeight)+"px"),t.removeAttribute("alt");var l="";""!=this.options.alt&&(l="alt='"+this.options.alt+"' ");var h=this.mainGrid._getEditDisabled(i,t.getAttribute("col_id")),d="";h&&(d=" disabled='true' "),null==e||""==e?e=this.options.imageSrc?this.options.imageSrc.startsWith("javascript:void")?this.options.imageSrc:this.mainGrid.getImageURL(this.options.imageSrc):"":"string"!=typeof e||e.startsWith("javascript:void")||(e=this.mainGrid.getImageURL(e));var c="";try{this.options.onerror&&(c=' onerror="('+this.options.onerror+').call(this,event);" ')}catch(t){r.w.printStackTrace(t,null,this)}var p,g=this.options.imageTabIndex?" tabIndex='"+this.options.imageTabIndex+"'":"";if(this.mainGrid.options.senseReader&&this.mainGrid.options.focusImage?t.innerHTML="<IMG src='"+e+"' class='w2grid_image"+(h?" w2grid_image_disabled":"")+"' style='"+n+"' "+l+d+c+g+"tabIndex='0' />":t.innerHTML="<IMG src='"+e+"' class='w2grid_image"+(h?" w2grid_image_disabled":"")+"' style='"+n+"' "+l+d+c+g+" />",this.options.imageClickFunction&&(p=this.mainGrid._getEditDisabled(i,o)),this.options.imageClickFunction&&(this.options.useImageClick||0==p)){var m=t.firstChild,f=function(t,e,i){return function(o){u.B.stopPropagation(o),t._setFocusedCell(e,i),t.fireImageClick(e,i)}}(this.mainGrid,i,this.colID);u.B.addListener(m,"onclick",f)}if(this.mainGrid.options.titleFormatter)try{var b;o=this.mainGrid.getColumnIndex(t.getAttribute("col_id"));if("function"!=typeof this.mainGrid.options.titleFormatter){var y=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof y&&(this.mainGrid.options.titleFormatter=y,b=y.call(this,i,o,e))}else b=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",b)}catch(t){r.w.printStackTrace(t,null,this)}},E.image.prototype.getDisplayData=function(t){return t},E.radio=function(){},E.radio.prototype.initializeCellInfo=function(t){switch(this.options.valueType){case"binary":this.setBooleanValue("1","0");break;case"boolean":this.setBooleanValue("true","false");break;case"other":this.setBooleanValue(this.options.trueValue,this.options.falseValue)}if(this.options.groupRef&&(this.options.groupValue=WebSquare.ModelUtil.getInstanceValue(this.options.groupRef,null,this.scope_id)),this.options.radioLabelColumn)for(var e=this.options.radioLabelColumn.split(","),i=0;i<e.length;i++){var o=e[i];this.mainGrid.getColumnIndex(o)&&this.mainGrid.setLabelColumnAssociation(e[i],this.id)}},E.radio.prototype.setBooleanValue=function(t,e){this.options.trueValue=t+"",this.options.falseValue=e+""},E.radio.prototype.setInnerHTML=function(t,e,i){var o,s,n,l,h=this.mainGridId+"_radio_"+(this.options.groupName?this.options.groupName+"_"+i:this.colID),d=e+""==this.options.trueValue;if(o=this.options.noDisabledOnReadOnly?this.mainGrid._getEditDisabled(i,t.getAttribute("col_id")):this.mainGrid.__getEditReadOnly(t,i)||this.mainGrid._getEditDisabled(i,t.getAttribute("col_id")),this.options.embeddedInput){var p=this.mainGrid.getInput(this,t,d);p.setAttribute("rowindex",i),p.checked=!1,p.name=h,p.checked=d,p.disabled=o}else{var g,m;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var f=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof f&&(this.mainGrid.options.titleFormatter=f,m=this.mainGrid.getColumnIndex(this.options.id),g=f.call(this,i,m,e))}else g=this.mainGrid.options.titleFormatter.call(this,i,m,e)}catch(t){r.w.printStackTrace(t,null,this)}var b=g||this.options.title||""
;if(b)b=" title='"+b+"'";else if(this.mainGrid.options.titleAuto){var y=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"";b=d?" title='"+y+WebSquare.language.getMessage("Grid_title")+"'":" title='"+y+WebSquare.language.getMessage("Grid_title_not_choose")+"'"}var v="none"==this.mainGrid.options.focusMode?"":" tabIndex='-1'",w=d?" checked":"",S=o?" disabled='true'":"",C="";if(this.options.radioLabel||this.options.radioLabelColumn||this.options.radioLabelFormatter){var x=this.mainGridId+"_radio_"+this.id+"_"+i,_=this.options.radioLabel||"";if(this.options.radioLabelColumn){for(var I=this.options.radioLabelColumn.split(","),T="",k=this.options.radioLabelDelimiter||this.mainGrid.options.labelDelimiter||" ",D=0;D<I.length;D++)D===I.length-1?T+=this.mainGrid._getCellDisplayData(i,I[D]):T+=this.mainGrid._getCellDisplayData(i,I[D])+k;_=_?T+k+_:T}if(this.options.radioLabelFormatter)try{var L=a.D.getGlobalFunction(this.options.radioLabelFormatter,this.scope_id);"function"==typeof L&&(_=L.call(this.mainGrid,i,this.mainGrid.getColumnIndex(this.colID),_))}catch(t){c.k.printLog(this.mainGrid.id+"_"+this.id+" radioLabelFormatter error : "+t.message)}_&&this.mainGrid.options.titleAuto&&!this.options.title&&(b=b.substring(0,b.length-1)+" "+_+"'"),C="<INPUT type='radio' "+b+v+w+S+" id='"+x+"' name='"+h+"'/>";var W="<label class='w2radio_label ' for='"+x+"'>"+_+"</label>";"left"===this.options.radioLabelPosition?C=W+C:C+=W}else C="<INPUT type='radio' name='"+h+"'"+b+v+w+S+" />";if(t.innerHTML=C,this.options.noDisabledOnReadOnly)(A=t.getElementsByTagName("input")[0])&&(u.B.addListener(A,"onclick",function(t,e,i){return function(o){t.options.noDisabledOnReadOnly&&t.mainGrid._getEditReadOnly(e,i)&&u.B.preventDefault(o)}}(this,i,this.getColumnIndex(this.options.id))),this.mainGrid._getEditReadOnly(i,this.options.id)?this.mainGrid.addClass(A,this.mainGrid.options.readOnlyClass+"_nodisabled"):this.mainGrid.removeClass(A,this.mainGrid.options.readOnlyClass+"_nodisabled"));if(this.mainGrid.options.preventDuplicateFocusedCell&&this.mainGrid.options.preventMultipleClick){var A=t.getElementsByTagName("input")[0],E=t.getElementsByTagName("label")[0];this.labelClicked=!1,A&&u.B.addListener(A,"onclick",(s=this,n=[i,t],l=function(t,e,i){i=this.labelClicked?0:1,this.labelClicked=!1;var o,s,r,a,n,l,h,c=null!=this.mainGrid.editedCell;if(c&&(o=this.mainGrid.editedCell.editRowIndex,s=this.mainGrid._dataList.getColumnIndex(this.mainGrid.editedCell.id),h=this.mainGrid.getCellInfo(this.mainGrid.editedCell.id),r=this.mainGrid.getColumnIndex(this.mainGrid.editedCell.id),a=this.mainGrid._grid.getRealRowIndex(o),n=this.mainGrid._dataList.dataArr[a*this.mainGrid._dataList.getColumnCount()+s],l=h.comp&&h.comp.selectedIndex),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&this.mainGrid._addFocus(e):this.mainGrid._addFocus(e)),this.handleClick(e,t),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode})):(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode}))),this.mainGrid.options.preventMultipleClick&&!this.mainGrid._getEditDisabled(t,m)&&u.B.fireEvent(this.mainGrid,"oncellclick",this.mainGrid._getGroupbyDisplayRowIndex(t),this.mainGrid.getColumnIndex(this.options.id),this.options.id,{checked:d}),c){var p=this.mainGrid._dataList.dataArr[a*this.mainGrid._dataList.getColumnCount()+s];if(n!=p){var g={oldValue:n,newValue:p,rowIndex:o,colIndex:r};isNaN(l)||(g.oldSelectedIndex=l,g.newSelectedIndex=h&&h.comp&&h.comp.selectedIndex),u.B.fireEvent(this.mainGrid,"onviewchange",g)}}},function(t){s.options.eventPropagation||u.B.stopPropagation(t),n[2]=t.detail,l.apply(s,n,t)})),E&&u.B.addListener(E,"onclick",function(t,e,i){return function(o){
i.apply(t,e,o)}}(this,[i,t],(function(t,e){this.labelClicked=!0})))}}},E.radio.prototype.getDisplayData=function(t){return t},E.radio.prototype.handleClick=function(t,e){var i=t.getElementsByTagName("input")[0];if(!i)return!0;if(this.options.noDisabledOnReadOnly&&this.mainGrid._getEditReadOnly(e,this.colID))return!0;this.mainGrid.options.preventDuplicateFocusedCell&&null!=this.mainGrid.editedCell&&this.mainGrid.editedCell.handleEndEdit();var o=this.mainGrid.dataList._getCellData(e,this.colID),s=o;if(o==this.options.trueValue)return!0;if(i.checked&&(s=this.options.trueValue,this.resetOthers(e),this.options.groupName&&this.mainGrid.radioGroupRepChk[this.options.groupName]&&this.mainGrid.dataList.__setCellData(e,this.options.groupName,this.options.groupValue)),this.mainGrid.dataList.__setCellData(e,this.colID,s),"0"!=t.getAttribute("colMerged")||this.mainGrid.groupbyStatus.grouped||this.setMergedCol(e,this.colID,o,s),o!=s){var r={oldValue:o,newValue:s,colIndex:this.mainGrid.getColumnIndex(this.options.id),rowIndex:e};u.B.fireEvent(this.mainGrid,"onviewchange",r)}return!0},E.radio.prototype.resetOthers=function(t){if(this.options.groupName)for(var e=this.mainGrid.getColumnCount(),i=0;i<e;i++){var o=this.mainGrid.getCellInfo(i);"custom"==o.options.inputType&&(o=o.cellManagerHashByRowIndex[this.mainGrid.dataList.getRealRowIndex(t)]),o!=this&&"radio"==o.options.inputType&&o.options.groupName==this.options.groupName&&this.mainGrid.dataList.__setCellData(t,i,o.options.falseValue)}else if(this.mainGrid.isDrillDown&&this.mainGrid._dataList.options.depthColumn)for(var s=0;s<this.mainGrid.getTotalRow();s++)this.mainGrid._dataList.getCellData(s,this.colID)+""==this.options.trueValue&&this.mainGrid._dataList.setCellData(s,this.colID,this.options.falseValue);else for(s=0;s<this.mainGrid.getDataLength();s++)this.mainGrid.dataList._getCellData(s,this.colID)+""==this.options.trueValue&&this.mainGrid.dataList.__setCellData(s,this.colID,this.options.falseValue)},E.radio.prototype.doDefaultAction=function(t){var e=u.B.getTarget(t);if("none"==this.mainGrid.options.focusMode){for(;e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid.getColumnIndex(e.getAttribute("col_id"))}else{var s=this.mainGrid.getLastFocusedCell();i=s.focusedRowIndex,o=s.focusedColIndex}if(!this.mainGrid._getEditDisabled(i,o)&&!this.mainGrid.___getEditReadOnly(i,o)){var r=this.mainGrid.dataList._getCellData(i,this.colID);("INPUT"==e.tagName.toUpperCase()?e:e.getElementsByTagName("input")[0]).checked=r==this.options.trueValue?this.options.falseValue:this.options.trueValue,this.handleClick(e,i)}},E.radio.prototype.refreshCell=function(){try{if(!this.options.refInitSync||"other"!==this.options.valueType)return;for(var t=this.mainGrid._dataList.getRowCount(),e=0;e<t;e++){this.mainGrid._dataList.getCellData(e,this.colID)!=this.options.trueValue&&this.mainGrid._dataList.setCellData(e,this.colID,this.options.falseValue)}}catch(t){r.w.printStackTrace(t,null,this)}},E.select=function(){},E.select.prototype._initializeCellInfo=function(){try{this.col_index=this.mainGrid.getColumnIndex(this.colID),"auto"===this.options.renderType&&a.D.isMobile()&&!0!==this.options.embeddedInput&&(this.options.embeddedInput=!0)}catch(t){r.w.printStackTrace(t,null,this)}},E.select.prototype._createComponent=function(t){try{if(this.comp)return;var e=this;if(this.xml.setAttribute("class",this.mainGridId+"_select_"+this.colID),this.xml.setAttribute("chooseOption",this.options.chooseOption+""),this.xml.setAttribute("chooseOptionLabel",this.options.chooseOptionLabel),this.xml.setAttribute("chooseOptionValue",this.options.chooseOptionValue),this.xml.setAttribute("allOption",this.options.allOption+""),this.xml.setAttribute("tableRender",this.options.tableRender),this.xml.setAttribute("submenuSize",this.options.submenuSize?this.options.submenuSize:"auto"),this.xml.setAttribute("direction","auto"),this.xml.setAttribute("style",this.style),this.setFirst=!0,
this.hasRef&&!this.useLinkedDataList)WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset",new Function("_this","return "+this.refStr)(this));this.setFirst=!1,this.configOptions.chooseOption=this.options.chooseOption,this.configOptions.chooseOptionLabel=this.options.chooseOptionLabel,this.configOptions.labelWidthAuto=!1,this.configOptions.displayMode=this.options.displayMode,this.configOptions.itemTooltipDisplay=this.options.tooltipDisplayItem?this.options.tooltipDisplayItem:this.options.itemTooltipDisplay,this.configOptions.itemTooltipFormatter=this.options.itemTooltipFormatter,this.options.itemTooltipFormatter&&(this.configOptions._rowIndex=t,this.configOptions._colIndex=this.mainGrid.getColumnIndex(this.colID)),this.configOptions.tooltipTime=this.options.tooltipTime,this.configOptions._scope_obj_uuid=this.options._scope_obj_uuid,this.configOptions.tableRender=this.options.tableRender,this.internal&&(this.options.visibleRowNum&&(this.configOptions.visibleRowNum=this.options.visibleRowNum),this.options.textAlign&&(this.configOptions.textAlign=this.options.textAlign),this.options.itemTableType&&(this.configOptions.itemTableType=this.options.itemTableType),this.options.itemSet&&(this.configOptions.itemSet=this.options.itemSet),this.options.item&&(this.configOptions.item=this.options.item),this.options.gridViewOptions&&(this.configOptions.gridViewOptions=this.options.gridViewOptions));var i=this.internal?this.mainGridId+"_selectbox_"+t+"_"+this.colID+"_"+this.id:this.mainGridId+"_selectbox_"+this.colID;this.internal&&this.options.emptyItem&&(this.configOptions.emptyItem=this.options.emptyItem),this.select=new WebSquare.uiplugin.selectbox(i,this.configOptions,this.xml),this.mainGrid.dom[this.select.id]=this.select,this.comp=this.select,this.select.setSelectedIndex1=function(t,i){void 0!==i&&null!=i||(i={});var o=this.selectedIndex,s=this.getValue(),r=e.mainGrid.getColumnIndex(e.mainGrid.editedCell.id);if(this.setSelectedIndex(t),"oneditend"===e.options.eventPriority){if(!0!==i.skipClose&&(this.closeSubLayer(),e.handleEndEdit()),o!=this.selectedIndex){var a=e.editRowIndex,n={oldValue:s,newValue:this.getValue(),oldSelectedIndex:o,newSelectedIndex:this.selectedIndex,rowIndex:a,colIndex:r};u.B.fireEvent(e.mainGrid,"onviewchange",n)}}else{if(o!=this.selectedIndex){a=e.editRowIndex,n={oldValue:s,newValue:this.getValue(),oldSelectedIndex:o,newSelectedIndex:this.selectedIndex,rowIndex:a,colIndex:r};u.B.fireEvent(e.mainGrid,"onviewchange",n)}!0!==i.skipClose&&(this.closeSubLayer(),e.handleEndEdit())}},this.existGridViewItemsetNode&&(this.select._setSubLayer=this.select.setSubLayer,this.select.setSubLayer=function(t){this._setSubLayer(t),this.itemTable.addKeyDownEventListener((function(t){switch(t.keyCode){case 27:e.handleCancelEdit(t)}}))}),this.select.__openSubLayer=this.select.openSubLayer,this.select.openSubLayer=function(){this.__openSubLayer()},this.select.__closeSubLayer=this.select.closeSubLayer,this.select.closeSubLayer=function(t){this.__closeSubLayer(t),e.mainGrid._setFocusedCell()},this.select._handleClickEvent=this.select.handleClickEvent,this.select.handleClickEvent=function(t){this._handleClickEvent(t),u.B.stopEvent(t),e.handleEndEdit()},this.select._refreshItemset=this.select.refreshItemset,this.select.refreshItemset=function(t){e.resetMatchInfo=!0,!0!==this.refreshStopItemTable&&this._refreshItemset(t)}}catch(t){r.w.printStackTrace(t,null,this)}},E.select.prototype.createSelectbox=function(t,e){this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this._createComponent(e),t.innerHTML=this.select.toHTML();try{!this.select.modelControl.isBinded()&&-1===this.select.selectedIndex&&this.select.getItemCount()>0&&!this.select.options.chooseOption&&this.select.options.allOption}catch(t){}if(this.select.activate(),
this.internal&&"gridViewItemset"!==this.options.itemTableType&&this.comp.setNodeSet(this.initializeInfo.itemSet.nodeset,this.initializeInfo.itemSet.label,this.initializeInfo.itemSet.value),""!=this.options.selectSetter)for(var i=0;i<this.itemArr.length;i++)this.select.addItem(this.itemArr[i].value,this.itemArr[i].label);this._setSize(t),this.select.render.style.border="1px solid "+this.mainGrid.options.selectedCellColor},E.select.prototype._setSize=function(t){try{var e={top:0,left:0,bottom:0,right:0};if(a.D.isIEAllVersion("6 7 8"))WebSquare.style.getComputedStyle(t,"padding")&&(e.left=parseInt(WebSquare.style.getComputedStyle(t,"padding-left"),10),e.right=parseInt(WebSquare.style.getComputedStyle(t,"padding-right"),10),e.top=parseInt(WebSquare.style.getComputedStyle(t,"padding-top"),10),e.bottom=parseInt(WebSquare.style.getComputedStyle(t,"padding-bottom"),10));else{var i=WebSquare.style.getComputedStyle(t);i&&(i.padding||i.paddingTop||i.paddingBottom||i.paddingLeft||i.paddingRight)&&(e.left=parseInt(i.paddingLeft,10),e.right=parseInt(i.paddingRight,10),e.top=parseInt(i.paddingTop,10),e.bottom=parseInt(i.paddingBottom,10))}this.select.setSize(t.clientWidth-(2+e.left+e.right),t.clientHeight-(2+e.top+e.bottom))}catch(t){r.w.printStackTrace(t,null,this)}},E.select.prototype.createItemTable=function(t,e){var i=this;this.existGridViewItemsetNode&&this.select._openOtherLayer(),this.select.setSubLayer();var o=this.select.itemTable;this.existGridViewItemsetNode||(o.addClickEventListener((function(t,e){i.select.setSelectedIndex1(e);var o=i.mainGrid.getLastFocusedCell();if(i.editRowIndex!=o.focusedRowIndex||i.col_index!=o.focusedColIndex||i.options.moveEditModeByChoice||i.mainGrid.isVirtualCursor()||i.mainGrid._setFocusedCell(),i.options.moveEditModeByChoice){var s=i.options.moveEditModeByChoice;switch(s){case"down":i.mainGrid.moveVertical({},s,true);break;case"right":i.mainGrid.moveHorizontal({byApi:!0},s,true)}}})),o.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:if("ul"==this.options.tableRender){var e=this.getSelectedIndex();e=parseInt(e),this.endReached&&(this.endReached=!1,i.mainGrid.editedCell.handleCancelEdit(t),i.mainGrid._setFocusedCell())}else{this.fireClick(t);var o=i.mainGrid.getLastFocusedCell();i.editRowIndex==o.focusedRowIndex&&i.col_index==o.focusedColIndex&&i.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",i.mainGrid.options.keyMoveEditMode)}break;case 13:o=i.mainGrid.getLastFocusedCell();i.editRowIndex!=o.focusedRowIndex||i.col_index!=o.focusedColIndex||i.options.moveEditModeByChoice||(i.mainGrid.options.fastEditMode?"none"==i.mainGrid.options.enterKeyMove||("right"==i.mainGrid.options.enterKeyMove?i.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",i.mainGrid.options.keyMoveEditMode):i.mainGrid.moveVertical(t,t.shiftKey?"up":"down",i.mainGrid.options.keyMoveEditMode)):i.mainGrid.isVirtualCursor()||i.mainGrid._setFocusedCell());break;case 27:i.mainGrid.editedCell.handleCancelEdit(t),i.mainGrid.isVirtualCursor()||i.mainGrid._setFocusedCell()}}))),a.D.isOpera()&&o.event.addListener(o.render,"onkeypress",(function(t){9!=t.keyCode&&27!=t.keyCode||u.B.preventDefault(t)})),this.mainGrid._moveKeyEdit(o.uuid,"keyDownFunc",{itemTable:!0}),WebSquare.WebSquaredoc.itemsetElement.length>0&&WebSquare.WebSquaredoc.itemsetElement[WebSquare.WebSquaredoc.itemsetElement.length-1].id==this.mainGridId+"_selectbox_"+this.colID&&WebSquare.WebSquaredoc.itemsetElement.pop()},E.select.prototype.setInnerHTML=function(t,e,i,o,s){var n=this.mainGrid._getGroupbyDisplayRowIndex(i);if(this.options.embeddedInput){var l=this.mainGrid.getInput(this,t,e);if(l.render.setAttribute("rowindex",i),""==this.options.selectSetter||this.dataComp||(this.initSelectSetter(),l.itemArr=this.itemArr,l.setSelectOptions()),this.hasRef&&!this.dataComp){var h=this.mainGrid.getElemRowIndex(t);l.itemArr=this.getRefItemArr(h),l.setSelectOptions()}if(this.dataComp){var d=this.mainGrid.modelControl.getDataComp(this.dataComp)
;if("linkedDataList"===d.initializeType&&null!=d.conditionInfo&&d.conditionInfo.filterInfo.useRef){var c=d.conditionInfo.targetInfo,p={};for(var g in c){var m=this.mainGrid.modelControl.getDataComp(g);if(m&&null!=m.initializeType&&"dataMap"!==m.initializeType){var f=m.getRowPosition();f!=i&&(p[g]=f,"linkedDataList"===m.initializeType?m._dataList.rowPosition=m.filteredRowIndexArr[i]:m.rowPosition=i)}}for(var b in l.stopRefreshItemTable(!0),d.syncWithParent(),l.stopRefreshItemTable(!1),p){var y=this.mainGrid.modelControl.getDataComp(b);"linkedDataList"===y.initializeType?y._dataList.rowPosition=y.filteredRowIndexArr[p[b]]:y.rowPosition=p[b]}for(var v=d.getAllJSON(),w=[],S=0;S<v.length;S++)w.push({label:v[S][this.itemsetObj.label],value:v[S][this.itemsetObj.value]});l.setNodeSet("",this.itemsetObj.label,this.itemsetObj.value),l.itemArr=w,l.setSelectOptions()}}if(l.setValue(e),!l.setValueNM(e)&&!this.dataComp){var C={};C[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(l.render.getAttribute("rowindex"),o,l.getValue(),null,null,null,C)}if("function"==typeof(I=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id))){this.useCustomFormatter=!0;var x=I.call(this.mainGrid,e,T,n,o);l.dom.label.innerHTML=x}var _=!1;this.mainGrid._getEditDisabled(i,o)?(l.setDisabled(!0),_=!0):l.setDisabled(!1),this.mainGrid.__getEditReadOnly(t,i)?(l.setReadOnly(!0),_=!0):l.setReadOnly(!1),l.dom.select.disabled=!!_,t.removeAttribute("tabIndex")}else{this.initSelectSetter();var I;h=i;if(null==e&&(e=""),"function"==typeof(I=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id))){this.useCustomFormatter=!0;var T=this.getDisplayData(e,h);x=I.call(this.mainGrid,e,T,n,o)}else this.useCustomFormatter=!1,x=this.getData(e,h);var k,D=this.internal?this.mainGridId+"_selectbox_"+i+"_"+this.colID+"_"+this.id:this.mainGridId+"_selectbox_"+this.colID;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var L=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof L&&(this.mainGrid.options.titleFormatter=L,k=L.call(this,i,o,e))}else k=this.mainGrid.options.titleFormatter.call(this,i,o,e)}catch(t){r.w.printStackTrace(t,null,this)}var W,A=k||this.options.title||"";if(A)t.setAttribute("title",A);else if(this.mainGrid.options.titleAuto){var E=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.id])||"";A=""!==e?" title='"+E+" "+e+"'":" title='"+E+WebSquare.language.getMessage("Grid_select")+"'"}if(a.D.isSafari()&&-1!=navigator.userAgent.indexOf("Windows"))if(this.mainGrid.options.plainText&&t.firstChild&&t.firstChild.firstChild)t.firstChild.firstChild.data=x;else t.innerHTML="",(W=document.createElement("nobr")).style.cssText="overflow : hidden; text-overflow:ellipsis; display:block; width:100%;","ul"==this.options.tableRender?W.innerHTML="<a href='#"+D+"_itemTable' onclick='event.returnValue=false; return false;' class='w2selectbox_ul_table_main'"+A+">"+x+"</a>":W.textContent=x,t.appendChild(W);else if(this.mainGrid.options.plainText&&t.firstChild&&t.firstChild.firstChild)t.firstChild.firstChild.data=x;else if("icon"==this.options.viewType)t.innerHTML="",(W=document.createElement("nobr")).style.cssText="overflow : hidden; text-overflow:ellipsis; display:block; width:auto;","ul"==this.options.tableRender?W.innerHTML="<a href='#"+D+"_itemTable' onclick='event.returnValue=false; return false;' class='w2selectbox_ul_table_main'"+A+">"+x+"</a>":W.innerHTML=x,t.appendChild(W);else if("ul"==this.options.tableRender)t.innerHTML="<nobr style='overflow : hidden; text-overflow:ellipsis; display:block; width:auto;'><a href='#"+D+"_itemTable' onclick='event.returnValue=false; return false;' class='w2selectbox_ul_table_main'"+A+">"+x+"</a></nobr>";else{var M=t.firstChild,q="w2grid_select";if(this._checkFastScroll(x,M,q,s&&!0===s.scroll)){var R="string"==typeof x?WebSquare.xml.__decode(x):x;M.textContent=R
}else t.innerHTML="<nobr class='w2grid_select'>"+x+"</nobr>"}var N=this.mainGrid.dataList.getRealRowIndex(i),F=this.mainGrid.getCellOption(N,o,"viewType"),O=this.mainGrid.getColumnOption(this.options.col_id,"dataType");if("icon"==F||""==F&&"own"==O?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_select"),t.setAttribute("editModeEvent",this.options.editModeEventIcon)):"onclick"==this.options.editModeEvent?t.setAttribute("editModeEvent","onclick"):"ondblclick"==this.options.editModeEvent?t.setAttribute("editModeEvent","ondblclick"):"onsecondclick"==this.options.editModeEvent?t.setAttribute("editModeEvent","onsecondclick"):(this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_select"),t.setAttribute("editModeEvent","")),"ul"==this.options.tableRender){var B=this;this.mainGrid.event.addListener(t,"onfocus",this.mainGrid.event.bindAsEventListener(this.mainGrid,(function(t){var e=u.B.getTarget(t);B.mainGrid.lastEvent=t;var o=B.mainGrid.getLastFocusedCell();if((0!=o.focusedColIndex||0!=o.focusedRowIndex)&&(!a.D.isIEAllVersion()||!o.focusedRowIndex||o.focusedRowIndex==i)&&(o.focusedTd==e||B.mainGrid.focusedByApi||B.mainGrid._setFocusedCell(i,e.getAttribute("col_id")),B.mainGrid.focusedByApi=!1,e.childNodes[0]&&e.childNodes[0].childNodes[0])){var s=e.childNodes[0].childNodes[0];"A"==s.tagName&&s.focus()}})))}}},E.select.prototype.setColumnChooseOption=function(t,e){this.options.chooseOption=!0,this.options.chooseOptionValue=t,this.options.chooseOptionLabel=e,this.select&&this.select.changeChooseOption(t,e)},E.select.prototype.showChooseOption=function(t){this.options.chooseOption=t,this.matchInfo=this.setMatchInfo(),this.select&&t?this.select.showChooseOption(t):this.select&&!t&&(this.select.showChooseOption(t),this.select.itemArr.length>1&&0!=this.select.selectedIndex?this.select.selectedIndex-=1:this.select.selectedIndex=0,this.editTd.innerHTML="<nobr>"+this.getData(this.select.getValue(),this.select.selectedIndex)+"</nobr>")},E.select.prototype.getData=function(t,e,i){try{var o,a="",n=this.dataComp;if(this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType){var l=this.itemsetObj.nodeset;l.indexOf("data:")>=0&&(n=l.slice("data:".length))}if(n&&(o=this.mainGrid.modelControl.getDataComp(n)),n&&o){if("linkedDataList"===o.initializeType&&null!=o.conditionInfo&&o.conditionInfo.filterInfo.useRef){var h=o.conditionInfo.targetInfo,d={};for(var u in h){var c=this.mainGrid.modelControl.getDataComp(u);if(c&&null!=c.initializeType&&"dataMap"!==c.initializeType){var p=c.getRowPosition();p!=e&&(d[u]=p,"linkedDataList"===c.initializeType?c._dataList.rowPosition=c.filteredRowIndexArr[e]:c.rowPosition=e)}}for(var g in this.select&&this.select.stopRefreshItemTable(!0),o.syncWithParent(),this.select&&this.select.stopRefreshItemTable(!1),d){var m=this.mainGrid.modelControl.getDataComp(g);"linkedDataList"===m.initializeType?m._dataList.rowPosition=m.filteredRowIndexArr[d[g]]:m.rowPosition=d[g]}}var f=null,b=null,y=null;if("linkedDataList"===o.initializeType)f=o._dataList,b=o.initialRowIndexArr,y=o.initialRowIndexArr;else if("dataList"===o.initializeType){if(f=o,o.options&&o.options.validateAllItemsetData){var v=f.getTotalRow();b=[];for(var w=0;w<v;w++)b.push(w)}else b=f.filteredRowIndexArr;y=f.filteredRowIndexArr}var S=!1;if("linkedDataList"===o.initializeType&&this.select){var C=this.select.getItemCount(),x=this.select.itemArr;0===C?S=!0:1!=C||x[0].label!==this.select._getChooseOptionLabel()&&x[0].label!==this.select.defaultAllOptionLabel?2==C&&x[0].label===this.select._getChooseOptionLabel()&&x[1].label===this.select.defaultAllOptionLabel&&(S=!0):S=!0}if((!this.select||S)&&null!=f)try{var _,I;a="";if(this.internal||this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType)_=this.itemsetObj.label,I=this.itemsetObj.value;else{
var T=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",s.v._XML_NAMESPACE.W2),k=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",s.v._XML_NAMESPACE.W2);T.length>0&&k.length>0&&(_=WebSquare.Elem.api.getAttribute(T[0],"ref"),I=WebSquare.Elem.api.getAttribute(k[0],"ref"))}var D=null!=_?f.bodyIdColIndexMap[_]:f.bodyIdColIndexMap[this.itemsetObj.label],L=null!=I?f.bodyIdColIndexMap[I]:f.bodyIdColIndexMap[this.itemsetObj.value];for(w=0;w<b.length;w++){var W=b[w]*f.cellIdList.length;if(t==f.dataArr[W+L])return a=f.dataArr[W+D],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&"3"!==this.options.displayMode||(a=t),i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a}if(this.selectedIndex>=0&&this.selectedIndex<y.length&&!this.options.chooseOption){a=f.dataArr[y[this.selectedIndex]*f.cellIdList.length+D],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&"3"!==this.options.displayMode||(a=t);W=0;W=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];var A=this.mainGrid._dataList.cellIdList.length,E=this.mainGrid._dataList.bodyIdColIndexMap[this.colID],M=f.dataArr[b[this.selectedIndex]*f.cellIdList.length+L];this.mainGrid._dataList.dataArr[W*A+E]=M}else if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-전체-"}else if(this.options.chooseOption)t==this.options.chooseOptionValue&&(a=this.options.chooseOptionLabel);else if(this.options.selectedData)if(""==t)a="";else{W=0;W=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];A=this.mainGrid._dataList.cellIdList.length,E=this.mainGrid._dataList.bodyIdColIndexMap[this.colID];this.mainGrid._dataList.dataArr[W*A+E]="",a=""}else a=t;return i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a}catch(e){return r.w.printStackTrace(e,null,this),t}var q=!1;for(w=0;w<this.select.itemArr.length;w++)if(this.select.itemArr[w].value==t){q=!0,a=this.select.itemArr[w].label;break}if(!q&&o.options&&o.options.validateAllItemsetData)for(w=0;w<this.select.allItemArr.length;w++)if(this.select.allItemArr[w].value==t){q=!0,a=this.select.allItemArr[w].label;break}if(!q)if(""!=t||-1==this.selectedIndex||this.options.chooseOption)if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-전체-"}else this.options.chooseOption&&t==this.options.chooseOptionValue?a=this.options.chooseOptionLabel:this.options.selectedData||(a=t);else this.select.itemArr.length>0?(a=this.select.itemArr[this.selectedIndex].label,this.mainGrid.dataList.__setCellData(e,this.colID,a)):a=t}else{var R=this.getMatchInfo(e);""!=t||-1==this.selectedIndex||this.options.chooseOption?a=R["SELECT_"+t]:(this.mainGrid.dataList.__setCellData(e,t),a=R["SELECT_"+this.itemArr[this.selectedIndex].label])}if(i&&i.emptyValue&&(""===a||"$blank"==a))a=i.emptyValue;else if(void 0===a||"$blank"==a)return"";return a}catch(t){r.w.printStackTrace(t,null,this)}},E.select.prototype.initSelectSetter=function(){if(0==this.selectSetted&&""!=this.options.selectSetter&&!this.dataComp){this.selectSetted=!0;var t=[];try{this.options.selectSetter=this.options.selectSetter.wq_trim(),this.options.selectSetter.indexOf("(")<0&&(this.options.selectSetter+="()"),t=new Function("return "+this.options.selectSetter)()}catch(t){r.w.printStackTrace(t)}this.itemArr=t,this.matchInfo=[];for(var e=0;e<t.length;e++){var i=t[e];null==i.value&&(i.value=""),
this.matchInfo["SELECT_"+i.value]=i.label}}},E.select.prototype.setEditMode=function(t,e){if(!this.options.embeddedInput){if(this.dataComp){var i=this.mainGrid.modelControl.getDataComp(this.dataComp);i&&"linkedDataList"===i.initializeType&&null!=i.conditionInfo&&i.conditionInfo.filterInfo.useRef&&i.syncWithParent()}if(!0!==this._init?(this.createSelectbox(t,e),this._init=!0):(t.innerHTML="",this.mainGrid.cellMergeInfo&&this._setSize(t),t.appendChild(this.select.render),this.options.itemTooltipFormatter&&(this.select.options._rowIndex=e)),this.mainGrid.directItemChoiceKeyObj.select){this.editTd=t,this.editRowIndex=e,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.select.setValue(this.mainGrid.dataList._getCellData(e,this.colID));var o=this.select.findItemStartedWithKeyChar(this.mainGrid.directItemChoiceKeyObj.select);if(this.mainGrid.dataList.__setCellData(e,this.colID,this.select.getValue()),this.mainGrid.directItemChoiceKeyObj.select=null,this.options.moveFocusByChoice&&o&&this.moveFocus(this.editRowIndex,this.colID),o)return;this.mainGrid.editedCell=this.mainGrid.getCellInfo(t),t.innerHTML="",t.appendChild(this.select.render)}if(this.select.itemTable||this.mainGrid.directItemChoiceKeyObj.select||(this.existGridViewItemsetNode&&(this.editTd=t),this.createItemTable(t,e)),this.hasRef&&!this.dataComp){var s=this.mainGrid.getElemRowIndex(t);this.select.itemArr=this.getRefItemArr(s),this.select.itemTable.show(),this.select.setSelectOptions()}if(this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.select.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),0==this.select.getItemCount()&&(this.select.selectedIndex=-1,this.select.dom.label.innerHTML=""),this.existGridViewItemsetNode&&this.select.gridViewOptions.width)this.select.openSubLayer();else{var r=t.clientWidth-2,n={top:0,left:0,bottom:0,right:0};if(a.D.isIEAllVersion("6 7 8"))WebSquare.style.getComputedStyle(t,"padding")&&(n.left=parseInt(WebSquare.style.getComputedStyle(t,"padding-left"),10),n.right=parseInt(WebSquare.style.getComputedStyle(t,"padding-right"),10),n.top=parseInt(WebSquare.style.getComputedStyle(t,"padding-top"),10),n.bottom=parseInt(WebSquare.style.getComputedStyle(t,"padding-bottom"),10));else(u=WebSquare.style.getComputedStyle(t))&&(u.padding||u.paddingTop||u.paddingBottom||u.paddingLeft||u.paddingRight)&&(n.left=parseInt(u.paddingLeft,10),n.right=parseInt(u.paddingRight,10),n.top=parseInt(u.paddingTop,10),n.bottom=parseInt(u.paddingBottom,10));this.select.setSize(t.clientWidth-(2+n.left+n.right),t.clientHeight-(2+n.top+n.bottom)),this.select.itemTable.setStyle("width",t.clientWidth-4+"px"),this.select.openSubLayer();var l=this.mainGrid.render.offsetWidth,h=this.select.itemTable.render.offsetWidth,d=this.select.itemTable.render.firstChild.offsetWidth;if(h-2>r&&(r=h-2),this.select.itemTable.render.clientHeight>=this.select.itemTable.render.scrollHeight||this.select.getItemCount()<=this.select.options.visibleRowNum)this.select.itemTable.render.firstChild.style.width=r+"px",l>h&&d<h&&this.select.itemTable.render.firstChild.firstChild&&this.select.itemTable.render.firstChild.firstChild.offsetWidth<=r&&this.select.itemTable.setStyle("width",r+"px");else{this.select.itemTable.render.firstChild.style.width=r-17+"px";var u;n={top:0,left:0,bottom:0,right:0};if(a.D.isIEAllVersion("6 7 8"))WebSquare.style.getComputedStyle(t,"padding")&&(n.left=parseInt(WebSquare.style.getComputedStyle(t,"padding-left"),10),n.right=parseInt(WebSquare.style.getComputedStyle(t,"padding-right"),10),n.top=parseInt(WebSquare.style.getComputedStyle(t,"padding-top"),10),n.bottom=parseInt(WebSquare.style.getComputedStyle(t,"padding-bottom"),10));else(u=WebSquare.style.getComputedStyle(t))&&(u.padding||u.paddingTop||u.paddingBottom||u.paddingLeft||u.paddingRight)&&(n.left=parseInt(u.paddingLeft,10),n.right=parseInt(u.paddingRight,10),n.top=parseInt(u.paddingTop,10),
n.bottom=parseInt(u.paddingBottom,10));this.select.setSize(t.clientWidth-(2+n.left+n.right),t.clientHeight-(2+n.top+n.bottom)),l>h&&d+17<=h-2&&this.select.itemTable.render.firstChild.firstChild.offsetWidth<=r&&this.select.itemTable.setStyle("width",r+"px")}}t.style.textOverflow="ellipsis"}},E.select.prototype._handleEndEdit_common=function(t){try{this.select.closeSubLayer();var e=this.select.getValue();try{this.select.render.parentNode&&this.editTd.removeChild(this.select.render)}catch(t){return}this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i={};i[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,i)}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},E.select.prototype._handleEndEdit_focus=function(){this.options.moveFocusByChoice&&this.moveFocus(this.editRowIndex,this.colID)},E.select.prototype._getEditedValue=function(t){return this.select.getValue()},E.select.prototype._handleCancelEdit=function(t){this.select.closeSubLayer();var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.editTd.removeChild(this.select.render),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID))},E.select.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},E.select.prototype.moveFocus=function(t,e){if(this.options.moveFocusByChoice)switch(this.options.moveFocusByChoice){case"down":this.mainGrid._setFocusedCell(t+1,e,!1);break;case"right":var i=this.mainGrid.getColumnIndex(e)+1;this.mainGrid._setFocusedCell(t,i,!1)}},E.select.prototype.refreshCell=function(){try{if(!this.options.selectedData)return;if(!this.dataComp)return;var t=this.mainGrid.modelControl.getDataComp(this.dataComp);if(!t)return;var e,i=null,o=null;if("linkedDataList"===t.initializeType?(i=t._dataList,o=t.initialRowIndexArr):"dataList"===t.initializeType&&(o=(i=t).filteredRowIndexArr),null==i)return;if(this.internal)this.itemsetObj.label,e=this.itemsetObj.value;else{var a=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",s.v._XML_NAMESPACE.W2),n=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",s.v._XML_NAMESPACE.W2);a.length>0&&n.length>0&&(WebSquare.Elem.api.getAttribute(a[0],"ref"),e=WebSquare.Elem.api.getAttribute(n[0],"ref"))}var h,d=null!=e?i.bodyIdColIndexMap[e]:i.bodyIdColIndexMap[this.itemsetObj.value];h=this.mainGrid.groupbyStatus.grouped?this.mainGrid.groupbyStatus.groupbyRowIndexArr:this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr:this.mainGrid._dataList.filteredRowIndexArr;for(var u=this.mainGrid._dataList.cellIdList.length,c=this.mainGrid._dataList.bodyIdColIndexMap[this.id],p=0;p<h.length;p++){var g=h[p];if("object"!==(0,l.Z)(g)){var m=this.mainGrid._dataList.dataArr[g*u+c];if(!(this.options.allOption&&m==WebSquare.allValue||this.options.chooseOption&&m==this.options.chooseOptionValue||!(""!==m||this.selectedIndex>=0))){var f=!1;if("linkedDataList"===t.initializeType&&null!=t.conditionInfo&&t.conditionInfo.filterInfo.useRef){var b=t.conditionInfo.targetInfo,y={};for(var v in b){var w=this.mainGrid.modelControl.getDataComp(v);if(null!=w.initializeType&&"dataMap"!=w.initializeType){var S=w.getRowPosition();S!=p&&(y[v]=S,"linkedDataList"===w.initializeType?w._dataList.rowPosition=w.filteredRowIndexArr[p]:w.rowPosition=p)}}var C=t.getBroadcast();for(var x in t.setBroadcast(!1),t.syncWithParent(),t.setBroadcast(C),y){var _=this.mainGrid.modelControl.getDataComp(x);"linkedDataList"===_.initializeType?_._dataList.rowPosition=_.filteredRowIndexArr[y[x]]:_.rowPosition=y[x]}o=t.initialRowIndexArr}for(var I=0;I<o.length;I++)if(m==i.dataArr[o[I]*i.cellIdList.length+d]){f=!0;break}if(!f){var T="";this.selectedIndex>=0&&this.selectedIndex<o.length&&!this.options.chooseOption&&(T=i.dataArr[o[this.selectedIndex]*i.cellIdList.length+d]),this.mainGrid._dataList.dataArr[g*u+c]=T}}}}}catch(t){r.w.printStackTrace(t,null,this)}},E.checkcombobox=function(){},
E.checkcombobox.prototype._initializeCellInfo=function(){try{this.separator=this.options.separator||" "}catch(t){r.w.printStackTrace(t,null,this)}},E.checkcombobox.prototype.setInnerHTML=function(t,e,i,o,s){null==e&&(e=""),t.innerHTML="<nobr>"+this.getData(e,i)+"</nobr>";var n,l=this.mainGrid.dataList.getRealRowIndex(i),h=this.mainGrid.getCellOption(l,o,"viewType"),d=this.mainGrid.getColumnOption(this.options.col_id,"dataType");if("icon"==h||""==h&&"own"==d?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_checkcombobox"),t.setAttribute("editModeEvent",this.options.editModeEventIcon)):"onclick"==this.options.editModeEvent?t.setAttribute("editModeEvent","onclick"):(this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_checkcombobox"),t.setAttribute("editModeEvent","")),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var u=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof u&&(this.mainGrid.options.titleFormatter=u,n=u.call(this,i,o,e))}else n=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",n)}catch(t){r.w.printStackTrace(t,null,this)}},E.checkcombobox.prototype.getData=function(t,e,i){try{var o="";t=t.split(this.separator);var a,n,l=[],h=this.dataComp;if(this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType){var d=this.itemsetObj.nodeset;d.indexOf("data:")>=0&&(h=d.slice("data:".length))}if(h&&(n=this.mainGrid.modelControl.getDataComp(h)),h&&n){if("linkedDataList"===n.initializeType&&null!=n.conditionInfo&&n.conditionInfo.filterInfo.useRef){var u=n.conditionInfo.targetInfo,c={};for(var p in u){var g=this.mainGrid.modelControl.getDataComp(p);if(null!=g.initializeType&&"dataMap"!=g.initializeType){var m=g.getRowPosition();m!=e&&(c[p]=m,"linkedDataList"===g.initializeType?g._dataList.rowPosition=g.filteredRowIndexArr[e]:g.rowPosition=e)}}var f=n.getBroadcast();for(var b in n.setBroadcast(!1),n.syncWithParent(),n.setBroadcast(f),c){var y=this.mainGrid.modelControl.getDataComp(b);"linkedDataList"===y.initializeType?y._dataList.rowPosition=y.filteredRowIndexArr[c[b]]:y.rowPosition=c[b]}}var v=null,w=null;if("linkedDataList"===n.initializeType?(v=n._dataList,w=n.initialRowIndexArr):"dataList"===n.initializeType&&(w=(v=n).filteredRowIndexArr),!this.checkcombobox&&null!=v)try{var S,C;o="";if(this.internal||this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType)S=this.itemsetObj.label,C=this.itemsetObj.value;else{var x=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",s.v._XML_NAMESPACE.W2),_=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",s.v._XML_NAMESPACE.W2);0!=x.length&&0!=_.length&&(S=WebSquare.Elem.api.getAttribute(x[0],"ref"),C=WebSquare.Elem.api.getAttribute(_[0],"ref"))}for(var I=v.bodyIdColIndexMap[S],T=v.bodyIdColIndexMap[C],k=0;k<w.length;k++)for(var D=w[k]*v.cellIdList.length,L=0;L<t.length;L++)t[L]==v.dataArr[D+T]&&(o=v.dataArr[D+I],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?o=t[L]+this.options.delimiter+o:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?o=o+this.options.delimiter+t[L]:"value"!==this.options.displayMode&&3!=this.options.displayMode||(o=t[L]),i&&i.emptyValue&&(""===o||"$blank"==o)?o=i.emptyValue:void 0!==o&&"$blank"!=o||(o=""),l.push(o));if(l.length>0)return l.join(this.separator);if(this.options.allOption&&t==WebSquare.allValue)o=WebSquare.language.getMessage("Grid_all")||"-전체-";else if(this.options.chooseOption&&t==this.options.chooseOptionValue)o=this.options.chooseOptionLabel;else if(this.options.selectedData)if(""==t)o="";else{D=0;D=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];var W=this.mainGrid._dataList.cellIdList.length,A=this.mainGrid._dataList.bodyIdColIndexMap[this.id];this.mainGrid._dataList.dataArr[D*W+A]="",o=""}else o=t
;return i&&i.emptyValue&&(""===o||"$blank"==o)?o=i.emptyValue:void 0!==o&&"$blank"!=o||(o=""),o}catch(e){return r.w.printStackTrace(e,null,this),t}var E=!1;a={};for(k=0;k<this.checkcombobox.itemArr.length;k++)for(L=0;L<t.length;L++)this.checkcombobox.itemArr[k].value==t[L]&&(l.push(this.checkcombobox.itemArr[k].label),a[k+"_"]=!0,E=!0);if(!E){if(""==l&&1==this.options.chooseOption){if(o=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef)(q=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef))&&(o=q);o=WebSquare.xml.decode(o).replace("&nbsp;"," ")}else this.options.selectedData||(o=t);l.push(o),a=null}o=l.join(this.separator)}else{var M=this.getMatchInfo(e);for(E=!1,k=0;k<t.length;k++)void 0!==(o=M["CHECKCOMBOBOX_"+t[k]])&&(l.push(o),E=!0);if(E){if(this.options.checkcomboboxRangeSeparator&&this.checkcombobox){a={};for(k=0;k<this.checkcombobox.itemArr.length;k++)for(L=0;L<t.length;L++)this.checkcombobox.itemArr[k].value==t[L]&&(a[k+"_"]=!0)}}else{if(""==l&&1==this.options.chooseOption){var q;if(o=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef)(q=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef))&&(o=q);o=WebSquare.xml.decode(o).replace("&nbsp;"," ")}else this.options.selectedData||(o=t);l.push(o)}o=l.join(this.separator)}if(i&&i.emptyValue&&(""===o||"$blank"==o))o=i.emptyValue;else if(void 0===o||"$blank"==o)return"";return this.options.checkcomboboxRangeSeparator&&this.checkcombobox&&a?this.checkcombobox._getRangeText(this.checkcombobox.itemArr,this.checkcombobox.itemArr.length,this.separator,a):o}catch(t){r.w.printStackTrace(t,null,this)}},E.checkcombobox.prototype._createComponent=function(t){try{if(this.comp)return;this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this.xml.setAttribute("class",this.mainGridId+"_checkcombobox_"+this.colID),this.xml.setAttribute("chooseOption",this.options.chooseOption+""),this.xml.setAttribute("chooseOptionLabel",this.options.chooseOptionLabel),this.xml.setAttribute("allOption",this.options.allOption+""),"column"===this.options.submenuSize?this.xml.setAttribute("submenuSize","column"):this.xml.setAttribute("submenuSize","auto"),this.xml.setAttribute("style",this.style),this.xml.setAttribute("disabled",this.mainGrid.getDisabled("cell",this.mainGrid._getGroupbyDisplayRowIndex(t),this.colID)),this.xml.setAttribute("useDrag",this.options.checkcomboboxUseDrag),this.xml.setAttribute("useEdit",this.options.checkcomboboxUseEdit),this.xml.setAttribute("rangeSeparator",this.options.checkcomboboxRangeSeparator),this.xml.setAttribute("validateOnInput",this.options.checkcomboboxValidateOnInput),this.options.checkcomboboxVisibleRowNum>1&&this.xml.setAttribute("visibleRowNum",this.options.checkcomboboxVisibleRowNum),this.options.checkcomboboxVisibleColNum>1&&this.xml.setAttribute("visibleColNum",this.options.checkcomboboxVisibleColNum),this.options.checkcomboboxVisibleColMax>1&&this.xml.setAttribute("visibleColMax",this.options.checkcomboboxVisibleColMax),this.configOptions.separator=this.separator,this.configOptions._scope_obj_uuid=this.options._scope_obj_uuid,this.existGridViewItemsetNode&&!this.configOptions.submenuSize&&(this.configOptions.submenuSize="auto"),this.internal&&(this.options.itemTableType&&(this.configOptions.itemTableType=this.options.itemTableType),this.options.itemSet&&(this.configOptions.itemSet=this.options.itemSet),this.options.item&&(this.configOptions.item=this.options.item),this.options.gridViewOptions&&(this.configOptions.gridViewOptions=this.options.gridViewOptions)),this.checkcombobox=new WebSquare.uiplugin.checkcombobox(this.mainGridId+"_checkcombobox_"+this.id,this.configOptions,this.xml),this.comp=this.checkcombobox;var e=this;this.checkcombobox.__closeSubLayer=this.checkcombobox.closeSubLayer,this.checkcombobox.closeSubLayer=function(){this.__closeSubLayer(),e.handleEndEdit()},
this.checkcombobox.toggle=function(){if(this.isOpen){var i=this.getValue(),o=this.getInfoArray();this.__closeSubLayer();var s=this.getValue(),r=e.mainGrid.getColumnIndex(e.options.id);if(i!=s){var a={oldInfo:o,newInfo:this.getInfoArray(),oldValue:i,newValue:s,rowIndex:t,colIndex:r};u.B.fireEvent(e.mainGrid,"onviewchange",a)}e.handleEndEdit()}else this.openSubLayer()},this.checkcombobox._parent_uuid=this.mainGrid.uuid}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},E.checkcombobox.prototype.setEditMode=function(t,e){try{if(!0!==this._init){if(this._createComponent(e),t.innerHTML=this.checkcombobox.toHTML(),this.checkcombobox.activate(),this.internal&&"gridViewItemset"!==this.options.itemTableType&&this.comp.setNodeSet(this.initializeInfo.itemSet.nodeset,this.initializeInfo.itemSet.label,this.initializeInfo.itemSet.value),this.checkcombobox.setSize(t.clientWidth-2,t.clientHeight-2),this.checkcombobox.setSubLayer(),!this.existGridViewItemsetNode){var i=this.checkcombobox.itemTable,o=this;i.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:o.checkcombobox.closeSubLayer(),o.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",o.mainGrid.options.keyMoveEditMode);break;case 13:o.mainGrid.options.fastEditMode?"none"==o.mainGrid.options.enterKeyMove||("right"==o.mainGrid.options.enterKeyMove?o.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",o.mainGrid.options.keyMoveEditMode):o.mainGrid.moveVertical(t,t.shiftKey?"up":"down",o.mainGrid.options.keyMoveEditMode)):o.checkcombobox.closeSubLayer();break;case 27:o.mainGrid.editedCell.handleCancelEdit(t)}})),this.mainGrid._moveKeyEdit(i.uuid,"keyDownFunc",{itemTable:!0})}this._init=!0}else t.innerHTML="",this.mainGrid.cellMergeInfo&&this.checkcombobox.setSize(t.clientWidth-2,t.clientHeight-2),t.appendChild(this.checkcombobox.render);if(this.hasRef&&!this.dataComp){var s=this.mainGrid.getElemRowIndex(t);this.checkcombobox.itemArr=this.getRefItemArr(s),this.checkcombobox.setSelectOptions()}this.existGridViewItemsetNode?(this.checkcombobox.openSubLayer(),this.checkcombobox.setValue(this.mainGrid.dataList._getCellData(e,this.colID))):(this.checkcombobox.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),this.checkcombobox.openSubLayer()),this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t);var a=this.checkcombobox.itemTable.render.firstChild.clientWidth;a<t.clientWidth-2&&(a=t.clientWidth-2),a<this.checkcombobox.itemTable.render.offsetWidth-2&&(a=this.checkcombobox.itemTable.render.offsetWidth-2),this.checkcombobox.setSize(t.clientWidth-2,t.clientHeight-2),this.checkcombobox.setItemTable(),t.style.textOverflow="ellipsis"}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},E.checkcombobox.prototype._handleEndEdit_common=function(t){try{this.checkcombobox.__closeSubLayer&&this.checkcombobox.__closeSubLayer();var e=this.checkcombobox.getValue();try{this.editTd.removeChild(this.checkcombobox.render)}catch(t){return}this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i={};i[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,i)}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},E.checkcombobox.prototype._handleEndEdit_focus=function(){this.mainGrid._setFocusedCell()},E.checkcombobox.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},E.checkcombobox.prototype._handleCancelEdit=function(t){this.checkcombobox.__closeSubLayer();var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid._setFocusedCell()},E.checkcombobox.prototype._getEditedValue=function(t){return this.checkcombobox.getValue()},E.checkcombobox.prototype.refreshItemArr=function(t){var e=WebSquare.WebSquareparser.parseChoices(this.xml,"");if(e.length>0?this.itemArr=e:this.itemArr=this.modelControl.getItemsetData(),
1==this.options.allOption){var i=WebSquare.language.getMessage("Grid_all")||"-전체-";this.itemArr=[{label:i,value:WebSquare.allValue}].concat(this.itemArr)}},E.autoComplete=function(){},E.autoComplete.prototype.setInnerHTML=function(t,e,i,o,s){var n;null==e&&(e="");var l=this.mainGrid._getGroupbyDisplayRowIndex(i),h=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id);if("function"==typeof h){this.useCustomFormatter=!0;var d=this.getDisplayData(e,i);n=h.call(this.mainGrid,e,d,l,o)}else{this.useCustomFormatter=!1,n=this.getData(e,i);var c=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;n&&this.formatter&&c&&(n=this.formatter.format(n))}var p=this.mainGrid.dataList.getRealRowIndex(i),g=this.mainGrid.getCellOption(p,o,"viewType");if("icon"==g&&"true"==this.options.viewTypeIconImage){t.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px; width:100%; table-layout:fixed;'>","<td col_id='"+this.colID+"' rowIndex='"+i+"' colIndex='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_autoComplete_table' style='width:90%; overflow:hidden; text-overflow:ellipsis;'>","<nobr>"+n+"</nobr>","</td>","<td col_id='"+this.colID+"' rowIndex='"+i+"'  colIndex='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_autoComplete_img'>","<div class='"+this.mainGrid.options.bodyTdClass+"_autoComplete_div_img' />","</td>","</table>"].join("");var m=this,f=t,b=t.getElementsByTagName("div")[0];u.B.addListener(b,"onclick",(function(t){m.mainGrid._getEditDisabled(i,o)||m.mainGrid.___getEditReadOnly(i,o)||(m.autoCompleteImageClicked=!0,m.options.directOpen&&(m.mainGrid.__setFocusedCell(t,f),m.mainGrid.setEditMode(f)))}))}else{t.innerHTML="<nobr>"+n+"</nobr>";var y,v=this.mainGrid.getColumnOption(this.options.col_id,"dataType");if("icon"==g||""==g&&"own"==v?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_autoComplete"),t.setAttribute("editModeEvent",this.options.editModeEventIcon)):"onclick"==this.options.editModeEvent?t.setAttribute("editModeEvent","onclick"):(this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_autoComplete"),t.setAttribute("editModeEvent","")),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var w=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof w&&(this.mainGrid.options.titleFormatter=w,y=w.call(this,i,o,e))}else y=this.mainGrid.options.titleFormatter.call(this,i,o,n);t.setAttribute("title",y)}catch(t){r.w.printStackTrace(t,null,this)}}},E.autoComplete.prototype._initializeCellInfo=function(t){try{"useData"==this.options.noResult&&(this.useDataInfo={})}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},E.autoComplete.prototype.getData=function(t,e,i){try{var o,a="",n=this.dataComp;if(this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType){var l=this.itemsetObj.nodeset;l.indexOf("data:")>=0&&(n=l.slice("data:".length))}if(n&&(o=this.mainGrid.modelControl.getDataComp(n)),n&&o){if("linkedDataList"===o.initializeType&&null!=o.conditionInfo&&o.conditionInfo.filterInfo.useRef){var h=o.conditionInfo.targetInfo,d={};for(var u in h){var c=this.mainGrid.modelControl.getDataComp(u);if(null!=c.initializeType&&"dataMap"!=c.initializeType){var p=c.getRowPosition();p!=e&&(d[u]=p,"linkedDataList"===c.initializeType?c._dataList.rowPosition=c.filteredRowIndexArr[e]:c.rowPosition=e)}}for(var g in o.syncWithParent(),d){var m=this.mainGrid.modelControl.getDataComp(g);"linkedDataList"===m.initializeType?m._dataList.rowPosition=m.filteredRowIndexArr[d[g]]:m.rowPosition=d[g]}}var f=null,b=null,y=null;if("linkedDataList"===o.initializeType)f=o._dataList,b=o.initialRowIndexArr,y=o.initialRowIndexArr;else if("dataList"===o.initializeType){if(f=o,o.options&&o.options.validateAllItemsetData){var v=f.getTotalRow();b=[];for(var w=0;w<v;w++)b.push(w)}else b=f.filteredRowIndexArr;y=f.filteredRowIndexArr}if(!this.autoComplete&&null!=f)try{var S,C;a=""
;if(this.internal||this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType)S=this.itemsetObj.label,C=this.itemsetObj.value;else{var x=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",s.v._XML_NAMESPACE.W2),_=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",s.v._XML_NAMESPACE.W2);x.length>0&&_.length>0&&(S=WebSquare.Elem.api.getAttribute(x[0],"ref"),C=WebSquare.Elem.api.getAttribute(_[0],"ref"))}var I=null!=S?f.bodyIdColIndexMap[S]:f.bodyIdColIndexMap[this.itemsetObj.label],T=null!=C?f.bodyIdColIndexMap[C]:f.bodyIdColIndexMap[this.itemsetObj.value];for(w=0;w<b.length;w++){var k=b[w]*f.cellIdList.length;if(t==f.dataArr[k+T])return a=f.dataArr[k+I],"value delim label"===this.options.displayMode||1==this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||2==this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&3!=this.options.displayMode||(a=t),i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a}if(this.selectedIndex>=0&&this.selectedIndex<y.length&&!this.options.chooseOption)a=f.dataArr[y[this.selectedIndex]*f.cellIdList.length+I],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&"3"!==this.options.displayMode||(a=t);else if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-전체-"}else if(this.options.chooseOption&&t==this.options.chooseOptionValue)a=this.options.chooseOptionLabel;else if(this.options.selectedData)if(""==t)a="";else{k=0;k=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];var D=this.mainGrid._dataList.cellIdList.length,L=this.mainGrid._dataList.bodyIdColIndexMap[this.colID];this.mainGrid._dataList.dataArr[k*D+L]="",a=""}else a=t;return i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a}catch(e){return r.w.printStackTrace(e,null,this),t}var W=!1;for(w=0;w<this.autoComplete.itemArr.length;w++)if(this.autoComplete.itemArr[w].value==t){W=!0,a=this.autoComplete.itemArr[w].label;break}if(!W&&o.options&&o.options.validateAllItemsetData)for(w=0;w<this.autoComplete.allItemArr.length;w++)if(this.autoComplete.allItemArr[w].value==t){W=!0,a=this.autoComplete.allItemArr[w].label;break}if(!W)if(""!=t||-1==this.selectedIndex||this.options.chooseOption)if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-전체-"}else this.options.chooseOption&&t==this.options.chooseOptionValue?a=this.options.chooseOptionLabel:this.options.selectedData||(a=t);else a=this.autoComplete.itemArr[this.selectedIndex].label,this.mainGrid.dataList.__setCellData(e,this.colID,a)}else{var A=this.getMatchInfo(e);"useData"==this.options.noResult&&(this.useDataInfo["AUTOCOMPLETE_"+t]||(this.useDataInfo["AUTOCOMPLETE_"+t]=t),A["AUTOCOMPLETE_"+t]||(this.matchInfo["AUTOCOMPLETE_"+t]=t,this.itemArr=[{label:t,value:""}].concat(this.itemArr))),a=A["AUTOCOMPLETE_"+t]}if(i&&i.emptyValue&&(""===a||"$blank"==a))a=i.emptyValue;else if(void 0===a||"$blank"==a)return"";return a}catch(t){r.w.printStackTrace(t,null,this)}return t},E.autoComplete.prototype._createComponent=function(t){try{if(this.comp)return;if(this.options.disableEdit?this.style="position:relative;left:0px;top:0px;":this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this.xml.setAttribute("class",this.mainGridId+"_autoComplete_"+this.colID),this.xml.setAttribute("style",this.style),this.configOptions={},this.options.interactionMode&&(this.configOptions.interactionMode=this.options.interactionMode),this.options.submission&&(this.configOptions.submission=this.options.submission),
this.options.sortOption&&(this.configOptions.sortOption=this.options.sortOption),this.options.displayMode&&(this.configOptions.displayMode=this.options.displayMode),this.options.search&&(this.configOptions.search=this.options.search),this.options.searchTarget&&(this.configOptions.searchTarget=this.options.searchTarget),this.options.useKeywordHighlight&&(this.configOptions.useKeywordHighlight=this.options.useKeywordHighlight),this.options.submenuSize&&(this.configOptions.submenuSize=this.options.submenuSize),this.options.searchTarget&&(this.configOptions.searchTarget=this.options.searchTarget),this.options.useKeywordHighlight&&(this.configOptions.useKeywordHighlight=this.options.useKeywordHighlight),this.options.allOption&&(this.configOptions.allOption=this.options.allOption),this.options.chooseOptionLabel&&(this.configOptions.chooseOptionLabel=this.options.chooseOptionLabel),this.options.noResult&&(this.configOptions.noResult=this.options.noResult),this.options.disableEdit&&(this.configOptions.disableEdit=this.options.disableEdit),a.D.isIEAllVersion()&&this.xml.removeAttribute("readOnly"),this.internal&&(this.options.displayFormatter&&(this.configOptions.displayFormatter=this.options.displayFormatter),this.options.itemTableType&&(this.configOptions.itemTableType=this.options.itemTableType),this.options.itemSet&&(this.configOptions.itemSet=this.options.itemSet),this.options.item&&(this.configOptions.item=this.options.item),this.options.gridViewOptions&&(this.configOptions.gridViewOptions=this.options.gridViewOptions),this.options.caseSensitive&&(this.configOptions.caseSensitive=this.options.caseSensitive)),this.existGridViewItemsetNode&&!this.configOptions.submenuSize&&(this.configOptions.submenuSize="auto"),this.hasRef)this.targetRowIndex=t,WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset",new Function("_this","return "+this.refStr)(this));this.configOptions._scope_obj_uuid=this.options._scope_obj_uuid,this.autoComplete=new WebSquare.uiplugin.autoComplete(this.mainGridId+"_autoComplete_"+t+"_"+this.colID+"_"+this.id,this.configOptions,this.xml),this.autoComplete.options.disabled=!1,this.comp=this.autoComplete,this.internal&&"gridViewItemset"!==this.options.itemTableType&&this.comp.setItemSet(this.initializeInfo.itemSet.nodeset,this.initializeInfo.itemSet.label,this.initializeInfo.itemSet.value);var e=this;this.autoComplete._handleClickEvent=this.autoComplete.handleClickEvent,this.autoComplete.handleClickEvent=function(t){this._handleClickEvent(t),u.B.stopEvent(t)},this.existGridViewItemsetNode?(this.autoComplete._setSubLayer=this.autoComplete.setSubLayer,this.autoComplete.setSubLayer=function(t){this._setSubLayer(t);var i=this.itemTable;i.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:this.fireClick(t),e.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",e.mainGrid.options.keyMoveEditMode);break;case 27:e.handleCancelEdit(t)}})),i.addClickEventListener((function(t,i){e.autoComplete.dom.input.value=e.autoComplete.viewArr[i].label,e.autoComplete.selectedText=e.autoComplete.viewArr[i].orgLabel,e.autoComplete.selectedValue=e.autoComplete.viewArr[i].value;var o=e.autoComplete.selectedText+"|"+e.autoComplete.selectedValue;i=e.autoComplete.findinItemArr(o,"all");e.autoComplete.setSelectedIndex1(i),e.autoComplete.editmode=!1,e.handleEndEdit()}))}):(this.autoComplete._setSubLayer=this.autoComplete.setSubLayer,this.autoComplete.setSubLayer=function(t){this._setSubLayer(t);var i=this.itemTable;i.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:this.fireClick(t),e.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",e.mainGrid.options.keyMoveEditMode);break;case 13:e.mainGrid.options.fastEditMode&&("none"==e.mainGrid.options.enterKeyMove||("right"==e.mainGrid.options.enterKeyMove?e.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",e.mainGrid.options.keyMoveEditMode):e.mainGrid.moveVertical(t,t.shiftKey?"up":"down",e.mainGrid.options.keyMoveEditMode)));break;case 27:
e.handleCancelEdit(t)}})),i.addClickEventListener((function(t,i){e.autoComplete.dom.input.value=e.autoComplete.viewArr[i].label,e.autoComplete.selectedText=e.autoComplete.viewArr[i].orgLabel,e.autoComplete.selectedValue=e.autoComplete.viewArr[i].value;var o=e.autoComplete.selectedText+"|"+e.autoComplete.selectedValue;i=e.autoComplete.findinItemArr(o,"all");e.autoComplete.setSelectedIndex1(i),e.autoComplete.editmode=!1,e.handleEndEdit(),e.options.directOpen&&e.mainGrid._setFocusedCell()})),e.mainGrid._moveKeyEdit(i.uuid,"keyDownFunc",{itemTable:!0})}),this.autoComplete.showEditMode=function(t){try{t?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):(this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible")}catch(t){}},this.autoComplete._inputKeyDown=this.autoComplete.inputKeyDown,this.autoComplete.inputKeyDown=function(t,i){27==t.keyCode||(e.autoComplete._inputKeyDown(t,i),13===t.keyCode&&e.options.directOpen&&u.B.stopPropagation(t))},this.mainGrid._moveKeyEdit(this.autoComplete.uuid,"_inputKeyDown",{skipVertical:!0}),this.autoComplete.setSelectedIndex1=function(t){var i=this.selectedIndex,o=this.getValue();if(this.setSelectedIndex(t),i!=this.selectedIndex){var s=e.mainGrid.getColumnIndex(e.options.id),r=e.editRowIndex,a={oldValue:o,newValue:this.getValue(),oldSelectedIndex:i,newSelectedIndex:this.selectedIndex,rowIndex:r,colIndex:s};u.B.fireEvent(e.mainGrid,"onviewchange",a)}this.closeSubLayer(),e.editTd&&e.handleEndEdit(),e.existGridViewItemsetNode&&e.options.directOpen&&e.mainGrid._setFocusedCell()},this.autoComplete._refreshItemset=this.autoComplete.refreshItemset,this.autoComplete.refreshItemset=function(t){"gridViewItemset"!==this.options.itemTableType&&(e.matchInfo=e.setMatchInfo()),this._refreshItemset(t)},this.autoComplete.options.handleOtherClick=!1}catch(t){r.w.printStackTrace(t,null,this)}},E.autoComplete.prototype.setEditMode=function(t,e){try{if(!0!==this._init?(this._createComponent(e),t.innerHTML=this.autoComplete.toHTML(),this.autoComplete.activate(),this.autoComplete.setSize(t.clientWidth-2+"px",t.clientHeight-2+"px"),this._init=!0,this.options.placeholder&&this.autoComplete.dom.input.setAttribute("placeholder",this.options.placeholder)):(t.innerHTML="",this.mainGrid.cellMergeInfo&&this.autoComplete.setSize(t.clientWidth-2+"px",t.clientHeight-2+"px"),t.appendChild(this.autoComplete.render)),this.autoComplete.setSize(t.clientWidth-2+"px",t.clientHeight-2+"px"),this.hasRef){var i=this.mainGrid.getElemRowIndex(t);this.autoComplete.itemArr=this.getRefItemArr(i)}if(this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.autoComplete.itemArr.length>0||this.autoComplete.allItemArr.length>0){var o=this.mainGrid.dataList._getCellData(e,this.colID);if(this.autoComplete.setValue(o),!0===this.autoComplete.options.disableEdit||!0===this.autoCompleteImageClicked){if(this.autoCompleteImageClicked&&this.options.directOpen)if(this.autoComplete.viewArr=[],this.existGridViewItemsetNode);else for(var s=0;s<this.autoComplete.itemArr.length;s++)this.autoComplete.viewArr.push({label:this.autoComplete.itemArr[s].label,value:this.autoComplete.itemArr[s].value,orgLabel:this.autoComplete.itemArr[s].orgLabel,index:s,_hidden:this.autoComplete.itemArr[s]._hidden});this.autoComplete.openSubLayer(),this.autoCompleteImageClicked=!1}else this.autoComplete.setInputFocus()}else this.autoComplete.options.disableEdit||this.autoComplete.setInputFocus(),this.autoComplete.dom.input.value="";0==this.autoComplete.getItemCount()&&(this.autoComplete.selectedIndex=-1,this.autoComplete.dom.label.innerHTML="")}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},E.autoComplete.prototype.setColumnDisableEdit=function(t){try{this.options.disableEdit=!0,
this.autoComplete&&this.autoComplete.disableEdit(t)}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},E.autoComplete.prototype._handleEndEdit_common=function(t){try{this.autoComplete.endEdit({noEvent:!0}),this.autoComplete.closeSubLayer();var e=this.autoComplete.getValue();try{this.editTd.removeChild(this.autoComplete.render)}catch(t){return}this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i={};i[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,i),this.options.directOpen&&(this.autoComplete.editmode=!1)}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},E.autoComplete.prototype._handleEndEdit_focus=function(t,e,i){!1===i&&this.mainGrid._setFocusedCell()},E.autoComplete.prototype._handleCancelEdit=function(t){this.autoComplete.closeSubLayer();var e=this.mainGrid.dataList._getCellData(this.mainGrid.getRealRowIndex(this.editRowIndex),this.colID);this.editTd.removeChild(this.autoComplete.render),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid._setFocusedCell()},E.autoComplete.prototype._getEditedValue=function(t){return this.autoComplete.getValue()},E.autoComplete.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},E.calendar=function(){},E.calendar.prototype.initializeCellInfo=function(t){try{this.options.useIOFormatLength&&this.refreshDataArr()}catch(t){r.w.printStackTrace(t,null,this)}},E.calendar.prototype.setInnerHTML=function(t,e,i,o,s){if(this.options.embeddedInput){var n=this.mainGrid.getInput(this,t,e);null==n.render.parentNode&&(t.innerHTML="",t.appendChild(n.render));var l=0,h=0,d=!1;"none"==t.parentNode.style.display&&(t.parentNode.style.display="",d=!0),this.mainGrid.embeddedCalendarStyleObj||(this.mainGrid.embeddedCalendarStyleObj={top:parseInt(WebSquare.style.getStyle(t,"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t,"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t,"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t,"padding-right"),10)}),l=t.offsetHeight-parseInt(WebSquare.style.getStyle(t,"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t,"border-bottom-width"),10),l-=this.mainGrid.embeddedCalendarStyleObj.top+this.mainGrid.embeddedCalendarStyleObj.bottom,this.mainGrid.embeddedWidthObj[o]&&!this.mainGrid.embeddedWidthObj[o].isChanged||(this.mainGrid.embeddedWidthObj[o]={isChanged:!1,width:t.clientWidth}),h=this.mainGrid.embeddedWidthObj[o].width,h-=this.mainGrid.embeddedCalendarStyleObj.left+this.mainGrid.embeddedCalendarStyleObj.right,d?t.parentNode.style.display="none":a.D.isIE("6 7")&&(l-=2),n.setSize(h-2,l),n.render.setAttribute("rowindex",i),"all"==this.options.applyFormat||this.options.displayFormat||(e=this.getDisplayData(e)),n._setValue(e,{skipValidate:!0}),this.mainGrid.__getEditReadOnly(t,i)||this.mainGrid._getEditDisabled(i,o)?n.setDisabled(!0):n.setDisabled(!1),t.removeAttribute("tabIndex")}else{this.options.useMonthYearFormat&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat,this.options.calendarValueType));var c=this.getDisplayData(e),p=this.mainGrid._dataList.filteredRowIndexArr[i],g=this.mainGrid.getCellOption(p,o,"viewType");if("icon"==g&&"true"==this.options.viewTypeIconImage){t.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px; width:100%; table-layout:fixed;'>","<td col_id='"+this.colID+"' rowIndex='"+i+"' colIndex='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_calendar_table' style='width:90%; overflow:hidden; text-overflow:ellipsis;'>","<nobr>"+c+"</nobr>","</td>","<td col_id='"+this.colID+"' rowIndex='"+i+"'  colIndex='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_calendar_img'>","<div class='"+this.mainGrid.options.bodyTdClass+"_calendar_div_img' />","</td>","</table>"].join("");var m=this,f=t.getElementsByTagName("div")[0];u.B.addListener(f,"onclick",(function(t){
m.mainGrid._getEditDisabled(i,o)||m.mainGrid.___getEditReadOnly(i,o)||(m.calendarImageClicked=!0)}))}else t.innerHTML="<nobr>"+c+"</nobr>","icon"==g||""==g&&"own"==this.options.dataType?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_calendar"),t.setAttribute("editModeEvent",this.options.editModeEventIcon)):this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_calendar")}var b;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var y=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof y&&(this.mainGrid.options.titleFormatter=y,b=y.call(this,i,o,e))}else b=this.mainGrid.options.titleFormatter.call(this,i,o,e)}catch(t){r.w.printStackTrace(t,null,this)}var v=b||this.options.title||"";v&&t.setAttribute("title",v)},E.calendar.prototype.setEditMode=function(t,e){try{if(this.options.embeddedInput)return;if("true"==this.options.viewTypeIconImage){var i=t.getElementsByTagName("div")[0];this.mainGrid.removeClass(i,this.mainGrid.options.bodyTdClass+"_calendar_div_img")}else this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_calendar");this.editTd=t,this.editRowIndex=e,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var o=this.mainGrid.getInput(this);this.comp=o;for(var s=t.firstChild;null!=s;s=s.nextSibling)if("NOBR"==s.nodeName.toUpperCase()){WebSquare.style.setStyle(s,"visibility","hidden");break}if(1==o.options.renderDiv||"true"==o.options.renderDiv){var a=document.getElementById(this.mainGridId+this.id),n=t.offsetWidth-6,l=t.offsetHeight,h=document.getElementById(this.mainGridId+this.id+"_div_input"),d=n-18-5,u=l-3,c=document.getElementById(this.mainGridId+this.id+"_input"),p=d-(parseInt(WebSquare.style.getStyle(c,"border-right-width"),10)+parseInt(WebSquare.style.getStyle(c,"border-left-width"),10)+parseInt(WebSquare.style.getStyle(c,"padding-right"),10)+parseInt(WebSquare.style.getStyle(c,"padding-left"),10)),g=u-2,m=document.getElementById(this.mainGridId+this.id+"_img"),f=u/2-m.offsetHeight/2;if(1==this.options.useAnchor||"true"==this.options.useAnchor){var b=document.getElementById(this.mainGridId+this.id+"_a");WebSquare.style.setStyle(b,"top",f+"px")}else WebSquare.style.setStyle(m,"top",f+"px");WebSquare.style.setStyle(a,"width",Math.max(n,0)+"px"),WebSquare.style.setStyle(h,"width",Math.max(d,0)+"px"),WebSquare.style.setStyle(c,"width",Math.max(p,0)+"px"),WebSquare.style.setStyle(a,"height",Math.max(l-3,0)+"px"),WebSquare.style.setStyle(h,"height",Math.max(u,0)+"px"),WebSquare.style.setStyle(c,"height",Math.max(g,0)+"px")}var y=this.mainGrid.dataList._getCellData(e,this.colID);this.options.useMonthYearFormat&&(y=WebSquare.date.getIOFormatDate(y,this.options.ioFormat,this.options.calendarValueType)),o._setValue(y,{noFormat:!0,skipValidate:!0}),"icon"==this.options.viewType&&"true"==this.options.viewTypeIconImage&&1==this.calendarImageClicked?(this.calendarImageClicked=!1,o.toggle()):o.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==o.options.editType&&o.select()}catch(t){r.w.printStackTrace(t,null,this)}},E.calendar.prototype.setPosition=function(){try{var t={top:0,left:0,width:0,height:0};if(a.D.isIE(8)?t={top:1,left:0,width:0,height:0}:a.D.isFF()?t={top:0,left:-1,width:0,height:0}:a.D.isChrome()||a.D.isSafari()?t={top:1,left:0,width:0,height:0}:a.D.isOpera()&&(t={top:1,left:0,width:0,height:1}),"native"===this.mainGrid.options.drawType){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}var i=this.editTd,o=i.offsetTop+t.top,s=i.offsetLeft+1+t.left,n=i.clientWidth-5+t.width,l=i.clientHeight-3+t.height,h=l-1;if(this.mainGrid.options.groupbyZone){var d=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight
;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(d=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=d}if(this.mainGrid.hasClass("w2grid_adaptive_crosstab"))s-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft;var u=this.mainGrid.getInput(this);u.show(),u.render.style.top=o+"px",u.render.style.left=s+"px",u.render.style.width=n+"px",u.render.style.height=l+"px",u.render.firstChild.style.height=l+"px",u.dom.input.style.height=h+"px",u.dom.input.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign,a.D.isIE()&&(u.dom.input.style.lineHeight=l+"px")}catch(t){r.w.printStackTrace(t,null,this)}},E.calendar.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},E.calendar.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this);e.hideCalendar();var i=e.getValue();i=e.validator.validateString(i),this.options.useIOFormatLength||(i=e.sub_validator.validateString(i)),this.options.useMonthYearFormat&&(i=WebSquare.date.getIOUnFormatDate(i,e.options.ioFormat,e.options.calendarValueType)),this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID));var o={};return o[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,i,null,null,null,o),e}catch(t){r.w.printStackTrace(t,null,this)}},E.calendar.prototype._handleEndEdit_focus=function(t,e){!0!==e&&t.hide()},E.calendar.prototype.validate=function(t){var e=this.mainGrid.getInput(this);if(e.validate())return!0;if(""==e.getValue())return!0;if(this.mainGrid.getInput(this).blur(),this.options.dateValidSet&&this.options.dateValidSetCustom);else if("false"!==this.options.displaymessage){var i=WebSquare.language.getMessage("IC_invalidCalendarSelect")||"날짜 형식이 잘못 되었습니다.";alert(i)}return this.mainGrid.getInput(this).focus(),!1},E.calendar.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},E.calendar.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid.getInput(this).hide()}catch(t){r.w.printStackTrace(t,null,this)}},E.calendar.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},E.calendar.prototype.refreshDataArr=function(){try{var t;t=this.mainGrid.groupbyStatus.grouped?this.mainGrid.groupbyStatus.groupbyRowIndexArr:this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr:this.mainGrid._dataList.filteredRowIndexArr;for(var e=this.mainGrid._dataList.cellIdList.length,i=this.mainGrid._dataList.bodyIdColIndexMap[this.id],o=this.mainGrid.getInput(this),s=0;s<t.length;s++){var a=t[s],n=this.mainGrid._dataList.dataArr[a*e+i],l=o.sub_validator.validateString(n);this.mainGrid._dataList.dataArr[a*e+i]=l}}catch(t){r.w.printStackTrace(t,null,this)}},E.expression=function(){},E.expression.prototype.initializeCellInfo=function(){var t=this.options.expression;if(this.mainGrid.useExpression=!0,this.expIdArr=[],""!=t){var e=t.match(/(sum|avg|max|min|display|rowindex|rowstatus)[\s]*[(][\S\s]*?[)]/gi);if(null!=e){t="";for(var i=0;i<e.length;i++)t+=e[i],i<e.length-1&&(t+="+")}t=(t=(t=(t=(t=(t=(t=(t=t.replace(/[sS][uU][mM][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"_this.getCalcExpressionTarget(")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/rowStatus[\s]*[(]/gi,"_this.getExpressionTarget(")}try{new Function("_this",t)(this)}catch(t){}},
E.expression.prototype.getExpressionTarget=function(){for(var t=0;t<arguments.length;t++)null==this.expIdArr[arguments[t]]&&(this.expIdArr[arguments[t]]=arguments[t],this.mainGrid.setExpressionAssociation(arguments[t],this.colID));return 1},E.expression.prototype.getCalcExpressionTarget=function(t){var e=t.wq_replaceAll("(",",").wq_replaceAll(")",",").wq_replaceAll("+",",").wq_replaceAll("-",",").wq_replaceAll("*",",").wq_replaceAll("/",",").wq_replaceAll("%",",").wq_replaceAll(" ","");e=e.split(",");for(var i=0;i<e.length;i++)""!==e[i]&&null==this.expIdArr[e[i]]&&(this.expIdArr[e[i]]=e[i],this.mainGrid.setExpressionAssociation(e[i],this.colID));return 1},E.expression.prototype.setInnerHTML=function(t,e,i,o,s){try{var n,l=this.mainGrid.dataList.getRealRowIndex(i),h=this.mainGrid._getGroupbyDisplayRowIndex(i),d=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),u=this.getDisplayData(null,l);"function"==typeof d?(this.useCustomFormatter=!0,n=d.call(this.mainGrid,e,u,h,o)):(this.useCustomFormatter=!1,n=u);var c=t.innerHTML.replace(/\r(\n)?/,"\n"),p="<nobr>"+n+"</nobr>";c!==p&&(t.innerHTML=p.replace("NaN",this.options.NaNFormat),this.mainGrid.drawFooter(this.colID))}catch(t){r.w.printStackTrace(t,null,this)}},E.expression.prototype.getDisplayData=function(t,e,i){return t=this.getExpressionValue(e),this.formatter&&!i?this.formatter.format(t):t},E.expression.prototype.getExpressionValue=function(t){if(this.rowIndex=t,!this.options.expressionFunc){var e=this.options.expression;""!=e&&(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[sS][uU][mM][\s]*[(]/g,"this.colsum(rowIndex,")).replace(/[aA][vV][gG][\s]*[(]/g,"this.colavg(rowIndex,")).replace(/[mM][aA][xX][\s]*[(]/g,"this.colmax(rowIndex,")).replace(/[mM][iI][nN][\s]*[(]/g,"this.colmin(rowIndex,")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"this.colcalc(rowIndex,")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"this.display(rowIndex,")).replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"this.getRowIndex(rowIndex")).replace(/rowStatus[\s]*[(]/gi,"this.rowStatus(rowIndex"),e=a.D.scopingFuncBody(e,this.scope_id)),this.options.expressionFunc=Function("rowIndex",e),this.options.expressionFunc.changeCount=0}var i=this.mainGrid.changeCount,o="";return this.options.expressionFunc[t]&&i==this.options.expressionFunc[t].changeCount?o=this.options.expressionFunc[t].oldValue:(this.options.expressionFunc[t]||(this.options.expressionFunc[t]={}),this.options.expressionFunc[t].changeCount=i,o=this.options.expressionFunc.call(this,t),this.options.expressionFunc[t].oldValue=o),o},E.expression.prototype.colsum=function(){for(var t=arguments[0],e=0,i=1;i<arguments.length;i++){var o=this.mainGrid.getColumnIndex(arguments[i]),s=this.options.dataType;"gridView"==this.mainGrid.options.pluginName&&(s=this.mainGrid._dataList.getCellInfo(this.options.col_id).options.dataType),"bigDecimal"===s?e=WebSquare.bigDecimal(e).plus(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,o)))||0:e+=parseFloat(this.mainGrid.dataList._getData(t,o))||0}return e},E.expression.prototype.colavg=function(){for(var t=arguments[0],e=0,i=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),o=1;o<arguments.length;o++){var s=this.mainGrid.getColumnIndex(arguments[o]);"bigDecimal"===i?e=WebSquare.bigDecimal(e).plus(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)))||0:e+=parseFloat(this.mainGrid.dataList._getData(t,s))||0}return"bigDecimal"===i?e=WebSquare.bigDecimal(e).divide(WebSquare.bigDecimal(arguments.length-1)).toString():e/=arguments.length-1,e},E.expression.prototype.colmax=function(){for(var t=arguments[0],e=0,i=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),o=1;o<arguments.length;o++){var s=this.mainGrid.getColumnIndex(arguments[o]);if("bigDecimal"===i)e=WebSquare.bigDecimal(e).compare(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)))||0;else{var r=parseFloat(this.mainGrid.dataList._getData(t,s))||0;r>e&&(e=r)}}return e},E.expression.prototype.colmin=function(){
for(var t=arguments[0],e=0,i=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),o=1;o<arguments.length;o++){var s=this.mainGrid.getColumnIndex(arguments[o]);if("bigDecimal"===i)e="0"===WebSquare.bigDecimal(e).toString()?WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)):WebSquare.bigDecimal(e),e=WebSquare.bigDecimal(e).compare(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)),!0)||0;else{var r=parseFloat(this.mainGrid.dataList._getData(t,s))||0;(1==o||r<e)&&(e=r)}}return e},E.expression.prototype.colcalc=function(t,e){function i(t,e){t[t.length]=e}function o(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function s(t){return!a(t)&&"("!=t&&")"!=t}function a(t){return"+"==t||"-"==t||"*"==t||"/"==t||"^"==t||"%"==t}function n(t){return t[t.length-1]}function l(t){return 0==t.length}function h(t){return"^"==t?5:"*"==t||"/"==t||"%"==t?4:"+"==t||"-"==t?3:"("==t?2:")"==t?1:void 0}function d(t,e,i){var o;try{return"+"==i&&(o=t.plus(e)),"-"==i&&(o=t.minus(e)),"*"==i&&(o=t.times(e)),"/"==i&&(o=t.divide(e)),"^"==i&&(o=t.pow(e)),"%"==i&&(o=t.mod(e)),o}catch(t){r.w.printStackTrace(t)}}var u=function(t,e,r){e=new Array;var d=new Array,u=0;t=function(t){for(var e=t.split(""),i="",o=new Array,r=0,n=0;n<e.length;n++)s(e[n])&&null==e[n].match(/\s/)&&(i+=e[n]),(a(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(o[r]=i,r++),i="",o[r]=e[n],r++),n==e.length-1&&""!=i&&(o[r]=i);return o}(t);for(var c=0;c<t.length;c++){if(s(t[c])&&(e[u]=t[c],u++),a(t[c])){if("^"!=t[c])for(;!l(d)&&h(t[c])<=h(n(d));)e[u]=n(d),o(d),u++;else for(;!l(d)&&h(t[c])<h(n(d));)e[u]=n(d),o(d),u++;i(d,t[c])}if("("==t[c]&&i(d,t[c]),")"==t[c]){for(;"("!=n(d);)e[u]=o(d),u++;o(d)}}for(;!l(d);)"("==n(d)?o(d):e[e.length]=o(d);var p="";for(c=0;c<e.length;c++)p+=e[c];return 0==r?p:e}(e);for(var c in u){var p=this.mainGrid.getColumnIndex(u[c]);u[c]=null!=p?WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,p)):u[c]}return function(t){for(var e,r,a=new Array,l=0;l<t.length;l++)if(s(t[l]))i(a,t[l]);else{(e=new Function("return "+n(a))()).constructor!=WebSquare.bigDecimalObj&&(e=WebSquare.bigDecimal(e)),o(a),(r=new Function("return "+n(a))()).constructor!=WebSquare.bigDecimalObj&&(r=WebSquare.bigDecimal(r));var h=d(r,e,t[l]);o(a),i(a,h)}return n(a)}(u)},E.expression.prototype.display=function(){var t=arguments[0],e=this.mainGrid.getColumnIndex(arguments[1]),i=this.mainGrid.dataList._getData(t,e);return i},E.expression.prototype.getRowIndex=function(){var t=arguments[0];return this.mainGrid.getDisplayRowIndex(t)},E.expression.prototype.rowStatus=function(){var t=arguments[0],e=this.mainGrid.dataList.getRowStatusValue(t);switch(e){case 0:return"R";case 1:return"U";case 2:return"C";case 3:return"D";case 4:return"V"}},E.textarea=function(){},E.textarea.prototype.initializeCellInfo=function(t){if(t){var e=t.getAttribute("showReadOnly");if(e)this.options.showReadOnly=a.D.getBoolean(e);else{var i=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="textarea"]/showReadOnly/@value')||"true";this.options.showReadOnly=a.D.getBoolean(i)}}},E.textarea.prototype.setInnerHTML=function(t,e,i,o,s){if(this.options.embeddedInput){var n=this.mainGrid.getInput(this,t);n.show(),t.innerHTML="",t.appendChild(n.render),n.render.setAttribute("rowindex",i),n.render.style.top="0",n.render.style.left="0",n.render.style.width="100%",n.render.style.height="100%",n.render.style.imeMode=this.options.imeMode,this.options.placeholder&&(n.render.placeholder=this.options.placeholder),n.setValue(this.mainGrid.dataList._getCellData(i,this.id)),this.mainGrid._getEditDisabled(i,o)?n.setDisabled(!0):n.setDisabled(!1),this.mainGrid.__getEditReadOnly(t,i)?n.setReadOnly(!0):n.setReadOnly(!1)}else{var l=t.clientWidth-8+"",h=this.getDisplayData(e),d=this.mainGrid._getGroupbyDisplayRowIndex(i),u=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),c=h,p=this.options.textAlign?"text-align:"+this.options.textAlign+";":"",g="pre-wrap"
;a.D.isIEAllVersion("6 7")&&(g="normal");var m="all"===t.getAttribute("displayType")?"word-break:break-all;white-space:"+g+";":"";"function"==typeof u?(this.useCustomFormatter=!0,c=u.call(this.mainGrid,e,h,d,o)):this.useCustomFormatter=!1,t.innerHTML="<div class='w2grid_textarea' style='"+p+" width:"+l+"px; "+m+"' >"+(this.options.escape+""=="true"?this.getDisplayData(WebSquare.xml._encode(c+"")):this.getDisplayData(c))+"</div>"}var f;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var b=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof b&&(this.mainGrid.options.titleFormatter=b,f=b.call(this,i,o,e))}else f=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",f)}catch(t){r.w.printStackTrace(t,null,this)}if("all"===t.getAttribute("displayType")&&"all"===this.mainGrid.options.visibleRowNum&&"native"!==this.mainGrid.options.drawType){var y=document.getElementById(this.mainGrid.id+"_body_table").offsetHeight;this.mainGrid.dataLayerHeight!=y&&this.mainGrid.setSize(null,y)}},E.textarea.prototype.setEditMode=function(t,e){this.options.embeddedInput||this._setEditMode(t,e)},E.textarea.prototype._setEditMode=function(t,e){try{this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var i=this.mainGrid.getInput(this);i.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),this.options.disabled||i.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),this.options.disabled||"select"!=this.options.editType&&"select"!=this.mainGrid.options.editType||i.select()}catch(t){r.w.printStackTrace(t,null,this)}},E.textarea.prototype.setPosition=function(){try{var t={top:0,left:0,width:0,height:0};a.D.isIE(8)?t={top:-1,left:-1,width:0,height:0}:a.D.isFF()?t={top:-2,left:0,width:0,height:0}:a.D.isOpera()?t={top:0,left:0,width:0,height:1}:a.D.isChrome()&&(t={top:0,left:0,width:0,height:0});var e=this.editTd;if("native"===this.mainGrid.options.drawType){var i=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=i.scrollTop,t.left-=i.scrollLeft}var o=e.offsetTop+1+t.top,s=e.offsetLeft+1+t.left,n=e.clientWidth>150?e.clientWidth-5+t.width:150,l=e.clientHeight>60?e.clientHeight-2+t.height:60;if(this.mainGrid.options.groupbyZone){var h=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(h=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=h}if(this.mainGrid.gridWidth<s+n){var d=(e.clientWidth>150?0:5+t.width)-2;s-=s+n-(e.offsetLeft+e.clientWidth)+d}var u=this.mainGrid.scrollX_right;if(this.mainGrid.render.offsetHeight-u.offsetHeight<o+l){var c=e.clientHeight>60?0:2-t.top;(o-=o+l-(e.offsetTop+e.clientHeight)+c)<0&&(o=1+t.top),l>this.mainGrid.render.offsetHeight&&(l=this.mainGrid.render.offsetHeight-6+t.height)}if(this.mainGrid.hasClass("w2grid_adaptive_crosstab"))s-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft;var p=this.mainGrid.getInput(this);this.comp=p,p.show(),p.render.style.top=o+"px",p.render.style.left=s+"px",p.render.style.width=n+"px",p.render.style.height=l+"px",p.render.style.imeMode=this.options.imeMode}catch(t){r.w.printStackTrace(t,null,this)}},E.textarea.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},E.textarea.prototype.showReadonly=function(t,e){var i=this.mainGrid.getInput(this),o=t.getAttribute("col_id");(this.options.disabled||this.mainGrid._getEditDisabled(e,o))&&i.setDisabled(!0),(this.options.readOnly||this.mainGrid.___getEditReadOnly(e,o))&&i.setReadOnly(!0),this._setEditMode(t,e),this.mainGrid.editedCell=this},E.textarea.prototype._handleEndEdit_common=function(t){try{
var e=this.mainGrid.getInput(this),i=e.getValue();"number"==this.mainGrid.getColumnOption(this.options.col_id,"dataType")&&""!=i&&(i=Number(i));var o=this.editTd.offsetHeight;this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID));var s=this.editTd.offsetHeight;this.changedCellHeight=s-o;var a={};return a[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,i,null,null,null,a),e}catch(t){r.w.printStackTrace(t,null,this)}},E.textarea.prototype._handleEndEdit_focus=function(t){t.hide(),t.setDisabled(!1),t.setReadOnly(!1)},E.textarea.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},E.textarea.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i=this.mainGrid.getInput(this);i.hide(),i.setDisabled(!1),i.setReadOnly(!1)}catch(t){r.w.printStackTrace(t,null,this)}},E.textarea.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},E.drilldown=function(){},E.drilldown.prototype.setInnerHTML=function(t,e,i){var o=i,s=100,r=this.options.depthColumn;if("linkedDataList"===this.mode){if(null!=this.mainGrid._linkedDataList.filteredRowIndexArr&&this.mainGrid._linkedDataList.filteredRowIndexArr.length>0){o=this.mainGrid._linkedDataList.filteredRowIndexArr[i];var n=this.mainGrid._linkedDataList.filteredRowIndexArr.length-1;s=o<this.mainGrid._linkedDataList.filteredRowIndexArr[n]?parseInt(this.mainGrid.dataList._getCellData(i+1,r),10):null}}else null!=this.mainGrid._dataList.filteredRowIndexArr&&this.mainGrid._dataList.filteredRowIndexArr.length>0&&(s=(o=this.mainGrid.dataList.getRealRowIndex(i))<this.mainGrid.dataList.getRealRowIndex(this.mainGrid.getDataLength()-1)?parseInt(this.mainGrid.dataList._getCellData(i+1,r),10):null);for(var l=parseInt(this.mainGrid.dataList._getCellData(i,r),10),h="",d=o,u=1;u<l;u++)"div"==this.options.depthType?h+="<div class='w2grid_depthBlank'></div>":"line"==this.options.depthType?(h="<div class='w2grid_depth"+(1===u?this.mainGrid.drilldown.isLastChild(d)?"_line_L":"_line_T":this.mainGrid.drilldown.isLastChild(d)?"Blank":"_line_I")+"'></div>"+h,d=this.mainGrid.drilldown.getParentRowIndex(d)):"none"==this.options.depthType?h+="":h+="&nbsp;&nbsp;";var c=0,p="w2grid_plus";null!=s&&l<s?(c=1,p="w2grid_minus"):this.mainGrid.hasChild(i)||(c=2,p="w2grid_leaf"),1==l&&(p+=" w2grid_root");var g="";g=a.D.isMobile()?"<span class='"+p+"' style='display:inline-block;' openStatus='"+c+"' ontouchstart='this.clicked=true'></span>":"<span class='"+p+"' style='display:inline-block;' openStatus='"+c+"' onclick='this.clicked=true'></span>";var m="<div class='w2grid_depthBlank";"1"==l&&(m+=" w2grid_depthBlank_root"),2===c&&(m+=" w2grid_depthBlank_leaf"),m+="'>";var f=this.options.escape+""=="true"?this.getDisplayData(WebSquare.xml._encode(e+"")):this.getDisplayData(e);"div"==this.options.depthType?(g=m+g+"</div>",t.innerHTML="<nobr class='w2grid_drilldown_nobr'>"+h+g+f+"</nobr>"):"line"==this.options.depthType?(g=m+g+"</div>",t.innerHTML=h+g+"<nobr class='w2grid_drilldown_nobr'>"+f+"</nobr>"):(this.options.depthType,t.innerHTML="<nobr>"+h+g+f+"</nobr>")},E.drilldown.prototype.handleClick=function(t,e){var i=t.getElementsByTagName("span")[0];return 1==i.clicked&&(i.clicked=!1,"2"!=i.getAttribute("openStatus")&&this.mainGrid._toggle(e),!0)},E.drilldown.prototype.setEditMode=function(t,e){try{this.editRowIndex=e,this.editTd=t,this.setPosition();var i=this.mainGrid.getInput(this);i.formatter="all"==this.options.applyFormat?this.formatter:this.emptyFormatter,i.options.applyFormat=this.options.applyFormat,i.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),document.activeElement!=i.render&&i.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==i.options.editType&&i.select()}catch(t){
r.w.printStackTrace(t,null,this)}},E.drilldown.prototype.setPosition=function(){var t={top:0,left:0,width:0,height:0};if(a.D.isFF()?t={top:-1,left:-1,width:0,height:0}:a.D.isOpera()?t={top:0,left:0,width:0,height:1}:a.D.isIE(9)&&(t={top:-1,left:-1,width:0,height:0}),"native"===this.mainGrid.options.drawType){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}var i=this.editTd,o=i.offsetTop+1+t.top,s=i.offsetLeft+1+t.left,r=i.clientWidth-6+t.width,n=i.clientHeight-2+t.height,l=this.mainGrid.getInput(this);if(""!=this.options.imeMode)l.render.style.imeMode=this.options.imeMode;else{var h=this.mainGrid.getColumnOption(this.options.col_id,"dataType");l.render.style.imeMode="number"==h?"disabled":""}if(l.show(),this.mainGrid.options.groupbyZone){var d=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(d=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=d}l.render.style.top=o+"px",l.render.style.left=s+"px",l.render.style.width=r+"px",l.render.style.height=n+"px",a.D.isIE()&&(l.render.style.lineHeight=n+"px"),l.render.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign},E.drilldown.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},E.drilldown.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this);return this.setEditData(e),e}catch(t){r.w.printStackTrace(t,null,this)}},E.drilldown.prototype._handleEndEdit_focus=function(t,e){!this.mainGrid.isMobile&&e||t.hide()},E.drilldown.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},E.drilldown.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid.getInput(this).hide()}catch(t){r.w.printStackTrace(t,null,this)}},E.drilldown.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},E.drilldown.prototype.setEditData=function(t){try{var e=t.getValue();e=t.validator.validateString(e),t.setValueNM(e,!0),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i=this.mainGrid.getColumnOption(this.options.col_id,"dataType");this.mainGrid.options.numberCasting&&"number"==i&&""!=e&&(e=Number(e));var o={};o[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,o)}catch(t){r.w.printStackTrace(t,null,this)}},E.textImage=function(){},E.textImage.prototype.setInnerHTML=function(t,e,i,o,s){var n=this.mainGrid.getElemRowIndex(t),l=this.mainGrid.dataList.getRealRowIndex(n),h=this.mainGrid._getGroupbyDisplayRowIndex(i),d=this.mainGrid.getColumnIndex(this.colID),c=this.mainGrid.getCellOption(l,d,"viewType"),p=this.options.imageSrc?this.mainGrid.getImageURL(this.options.imageSrc):"",g=this.mainGrid.getColumnID(o),m=!1,f=!1;this.mainGrid._getEditDisabled(i,g)?(m=!0,this.options.imageSrcDisabled&&(p=this.mainGrid.getImageURL(this.options.imageSrcDisabled))):this.mainGrid.___getEditReadOnly(i,g)&&(f=!0,this.options.imageSrcReadOnly&&(p=this.mainGrid.getImageURL(this.options.imageSrcReadOnly)));var b=e,y=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),v=a.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof v&&(b=v.call(this.mainGrid,e,h,o));var w,S,C=this.getDisplayData(b);if("function"==typeof y?(this.useCustomFormatter=!0,w=y.call(this.mainGrid,e,C,h,o)):(this.useCustomFormatter=!1,w=C),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var x=a.D.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof x&&(this.mainGrid.options.titleFormatter=x,S=x.call(this,i,o,e))
}else S=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",S)}catch(t){r.w.printStackTrace(t,null,this)}if("icon"==c||""==c&&"own"==this.options.dataType){var _="";try{this.options.onerror&&(_=' onerror="('+this.options.onerror+').call(this,event);" ')}catch(t){r.w.printStackTrace(t,null,this)}var I="w2grid_textImage_image";m?I+=" w2grid_textImage_disabled":f&&(I+=" w2grid_textImage_readonly");var T=t.getAttribute("tdIndex");t.removeAttribute("alt");var k="";""!=this.options.alt&&(k=" alt='"+this.options.alt+"' "),t.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px; width:100%; table-layout:fixed;'>","<td col_id='"+this.colID+"' rowIndex='"+i+"' colIndex='"+o+"' tdIndex='"+T+"' class='w2grid_textImage' style='overflow:hidden; text-overflow:ellipsis;'>","<nobr>"+w+"</nobr>","</td>","<td col_id='"+this.colID+"' rowIndex='"+i+"'  colIndex='"+o+"' class='"+I+"' style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","'>","<img src='"+p+"' "+_+"style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","'"+k+" />","</td>","</table>"].join("");var D=this,L=t.getElementsByTagName("img")[0];u.B.addListener(L,"onclick",(function(t){u.B.stopPropagation(t);var s=D.mainGrid._getEditDisabled(i,o);if(D.options.useImageClick||0==s){if(D.mainGrid.editedCell){var r=D.mainGrid._getGroupbyDisplayRowIndex(D.mainGrid.editedCell.editRowIndex),n=D.mainGrid.editedCell.colID,d=D.mainGrid._dataList.getCellData(r,n);D.mainGrid.editedCell.handleEndEdit();var c=D.mainGrid._dataList.getCellData(r,n);c!=d&&u.B.fireEvent(D.mainGrid,"onviewchange",{oldValue:d,newValue:c,rowIndex:r,colIndex:D.mainGrid.getColumnIndex(n)})}var p=D.getDisplayData(e),g=a.D.getGlobalFunction(D.options.imageClickFunction,D.scope_id);u.B.fireEvent(D.mainGrid,"ontextimageclick",i,o),D.mainGrid._setFocusedCell(i,o),"function"==typeof g&&(D.options.displayRowIndex?g.call(D.mainGrid,h,D.colID,p):g.call(D.mainGrid,l,D.colID,p))}}))}else t.innerHTML="<nobr>"+w+"</nobr>"},E.textImage.prototype.setEditMode=function(t,e){try{var i="";try{this.options.onerror&&(i=' onerror="('+this.options.onerror+').call(this,event);" ')}catch(t){r.w.printStackTrace(t,null,this)}var o=this.options.imageSrc?this.mainGrid.getImageURL(this.options.imageSrc):"";t.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px;'><td></td><td>","<img src='"+o+"' "+i+"style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","' />","</td></table>"].join("");var s=t.getElementsByTagName("td")[1].firstChild,n=this.mainGrid.getElemRowIndex(t),l=this.mainGrid.getColumnIndex(this.colID),h=this.mainGrid._dataList.filteredRowIndexArr[n],d=this;u.B.addListener(s,"onclick",(function(t){if(u.B.stopPropagation(t),d.mainGrid.editedCell){var i=d.mainGrid._getGroupbyDisplayRowIndex(d.mainGrid.editedCell.editRowIndex),o=d.mainGrid.editedCell.colID,s=d.mainGrid._dataList.getCellData(i,o);d.mainGrid.editedCell.handleEndEdit();var r=d.mainGrid._dataList.getCellData(i,o);r!=s&&u.B.fireEvent(d.mainGrid,"onviewchange",{oldValue:s,newValue:r,rowIndex:i,colIndex:d.mainGrid.getColumnIndex(o)})}var n=d.mainGrid.getInput(d).getValue(),c=a.D.getGlobalFunction(d.options.imageClickFunction,d.scope_id);u.B.fireEvent(d.mainGrid,"ontextimageclick",e,l),"function"==typeof c&&(d.options.displayRowIndex?c.call(d.mainGrid,e,d.colID,n):c.call(d.mainGrid,h,d.colID,n))})),this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var c=this.mainGrid.getInput(this);this.comp=c,c.formatter="all"==this.options.applyFormat?this.formatter:this.emptyFormatter,
c.options.applyFormat=this.options.applyFormat,c.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),c.focus(),"native"!==this.mainGrid.options.drawType&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==c.options.editType?c.select():"focus"==c.options.editType&&(a.D.isIE()||a.D.isFF())&&WebSquare.text.setCaretPos(c.render,c.render.value.length)}catch(t){r.w.printStackTrace(t,null,this)}},E.textImage.prototype.setPosition=function(){try{var t={top:0,left:0,width:0,height:0,tdWidth:0};if(a.D.isFF()?t={top:-1,left:-1,width:0,height:0,tdWidth:0}:a.D.isOpera()&&(t={top:0,left:0,width:0,height:1,tdWidth:0}),"native"===this.mainGrid.options.drawType){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}var i=this.editTd,o=i.getElementsByTagName("td"),s=o[1].firstChild,n=i.clientWidth-s.offsetWidth-1+t.tdWidth,l=i.offsetTop+1+t.top,h=i.offsetLeft+1+t.left,d=i.clientWidth-s.offsetWidth-6+t.width,u=i.clientHeight-2+t.height;if(this.mainGrid.options.groupbyZone){var c=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(c=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),l+=c}o[0].style.width=n+"px";var p=this.mainGrid.getInput(this);if(""!=this.options.imeMode)p.render.style.imeMode=this.options.imeMode;else{var g=this.mainGrid.getColumnOption(this.options.col_id,"dataType");p.render.style.imeMode="number"==g?"disabled":""}if(this.mainGrid.hasClass("w2grid_adaptive_crosstab"))l-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft,p.render.style.lineHeight=u+"px";p.show(),p.render.style.top=l+"px",p.render.style.left=h+"px",p.render.style.width=d+"px",p.render.style.height=u+"px",p.render.style.lineHeight=u+"px",p.render.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign}catch(t){r.w.printStackTrace(t,null,this)}},E.textImage.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},E.textImage.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this),i=e.getValue();i=e.validator.validateString(i),this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID));var o={};o[this.mainGrid.id]=!0;var s=a.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);if("function"==typeof s){this.useCustomModelFormatter=!0;var n=this.getDisplayData(i);i=s.call(this.mainGrid,i,n,this.editRowIndex,this.getColumnIndex(this.colID))}else this.useCustomModelFormatter=!1;return this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,i,null,null,null,o),e}catch(t){r.w.printStackTrace(t,null,this)}},E.textImage.prototype._handleEndEdit_focus=function(t){t.setDisabled(!1),t.setReadOnly(!1),t.hide()},E.textImage.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},E.textImage.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.getInput(this),i=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID)),e.hide()}catch(t){r.w.printStackTrace(t,null,this)}},E.textImage.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},E.textImage.prototype.showReadonly=function(t,e){this.setEditMode(t,e);var i=this.mainGrid.getInput(this);i.setDisabled(!0),i.setReadOnly(!0),this.mainGrid.editedCell=this},E.prototype.setDataListCellRefresh=function(t){try{if(t){this.initFormatter(t);var e=this.options.dataType;e||(e=this.mainGrid._dataList.getColumnOption(this.options.col_id,"dataType")),"date"!=e||this.options.displayFormat||(this.options.displayFormat=s.v.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+"/dataType/date/@displayFormat")),"time"!=e||this.options.displayFormat||(this.options.displayFormat="HH:mm")
;var i=!this.options.groupName||!this.options.groupValue,o=this.options.inputType;if(i&&("button"!=o&&"image"!=o)){var a=this.mainGrid._dataList.getCellInfo(this.colID),n=!(!a||!a.element&&a.id!==this.id);this.options.readOnly=!n||t.getAttribute("readOnly")}}}catch(t){r.w.printStackTrace(t,null,this)}},E.spinner=function(){},E.spinner.prototype.initializeCellInfo=function(t){try{if(!this.xml)if("json"===t._elementType)t._element.N="w2:"+this.options.inputType,this.xml=t;else{var e="",i=(e=a.D.isIE("6 7")&&this.internal?WebSquare.xml.nodeWellFormed(t.outerHTML):WebSquare.xml.serialize(t)).indexOf("xmlns:w2")<0?' xmlns:w2="http://www.inswave.com/websquare"':"";e=(e=e.wq_replaceAll("<w2:column","<w2:spinner"+i)).wq_replaceAll("</w2:column","</w2:spinner");var o=WebSquare.xml.parse(e,!0);this.xml=o.documentElement}}catch(t){r.w.printStackTrace(t,null,this)}},E.spinner.prototype.setInnerHTML=function(t,e,i,o,s){null==e&&(e=""),this.spinner&&this.spinner.render&&t.firstChild==this.spinner.render&&t.removeChild(this.spinner.render),t.innerHTML="<nobr>"+this.getDisplayData(e,i)+"</nobr>";var r=this.mainGrid.dataList.getRealRowIndex(i),a=this.mainGrid.getCellOption(r,o,"viewType"),n=this.mainGrid.getColumnOption(this.options.col_id,"dataType");("icon"==a||""==a&&"own"==n)&&(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_spinner"),t.setAttribute("editModeEvent",this.options.editModeEventIcon))},E.spinner.prototype.setEditMode=function(t,e){try{if(""==this.style){this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this.xml.setAttribute("class",this.mainGridId+"_spinner_"+this.id),this.xml.setAttribute("style",this.style),this.configOptions={},this.options.dataType&&(this.configOptions.dataType=this.options.dataType),this.options.buttonSize&&(this.configOptions.buttonSize=this.options.buttonSize),this.options.dateIncrementType&&(this.configOptions.dateIncrementType=this.options.dateIncrementType),this.options.displayFormat&&(this.configOptions.displayFormat=this.options.displayFormat),this.options.displayFormatter&&(this.configOptions.displayFormatter=this.options.displayFormatter),this.options.increment&&(this.configOptions.increment=this.options.increment),this.options.min&&(this.configOptions.min=this.options.min),this.options.max&&(this.configOptions.max=this.options.max),this.options.editType&&(this.configOptions.editType=this.options.editType);var i=t.getAttribute("tdindex");this.mainGrid._getEditDisabled(e,i)?this.configOptions.disabled=!0:this.configOptions.disabled=!1,this.configOptions.xmlEvents=[{name:"ondblclick",action:"script",param:{handler:function(t){u.B.stopPropagation(t)}}}],this.spinner=new WebSquare.uiplugin.spinner(this.mainGridId+"_spinner_"+this.id,this.configOptions,this.xml),this.spinner.isGridCellComponent=!0;var o=this;this.spinner._handleClickEvent=this.spinner.handleClickEvent,this.spinner.handleClickEvent=function(t){var e=o.mainGrid.getElemRowIndex(this.render.parentElement),i=o.mainGrid._getGroupbyDisplayRowIndex(e),s=this.render.parentElement.getAttribute("tdindex");if(this.options.customFormatter){try{var r=null,n={};if("function"==typeof(r=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id)))for(var l in n=r(i,s))this.options.hasOwnProperty(l)&&(this.options[l]=n[l])}catch(t){r=null}this._handleClickEvent(t)}else this._handleClickEvent(t);u.B.stopEvent(t)},this.spinner._inputKeyDown=this.spinner.inputKeyDown,this.spinner.inputKeyDown=function(t,e){27==t.keyCode||o.spinner._inputKeyDown(t,e)},t.innerHTML=this.spinner.toHTML(),this.spinner.activate(),this.spinner.setSize(t.clientWidth-2,t.clientHeight-2)}else t.innerHTML="",t.appendChild(this.spinner.render),this.spinner.show();this.spinner.options.maxValue&&(this.maxValue=Number(this.spinner.options.maxValue)),this.spinner.options.minValue&&(this.minValue=Number(this.spinner.options.minValue)),this.editColIndex=this.mainGrid.getColumnIndex(this.id),this.editRowIndex=e,this.editTd=t,
this.spinner.setValue(this.mainGrid.dataList._getCellData(e,this.id)),"select"!=this.options.editType&&"focus"!=this.options.editType||this.spinner.focus()}catch(t){r.w.printStackTrace(t,null,this.mainGrid)}},E.spinner.prototype._handleEndEdit_common=function(t){try{var e=this.spinner.getValue();if("number"==this.spinner.options.dataType){Number(e);this.options.customFormatter?(this.spinner.options.maxValue&&(this.maxValue=Number(this.spinner.options.maxValue)),this.spinner.options.minValue&&(this.minValue=Number(this.spinner.options.minValue)),!isNaN(this.maxValue)&&e>this.maxValue?e=this.maxValue+"":!isNaN(this.minValue)&&this.minValue>e&&(e=this.minValue)):!isNaN(this.maxValue)&&e>this.maxValue?e=this.maxValue+"":!isNaN(this.minValue)&&this.minValue>e&&(e=this.minValue)}else this.spinner.options.dataType;this.mainGrid.dataList.__setCellData(this.editRowIndex,this.id,e),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.id),this.spinner.hide()}catch(t){r.w.printStackTrace(t,null,this)}},E.spinner.prototype._handleCancelEdit=function(t){},E.spinner.prototype._handleEndEdit_focus=function(){try{return null}catch(t){r.w.printStackTrace(t,null,this)}},E.spinner.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},E.custom=function(){},E.custom.prototype.initializeCellInfo=function(t,e){try{!e&&t&&"function"==typeof t.getTagName&&"w2:column"==t.getTagName()&&(1==this.mainGrid.options.setCellInputTypeCustom?(this.parseTypeGetter(),this.cellManagerHashByRowIndex=[],this.cellManagerIDByRowIndex=[]):(this.parseTypeGetter(),this.cellManagerHashByID={},this.cellManagerHashByRowIndex={},this.cellManagerIDByRowIndex={}))}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.initializeCellManager=function(t,e){try{var i=e.inputType?e.inputType:e.tagName;if(t.id=e.id,t.colID=this.id,t._position={colIndex:this.mainGrid.getColumnIndex(this.colID),colID:this.id,realRowIndex:e.realRowIndex,displayRowIndex:e.displayRowIndex},t.parentColumnInfo=this,t.options.inputType=i,t.initializeInputType=this.getTagName(i),t.initializeInfo=e,"gridViewItemset"===e.itemTableType&&!e.itemSet)for(var o in t.initializeInfo.itemSet={nodeset:e.nodeset,label:e.label,value:e.value},t.options.itemSet=t.initializeInfo.itemSet,t.options.item=e.item,t.options.gridViewOptions={},t.options.itemTableType="gridViewItemset",e)t.options.gridViewOptions[o]=e[o];for(var o in e.options)t.options[o]=e.options[o];t.initFormatter()}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.getMapping=function(t,e){try{switch(t){case"text":return o.x.extend(e,WebSquare.uiplugin.cellInfo.text.prototype),!0;case"link":return o.x.extend(e,WebSquare.uiplugin.cellInfo.link.prototype),!0;case"checkbox":return o.x.extend(e,WebSquare.uiplugin.cellInfo.checkbox.prototype),!0;case"button":return o.x.extend(e,WebSquare.uiplugin.cellInfo.button.prototype),!0;case"image":return o.x.extend(e,WebSquare.uiplugin.cellInfo.image.prototype),!0;case"radio":return o.x.extend(e,WebSquare.uiplugin.cellInfo.radio.prototype),!0;case"select":return o.x.extend(e,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(e,WebSquare.uiplugin.cellInfo.select.prototype),!0;case"calendar":return o.x.extend(e,WebSquare.uiplugin.cellInfo.calendar.prototype),!0;case"textarea":return o.x.extend(e,WebSquare.uiplugin.cellInfo.textarea.prototype),!0;case"expression":return o.x.extend(e,WebSquare.uiplugin.cellInfo.expression.prototype),!0;case"textImage":return o.x.extend(e,WebSquare.uiplugin.cellInfo.textImage.prototype),!0;case"checkcombobox":return o.x.extend(e,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(e,WebSquare.uiplugin.cellInfo.checkcombobox.prototype),!0;case"autoComplete":return o.x.extend(e,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.x.extend(e,WebSquare.uiplugin.cellInfo.autoComplete.prototype),!0;default:return o.x.extend(e,WebSquare.uiplugin.cellInfo.text.prototype),!0}}catch(t){r.w.printStackTrace(t,null,this)}},
E.custom.prototype.getTagName=function(t){try{switch(t){case"text":return"input";case"link":return"anchor";case"button":return"trigger";case"select":return"selectbox";default:return t}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.parseTypeGetter=function(){try{this.options.typeGetter?(this.typeGetter=a.D.getGlobalFunction(this.options.typeGetter,this.scope_id),this.isValidTypeGetter=!0):(this.isValidTypeGetter=!1,0==this.options.setCellInputTypeCustom&&$l("Custom type 그리드 생성 중 오류가 발생하였습니다. typeGetter 속성이 정의되어 있지 않습니다.  gridView ["+this.mainGrid.id+"] column:["+this.id+"]"))}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.updateCellManagerHash=function(t,e,i,o){try{this.isValidTypeGetter?(this.cellManagerHashByID[t]=i,this.cellManagerHashByRowIndex[e]=i,this.cellManagerIDByRowIndex[e]=t):(this.cellManagerHashByRowIndex[e]=i,this.cellManagerIDByRowIndex[e]=t),o&&i.itemsetObj&&o.nodeset!==i.itemsetObj.nodeset&&i.setColumnNodeSet(o.nodeset,o.label,o.value)}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.createCellManager=function(t,e){try{var i=e.id,o=e.realRowIndex,s=new WebSquare.uiplugin.cellInfo(t,this.mainGrid,!0);if(this.mainGrid.options.senseReader&&"false"!==s.options.embeddedInput&&(s.options.embeddedInput=!0),this.getMapping(e.inputType,s)){if(this.initializeCellManager(s,e),s.initializeCellInfo(t,e.options),s.isLocked=!0,this.updateCellManagerHash(i,o,s),!0===s.options.embeddedInput){var a=e.itemSet;a&&"function"==typeof s.setColumnNodeSet&&s.setColumnNodeSet(a.nodeset,a.label,a.value,o)}return this.cellManagerHashByRowIndex[o]}var n=this.options.id,l=this.mainGrid.getColumnIndex(n);return $l("Custom type 그리드 생성 중 오류가 발생하였습니다. gridView ["+this.mainGrid.id+"] column:["+this.id+"] inputType:["+e.inputType+"] realRowIndex:["+o+"] colIndex["+l+"]"),!1}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.getCellManager=function(t){try{var e=t.managerID,i=t.element,o=t.rowIndex,s=t.realRowIndex,a=this.options.id,n=this.mainGrid.getColumnIndex(a),l=this.mainGrid.dataList.getCellData(o,n),h={colID:a,colIndex:n,rowIndex:o,displayRowIndex:t.rowIndex,realRowIndex:t.realRowIndex,value:l};try{var d,u;if(1!=this.mainGrid.options.setCellInputTypeCustom||this.isValidTypeGetter){if(this.cellManagerHashByID[e])return this.cellManagerHashByID[e];if(this.isValidTypeGetter){u=this.typeGetter(h);c=this.cellManagerIDByRowIndex[s];if(!u||c!==u.id){p=this.mainGrid.id+"_"+c;g=this.mainGrid.dom[p],m=null;null!=g&&(m=WebSquare.idCache[g.uuid]),m&&"function"==typeof m.remove&&m.remove(),delete this.mainGrid.dom[p],this.cellManagerHashByID[c]=null,this.cellManagerHashByRowIndex[s]=null}}else this.parseTypeGetter(),this.isValidTypeGetter&&(u=this.typeGetter(h))}else if(1==t.dynamicInputType){if((u=t.options).id="dynamic_"+u.inputType+"_"+o+"_"+n,this.cellManagerHashByRowIndex[s]){var c=this.cellManagerIDByRowIndex[s],p=this.mainGridId+c,g=this.mainGrid.dom[p],m=null;null!=g&&(m=WebSquare.idCache[g.uuid]),m&&"function"==typeof m.remove&&m.remove(),delete this.mainGrid.dom[p],this.cellManagerIDByRowIndex[s]=null,this.cellManagerHashByRowIndex[s]=null}}else if(this.cellManagerHashByRowIndex[s]&&!t.dynamicInputType)return this.cellManagerHashByRowIndex[s];return u?(u.isUDC||((d=1==this.mainGrid.options.setCellInputTypeCustom?this.cellManagerHashByRowIndex[s]:this.cellManagerHashByID[u.id])?(this.updateCellManagerHash(u.id,s,d,u.itemSet),d.isLocked):(u.realRowIndex=s,u.rowIndex=o,u.displayRowIndex=o,d=this.createCellManager(i,u))),1!=this.mainGrid.options.setCellInputTypeCustom&&(d.customValue=u.value)):d=this.createCellManager(i,{id:this.colID+"_"+s+"__default",inputType:"text",realRowIndex:s}),d}catch(t){return $l("Custom type 그리드 생성 중 오류가 발생하였습니다. gridView ["+this.mainGrid.id+"] column:["+this.id+"] realRowIndex:["+s+"] colIndex["+n+"]"),!1}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.setInnerHTML=function(t,e,i,o,s){try{
var a=this.mainGrid.getRealRowIndex(i),n=this.getCellManager({element:this.element,rowIndex:i,realRowIndex:a});if(!1===n)t.innerHTML="<nobr>"+e+"</nobr>";else{this.clearStyle(n,t);!0===this.isValidTypeGetter&&n.options.class&&this.mainGrid.addClass(t,n.options.class),n.setInnerHTML(t,e,i,o),null!=n.customValue&&(e=n.customValue,this.mainGrid.dataList.__setCellData(i,this.colID,e)),this.useCustomFormatter=n.useCustomFormatter,this.useCustomModelFormatter=n.useCustomModelFormatter,this.useEscapeFormatter=n.useEscapeFormatter}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.setEditMode=function(t,e){try{if(!this.internal){var i=this.mainGrid.getRealRowIndex(e),o=this.cellManagerHashByRowIndex[i];o&&o.setEditMode(t,e)}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.setPosition=function(){try{if(!this.internal){var t=this.mainGrid.getRealRowIndex(this.editRowIndex),e=this.cellManagerHashByRowIndex[t];e&&e.setPosition()}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype._handleEndEdit_common=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex)||this.editRowIndex,i=this.cellManagerHashByRowIndex[e];if(i)return i._handleEndEdit_common(t)}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype._handleEndEdit_focus=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex)||this.editRowIndex,i=this.cellManagerHashByRowIndex[e];i&&i._handleEndEdit_focus(t)}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype._handleCancelEdit=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex),i=this.cellManagerHashByRowIndex[e];i&&i._handleCancelEdit()}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.doDefaultAction=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex),i=this.cellManagerHashByRowIndex[e];i&&i.doDefaultAction()}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.clearStyle=function(t,e){try{"calendar"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_calendar")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_calendar"),e.setAttribute("editModeEvent","")),"select"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_select")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_select"),e.setAttribute("editModeEvent","")),"autoComplete"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_autoComplete")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_autoComplete"),e.setAttribute("editModeEvent","")),"checkcombobox"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_checkcombobox")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_checkcombobox"),e.setAttribute("editModeEvent",""))}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.validate=function(){try{if(!this.internal){var t=this.mainGrid.getRealRowIndex(this.editRowIndex),e=this.cellManagerHashByRowIndex[t];if(!e)return!0;switch(e.options.inputType){case"calendar":return e.validate();default:return!0}}}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype._getEditedValue=function(){try{if(!this.internal){var t=this.mainGrid.getRealRowIndex(this.editRowIndex),e=this.cellManagerHashByRowIndex[t];if(e&&e._getEditedValue)return e._getEditedValue()}return""}catch(t){r.w.printStackTrace(t,null,this)}},E.custom.prototype.refreshCellManagerHash=function(){try{for(var t=this.mainGrid.getRowCount(),e=0;e<t;e++)this.getCellManager({element:this.element,rowIndex:e,realRowIndex:this.mainGrid.getRealRowIndex(e)})}catch(t){r.w.printStackTrace(t,null,this)}},E.user=function(){},E.user.prototype.setInnerHTML=function(t,e,i,o,s){
var r,n=a.D.getGlobalFunction(this.options.customFormatter,this.scope_id),l=this.mainGrid._getGroupbyDisplayRowIndex(i),h=this.getDisplayData(e);"function"==typeof n?(this.useCustomFormatter=!0,r=n.call(this.mainGrid,e,h,l,o)):(this.useCustomFormatter=!1,r=h),t.innerHTML="<nobr>"+r+"</nobr>"},E.user.prototype.doDefaultAction=function(t){if("none"==this.mainGrid.options.focusMode){for(var e=u.B.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=this.mainGrid.getColumnIndex(e.getAttribute("col_id"))}else{var r=this.mainGrid.getLastFocusedCell();i=r.focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=r.focusedColIndex}this.mainGrid._getEditDisabled(i,s)||this.mainGrid.___getEditReadOnly(i,s)||u.B.fireEvent(this.mainGrid,"oncellclick",o,s,this.options.id)};var M=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(M.prototype,n.s.prototype),M.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.gridView",pluginName:"gridView",serializable:!0,userEvents:["oncellclick","oncelldblclick","onrightbuttonclick","ontextimageclick","ondateselect","oneditdblclick","oncellindexchange","onrowindexchange","oncolumnindexchange","onfilereadend","onscrollend","onscrollstart","onbeforeedit","oneditend","oneditkeydown","onafteredit","onscrolly","onscrollx","onsort","onbeforesort","onheaderclick","onheaderrightbuttonclick","onheaderdblclick","onfooterclick","onsubtotalclick","onsubtotaldblclick","onbodymouseover","onbodymouseout","ongroupby","ontoggleclick","onclick","onblankclick","onkeydown","onkeyup","onviewchange","onbeforepaste","onafterpaste","oncolumnwidthchange","onbeforecolumnmove","onaftercolumnmove","onaftercolumnresize","ondatadragstart","ondatadragover","ondatadrop","oncontextopen","oncontextclick","oneditkeyup"],rowNumVisible:!1,rowNumRowSpan:!0,rowNumHeaderValue:"",rowNumLocaleRef:"",rowNumBackgroundColor:"",rowNumStatusResize:!1,rowStatusVisible:!1,rowStatusRowSpan:!0,rowStatusColSpan:!1,rowStatusHeaderValue:"",rowStatusLocaleRef:"",overflowX:"auto",overflowY:"auto",fixedColumn:0,fixedColumnWithHidden:!0,fixedColumnNoBGColor:!1,fixedColumnScrollHidden:!1,fixedColumnNoMove:!1,rowNumStatusFixed:!0,fixedRightColumn:0,fixedRow:0,lastFixedRow:0,lastFixedRowStartIndex:0,resize:!0,rowResize:!1,baseNode:"vector",repeatNode:"data/INFO",valueNode:"",focusMode:"cell",selectedCellColor:"#FCA73C",selectedRowColor:"#FCA73C",oddEvenColorDisplay:!1,oddRowBackgroundColor:"#EFF7FF",evenRowBackgroundColor:"#FFFFFF",rowMouseOver:!1,rowMouseOverColor:"#ffff80",selectedCellOverColor:"",selectedRowOverColor:"",editModeEvent:"ondblclick",editModeEventIcon:"onclick",keyMoveEditMode:!1,enterKeyMove:"down",sortable:!1,sortHeaderDiv:!1,sortOrderReverse:!1,noSortInit:!1,showSortableImage:!1,preventMultisort:!1,useCtrlOnMultisort:!0,useCtrlKey:!0,sortedImagePosition:"",sortedIconPosition:"",sortEvent:"ondblclick",headerTooltipDisplay:!1,rowStatusTooltipDisplay:!1,tabKeyMove:"right",tooltipDisplay:!1,tooltipDisplayTime:0,tooltipClass:"",tooltipStyle:"",tooltipHide:"click",tooltipShowAlways:!1,tooltipShowAlwaysColumns:"",tooltipHeaderShowAlways:!1,tooltipFormatter:"",tooltipFormatterHeader:"",tooltipPositionX:"20",tooltipPositionY:"3+cellHeight",tooltipDisplayColumn:"",tooltipHeader:!1,showImageTooltip:!1,captionTitle:"",captionAuto:!1,noResultMessageVisibleAlways:!1,noResultMessageVisible:!1,noResultMessageExclude:"",noResultMessage:"",noResultMessageClass:"",noResultMessageStyle:"",hiddenClass:"",readOnly:"",readOnlyPriority:"",readOnlyBackgroundColor:"",readOnlyBackgroundImg:"",readOnlyBackgroundImgCSS:"",readOnlyTabIgnore:!1,ignoreNonEditableCell:!1,ignoreNonEditableCellTabEnter:!1,disabledPriority:"",disabledBackgroundColor:"",disabledFontColor:"",summary:"",footerCaption:"",footerCaptionAuto:!1,footerSummary:"",footerSummaryAuto:!1,drawLimitTime:70,drawLimitRow:4,loadCount:0,autoFit:"",autoFitMinWidth:"",autoFitFixYScroll:!1,fastScroll:"",
lazyDrawHiddenColumn:!1,defaultCellHeight:-1,defaultHeaderCellHeight:-1,hideHeader:!1,dataDragDrop:!1,dataDragDropOther:!1,dataDragDropSelf:!1,dataDragDropStatus:!1,dataDragSelect:!1,dataDragSelectAutoScroll:!1,dataDragSelectAutoScrollDPI:5,dataDragSelectAutoScrollPeriod:70,dataDragSelectAutoScrollDelay:50,dataDragSelectAutoScrollLevel:1300,dragDisplayColumn:"",dragStartFunction:"",dragEndFunction:"",headFiller:!1,focusMove:"true",focusFlow:"default",scrollMsg:"",visibleRowNum:"",visibleRowNumFix:!1,fixHeight:!1,fastEditMode:!1,iScrollMoveEffectTime:500,iScrollSlideTime:800,iScrollSlidePeriod:100,rollbackCommit:!0,numberCasting:!1,backgroundColorMode:"lazy",senseReader:!1,senseReaderLinkFocus:!1,useStartEndDiv:!0,showLastRow:!1,autoScope:!1,autoResizeEmbeddedInput:!1,servletPopup:!1,excelUploadPopupURL:"",advancedExcelUploadPopupURL:"",advancedExcelMultiUploadPopupURL:"",advancedExcelDownloadPopupURL:"",excelUploadURL:"",excelDownloadURL:"",csvDownloadURL:"",csvUploadPopupURL:"",csvUploadURL:"",advancedExcelUploadURL:"",advancedExcelDownloadURL:"",drilldownRealRowIndex:!0,drilldownRealRowIndexAll:!1,drilldownToggleScrollFix:!1,escape:!0,fixPrint:!1,xmlEncode:!1,wheelRows:3,wheelStop:!1,scrollByColumn:!1,scrollByColumnAdaptive:!1,rowNumWidth:"",rowStatusWidth:"",keepDefaultColumnWidth:!1,columnMove:!1,columnMoveWithFooter:!1,columnOrder:"",copyAmount:"",copyOption:"",copyType:"default",pasteOption:"",rowCopy:!1,customPasteFormatter:"",checkReadOnlyOnPaste:!1,checkDisabledOnPaste:!1,checkReadOnlyOnCut:!0,checkDisabledOnCut:!0,checkBlankRowOnPaste:!1,checkEditableInputClass:!1,checkOnCellClick:!1,setDefaultValueOnPaste:!1,preventAddRowOnPaste:!1,preventCopy:!1,preventPaste:!1,groupbyZone:!1,groupbyZoneSearch:!1,groupbyListVisibleRowNum:10,groupbyZoneMessage:"",groupbyZoneHeight:"50",groupbyMaxCount:-1,groupbyDisplayRowIndex:!1,plainText:!1,excludeDeletedRows:!1,excludeModifiedRows:!1,initFixedHeightByRowNum:-1,moveKeyEditMode:!1,moveKeyEditModeAll:!1,keepBeforeDisplayData:!1,touchScrollDelta:5,dataList:"",useFilterSearch:!1,useFilterList:!1,useFilterListSync:!1,useFilterListFormat:!1,filterListRowHeight:20,filterListVisibleRowNum:0,filterListWidth:0,caseSensitive:!1,displayValueOnUseFilterList:!1,customFilterListVisibleRowNum:10,showAllFilterList:!1,useFilterEmptyMsg:"",filterDisplayMode:"label",filterSearchTarget:"label",filterShowAlways:!1,duplicateColumnId:!1,filterFocusMode:"",focusOnSetData:!1,focusDefaultColumn:!1,focusAutoRemove:!1,scrollFix:!1,scrollRowHeight:!1,applyAllColumnStyle:!1,disabledScrollHidden:!1,hammerEnabled:!1,hammerPressTime:351,dynamic:!1,ignoreCellClick:!1,ignoreToggleOnDisabled:!1,adaptive:"",autoFitFilterList:!1,summaryAuto:!1,summaryOnlyAuto:!1,arrowMove:!1,filterBoxvisibleRowNum:4,groupbyFilterBox:!1,groupbyFilterBoxLocation:"bottom",groupbyFilterBoxLabelSize:3,customFilterBox:!1,fixAdaptive:!1,groupbyFilterBoxFormatter:"",showSortableUseFilter:!1,customFormatterRealRowIndex:!1,oddEvenColorMerged:!1,showCustomFilterReset:!1,setCellInputTypeCustom:!1,initStyle:!1,mergeCol:"",mergeRow:"",mergeCells:"never",noImageTooltip:!1,mergeCellsFixedCols:"never",mergeCellsFixedRows:"never",rowNumStatusUniqueId:!1,checkHeaderOnly:!1,checkAllType:"include",useDefaultStyle:!1,foldAll:!1,contextMenu:!1,useHeaderContextMenu:!1,contextMenuRowHeight:20,contextMenuAltClick:!1,titleAuto:!1,syncScroll:!1,disabledClass:"w2grid_default_disabled",readOnlyClass:"w2grid_default_readonly",selectByLabel:!1,syncWithScrollTrack:!1,aliasDataCollection:"",editInputClass:"",directEdit:!1,numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",useMaxLength:!1,noSelect:!1,scrollFocus:!1,postMsg:!1,useXHR:!1,preventDuplicateFocusedCell:!1,alwaysTriggerScrollStart:!1,CellClickFixScrollX:!1,drawType:"virtual",mergeRefreshAlways:!0,subtotalStyleFormatter:"",useImageClick:!1},M.prototype.initialize=function(t){if(this.initializeType="gridView",isNaN(parseInt(this.options.visibleRowNum,10))||(this.options.initFixedHeightByRowNum=-1),
this.options.initFixedHeightByRowNum>0&&""===this.options.visibleRowNum&&(this.options.visibleRowNum=this.options.initFixedHeightByRowNum),this.firstEmbeddedInputResize=!0,"none"===this.options.autoFit&&(this.options.autoFit=""),"native"===this.options.drawType&&(this.options.visibleRowNum="all"),"native"===this.options.copyType&&(this.options.noSelect=!1),t){for(var e=!1,i=!1,s=t.getChildNodes(),r=0;r<s.length;r++)"w2:header"!=s[r].getTagName()?"w2:gBody"!=s[r].getTagName()||(e=!0):i=!0;if(!e||!i)return this.uncompleted=!0,void(this.options.dynamic||$l(" gridView error : cannot find <w2:header> or <w2:gBody>.["+this.id+"]"))}if(this.options.dataList=this.options.dataList.wq_replaceAll("data:",""),this._dataList=null,this.options.dataList&&(this._dataList=this.modelControl.getDataComp(this.options.dataList,{type:"aliasDataCollection"})),this._dataList)switch(this._grid=this,this._dataList.addChild(this),this._dataList=WebSquare.DataCollection.api.getObj(this._dataList),this.successBinding=!0,this._dataList.initializeType){case"linkedDataList":this._linkedDataList=this._dataList,this._dataList=this._linkedDataList._dataList,this._dataList?(this.dataList=new WebSquare.uiplugin.mappingController(this),o.x.extend(this,WebSquare.uiplugin.linkedMappingController.prototype),o.x.extend(this.dataList,WebSquare.uiplugin.linkedMappingController.prototype),this.dataList._linkedDataList=this._linkedDataList):(this.successBinding=!1,this._dataList={});break;case"dataList":this.dataList=new WebSquare.uiplugin.mappingController(this),this.dataList.mappingCommonAPI()}else $l(" gridView error : invalid dataList("+this.options.dataList+").["+this.id+"]"),this.successBinding=!1,this._dataList={};this.skipPreActivate=!0;var a=this.options.dataList;null!=this.scope_obj&&(a=this.scope_obj.id+"_"+this.options.dataList),WebSquare.DataCollection.api.addRelation(this.id,a,!1),this.skipPreActivate=!1,this.myhelper=new WebSquare.korHelper,this._initialize()},M.prototype._initialize=function(t){this.focusedCellInfo={},this.extraData={grid:{},row:[],col:[],cell:[]},this.drilldown=new WebSquare.uiplugin.drilldown,"false"!=this.options.focusMove&&"horizontal"!=this.options.focusMove||(this.options.enterKeyMove="none"),this.options.groupbyFilterBox&&(this.groupbyFilterBox_select=null,this.groupbyFilterBox_history=[]),this.date=new Date,this.isDrillDown=!1,this.depthColumn="",this.showDepth="",this.removed=!1,this.useExpression=!1,this.colWidthList=[],this.gridWidth=0,this.resizeStarted=!1,this.headerHeight=0,this.footerHeight=0,this.hgap=[],this.autofitColumn=!1,this.autofitColumnIndexArr=[],this.autofitColumnWidthArr=[],this.autofitDone=!1,this.resizeStatus="init",this.scrollWidthSize=18,this.scrollLayerWidthSize=18,this.hiddenList=[],this.headerFocus=!1,this.headerObjArr=[],this.tmpSelectbox=null,this.noevent=!1,this.rowIndex=-1,this.lastIndex=-1,this.oelIndex=-1,this.initializeDrawController(),this.drawedRowLength=0,this.maxRowLength=0,this.drawSizeChanged=!1,this.drawSizeAdded=!1,this.isExistTextarea=!1,this.bodyHeight=0,this.scrollEvent=!0,this.isColMerge=!1,this.isColMergeAnd=!1,this.upperToLowerColumnRelation={},this.hasSubtotal=!1,this.startRowNumber=0,this.dataRowList=[],this.subtotalRowHash={},this.subtotalDataArr={},this.subtotalObj={},this.drawSetTimeoutKey=[],this.overElem=null,this.outElem=null,this.hasFooter=!1,this.footerDataObj=null,this.drawFooterStatus=!0,this.bScrollTop=-1,this.bScrollY=0,this.drawedTime=0,this.defaultColCnt=0,this.options.rowNumVisible&&this.defaultColCnt++,this.options.rowStatusVisible&&this.defaultColCnt++,this.loadCheck=[],this.beforeDataLength=-1,this.beforeMaxRowLength=-1,this.checkScrollStart=!0,this.editEnd=!1,this.lastOverSrc=null,this.headerInfoHash={},this.headerInfoHash2={},this.cellInfoHash={},this.cellInfoHash2={},this.expressionAssArr=[],this.labelColumnAssArr=[],this.rowStyleValueObj={},this.columnStyleValueObj={},this.cellStyleValueObj={},this.defaultStyleValueObj={},this.initStyleValueObj={},
this.adaptiveColumnStyleValueObj={},this.rowStyleFixedValueObj={},this.rowStyleDataValueObj={},this.columnStyleFixedValueObj={},this.columnStyleDataValueObj={},this.disabledCellStyleObj={},this.headerCellStyleValueObj={},this.headerCellClassObj={},this.rowStyleIndex=0,this.cellStyleIndex=0,this.rowStyleFixedIndex=0,this.rowStyleDataIndex=0,this.rowStyleArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.tdCellClassArr=[],this.columnClassObj={},this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.rowReadOnlyArr=[],this.cellReadOnlyArr=[],this.rowDisabledArr=[],this.cellDisabledArr=[],this.focusedCell=[],this.focusedRow=[],this.headerToBodyRelation={},this.bodyToHeaderRelation={},this.passiveColSpanRelation={},this.colMoveBolockedHeaderObj={},this.backupHeaderHTML={},this.expressionHeaderInfo={},this.columnOrder=[],this.isIE6=a.D.isIE("6"),"BackCompat"==document.compatMode&&(this.isIE6=!0),this.isIE7=a.D.isIE("7"),this.isIE6or7=this.isIE6||this.isIE7,this.isMobile=a.D.isMobile(),this.isWebKit=/webkit/.test(navigator.userAgent.toLowerCase()),this.tmpCnt=0,this.initFlag=!1,this.options.rowNumBackgroundColor=this.options.rowNumBackgroundColor.wq_trim(),this.options.selectedCellColor=this.options.selectedCellColor.wq_trim(),this.options.selectedRowColor=this.options.selectedRowColor.wq_trim(),this.options.oddRowBackgroundColor=this.options.oddRowBackgroundColor.wq_trim(),this.options.evenRowBackgroundColor=this.options.evenRowBackgroundColor.wq_trim(),this.options.rowMouseOverColor=this.options.rowMouseOverColor.wq_trim(),this.options.readOnlyBackgroundColor=this.options.readOnlyBackgroundColor.wq_trim(),this.options.disabledBackgroundColor=this.options.disabledBackgroundColor.wq_trim(),this.options.disabledFontColor=this.options.disabledFontColor.wq_trim(),a.D.getBoolean(this.options.focusOnSetData)&&(this.options.focusOnSetData=!0),this.options.senseReader&&(this.options.focusFlow="linear","all"===this.options.visibleRowNum&&(this.options.showLastRow=!0),this.element&&"false"!=this.element.getAttribute("autoScope")&&(this.options.autoScope=!0),this.senseReaderMode=!0),this.embeddedWidthObj={},this.options.sortable&&this.options.sortHeaderDiv&&(this.options.showSortableImage=!0,this.options.sortEvent="onclick"),this.radioGroupRepChk={},this.options.excelUploadPopupURL=this.options.excelUploadPopupURL||this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/fileUpload.jsp"),{baseServletURI:!0}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/fileUpload.html"),{baseURI:!0}),this.options.advancedExcelUploadPopupURL=this.options.advancedExcelUploadPopupURL||this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/advancedfileUpload.jsp"),{baseServletURI:!0}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/advancedfileUpload.html"),{baseURI:!0}),this.options.advancedExcelMultiUploadPopupURL=this.options.advancedExcelMultiUploadPopupURL||this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/advancedMultiUpload.html"),{baseURI:!0}),this.options.advancedExcelDownloadPopupURL=this.options.advancedExcelDownloadPopupURL||this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/download/advancedfileDownload.html"),{baseURI:!0}),this.options.excelUploadURL=this.options.excelUploadURL||WebSquare.baseServletURI+"excelToGrid.wq",this.options.excelDownloadURL=this.options.excelDownloadURL||WebSquare.baseServletURI+"xmlToExcel.wq",this.options.csvDownloadURL=this.options.csvDownloadURL||WebSquare.baseServletURI+"xmlToCSV.wq",this.options.csvUploadURL=this.options.csvUploadURL||WebSquare.baseServletURI+"csvToXML.wq",this.options.csvUploadPopupURL=this.options.csvUploadPopupURL||this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/csvfileUpload.jsp"),{baseServletURI:!0
}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/csvfileUpload.html"),{baseURI:!0}),this.options.advancedExcelUploadURL=this.options.advancedExcelUploadURL||WebSquare.baseServletURI+"excelToGrid2.wq",this.options.advancedExcelDownloadURL=this.options.advancedExcelDownloadURL||WebSquare.baseServletURI+"xmlToExcel2.wq",this.groupbyStatus={},this.groupbyZoneStatus={},this.groupbyDisplayOptions={},this.directItemChoiceKeyObj={},this.rowStatusColIDArr=[],this.cellIdList=[],this.firstOpenCustomFilter={},this.customFilterStatusObj={},this.beforeEditedCellInfo=null,this.hiddenAdaptiveList=[],this.adaptiveEmbeddedInputIdList=[],this.hideThresholdObj={},this.orgBodyHeightObj={},this.orgHeaderHeightObj={},this.orgFooterHeightObj={},this.orgSubtotalHeightObj={},this.oldOptions={},this.adaptiveGridType=0,this.tooltipPositionParse=!1,this.oneRowScrollHeight=20,this._manager=null,this.beforeEditedCellInfo=null,this.options.noResultMessage=this.options.noResultMessage||WebSquare.language.getMessage("Grid_noResultMessage")||"조회 결과가 없습니다.",this.options.scrollMsg=this.options.scrollMsg||WebSquare.language.getMessage("Grid_scrollMsg")||"화면 갱신 중 입니다...",this.cellMergeInfo={},this.cellMergeRealInfo={},this.tdMergeInfo={},this.mergeColObj={},this.mergeRowObj={},this.hiddenRowObj={length:0,extraRow:0,row:{},init:!1},this.hiddenCellObj={length:0,init:!1},!0===this.options.moveKeyEditModeAll&&(this.options.moveKeyEditMode=!0),this.filterEmptyStr=this.options.useFilterEmptyMsg||WebSquare.language.getMessage("GRID_useFilterEmptyMsg"),this.useFilterEmptyValueInfo={"":!0};var e=this.options.useFilterEmptyValue?this.options.useFilterEmptyValue.split(","):[];e.push("");for(var i=0;i<e.length;i++)e[i]=e[i].trim(),this.useFilterEmptyValueInfo[e[i]]=!0;this._regDetectDOM=new RegExp("<[^<]+>","i"),this._regRemoveDOM=new RegExp("<[/]{0,1}[^></]+[/]{0,1}>","g"),this._bindDrag=!1,this._subtotalDisplayFormat=""},M.prototype.setPreAction=function(){try{var t=this.render.offsetWidth,e=this.render.offsetHeight;if(this.startedDisplayNone)return this.initFlag=!0,this.initializeHead(),this.initializeFooter(),this.drawFooter(),void this.drawHeader();this.resizeObj={width:t,height:e,scrollLeft:0,scrollTop:0,clientWidth:this.render.clientWidth};var i=this.getElementById(this.id+"_head_table").getElementsByTagName("tr"),o=i[i.length-1],s=this.getElementById(this.id+"_body_table");this.gridLastTrBottomFix=s.offsetHeight-o.offsetTop-o.offsetHeight,this.setTableLayout(),this._handleScrollX(),this.setCellInfo(),this.setDataListCellInfo(),1==this.isDrillDown&&this.initDrilldown(),!0!==this.options.preventCopy&&!0!==this.options.noSelect||this.addClass("w2noselect")}catch(t){r.w.printStackTrace(t,null,this)}},M.prototype.setAction=function(){try{if(this.initializeEvent(),this.options.columnOrder&&this.setColumnOrder(this.options.columnOrder),this.options.mergeCol){for(var t=this.getColumnCount(),e=0;e<t;e++)this.mergeColObj[e]=!1;var i=this.options.mergeCol.split(",");for(e=0;e<i.length;e++){var o=i[e];isNaN(o)||(o=Number(o)),this.mergeCol(i[e],!0)}}var s=this.uuid;if(this.options.groupbyZone){this.groupbyZoneStatus.groupbyZoneRender=this.dom[this.id+"_groupbyZone_div"];var n=null!=this.options.groupbyZoneHeight.match("%"),l=parseInt(this.options.groupbyZoneHeight),h=l+"px";this.groupbyZoneStatus.groupbyZoneRender.style.height=h,n&&(this.groupbyZoneStatus.groupbyZoneRender.style.height=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight+"px");var d=WebSquare.style.getStyle(this.groupbyZoneStatus.groupbyZoneRender,"border-left-width").replace("px","");if(this.groupbyZoneStatus.groupbyZoneBorder=2*d,this.groupbyZoneStatus.groupbyZoneRender.style.width=this.resizeObj.clientWidth-this.groupbyZoneStatus.groupbyZoneBorder+"px",this.dom[this.id+"_main_div"]&&(this.dom[this.id+"_main_div"].style.top=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight+"px"),this.isIE6)try{
this.dom[this.id+"_main_div"].style.height=this.dom[this.id+"_main_div"].offsetHeight-this.groupbyZoneStatus.groupbyZoneRender.offsetHeight}catch(t){}if(this.dom[this.id+"_scrollY_div"].style.top="0px",this.options.groupbyZoneMessage){var u=document.createElement("div");u.innerHTML+=this.options.groupbyZoneMessage,u.className+=" w2grid_groupbyZone_message ",this.groupbyZoneStatus.groupbyZoneRender.appendChild(u),u.style.marginTop=-u.offsetHeight/2+"px",u.style.marginLeft=-u.offsetWidth/2+"px",this.groupbyZoneStatus.groupbyZoneMessageRender=u}if(this.options.groupbyZoneSearch){var c=document.getElementById(this.id+"_groupbyZone_search");this.groupbyZone_searchinput=new WebSquare.uiplugin.input(this.id+"_groupbyZone_searchinput",{className:"w2grid_groupbyZone_searchinput"}),requires("uiplugin.trigger"),this.groupbyZone_searchbtn=new WebSquare.uiplugin.trigger(this.id+"_groupbyZone_searchbtn",{className:"w2grid_groupbyZone_searchbtn"}),this.addControl(this.groupbyZone_searchinput),this.addControl(this.groupbyZone_searchbtn),c.innerHTML=this.groupbyZone_searchinput.toHTML()+this.groupbyZone_searchbtn.toHTML(),this.groupbyZone_searchbtn.activate(),this.groupbyZone_searchinput.activate();var p=this.groupbyZone_searchinput.uuid;this.groupbyZone_searchbtn.bind("onclick",(function(){WebSquare.idCache[p].show()}));var g=this.id;this.groupbyZone_searchinput.bind("onkeydown",(function(t){event.stopPropagation(t),a.D.setTimeout((function(){var t=WebSquare.idCache[s];t._groupbyZoneSearch(),t.groupbyZone_searchinput.focus()}),{key:g+"_groupbyZone_search",delay:50})})),this.groupbyZone_searchinput.hide()}}if(this.options.groupbyZone&&this.options.groupbyFilterBox){var m=this.getElementById(this.id+"_groupbyFilterBox_select");this.groupbyFilterBox_select=new WebSquare.uiplugin.selectbox(this.id+"_groupbyFilterBox_select",{className:"w2grid_groupbyFilterBox_select",labelWidthAuto:!1,readOnly:!0,direction:"top"===this.options.groupbyFilterBoxLocation?"down":"up",visibleRowNum:this.options.filterBoxvisibleRowNum}),this.addControl(this.groupbyFilterBox_select),m.innerHTML=this.groupbyFilterBox_select.toHTML(),this.groupbyFilterBox_select.activate(),this.groupbyFilterBox_select.bind("onclick",(function(t){this.handleClickEvent()})),this.groupbyFilterBox_select.bind("onchange",(function(){WebSquare.idCache[s].applyFilterHistory()}));var f=this.getElementById(this.id+"_groupbyFilterBox_div");"bottom"===this.options.groupbyFilterBoxLocation?this.dom[this.id+"_main_div"].style.bottom=this.scrollLayerWidthSize+f.offsetHeight+"px":"top"===this.options.groupbyFilterBoxLocation&&(this.dom[this.id+"_main_div"].style.top=l+f.offsetHeight+"px",this.dom[this.id+"_main_div"].style.bottom=this.scrollLayerWidthSize+"px",this.groupbyZoneStatus.groupbyZoneRender.style.top=f.offsetHeight+"px");var b=this.getElementById(this.id+"_groupbyFilterBox_main"),y=this.getElementById(this.id+"_groupbyFilterBox_buttons");b.style.paddingLeft=y.offsetWidth+"px";var v=this.getElementById(this.id+"_groupbyFilterBox_apply"),w=this.getElementById(this.id+"_groupbyFilterBox_delete");v.onclick=function(){var t=WebSquare.idCache[s];this.checked?t.applyFilterHistory():t.groupbyStatus.grouped?t.clearGroupby():t._dataList.clearFilter()},w.onclick=function(){WebSquare.idCache[s].clearFilterHistory()},this.handlerResize_drawInitializer()}for(e=0;e<this.oneRowDataLength;e++){var S=this.getColumnID(e),C=this.getCellInfo(e);if(""!=this.options.hiddenClass||""!=C.options.hiddenClass){var x=this.options.hiddenClass;""!=C.options.hiddenClass&&(x=C.options.hiddenClass);var _=this._getRealColIndex("body",S)+this.defaultColCnt,I=null!=this.bodyToHeaderRelation[S]?this.getHeaderLayer(this.bodyToHeaderRelation[S]):null;this.hiddenList[_]?null==I||this.hasClass(I,x)||this.addClass(I,x):null!=I&&this.hasClass(I,x)&&this.removeClass(I,x)}}!this.startedDisplayNone&&this.getRowCount&&this.getRowCount()>0&&this.notifyDataChanged({refreshScroll:!0}),
!this.startedDisplayNone&&this.options.focusOnSetData&&this._setFocusedCell(0,0),this.successBinding&&this._dataList&&this._dataList.options.initRowPosition&&this._dataList.broadcast({linkedDataList:["notifyRowPositionChanged"]});var T=WebSquare.BootLoader.fullViewed||!1,k=a.D.fullViewed||!1;if(T||k||!this.startedDisplayNone&&this.checkAdaptiveGridType()&&(""==this.options.adaptive&&0==Object.keys(this.hideThresholdObj).length||(this.oldOptions.headerColBorder="",this.oldOptions.bodyColBorder="",this.setAdaptive(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive)))),1==this.options.summaryAuto){var D=this.getHeaderValueList(),L="",W="";for(e=0;e<D.length;e++)L.length>0&&(W=","),L=L+W+D[e];this.setSummary(L)}if(this.changeCount=0,a.D.getBoolean(this.options.captionAuto)){for(D=this.getHeaderValueList(),L="",W="",e=0;e<D.length;e++)L.length>0&&(W=","),L=L+W+D[e];this.options.captionTitle?this.setCaption(this.options.captionTitle+WebSquare.language.getMessage("Grid_caption2")+L+WebSquare.language.getMessage("Grid_caption")):this.setCaption(L+WebSquare.language.getMessage("Grid_caption"))}if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var A=document.getElementById(this.id).style.cssText,E=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:A,className:E}}this.startedDisplayNone||this._setVisibleRowNumFix(),this.options.noResultMessageVisibleAlways&&this.displayNoResultMessage()}catch(t){r.w.printStackTrace(t,null,this)}},M.prototype.setDataList=function(){try{if(!this.successBinding&&(this._dataList=this.modelControl.getDataComp(this.options.dataList),this._dataList)){switch(this._grid=this,this._dataList.addChild(this),this.successBinding=!0,this._dataList.initializeType){case"linkedDataList":this._linkedDataList=this._dataList,this._dataList=this._linkedDataList._dataList,this._dataList?(this.dataList=new WebSquare.uiplugin.mappingController(this),o.x.extend(this,WebSquare.uiplugin.linkedMappingController.prototype)):(this.successBinding=!1,this._dataList={});break;case"dataList":this.dataList=new WebSquare.uiplugin.mappingController(this),this.dataList.mappingCommonAPI()}for(var t=0;t<this.oneRowDataLength;t++)this.getCellInfo(t).setDataListCellRefresh(this.getCellInfo(t).element);this.render&&this.notifyDataChanged({refreshScroll:!0})}}catch(t){r.w.printStackTrace(t,null,this)}},M.prototype.resetDataList=function(){try{this.successBinding=!1,this.setDataList()}catch(t){r.w.printStackTrace(t,null,this)}},M.prototype.serialize=function(){return this.focusedCell},M.prototype.restore=function(t){try{for(var e=0,i=t.length;e<i;e++)this._setFocusedCell(t[e].focusedRowIndex,t[e].focusedColIndex,null,{useShiftKey:!0})}catch(t){return r.w.printStackTrace(t),!1}return!0},o.x.extend(M.prototype,h.prototype),o.x.extend(M.prototype,p.prototype),o.x.extend(M.prototype,g.prototype),o.x.extend(M.prototype,m.prototype),o.x.extend(M.prototype,f.prototype),o.x.extend(M.prototype,b.prototype),o.x.extend(M.prototype,y.prototype),o.x.extend(M.prototype,v.prototype),o.x.extend(M.prototype,w.prototype),o.x.extend(M.prototype,C.prototype),o.x.extend(M.prototype,x.prototype),o.x.extend(M.prototype,_.prototype),o.x.extend(M.prototype,T.prototype),o.x.extend(M.prototype,k.prototype)},3750:function(t,e,i){"use strict";i.d(e,{v:function(){return l}});var o=i(484),s=(i(1974),i(5948)),r=i(1454),a=i(8683),n=i(9075),l=function(t){this._grid=t};l.prototype.getRealRowIndex=function(t){try{var e;if(this._grid.groupbyStatus&&this._grid.groupbyStatus.grouped){for(var i in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[i])return this._grid._dataList.getRealRowIndex(t);e=this._grid.groupbyStatus.groupedRowIndexArr[t]}else e=this._grid._dataList.getRealRowIndex(t);return e}catch(t){s.w.printStackTrace(t)}},l.prototype.getTotalRow=function(){try{return this._grid._dataList.getTotalRow()}catch(t){
s.w.printStackTrace(t)}},l.prototype.getTotalCol=function(){try{return this._grid.oneRowDataLength}catch(t){s.w.printStackTrace(t)}},l.prototype.getRowCount=function(){try{return this._grid._dataList.getDataLength()}catch(t){s.w.printStackTrace(t)}},l.prototype._getData=function(t,e){try{e=this._grid.getColumnID(e);var i=this._grid.cellInfoHash[e]||{options:{}};if((1!=this._grid.options.moveKeyEditModeAll||"checkbox"!=i.options.inputType&&"radio"!=i.options.inputType)&&this._grid.editEndBeforeGetData(),i&&"expression"==i.options.inputType)return i.getExpressionValue(t);var o=this._grid._dataList._getData(t,e);return null==o&&(o=""),o}catch(t){s.w.printStackTrace(t)}},l.prototype.getCellData=function(t,e,i){try{e=this._grid.getColumnID(e);return"2"==(i=null==i||void 0===i?"0":i+"")?this._getCellData(t,e,i):this._grid.options&&"grid"===this._grid.options.pluginName&&this._grid.isDrillDown&&this._grid.options.drilldownRealRowIndex&&!this._grid._linkedDataList?this._getCellData(t,e,"0"===i?3:i):this._getCellData(t,e,i)}catch(t){s.w.printStackTrace(t)}},l.prototype._getCellData=function(t,e,i){try{e=this._grid.getColumnID(e);if("2"==(i=null==i||void 0===i?"0":i+""))return this._grid._getCellDisplayData(t,e);var o=this._grid.getRealRowIndex(t);return"3"!=i&&null!=o&&(t=o),this._getData(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.getOriginalCellData=function(t,e){try{e=this._grid.getColumnID(e);return this._grid._dataList.getOriginalCellData(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.getColCnt=function(){try{for(var t=0,e=this._grid.htmlInfo?this._grid.htmlInfo.head.rowArr[0]:this._grid.struct.head.rowArr[0],i=0;i<e.length;i++){var o=e[i];t+=parseInt(o.colSpan,10)||1}return t}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getColData=function(t,e){try{t=this._grid.getColumnID(t);return this._grid._dataList.getColData(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.getRowData=function(t,e){try{for(var i=[],o=0;o<this._grid.getColumnCount();o++)"displayData"!=e?i.push(this.getCellData(t,o)):i.push(this._grid._getCellDisplayData(t,o));return i}catch(t){s.w.printStackTrace(t)}},l.prototype._getRowData=function(t,e){try{for(var i=[],o=0;o<this._grid.getColumnCount();o++)"displayData"!=e?i.push(this._getData(t,o)):i.push(this._grid._getDisplayData(t,o));return i}catch(t){s.w.printStackTrace(t)}},l.prototype.getDataRow=function(t){try{return this._grid._dataList.getDataRow(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getMatchedData=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedData(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.getUnmatchedData=function(t,e,i,o,r){try{return this._grid._dataList.getUnmatchedData(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.getMatchedColumnData=function(t,e,i,o,r,a){try{return this._grid._dataList.getMatchedColumnData(t,e,i,o,r,a)}catch(t){s.w.printStackTrace(t)}},l.prototype.getUnmatchedColumnData=function(t,e,i,o,r,a){try{return this._grid._dataList.getUnmatchedColumnData(t,e,i,o,r,a)}catch(t){s.w.printStackTrace(t)}},l.prototype.getMatchedIndex=function(t,e,i,o,r){try{return this._grid._dataList.getMatchedIndex(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.getUnmatchedIndex=function(t,e,i,o,r){try{return this._grid._dataList.getUnmatchedIndex(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.getRangeData=function(t,e,i){try{var o=[];if(t>e){var r=e;e=t,t=r}t<0&&(t=0),e>this._grid.getDataLength()&&(e=this._grid.getDataLength());for(var a=t;a<e;a++)o=o.concat(this.getRowData(a,i));return o}catch(t){s.w.printStackTrace(t)}},l.prototype.getAllData=function(){try{return this._grid._dataList.getAllData()}catch(t){s.w.printStackTrace(t)}},l.prototype.getColumnDistinctDataArray=function(t){try{t=this._grid.getColumnID(t);return this._grid._dataList.getColumnDistinctDataArray(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getRangeXML=function(t,e){try{return this._grid._dataList.getRangeXML(t,e)
}catch(t){s.w.printStackTrace(t)}},l.prototype.getMatchedXML=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedXML(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.getUnmatchedXML=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getUnmatchedXML(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.getRowXML=function(t){try{return this._grid._dataList.getRowXML(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getAllXML=function(){try{return this._grid._dataList.getAllXML()}catch(t){s.w.printStackTrace(t)}},l.prototype.getRowJSON=function(t){try{return this._grid._dataList.getRowJSON(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getAllJSON=function(){try{return this._grid._dataList.getAllJSON()}catch(t){s.w.printStackTrace(t)}},l.prototype.getRangeJSON=function(t,e){try{return this._grid._dataList.getRangeJSON(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.getMatchedJSON=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedJSON(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.getUnmatchedJSON=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getUnmatchedJSON(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.getRowArray=function(t){try{return this._grid._dataList.getRowArray(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getAllArray=function(){try{return this._grid._dataList.getAllArray()}catch(t){s.w.printStackTrace(t)}},l.prototype.getRangeArray=function(t,e){try{return this._grid._dataList.getRangeArray(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.getMatchedArray=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedArray(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.getUnmatchedArray=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getUnmatchedArray(t,e,i,o,r)}catch(t){s.w.printStackTrace(t)}},l.prototype.setCellData=function(t,e,i,o,r,a,n,l){try{e=this._grid.getColumnID(e);if(this._grid._linkedDataList){var h=this._grid._linkedDataList.filteredRowIndexArr[t];"number"!=typeof(t=this._grid._dataList.getFilteredRowIndex(h))&&(t=h)}this._setCellData(t,e,i,null,o,r,a,n,l)}catch(t){s.w.printStackTrace(t)}},l.prototype._setCellData=function(t,e,i,o,a,n,l,h,d){try{null==i&&(i=""),null==this._grid.editedCell||this._grid.getCellOption(t,e,"embeddedInput")||this._grid.editedCell.handleCancelEdit();var u,c=this._grid._dataList.getTotalRow(),p=this._grid._dataList.getTotalCol();u=this._grid.options&&"grid"===this._grid.options.pluginName&&this._grid.isDrillDown&&this._grid.options.drilldownRealRowIndex&&!this._grid._linkedDataList?t:this._grid.getRealRowIndex(t);var g=t,m="",f=(e=this._grid.getColumnID(e),this._grid.getColumnIndex(e)),b=this._grid._dataList.getColumnIndex(e),y=this._grid.groupbyStatus.grouped?u:t;if(this._grid.isDrillDown&&this._grid._dataList.options.depthColumn?m=this.getCellData(u,e,"3"):y>=0&&y<c&&b>=0&&b<p&&(m=this.getCellData(t,e)),y>=0&&y<c&&b>=0&&b<p){var v=this._grid.cellInfoHash[this._grid.tdIdList[f]]||{options:{}},w=v.options.inputType||"text";if(("text"==w||"textImage"==w||"drilldown"==w)&&"all"==v.options.applyFormat&&!v.options.embeddedInput){var S=this._grid.getInput(v);m=v.formatter.format(m),m=S.validator.validateString(m)}var C=this._grid.getColumnOption(v.options.col_id,"dataType");if("bigDecimal"==C&&"string"==typeof i?i=WebSquare.bigDecimal(i).toString():"bigDecimal"==C&&($l("If dataType is bigDecimal, data must be entered to String.["+this.id+"]"),i=WebSquare.bigDecimal(i).toString()),i.toString().replace(/\r(\n)?/,"\n")!==m.toString().replace(/\r(\n)?/,"\n")){var x=t;if(this._grid.isDrillDown&&this._grid._dataList.options.depthColumn&&(x=u),this._grid.groupbyStatus.grouped?this._grid._dataList._setCellData({filteredRowIndex:u,colID:e,value:i,direction:a,skipBroadCast:n,noEvent:l,excludeId:h,realRowIndex:!0,notifyRowIndex:t,skipInstance:d
}):this._grid._dataList._setCellData(x,e,i,a,n,l,h,d),null==this._grid._dataList.getColumnID(e)&&this._grid.notifyCellChanged(g,f),r.B.fireEvent(this._grid,"onchange",t,f,i,m),"radio"==v.options.inputType&&v.options.groupName&&v.options.trueValue==i&&(v.resetOthers(t),this._grid.radioGroupRepChk[v.options.groupName]&&this.setCellData(t,v.options.groupName,v.options.groupValue)),this._grid.radioGroupRepChk[v.options.id]){for(var _=this._grid.getColumnCount(),I=0;I<_;I++){var T=this._grid.cellInfoHash[this._grid.tdIdList[I]]||{options:{}};if("radio"==T.options.inputType&&T.options.groupName==v.options.id&&T.options.groupValue==i){this.setCellData(t,I,T.options.trueValue,a,n,l,h,d);break}}I==_&&this._grid._resetRadioGroup(t,v.id,!1)}if(this._grid.isDrillDown)if(this._grid.drilldown.options.depthColumn==f)this._grid.notifyDataChanged({keepTop:!0}),0==this._grid.getDataLength()&&this._grid.removeFocusedCell(),this._grid.setScrollYHeight();else if("checkbox"==v.options.inputType&&v.options.setRecursive)for(var k=this._grid.drilldown.getChildRowArr(t,!0),D=0;D<k.length;D++)this._getData(k[D],f)!=i&&this._setCellData(k[D],f,i,o,a,n,l,h,d)}else null==this._grid.editedCell||o||this._grid.notifyCellChanged(g,f)}}catch(t){s.w.printStackTrace(t)}},l.prototype.__setCellData=function(t,e,i,o,r,a,n){try{var l;e=this._grid.getColumnID(e);this._grid._linkedDataList?(l=this._grid._linkedDataList.filteredRowIndexArr[t],"number"!=typeof(t=this._grid._dataList.getFilteredRowIndex(l))&&(t=l)):l=this._grid.dataList.getRealRowIndex(t),this._grid.options&&"grid"===this._grid.options.pluginName&&this._grid.isDrillDown&&this._grid.options.drilldownRealRowIndex&&!this._grid._linkedDataList&&(t=l),this._setCellData(t,e,i,null,o,r,a,n)}catch(t){s.w.printStackTrace(t)}},l.prototype.setOriginalCellData=function(t,e,i){try{e=this._grid.getColumnID(e);this._grid._dataList.setOriginalCellData(t,e,i)}catch(t){s.w.printStackTrace(t)}},l.prototype._setOriginalCellData=function(t,e,i){try{e=this._grid.getColumnID(e);this._grid._dataList._setOriginalCellData(t,e,i)}catch(t){s.w.printStackTrace(t)}},l.prototype.setColumnDefaultValue=function(t,e){try{t=this._grid.getColumnID(t);this._grid._dataList.setColumnDefaultValue(t,e)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setRowData=function(t,e,i){try{this._grid._dataList.setRowData(t,e,i)}catch(t){s.w.printStackTrace(t)}},l.prototype.setDataFile=function(t,e){try{t=this._grid._dataList.toArray(t);for(var i,o=[],r=0;r<this._grid.oneRowDataLength;r++){"expression"==(n=this._grid.getCellInfo(r)).options.inputType&&o.push(r)}i=t.length/this._grid.oneRowDataLength;for(r=0;r<o.length;r++)for(var a=0;a<i;a++){t[u=a*this._grid.oneRowDataLength+parseInt(o[r],10)]=""}for(r=0;r<this._grid.oneRowDataLength;r++){var n,l=(n=this._grid.getCellInfo(r)).options.dataType;if("select"==n.options.inputType){var h=[];for(a=0;a<n.itemArr.length;a++){h[(d=n.itemArr[a]).label]=d.value}for(a=0;a<i;a++){t[u=a*this._grid.oneRowDataLength+r]=h[t[u]]}}else if("checkcombobox"==n.options.inputType){for(h=[],a=0;a<n.itemArr.length;a++){var d;h[(d=n.itemArr[a]).label]=d.value}for(a=0;a<i;a++){for(var u=a*this._grid.oneRowDataLength+r,c=[],p=t[u].split(n.separator),g=0;g<p.length;g++)c.push(h[p[g]]);t[u]=c.join(n.separator)}}if(""!=n.options.displayFormat)for(a=0;a<i;a++){var m,f=t[u=a*this._grid.oneRowDataLength+r],b=n.options.displayFormat;m="number"==l||"bigDecimal"==l?WebSquare.text.unformatCurrency(b,f):"date"==l?WebSquare.text.unformatDate(b,f):"time"==l?WebSquare.text.unformatTime(b,f):WebSquare.text.unformatText(b,f),t[u]=m}}this._grid._dataList.setData(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.setData=function(t,e,i){try{this._grid._dataList.setData(t,e,i)}catch(t){s.w.printStackTrace(t)}},l.prototype.insertData=function(t,e){try{this._grid._dataList.insertData(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype._insertData=function(t,e,i){try{this._grid._dataList._insertData(t,e,i)}catch(t){s.w.printStackTrace(t)}},
l.prototype.getDataLength=function(){try{var t;if(this._grid.successBinding)if(this._grid.groupbyStatus&&this._grid.groupbyStatus.grouped){for(var e in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[e])return this._grid._dataList.getDataLength();t=this._grid.groupbyStatus.groupedRowIndexArr.length}else t=this._grid._dataList.getDataLength();else t=0;return t}catch(t){s.w.printStackTrace(t)}},l.prototype.setRowXML=function(t,e,i){try{this._grid._dataList.setRowXML(t,e,i)}catch(t){s.w.printStackTrace(t)}},l.prototype.setXML=function(t,e,i){try{if("grid"==this._grid.initializeType&&i&&i.ref&&(this._grid.options.ref=i.ref,this._grid._dataList.options.ref=i.ref,i.baseNode&&(this._grid.options.baseNode=i.baseNode,this._grid._dataList.options.baseNode=i.baseNode),i.repeatNode&&(this._grid.options.repeatNode=i.repeatNode,this._grid._dataList.options.repeatNode=i.repeatNode),i.aliasDataCollection&&(this._grid.options.aliasDataCollection=i.aliasDataCollection,this._grid._dataList.options.aliasDataCollection=i.aliasDataCollection),this._grid._setRef(),this._grid._dataList.repeatNodeTagName=this.repeatNodeTagName),null==t)return void n.k.printLog("[WebSquare.uiplugin.mappingController.setXML] XML is null["+this.id+"]");var o=this._grid.xmlData2ArrData(t);if(void 0===o)return void n.k.printLog("[WebSquare.uiplugin.mappingController.setXML] DataArray which converted from XML is undefined.["+this.id+"]");this.setData(o,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.insertXML=function(t,e){try{this._grid._dataList.insertXML(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.setJSON=function(t,e){try{if(null==t)return void n.k.printLog("[WebSquare.uiplugin.mappingController.setJSON] JSON is null["+this.id+"]");var i=this._grid.jsonData2ArrData(t);if(void 0===i)return void n.k.printLog("[WebSquare.uiplugin.mappingController.setJSON] DataArray which converted from JSON is undefined.["+this.id+"]");this.setData(i,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.setRowJSON=function(t,e,i){try{this._grid._dataList.setRowJSON(t,e,i)}catch(t){s.w.printStackTrace(t)}},l.prototype.insertJSON=function(t,e){try{this._grid._dataList.insertJSON(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.rowMoveUp=function(t){try{this._grid._dataList.rowMoveUp(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.rowMoveDown=function(t){try{this._grid._dataList.rowMoveDown(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.insertRow=function(t,e){try{e=e||{};return this._grid.options.insertIntoSortedRow&&(e.insertIntoSortedRow=this.options.insertIntoSortedRow),"grid"==this.initializeType&&this.options.ref&&1==this.repeatNodeTagNameFilter&&(t=null),this._grid._dataList.insertRow(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.removeRow=function(t,e){try{return this._grid._dataList.removeRow(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.removeRows=function(t){try{return this._grid._dataList.removeRows(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.removeAll=function(){try{return this._grid._dataList.removeAll()}catch(t){s.w.printStackTrace(t)}},l.prototype.removeRange=function(t,e){try{return this._grid._dataList.removeRange(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.reform=function(){try{this._grid._dataList.reform()}catch(t){s.w.printStackTrace(t)}},l.prototype.undoRow=function(t){try{this._grid._dataList.undoRow(t)}catch(t){s.w.printStackTrace(t)}},l.prototype._undoRow=function(t){try{this._grid._dataList._undoRow(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.undoAll=function(){try{this._grid._dataList.undoAll()}catch(t){s.w.printStackTrace(t)}},l.prototype.getRowStatusValue=function(t){try{var e=this._grid._getGroupbyDisplayRowIndex(t);return this._grid._dataList.getRowStatusValue(e)}catch(t){s.w.printStackTrace(t)}},l.prototype._getRowStatusValue=function(t){try{return this._grid._dataList._getRowStatusValue(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getRowStatus=function(t){try{
var e=this._grid._getGroupbyDisplayRowIndex(t);return this._grid._dataList.getRowStatus(e)}catch(t){s.w.printStackTrace(t)}},l.prototype._getRowStatus=function(t){try{return this._grid._dataList._getRowStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getRowIndexByStatus=function(t){try{return this._grid._dataList.getRowIndexByStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.getInsertedIndex=function(){try{return this.getRowIndexByStatus("C")}catch(t){s.w.printStackTrace(t)}},l.prototype.getUpdatedIndex=function(){try{return this.getRowIndexByStatus("U")}catch(t){s.w.printStackTrace(t)}},l.prototype.getDeletedIndex=function(){try{return this.getRowIndexByStatus("DV")}catch(t){s.w.printStackTrace(t)}},l.prototype.getOnlyDeletedIndex=function(){try{return this.getRowIndexByStatus("D")}catch(t){s.w.printStackTrace(t)}},l.prototype.getVoidIndex=function(){try{return this.getRowIndexByStatus("V")}catch(t){s.w.printStackTrace(t)}},l.prototype.getModifiedIndex=function(){try{return this.getRowIndexByStatus("CUD")}catch(t){s.w.printStackTrace(t)}},l.prototype.getInsertedData=function(){try{return this._grid._dataList.getInsertedData()}catch(t){s.w.printStackTrace(t)}},l.prototype.getInsertedXML=function(){try{return this._grid._dataList.getInsertedXML()}catch(t){s.w.printStackTrace(t)}},l.prototype.getInsertedJSON=function(){try{return this._grid._dataList.getInsertedJSON()}catch(t){s.w.printStackTrace(t)}},l.prototype.getInsertedArray=function(){try{return this._grid._dataList.getInsertedArray()}catch(t){s.w.printStackTrace(t)}},l.prototype.getDeletedData=function(){try{return this._grid._dataList.getDeletedData()}catch(t){s.w.printStackTrace(t)}},l.prototype.getDeletedXML=function(){try{return this._grid._dataList.getDeletedXML()}catch(t){s.w.printStackTrace(t)}},l.prototype.getDeletedJSON=function(){try{return this._grid._dataList.getDeletedJSON()}catch(t){s.w.printStackTrace(t)}},l.prototype.getDeletedArray=function(){try{return this._grid._dataList.getDeletedArray()}catch(t){s.w.printStackTrace(t)}},l.prototype.getRemovedXML=function(){try{return this._grid._dataList.getRemovedXML()}catch(t){s.w.printStackTrace(t)}},l.prototype.getRemovedJSON=function(){try{return this._grid._dataList.getRemovedJSON()}catch(t){s.w.printStackTrace(t)}},l.prototype.getRemovedArray=function(){try{return this._grid._dataList.getRemovedArray()}catch(t){s.w.printStackTrace(t)}},l.prototype.getVoidData=function(){try{return this._grid._dataList.getVoidData()}catch(t){s.w.printStackTrace(t)}},l.prototype.getVoidXML=function(){try{return this._grid._dataList.getVoidXML()}catch(t){s.w.printStackTrace(t)}},l.prototype.getVoidJSON=function(){try{return this._grid._dataList.getVoidJSON()}catch(t){s.w.printStackTrace(t)}},l.prototype.getVoidArray=function(){try{return this._grid._dataList.getVoidArray()}catch(t){s.w.printStackTrace(t)}},l.prototype.getOnlyDeletedData=function(){try{return this._grid._dataList.getOnlyDeletedData()}catch(t){s.w.printStackTrace(t)}},l.prototype.getOnlyDeletedXML=function(){try{return this._grid._dataList.getOnlyDeletedXML()}catch(t){s.w.printStackTrace(t)}},l.prototype.getOnlyDeletedJSON=function(){try{return this._grid._dataList.getOnlyDeletedJSON()}catch(t){s.w.printStackTrace(t)}},l.prototype.getOnlyDeletedArray=function(){try{return this._grid._dataList.getOnlyDeletedArray()}catch(t){s.w.printStackTrace(t)}},l.prototype.getUpdatedData=function(){try{return this._grid._dataList.getUpdatedData()}catch(t){s.w.printStackTrace(t)}},l.prototype.getUpdatedXML=function(){try{return this._grid._dataList.getUpdatedXML()}catch(t){s.w.printStackTrace(t)}},l.prototype.getUpdatedJSON=function(){try{return this._grid._dataList.getUpdatedJSON()}catch(t){s.w.printStackTrace(t)}},l.prototype.getUpdatedArray=function(){try{return this._grid._dataList.getUpdatedArray()}catch(t){s.w.printStackTrace(t)}},l.prototype.getModifiedData=function(){try{return this._grid._dataList.getModifiedData()}catch(t){s.w.printStackTrace(t)}},
l.prototype.getModifiedXML=function(){try{return this._grid._dataList.getModifiedXML()}catch(t){s.w.printStackTrace(t)}},l.prototype.getModifiedJSON=function(){try{return this._grid._dataList.getModifiedJSON()}catch(t){s.w.printStackTrace(t)}},l.prototype.getModifiedArray=function(){try{return this._grid._dataList.getModifiedArray()}catch(t){s.w.printStackTrace(t)}},l.prototype._setRowStatus=function(t,e){try{return this._grid._dataList._setRowStatus(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype._initRowStatus=function(t){try{this._grid._dataList._initRowStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.initRowStatus=function(t){try{this._grid._dataList.initRowStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype._createRowStatus=function(t){try{this._grid._dataList._createRowStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype._updateRowStatus=function(t){try{this._grid._dataList._updateRowStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.removeRowStatus=function(t){try{return this._grid._dataList.removeRowStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.deleteRow=function(t){try{this._grid._dataList.deleteRow(t)}catch(t){s.w.printStackTrace(t)}},l.prototype._deleteRowStatus=function(t){try{this._grid._dataList._deleteRowStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.undeleteRow=function(t){try{this._grid._dataList.undeleteRow(t)}catch(t){s.w.printStackTrace(t)}},l.prototype._undeleteRowStatus=function(t){try{this._grid._dataList._undeleteRowStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.modifyAllStatus=function(t){try{this._grid._dataList.modifyAllStatus(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.modifyRangeStatus=function(t,e,i){try{var o=[],a=this.getDataLength()+1;if(0<=t&&e<a)for(var n=t;n<e;n++){var l=this.getRealRowIndex(n),h=this._setRowStatus(l,i);i!=h&&o.push({rowIndex:n,newRowStatus:i,oldRowStatus:h})}r.B.fireEvent(this,"onrowstatuschange",o),this.broadcast({gridView:["notifyModifyRangeStatus",[t,e,i]]})}catch(t){s.w.printStackTrace(t)}},l.prototype.modifyMatchedStatus=function(t,e,i){try{this._grid._dataList.modifyMatchedStatus(t,e,i)}catch(t){s.w.printStackTrace(t)}},l.prototype.modifyRowStatus=function(t,e){try{this._grid._dataList.modifyRowStatus(t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.setColumnFilter=function(t,e,i,r){try{"object"!==(0,o.Z)(t)||a.D.isString(t)||(t.internal=!0),this._grid._linkedDataList?this._grid._linkedDataList.setColumnFilter(t,e,i,r):this._grid._dataList.setColumnFilter(t,e,i,r)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.removeColumnFilter=function(t){try{t=this._grid.getColumnID(t);this._grid._linkedDataList?this._grid._linkedDataList.removeColumnFilter(t,{internal:!0}):this._grid._dataList.removeColumnFilter(t,{internal:!0})}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.clearSortFilter=function(){try{this._grid._linkedDataList?this._grid._linkedDataList.clearSortFilter():this._grid._dataList.clearSortFilter()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.removeColumnFilterAll=function(){try{this._grid._linkedDataList?this._grid._linkedDataList.removeColumnFilterAll():this._grid._dataList.removeColumnFilterAll()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setFilter=function(t){try{if(this._grid._linkedDataList)t.internal=!0,this._grid._linkedDataList.setFilter(t);else{if(t){var e=this._grid.getColumnID(t.sortIndex);if((a=this._grid.cellInfoHash[e]||{options:{}})&&"expression"==a.options.inputType&&(t.isExpression=!0,t.cellInfo=a,"gridView"==this._grid.initializeType&&isNaN(this._grid._dataList.getColumnIndex(t.sortIndex))&&(t.fakeExpressionArr=this._grid.getFakeExpressionArr())),e){var i=e.split(" "),o=[];t.isCustomCol=[],t.sortLabel=[];for(var r=0;r<i.length;r++){var a=this._grid.cellInfoHash[i[r]],n=!1;if("custom"!=a.options.inputType||a.internal||(n=!0),n)if(t.isCustomCol.push(!0),t.customSortItemsetIdObj=[],a.options.sortLabel){
for(var l=this.getTotalRow(),h={},d={},u=0;u<l;u++){var c=a.cellManagerHashByRowIndex[u]?a.cellManagerHashByRowIndex[u]:a;if("select"==c.options.inputType||"autoComplete"==c.options.inputType){var p=c.dataComp;if(p&&!h[p])"linkedDataList"==(g=this._grid.modelControl.getDataComp(p)).initializeType?h[p]=g._dataList.getAllJSON():h[p]=g.getAllJSON();d[u]=p,t.customSortItemsetIdObj[u]={label:c.itemsetObj.label,value:c.itemsetObj.value}}else d[u]=""}t.customCellDataListInfo=d,t.customDataListInfoHash=h,t.sortLabel.push(!0)}else o[r]=[],t.sortLabel.push(!1);else if(t.isCustomCol.push(!1),!a.options.sortLabel||"select"!=a.options.inputType&&"autoComplete"!=a.options.inputType)o[r]=[],t.sortLabel.push(!1);else{var g;if(a.dataComp)"linkedDataList"==(g=this._grid.modelControl.getDataComp(a.dataComp)).initializeType?o[r]=g._dataList.getAllJSON():o[r]=g.getAllJSON();else o[r]=a.getItemArray();t.sortItemsetIdObj={label:a.itemsetObj.label,value:a.itemsetObj.value},t.sortLabel.push(!0)}}o.length>0&&(t.sortItemArr=o)}}t.internal=!0,this._grid._dataList.setFilter(t),"outfocus"==t.focuseMode&&this._grid.setScrollTop(0)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.removeFilter=function(t,e){try{t&&(t.internal=!0),this._grid._linkedDataList?this._grid._linkedDataList.removeFilter(t,e):this._grid._dataList.removeFilter(t,e)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.clearFilter=function(t){try{this._grid._linkedDataList?this._grid._linkedDataList.clearFilter(t):this._grid._dataList.clearFilter(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.sort=function(t,e){try{this._grid._linkedDataList?this._grid._linkedDataList.sort(t,e):this._grid._dataList.sort(t,e)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.clearSort=function(){try{this._grid._linkedDataList?this._grid._linkedDataList.clearSort():(this._grid._dataList.clearSort(),"outfocus"==this._grid.options.filterFocusMode&&this._grid.setScrollTop(0))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.multisort=function(t){try{this._grid._linkedDataList?this._grid._linkedDataList.multisort(t):this._grid._dataList.multisort(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setMatchIgnoreCase=function(t){try{return this._grid._dataList.setMatchIgnoreCase(t)}catch(t){s.w.printStackTrace(t)}},l.prototype.mappingCommonAPI=function(){try{this._grid._getData=this._getData,this._grid._getRowData=this._getRowData,this._grid._setCellData=this._setCellData,this._grid._setOriginalCellData=this._setOriginalCellData,this._grid._insertData=this._insertData,this._grid._undoRow=this._undoRow,this._grid._getRowStatusValue=this._getRowStatusValue,this._grid._getRowStatus=this._getRowStatus,this._grid._setRowStatus=this._setRowStatus,this._grid._createRowStatus=this._createRowStatus,this._grid._updateRowStatus=this._updateRowStatus,this._grid._deleteRowStatus=this._deleteRowStatus,this._grid._undeleteRowStatus=this._undeleteRowStatus,this._grid.getRowJSON=this.getRowJSON,this._grid.getRowCount=this.getRowCount,this._grid.getCellData=this.getCellData,this._grid._getCellData=this._getCellData,this._grid.getOriginalCellData=this.getOriginalCellData,this._grid.getColData=this.getColData,this._grid.getRowData=this.getRowData,this._grid.getDataRow=this.getDataRow,this._grid.getMatchedData=this.getMatchedData,this._grid.getUnmatchedData=this.getUnmatchedData,this._grid.getMatchedColumnData=this.getMatchedColumnData,this._grid.getUnmatchedColumnData=this.getUnmatchedColumnData,this._grid.getMatchedIndex=this.getMatchedIndex,this._grid.getUnmatchedIndex=this.getUnmatchedIndex,this._grid.getRangeData=this.getRangeData,this._grid.getAllData=this.getAllData,this._grid.getColumnDistinctDataArray=this.getColumnDistinctDataArray,this._grid.getRangeXML=this.getRangeXML,this._grid.getMatchedXML=this.getMatchedXML,this._grid.getUnmatchedXML=this.getUnmatchedXML,this._grid.getRowXML=this.getRowXML,this._grid.getAllXML=this.getAllXML,this._grid.getRowJSON=this.getRowJSON,
this._grid.getAllJSON=this.getAllJSON,this._grid.getRangeJSON=this.getRangeJSON,this._grid.getMatchedJSON=this.getMatchedJSON,this._grid.getUnmatchedJSON=this.getUnmatchedJSON,this._grid.getRowStatusValue=this.getRowStatusValue,this._grid.getRowStatus=this.getRowStatus,this._grid.getRowIndexByStatus=this.getRowIndexByStatus,this._grid.getInsertedIndex=this.getInsertedIndex,this._grid.getUpdatedIndex=this.getUpdatedIndex,this._grid.getDeletedIndex=this.getDeletedIndex,this._grid.getModifiedIndex=this.getModifiedIndex,this._grid.getInsertedData=this.getInsertedData,this._grid.getInsertedXML=this.getInsertedXML,this._grid.getInsertedJSON=this.getInsertedJSON,this._grid.getDeletedData=this.getDeletedData,this._grid.getDeletedXML=this.getDeletedXML,this._grid.getDeletedJSON=this.getDeletedJSON,this._grid.getVoidData=this.getVoidData,this._grid.getVoidXML=this.getVoidXML,this._grid.getVoidJSON=this.getVoidJSON,this._grid.getOnlyDeletedData=this.getOnlyDeletedData,this._grid.getOnlyDeletedXML=this.getOnlyDeletedXML,this._grid.getOnlyDeletedXML=this.getOnlyDeletedXML,this._grid.getOnlyDeletedJSON=this.getOnlyDeletedJSON,this._grid.getUpdatedData=this.getUpdatedData,this._grid.getUpdatedXML=this.getUpdatedXML,this._grid.getUpdatedJSON=this.getUpdatedJSON,this._grid.getModifiedData=this.getModifiedData,this._grid.getModifiedXML=this.getModifiedXML,this._grid.getModifiedJSON=this.getModifiedJSON,this._grid.setMatchIgnoreCase=this.setMatchIgnoreCase}catch(t){s.w.printStackTrace(t,null,this)}}},6249:function(t,e,i){"use strict";i.r(e),i.d(e,{group:function(){return u}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(9075),h=i(1),d=i(4748),u=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(u.prototype,h.s.prototype),o.x.extend(u.prototype,d.g.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.group",pluginName:"group",userEvents:["ondragstart","ondrag","ondragend","ondragenter","ondragover","ondragleave","ondrop","ontooltipshow","ontooltiphide"],systemEvents:["onblur","onclick","ondblclick","onfocus","onmousedown","onmouseout","onmouseover","onmouseup","onmousemove","onmouseleave","onmouseenter"],parseChild:!0,parseAttributes:!0,tagname:"div",text:"",lazyDraw:!1,role:"",initStyle:!1,keepDisabled:!1,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,tooltipPositionX:"20",tooltipPositionY:"cellHeight",ignoreDisabled:!1},u.prototype.initialize=function(t){this.bindDrag=!1,this.bindDrop=!1,this.tooltipPositionParse=!1},u.html5={article:"div",aside:"div",bdi:"div",details:"div",dialog:"div",figcaption:"div",figure:"div",footer:"div",header:"div",main:"div",mark:"div",menuitem:"div",meter:"div",nav:"div",progress:"div",rp:"div",rt:"div",ruby:"div",section:"div",summary:"div",time:"div",wbr:"div"},u.prototype.toHTML=function(){try{var t=[],e=""!=this.options.role?"role='"+this.options.role+"'":"",i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",a=this.options.tagname,l=this.options.headers?" headers='"+this.options.headers+"'":"";if(s.v.browserCheck.ie){var h=s.v.browserVersion();"6"!=h&&"7"!=h&&"8"!=h||WebSquare.uiplugin.group.html5[a]&&(a=WebSquare.uiplugin.group.html5[a])}if(l&&n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/applyScopeHeaders/@value")))l=" headers='"+(this.scope_id?this.scope_id+"_":"")+this.options.headers+"'";if(t.push("<"+a+" id='"+this.id+"' "+i+" class='w2group "+this.options.className+"' "+e+" "+l+" "+this.getAttributesString()+o+">"),!this.options.lazyDraw){var d=!1,u=this.getChildren();if(u.length<=1)("th"===a||"td"===a)&&this.options.useLocale&&this.options.localeRef?(t.push(this.getLocaleValue(this.options.localeRef)),d=!0):1===u.length&&(t.push(u[0].toHTML()),u[0].element&&3==u[0].element.nodeType&&(d=!0));else for(var c=0;c<u.length;c++)t.push(u[c].toHTML()),u[c].element&&3==u[c].element.nodeType&&(d=!0);d||t.push(this.options.text)}return t.push("</"+a+">"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}
},u.prototype.setAction=function(){if(this.setDragDrop(),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}var i=WebSquare.BootLoader.fullViewed||!1,o=n.D.fullViewed||!1;if(!(i||o||"table"!=this.options.tagname||"crosstab"!=this.options.adaptive&&"layout"!=this.options.adaptive)){for(var r=this.getElementById(this.id).getElementsByTagName("tr"),l=0;l<r.length;l++){var h=r[l].className;h.indexOf("w2group")>-1&&-1==h.indexOf("w2tb_tr")&&(r[l].className=h+" w2tb_tr")}this.setAdaptive(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive)),this.invoke("setSetting","")}if("td"==this.options.tagname&&!(n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var d,u=null!=this.element.previousElementSibling&&"w2:attributes"!=this.element.previousElementSibling.tagName,c=null!=this.render.previousSibling;if(u&&"TH"===this.render.previousElementSibling.tagName||c&&"TH"===this.render.previousSibling.tagName)d=u?null!=this.render.previousElementSibling.textContent?this.render.previousElementSibling.textContent:this.render.previousElementSibling.innerText||"":null!=this.render.previousSibling.textContent?this.render.previousSibling.textContent:this.render.previousSibling.innerText||"",n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/adaptive/trimText/@value"))?this.render.setAttribute("data-title",d.wq_trim()):this.render.setAttribute("data-title",d);else this.addClass("w2tb_noTH")}if("a"==this.options.tagname){var p=this.uuid;if(!n.D.isIEAllVersion()){var g=this.getAttributeNode("disabled");"true"!==g&&"disabled"!==g||this.addClass(this.render,"w2anchor_disabled")}n.D.isIE()&&n.D.browserVersion()<10&&this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,(function(t){var e=WebSquare.idCache[p];e.getDisabled()&&a.B.preventDefault(t);try{e.render&&null!=e.render.getAttribute("href").toString().toLowerCase().match(/javascript[\s]*:[\s]*void/)&&a.B.preventDefault(t)}catch(t){}})))}this.options.tooltipDisplay&&!this.options.tooltipFormatter&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)));var m=n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/captionAuto/@value"))||"table"==this.options.tagname&&this.hasClass("w2tb")&&n.D.getBoolean(s.v.getConfiguration("/WebSquare/tableLayout/captionAuto/@value")),f=n.D.getBoolean(this.options.captionAuto),b=n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/summaryOnlyAuto/@value"))||"table"==this.options.tagname&&this.hasClass("w2tb")&&n.D.getBoolean(s.v.getConfiguration("/WebSquare/tableLayout/summaryOnlyAuto/@value")),y=n.D.getBoolean(this.options.summaryOnlyAuto),v="table"==this.options.tagname&&(m&&f||m&&null==this.options.captionAuto||1==f),w="table"==this.options.tagname&&(b&&y||b&&null==this.options.summaryOnlyAuto||1==y);if(v){var S=this._getHeaderTitleList(this.render);this.options.captionTitle?this._setCaption(this.render,this.options.captionTitle+WebSquare.language.getMessage("Grid_caption2")+S+WebSquare.language.getMessage("Grid_caption"),this.options.captionTitle):this._setCaption(this.render,S+WebSquare.language.getMessage("Grid_caption"),this.options.captionTitle)}if(w){S=this._getHeaderTitleList(this.render);this._setSummary(this.render,S)}"table"!=this.options.tagname||this.render.getAttribute("summary")||this.render.removeAttribute("summary")},u.prototype.draw=function(){try{var t=[],e=this.getChildren();if(e.length>0&&e[0].render)return;for(var i=0;i<e.length;i++)t.push(e[i].toHTML());this.render.innerHTML=t.join("");for(i=0;i<e.length;i++)e[i].activate(),e[i].onComplete()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInitValue=function(t){try{this.init(t)}catch(t){
r.w.printStackTrace(t,null,this)}},u.prototype.init=function(t){try{t=o.x.extend({excludePlugin:"",excludeId:"",fireEvent:!1,recursive:!1},t||{});for(var e=this.getChildren().slice(0).reverse();e.length>0;){var i=e.pop();if(i.setInitValue&&-1==(" "+t.excludePlugin+" ").indexOf(" "+i.options.pluginName+" ")&&-1==(" "+t.excludeId+" ").indexOf(" "+i.id+" ")&&i.setInitValue(t),t.recursive)for(var s=0;s<i.childControlList.length;s++)e.push(i.childControlList[s])}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.invoke=function(t,e,i,o){try{return h.s.prototype.invoke.call(this,t,e,i,o)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t,e){try{if(t=n.D.getBoolean(t),!0!==this.options.ignoreDisabled&&!0!==n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/ignoreDisabled/@value"))&&(h.s.prototype.setDisabled.call(this,t),"a"==this.options.tagname&&(t?this.addClass(this.render,"w2anchor_disabled"):this.removeClass(this.render,"w2anchor_disabled"))),this.options.keepDisabled){if(t){this.disabledComps=[];l=0;for(var i=this.childControlList.length;l<i;l++){(d=this.childControlList[l]).getDisabled&&!0===d.getDisabled()&&this.disabledComps.push(d)}}for(l=0;l<this.childControlList.length;l++){d=this.childControlList[l];for(var o=!1,a=0;a<this.disabledComps.length;a++)if(d===this.disabledComps[a]){o=!0;break}o||d.setDisabled(t,e)}}else for(var l=0;l<this.childControlList.length;l++){var d;(d=this.childControlList[l]).setDisabled&&"stop"!=d.activeStatus&&d.setDisabled(t,e)}}catch(t){r.w.printStackTrace(t)}return t},u.prototype.getDisabled=function(){try{return this.options&&this.options.disabled}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getAttributeNode=function(t){try{return h.s.attributes.getAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},u.prototype.setAttributeNode=function(t,e){try{h.s.attributes.setAttributeNode.call(this,t,e)}catch(t){r.w.printStackTrace(t)}},u.prototype.removeAttributeNode=function(t){try{h.s.attributes.removeAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},u.prototype.setAdaptive=function(){try{var t=parseInt(this.options.adaptiveThreshold)||480;n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10||(parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=t?this.addAdaptive():this.removeAdaptive())}catch(t){r.w.printStackTrace(t)}},u.prototype.addAdaptive=function(){try{if(!(n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var t,e=this.options.adaptive;if("layout"==e?t="w2tb_adaptive_layout":"crosstab"==e&&(t="w2tb_adaptive_crosstab"),!this.checkAdaptiveValid(e))return;this.setAdaptiveText(),this.hasClass(t)||this.addClass(t),this.removeAdaptiveHeight(e),this.setAdaptiveHeight(e)}}catch(t){r.w.printStackTrace(t)}},u.prototype.removeAdaptive=function(){try{if(!(n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var t,e=this.options.adaptive;"layout"==e?t="w2tb_adaptive_layout":"crosstab"==e&&(t="w2tb_adaptive_crosstab"),this.hasClass(t)&&this.removeClass(t),this.removeAdaptiveHeight(e)}}catch(t){r.w.printStackTrace(t)}},u.prototype.setAdaptiveHeight=function(t){try{if("crosstab"==t){var e,i=document.getElementById(this.id).getElementsByTagName("tbody")[0].getElementsByClassName("w2tb_tr");document.getElementById(this.id).getElementsByTagName("thead")[0]&&(e=document.getElementById(this.id).getElementsByTagName("thead")[0].getElementsByClassName("w2tb_tr"));for(var o=0,s=0;s<i.length;s++)for(var a=i[s].getElementsByClassName("w2tb_td"),l=0;l<a.length;l++){var h=a[l].offsetHeight;o=o>=h?o:h}for(s=0;s<i.length;s++){var d;a=i[s].getElementsByClassName("w2tb_td");d=e?e.length<=s?e[e.length-1].getElementsByClassName("w2tb_th"):e[s].getElementsByClassName("w2tb_th"):i[s].getElementsByClassName("w2tb_th");var u=parseInt(n.D.getComponentById(d[0].id).getStyle("padding-top")),c=parseInt(n.D.getComponentById(d[0].id).getStyle("padding-bottom"));for(l=0;l<d.length;l++){
var p=a[l],g=d[l],m=g.offsetHeight,f=parseInt(n.D.getComponentById(p.id).getStyle("padding-top")),b=parseInt(n.D.getComponentById(p.id).getStyle("padding-bottom"));m>o?n.D.getComponentById(p.id).setSize("height",m-(f+b+1)):m<o&&(n.D.getComponentById(g.id).setSize("height",o-(u+c+1)),n.D.getComponentById(p.id).setSize("height",o-(u+c+1)))}}this.render.setAttribute("data-oldwidth",this.render.style.width),this.options.adaptiveWidth?this.render.style.width=this.options.adaptiveWidth:this.render.style.width=e?(i.length+e.length)*p.offsetWidth+"px":i.length*p.offsetWidth+"px"}else if("layout"==t)for(a=document.getElementById(this.id).getElementsByClassName("w2tb_td"),s=0;s<a.length;s++){var y=a[s].getAttribute("data-title");if(y){var v=n.D.getRulerSpan();v.style.padding=window.getComputedStyle(a[s],":before").getPropertyValue("padding"),v.style["padding-top"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-top"),v.style["padding-right"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-right"),v.style["padding-bottom"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-bottom"),v.style["padding-left"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-left"),v.style.width=window.getComputedStyle(a[s],":before").getPropertyValue("width"),v.style["border-width"]=window.getComputedStyle(a[s],":before").getPropertyValue("border-width"),v.style["line-height"]=window.getComputedStyle(a[s],":before").getPropertyValue("line-height"),v.style["white-space"]=window.getComputedStyle(a[s],":before").getPropertyValue("white-space"),v.style["word-wrap"]=window.getComputedStyle(a[s],":before").getPropertyValue("word-wrap"),v.style["word-break"]=window.getComputedStyle(a[s],":before").getPropertyValue("word-break"),v.style["font-weight"]=window.getComputedStyle(a[s],":before").getPropertyValue("font-weight"),v.innerHTML=y,v.offsetHeight>a[s].offsetHeight&&(a[s].style.height=parseInt(window.getComputedStyle(v).getPropertyValue("height"),10)+"px"),v.style.top="-10000px",v.style.left="-10000px",v.style.visibility="hidden"}}}catch(t){r.w.printStackTrace(t)}},u.prototype.removeAdaptiveHeight=function(t){try{if("crosstab"==t){for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<e.length;o++)e[o].style.removeProperty("height");for(var s=0;s<i.length;s++)i[s].style.removeProperty("height");var a=this.render.getAttribute("data-oldwidth");a&&(this.render.style.width=a)}else if("layout"==t)for(i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<i.length;o++)i[o].style.removeProperty("height")}catch(t){r.w.printStackTrace(t)}},u.prototype.setAdaptiveLabel=function(t){try{if(!(n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10)){var e=this.render.nextSibling||this.render.nextElementSibling;null!=e&&"TD"==e.tagName&&null!=e.getAttribute("data-title")&&(e.setAttribute("data-title",t),this.render.innerHTML=t)}}catch(t){r.w.printStackTrace(t)}},u.prototype.checkAdaptiveValid=function(t){try{var e=!0;if("crosstab"===t){var i,o=document.getElementById(this.id).getElementsByTagName("tbody")[0].getElementsByClassName("w2tb_tr");document.getElementById(this.id).getElementsByTagName("thead")[0]&&(i=document.getElementById(this.id).getElementsByTagName("thead")[0].getElementsByClassName("w2tb_tr"));for(var s=0;s<o.length;s++){var a=o[s].getElementsByClassName("w2tb_td"),n=o[s].getElementsByClassName("w2tb_th");if(a.length!==n.length){e=!1;break}}if(!e&&i){e=!0;for(s=0;s<o.length;s++){a=o[s].getElementsByClassName("w2tb_td");if(n=i.length<=s?i[i.length-1].getElementsByClassName("w2tb_th"):i[s].getElementsByClassName("w2tb_th"),a.length!==n.length){e=!1;break}}}}return e||l.k.printLog("warning : tableLayout이 crosstab을 지원할 수 없는 구조입니다.["+this.getOriginalID()+"]"),e}catch(t){r.w.printStackTrace(t)}},u.prototype.setReadOnly=function(t){try{this.options.readOnly=t,this.invoke("setReadOnly",t)
}catch(t){r.w.printStackTrace(t)}},u.prototype._setCaption=function(t,e,i){try{var o=t.getElementsByTagName("caption")[0];if(o&&o.parentNode==t)o.innerHTML=e;else{(o=document.createElement("caption")).innerHTML=e;var s=t.getElementsByTagName("colgroup")[0];s.parentNode.insertBefore(o,s)}i&&o.setAttribute("captiontitle",i);var a=o.className;a&&""!=a?this.addClass(o,"setcaption"):o.className="setcaption"}catch(t){r.w.printStackTrace(t)}},u.prototype.setCaptionAuto=function(t){try{for(var e=this.render.getElementsByTagName("TABLE"),i=[],o=e.length,s=0;s<o;s++)i[s]=e[s];i[o]=this.render;for(s=0;s<o+1;s++){var a=this._getHeaderTitleList(i[s]),n="";t?n=t:i[s].caption&&(n=i[s].caption.getAttribute("captionTitle")),n?this._setCaption(i[s],n+WebSquare.language.getMessage("Grid_caption2")+a+WebSquare.language.getMessage("Grid_caption"),n):this._setCaption(i[s],a+WebSquare.language.getMessage("Grid_caption"))}}catch(t){r.w.printStackTrace(t)}},u.prototype._getHeaderTitleList=function(t){try{var e=[],i="",o=[],s=[],a=[],n="",l=t.getElementsByTagName("tbody"),h=t.getElementsByTagName("thead"),d=0,u=0;if(l.length>1){for(var c=0;c<l.length;c++)if(l[c].parentNode==t)for(var p=l[c].getElementsByTagName("th"),g=0;g<p.length;g++)p[g].parentNode.parentNode==l[c]&&(s[d++]=p[g])}else l[0]&&(s=l[0].getElementsByTagName("th"));if(h.length>1){for(c=0;c<h.length;c++)if(h[c].parentNode==t)for(p=h[c].getElementsByTagName("th"),g=0;g<p.length;g++)p[g].parentNode.parentNode==h[c]&&(a[u++]=p[g])}else h[0]&&(a=h[0].getElementsByTagName("th"));o=a;for(var m=0;m<o.length;m++){e.length>0&&(n=","),null!=(f=o[m]).innerText&&""!=f.innerText?e[m]=f.innerText:null!=f.textContent&&""!=f.textContent?e[m]=f.textContent:e[m]=f.innerHTML,e[m]=e[m].replace(/(<([^>]+)>)/gi,"").trim(),""!=e[m]&&(i=i+n+e[m])}o=s;for(m=0;m<o.length;m++){var f;e.length>0&&(n=","),null!=(f=o[m]).innerText&&""!=f.innerText?e[m]=f.innerText:null!=f.textContent&&""!=f.textContent?e[m]=f.textContent:e[m]=f.innerHTML,e[m]=e[m].replace(/(<([^>]+)>)/gi,"").trim(),""!=e[m]&&(i=i+n+e[m])}return i}catch(t){r.w.printStackTrace(t)}},u.prototype._setSummary=function(t,e){try{t.setAttribute("summary",e)}catch(t){r.w.printStackTrace(t)}},u.prototype.setSummaryOnlyAuto=function(){try{for(var t=[],e=this.render.getElementsByTagName("TABLE"),i=e.length,o=0;o<i;o++)t[o]=e[o];t[i]=this.render;for(o=0;o<i+1;o++){var s=this._getHeaderTitleList(t[o]);this._setSummary(t[o],s)}}catch(t){r.w.printStackTrace(t)}},u.prototype.hideTooltip=function(){try{n.D.setTimeout((function(){this.tooltip&&this.tooltip.setStyle("display","none")}),{key:this.id+"_timeShowTooltip",delay:1e3*this.options.tooltipTime,caller:this})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showTooltip=function(t,e,i){try{n.D.clearTimeout(this.id+"_timeShowTooltip"),n.D.clearTimeout(this.id+"_timeHideTooltip"),n.D.setTimeout(this._showTooltip,{key:this.id+"_timeShowTooltip",delay:1e3*this.options.tooltipTime,caller:this,args:[t,e,i]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.bind=function(t,e){try{h.s.prototype.bind.call(this,t,e),this.setDragDrop()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDragDrop=function(){var t=!1,e=!1;if(null!=this.options.xmlEvents){for(var i=0;i<this.userEventList.length;i++){switch(this.userEventList[i].name){case"ondragstart":case"ondrag":case"ondragend":t=!0;break;case"ondragenter":case"ondragover":case"ondragleave":case"ondrop":e=!0}}t&&!this.bindDrag&&(n.D.isMobile()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTouchEnd))):(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleTouchStart)),
this.event.addListener(document.documentElement,"onmousemove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.handleTouchEnd))),this.bindDrag=!0),e&&!this.bindDrop&&(WebSquare.dragdrop2.droppable[this.uuid]={over:!1},this.bindDrop=!0)}},u.prototype.finalize=function(){this.bindDrag=!1,this.bindDrop=!1,WebSquare.dragdrop2.droppable[this.uuid]=null,delete WebSquare.dragdrop2.droppable[this.uuid],this.options&&this.options.udcName&&a.B.fireEvent(this,"ondestroyed")},u.prototype.handleTouchStart=function(t){t.touches&&1!=t.touches.length||(this.setUserData("dragStatus","stop"),WebSquare.getBody().addClass("w2noselect"),n.D.emptySelection())},u.prototype.handleTouchMove=function(t){if(!t.touches||1==t.touches.length){var e=this.getUserData("dragStatus");if("stop"!=e&&"move"!=e||!this.getUserData("draggable"))return;s.v.setTimer(this._handleTouchMove,{key:this.id+"_handleTouchMove",caller:this,args:[{clientX:t.touches?t.touches[0].pageX:t.clientX,clientY:t.touches?t.touches[0].pageY:t.clientY}],delay:30,max:30}),a.B.preventDefault(t)}},u.prototype._handleTouchMove=function(t){var e=this.getUserData("dragStatus");if(("stop"==e||"move"==e)&&this.getUserData("draggable")){var i=t.touches?t.touches[0].pageX:t.clientX,o=t.touches?t.touches[0].pageY:t.clientY;if(i+=document.body.scrollLeft,o+=document.body.scrollTop,"stop"==e){var r=function(t){for(var e in t)if(null!=WebSquare.idCache[e]){var i=WebSquare.idCache[e].render,o=WebSquare.style.getAbsoluteTop(i),s=WebSquare.style.getAbsoluteLeft(i);t[e].position={top:o,left:s,bottom:o+i.offsetHeight,right:s+i.offsetWidth}}};r(WebSquare.dragdrop2.droppable),r(WebSquare.dragdrop2.scrollable),this.setUserData("dragStatus","move"),a.B.fireEvent(this,"ondragstart",i,o)}for(var n in a.B.fireEvent(this,"ondrag",i,o),WebSquare.dragdrop2.scrollable){var l=WebSquare.dragdrop2.scrollable[n],h=WebSquare.idCache[n];if(null!=h){var d,u,c=l.position,p=h.options.dragScrollSize;if(c.left<=i&&i<=c.right&&(c.top<=o&&o<=c.top+p?(d="up",u=h.render.clientHeight*(p-(o-c.top))/p+WebSquare.dragdrop2.scrollByDragSpeed):c.bottom-p<=o&&o<=c.bottom&&(d="down",u=h.render.clientHeight*(p-(c.bottom-o))/p+WebSquare.dragdrop2.scrollByDragSpeed)),null==d)l.scroll=!1,s.v.clearTimer(h.id+"_setSlideByDrag"),s.v.clearTimer(h.id+"_slideByDrag");else{var g=l.scroll?50:WebSquare.dragdrop2.scrollByDragDelay;s.v.setTimer((function(t,e,s){var r=WebSquare.idCache[s],n=r.getScrollTop(),l="up"==t?0:r.getMaxScrollTop();n!=l&&(r.scroll=!0,WebSquare.style.animate(r,(function(t){var e=parseInt(n+t*(l-n),10),s=e-this.getScrollTop();for(var r in this._scrollTo(null,e),WebSquare.dragdrop2.droppable){for(var h=WebSquare.idCache[r],d=!1;h=h.parentControl;)if(h==this){d=!0;break}d&&(WebSquare.dragdrop2.droppable[r].position.top-=s,WebSquare.dragdrop2.droppable[r].position.bottom-=s)}for(var u in WebSquare.dragdrop2.droppable){var c=WebSquare.dragdrop2.droppable[u],p=c.position;null!=WebSquare.idCache[u]&&(p.left<=i&&i<=p.right&&p.top<=o&&o<=p.bottom?(c.over||(c.over=!0,a.B.fireEvent(WebSquare.idCache[u],"ondragenter")),c.drop=!1===a.B.fireEvent(WebSquare.idCache[u],"ondragover")):c.over&&(c.over=!1,c.drop=!1,a.B.fireEvent(WebSquare.idCache[u],"ondragleave")))}}),{key:r.id+"_slideByDrag",easing:"linear",duration:1e3/e*Math.abs(l-n)}))}),{key:h.id+"_setSlideByDrag",delay:g,args:[d,u,n]})}}}for(var m in WebSquare.dragdrop2.droppable){var f=WebSquare.dragdrop2.droppable[m];c=f.position;null!=WebSquare.idCache[m]&&(c.left<=i&&i<=c.right&&c.top<=o&&o<=c.bottom?(f.over||(f.over=!0,a.B.fireEvent(WebSquare.idCache[m],"ondragenter")),f.drop=!1===a.B.fireEvent(WebSquare.idCache[m],"ondragover")):f.over&&(f.over=!1,f.drop=!1,a.B.fireEvent(WebSquare.idCache[m],"ondragleave")))}}},u.prototype.handleTouchEnd=function(t){var e=this.getUserData("dragStatus","move");WebSquare.getBody().removeClass("w2noselect");var i=!1;if(n.D.isChrome()||n.D.isOpera()){
var o=this.event.getTargetIterator(t,this.render);o.next()&&("INPUT"==o.getElement().tagName||o.match("w2input_focus"))&&(i=!0)}if(i||n.D.emptySelection(),"pass"!=e){for(var r in WebSquare.dragdrop2.droppable)WebSquare.dragdrop2.droppable[r].over&&WebSquare.dragdrop2.droppable[r].drop&&null!=WebSquare.idCache[r]&&a.B.fireEvent(WebSquare.idCache[r],"ondrop",this),WebSquare.dragdrop2.droppable[r].over=!1,WebSquare.dragdrop2.droppable[r].drop=!1;for(var l in a.B.fireEvent(this,"ondragend"),this.render&&this.setUserData("dragStatus","pass"),WebSquare.dragdrop2.scrollable)WebSquare.dragdrop2.scrollable[l].scroll=!1,s.v.clearTimer(WebSquare.idCache[l].id+"_setSlideByDrag"),s.v.clearTimer(WebSquare.idCache[l].id+"_slideByDrag")}},u.prototype.handleMouseoverEvent=function(t){try{var e=a.B.getTarget(t);if(e){var i=e,o=WebSquare.style.getStyle(e,"text-overflow"),s=e.offsetWidth,n=e.offsetHeight,h=20,d=n;try{this.options.tooltipPositionX&&(h=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(s,n)),this.options.tooltipPositionY&&(d=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(s,n))}catch(t){l.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}if("ellipsis"==o){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=i.className,this.toolTipRuler.innerHTML=i.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(i,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(i,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(i,"font-weight");var u=this.toolTipRuler.offsetWidth,c=e.clientWidth;if(3!=i.nodeType){var p=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),g=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");u-=parseInt(p||"0",10),u-=parseInt(g||"0",10),c-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),c-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(c<u){var m=WebSquare.style.getAbsoluteLeft(e)+h,f=WebSquare.style.getAbsoluteTop(e)+d,b=i.innerText.wq_trim();document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel&&(b=this.options.tooltipItemLabel),this.showTooltip(m,f,b)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),this.hideTooltip()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAdaptiveText=function(t){try{if("table"!==this.options.tagname)return;for(var e=this.render.getElementsByTagName("td"),i=0;i<e.length;i++){var o=e[i];if(o.previousSibling&&"TH"===o.previousSibling.tagName){var a=null!=o.previousSibling.textContent?o.previousSibling.textContent:o.previousSibling.innerText||"";n.D.getBoolean(s.v.getConfiguration("/WebSquare/group/adaptive/trimText/@value"))?o.setAttribute("data-title",a.wq_trim()):o.setAttribute("data-title",a)}}}catch(t){r.w.printStackTrace(t,null,this)}}},9479:function(t,e,i){"use strict";i.r(e),i.d(e,{image:function(){return d}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(9075),h=i(1),d=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(d.prototype,h.s.prototype),d.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.image",pluginName:"image",systemEvents:["onabort","onerror","onblur","onclick","ondblclick","onfocus","onmousedown","onmouseup","onmouseout","onmouseover","onmousemove"],src:"",alt:"",usemap:"",title:"",longdesc:""},d.prototype.initialize=function(t){},d.prototype.toHTML=function(){try{
var t=[],e=this.options.src?this.getImageURL(this.options.src):"",i=""==this.options.title?"":"title='"+this.options.title+"'",o=""==this.options.usemap?"":"usemap='"+this.options.usemap+"'",s=""==this.options.longdesc?"":"longdesc='"+this.options.longdesc+"'",a=""==this.options.style?"":"style='"+this.options.style+"'",n=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'",l="";if("$empty"==this.options.alt)var h="alt=''";else h=""==this.options.alt?"":"alt='"+this.options.alt+"'";return this.options.onerror&&(l=' onerror="('+this.options.onerror+').call(this,event);" '),t.push("<img id='"+this.id+"' src='"+e+"' "+a+" "+n+" class='w2image "+this.options.className+"' "+h+" "+i+" "+o+" "+s+" "+l+" />"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setAction=function(){try{n.D.isIE(6)||n.D.isIE(7)||n.D.isIE(8)||n.D.isIE(9)||(this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,this.handleDragOverEvent)),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,this.handleDropEvent))),this.refresh()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.setSrcNM(t)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setSrc=function(t){try{var e="";t&&(e=s.v.getImageURL(t)),this.render.src=e}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setSrcNM=function(t){try{var e=t?this.getImageURL(t):"";this.render.src=e}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getSrc=function(){try{return this.render.src}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setLongdesc=function(t){try{this.render.longDesc=t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getLongdesc=function(){try{return this.render.longDesc}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setAlt=function(t){try{this.render.alt=t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getAlt=function(){try{return this.render.alt}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?(this.setOpacity(.3),this.addClass(this.render,"w2image_disabled")):(this.setOpacity(1),this.removeClass(this.render,"w2image_disabled"))}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleDropEvent=function(t){try{a.B.stopEvent(t);var e=t.dataTransfer.files[0],i=new FileReader,o=this;i?(i.onload=function(t){o.setSrc(t.target.result)},i.readAsDataURL(e)):l.k.printLog("NOT SUPPORT HTML5 FILE API["+this.id+"]")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleDragOverEvent=function(t){try{a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}}},111:function(t,e,i){"use strict";i.r(e),i.d(e,{input:function(){return c}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(9075),h=i(1),d=i(2117),u=i(4748),c=function(t,e,i){h.s.call(this,t,e,i)};o.x.extend(c.prototype,h.s.prototype),o.x.extend(c.prototype,d.z.prototype),o.x.extend(c.prototype,u.g.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.input",pluginName:"input",serializable:!0,parseAttributes:!0,userEvents:["onfocus","onblur","onbeforeedit","oneditend","onafteredit","onchange","onviewchange","oneditkeyup","oneditenter","oneditfull","ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onkeydown","oninput","onkeyup","onkeypress","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove"],useConfig:!0,valueType:"",type:"text",editType:"",dataType:"text",ioFormat:"",ioFormatter:"",displayFormat:"",displayFormatter:"",formatArray:"",applyFormat:"display",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",copyOnReadOnly:"",
maskFormat:"",ltrim:!1,rtrim:!1,trim:!1,mandatory:!1,maxlength:"-1",maxLength:"-1",minlength:-1,adjustMaxLength:!1,useMaxLength:!1,allowChar:"",ignoreChar:"",byteCheckIgnoreChar:"",byteCheckIgnoreCharType:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validateOnCheckMaxByteLength:!1,validateOnInput:!1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,onFocusStyle:"",onFocusClass:"w2input_focus",readOnlyClass:"w2input_readonly",readOnlyFocusEvent:!1,refSyncKeyup:!1,initValue:"",title:"",name:"",useKeyupBlur:!0,preventCopyPaste:!1,delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",focusCalcSize:!0,enterBlur:!0,placeholder:"",autocomplete:"",useVerticalAlign:!0,escape:!0,autocorrect:"",autoCapitalize:"off",imeMode:"",autoFocus:!1,nextTabByEnter:!1,showPlaceHolderOnReadOnly:!1,refSync:!1,useMonthYearFormat:!1,customModelFormatter:"",customModelUnformatter:"",inputMode:"",useBigDecimalFloat:!1,setValueHandler:"",getValueHandler:"",autoDecimalPoint:!1,editFormat:""},c.prototype.initialize=function(t){try{this.originalStyleObj=null,this.focusStyleObj=null,this.focusedSizeFlag=!1,this.realValue="",this.supportPlaceholder=!1,this.supportAutocomplete=!1,this._focusStatus="init",this._getFocused=!1,this._changeApplyFormat=!1,this.originalHashValue={},this.options.maxlength="-1"!==this.options.maxLength?this.options.maxLength:this.options.maxlength,this.options.maxLength=this.options.maxlength,this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.decimalDelimiter=this.options.decimalDelimiter||".",this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,this.floatMaxlength="-1","number"===this.options.dataType&&"true"===this.options.floatNumber&&(this.options.dataType="float");var e=this.options.dataType;this.options.maskFormat||"all"!=this.options.applyFormat||""!=this.options.displayFormatter||"bigDecimal"===e||"number"===e||"float"===e||"euro"===e||"rupee"===e||"tenge"===e||(this._changeApplyFormat=!0,this.options.applyFormat="display"),this.options.maskFormat&&(this.options.applyFormat="all","text"!=this.options.dataType||this.options.allowChar||(this.options.allowChar="0-9")),""!=this.options.displayFormat||"number"!=e&&"bigDecimal"!=e||(this.options.displayFormat=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/displayFormat/@defaultValue')||"",this.options.displayFormat&&(this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter="."))),"euro"==e&&(this.options.euroMask||(this.options.euroMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/euroMask/@value')||""),this.options.customModelFormatter||(this.options.customModelFormatter=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelFormatter/@value')||""),this.options.customModelUnformatter||(this.options.customModelUnformatter=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelUnformatter/@value')||""));var i=this.options.onFocusStyle;if(i){var o="w2input_userfocus",a="#"+this.id+"."+o;WebSquare.cssManager.addConvertedCSS(a,i),this.options.onFocusStyle="",this.options.onFocusClass=o}if(""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"float":case"bigDecimal":this.useBigDecimalFloat||(this.options.displayFormat=this.options.numberMask),this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),
this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter="-")}else switch(this.options.dataType){case"float":case"bigDecimal":this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter="-")}if(this.options.byteCheckIgnoreChar&&this.options.byteCheckIgnoreCharType){for(var n=this.options.byteCheckIgnoreCharType.split(","),l=!1,h=0;h<n.length;h++)n[h].wq_trim()==this.options.dataType&&(l=!0);l||(this.options.byteCheckIgnoreChar="")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this.options.maskFormat&&(this.useBigDecimalFloat=!0);var u=this.options.dataType;if("bigDecimal"==u&&(u=this.useBigDecimalFloat?"float":"number"),this.formatter=WebSquare.format.createFormatter(u,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),"default"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):"reverse"==this.options.maskFormat&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar))),this.validator=new d.s.validateInvoker(this.id,this.options),"true"!==this.options.floatNumber||"euro"!==this.options.dataType&&"rupee"!==this.options.dataType&&"tenge"!==this.options.dataType)switch(this.options.dataType){case"date":case"time":break;case"number":""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):this.options.maskFormat?this.validator.addCommand(new d.s.numberMaskCommand(this.options.displayFormat,this.options.maskFormat,this.options.applyFormat)):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"euro":
this.validator.addCommand(new d.s.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.s.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.s.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"bigDecimal":if(!this.useBigDecimalFloat){this.options.maskFormat&&this.validator.addCommand(new d.s.numberMaskCommand(this.options.displayFormat,this.options.maskFormat,this.options.applyFormat)),""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")?(this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(this.options.maxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(this.options.maxlength)),this.floatMaxlength=this.options.maxlength,this.options.maxlength="-1"):this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);break;case"text":this.options.maskFormat&&this.validator.addCommand(new d.s.textMaskCommand(this.options.displayFormat,this.options.maskFormat,this.options.applyFormat,this.options.allowChar))}else if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")){var c=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(c,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(c)),this.floatMaxlength=c,this.options.maxlength="-1"}else this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if(this.inputEvented=!1,this.options.placeholder&&WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.autocomplete&&WebSquare.uiplugin.input.autocomplete&&(this.supportAutocomplete=!0),this.beforeEditValue="",this._editTokens={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},"!":{escape:!0}},this.options.editFormat&&(this._editFormat=this.options.editFormat.split("||").sort((function(t,e){return t.replace(/[^a-z^A-Z^0-9]/g,"").length-e.replace(/[^a-z^A-Z^0-9]/g,"").length}))),this._editValue="",this._oldValue="",this.floatMaxlength>0){c=this.floatMaxlength+"";var p=this.options.decimalDelimiter||".",g=c.split(p);this._integerMaxLength=parseInt(g[0]),this._fractionMaxLength=g[1]?parseInt(g[1]):0}}catch(t){r.w.printStackTrace(t,null,this)}},c.htmlStr=["<input id='",,"'",," class='w2input ",,"'",,"",," />"],c.placeholder="string"==typeof document.createElement("input").placeholder,c.autocomplete="string"==typeof document.createElement("input").autocomplete,c.prototype.toHTML=function(){try{var t=WebSquare.uiplugin.input.htmlStr,e="";"auto"==this.options.imeMode?e="ime-mode:auto;":"inactive"==this.options.imeMode?e="ime-mode:inactive;":"active"==this.options.imeMode?e="ime-mode:active;":"disabled"==this.options.imeMode&&(e="ime-mode:disabled;"),this.options.style&&";"!==this.options.style.slice(-1)&&(this.options.style+=";");var i=this.options.escape?WebSquare.xml._encode(this.options.placeholder):this.options.placeholder,o=this.options.escape?WebSquare.xml._encode(this.options.title):this.options.title;return t[1]=this.id,t[3]=""==this.options.style&&""==this.options.imeMode?"":" style='"+this.options.style+e+"'",
t[5]=this.options.className+(this.options.readOnly?" "+this.options.readOnlyClass:""),t[7]=""==this.options.type?"":" type='"+this.options.type+"'",t[9]=""==this.options.title?"":" title='"+o+"'",t[9]+=""==this.options.name?"":" name='"+this.options.name+"'",t[9]+=this.options.maxlength>=0&&!this.options.useMaxLength?" maxLength='"+this.options.maxlength+"'":"",t[9]+=""==this.supportPlaceholder?"":" placeholder='"+i+"'",t[9]+=""==this.supportAutocomplete||""==this.options.autocomplete?"":" autocomplete='"+this.options.autocomplete+"'",t[9]+=0==WebSquare.hybridApp||""==this.options.autocorrect?"":" autocorrect='"+this.options.autocorrect+"'",t[9]+=0==WebSquare.hybridApp?"":" autoCapitalize='"+this.options.autoCapitalize+"'",t[9]+=this.getAttributesString(),t[9]+=""==this.options.imeMode?"":" imeMode='"+this.options.imeMode+"'",t[9]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",n.D.isMobile()&&(t[9]+=""==this.options.inputMode?"":" inputMode='"+this.options.inputMode+"'"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.options.useVerticalAlign&&this.setVerticalAlign(),this.options.initValue&&this._setValue(this.options.initValue),this.modelControl.isBinded()){var i=this.modelControl.getData();this.options.useMonthYearFormat&&"date"===this.options.dataType&&(i=WebSquare.date.getIOFormatDate(i,this.options.ioFormat)),this.setValueNM(i)}if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),this._editFormat)return void this.setActionEditFormat();var o=this;this.addEvent("oneditend",(function(){var t="",e=o.render.value.wq_trim();("number"==o.options.dataType||"float"==o.options.dataType||o.useBigDecimalFloat||"euro"==o.options.dataType||"rupee"==o.options.dataType||"tenge"==o.options.dataType)&&("."!==e&&"-"!==e&&"+"!==e&&","!==e&&e!=="+"+this.options.decimalDelimiter&&e!=="-"+this.options.decimalDelimiter||(o.render.value="")),t="all"==o.options.applyFormat?o.options.maskFormat?o.render.value:o._getValue():o.render.value,t=o.validator.validateString(t),o.options.placeholder&&!this.supportPlaceholder&&0==o.realValue.length&&this.render.className.match("w2input_placeholder")||o.setValueNM(t,!0)})),(n.D.isIEAllVersion()||n.D.isSpartan())&&(this.event.addListener(this.render,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusinEvent)),this.event.addListener(this.render,"onbeforeeditfocus",this.event.bindAsEventListener(this,this.handleBeforeFocusEvent))),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdv,{eventonreadonly:!0})),1==this.getReadOnly()&&(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.validateOnInput&&(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))),s.v.browserCheck.android&&s.v.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),
this.options.maskFormat&&!this.useBigDecimalFloat&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),n.D.isFF()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),"number"==this.options.dataType&&this.setStyle("imeMode","disabled")),n.D.isIEAllVersion()?this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){document.activeElement!=this.render&&this.focus()}))):n.D.isOpera()&&this.options.preventCopyPaste&&this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t),this.focus()}))),"noFormat"==this.options.copyOnReadOnly&&(n.D.isIEAllVersion()?(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly&&a.B.preventDefault(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,(function(t){67==t.keyCode&&(t.ctrlKey||t.metaKey)&&this.handleCopyEvent({})})))):this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent))),this.options.maxlength>=0&&!this.options.useMaxLength&&(this.render.maxLength=this.options.maxlength,this.originalMaxLength=this.options.maxlength),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setActionEditFormat=function(){try{this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyDownDynamicMask)),this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleDynamicMask)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyUpDynamicMask)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurDynamicMask)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdvMask)),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()&&!this.noRefresh){var t=this._getValue(),e=this.modelControl.getData(),i=n.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof i&&(e=i.call(this,e,this.getDisplayValue())),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat)),this.options.maskFormat&&(e=this.maskFormatModelUnFormat(e)),this._editFormat&&(this._editValue=e),this.setValueNM(e),t!=this._getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this._getValue()})}this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.commit=function(){try{var t=this._getValue();if(("bigDecimal"===this.options.dataType||"float"===this.options.dataType)&&t[t.length-1]===this.options.decimalDelimiter)return;this._setValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{var e,i=this.options.setValueHandler;if(i){var o=n.D.getGlobalFunction(i,this.scope_id);"function"==typeof o&&(e=o.call(this,t))}else e=this._setValue(t);return this._oldValue=this._getValue(),e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._setValue=function(t,e){try{if(n.D.isNull(t))return;t=this._trim(t),this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength&&(t=this.adjustMaxLength(t));var i=this._getValue(),o=n.D.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof o&&(t=o.call(this,t,this.getDisplayValue())),this.options.maskFormat&&(t=this.maskFormatModelUnFormat(t)),e&&!0===e.skipNM||this.setValueNM(t,!1,e),
this.options.useMonthYearFormat&&"date"===this.options.dataType&&(t=WebSquare.date.getIOUnFormatDate(t,this.options.ioFormat));var s=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id),l=t;"function"==typeof s&&(t=s.call(this,t,this.getDisplayValue())),this.options.maskFormat?this.modelControl.setData(this.maskFormatModelFormat(t)):l!==t?this.modelControl.setData(t,null,{orgValue:l}):this.modelControl.setData(t),this._editFormat&&(this._editValue=t),i!=this._getValue()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t,e){try{if(n.D.isNull(t))return;if(t=this._trim(t),"bigDecimal"==this.getDataType()){var i=this.options.decimalDelimiter||".";if("number"==typeof t)if(l.k.printLog("Warning : BigDecimal Datatype, then you must enter a string instead of a number to get the exact data.["+this.id+"]"),this.useBigDecimalFloat){var o=(s=(t=t.toString()).split(i))[1]?s[1].length:0;t=Big(t.toString()).toFixed(o)}else t=Big(t.toString()).toFixed();else if(t.constructor==Big)t=t.toFixed();else if("string"==typeof t)try{if(""===t)t="";else if(!this.options.maskFormat)if(this.useBigDecimalFloat){var s;o=(s=t.split(i))[1]?s[1].length:0;t=Big(t).toFixed(o)}else t=Big(t).toFixed()}catch(t){l.k.printLog("Warning : You must enter the exact number of data.["+this.id+"]")}}else t=t.toString();if(t=document.activeElement==this.render||this._editFormat?t:this.formatter.format(t),this._editFormat){var a=!1;if(this.options.displayFormatter){var h=n.D.getGlobalFunction(this.options.displayFormatter,this.scope_id);"function"==typeof h&&(t=h(t),a=!0)}if(!0!==a)t=WebSquare.text.dynamicMask(t,this._editFormat,this._editTokens).value}else e&&"all"==this.options.applyFormat?(t=this.validator.validateString(t),t=this.formatter.format(t)):this.options.maskFormat&&"all"==this.options.applyFormat&&(t=this.formatter.format(t));this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass("w2input_placeholder")||this.addClass("w2input_placeholder"),this.render.value=this.options.placeholder):(this.removeClass("w2input_placeholder"),this.render.value!==t&&(this.render.value=t)):this.render.value!==t&&(this.render.value=t),this.realValue=t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getValue=function(){try{var t=this.options.getValueHandler;if(!t)return this._getValue();var e=n.D.getGlobalFunction(t,this.scope_id);if("function"==typeof e)return e.call(this)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._getValue=function(){try{var t;return t=this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value,this.options.maskFormat&&"all"==this.options.applyFormat?t:this._editFormat?this._editValue:this.formatter.unformat(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setFocusSize=function(t){try{if(1==this.options.focusCalcSize&&-1==this.getStyle("height").indexOf("%")&&-1==this.getStyle("width").indexOf("%")){var e=parseInt(this.getStyle("height")),i=parseInt(this.getStyle("width")),o=this.focusStyleObj.paddingLeft+this.focusStyleObj.paddingRight+this.focusStyleObj.borderLeftWidth+this.focusStyleObj.borderRightWidth-(this.originalStyleObj.paddingLeft+this.originalStyleObj.paddingRight+this.originalStyleObj.borderLeftWidth+this.originalStyleObj.borderRightWidth),s=this.focusStyleObj.paddingTop+this.focusStyleObj.paddingBottom+this.focusStyleObj.borderTopWidth+this.focusStyleObj.borderBottomWidth-(this.originalStyleObj.paddingTop+this.originalStyleObj.paddingBottom+this.originalStyleObj.borderTopWidth+this.originalStyleObj.borderBottomWidth);1==t&&0==this.focusedSizeFlag?(this.setStyle("height",e-s+"px"),this.setStyle("width",i-o+"px"),this.focusedSizeFlag=!0):0==t&&1==this.focusedSizeFlag&&(this.setStyle("height",e+s+"px"),this.setStyle("width",i+o+"px"),this.focusedSizeFlag=!1)}}catch(t){
r.w.printStackTrace(t,null,this)}},c.prototype.setVerticalAlign=function(){try{if(n.D.isIE()){var t=this.getSize("height")||parseInt(this.getStyle("height"));isNaN(t)||this.setStyle("lineHeight",t+"px")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.addClass(this.render,"w2input_disabled"):this.removeClass(this.render,"w2input_disabled");break;case"readOnly":1==e?this.addClass(this.render,this.options.readOnlyClass):this.removeClass(this.render,this.options.readOnlyClass);break;case"mandatory":1==e?this.addClass(this.render,"w2input_mandatory"):this.removeClass(this.render,"w2input_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getFormattedValue=function(){try{return this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this._getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this._getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.adjustMaxLength=function(t){try{if(this.options.useMaxLength)return t;if(this.options.maxlength>0){var e=(t+="").substr(0,1),i=parseInt(this.originalMaxLength,10);"-"!=e&&"+"!=e||(i+=1),this.setMaxLength(i),this.render.maxLength=i}return t}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getDataType=function(){try{return this.options.dataType}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDataType=function(t){try{if(!t||"euro"==t||"rupee"==t||"tenge"==t)return;this.options.dataType=t,this._refreshOption()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._refreshOption=function(t){try{void 0!==t&&null!=t||(t={});var e=this.options.dataType;if("all"==this.options.applyFormat&&""==this.options.displayFormatter&&"bigDecimal"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e&&(this._changeApplyFormat=!0,this.options.applyFormat="display"),""==this.options.displayFormat||!0===t.refreshDisplayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"float":this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".");break;case"bigDecimal":case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this.options.maskFormat&&(this.useBigDecimalFloat=!0);var i=this.options.dataType;"bigDecimal"==i&&(i=!0===this.useBigDecimalFloat?"float":"number");var o=this._getValue();switch(this.formatter=WebSquare.format.createFormatter(i,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),
"default"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this.options.maskFormat&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id)),this.validator.clearCommand(),this.validator=new d.s.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"bigDecimal":case"number":""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"float":this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat));break;case"euro":this.validator.addCommand(new d.s.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.s.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.s.tengeCommand(this.options.delimiter,this.options.decimalDelimiter))}"string"==typeof t.refreshValue?this._setValue(t.refreshValue):this.setValueNM(o)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype._setFormat=function(t,e){try{for(var i in t)i in this.options&&"string"==typeof t[i]&&(this.options[i]=t[i]);this._refreshOption(e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t;var e=this._getValue();"number"===this.options.dataType&&("default"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this.options.maskFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),""==this.options.displayFormat?(this.validator.removeCommand(new d.s.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),
this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9"))):(this.validator.removeCommand(new d.s.allowCharCommand("+\\-.0-9")),this.validator.addCommand(new d.s.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0))),this.formatter.setMasking(t),this.setValueNM(e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setIoFormat=function(t,e){try{if("date"!==this.options.dataType)return;var i={};if("string"==typeof e&&e!==this.options.dateMask&&(i.refreshDisplayFormat=!0),"string"==typeof t&&t!==this.options.ioFormat){var o=WebSquare.format.createFormatter(this.options.dataType,t,"",this.options.ioFormat,null,null,this.scope_id,this.id);i.refreshValue=o.format(this._getValue())}this._setFormat({ioFormat:t,dateMask:e},i)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.changeCurrency=function(t,e,i,o){try{if(!t||"float"!==t&&"number"!==t&&"euro"!==t&&"rupee"!==t&&"tenge"!==t)return;var a=this.options.decimalDelimiter;switch("number"===t&&"true"===this.options.floatNumber&&(t="float"),t){case"number":case"float":e||(this.options.numberMask||(this.options.numberMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+t+'"]/numberMask/@value')||""),e=this.options.numberMask),this.options.delimiter=i||",",this.options.decimalDelimiter=o||".";break;case"euro":e||(this.options.euroMask||(this.options.euroMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+t+'"]/euroMask/@value')||""),e=this.options.euroMask),this.options.delimiter=i||".",this.options.decimalDelimiter=o||",";break;case"rupee":e||(this.options.rupeeMask||(this.options.rupeeMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+t+'"]/rupeeMask/@value')||""),e=this.options.rupeeMask),this.options.delimiter=i||",",this.options.decimalDelimiter=o||".";break;case"tenge":e||(this.options.tengeMask||(this.options.tengeMask=s.v.getConfiguration('/WebSquare/input/dataType[@valueType="'+t+'"]/tengeMask/@value')||""),e=this.options.tengeMask),this.options.delimiter=i||" ",this.options.decimalDelimiter=o||"-"}if(!e)return;this.options.dataType=t,this.options.displayFormat=e,this._changeApplyFormat&&(this.options.applyFormat="all");var n=this._getValue();if(n.lastIndexOf(a)>-1&&(n=n.split(a).join(this.options.decimalDelimiter)),this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.validator.clearCommand(),this.validator=new d.s.validateInvoker(this.id,this.options),"float"===this.options.dataType||this.useBigDecimalFloat)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){var l=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(l,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(l)),this.floatMaxlength=l,this.options.maxlength="-1"}else this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if("number"===this.options.dataType)this.validator.addCommand(new d.s.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0);else if("euro"===this.options.dataType||"rupee"===this.options.dataType||"tenge"===this.options.dataType)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){l=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength
;this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(l,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(l)),this.floatMaxlength=l,this.options.maxlength="-1"}else this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);this.formatter.setMasking(e),this.setValueNM(n)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getDisplayFormat=function(){try{return this.options.displayFormat}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDisplayFormatter=function(t){try{var e=this._getValue();if(this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.options.displayFormat){var i;this.displayFormatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,"",this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),e=this.originalHashValue[e]||e,e=this.displayFormatter.format(e),i=this.displayFormatter.hash_format_to_original,this.originalHashValue=i}this.setValueNM(e)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getDisplayFormatter=function(){try{return this.options.displayFormatter}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getDisplayValue=function(){try{return this.formatter.format(this._getValue())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getIOValue=function(){try{return this._getValue()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getIOFormat=function(){try{return this.options.ioFormat}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.getIOFormatter=function(){try{return this.options.ioFormatter}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{var e=this._getValue();this.setValueNM(this.options.initValue),this.options.maskFormat?this.modelControl.setData(this.maskFormatModelFormat(this.options.initValue)):this.modelControl.setData(this.options.initValue),t&&t.fireEvent&&e!=this._getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setDefaultValue=function(t){try{"string"==typeof t&&(this.options.initValue=t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.checkMaxByteLength=function(t){if(-1!=this.options.maxByteLength||this._isNumberType()&&this.options.maxLength>0){if(this.options.validateOnCheckMaxByteLength){var e=this.render.value;e=this.validator.validateString(e),this.render.value=e,this.realValue=e}e=this.render.value;"all"==this.options.applyFormat&&(e=this.validator.validateString(e));var i=e;-1!=this.options.maxByteLength&&e!=(i=n.D.getStringByByteSize(e,this.options.maxByteLength,this.options.byteCheckIgnoreChar))&&(this.reFocus=!0,this._focusStatus="cancel",this.setValueNM(""),this.blur(),this.render.focus(),"all"==this.options.applyFormat?this.setValueNM(i):(this.render.value=i,this.realValue=i));var o=i.charAt(i.length-1),r=!1;if(this.options.autoFocus&&!0!==n.D.isKorean(o))if(n.D.getByteLength(i)==this.options.maxByteLength)r=!0;else if(this._isNumberType()&&this.options.maxLength>0){var l=this.options.decimalDelimiter||".",h=(e=e.toString()).split(l),d=h[0],u=h[1],c=this.options.maxLength.toString().split(l),p=c[1]?parseInt(c[1]):0,g=c[0]?parseInt(c[0]):0;u&&u.length>0?p>0&&u.length>=p&&(r=!0):d.length>0&&!p&&g>0&&d.length>=g&&(r=!0)}if(r){if("spinner"===this.options.pluginName&&this.parentControl)return void((m=n.D.getNextTabbableComp(this.parentControl.id))&&m.focus())
;if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var m;(m=n.D.getNextTabbableComp(this.id))&&this._keyDownStart&&m.focus()}else{var f=n.D.getGlobalFunction(s.v.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof f&&f.call(this,this.id)}}this.options.validateOnInput||!1===t||!0===n.D.isKorean(o)||n.D.getByteLength(i)!=this.options.maxByteLength||a.B.fireEvent(this,"oneditfull")}},c.prototype.handlePasteEvent=function(t){var e,i;if("paste"==t.type){var o;if(t.clipboardData)o=t.clipboardData;else{if(!window.clipboardData)return;o=window.clipboardData}if(""!=(e=o.getData("Text"))){var s=this.formatter.masking,r=this.valueType;i=void 0!==r&&null!=r&&"number"==r?WebSquare.text.unformatCurrency(s,e):void 0!==r&&null!=r&&"date"==r?WebSquare.text.unformatDate(s,e):void 0!==r&&null!=r&&"time"==r?WebSquare.text.unformatTime(s,e):WebSquare.text.unformatText(s,e),o.setData("Text",i),a.B.stopPropagation(t)}}},c.prototype.handlePasteValidator=function(t){var e="";if("paste"==t.type){var i,o;if(t.clipboardData)i=t.clipboardData;else{if(!window.clipboardData)return;i=window.clipboardData}if(e=i.getData("Text"),"number"==this.options.dataType){var s=this.render.value.wq_trim();"."!==s&&"-"!==s&&"+"!==s||(this.render.value="")}var r=WebSquare.text.getSelection(this.render);o="all"==this.options.applyFormat?this._getValue():this.render.value;var n=WebSquare.text.getCaretPos(this.render),l=e.length;e=o.substring(0,r.start)+e+o.substring(r.end),e=this.validator.validateString(e),this.setValueNM(e,!1),WebSquare.text.setCaretPos(this.render,n+l),a.B.preventDefault(t)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.modelControl.unbindRef(),this.options.ref="",this.refresh())}catch(t){r.w.printStackTrace(t)}},c.prototype.setPlaceholder=function(t){try{if(n.D.isNull(t))return;if(WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.placeholder!=t)if(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder){var e=document.getElementById(this.id);this.options.showPlaceHolderOnReadOnly||!e.disabled&&!e.readOnly?e.placeholder=this.options.placeholder:this.options.placeholder=""}else 0==this.realValue.length&&(this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?this.hasClass("w2input_placeholder")?this.render.value=this.options.placeholder:(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")):this.options.placeholder="")}catch(t){r.w.printStackTrace(t)}},c.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=n.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},c.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=n.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},c.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){r.w.printStackTrace(t)}},c.prototype.setNextTabID=function(t,e){try{null!=t&&n.D.setNextTabID(this.id,t,e)}catch(t){r.w.printStackTrace(t)}},c.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAllowChar=function(t){try{if(n.D.isNull(t))return!1;if(this.options.allowChar!=t){var e=this._getValue();this.options.allowChar=t.wq_trim();var i=this.options.dataType
;switch("bigDecimal"==i&&(i=!0===this.useBigDecimalFloat?"float":"number"),"default"==this.options.maskFormat?i="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"numberMask":"textMask":"reverse"==this.options.maskFormat&&(i="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"reverseNumberMask":"reverseTextMask"),this.formatter=WebSquare.format.createFormatter(i,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.options.maskFormat&&this.formatter.setAllowChar(this.options.allowChar),this.validator=new d.s.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"euro":this.validator.addCommand(new d.s.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.s.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.s.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"number":case"bigDecimal":if("number"===this.options.dataType||!this.useBigDecimalFloat){""==this.options.displayFormat?this.validator.addCommand(new d.s.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.s.numberCommand),this.validator.addCommand(new d.s.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.floatMaxlength>=0?(this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.s.maxFloatLengthCommand(this.floatMaxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.s.maxLengthCommand(this.floatMaxlength)),this.options.maxlength="-1"):this.validator.addCommand(new d.s.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat))}var o=this.formatter.unformat(e),s=this.validator.validateString(o);this.setValueNM(s),this.noRefresh=!0,this.options.useMonthYearFormat&&"date"===this.options.dataType&&(s=WebSquare.date.getIOUnFormatDate(s,this.options.ioFormat));var a=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);return"function"==typeof a&&(s=a.call(this,s,this.getDisplayValue())),this.options.maskFormat?this.modelControl.setData(this.maskFormatModelFormat(s)):this.modelControl.setData(s),this.noRefresh=!1,!0}}catch(t){r.w.printStackTrace(t)}return!1},c.prototype.maskFormatModelFormat=function(t){try{if(!t)return t;var e="";if(this.options.maskFormat)if(this.options.maskFormatModelExcludeChar)for(var i=this.options.maskFormatModelExcludeChar.split(""),o=0;o<t.length;o++){for(var s=!1,a=0;a<i.length;a++)if(t[o]==i[a]){s=!0;break}s||(e+=t[o])}else e=t;else e=t;return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.maskFormatModelUnFormat=function(t){try{if(!t)return t;var e=t;if(this.options.maskFormat&&this.options.maskFormatModelNumber&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType)&&(e=t.toString(),this.options.displayFormat&&this.options.displayFormat.indexOf(".")>0))for(var i=e.indexOf(".")<0?0:e.length-e.indexOf(".")-1,o=0;o<this.options.displayFormat.length-this.options.displayFormat.indexOf(".")-i-1;o++)0==o&&e.indexOf(".")<0&&(e=t+"."),e+="0";return e}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleBlurEventBasic=function(t){try{if(this.getReadOnly()&&!this.options.readOnlyFocusEvent)return;a.B.fireEvent(this,"oneditend"),this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass);var e=this._getValue(),i=!0;"all"===this.options.applyFormat&&0===Math.abs(e)&&"-"===e.charAt(0)&&(e=e.slice(1),i=!1),this._editFormat&&(i=!1),this._setValue(e,{skipNM:i});var o={value:this._oldValue};void 0===o.value&&(o.value=this.originalValue),o.value!=this._getValue()&&(a.B.fireEvent(this,"onchange",{oldValue:o.value,
newValue:this._getValue()}),a.B.fireEvent(this,"onviewchange",{oldValue:o.value,newValue:this._getValue()})),a.B.fireEvent(this,"onblur",t),a.B.fireEvent(this,"onafteredit"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),n.D.isIEAllVersion()||n.D.isOpera()||a.B.fireEvent(this,"onfocusout",t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFocusinEvent=function(t){this.options.autoFocus&&(this._keyDownStart=!1),this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass);var e=this.render.value;"all"!=this.options.applyFormat&&(e=this.formatter.unformat(e)),e!=this.render.value&&(this.render.value=e);var i=this,o={};n.D.isIEAllVersion("11")?(o.onRestore=function(t){document.execCommand("undo",!1,null)},o.stopEvent=!0):o.onRestore=function(t){i.render.value=t.value};var s=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:s},o),this._oldValue=s,this._focusStatus="focusin"},c.prototype.handleBeforeFocusEvent=function(t){switch(this._focusStatus){case"init":this._focusStatus="ready";break;case"ready":this._focusStatus="cancel",this.focus();break;case"done":this._focusStatus="init"}},c.prototype.handleFocusValueEventAdv=function(t){try{if(this.options.autoFocus&&(this._keyDownStart=!1),this.getReadOnly()&&!this.options.readOnlyFocusEvent)return;if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value="",this.removeClass("w2input_placeholder")),a.B.fireEvent(this,"onbeforeedit"),this.originalValue=this._getValue(),!n.D.isIEAllVersion()){var e=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:e},{}),this._oldValue=e}this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass),this.focusStyleObj||(this.focusStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.reFocus?this.reFocus=null:"select"==this.options.editType&&this.select(),this.setFocusSize(!0),0!=this.inputEvented||this._editFormat||(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),
this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),s.v.browserCheck.android&&s.v.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this.options.maskFormat&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),n.D.isFF()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),this.options.validateOnInput?(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.options.preventCopyPaste?this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))):this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))):this.options.preventCopyPaste&&this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),"number"==this.options.dataType&&this.setStyle("imeMode","disabled"),this.options.preventCopyPaste&&(this.setStyle("MozUserSelect","none"),this.event.addListener(this.render,"ondragstart",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)})))));var i=this.render.value;if(this._editFormat)i=this._editValue||"",i=WebSquare.text.dynamicMask(i,this._editFormat,this._editTokens).value;else"all"!=this.options.applyFormat&&(i=this.formatter.unformat(i));i!=this.render.value&&(this.render.value=i,"select"==this.options.editType&&this.selectFlag&&(this.select(),this.selectFlag=!1)),a.B.fireEvent(this,"onfocus",t),this._focusStatus="done"}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{this.options.refSync&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(this.validator.validateKeyDown(this.render,i,t)||a.B.stopEvent(t),37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){if(this.blurHandler=!0,!0===this.options.nextTabByEnter){var o=a.B.fireEvent(this,"oneditenter",t);this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}}else if(27==e)this.blurHandler=!0;else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(9==e){o=a.B.fireEvent(this,"oneditenter",t);this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}else if(8==e){var l;if(l=s.v.browserCheck.android&&s.v.browserVersion()>=5,"all"==this.options.applyFormat&&!l){i=this.render.value;var h=WebSquare.text.getCaretPos(this.render),d=i.substring(h-1,h),u=WebSquare.text.getSelection(this.render);if(("float"===this.options.dataType||"bigDecimal"===this.options.dataType&&this.useBigDecimalFloat||"euro"===this.options.dataType||"tenge"===this.options.dataType||"rupee"===this.options.dataType)&&d===this.options.decimalDelimiter)a.B.preventDefault(t),
this.render.value=i.slice(0,h-1)+i.slice(h,i.length),WebSquare.text.setCaretPos(this.render,this.render.value.length+1);else if(isNaN(Number(d))&&u.start==u.end){var c=i.substring(h-2,h-1);(!isNaN(Number(c))&&""!=c||this.options.maskFormat&&"text"==this.options.dataType&&""!=c&&new RegExp("["+this.options.allowChar+"]").test(c))&&new RegExp("[^"+this.options.allowChar+"]").test(d)&&(this.render.value=i.slice(0,h-2)+i.slice(h-1,i.length),WebSquare.text.setCaretPos(this.render,h-1))}}}else if(this.options.preventCopyPaste&&n.D.isOpera()){if(t.ctrlKey&&(88===t.keyCode||67===t.keyCode||86===t.keyCode))return void a.B.stopEvent(t)}else this.options.autoFocus&&(this._keyDownStart=!0);if(this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength){h=WebSquare.text.getCaretPos(this.render);var p=this._getValue();this.adjustMaxLength(this.render.value),0==h&&p.length==this.options.maxlength&&(189==e||109==e?this.render.value="-"+p:(187==e&&t.shiftKey||107==e)&&(this.render.value="+"+p)),this.adjustMaxLength(this.render.value)}n.D.isOpera()&&this.checkMaxByteLength(!1),this.beforeEditValue=this._getValue()}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleInputEvent=function(t){try{if("all"==this.options.applyFormat&&this.realValue.length-this.render.value.length==1){var e=this.realValue,i=this.render.value,o=WebSquare.text.getCaretPos(this.render);isNaN(Number(e.substring(o,o+1)))&&(this.render.value=i.slice(0,o-1)+i.slice(o,i.length),WebSquare.text.setCaretPos(this.render,o-1)),this.handleKeyupEvent({})}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleInputMask=function(t){try{if(this.options.maskFormat&&"all"==this.options.applyFormat){var e,i=this.render.value,o=i,s=WebSquare.text.getCaretPos(this.render);if(t){var a=t.charCode?t.charCode:t.keyCode;e=a&&String.fromCharCode(a)||t.data}if(!e&&!(e=i[s-1]))return;"default"==this.options.maskFormat&&i.length==s&&(i=i.substr(0,s));var n=!1;if("text"==this.options.dataType&&(i=this.validator.validateKeyInput(this.render,i,t).str,o.length!==i.length&&(n=!0)),"number"==this.options.dataType||"bigDecimal"==this.options.dataType?(2==i.toString().length&&"-"==i.toString()[0]&&(i=this.formatter.executeFormat(i)),i=this.validator.validateString(i)):i=this.formatter.unformat(i),i=this.formatter.format(i,!0),"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("reverse"==this.options.maskFormat)i.substr(0,i.length-1)==o&&"0"!=e&&s==o.length&&(i="-"==i[0]?"-":"");else if("default"==this.options.maskFormat)if("-"==i[0]){if(i.substr(2,i.length-2)==o.substr(1,o.length-1)&&"0"!=e&&1==s)i="-";else if(this.options.displayFormat&&"#"==this.options.displayFormat.charAt(s-1)&&s==o.length)for(var l=1;"#"==this.options.displayFormat.charAt(s-l)&&"0"==o.charAt(s-l)&&s-l>=1;)i=i.concat("0"),l+=1}else if(i.substr(1,i.length-1)==o&&"0"!=e&&0==s)i="";else if(this.options.displayFormat&&"0"!=this.options.displayFormat.charAt(s-1)&&s==o.length){l=s-1;for(var h,d="";/[0\D]/g.test(o.charAt(l))&&"0"!=this.options.displayFormat.charAt(l)&&l>=0;)l-=1;for(h=l+=1;"0"!=this.options.displayFormat.charAt(l)&&/[0\D]/g.test(o.charAt(h))&&h<o.length;)"#"!=this.options.displayFormat.charAt(l)&&"0"!=this.options.displayFormat.charAt(l)?(d=d.concat(this.options.displayFormat.charAt(l)),this.options.displayFormat.charAt(l)==o.charAt(h)&&(h+=1)):(d=d.concat("0"),h+=1),l+=1;for(l=d.length;/\D/g.test(d[l])&&l>=0;)l-=1;d=d.substr(0,l+1),i=i.concat(d)}if(this.render.value!=i&&(this.render.value=i),this.realValue=i,"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("default"==this.options.maskFormat)if(WebSquare.text.setCaretPos(this.render,s),/\d/g.test(e))if(s==o.length)if("0"===i[s-1])1==s||"-"==i[0]&&2==s?WebSquare.text.setCaretPos(this.render,s):WebSquare.text.setCaretPos(this.render,s+1);else if("0"!==i[s]){for(;"0"!==i[s]&&s<=i.length;)s+=1;WebSquare.text.setCaretPos(this.render,s-1)
}else"0"!=i[s]||/\d/g.test(i[s-1])?WebSquare.text.setCaretPos(this.render,s):WebSquare.text.setCaretPos(this.render,s+1);else(/\D/g.test(i[s])||/\D/g.test(i[s-1]))&&WebSquare.text.setCaretPos(this.render,s+1);else e?"-"==e?WebSquare.text.setCaretPos(this.render,s):WebSquare.text.setCaretPos(this.render,s-1):WebSquare.text.setCaretPos(this.render,s);else"reverse"==this.options.maskFormat&&(WebSquare.text.setCaretPos(this.render,s-(o.length-i.length)),/\d/g.test(t.data)&&s==o.length&&WebSquare.text.setCaretPos(this.render,i.length));else if("text"==this.options.dataType)if("default"==this.options.maskFormat)if(WebSquare.text.setCaretPos(this.render,s),new RegExp("["+this.options.allowChar+"]").test(e))if(s==o.length){for(;s<=i.length;)s+=1;WebSquare.text.setCaretPos(this.render,s)}else new RegExp("[^"+this.options.allowChar+"]").test(i[s])||new RegExp("[^"+this.options.allowChar+"]").test(i[s-1])?WebSquare.text.setCaretPos(this.render,s+1):n&&i.length==this.options.displayFormat.length&&WebSquare.text.setCaretPos(this.render,s-1);else e?WebSquare.text.setCaretPos(this.render,s-1):WebSquare.text.setCaretPos(this.render,s);else"reverse"==this.options.maskFormat&&(WebSquare.text.setCaretPos(this.render,s-(o.length-i.length)),new RegExp("["+this.options.allowChar+"]").test(t.data)&&s==o.length&&WebSquare.text.setCaretPos(this.render,i.length))}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleInputValidator=function(t){try{var e=this.render.value,i=this.validator.validateKeyInput(this.render,e,t);if(i.valid){if(e!==i.str){var o=WebSquare.text.getCaretPos(this.render);n.D.isIEAllVersion()||(o-=e.length-i.str.length),this.render.value=i.str,WebSquare.text.setCaretPos(this.render,o)}}else a.B.stopEvent(t);if(!this.options.maskFormat){var s="";-1!=this.options.maxByteLength?s=n.D.getStringByByteSize(this.render.value,this.options.maxByteLength,this.options.byteCheckIgnoreChar):-1!=this.options.maxLength&&this.options.maxLength.indexOf(this.options.decimalDelimiter)<0&&(s=this.render.value,"function"==typeof customModelFormatter&&(s=customModelFormatter.call(this,s)),s=(s=this.formatter.unformat(s)).split(this.options.delimiter).join(""));var l=s.charAt(s.length-1);if(s.length>0&&!0!==n.D.isKorean(l)&&(n.D.getByteLength(s)==this.options.maxByteLength||s.length==this.options.maxLength)){var h=this;setTimeout((function(){a.B.fireEvent(h,"oneditfull")}),200)}}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeypressEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(n.D.isFF()&&t.ctrlKey&&e)return;if("all"==this.options.applyFormat&&!this.options.maskFormat&&(i=this.formatter.unformat(i),"number"===this.options.dataType)){var o=this.options.delimiter||",";-1!=i.indexOf(o)&&(i=i.split(o).join(""))}if(!this.validator.validateKeyPress(this.render,i,t)){if(this._isNumberType()&&this.options.validateOnInput&&this.floatMaxlength>0&&this.options.autoDecimalPoint){var s=!1;if(this.render.value.indexOf(this.options.decimalDelimiter)>-1&&(s=!0),!s)return}if(1==this.options.autoPopupInvalidMessage&&e>46&&!(e>=112&&e<=123)&&alert(this.options.invalidMessage),!0===n.D.getBoolean(this.options.fireEventOnInvalid)&&this.validator.obfuscator_invalidObject){var l={};l.callerId=this.validator.obfuscator_invalidObject.callerId,l.type=this.validator.obfuscator_invalidObject.getType(),l.value=this.validator.obfuscator_invalidObject.getValue(),l.detail=this.validator.obfuscator_invalidObject.getDetail(),a.B.fireEvent(this,"oninputinvalid",l)}a.B.stopEvent(t)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{this.options.refSyncKeyup&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=!1,o=this.render.value;if(this._isNumberType()&&this.options.autoFocus&&!1===this.options.autoDecimalPoint&&(e>=48&&e<=57||e>=96&&e<=105||o.charAt(o.length-1)==this.options.decimalDelimiter)&&this.floatMaxlength>0){o=this.formatter.unformat(o);var s=this.options.delimiter||","
;if(-1!=o.indexOf(s)&&(o=o.split(s).join("")),-1==o.indexOf(this.options.decimalDelimiter))this.beforeEditValue.length==this._integerMaxLength&&(i=!0,this.tabOrderMoveStart=!0);else if(this._fractionMaxLength>0){var l=o.split(this.options.decimalDelimiter),h=(l[0],l[1]);h&&h.length>0&&h.length>=this._fractionMaxLength&&(i=!0,this.tabOrderMoveStart=!0)}}if(37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var d=this._getValue(),u=this.modelControl.getData();this.noRefresh=!0,this.options.useMonthYearFormat&&"date"===this.options.dataType&&(d=WebSquare.date.getIOUnFormatDate(d,this.options.ioFormat));var c=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof c&&(d=c.call(this,d,this.getDisplayValue())),this.options.maskFormat?this.modelControl.setData(this.maskFormatModelFormat(d)):this.modelControl.setData(d),this.noRefresh=!1,u!=d&&a.B.fireEvent(this,"onchange",{oldValue:u,newValue:d})}if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(p=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,p.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(p=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,p.focus())}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(16==e);else if(9==e||i){var p;if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(p=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,p.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(p=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,p.focus())}else{if("all"==this.options.applyFormat&&!this.options.maskFormat){d="";if(90==e&&t.ctrlKey){var g=WebSquare.historyManager.get(this.options.pluginName,this.id);void 0===g.value&&(g.value=""),d=g.value}else d=this.render.value;var m,f,b=WebSquare.text.getCaretPos(this.render),y=WebSquare.text.getSelection(this.render);if(m=d.length,d=this.formatter.unformat(d),this.options.autoDecimalPoint&&-1==d.indexOf(this.options.decimalDelimiter)){var v=d.split(this.options.delimiter).join("");v.length>this._integerMaxLength&&(d=v.slice(0,this._integerMaxLength)+this.options.decimalDelimiter+v.slice(this._integerMaxLength,v.length))}d=this.validator.validateString(d),d=this.formatter.format(d,!0),d=this.validator.validateString(d),f=(d=this.formatter.format(d,!0)).length,this.render.value!=d&&(this.render.value=d),this.realValue=d,y.start===y.end&&WebSquare.text.setCaretPos(this.render,b+f-m)}this.checkMaxByteLength()}this.options.autoFocus&&(this._keyDownStart=!1);var w={oldValue:this.beforeEditValue,newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?a.B.fireEvent(this.parentControl,"oneditkeyup",w,t):a.B.fireEvent(this,"oneditkeyup",w,t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleBlurEvent=function(t){try{this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass),this._setValue(this._getValue());var e={value:this._oldValue};void 0===e.value&&(e.value=this.originalValue),e.value!=this._getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e.value,newValue:this._getValue()}),a.B.fireEvent(this,"onblur",t),this._focusStatus="init"}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleCopyEvent=function(t){try{if(this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly){var e,i=this._getValue();if(n.D.isIEAllVersion()){e=window.clipboardData;var o=this;s.v.setTimer((function(){e.setData("Text",i),s.v.clearTimer(o.id+"_handleCopyEvent")}),{key:o.id+"_handleCopyEvent",
caller:o,delay:1})}else(e=t.clipboardData).setData("Text",i);a.B.stopEvent(t)}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleDynamicMask=function(t){try{for(var e=this.render.selectionStart,i=0,o=0,s=this.render.value,a=e-1;a>=0;a--)0==/^[0-9a-zA-Z]/.test(s.charAt(a))&&i++;this.render.value[e-1];var n=WebSquare.text.dynamicMask(this.render.value,this._editFormat,this._editTokens);this.render.value=n.value,this._editValue=n.orgValue;for(a=e;a>=0;a--)0==/^[0-9a-zA-Z]/.test(n.value.charAt(a))&&o++;var l=e+(o-i);this.render===document.activeElement&&this.render.setSelectionRange(l,l)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyDownDynamicMask=function(t){try{WebSquare.text.deleteMaskChar(t,this,this.render);var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(this.validator.validateKeyDown(this.render,i,t)||a.B.stopEvent(t),13==e){if(this.blurHandler=!0,!0===this.options.nextTabByEnter){var o=a.B.fireEvent(this,"oneditenter",t);this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}}else if(9==e){o=a.B.fireEvent(this,"oneditenter",t);this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleKeyUpDynamicMask=function(t){try{var e=t.charCode?t.charCode:t.keyCode;this.render.value;if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var i=this._getValue(),o=this.modelControl.getData();this.noRefresh=!0;var s=n.D.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof s&&(i=s.call(this,i,this.getDisplayValue())),this.modelControl.setData(i),this.noRefresh=!1,o!=i&&a.B.fireEvent(this,"onchange",{oldValue:o,newValue:i})}if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(l=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,l.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(l=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,l.focus())}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(9==e){var l;if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(l=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,l.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(l=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,l.focus())}this.options.autoFocus&&(this._keyDownStart=!1);var h={oldValue:this.modelControl.getData(),newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?a.B.fireEvent(this.parentControl,"oneditkeyup",h,t):a.B.fireEvent(this,"oneditkeyup",h,t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleBlurDynamicMask=function(t){try{this.handleBlurEventBasic(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFocusValueEventAdvMask=function(t){try{this.handleFocusValueEventAdv(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.focus=function(t){try{this.render.focus(),"select"==this.options.editType&&this.render.select()}catch(t){r.w.printStackTrace(t)}},c.prototype.select=function(t){try{this.selectFlag=!0,this.render.select()}catch(t){r.w.printStackTrace(t)}},c.prototype.setDisabled=function(t){try{if(t=n.D.getBoolean(t)){
if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.disabled=t,this.setProperty("disabled",t)}else this.options.disabled=t,this.setProperty("disabled",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.w.printStackTrace(t)}return t},c.prototype.setReadOnly=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t)}else this.options.readOnly=t,this.setProperty("readOnly",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.w.printStackTrace(t,null,this)}return t},c.prototype.serialize=function(){return{value:this._getValue()}},c.prototype.restore=function(t){try{this._setValue(t.value)}catch(t){return r.w.printStackTrace(t,null,this),!1}return!0},c.prototype._trim=function(t){try{var e=t+"";return this.options.trim?t=e.wq_trim():(this.options.ltrim&&(t=e.replace(/^\s+/,"")),this.options.rtrim&&(t=e.replace(/\s+$/,""))),t}catch(e){return r.w.printStackTrace(e,null,this),t}},c.prototype.setImeMode=function(t){try{this.setStyle("imeMode",t)}catch(e){return r.w.printStackTrace(e,null,this),t}},c.prototype.getFocusedComponentId=function(){try{var t=this.parentControl&&this.parentControl.options&&this.parentControl.options.pluginName;if("grid"===t||"gridView"===t)return this.parentControl.id}catch(t){r.w.printStackTrace(t,null,this)}return this.id},c.prototype._isNumberType=function(){try{var t=this.options.dataType;return!(!t||"float"!=t&&"number"!=t&&"bigDecimal"!=t&&"euro"!=t&&"tenge"!=t&&"rupee"!=t)}catch(t){r.w.printStackTrace(t,null,this)}}},897:function(t,e,i){"use strict";i.r(e),i.d(e,{inputCalendar:function(){return u}});var o=i(484),s=i(1974),r=i(5052),a=i(5948),n=i(1454),l=i(8683),h=i(1),d=i(2117),u=function(t,e,i){h.s.call(this,t,e,i)};s.x.extend(u.prototype,h.s.prototype),s.x.extend(u.prototype,d.z.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.inputCalendar",pluginName:"inputCalendar",userEvents:["onfocus","onblur","onchange","oniconclick","ondateselect","onviewchange","onyearselect","onmonthselect"],systemEvents:["onclick","onkeydown","onkeyup","onkeypress"],serializable:!0,useConfig:!0,delimiter:"-",ioFormat:"",calendarDisplayFormat:"",calendarDisplayFormatFunc:"",displayFormat:"",displayFormatter:"",displayFormatFunc:"",applyFormat:"display",monthNames:"1월,2월,3월,4월,5월,6월,7월,8월,9월,10월,11월,12월",monthNamesForYearMonthType:"1월,2월,3월,4월,5월,6월,7월,8월,9월,10월,11월,12월",yearSuffix:"년",calendarValueType:"yearMonthDate",calendarImage:s.x._resourceURI+"uiplugin/inputCalendar/images/icon_calendar.gif",calendarImageOver:s.x._resourceURI+"uiplugin/inputCalendar/images/icon_calendar_over.gif",calendarClass:"class1",chooseOption:!1,direction:"auto",holiday:"",holidayRef:"",validCheck:!1,dateValidCheck:"",dateValidSet:!1,dateValidSetCustom:!1,disableDateValidSet:!1,wmode:!1,readOnlyClass:"w2inputCalendar_readOnly",imageReadOnlyClass:"w2inputCalendar_img_readOnly",handleIconClick:null,pickerType:"selectbox",dynamicHeaderOrder:"month",fixPickerStatus:"default",pickerStatusRefresh:!1,setCurrentDate:!1,enabledDate:"*",disabledDate:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessageFunc:"",displaymessage:!1,keepFocusSelect:!1,innerHeight:"17px",inputReadOnly:!1,useUnlimitedYear:!0,defaultDate:"",initValue:"",cancleButtonShow:!1,cancelButtonShow:!1,footerDiv:!1,renderDiv:!0,focusOnDateSelect:!1,title:"",summary:"",caption:"",
focusOnOuterDiv:!1,focusOnLastYear:!1,alt:"",renderType:"component",useYearSelect:!0,useMonthSelect:!0,useAnchor:!1,useCalendarTabIndex:!0,maxYear:2030,minYear:1978,weekStartsOn:0,displayDayType:"image",fixedDate:"",rightAlign:!1,outsideClickEvent:!1,skipConfirm:!1,skipConfirmOnly:!1,topLayout:!1,visibleHourList:"",visibleMinList:"",visibleSecList:"",senseReader:!1,disableBeforeToday:!1,disableAfterToday:!1,disableBeforeDate:"",disableAfterDate:"",disableBeforeAfterDate:!1,buttonTitle:"",useMonthYearFormat:!1,keepFixedDate:!1,keepInvalidDate:!1,useButton:!1,placeholder:"",original_placeholder:"",autocomplete:"",showPlaceHolderOnReadOnly:!1,nextTabID:"",autoFocus:!1,validateRef:!1,unformatOnPaste:!1,type:"text",showToday:!0,showCalendarOnFocus:!1,visibleWeekNum:6,nextLastMonthDateSelect:!1,getValueHandler:"",setValueHandler:"",todaySelect:!1,useEditFormat:!1,dayMoveFixed:!1,validateOnInput:!1},u.prototype.initialize=function(t){try{this.options.cancleButtonShow=this.options.cancleButtonShow||this.options.cancelButtonShow,""==this.options.alt&&(this.options.alt=WebSquare.language.getMessage("Calendar_open")),this.calendar=null,this.evented=!1,this.formatter=null,this.validator=null,this.sub_validator=null,this._setFocused=!1,this.supportPlaceholder=!1,this.supportAutocomplete=!1,this.realValue="",this._setSetting=!1;var e=this.options.calendarValueType;if(this.options.displayFormatFunc&&!this.options.displayFormat){var i=l.D.getGlobalFunction(this.options.displayFormatFunc,this.scope_id);"function"==typeof i&&(this.options.displayFormat=i.call(this,this.options.calendarValueType))}if(this.options.calendarDisplayFormatFunc&&!this.options.calendarDisplayFormat){var o=l.D.getGlobalFunction(this.options.calendarDisplayFormatFunc,this.scope_id);"function"==typeof o&&(this.options.calendarDisplayFormat=o.call(this,this.options.calendarValueType))}if(this.options.displayFormat||(this.options.displayFormat=r.v.getConfiguration('/WebSquare/inputCalendar/displayFormat[@valueType="'+e+'"]/@defaultValue')),this.options.calendarDisplayFormat||(this.options.calendarDisplayFormat=r.v.getConfiguration('/WebSquare/inputCalendar/calendarDisplayFormat[@valueType="'+e+'"]/@defaultValue')),this.options.ioFormat||(this.options.ioFormat=r.v.getConfiguration('/WebSquare/inputCalendar/ioFormat[@valueType="'+e+'"]/@defaultValue')),this.options.placeholder||(this.options.placeholder=r.v.getConfiguration('/WebSquare/inputCalendar/placeholder[@valueType="'+e+'"]/@defaultValue')),""===this.options.yearSuffix&&(this.options.yearSuffix="$blank"),this.options.ioFormat&&(this.options.ioFormat=this.options.ioFormat.match(/([yMdHmS]+)/g).join("")),""==this.options.delimiter){var s=this.options.displayFormat.replace(/[a-zA-Z]/g,"");s.length>0?this.options.delimiter=s.charAt(0):this.options.delimiter="-"}var n="";if("yearMonthDate"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd",this.options.ioFormat||(this.options.ioFormat="yyyyMMdd"),n="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd"):"yearMonth"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM",this.options.ioFormat||(this.options.ioFormat="yyyyMM"),n="yyyy"+this.options.delimiter+"MM"):"yearMonthDateHour"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHH"),n="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH"):"yearMonthDateTime"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHHmm"),
n="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm"):"yearMonthDateTimeSec"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHHmmSS"),n="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS"):"year"==this.options.calendarValueType&&(this.options.displayFormat=this.options.displayFormat||"yyyy",this.options.ioFormat||(this.options.ioFormat="yyyy"),n="yyyy"),1==this.options.useEditFormat){var h=n.replace(/[a-zA-Z]/g,"#");this._editFormat=h.split("||")}this.formatter=WebSquare.format.createFormatter("date",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.validator=new d.s.validateInvoker(this.id,this.options),this.sub_validator=new d.s.validateInvoker(this.id,{_scope_obj_uuid:this.options._scope_obj_uuid,invalidMessageFunc:this.options.invalidMessageFunc}),this.sub_validator.addCommand(new d.s.dateCommand(this.options.ioFormat)),this.sub_validator.addCommand(new d.s.allowCharCommand("0-9"));var u=0;if("yearMonthDate"==this.options.calendarValueType?u=8:"yearMonth"==this.options.calendarValueType?u=6:"yearMonthDateHour"==this.options.calendarValueType?u=10:"yearMonthDateTime"==this.options.calendarValueType?u=12:"yearMonthDateTimeSec"==this.options.calendarValueType?u=14:"year"==this.options.calendarValueType&&(u=4),this.invalidMessage=WebSquare.language.getMessage("IC_invalidCalendarSelect")||"날짜 형식이 잘못 되었습니다.","all"==this.options.applyFormat&&this.options.displayFormat&&(u=this.options.ioFormat.length),this.options.maxlength=u,this.options.minlength=u,this.options.autoFocus&&(this.options.maxByteLength=u),this.sub_validator.addCommand(new d.s.maxLengthCommand(u)),this.sub_validator.addCommand(new d.s.minLengthCommand(u)),!this.options.renderDiv){var c=this.options.style,p=r.v.makeStyle(c),g=[],m=[];for(var f in p)"position width height left top right bottom display visibility".indexOf(f.toLowerCase())>-1?g.push(f+":"+p[f]):m.push(f+":"+p[f]);WebSquare.cssManager.addConvertedCSS("#"+this.id+" input",m.join(";")),this.options.style=g.join(";")}this.options.validCheck&&""===this.options.dateValidCheck?this.options.dateValidCheck="true":""===this.options.dateValidCheck&&(this.options.dateValidCheck="false"),this.options.senseReader&&(this.options.renderDiv=!0,this.options.useAnchor=!1,this.options.focusOnOuterDiv=!0),this.options.placeholder&&(WebSquare.uiplugin.inputCalendar.placeholder&&(this.supportPlaceholder=!0),this.options.original_placeholder=this.options.placeholder),this.options.autocomplete&&WebSquare.uiplugin.inputCalendar.autocomplete&&(this.supportAutocomplete=!0),this.options.showCalendarOnFocus&&(this._showCalendarOnFocus=!0),this._skipDateValidSet=!1,this._editTokens={"#":{pattern:/\d/}}}catch(t){a.w.printStackTrace(t,null,this)}},u.placeholder="string"==typeof document.createElement("input").placeholder,u.autocomplete="string"==typeof document.createElement("input").autocomplete,u.prototype.toHTML=function(){try{var t="";(this.options.inputReadOnly||this.options.showCalendarOnFocus)&&(t=" readOnly ");var e=[],i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'",s=""==this.options.title?"":"title='"+this.options.title+"'",r=""==this.options.innerHeight?"":"style='height:"+this.options.innerHeight+"'",n=""==this.options.alt?"":"alt='"+this.options.alt+"'",h=this.options.buttonTitle?" title='"+this.options.buttonTitle+"'":"",d=""==this.options.placeholder?"":" placeholder='"+this.options.placeholder+"'",u=""==this.supportAutocomplete||""==this.options.autocomplete?"":" autocomplete='"+this.options.autocomplete+"'",c="text"==this.options.type?"":" type ='"+this.options.type+"'",p=this.options.className?" "+this.options.className:""
;if(0==this.options.renderDiv)e.push("<div id='"+this.id+"' "+i+" class='w2inputCalendar w2inputCalendar_type_"+this.options.calendarValueType+"'>"),e.push("<table class='w2inputCalendar_table'><tr>"),e.push("<td class='w2inputCalendar_col_input'><input "+r+" id='"+this.id+"_input' name='"+this.id+"_input' class='w2inputCalendar_input"+p+"' "+t+" "+c+" "+s+" "+o+" "+d+" "+u+" /></td>"),e.push("<td class='w2inputCalendar_col_img'>"),1==this.options.useAnchor&&e.push("<a id='"+this.id+"_a' href='#' class='w2inputCalendar_a' role='button' aria-haspopup='true' aria-owns='"+this.id+"_calendar' >"),e.push("<img id='"+this.id+"_img' class='w2inputCalendar_img'"+h+" src='"+this.options.calendarImage+"' "+n+" "+(this.options.useCalendarTabIndex&&!this.options.useAnchor?o:"")+" />"),1==this.options.useAnchor&&e.push("</a>"),e.push("</td></tr></table>"),e.push("</div>");else if(1==this.options.renderDiv){if(e.push("<div id='"+this.id+"' "+i+" class='w2inputCalendar_div"+p+" w2inputCalendar_type_"+this.options.calendarValueType+"'>"),e.push("<div id='"+this.id+"_div_input' class='w2inputCalendar_div_input' >"),e.push("<input id='"+this.id+"_input' name='"+this.id+"_input' class='w2inputCalendar_divInput ' "+t+" "+c+" "+s+" "+o+" "+d+" "+u+" />"),e.push("</div>"),e.push("<div id='"+this.id+"_div_img' class='w2inputCalendar_div_img' >"),this.options.senseReader){var g=l.D.isMobile()?this.id+"_calendar_start":this.id+"_calendar";e.push("<a id='"+this.id+"_img'"+h+"role='button' style='display:block;background-image:url("+this.options.calendarImage+")' class='w2inputCalendar_button' href='#"+g+"' >"+this.options.alt+"</a>")}else e.push("<button type='button' id='"+this.id+"_img'"+h+" style='background-image:url("+this.options.calendarImage+")' class='w2inputCalendar_button' "+(this.options.useCalendarTabIndex&&!this.options.useAnchor?o:"tabIndex='-1'")+" >"+this.options.alt+"</button>");e.push("</div>"),e.push("</div>")}return e.join("")}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setSize=function(t,e){try{WebSquare.style.setSize.call(this,this.render,t,e),this.setSetting()}catch(t){a.w.printStackTrace(t)}},u.prototype.setSetting=function(){try{if(1==this.options.renderDiv){var t,e,i=WebSquare.style.getStyle(this.render,"width"),o=WebSquare.style.getStyle(this.dom.divImg,"width");if(o=o.lastIndexOf("px")>-1?Math.ceil(1*o.wq_replaceAll("px","")):0,(i="auto"==i?"100%":i).lastIndexOf("px")>-1)s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=parseInt(i.wq_replaceAll("px",""),10)-o-s;else if(i.lastIndexOf("%")>-1){if(S=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id)){var s,r=WebSquare.style.getStyle(S,"padding-left"),n=WebSquare.style.getStyle(S,"padding-right"),h=WebSquare.style.getStyle(S,"border-left-width"),d=WebSquare.style.getStyle(S,"border-right-width");r=r.lastIndexOf("px")>-1?parseInt(r,10):0,n=n.lastIndexOf("px")>-1?parseInt(n,10):0,h=h.lastIndexOf("px")>-1?parseInt(h,10):0,d=d.lastIndexOf("px")>-1?parseInt(d,10):0,s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=(S.offsetWidth-(r+n+h+d))*parseInt(i.wq_replaceAll("%",""),10)/100-o-s}}var u=WebSquare.style.getStyle(this.dom.input,"border-right-width");u=(u=1*u.wq_replaceAll("px",""))>1?parseInt(u,10):Math.ceil(u);var c=WebSquare.style.getStyle(this.dom.input,"border-left-width");c=(c=1*c.wq_replaceAll("px",""))>1?parseInt(c,10):Math.ceil(c);var p=WebSquare.style.getStyle(this.dom.input,"border-top-width");p=(p=1*p.wq_replaceAll("px",""))>1?parseInt(p,10):Math.ceil(p);var g=WebSquare.style.getStyle(this.dom.input,"border-bottom-width");g=(g=1*g.wq_replaceAll("px",""))>1?parseInt(g,10):Math.ceil(g);var m=WebSquare.style.getStyle(this.dom.input,"padding-right");m=(m=1*m.wq_replaceAll("px",""))>1?parseInt(m,10):Math.ceil(m);var f=WebSquare.style.getStyle(this.dom.input,"padding-left")
;f=(f=1*f.wq_replaceAll("px",""))>1?parseInt(f,10):Math.ceil(f);var b=WebSquare.style.getStyle(this.dom.input,"padding-top");b=(b=1*b.wq_replaceAll("px",""))>1?parseInt(b,10):Math.ceil(b);var y,v=WebSquare.style.getStyle(this.dom.input,"padding-bottom");v=(v=1*v.wq_replaceAll("px",""))>1?parseInt(v,10):Math.ceil(v),t=i-(u+c+m+f),WebSquare.style.setStyle(this.dom.divInput,"width",Math.max(i,0)+"px"),WebSquare.style.setStyle(this.dom.input,"width",Math.max(t,0)+"px");var w=WebSquare.style.getStyle(this.render,"height");if((w="auto"==w?this.render.offsetHeight+"px":w).lastIndexOf("px")>-1)w=parseInt(w.wq_replaceAll("px",""),10);else if(w.lastIndexOf("%")>-1){var S;if(S=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id))w=S.offsetHeight*parseInt(w.wq_replaceAll("%",""),10)/100}e=w-(p+g+b+v);var C=parseInt(WebSquare.style.getStyle(this.dom.img,"height"),10);y=C>0?(w-C)/2:(w-17)/2,(l.D.isIE(6)||l.D.isIE(7))&&(e-=2),WebSquare.style.setStyle(this.dom.img,"top",Math.max(y,0)+"px"),WebSquare.style.setStyle(this.dom.divInput,"height",Math.max(w,0)+"px"),WebSquare.style.setStyle(this.dom.input,"height",Math.max(e,0)+"px")}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setPreAction=function(){try{if(1==this.options.renderDiv){if(this.dom.divInput=this.getElementById(this.id+"_div_input"),this.dom.divImg=this.getElementById(this.id+"_div_img"),this.scope_obj&&this.scope_obj.uuid!==(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")){var t=this;this.scope_obj.bind("onsetsize",(function(){!1===t._setSetting&&(t.setSetting(),t._setSetting=!0)}))}this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setSetting))}this.dom.input=this.getElementById(this.id+"_input"),this.dom.img=this.getElementById(this.id+"_img")}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.setSetting(),this.setInputSize(),this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.useMonthYearFormat&&(t=WebSquare.date.getIOFormatDate(t,this.options.ioFormat,this.options.calendarValueType)),this.options.validCheck&&(t=this.validator.validateString(t),t=this.sub_validator.validateString(t)),this.setValueNM(t)}if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value=this.options.placeholder,this.addClass(this.dom.input,"w2inputCalendar_placeholder")),l.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){n.B.stopPropagation(t)}))):(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_input")||e.match("w2inputCalendar_divInput")){this._setFocused=!0;break}e=null;var i=WebSquare.getBody().getLayerListener().layers[this.id].component,o={};i.id&&(o[i.id]=!0),WebSquare.getBody().getLayerListener().hideAll(o),n.B.stopPropagation(t)}))),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent))),WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._showCalendar,fnHide:this._hideCalendar,event:{}}),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.options.inputReadOnly||(r.v.browserCheck.ieAllVersion?this.event.addListener(this.dom.input,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusEvent)):this.event.addListener(this.dom.input,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent))),this.options.unformatOnPaste&&this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent)),
this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),(this.options.validateOnInput||1==this.options.useEditFormat)&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.options.setCurrentDate&&(this.options.useMonthYearFormat?"yearMonthDate"!=this.options.calendarValueType&&"yearMonth"!=this.options.calendarValueType&&"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType||this._setValue(WebSquare.date.getFormattedDate(new Date,this.options.ioFormat)):"yearMonthDate"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMdd")):"yearMonth"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMM")):"yearMonthDateHour"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHH")):"yearMonthDateTime"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHHmm")):"yearMonthDateTimeSec"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHHmmSS")):"year"==this.options.calendarValueType&&this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyy"))),this.options.mandatory&&this.onPropertyChange("mandatory",l.D.getBoolean(this.options.mandatory)),this.options.renderDiv&&this.options.senseReader&&this.options.focusOnOuterDiv)null!=document.getElementById(this.id+"_img")&&n.B.addListener(document.getElementById(this.id+"_img"),"onclick",(function(t){n.B.preventDefault(t)}))}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.onComplete=function(){try{if(this.options.handleIconClick){var t=null;try{t=l.D.getGlobalFunction(this.options.handleIconClick,this.scope_id)}catch(t){$l("no function for handleIconClick : "+this.options.handleIconClick+"["+this.id+"]")}"function"==typeof t&&this.addEvent("oniconclick",t)}h.s.prototype.onComplete.call(this)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this._getValue(),e=this.modelControl.getData();if(this.options.validateRef&&""!=e&&this.options.validCheck&&!l.D.getBoolean(this.options.dateValidSet)){var i=this.validator.validate(e);if(i&&l.D.getBoolean(this.options.dateValidCheck)&&(i=this.sub_validator.validate(e)),!i)return alert(this.invalidMessage),this._setValue("",{skipValidate:!0}),void this.focus()}this.options.useMonthYearFormat&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat,this.options.calendarValueType)),0==this.options.useEditFormat&&this.setValueNM(e),t!=this._getValue()&&n.B.fireEvent(this,"onchange")}this.broadcast({linkedDataList:["refresh"]})}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setInputSize=function(){try{var t=this.getStyle("height"),e={paddingTop:parseInt(l.D.getStyleProperty(this.dom.input,"padding-top"))||0,paddingBottom:parseInt(l.D.getStyleProperty(this.dom.input,"padding-bottom"))||0,borderTopWidth:parseInt(l.D.getStyleProperty(this.dom.input,"border-top-width"))||0,borderBottomWidth:parseInt(l.D.getStyleProperty(this.dom.input,"border-bottom-width"))||0};if(t.indexOf("px")>-1&&1!=this.options.renderDiv){var i=(t=parseInt(t))-(e.paddingTop+e.paddingBottom+e.borderTopWidth+e.borderBottomWidth);this.dom.input.style.height=i+"px"}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setSkin=function(t){try{this.options.calendarClass=t,this.calendar&&this.calendar.changeClass(this.calendar.render,"w2calendar_"+this.calendar.options.calendarClass,"w2calendar_"+t)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setVerticalAlign=function(){try{if(r.v.browserCheck.ie){var t=parseInt(l.D.getStyleProperty(this.dom.input,"height"))||0;this.dom.input.style.lineHeight=t+"px"}else r.v.browserCheck.moz
}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setMinYear=function(t){try{if(t&&t>0&&(this.options.minYear=t,this.calendar)){var e=this.options.maxYear;this.calendar.updateYearSelect(t,e)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setMaxYear=function(t){try{if(t&&t<1e4&&(this.options.maxYear=t,this.calendar)){var e=this.options.minYear;this.calendar.updateYearSelect(e,t)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setValue=function(t){try{var e=this.options.setValueHandler;if(!e)return this._setValue(t);var i=l.D.getGlobalFunction(e,this.scope_id);if("function"==typeof i)return i.call(this,t)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setValueNM=function(t,e){try{if(l.D.isNull(t))return;t=t.toString(),e&&!0===e.noFormat?this.dom.input.value=t:(t=this.formatter.format(t),this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass(this.dom.input,"w2inputCalendar_placeholder")||this.addClass(this.dom.input,"w2inputCalendar_placeholder"),this.dom.input.value=this.options.placeholder):(this.removeClass(this.dom.input,"w2inputCalendar_placeholder"),this.dom.input.value=t):this.dom.input.value=t),this.realValue=t}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._setValue=function(t,e){try{t=t.toString(),e&&!0===e.skipValidate||(t=this.validator.validateString(t),t=this.sub_validator.validateString(t));var i=this._getValue();if(""!=t&&this.options.validCheck&&!l.D.getBoolean(this.options.dateValidSet)){var o=this.validator.validate(t);if(o&&l.D.getBoolean(this.options.dateValidCheck)&&(o=this.sub_validator.validate(t)),!o){if(alert(this.invalidMessage),!1===this.options.keepInvalidDate&&this._setValue("",{skipValidate:!0}),!0===this.options.keepInvalidDate&&(l.D.isChrome()||l.D.isFF())){var s=this;setTimeout((function(){s._setFocused=!1,s.dom.input.focus()}),1)}else this.focus();return}}if(this.setValueNM(t,e),this.options.useMonthYearFormat&&(t=WebSquare.date.getIOUnFormatDate(t,this.options.ioFormat,this.options.calendarValueType)),this.modelControl.setData(t),i!=this._getValue()&&n.B.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]}),i!==t){var r=this.uuid;WebSquare.historyManager.set(this.options.pluginName,this.id,{value:t},{onRestore:function(t){WebSquare.idCache[r]._setValue(t.value,{skipValidate:!0})}})}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getValue=function(){try{var t=this.options.getValueHandler;if(!t)return this._getValue();var e=l.D.getGlobalFunction(t,this.scope_id);if("function"==typeof e)return e.call(this)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._getValue=function(){try{var t="";return t=this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass(this.dom.input,"w2inputCalendar_placeholder")?"":this.dom.input.value,this.formatter.unformat(t)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getDisplayValue=function(){try{return this.formatter.format(this._getValue())}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getTitle=function(){return this.dom.input.getAttribute("title")},u.prototype.makeCalendar=function(){try{var t,e=this,i=this.uuid,o=this.options.ioFormat.match(/([yMdHmS]+)/g).join(""),s=this.org_id||this.id;t="yearMonth"==this.options.calendarValueType&&this.options.monthNamesForYearMonthType?this.options.monthNamesForYearMonthType:this.options.monthNames;var r={pluginName:"calendar",className:"w2inputCalendar_calendar",calendarClass:this.options.calendarClass,monthNames:t,yearSuffix:this.options.yearSuffix,calendarValueType:this.options.calendarValueType,chooseOption:this.options.chooseOption,holiday:this.options.holiday,holidayRef:this.options.holidayRef,wmode:this.options.wmode,delimiter:this.options.delimiter,dateFormat:o,displayFormat:this.options.calendarDisplayFormat,useUnlimitedYear:this.options.useUnlimitedYear,selectUnlimitedYear:this.options.selectUnlimitedYear,cancleButtonShow:this.options.cancleButtonShow,
footerDiv:this.options.footerDiv,focusOnOuterDiv:this.options.focusOnOuterDiv,renderType:this.options.renderType,mobileRenderType:this.options.mobileRenderType,summary:this.options.summary,caption:this.options.caption,title:this.options.title+" "+WebSquare.language.getMessage("Calendar_name"),backlink:1==this.options.useAnchor?this.id+"_input":"",useYearSelect:this.options.useYearSelect,useMonthSelect:this.options.useMonthSelect,maxYear:this.options.maxYear,minYear:this.options.minYear,weekStartsOn:this.options.weekStartsOn,displayDayType:this.options.displayDayType,keepFocusSelect:this.options.keepFocusSelect,outsideClickEvent:this.options.outsideClickEvent,skipConfirm:this.options.skipConfirm,skipConfirmOnly:this.options.skipConfirmOnly,topLayout:this.options.topLayout,showToday:this.options.showToday,visibleHourList:this.options.visibleHourList,visibleMinList:this.options.visibleMinList,visibleSecList:this.options.visibleSecList,disableBeforeToday:this.options.disableBeforeToday,disableAfterToday:this.options.disableAfterToday,disableBeforeDate:this.options.disableBeforeDate,disableAfterDate:this.options.disableAfterDate,disableBeforeAfterDate:this.options.disableBeforeAfterDate,pickerType:this.options.pickerType,dynamicHeaderOrder:this.options.dynamicHeaderOrder,fixPickerStatus:this.options.fixPickerStatus,keepFixedDate:this.options.keepFixedDate,useMonthYearFormat:this.options.useMonthYearFormat,useButton:this.options.useButton,enabledDate:this.options.enabledDate,disabledDate:this.options.disabledDate,senseReader:!0===this.options.senseReader,visibleWeekNum:this.options.visibleWeekNum,nextLastMonthDateSelect:this.options.nextLastMonthDateSelect,ioFormat:this.options.ioFormat,todaySelect:this.options.todaySelect,dayMoveFixed:this.options.dayMoveFixed},l=WebSquare.controlFactory.createControl(s+"_calendar",r,null,this.scope_obj,!0,this.parentFrame);return l.options.xmlEvents=[{name:"ondateselect",action:"script",param:{handler:function(t){var i=e.options.skipConfirm||e.options.skipConfirmOnly,o="yearMonthDateTime"!=e.options.calendarValueType&&"yearMonthDateTimeSec"!=e.options.calendarValueType;if(i||o){var s=e._getValue();e.endEdit();var r=e._getValue(),a=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.B.fireEvent(e,"ondateselect",this.getFormattedValue(),a),s!=r&&n.B.fireEvent(e,"onafterviewchange",{oldValue:s,newValue:r})}else{a=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.B.fireEvent(e,"ondateselect",this.getFormattedValue(),a)}}}},{name:"onyearselect",action:"script",param:{handler:function(t){"dynamic"==e.options.pickerType&&"year"==e.options.calendarValueType&&e.endEdit();var o=WebSquare.idCache[i];n.B.fireEvent(o,"onyearselect",{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onmonthselect",action:"script",param:{handler:function(t){"dynamic"==e.options.pickerType&&"yearMonth"==e.options.calendarValueType&&e.endEdit();var o=WebSquare.idCache[i];n.B.fireEvent(o,"onmonthselect",{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onconfirm",action:"script",param:{handler:function(t){var i=this.getFormattedValue(),o=e._getValue(),s=this.options.disableBeforeDate,r=this.options.disableAfterDate;i&&(s&&parseInt(i.substr(0,8),10)<parseInt(s.substr(0,8),10)&&(i=s+i.substring(8)),r&&parseInt(i.substr(0,8),10)>parseInt(r.substr(0,8),10)&&(i=r+i.substring(8))),e._setValue(i,{skipValidate:!0});var a=e._getValue();o!=a&&(n.B.fireEvent(e,"onconfirm"),n.B.fireEvent(e,"onviewchange",{oldValue:o,newValue:a}),n.B.fireEvent(e,"onafterviewchange",{oldValue:o,newValue:a})),e.hideCalendar(),e.dom.input.focus(),"select"==e.options.editType&&e.dom.input.select()}}},{name:"onoutsideclick",action:"script",param:{handler:function(t){var i=this.getFormattedValue();e._setValue(i,{skipValidate:!0})}}},{name:"oncancel",action:"script",param:{handler:function(t){e.hideCalendar(),
(document.getElementById(e.id+"_a")||document.getElementById(e.id+"_img")).focus()}}}],l.writeTo(WebSquare.getBody(),null,this.parentFrame),l.activate(),this.event.addListener(l.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),this.addControl(l),l}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.showCalendar=function(){try{WebSquare.getBody().getLayerListener().show(this.id),"today"!=this.options.fixedDate||this.options.keepFixedDate||this.calendar.setInitValue(this._getValue()),n.B.fireEvent(this,"onafteropen")}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._showCalendar=function(){try{if(this.calendar||(this.calendar=this.makeCalendar()),this.calendar){var t=WebSquare.style.getAbsoluteLeft(this.render),e=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight+5,i=document.documentElement.scrollLeft||document.body.scrollLeft,o=document.documentElement.scrollTop||document.body.scrollTop,s=parseInt(this.calendar.getStyle("width"))+parseInt(this.calendar.getStyle("border-right-width"))+parseInt(this.calendar.getStyle("border-left-width"));this.options.rightAlign||t+s>i+(document.documentElement.clientWidth||document.body.clientWidth)&&(t=i+(document.documentElement.clientWidth||document.body.clientWidth)-s-10),this.calendar.show("block",this.uuid);var r=(document.documentElement.scrollHeight||document.body.scrollHeight)-this.calendar.render.offsetHeight;e>r&&(e=r),this.options.rightAlign&&((t=t-(s-this.render.offsetWidth)-23)<0&&(t=WebSquare.style.getAbsoluteLeft(this.render)),t+s>i+(document.documentElement.clientWidth||document.body.clientWidth)&&(t=i+(document.documentElement.clientWidth||document.body.clientWidth)-s-23)),this.calendar.setPosition(t,e);var n=this.options.direction;if("auto"==n){var l=WebSquare.style.getAbsoluteTop(this.render)-o,h=document.documentElement.clientHeight-(l+this.render.offsetHeight),d=this.calendar.render.offsetHeight;h<d&&l>d&&(n="up")}"up"==n&&(e=WebSquare.style.getAbsoluteTop(this.render)-this.calendar.render.offsetHeight-5,this.calendar.setPosition(t,e)),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.calendar.render);var u=this._getValue(),c="";if(""!=u){if("yearMonthDate"==this.options.calendarValueType)c=WebSquare.text.unformatDate(this.options.ioFormat,u);else if("yearMonth"==this.options.calendarValueType)c=WebSquare.text.unformatDate(this.options.ioFormat,u)+"01";else if("year"==this.options.calendarValueType)c=WebSquare.text.unformatDate(this.options.ioFormat,u)+"01";else if("yearMonthDateHour"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,u);var p=(f=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2);this.calendar.gotoTime(p)}else if("yearMonthDateTime"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,u);p=(f=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2);var g=f.substr(2);this.calendar.gotoTime(p,g)}else if("yearMonthDateTimeSec"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,u);p=(f=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2),g=f.substr(2,2);var m=f.substr(4);this.calendar.gotoTime(p,g,m)}this.calendar.gotoCalendar(c)}else if(""!==this.options.defaultDate){if("yearMonthDateTimeSec"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);p=(f=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2),g=f.substr(2,2),m=f.substr(4);this.calendar.gotoTime(p,g,m)}else if("yearMonthDateTime"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);p=(f=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2),g=f.substr(2);this.calendar.gotoTime(p,g)}else if("yearMonthDateHour"==this.options.calendarValueType){
c=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);var f;p=(f=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2);this.calendar.gotoTime(p)}this.calendar.gotoCalendar(this.options.defaultDate)}else this.calendar.gotoToday();this.options.focusOnOuterDiv&&(this.options.focusOnLastYear?this.calendar.getElementById(this.calendar.id+"_last_year").focus():this.calendar.render.focus())}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.hideCalendar=function(){try{WebSquare.getBody().getLayerListener().hide(this.id)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._hideCalendar=function(){try{this.calendar&&(!0===this.options.pickerStatusRefresh&&this.calendar._pickerStatusRefresh(),this.calendar.hide(),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.calendar.id))}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.toggle=function(){try{this.calendar&&"none"!=this.calendar.getStyle("display")?this.hideCalendar():this.showCalendar()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.focus=function(){try{this._setFocused=!0,this.dom.input.focus()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.blur=function(){try{this.dom.input.blur()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.select=function(){try{this.dom.input.select()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.dom.input.setAttribute("disabled","disabled"):this.dom.input.removeAttribute("disabled");break;case"readOnly":1==e?(this.addClass(this.dom.input,this.options.readOnlyClass),this.addClass(this.dom.img,this.options.imageReadOnlyClass),this.dom.input.setAttribute("readonly","readonly")):(this.removeClass(this.dom.input,this.options.readOnlyClass),this.removeClass(this.dom.img,this.options.imageReadOnlyClass),this.dom.input.removeAttribute("readonly"));break;case"mandatory":1==e?this.addClass(this.render,"w2inputCalendar_mandatory"):this.removeClass(this.render,"w2inputCalendar_mandatory")}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.disableValidate=function(t){try{if(!t||8!==t.length)return;var e=this.options.disableBeforeDate,i=this.options.disableAfterDate,o=!1;if(this.options.ioFormat&&this.options.ioFormat.length>=8&&"yyyyMMdd"!==this.options.ioFormat){var s=this.options.ioFormat;i&&(i=WebSquare.text.unformatDate(s.substr(0,8),i)),e&&(e=WebSquare.text.unformatDate(s.substr(0,8),e)),t=WebSquare.text.unformatDate(s.substr(0,8),t)}return t=parseInt(t),e=parseInt(e),i=parseInt(i),(""!==this.options.disableBeforeDate&&t<e||""!==this.options.disableAfterDate&&t>i)&&(o=!0),o}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.validate=function(){try{var t="";t=1==this.options.useEditFormat?this._editValue:this._getValue();var e=this.validator.validate(t);if(e&&""!=t&&(l.D.getBoolean(this.options.dateValidCheck)||l.D.getBoolean(this.options.dateValidSet))&&(e=this.sub_validator.validate(t)),0==e&&!l.D.getBoolean(this.options.dateValidSet))if(l.D.isChrome()||l.D.isFF()){var i=this;setTimeout((function(){i.focus()}),1)}else this.focus();return e}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.validateObject=function(){try{var t=this.validator.validate(this._getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setInitValue=function(t){try{var e=this._getValue();this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this._getValue()&&n.B.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setInputReadOnly=function(t){try{
return l.D.getBoolean(t)?(this.dom.input.readOnly=!0,!0):(this.dom.input.readOnly=!1,!1)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t){try{if((t=l.D.getBoolean(t))&&(this.options.placeholder||this.options.original_placeholder)){var e=this.options.placeholder||this.options.original_placeholder;this.setPlaceholder(""),this.options.original_placeholder=e}h.s.prototype.setDisabled.call(this,t);var i=this.options.userAnchor?document.getElementById(this.id+"_a"):document.getElementById(this.id+"_img");t?(this.dom.input.setAttribute("disabled","disabled"),i.setAttribute("disabled","disabled"),this.addClass(this.dom.input,"w2input_disabled")):(this.dom.input.removeAttribute("disabled"),i.removeAttribute("disabled"),this.removeClass(this.dom.input,"w2input_disabled"),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder))}catch(t){a.w.printStackTrace(t)}return t},u.prototype.setReadOnly=function(t){try{if(t=l.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t),(l.D.isIE(6)||l.D.isIE(7))&&this.setInputReadOnly(!0)}else this.options.readOnly=t,this.setProperty("readOnly",t),!0===this.options.inputReadOnly?this.setInputReadOnly(!0):(l.D.isIE(6)||l.D.isIE(7))&&this.setInputReadOnly(!1),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){a.w.printStackTrace(t,null,this)}return t},u.prototype.handleClickEventDocument=function(t){try{this.event&&!this.event.isMine(t,this.render)&&this.hideCalendar()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2inputCalendar_input")||e.match("w2inputCalendar_divInput")){this._setFocused=!0,"select"===this.options.editType&&e.getElement().select();break}if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_a")||e.match("w2inputCalendar_button")){if(0==n.B.fireEvent(this,"oniconclick"))continue;"native"==this.options.renderType?this.showCalendar():this.toggle(),1==this.options.useAnchor&&n.B.stopEvent(t);break}}e=null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{n.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_button"))&&(this.addClass(e.getElement(),"w2inputCalendar_img_over"),e.match("w2inputCalendar_button")?e.getElement().style.backgroundImage="url("+this.options.calendarImageOver+")":e.getElement().src=this.options.calendarImageOver);e=null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{n.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_button"))&&(this.removeClass(e.getElement(),"w2inputCalendar_img_over"),e.match("w2inputCalendar_button")?e.getElement().style.backgroundImage="url("+this.options.calendarImage+")":e.getElement().src=this.options.calendarImage);e=null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleFocusEvent=function(t){try{if(1==this.dom.input.readOnly)return this.options.showCalendarOnFocus&&(this._showCalendarOnFocus&&this.toggle(),this._showCalendarOnFocus=!0),void n.B.stopEvent(t);this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value="",this.removeClass(this.dom.input,"w2inputCalendar_placeholder")),0==this.evented&&(this.evented=!0,this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),
0==this.options.useEditFormat&&this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.dom.input,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent))),this.addClass(this.dom.input,"w2inputCalendar_focus");var e=this._getValue();if("all"==this.options.applyFormat)this.dom.input.value=this.formatter.format(e,!0);else if(1==this.options.useEditFormat){var i=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.dom.input.value=i.value}else this.dom.input.value=e,0==this._setFocused&&this.select(),this._setFocused=!1;var o=this,s=WebSquare.historyManager.get(this.options.pluginName,this.id);if(l.D.getBoolean(this.options.dateValidSet)&&this.dom.input.value&&!this.validate()&&(e=s.value),this.options.disableDateValidSet){var r=this._getValue();this.disableValidate(r)||(e=r)}WebSquare.historyManager.set(this.options.pluginName,this.id,{value:e},{onRestore:function(t){o._setValue(t.value,{skipValidate:!0})}}),n.B.fireEvent(this,"onfocus"),"select"===this.options.editType&&this.select()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleBlurEvent=function(t){try{this.removeClass(this.dom.input,"w2inputCalendar_focus");var e,i=WebSquare.historyManager.get(this.options.pluginName,this.id),o=this._getValue();if(e=this.parentControl&&this.parentControl.options&&("grid"===this.parentControl.options.pluginName||"gridView"===this.parentControl.options.pluginName)?o:this.validator.validateString(o),o!=(e=this.sub_validator.validateString(e))&&(1==this.options.useEditFormat?this.setValueNM(o,{noFormat:!0}):this.setValueNM(e)),this._setValue(e,{skipValidate:!0}),this.formatter.unformat(i.value)!=this._getValue()){n.B.fireEvent(this,"onchange");var s=this._getValue();n.B.fireEvent(this,"onviewchange",{oldValue:i.value,newValue:s})}if(l.D.getBoolean(this.options.dateValidSet)&&!0!==this._skipDateValidSet&&(this.validate()?this._setValue(e,{skipValidate:!0}):!0!==this.options.dateValidSetCustom&&null!=i.value&&this._setValue(i.value,{skipValidate:!0})),this.options.disableDateValidSet){var r=this._getValue();this.disableValidate(r)?null!=i.value&&this._setValue(i.value,{skipValidate:!0}):this._setValue(r,{skipValidate:!0})}this.hideCalendar(),n.B.fireEvent(this,"onblur"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value=this.options.placeholder,this.addClass("w2inputCalendar_placeholder"))}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleInputValidator=function(t){try{var e=this.dom.input.value;if(1==this.options.useEditFormat){for(var i=this.dom.input.selectionStart,o=0,s=0,r=i-1;r>=0;r--)0==/^[0-9a-zA-Z]/.test(e.charAt(r))&&o++;var l=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.dom.input.value=l.value,this._editValue=l.orgValue;for(r=i;r>=0;r--)0==/^[0-9a-zA-Z]/.test(l.value.charAt(r))&&s++;var h=i+(s-o);this.dom.input===document.activeElement&&this.dom.input.setSelectionRange(h,h)}if(1==this.options.validateOnInput){var d=this.validator.validateKeyInput(this.dom.input,e,t);if(d.valid){var u=this.sub_validator.validateKeyInput(this.dom.input,d.str,t);u.valid?this.dom.input.value=u.str:n.B.stopEvent(t)}else n.B.stopEvent(t)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleKeypressEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(9==e)return;var i=0;if("all"==this.options.applyFormat&&this.options.displayFormat?i=this.options.displayFormat.length:1==this.options.useEditFormat&&(i=this._editFormat[0].length),e==t.which||null==t.which){var o=this._getValue();this.validator.validateKeyPress(this.dom.input,o,t)&&this.sub_validator.validateKeyPress(this.dom.input,o,t,i)||n.B.stopEvent(t)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleKeyupEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(9==e)return
;if(37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e||9==e);else if(27==e)this.dom.input.value="";else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(16==e);else{var i=this.dom.input.value;if("all"==this.options.applyFormat){i=this._getValue();var o,s,r=WebSquare.text.getCaretPos(this.dom.input);o=i.length,i=this.formatter.unformat(i),i=this.validator.validateString(i),i=this.sub_validator.validateString(i),i=this.formatter.format(i,!0),i=this.validator.validateString(i),i=this.sub_validator.validateString(i),s=(i=this.formatter.format(i,!0)).length,this.dom.input.value=i,this.realValue=i,WebSquare.text.setCaretPos(this.dom.input,r+s-o)}l.D.autoFocus(this,i)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleKeyEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(this.calendar&&"none"!=this.calendar.getStyle("display")){if(27==e)this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();else if(9==e&&1!=t.shiftKey){for(var i=this.event.getTargetIterator(t,this.calendar.render);i.next();)if(0==this.options.cancleButtonShow&&i.match("w2calendar_go_today")||1==this.options.cancleButtonShow&&i.match("w2calendar_date_cancel")||"yearMonthDateTime"==this.options.calendarValueType&&i.match("w2calendar_time_cancel")){n.B.stopEvent(t),this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();break}}else if(9==e&&1==t.shiftKey)for(i=this.event.getTargetIterator(t,this.calendar.render);i.next();)if(i.match("w2calendar_header_last_year")){n.B.stopEvent(t),this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();break}}else if(13==e){for(i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2inputCalendar_img")){n.B.stopEvent(t),this.showCalendar();break}}else if(9==e)for(i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2inputCalendar_input")||i.match("w2inputCalendar_divInput")){if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(n.B.preventDefault(t),o=l.D.getPreTabbableComp(this.id))return void o.focus()}else if(!1===this.options.useCalendarTabIndex)if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(n.B.preventDefault(t),o=l.D.getNextTabbableComp(this.id))return void o.focus()}else if(i.match("w2inputCalendar_img")||i.match("w2inputCalendar_a")||i.match("w2inputCalendar_button")){var o;if(!t.shiftKey)if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(n.B.preventDefault(t),o=l.D.getNextTabbableComp(this.id))return void o.focus()}}this.dom.input===document.activeElement&&this.options.useEditFormat&&WebSquare.text.deleteMaskChar(t,this,this.dom.input)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handlePasteEvent=function(t){var e="";if("paste"==t.type){var i,o;if(t.clipboardData)i=t.clipboardData;else{if(!window.clipboardData)return;i=window.clipboardData}e=i.getData("Text"),l.D.getBoolean(this.options.unformatOnPaste)&&(e=(e=e.wq_trim()).replace(/[a-zA-Z]+/g,""),e=WebSquare.text.unformatDate2(this.options.displayFormat,e,this.options.ioFormat));var s=WebSquare.text.getSelection(this.dom.input);e=(o="all"==this.options.applyFormat?this._getValue():this.dom.input.value).substring(0,s.start)+e+o.substring(s.end),e=this.validator.validateString(e),e=this.sub_validator.validateString(e),"all"==this.options.applyFormat?this.setValueNM(e):this.setValueNM(e,{noFormat:!0}),n.B.preventDefault(t)}},u.prototype.setDisplayFormat=function(t){try{if(1==this.options.useEditFormat){var e=t.replace(/[a-zA-Z]/g,"#");this._editFormat=e.split("||")}this.options.displayFormat=t,this.formatter.setMasking(t),this.setValueNM(this._getValue())}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getDisplayFormat=function(){try{return this.options.displayFormat}catch(t){
a.w.printStackTrace(t,null,this)}},u.prototype.getDefaultDate=function(){try{return this.options.defaultDate}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setDefaultDate=function(t){try{if("string"!=typeof t)return;var e=8;if("yearMonthDateTimeSec"==this.options.calendarValueType?e=14:"yearMonthDateTime"==this.options.calendarValueType?e=12:"yearMonthDateHour"==this.options.calendarValueType&&(e=10),t.length!==e)return;this.hideCalendar(),this.options.defaultDate=t}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getAccessibiltyId=function(){try{return this.id+"_input"}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setFormat=function(){try{if("object"==(0,o.Z)(arguments[0])){var t=arguments[0].ioFormat||this.options.ioFormat,e=arguments[0].displayFormat||this.options.displayFormat,i=arguments[0].displayFormatter||this.options.displayFormatter;this.options.useMonthYearFormat=arguments[0].useMonthYearFormat||this.options.useMonthYearFormat,this.options.calendarDisplayFormat=arguments[0].calendarDisplayFormat||this.options.calendarDisplayFormat}else t=arguments[0]||this.options.ioFormat,e=arguments[1]||this.options.displayFormat,i=this.options.displayFormatter;if(this.options.displayFormat=e,this.options.displayFormatter=i,1==this.options.useEditFormat){var s=e.replace(/[a-zA-Z]/g,"#");this._editFormat=s.split("||")}if(t!=this.options.ioFormat){t=t.match(/([yMdHmS]+)/g).join("");var r=this.getFormattedValue(t);if(this.options.ioFormat=t,this.formatter=WebSquare.format.createFormatter("date",e,i,t,null,null,this.scope_id,this.id),l.D.getBoolean(this.options.dateValidCheck)||l.D.getBoolean(this.options.dateValidSet)){var n=new d.s.dateCommand(this.options.ioFormat);this.sub_validator.removeCommand(n),this.sub_validator.addCommand(n)}this._setValue(r,{skipValidate:!0}),this.calendar&&(this.calendar.remove(),delete this.calendar)}else{r=this._getValue();this.formatter=WebSquare.format.createFormatter("date",e,i,t,null,null,this.scope_id,this.id),this.setValueNM(r)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setIoFormat=function(t,e){try{"object"===(0,o.Z)(t)?this.setFormat(t):this.setFormat({ioFormat:t,displayFormat:e})}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setCalendarValueType=function(t,e){try{if(t==this.options.calendarValueType)return!1;this.removeClass("w2inputCalendar_type_"+this.options.calendarValueType),this.addClass("w2inputCalendar_type_"+t),this.options.calendarValueType=t,(e=e||{}).ioFormat&&(e.ioFormat=e.ioFormat.match(/([yMdHmS]+)/g).join(""));var i="";if("yearMonthDate"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd",this.options.ioFormat=e.ioFormat||"yyyyMMdd",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd"):"yearMonth"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM",this.options.ioFormat=e.ioFormat||"yyyyMM",i="yyyy"+this.options.delimiter+"MM"):"year"==t?(this.options.displayFormat=e.displayFormat||"yyyy",this.options.ioFormat=e.ioFormat||"yyyy",i="yyyy"):"yearMonthDateHour"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH",this.options.ioFormat=e.ioFormat||"yyyyMMddHH",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH"):"yearMonthDateTime"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm",this.options.ioFormat=e.ioFormat||"yyyyMMddHHmm",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm"):"yearMonthDateTimeSec"==t&&(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS",this.options.ioFormat=e.ioFormat||"yyyyMMddHHmmSS",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS"),1==this.options.useEditFormat){var o=i.replace(/[a-zA-Z]/g,"#");this._editFormat=o.split("||")}
this.calendar&&(this.calendar.remove(),delete this.calendar),this.formatter=null,this.validator=null,this.sub_validator=null,this.options.maxlength=this.options.minlength=-1,this.formatter=WebSquare.format.createFormatter("date",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.validator=new d.s.validateInvoker(this.id,this.options),this.sub_validator=new d.s.validateInvoker(this.id,{_scope_obj_uuid:this.options._scope_obj_uuid,invalidMessageFunc:this.options.invalidMessageFunc}),this.sub_validator.addCommand(new d.s.dateCommand(this.options.ioFormat)),this.sub_validator.addCommand(new d.s.allowCharCommand("0-9"));var s=0;return"yearMonthDate"==this.options.calendarValueType?s=8:"yearMonth"==this.options.calendarValueType?s=6:"year"==this.options.calendarValueType?s=4:"yearMonthDateHour"==this.options.calendarValueType?s=10:"yearMonthDateTime"==this.options.calendarValueType?s=12:"yearMonthDateTimeSec"==this.options.calendarValueType&&(s=14),"all"==this.options.applyFormat&&this.options.displayFormat&&(s=this.options.ioFormat.length),this.options.maxlength=s,this.options.minlength=s,this.sub_validator.addCommand(new d.s.maxLengthCommand(s)),this.sub_validator.addCommand(new d.s.minLengthCommand(s)),!0}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getIoFormat=function(){try{return this.options.ioFormat}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getFormattedValue=function(t){try{t=t||this.options.displayFormat;var e=this._getValue();return this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2inputCalendar_placeholder")&&(e=""),WebSquare.format.createFormatter("date",t,"",this.options.ioFormat,null,null,this.scope_id,this.id).format(e)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){a.w.printStackTrace(t)}},u.prototype.setPlaceholder=function(t){try{if(l.D.isNull(t))return;WebSquare.uiplugin.inputCalendar.placeholder&&(this.supportPlaceholder=!0),this.options.placeholder!=t&&(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder?this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?this.dom.input.placeholder=this.options.placeholder:this.options.placeholder="":this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?0==this.realValue.length&&(this.hasClass("w2inputCalendar_placeholder")?this.dom.input.value=this.options.placeholder:(this.dom.input.value=this.options.placeholder,this.addClass("w2inputCalendar_placeholder"))):this.options.placeholder="")}catch(t){a.w.printStackTrace(t)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){a.w.printStackTrace(t)}},u.prototype.setHolidayRef=function(t){try{t&&(this.options.holidayRef=t,this.calendar&&(this.calendar.options.holidayRef=t,this.calendar.refresh()))}catch(t){a.w.printStackTrace(t)}},u.prototype.setHoliday=function(t,e){try{t&&(this.options.holiday=e?t:this.options.holiday+" "+t),this.calendar&&(this.calendar.options.holiday=this.options.holiday,this.calendar.updateCalendar())}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.removeHoliday=function(){try{this.options.holiday="",this.calendar&&(this.calendar.options.holiday="",this.calendar.updateCalendar())}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.enableDate=function(t){try{this.options.enabledDate=this.options.enabledDate+" "+t;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.disabledDate=this.options.disabledDate.replace(new RegExp(o,"g"),"")}this.calendar&&(this.calendar.options.enabledDate=this.options.enabledDate,this.calendar.options.disabledDate=this.options.disabledDate,
this.calendar.updateCalendar())}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.disableDate=function(t){try{t&&(this.options.disabledDate=this.options.disabledDate+" "+t);for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.enabledDate=this.options.enabledDate.replace(new RegExp(o,"g"),"")}this.calendar&&(this.calendar.options.enabledDate=this.options.enabledDate,this.calendar.options.disabledDate=this.options.disabledDate,this.calendar.updateCalendar())}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.disableBeforeDate=function(t){try{t&&(this.options.disableBeforeDate=t,this.calendar&&(this.calendar.options.disableBeforeDate=t,this.calendar.updateCalendar()))}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.disableAfterDate=function(t){try{t&&(this.options.disableAfterDate=t,this.calendar&&(this.calendar.options.disableAfterDate=t,this.calendar.updateCalendar()))}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.enableAllDate=function(){try{this.options.disableBeforeDate="",this.options.disableAfterDate="",this.calendar&&(this.calendar.options.disableBeforeDate="",this.calendar.options.disableAfterDate="",this.calendar.updateCalendar())}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.holidayRef=this.options.holidayRef,t.ref=this.options.ref,t):null}catch(t){a.w.printStackTrace(t)}},u.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=l.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){a.w.printStackTrace(t)}},u.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=l.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){a.w.printStackTrace(t)}},u.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){a.w.printStackTrace(t)}},u.prototype.setNextTabID=function(t,e){try{null!=t&&l.D.setNextTabID(this.id,t,e)}catch(t){a.w.printStackTrace(t)}},u.prototype.setButtonTitle=function(t){try{var e=document.getElementById(this.id+"_img");null!=e&&e.setAttribute("title",t)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getButtonTitle=function(){try{var t="",e=document.getElementById(this.id+"_img");return null!=e&&(t=e.getAttribute("title")),t}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.serialize=function(){return{value:this._getValue()}},u.prototype.restore=function(t){try{return this._setValue(t.value,{skipValidate:!0}),!0}catch(t){return a.w.printStackTrace(t,null,this),!1}},u.prototype.setInputStyle=function(t,e){try{var i=document.getElementById(this.id+"_input");null!=i&&WebSquare.style.setStyle(i,t,e)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.endEdit=function(){try{if(!this.calendar)return;var t=this.calendar.getFormattedValue(),e=this._getValue();this.toggle(),this._setValue(t,{skipValidate:!0});var i=this._getValue();e!=i&&n.B.fireEvent(this,"onviewchange",{oldValue:e,newValue:i}),this.hideCalendar(),l.D.isMobile()&&!this.options.focusOnDateSelect||(this.options.showCalendarOnFocus&&(this._showCalendarOnFocus=!1),this.dom.input.focus(),"select"==this.options.editType&&this.dom.input.select())}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setValueCancel=function(t){try{var e=WebSquare.historyManager.get(this.options.pluginName,this.id);null!=e.value&&this._setValue(e.value,{skipValidate:!0}),this.focus()}catch(t){a.w.printStackTrace(t,null,this)}}},8736:function(t,e,i){"use strict";i.r(e),i.d(e,{list:function(){return u}});var o=i(484),s=i(1974),r=i(5948),a=i(1454),n=i(8683),l=i(9075),h=i(1),d=i(5373),u=function(t,e,i){h.s.call(this,t,e,i)};s.x.extend(u.prototype,h.s.prototype),
s.x.extend(u.prototype,d.E.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.list",pluginName:"list",userEvents:["onrowclick"],tagName:"div",sortable:!1,virtualized:!1,visibleRowNum:10,useSearch:!1,_listRowHeight:0,wheelRows:0,placeholder:"",useCloseButton:!1,selectedCellColor:"#FCA73C"},u.prototype.initialize=function(t){if(this.uniqueIdSequence=0,this.listRowInfo=WebSquare.xml.getChildren(t.parentNode,"w2:list")[0],this.listColumnInfo=WebSquare.xml.getChildren(t,"w2:listRow"),this.options.nodeset&&(this.modelDataXMLArr=WebSquare.ModelUtil.findInstanceNodes(this.options.nodeset,null,this.scope_id),this.modelControl.itemsetObj={nodeset:this.options.nodeset,label:"",value:""}),this.options.virtualized){this.options.rowHeight=21;for(var e=this.listRowInfo.style.split(";"),i=0;i<e.length;i++){var o=e[i];if(o.indexOf("height")>-1&&o.indexOf(":")>-1){var s=parseInt(o.split(":")[1].wq_trim().replaceAll("px",""));isNaN(s)||(this.options.rowHeight=s+1)}}}this.listRowObjArr=[],this.isIE67=n.D.isIEAllVersion("6 7"),this.options.useSearch&&(this.myhelper=new WebSquare.korHelper)},u.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";if(t.push("<"+this.options.tagName+" id='"+this.id+"' "+e+" class='w2list w2noselect "+this.options.className+"' tabIndex='0'>"),this.options.virtualized){var i=this.isIE67?"position:relative;height:100%;background-color:white;":"position:relative;width:100%;height:100%;box-sizing:border-box;background-color:white;",o=this.isIE67?"position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%'":"";if(t.push("<div id='"+this.id+"_main' style='"+i+"'>"),this.options.useSearch){var s="height:"+(parseInt(this.options._listRowHeight)-3)+"px;";t.push("<input id='"+this.id+"_input' name='"+this.id+"_input' style='"+s+"'class='w2list_input' placeholder='"+this.options.placeholder+"'></input>")}t.push("<div id='"+this.id+"_items_main' style='"+o+"'>")}if(this.options.nodeset){var r=this.modelDataXMLArr.length;this.options.virtualized&&(r=Math.min(this.modelDataXMLArr.length,this.options.visibleRowNum));for(var a=0;a<r;a++){var l=""==this.listRowInfo.style?"":"style='"+this.listRowInfo.style+"'";t.push("<"+this.listRowInfo.tagName+" "+l+" class='w2list_listRow "+this.listRowInfo.class+"' >");for(var h=0;h<this.listColumnInfo.length;h++){var d=this.listColumnInfo[h],u=d.value,c=WebSquare.xml.getValue(this.modelDataXMLArr[a],d.ref);switch(""!=c&&(u=c),d.inputType){case"checkbox":var p=n.D.getBoolean(u)?'checked="checked"':"",g=""==d.style?"":" style='"+d.style+"' ";t.push("<input type='checkbox' "+p),t.push(g),t.push(" class='w2list_listColumn w2list_listColumn_checkbox "+d.class+"' >"),t.push("</input>");break;case"text":g=""==d.style?"":" style='"+d.style+"' ";t.push("<span "),t.push(g),t.push(" class='w2list_listColumn w2list_listColumn_text "+d.class+"' >"),t.push(u),t.push("</span>");break;case"button":g=""==d.style?"":" style='"+d.style+"' ";t.push("<input type='button'"),t.push(" value='"+u+"' "),t.push(g),t.push(" class='w2list_listColumn w2list_listColumn_button "+d.class+"' >"),t.push("</input>")}}t.push("</"+this.listRowInfo.tagName+">")}}return this.options.virtualized&&(t.push("</div>"),t.push("<div id='"+this.id+"_scroll_main' class='w2list_scroll_main' style='position:absolute;right:0;top:0;height:100%;padding:1px;background-color:#ccc;box-sizing:border-box;'>"),t.push("<div id='"+this.id+"_scroll_track' class='w2list_scroll_track' style='position:relative;width:100%;height:100%;background-color:#eee;box-sizing:border-box;'>"),t.push("<div id='"+this.id+"_scroll_thumb' class='w2list_scroll_thumb' style='position:absolute;width:100%;height:100%;left:1px;width:8px;background-color:#bbb;border-radius:3px'>"),t.push("</div>"),t.push("</div>"),t.push("</div>"),t.push("</div>")),t.push("</"+this.options.tagName+">"),t.join("")},u.prototype.setPreAction=function(){try{this.options.useSearch&&(this.dom.input=this.getElementById(this.id+"_input"))
}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){if(this.initializeListInfo(),this.options.virtualized){var t=this.getElementById(this.id+"_items_main");this.event.addListener(t,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(t,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(t,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),n.D.isIE()?this.event.addListener(t,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)):this.event.addListener(t,"onwheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))}else this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent));if(this.options.sortable&&(1==this.isMobile||this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleDragEvent))),this.options.virtualized){this.adjustRender();var e=this.getElementById(this.id+"_scroll_thumb"),i=this.getElementById(this.id+"_scroll_track");this.event.addListener(e,"onmouseenter",this.event.bindAsEventListener(this,(function(t){e.style.backgroundColor="#aaa"}))),this.event.addListener(e,"onmouseleave",this.event.bindAsEventListener(this,(function(t){this.scrollStarted||(e.style.backgroundColor="#bbb")}))),this.event.addListener(e,"onmousedown",this.event.bindAsEventListener(this,(function(t){this.listRowObjArr.length>0&&(this.scrollStarted=!0,this.scrollStartMouseEvent={},this.scrollStartMouseEvent.clientY=t.clientY,this.scrollStartMouseEvent.original_top=e.offsetTop,this.scrollStartMouseEvent.max_top=e.parentElement.offsetHeight-e.offsetHeight,e.style.backgroundColor="#999")}))),this.event.addListener(i,"onclick",this.event.bindAsEventListener(this,(function(t){if(!this.scrollStarted){if((n.D.isIE()?t.srcElement:t.target)!=i)return;a.B.stopPropagation(t);var o=t.offsetY-e.offsetHeight/2;if(o<0&&(o=0),o>e.parentElement.offsetHeight-e.offsetHeight&&(o=e.parentElement.offsetHeight-e.offsetHeight),e.offsetTop!=o){e.style.top=o+"px";var s=this.listRowObjArr.length-this.options.visibleRowNum;if(s>0){var r=(i.offsetHeight-e.offsetHeight)/s,l=Math.floor(o/r);this.setFirstRowIndex(l,!0)}else this.setFirstRowIndex(0,!0)}}}))),this.event.addListener(this.parentControl.render,"onmouseup",this.event.bindAsEventListener(this,(function(t){this.scrollStarted&&(this.scrollStarted=!1,e.style.backgroundColor="#bbb")}))),this.event.addListener(this.parentControl.render,"onmouseleave",this.event.bindAsEventListener(this,(function(t){this.scrollStarted&&(this.scrollStarted=!1,e.style.backgroundColor="#bbb")}))),this.event.addListener(this.parentControl.render,"onmousemove",this.event.bindAsEventListener(this,(function(t){if(this.scrollStarted){var o=t.clientY-this.scrollStartMouseEvent.clientY,s=this.scrollStartMouseEvent.original_top+o;if(s<0&&(s=0),s>this.scrollStartMouseEvent.max_top&&(s=this.scrollStartMouseEvent.max_top),e.offsetTop!=s){e.style.top=s+"px";var r=this.listRowObjArr.length-this.options.visibleRowNum;if(r>0){var a=(i.offsetHeight-e.offsetHeight)/r,n=Math.floor(s/a);this.setFirstRowIndex(n,!0)}else this.setFirstRowIndex(0,!0)}}})))}},u.prototype.setLayout=function(){},u.prototype.initializeListInfo=function(){try{if(this.options.nodeset){for(var t=0;t<this.modelDataXMLArr.length;t++){var e,i,o,s=this.id+"_"+this.uniqueIdSequence;WebSquare.xml.setAttribute(this.modelDataXMLArr[t],"unique_id",s),this.render.childNodes[t].setAttribute("unique_id",s);for(var a={},n=0;n<this.listColumnInfo.length;n++)i=(e=this.listColumnInfo[n]).value,
""!=(o=WebSquare.xml.getValue(this.modelDataXMLArr[t],e.ref))&&(i=o),a[e.id]=i;a.unique_id=s,this.listRowObjArr.push(a),this.uniqueIdSequence++}this.onListRowObjArrChanged()}}catch(t){r.w.printStackTrace(t)}},u.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=WebSquare.ModelUtil.findInstanceNodes(this.options.nodeset,null,this.scope_id);this.modelDataXMLArr=t;var e=this.listRowObjArr;this.listRowObjArr=[];for(var i=0;i<this.modelDataXMLArr.length;i++)this.listRowObjArr[i]=this.createObjByXML(this.modelDataXMLArr[i]);for(i=0;i<e.length;i++)for(var o=0;o<this.listRowObjArr.length;o++)if(e[i].unique_id==this.listRowObjArr[o].unique_id){e[i].exist=!0;break}for(i=0;i<e.length;i++)if(1!=e[i].exist){var s=this.getRenderByUniqueId(e[i].unique_id);s.parentNode.removeChild(s)}for(i=0;i<this.listRowObjArr.length;i++){var a=this.listRowObjArr[i],l=this.getRenderByUniqueId(a.unique_id);if(l){for(o=0;o<e.length;o++){var h=e[o];if(h.unique_id==a.unique_id)for(var d=0;d<this.listColumnInfo.length;d++){var u=a[this.listColumnInfo[d].id];if(h[this.listColumnInfo[d].id]!=u)switch(this.listColumnInfo[d].inputType){case"checkbox":l.childNodes[d].checked=n.D.getBoolean(u);break;case"text":l.childNodes[d].innerHTML=u;break;case"button":l.childNodes[d].value=u}}}var c;for(o=0;o<this.getLength();o++){var p=this.render.childNodes[o];l.getAttribute("unique_id")==p.getAttribute("unique_id")&&(c=o)}this.moveRowRender(c,i)}else this.insertRowRender(i,this.listRowObjArr[i])}this.onListRowObjArrChanged()}}catch(t){r.w.printStackTrace(t)}},u.prototype.refresh=function(){},u.prototype.insertInModel=function(t,e,i){try{switch(i){case"append":var o=this.options.nodeset.split("/");o.splice(o.length-1,1);var s=o;s=s.join("/"),WebSquare.ModelUtil.setInstanceNode(e,s,null,"append");break;case"insertBeforeSibling":WebSquare.ModelUtil.setInstanceNode(e,this.options.nodeset+"["+(t+1)+"]",null,"insertBeforeSibling");break;case"appendSibling":WebSquare.ModelUtil.setInstanceNode(e,this.options.nodeset+"["+t+"]",null,"appendSibling");break;default:return}}catch(t){r.w.printStackTrace(t)}},u.prototype.removeFromModel=function(t){try{WebSquare.ModelUtil.removeInstanceNode(this.options.nodeset+"["+(t+1)+"]")}catch(t){r.w.printStackTrace(t)}},u.prototype.insertRow=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t<0)return;if(t>o&&(t=o),this.options.nodeset){var s=this.createXMLByObj(e);0==i.length?this.insertInModel(t,s,"append"):i.length>t&&t>=0?this.insertInModel(t,s,"insertBeforeSibling"):this.insertInModel(t,s,"appendSibling")}else this.insertRowNM(t,e)}catch(t){r.w.printStackTrace(t)}},u.prototype.insertRowNM=function(t,e){try{var i=this.getLength();e.unique_id=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++,i>t&&t>=0?this.listRowObjArr.splice(t,0,e):this.listRowObjArr.push(e),this.onListRowObjArrChanged(),this.insertRowRender(t,e)}catch(t){r.w.printStackTrace(t)}},u.prototype.insertRenderStr=function(t){try{var e,i;t.unique_id=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++,this.listRowObjArr.push(t),this.onListRowObjArrChanged();for(var o="<"+this.listRowInfo.tagName+" class='w2list_listRow "+this.listRowInfo.class+"' style='"+this.listRowInfo.style+"' unique_id='"+t.unique_id+"'>",s=0;s<this.listColumnInfo.length;s++){var a=this.listColumnInfo[s].id;null!=t[a]||null!=t[a]?e=t[a]:(e=this.listColumnInfo[s].value,t[this.listColumnInfo[s].id]=this.listColumnInfo[s].value),i=this.listColumnInfo[s],o+=this.createItemNodeStr(i,e)}return o+="</"+this.listRowInfo.tagName+">"}catch(t){r.w.printStackTrace(t)}},u.prototype.insertRowRender=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t<0)return;t>o&&(t=o);var s=this.createRenderByObj(e);i.length>t&&t>=0?this.render.insertBefore(s,i[t]):this.render.appendChild(s)}catch(t){r.w.printStackTrace(t)}},u.prototype.removeRow=function(t){try{this.getChildNodes().length>t&&t>=0&&(this.options.nodeset?this.removeFromModel(t):this.removeRowNM(t))}catch(t){
r.w.printStackTrace(t)}},u.prototype.removeRowNM=function(t){try{this.removeRowRender(t),this.listRowObjArr.splice(t,1),this.onListRowObjArrChanged()}catch(t){r.w.printStackTrace(t)}},u.prototype.removeRowRender=function(t){try{var e=this.options.virtualized?this.getElementById(this.id+"_items_main"):this.getElementById(this.id),i=e.children;i.length>t&&t>=0&&e.removeChild(i[t])}catch(t){r.w.printStackTrace(t)}},u.prototype.removeAll=function(){try{this.options.nodeset?WebSquare.ModelUtil.removeInstanceNodes(this.options.nodeset):(this.listRowObjArr=[],this.render.innerHTML=""),this.onListRowObjArrChanged()}catch(t){r.w.printStackTrace(t)}},u.prototype.moveRow=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t>o||e>o)return;if(t>=0&&e>=0)if(this.options.nodeset){var s=this.modelDataXMLArr[t];i.length-1>e&&e>=0?(this.removeFromModel(t),this.insertInModel(e,s,"insertBeforeSibling")):(this.removeFromModel(t),this.insertInModel(e,s,"appendSibling"))}else this.moveRowNM(t,e)}catch(t){r.w.printStackTrace(t)}},u.prototype.moveRowNM=function(t,e){try{this.moveRowRender(t,e);var i=this.listRowObjArr.splice(t,1)[0];this.listRowObjArr.splice(e,0,i),this.onListRowObjArrChanged()}catch(t){r.w.printStackTrace(t)}},u.prototype.moveRowRender=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t>o||e>o)return;if(t>=0&&e>=0){var s=i[t];if(i.length-1>e&&e>=0){var a=e>t?e+1:e;this.render.insertBefore(s,i[a])}else this.render.appendChild(s)}}catch(t){r.w.printStackTrace(t)}},u.prototype.getLength=function(){try{return this.options.virtualized?this.listRowObjArr?this.listRowObjArr.length:0:this.getChildNodes().length}catch(t){r.w.printStackTrace(t)}},u.prototype.getChildNodes=function(){try{if("dl"==this.options.tagName||this.options.useCloseButton){for(var t=[],e=0;e<this.render.childNodes.length;e++){var i=this.render.childNodes[e];"3"!=i.nodeType&&t.push(i)}return t}return this.render.getElementsByTagName(this.listRowInfo.tagName)}catch(t){r.w.printStackTrace(t)}},u.prototype.getRenderByUniqueId=function(t){try{for(var e=0;e<this.getLength();e++){var i=this.render.childNodes[e];if(i.getAttribute("unique_id")==t)return i}}catch(t){r.w.printStackTrace(t)}},u.prototype.getCellData=function(t,e){try{var i,o=this.getLength();if("string"==typeof t||!(o>t&&t>=0))return;"string"==typeof e?i=e:"number"==typeof e&&(i=this.listColumnInfo[e].id);var s=this.listRowObjArr[t];return s?s[i]:""}catch(t){r.w.printStackTrace(t)}},u.prototype.setCellData=function(t,e,i){try{var o,s,a,l=this.getLength();if("string"==typeof t||!(l>t&&t>=0))return;if("string"==typeof e){o=e;for(var h=0;h<this.listColumnInfo.length;h++)if(o==this.listColumnInfo[h].id){s=h;break}}else"number"==typeof e&&(s=e,o=this.listColumnInfo[e].id);if(a=this.getCellData(t,o),this.options.nodeset){var d,u;for(h=0;h<this.listColumnInfo.length;h++)if(o==(u=this.listColumnInfo[h]).id){d=u.ref;break}if(!d)return;WebSquare.ModelUtil.setInstanceValue(this.options.nodeset+"["+(t+1)+"]/"+d,i),a!==i&&this.fireOnchange()}else if(this.listRowObjArr[t][o]=i,this.options.virtualized)this.setFirstRowIndex(this.firstListIndex);else{var c=this.getChildNodes()[t],p=this.listColumnInfo[s].inputType,g=c.childNodes[s];switch(p){case"checkbox":g.checked=n.D.getBoolean(i);break;case"text":g.innerHTML=i;break;case"button":g.value=i}}}catch(t){r.w.printStackTrace(t)}},u.prototype.getRowData=function(t){try{var e=this.getLength();if("string"==typeof t||!(e>t&&t>=0))return;var i={},o=this.listRowObjArr[t];for(var s in o)"unique_id"!=s&&"render"!=s&&(i[s]=o[s]);return i}catch(t){r.w.printStackTrace(t)}},u.prototype.setRowData=function(t,e,i){try{var s=this.getLength();if("string"==typeof t||!(s>=t&&t>=0)||"object"!=(0,o.Z)(e))return;if(!i)return void(this.options.nodeset?this.insertRow(s,e):this.insertRowNM(s,e));e&&(this.options.nodeset?(this.removeRow(t),this.insertRow(t,e)):(this.removeRowNM(t),this.insertRowNM(t,e)))}catch(t){r.w.printStackTrace(t)}},u.prototype.setXML=function(t,e){
null!=t||l.k.printLog("[WebSquare.uiplugin.list.setXML] XML is null["+this.id+"]")},u.prototype.setJSON=function(t,e){try{if(null==t)return void l.k.printLog("[WebSquare.uiplugin.list.setJSON] data is null["+this.id+"]");if(e&&0==t.length)return;var i,o="";if(e||(this.listRowObjArr=[],this.options.virtualized&&(this.getElementById(this.id+"_items_main").innerHTML="")),this.options.virtualized)i=e?this.listRowObjArr.length:0,this.listRowObjArr=this.listRowObjArr.concat(t),this.adjustRender(),this.setFirstRowIndex(i);else{for(var s=0;s<t.length;s++)i=e?this.getLength+s:s,this.options.nodeset?this.insertRow(i,t[s]):e?this.insertRowNM(i,t[s]):o+=this.insertRenderStr(t[s]);e||(this.render.innerHTML=o)}}catch(t){r.w.printStackTrace(t)}},u.prototype.toggleCheckbox=function(t,e){try{var i=this.getLength();if("string"==typeof t||"number"==typeof e)return;if(i>t&&t>=0){var o=n.D.getBoolean(this.getCellData(t,e));this.setCellData(t,e,!o)}}catch(t){r.w.printStackTrace(t)}},u.prototype.createItemNode=function(t,e){try{if(t){var i;switch(t.inputType){case"checkbox":(i=document.createElement("input")).setAttribute("type","checkbox"),i.setAttribute("itemid",t.id),i.setAttribute("class","w2list_listColumn w2list_listColumn_checkbox "+t.class),this.isIE67&&(i.className="w2list_listColumn w2list_listColumn_checkbox "+t.class),!0===(e=n.D.getBoolean(e))&&i.setAttribute("checked","checked");break;case"text":(i=document.createElement("span")).setAttribute("itemid",t.id),i.setAttribute("class","w2list_listColumn w2list_listColumn_text "+t.class),this.isIE67&&(i.className="w2list_listColumn w2list_listColumn_text "+t.class),t.check_id&&i.setAttribute("check_id",t.check_id),null!=e&&null!=e&&(i.innerHTML=e.toString());break;case"button":(i=document.createElement("input")).setAttribute("type","button"),i.setAttribute("itemid",t.id),i.setAttribute("class","w2list_listColumn w2list_listColumn_button "+t.class),this.isIE67&&(i.className="w2list_listColumn w2list_listColumn_button "+t.class),e&&i.setAttribute("value",e)}return i&&t.style&&i.setAttribute("style",t.style),i}}catch(t){r.w.printStackTrace(t)}},u.prototype.createItemNodeStr=function(t,e){try{if(t){var i;switch(t.inputType){case"checkbox":i="<input type='checkbox' class='w2list_listColumn w2list_listColumn_checkbox "+t.class+"'' style='"+t.style+"'",!0===(e=n.D.getBoolean(e))&&(i+=" checked='checked'"),i+="/>";break;case"text":var o="w2list_listColumn_text";this.options.useCloseButton&&(o="w2list_listColumn_text_with_closeButton"),i="<span class='w2list_listColumn "+o+" "+t.class+"' style='"+t.style+"'>",null!=e&&null!=e&&(i+=WebSquare.xml.encode(e.toString())),i+="</span>",this.options.useCloseButton&&(i+="<div class='w2list_listColumn_close'></div>");break;case"button":i="<input type='button' class='w2list_listColumn w2list_listColumn_button "+t.class+"'' style='"+t.style+"'",(e=n.D.getBoolean(e))&&(i+=" value='checked'"),i+="/>"}return i}}catch(t){r.w.printStackTrace(t)}},u.prototype.getAllData=function(){try{if(this.options.virtualized)return this.listRowObjArr;for(var t=[],e=this.getLength(),i=0;i<e;i++){var o=this.getRowData(i);t.push(o)}return t}catch(t){r.w.printStackTrace(t)}},u.prototype.createXMLByObj=function(t){try{var e=this.options.nodeset.split("/"),i=e[e.length-1],o=WebSquare.xml.parse("<"+i+" />").documentElement;t.unique_id?WebSquare.xml.setAttribute(o,"unique_id",t.unique_id):(WebSquare.xml.setAttribute(o,"unique_id",this.id+"_"+this.uniqueIdSequence),this.uniqueIdSequence++);for(var s=0;s<this.listColumnInfo.length;s++){var a=this.listColumnInfo[s].ref,n=a.lastIndexOf("/");if(n>0){var l=a.substring(0,n),h=a.substring(n+1);if(h.match(/[@'"()=]/i).length>0){var d=WebSquare.xml.createNode(o,l,!1);(u=t[this.listColumnInfo[s].id])||(u=this.listColumnInfo[s].value),h=h.replace(/[@'"()=]/i,""),WebSquare.xml.setAttribute(d,h,u)}else WebSquare.xml.createNode(o,a,!1)}else{var u,c=this.listColumnInfo[s].ref.replace(/[@'"()=]/i,"")
;(u=t[this.listColumnInfo[s].id])||(u=this.listColumnInfo[s].value),WebSquare.xml.setAttribute(o,c,u)}}return o}catch(t){r.w.printStackTrace(t)}},u.prototype.createRenderByObj=function(t,e){try{if(t){t.unique_id||(t.unique_id=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++);var i,o,s,a=document.createElement(this.listRowInfo.tagName);a.setAttribute("class","w2list_listRow "+this.listRowInfo.class),a.setAttribute("style",this.listRowInfo.style),this.isIE67&&(a.className="w2list_listRow "+this.listRowInfo.class,a.style.cssText=this.listRowInfo.style),a.setAttribute("unique_id",t.unique_id),this.listRowInfo.check_id&&a.setAttribute("check_id",this.listRowInfo.check_id);for(var n=[],l=0;l<this.listColumnInfo.length;l++){var h=this.listColumnInfo[l].id;null!=t[h]||null!=t[h]?i=t[h]:(i=this.listColumnInfo[l].value,t[this.listColumnInfo[l].id]=this.listColumnInfo[l].value),s=this.listColumnInfo[l],o=this.createItemNode(s,i),n[l]=o}if(0!=n.length)for(l=0;l<n.length;l++)n[l]&&a.appendChild(n[l]);this.options.virtualized&&(a.style.backgroundColor=e?this.options.selectedCellColor:"")}return a}catch(t){r.w.printStackTrace(t)}},u.prototype.createObjByXML=function(t){try{for(var e,i,o,s={},a=0;a<this.listColumnInfo.length;a++)i=(e=this.listColumnInfo[a]).value,""!=(o=WebSquare.xml.getValue(t,e.ref))&&(i=o),s[e.id]=i;return s.unique_id=t.getAttribute("unique_id"),s}catch(t){r.w.printStackTrace(t)}},u.prototype.handleClickEvent=function(t){try{if(this.options.virtualized){for(var e,i,o,s="",n=this.getElementById(this.id+"_items_main"),l=this.event.getTargetIterator(t,this.render);l.next()&&!l.match(null,this.id)&&!l.match(null,n.id);){if(l.match("w2list_listRow")){""==s&&(s="w2list_listRow"),e=(d=l.getElement()).getAttribute("unique_id"),this.options.labelCheck&&(o=d.getAttribute("check_id"));break}if(l.match("w2list_listColumn_checkbox"))s="w2list_listColumn_checkbox",i=(d=l.getElement()).getAttribute("itemid");else if(l.match("w2list_listColumn_text")){s="w2list_listColumn_text",i=(d=l.getElement()).getAttribute("itemid"),this.options.labelCheck&&(o=d.getAttribute("check_id"))}else if(l.match("w2list_listColumn_button")){s="w2list_listColumn_button",i=(d=l.getElement()).getAttribute("itemid")}}if(l=null,""!=s&&e)for(var h=0;h<this.listRowObjArr.length;h++)if(this.listRowObjArr[h].unique_id==e){switch(s){case"w2list_listRow":a.B.fireEvent(this,"onrowclick",h),this.options.labelCheck&&this.toggleCheckbox(h,o);break;case"w2list_listColumn_text":this.options.labelCheck&&this.toggleCheckbox(h,o);break;case"w2list_listColumn_checkbox":this.toggleCheckbox(h,i)}this.selectedIndex=h;break}this.setFirstRowIndex(this.firstListIndex,!0)}else{for(l=this.event.getTargetIterator(t,this.render);l.next()&&!l.match(null,this.id);){if(l.match("w2list_listRow")){var d=l.getElement();for(h=0;h<this.listRowObjArr.length;h++)if(this.getRenderByUniqueId(this.listRowObjArr[h].unique_id)==d)return u=h,void a.B.fireEvent(this,"onrowclick",u)}if(l.match("w2list_listColumn_checkbox")){var u,c;for(d=l.getElement(),h=0;h<this.listRowObjArr.length;h++)for(var p=0;p<this.listColumnInfo.length;p++)if(this.getRenderByUniqueId(this.listRowObjArr[h].unique_id)&&this.getRenderByUniqueId(this.listRowObjArr[h].unique_id).childNodes[p]==d)return u=h,c=this.listColumnInfo[p].id,void this.toggleCheckbox(u,c)}}l=null}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.fireOnchange=function(){try{a.B.fireEvent(this,"onchange")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next()&&!e.match(null,this.id);)e.match("w2list_listRow")&&this.addClass(e.getElement(),"w2list_listRow_over");e=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next()&&!e.match(null,this.id);)e.match("w2list_listRow")&&this.removeClass(e.getElement(),"w2list_listRow_over");e=null}catch(t){
r.w.printStackTrace(t,null,this)}},u.prototype.handleMousewheelEvent=function(t){try{var e;a.B.stopEvent(t),this.options.wheelRows>0?(e=a.B.getMouseWheelDelta(t),e=-1*Math.round(this.options.wheelRows*e)):e=n.D.isFF()?t.deltaY:n.D.isIEAllVersion(11)?t.deltaY/40:t.wheelDelta/-40;var i=Math.floor(e),o=this.firstListIndex+i;this.setFirstRowIndex(o)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{if(this.options.useSearch&&this.event.isMe(t,this.dom.input)&&(this.editmode=!0,this.inputKeyDown(t,!1)),this.options.virtualized){var e=t.charCode?t.charCode:t.keyCode;if(38==e){var i=this.firstListIndex?this.firstListIndex:0;null!=this.selectedIndex?(this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=0),(this.selectedIndex<this.firstListIndex||this.selectedIndex>this.firstListIndex+(this.options.visibleRowNum-1))&&(i=this.selectedIndex)):i--,this.setFirstRowIndex(i)}else if(40==e){i=this.firstListIndex?this.firstListIndex:0;null!=this.selectedIndex?(this.selectedIndex++,this.selectedIndex>=this.listRowObjArr.length&&(this.selectedIndex=this.listRowObjArr.length-1),(this.selectedIndex<this.firstListIndex||this.selectedIndex>this.firstListIndex+(this.options.visibleRowNum-1))&&(i=this.selectedIndex-(this.options.visibleRowNum-1))):i++,this.setFirstRowIndex(i)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.inputKeyDown=function(t,e){},u.prototype.handleDragEvent=function(t){for(var e=this.event.getTargetIterator(t);e.next();)if(e.match("w2list_listRow")){if(!this.options.sortable)return;e.getElement().style.cursor="pointer",n.D.emptySelection();for(var i,s=this.id,r=e.getElement(),a=this.getChildNodes(),l=0;l<a.length;l++)if(a[l]==r){i=l;break}var h=this;return void WebSquare.dragdrop.gDragManager.activate(t,r,{id:this.id+"_drag",className:"w2list w2list_listRow w2list_drag",contents:this.options.detachMessage||" detached item ",delay:15,detachIdx:i,detachListId:s,applyMousePosition:!0,onDrop:function(t,e,i,s,r,a,l){var d,u,c,p,g=!1,m=this.detachIdx,f=this.detachListId,b=h,y=null;for(this.isMobile?(y=new WebSquare.targetIterator(document.elementFromPoint(l.changedTouches[0].clientX,l.changedTouches[0].clientY)),l.preventDefault()):y=h.event.getTargetIterator(l);y.next();){if(y.match("w2list_listRow")){g=!0;for(var v=(p=y.getElement()).parentNode.childNodes,w=0;w<v.length;w++)if(v[w]==p){c=w;break}}if(y.match("w2list")){g=!0,u=y.getElement().id,d=n.D.getComponentById(u);break}if(y.match(null,null,"body"))return}if(g){var S=!1;if("object"==(0,o.Z)(p)&&"number"==typeof c||(S=!0,p=t,c=d?0==d.getLength()?0:d.getLength():0),f==u)m!=(c=S?c-1:c)&&(b.options.nodeset?b.moveRow(m,c):b.moveRowNM(m,c));else{var C=b.listRowObjArr[m];if(b.options.nodeset?b.removeRow(m):b.removeRowNM(m),delete C.unique_id,!d)return;d.options.nodeset?d.insertRow(c,C):d.insertRowNM(c,C)}}}})}},u.prototype.getMaxItemWidth=function(t){try{var e,i=0;e=this.options.virtualized?document.getElementById(this.id+"_items_main"):this.render;for(var o=0;o<e.childNodes.length;o++){for(var s=0,a=e.childNodes[o],n=0;n<a.childNodes.length;n++)s+=WebSquare.style.getSize(a.childNodes[n],"width");s>i&&(i=s)}return i+10}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setFirstRowIndex=function(t,e){try{t=Math.max(0,Math.min(this.listRowObjArr.length-this.options.visibleRowNum,t)),this.firstListIndex=t;var i=this.getAllData();if(i.length>0){e||this.adjustScrollYThumb(t);for(var o=0;o<Math.min(this.options.visibleRowNum,this.listRowObjArr.length);o++){if(this.fastDrawRawData(o,t+o),this.isIE67)this.getElementById(this.id+"_items_main").getElementsByTagName("input")[o].checked=i[o].id1}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.adjustRender=function(){var t=this.options.rowHeight,e=this.options.useSearch?1:0;this.render.style.height=t*(Math.min(this.listRowObjArr.length,this.options.visibleRowNum)+e)+"px"
;var i=this.getElementById(this.id+"_main"),o=this.getElementById(this.id+"_scroll_main"),s=this.listRowObjArr.length>this.options.visibleRowNum;if(i&&o){var r=12;s?(r=12,i.style.paddingRight=this.isIE67?"0":"12px",o.style.width=r+"px",o.style.display="block"):(r=0,i.style.paddingRight="0",o.style.width=r+"px",o.style.display="none"),this.options.useSearch}this.onListRowObjArrChanged()},u.prototype.adjustScrollYThumb=function(t){if(this.options.virtualized){var e=this.getElementById(this.id+"_scroll_thumb"),i=this.getElementById(this.id+"_scroll_track"),o=this.listRowObjArr.length-this.options.visibleRowNum;if(t>o)e.style.top=i.offsetHeight-i.offsetHeight+"px";else{var s=(i.offsetHeight-e.offsetHeight)/o;isNaN(s)&&(s=0),e.style.top=t*s+"px"}}},u.prototype.fastDrawRawData=function(t,e){var i,o=this.getElementById(this.id+"_items_main");if(o.children.length>t){var s=o.children[t];this.selectedIndex===e?s.style.backgroundColor=this.options.selectedCellColor:s.style.backgroundColor="";var r=this.listRowObjArr[e];r.unique_id||(r.unique_id=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++),o.children[t].setAttribute("unique_id",r.unique_id);for(var a=0;a<this.listColumnInfo.length;a++){var n=this.listColumnInfo[a].id;null!=r[n]||null!=r[n]?i=r[n]:(i=this.listColumnInfo[a].value,r[this.listColumnInfo[a].id]=this.listColumnInfo[a].value);var l=this.listColumnInfo[a];this.updateItemNode(l,i,t,a)}}else{var h=this.createRenderByObj(this.listRowObjArr[e],this.selectedIndex===e);o.appendChild(h)}},u.prototype.updateItemNode=function(t,e,i,o){try{if(t){var s=this.getElementById(this.id+"_items_main").children[i].children[o];switch(t.inputType){case"checkbox":e=n.D.getBoolean(e),s.checked=!0===e;break;case"text":null!=e&&null!=e&&(s.innerHTML=e.toString());break;case"button":e&&s.setAttribute("value",e)}}}catch(t){r.w.printStackTrace(t)}},u.prototype.saveState=function(t){try{if(null==t)return;t=t.toString(),this.state||(this.state={}),this.state[t]={selectedIndex:this.selectedIndex,firstListIndex:this.firstListIndex}}catch(t){r.w.printStackTrace(t)}},u.prototype.loadState=function(t){try{if(null==t)return;t=t.toString(),this.state||(this.state={}),this.state[t]?(this.selectedIndex=this.state[t].selectedIndex,this.firstListIndex=this.state[t].firstListIndex):(this.selectedIndex=void 0,this.firstListIndex=0),this.setFirstRowIndex(this.firstListIndex)}catch(t){r.w.printStackTrace(t)}},u.prototype.onListRowObjArrChanged=function(){try{if(this.options.virtualized){var t=this.getElementById(this.id+"_scroll_thumb"),e=this.getElementById(this.id+"_scroll_track");if(this.options.visibleRowNum>=this.listRowObjArr.length)t.style.height="100%";else{var i=e.offsetHeight*(this.options.visibleRowNum/this.listRowObjArr.length);i<28&&(i=28),i=i.toString()+"px",t.style.height=i}}}catch(t){r.w.printStackTrace(t)}},u.prototype.setCellDataNM=function(t,e,i){try{var o,s,a=this.getLength();if("string"==typeof t||!(a>t&&t>=0))return;if("string"==typeof e){o=e;for(var l=0;l<this.listColumnInfo.length;l++)if(o==this.listColumnInfo[l].id){s=l;break}}else"number"==typeof e&&(s=e,o=this.listColumnInfo[e].id);if(this.options.virtualized){this.getElementById(this.id+"_items_main").children.length>t&&this.updateItemNode(this.listColumnInfo[s],i,t,s)}else{var h=this.getChildNodes()[t],d=this.listColumnInfo[s].inputType,u=h.childNodes[s];switch(d){case"checkbox":u.checked=n.D.getBoolean(i);break;case"text":u.innerHTML=i;break;case"button":u.value=i}}}catch(t){r.w.printStackTrace(t)}}},690:function(t,e,i){"use strict";i.r(e),i.d(e,{output:function(){return l}});var o=i(1974),s=i(5948),r=i(8683),a=i(1),n=i(4748),l=function(t,e,i){a.s.call(this,t,e,i);var o,s=["div","label","h1","h2","h3","h4","h5","h6"];for(this.options.tagname=""!=this.options.for?"label":this.options.tagname,o=0;o<s.length&&s[o]!=this.options.tagname;o++);o>=s.length&&(this.options.tagname=s[0])};o.x.extend(l.prototype,a.s.prototype),o.x.extend(l.prototype,n.g.prototype),
l.prototype.defaultOptions={pluginType:"uiplugin.output",pluginName:"output",useConfig:!0,userEvents:[],systemEvents:["onfocus","onblur","onclick","ondblclick","onmouseup","onmousedown","onmouseout","onmouseover","onmousemove"],label:"",ioFormat:"",displayFormat:"",displayFormatter:null,dataType:"text",localeRef:"",useLocale:!1,escape:!0,escapeFormatter:"",for:"",tagname:"div",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:""},l.prototype.initialize=function(t){try{if(this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter="-")}if(this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),t){var e=WebSquare.WebSquareparser.parseLabel(t);e&&(this.options.label=e.value,this.escapeLabel=e.value)}this.useEscapeFormatter=!1}catch(t){s.w.printStackTrace(t,null,this)}},l.htmlStr=["<",null," id='",null,"'",null," class='w2output ",null,"'",null,">",null,"</",null,">"],l.prototype.toHTML=function(){try{if(null!=this.scope_obj&&this.scope_obj.id&&this.options.for){var t=r.D.getComponentById(this.options.for,this.scope_obj.id);null!=t&&(this.options.for=t.id)}var e=WebSquare.uiplugin.output.htmlStr,i="";return this.options.escapeFormatter||(i=this.options.escape?this.formatter.format(WebSquare.xml._encode(this.options.label)):this.formatter.format(this.options.label)),e[1]=this.options.tagname,e[3]=this.id,e[5]=""==this.options.style?"":" style ='"+this.options.style+"'",e[5]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",e[7]=this.options.className,e[9]="label"==this.options.tagname?" for='"+this.options.for+"'":"",e[11]=i,e[13]=this.options.tagname,e.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}if(this.displayLocaleValue(),"label"!=this.options.tagname||""==this.options.for)return;var e=r.D.getComponentById(this.options.for)||null;if(null==e)return;var i="function"==typeof e.getAccessibiltyId?e.getAccessibiltyId():this.options.for;this.render.setAttribute("for",i)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onComplete=function(){try{if(this.options.escapeFormatter){try{if("function"==typeof this.options.escapeFormatter)this.useEscapeFormatter=!0;else{var t=r.D.getGlobalFunction(this.options.escapeFormatter,this.scope_id);this.options.escapeFormatter=t,"function"==typeof t&&(this.useEscapeFormatter=!0)}}catch(t){s.w.printStackTrace(t,null,this)}this.setValueNM(this.options.label)}a.s.prototype.onComplete.call(this)}catch(t){
s.w.printStackTrace(t,null,this)}},l.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setVerticalAlign=function(){try{var t="top",e=this.options.style.toLowerCase();if(e.match(/vertical-align[\s]*:[\s]*middle/)?t="middle":e.match(/vertical-align[\s]*:[\s]*bottom/)&&(t="bottom"),"top"==t);else{var i=this.getStyle("height");if(i.indexOf("px")>-1){i=parseInt(i);var o=parseInt(this.getStyle("padding-top"))||0,r=parseInt(this.getStyle("font-size"))||0,a=0;"middle"==t?a=Math.floor((i-r)/2):"bottom"==t&&(a=Math.floor(i-r)),a+o>0&&i-a>0&&(this.setStyle("paddingTop",a+o+"px"),this.setStyle("height",i-a+"px"))}}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{this.setValueNM(t),this.modelControl.setData(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue1=function(t){try{this.setValue(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValueNM=function(t){try{if(r.D.isNull(t))return;t=t.toString(),this.options.label=t,this.useEscapeFormatter&&(t=this.options.escapeFormatter.call(this,t)),this.escapeLabel=t,this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(t+"")):this.formatter.format(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setWidth=function(t){try{isNaN(parseInt(t))||(this.render.style.width=t+"px")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setHeight=function(t){try{t=parseInt(t,10),isNaN(t)||(this.render.style.height=t+"px")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setBackgroundImage=function(t){try{this.render.style.backgroundImage=void 0===t||null==t||""==t?"":this.getImageURL(t,!0)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getFormatValue=function(){try{return this.formatter.format(this.escapeLabel)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getLabel=function(){try{return this.getValue()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setLabel=function(t){try{this.setValue(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getValue=function(){try{return this.formatter.format(this.escapeLabel)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setLocaleRef=function(t){try{this.options.localeRef=t,this.displayLocaleValue()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?(this.addClass(this.render,"w2output_disabled"),this.setStyle("color","#c0c0c0")):(this.removeClass(this.render,"w2output_disabled"),this.setStyle("color",""))}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getRawValue=function(){try{return this.options.label}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValueNM(this.options.label)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){s.w.printStackTrace(t)}},l.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){s.w.printStackTrace(t)}},l.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){s.w.printStackTrace(t)}}},9488:function(t,e,i){"use strict";i.r(e),i.d(e,{pageList:function(){return l}});var o=i(1974),s=i(5948),r=i(1454),a=i(8683),n=i(1),l=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.pageList",
pluginName:"pageList",userEvents:["onclick","onchange","onviewchange","oninputblur"],useConfig:!0,defaultClass:"w2pageList_label",selectedStyle:"",selectedClass:"w2pageList_label_selected",displayFormat:"#",useDelim:!1,delimiter:"",pageSize:10,pagingType:"1",buttonShowType:"1",naviType:"config",nativeTooltip:!0,leftPageBackImage:"",leftPageImage:"",rightPageImage:"",rightPageBackImage:"",deliImage:"",leftPageBackImageClass:"w2pageList_col_prevPage",leftPageImageClass:"w2pageList_col_prev",rightPageImageClass:"w2pageList_col_next",rightPageBackImageClass:"w2pageList_col_nextPage",deliImageClass:"w2pageList_delimiter",leftPageBackImageStyle:"",leftPageImageStyle:"",rightPageImageStyle:"",rightPageBackImageStyle:"",deliImageStyle:"",indexWidth:-1,deliWidth:-1,shiftMoveButtonWidth:-1,oneMoveButtonWidth:-1,renderType:"table",href:"",displayButtonType:"display",displaySearchbox:!1,displaySelectedIndex:!1},l.prototype.initialize=function(t){try{this.pageCount=0,1==this.options.displaySearchbox?(this.displayIndex=0,this.selectedIndex=0):(this.displayIndex=1,this.selectedIndex=-1),this.default_leftPageBackImage=o.x._resourceURI+"uiplugin/pageList/images/b_first.gif",this.default_leftPageImage=o.x._resourceURI+"uiplugin/pageList/images/b_prev.gif",this.default_rightPageImage=o.x._resourceURI+"uiplugin/pageList/images/b_next.gif",this.default_rightPageBackImage=o.x._resourceURI+"uiplugin/pageList/images/b_end.gif",this.options=WebSquare.cssManager.styleToClass(this.id,this.options),this.options.leftPageBackImage=this.options.leftPageBackImage?this.options.leftPageBackImage:this.default_leftPageBackImage,this.options.leftPageImage=this.options.leftPageImage?this.options.leftPageImage:this.default_leftPageImage,this.options.rightPageImage=this.options.rightPageImage?this.options.rightPageImage:this.default_rightPageImage,this.options.rightPageBackImage=this.options.rightPageBackImage?this.options.rightPageBackImage:this.default_rightPageBackImage,this.labelStyle="",-1!=this.options.indexWidth&&(this.labelStyle+="width:"+this.options.indexWidth+"px;"),-1!=this.options.deliWidth&&(this.options.deliImageStyle+=";width:"+this.options.deliWidth+"px;"),-1!=this.options.shiftMoveButtonWidth&&(this.options.leftPageBackImageStyle+=";width:"+this.options.shiftMoveButtonWidth+"px;",this.options.rightPageBackImageStyle+=";width:"+this.options.shiftMoveButtonWidth+"px;"),-1!=this.options.oneMoveButtonWidth&&(this.options.leftPageImageStyle+=";width:"+this.options.oneMoveButtonWidth+"px;",this.options.rightPageImageStyle+=";width:"+this.options.oneMoveButtonWidth+"px;"),""!=this.options.deliImage&&(this.options.deliImageStyle+=";background-image:url("+this.options.deliImage+");"),"list"==this.options.renderType?(this.options.leftPageBackImageStyle+=";background-image:none;",this.options.leftPageImageStyle+=";background-image:none;",this.options.rightPageImageStyle+=";background-image:none;",this.options.rightPageBackImageStyle+=";background-image:none;"):(this.options.leftPageBackImage!=this.default_leftPageBackImage&&(this.options.leftPageBackImageStyle+=";background-image:url("+this.options.leftPageBackImage+");"),this.options.leftPageImage!=this.default_leftPageImage&&(this.options.leftPageImageStyle+=";background-image:url("+this.options.leftPageImage+");"),this.options.rightPageImage!=this.default_rightPageImage&&(this.options.rightPageImageStyle+=";background-image:url("+this.options.rightPageImage+");"),this.options.rightPageBackImage!=this.default_rightPageBackImage&&(this.options.rightPageBackImageStyle+=";background-image:url("+this.options.rightPageBackImage+");")),"3"==this.options.buttonShowType&&(this.options.pagingType="2")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{
var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'",o=""==this.options.href?"":"href='"+this.options.href+"'",r=""==this.options.leftPageImageStyle?"":"style='"+this.options.leftPageImageStyle+"'",n=""==this.options.leftPageBackImageStyle?"":"style='"+this.options.leftPageBackImageStyle+"'",l=""==this.options.leftPageImage?"":"src='"+this.options.leftPageImage+"'",h=""==this.options.leftPageBackImage?"":"src='"+this.options.leftPageBackImage+"'",d=""==this.options.rightPageImageStyle?"":"style='"+this.options.rightPageImageStyle+"'",u=""==this.options.rightPageBackImageStyle?"":"style='"+this.options.rightPageBackImageStyle+"'",c=""==this.options.rightPageImage?"":"src='"+this.options.rightPageImage+"'",p=""==this.options.rightPageBackImage?"":"src='"+this.options.rightPageBackImage+"'",g=""==this.labelStyle?"":"style='"+this.labelStyle+"'",m=""==this.options.deliImageStyle?"":"style='"+this.options.deliImageStyle+"'";this.prevPageButtonId=this.id+"_prevPage_btn",this.nextPageButtonId=this.id+"_nextPage_btn",this.prevButtonId=this.id+"_prev_btn",this.nextButtonId=this.id+"_next_btn";var f,b=a.D.getBoolean(this.options.displaySearchbox);if(t.push("<div id='"+this.id+"' "+e+" class='w2pageList w2pageList_pagePrev_last w2pageList_prev_last "+this.options.className+"'>"),"list"==this.options.renderType){t.push("<ul class='w2pageList_ul'>"),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(f=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_previousList_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+n+"><a href=#"+this.prevPageButtonId+" role='button' aria-pressed='false' title='"+f+"'><img "+h+" alt='"+WebSquare.language.getMessage("pagelist_previousList_page")+"'/></a></li>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_first_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+n+"><a href=#"+this.prevPageButtonId+" role='button' aria-pressed='false' title='"+f+"'><img "+h+" alt='"+WebSquare.language.getMessage("Pagelist_first_page")+"'/></a></li>")):(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+n+"><a href=#"+this.prevPageButtonId+" role='button' aria-pressed='false' title='"+f+"'><img "+h+" alt='"+WebSquare.language.getMessage("Pagelist_previous_page")+"'/></a></li>")),"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<li id='"+this.prevButtonId+"' class='w2pageList_control_prev "+this.options.leftPageImageClass+"' "+r+"><a href=#"+this.prevButtonId+" role='button' aria-pressed='false' title='"+f+"'><img "+l+" alt='"+WebSquare.language.getMessage("Pagelist_previous_page")+"'/></a></li>"));var y=Math.min(this.pageCount,this.displayIndex+this.options.pageSize-1);if(b)t.push("<li class='w2pageList_li_label' "+g+"><input id='"+this.id+"_input' style='ime-mode:disabled' value ='"+this.displayIndex+"'class='w2pageList_input' onkeydown='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'onblur='window."+WebSquare.noConflict+".comp."+this.id+".onBlurEvent(event)'onkeypress='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'/><span> /"+this.pageCount+"</span></li>");else for(var v=this.displayIndex;v<=y;v++)f=this.options.nativeTooltip?this.getLabel(v):"",
this.options.href?t.push("<li class='w2pageList_li_label' "+g+"><a id='"+this.id+"_page_"+v+"' "+o+" class='w2pageList_control_label "+this.options.defaultClass+"' index='"+v+"' role='button' aria-pressed='false' title='"+f+"'>"+this.getLabel(v)+"</a></li>"):t.push("<li class='w2pageList_li_label' "+g+"><a id='"+this.id+"_page_"+v+"' href=#"+this.id+"_page_"+v+" class='w2pageList_control_label "+this.options.defaultClass+"' index='"+v+"' role='button' aria-pressed='false'  title='"+f+"'>"+this.getLabel(v)+"</a></li>"),1==this.options.useDelim&&v<y&&t.push("<li class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+m+">"+this.options.delimiter+"</li>");"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_next_page"):"",t.push("<li id='"+this.nextButtonId+"' class='w2pageList_control_next "+this.options.rightPageImageClass+"' "+d+"><a href=#"+this.nextButtonId+" role='button' aria-pressed='false' title='"+f+"'><img "+c+" alt='"+WebSquare.language.getMessage("Pagelist_next_page")+"'/></a></li>")),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(f=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_nextList_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+"><a href=#"+this.nextPageButtonId+" role='button' aria-pressed='false' title='"+f+"'><img "+p+" alt='"+WebSquare.language.getMessage("pagelist_nextList_page")+"'/></a></li>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_last_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+"'><a href=#"+this.nextPageButtonId+" role='button' aria-pressed='false' title='"+f+"'><img "+p+" alt='"+WebSquare.language.getMessage("Pagelist_last_page")+"'/></a></li>")):(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_next_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+"'><a href=#"+this.nextPageButtonId+" role='button' aria-pressed='false' title='"+f+"'><img "+p+" alt='"+WebSquare.language.getMessage("Pagelist_next_page")+"'/></a></li>")),t.push("</ul>")}else{t.push("<table class='w2pageList_table'><tr>"),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(f=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_previousList_page"):"",t.push("<td  id='"+this.prevPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+n+" role='button' aria-pressed='false' "+i+" title='"+f+"'></td>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_first_page"):"",t.push("<td  id='"+this.prevPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+n+" role='button' aria-pressed='false' "+i+" title='"+f+"'></td>")):(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<td  id='"+this.prevPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+n+" role='button' aria-pressed='false' "+i+" title='"+f+"'></td>")),"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_previous_page"):"",t.push("<td id='"+this.prevButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_prev "+this.options.leftPageImageClass+"' "+r+" role='button' aria-pressed='false' "+i+" title='"+f+"'></td>"))
;y=Math.min(this.pageCount,this.displayIndex+this.options.pageSize-1);if(b)t.push("<td class='w2pageList_col_label_input' "+g+"><div><input id='"+this.id+"_input' style='ime-mode:disabled' value ='"+this.displayIndex+"'class='w2pageList_input' onkeydown='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'onblur='window."+WebSquare.noConflict+".comp."+this.id+".onBlurEvent(event)'onkeypress='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'/><span> /"+this.pageCount+"</span></div></td>");else for(v=this.displayIndex;v<=y;v++)f=this.options.nativeTooltip?this.getLabel(v):"",t.push("<td class='w2pageList_col_label' "+g+"><div id='"+this.id+"_page_"+v+"' class='w2pageList_control_label "+this.options.defaultClass+"' index='"+v+"' role='button' aria-pressed='false'  "+i+" title='"+f+"'>"+this.getLabel(v)+"</div></td>"),1==this.options.useDelim&&v<y&&t.push("<td class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+m+">"+this.options.delimiter+"</td>");"1"!=this.options.buttonShowType&&"3"!=this.options.buttonShowType&&"4"!=this.options.buttonShowType||(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_next_page"):"",t.push("<td id='"+this.nextButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_next "+this.options.rightPageImageClass+"' "+d+" "+i+" title='"+f+"'></td>")),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(f=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_nextList_page"):"",t.push("<td id='"+this.nextPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+" "+i+" title='"+f+"'></td>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(f=this.options.nativeTooltip?WebSquare.language.getMessage("Pagelist_last_page"):"",t.push("<td id='"+this.nextPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+" "+i+" title='"+f+"'></td>")):(f=this.options.nativeTooltip?WebSquare.language.getMessage("pagelist_next_page"):"",t.push("<td id='"+this.nextPageButtonId+"' role='button' aria-pressed='false' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+u+" "+i+" title='"+f+"'></td>")),t.push("</tr></table>")}return t.push("</div>"),t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{if(13!=(t.charCode?t.charCode:t.keyCode))return;var e=t.srcElement||t.target;"a"==e.nodeName.toLowerCase()?null==e.getAttribute("href")&&this.handleClickEvent(t):this.handleClickEvent(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getLabel=function(t){try{return WebSquare.text.formatCurrency(t,this.options.displayFormat)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getCount=function(){try{return this.pageCount}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setCount=function(t,e){try{var i=e||!1;if(e&&t<this.selectedIndex&&($l("range exception for "+this.id),i=!1),this.options.displaySearchbox)var o=parseInt(t,10)||0;else o="string"==typeof t?parseInt(t,10)||0:t;this.pageCount=o,(0==i||this.selectedIndex<1)&&(this.displayIndex=1),this.redraw(),0==i||this.selectedIndex<1?this.setSelectedIndex(1):this.setSelectedIndex(this.selectedIndex)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setSelectedIndex=function(t){try{
if(0==this.pageCount){if("auto"==this.options.displayButtonType||"autoOver"==this.options.displayButtonType){var e=document.getElementById(this.prevPageButtonId),i=document.getElementById(this.prevButtonId),o=document.getElementById(this.nextButtonId),n=document.getElementById(this.nextPageButtonId);e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden")}return}if(a.D.isNull(t))return;if((t=parseInt(t,10))<1||t>this.pageCount||isNaN(t))return void $l("range exception for "+this.id);var l=this.selectedIndex;this.setDisplayIndex(t);var h=document.getElementById(this.id+"_page_"+this.selectedIndex);h&&(this.changeClass(h,this.options.selectedClass,this.options.defaultClass),h.removeAttribute("title"),h.setAttribute("aira-pressed",!1)),this.selectedIndex=t,this.changeButtonCursor(t);var d=document.getElementById(this.id+"_page_"+t);d&&(this.changeClass(d,this.options.defaultClass,this.options.selectedClass),d.setAttribute("title",WebSquare.language.getMessage("Pagelist_selected",d.textContent||d.innerText)),d.setAttribute("aria-pressed",!0)),l>0&&l!=this.selectedIndex&&r.B.fireEvent(this,"onchange",this.selectedIndex,l);var u=this.options.displayButtonType,c=this.options.pagingType;if("display"!=u){e=document.getElementById(this.prevPageButtonId),i=document.getElementById(this.prevButtonId),o=document.getElementById(this.nextButtonId),n=document.getElementById(this.nextPageButtonId);var p=!1,g=!1,m=!1;if("auto"==u||"autoOver"==u||"autoHidden"==u){if("autoHidden"==u){if("4"==this.options.buttonShowType)1==this.selectedIndex?g=!0:this.selectedIndex==this.pageCount&&(p=!0);else if(this.options.pageSize>=this.pageCount)m=!0;else if("1"==c){var f=this.pageCount-this.options.pageSize+1;this.selectedIndex<=this.options.pageSize&&this.selectedIndex<f?g=!0:this.selectedIndex>=f&&(p=!0)}else if("2"==c){var b;b=0==parseInt(this.pageCount%this.options.pageSize)?this.pageCount-this.options.pageSize+1:this.pageCount-parseInt(this.pageCount%this.options.pageSize)+1,this.selectedIndex<=this.options.pageSize?g=!0:this.selectedIndex>=b&&(p=!0)}}else 1===this.selectedIndex?g=!0:this.selectedIndex==this.pageCount&&(p=!0);g?(e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="visible"),n&&(n.style.visibility="visible")):p?(e&&(e.style.visibility="visible"),i&&(i.style.visibility="visible"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden")):m?(e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden")):(e&&(e.style.visibility="visible"),i&&(i.style.visibility="visible"),o&&(o.style.visibility="visible"),n&&(n.style.visibility="visible"))}("displayOver"==u||"autoOver"==u)&&this.options.pageSize>=this.pageCount&&(e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden"))}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setFocus=function(t){try{if(0==this.pageCount)return;if(a.D.isNull(t))return;if((t=t.toString())<1||t>this.pageCount)return void $l("range exception for "+this.id);var e=document.getElementById(this.id+"_page_"+t);e&&e.focus()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setIdxClass=function(t){try{this.setSelectedIndex(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{if(a.D.isNull(t))return;t=t.toString(),this.options.displaySearchbox&&isNaN(t)&&(t=this.selectedIndex),this.setSelectedIndex(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.moveLeft=function(){try{this.setSelectedIndex(this.selectedIndex-1),this.setFocus(this.selectedIndex)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.moveRight=function(){try{this.setSelectedIndex(this.selectedIndex+1),
this.setFocus(this.selectedIndex)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.pageLeft=function(){try{if(this.options.displaySearchbox)var t=1;else t=this.selectedIndex-this.options.pageSize;this.setDisplayIndex(t),this.setSelectedIndex(this.displayIndex),this.setFocus(this.selectedIndex)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.pageLeftLast=function(){try{if(1==this.displayIndex)this.setSelectedIndex(1);else{var t=this.selectedIndex-this.options.pageSize;this.setDisplayIndex(t);var e=this.displayIndex+this.options.pageSize-1;this.setSelectedIndex(e),this.setFocus(this.selectedIndex)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.pageRight=function(){try{if(this.options.displaySearchbox)var t=this.selectedIndex+this.pageCount;else t=this.selectedIndex+this.options.pageSize;this.setDisplayIndex(t),1==this.options.pagingType&&t>this.pageCount?this.setSelectedIndex(this.pageCount):this.setSelectedIndex(this.displayIndex),this.setFocus(this.selectedIndex)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setDisplayIndex=function(t){try{if(0==this.pageCount)return;var e;if(this.options.displaySearchbox)document.getElementById(this.id+"_input").value=t,e=t;else t=parseInt(t,10),e=parseInt((t-1)/this.options.pageSize)*this.options.pageSize+1,"1"==this.options.pagingType&&"3"!=this.options.buttonShowType&&t+this.options.pageSize>this.pageCount&&(e=this.pageCount-this.options.pageSize+1);if("2"==this.options.buttonShowType&&"1"==this.options.naviType&&(e=t),e<1&&(e=1),e>this.pageCount&&(e=this.pageCount),this.displayIndex==e||isNaN(e))return;this.displayIndex=e,this.redraw()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.changeButtonCursor=function(t){try{"3"==this.options.buttonShowType||"2"==this.options.buttonShowType?(1==this.displayIndex?this.addClass("w2pageList_prev_last"):this.removeClass("w2pageList_prev_last"),this.displayIndex+this.options.pageSize>this.pageCount?this.addClass("w2pageList_next_last"):this.removeClass("w2pageList_next_last"),1==t?this.addClass("w2pageList_pagePrev_last"):this.removeClass("w2pageList_pagePrev_last"),t==this.pageCount?this.addClass("w2pageList_pageNext_last"):this.removeClass("w2pageList_pageNext_last")):(1==this.displayIndex?this.addClass("w2pageList_pagePrev_last"):this.removeClass("w2pageList_pagePrev_last"),this.displayIndex+this.options.pageSize>this.pageCount?this.addClass("w2pageList_pageNext_last"):this.removeClass("w2pageList_pageNext_last"),1==t?this.addClass("w2pageList_prev_last"):this.removeClass("w2pageList_prev_last"),t==this.pageCount?this.addClass("w2pageList_next_last"):this.removeClass("w2pageList_next_last"))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setPageSize=function(t){try{this.options.pageSize="string"==typeof t?parseInt(t,10)||this.options.pageSize:t||this.options.pageSize}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getPageSize=function(){try{return this.options.pageSize}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render),i=this.getSelectedIndex();e.next();)if(e.match("w2pageList_control_pagePrev")&&("2"==this.options.buttonShowType?this.moveLeft():"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?this.setSelectedIndex(1):("0"==this.options.buttonShowType||this.options.buttonShowType,this.pageLeft()),r.B.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.B.stopEvent(t)),e.match("w2pageList_control_prev")&&("3"==this.options.buttonShowType?this.pageLeftLast():this.moveLeft(),r.B.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.B.stopEvent(t)),e.match("w2pageList_control_next")&&("3"==this.options.buttonShowType?this.pageRight():this.moveRight(),r.B.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.B.stopEvent(t)),
e.match("w2pageList_control_pageNext")&&("2"==this.options.buttonShowType?this.moveRight():"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?this.setSelectedIndex(this.pageCount):("0"==this.options.buttonShowType||this.options.buttonShowType,this.pageRight()),r.B.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.B.stopEvent(t)),e.match("w2pageList_control_label")){var o=e.getElement().getAttribute("index");this.setSelectedIndex(o),r.B.fireEvent(this,"onclick",o),"list"==this.options.renderType&&r.B.stopEvent(t)}e=null;var a=this.getSelectedIndex();if(i!=a){var n={oldSelectedIndex:i,newSelectedIndex:a};r.B.fireEvent(this,"onviewchange",n)}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMouseoverEvent=function(t){try{r.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2pageList_control_label")?this.addClass(e.getElement(),"w2pageList_label_over"):e.match("w2pageList_col_prev")?this.addClass(e.getElement(),"w2pageList_col_prev_over"):e.match("w2pageList_col_next")?this.addClass(e.getElement(),"w2pageList_col_next_over"):e.match("w2pageList_col_prevPage")?this.addClass(e.getElement(),"w2pageList_col_prevPage_over"):e.match("w2pageList_col_nextPage")&&this.addClass(e.getElement(),"w2pageList_col_nextPage_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMouseoutEvent=function(t){try{r.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2pageList_control_label")?this.removeClass(e.getElement(),"w2pageList_label_over"):e.match("w2pageList_col_prev")?this.removeClass(e.getElement(),"w2pageList_col_prev_over"):e.match("w2pageList_col_next")?this.removeClass(e.getElement(),"w2pageList_col_next_over"):e.match("w2pageList_col_prevPage")?this.removeClass(e.getElement(),"w2pageList_col_prevPage_over"):e.match("w2pageList_col_nextPage")&&this.removeClass(e.getElement(),"w2pageList_col_nextPage_over");e=null}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onInputKeyEventHandler=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=new RegExp("[0-9]","g"),o=document.getElementById(this.id+"_input");13==e&&(o.blur(),this.options.displaySelectedIndex&&(o.value>this.pageCount||o.value<=0||""==o.value||null==o.value)?(o.value=this.selectedIndex,this.setValue(o.value)):this.setValue(o.value)),String.fromCharCode(e).match(i)&&16!=e||8==e||37==e&&"ArrowLeft"==t.key||39==e&&"ArrowRight"==t.key||r.B.stopEvent(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onBlurEvent=function(t){try{var e=document.getElementById(this.id+"_input");this.options.displaySelectedIndex&&(e.value>this.pageCount||e.value<=0||""==e.value||null==e.value)?(e.value=this.selectedIndex,this.setValue(e.value)):this.setValue(e.value),r.B.fireEvent(this,"oninputblur",e.value)}catch(t){s.w.printStackTrace(t,null,this)}}},1451:function(t,e,i){"use strict";i.r(e),i.d(e,{panelContainer:function(){return h},panel:function(){return d}});var o=i(1974),s=i(5948),r=i(1454),a=i(8683),n=i(9075),l=i(1),h=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.panelContainer",pluginName:"panelContainer",useConfig:!0,cols:1,colWidth:0,panelMove:!0},h.prototype.initialize=function(t){this.panelIdCount=0,this.colArr=[]},h.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";t.push("<div id='"+this.id+"' "+e+" class='w2panelContainer "+this.options.className+"'>");for(var i=0;i<this.options.cols;i++)t.push("<div id='"+this.id+"_col_"+i+"' class='w2panelContainer_col'></div>");return t.push("</div>"),t.join("")},h.prototype.setAction=function(){var t=0,e=[];if(0==this.options.colWidth)for(var i=0;i<this.options.cols;i++)e[i]=parseInt(100/this.options.cols,10)+(i<100%this.options.cols?1:0);for(i=0;i<this.render.childNodes.length;i++)this.colArr.push(this.render.childNodes[i]),
0==this.options.colWidth?(this.colArr[i].style.width=e[i]+"%",this.colArr[i].style.left=t+"%",t+=e[i]):(this.colArr[i].style.width=this.options.colWidth+"px",this.colArr[i].style.left=i*this.options.colWidth+"px");this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent))},h.prototype.addPanel=function(t){var e=t.col||0;t.id||(t.id=this.id+"_panel"+this.panelIdCount++);var i=new WebSquare.uiplugin.panel(t.id,t),o=this;return i.options.xmlEvents=[{name:"onpanelopen",action:"script",param:{handler:function(t){var e=o.getPanelInfoById(this.id);r.B.fireEvent(o,"onpanelopen",e)}}},{name:"onpanelclose",action:"script",param:{handler:function(t){var e=o.getPanelInfoById(this.id);r.B.fireEvent(o,"onpanelclose",e)}}}],this.addControl(i),i.appendTo(this.colArr[e]),i.activate(),i},h.prototype.removePanel=function(t,e){if(t=parseInt(t,10),!((e=parseInt(e,10))>=this.render.childNodes.length||t>=this.render.childNodes[e].childNodes.length)){var i=this.render.childNodes[e],o=i.childNodes[t],s=o.id;return this.removeControl(this.getPanelById(s)),a.D.getComponentById(s+"_content").remove(),window[s]&&(window[s]=null),window[WebSquare.noConflict].comp[s]=null,delete window[WebSquare.noConflict].comp[s],i.removeChild(o),s}},h.prototype.getPanelById=function(t){for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];if(i.id==t)return i}},h.prototype.getPanelInfo=function(){for(var t=[],e=0;e<this.options.cols;e++){for(var i=this.render.childNodes[e],o=[],s=0;s<i.childNodes.length;s++)for(var r=i.childNodes[s],a=0;a<this.childControlList.length;a++){var n=this.childControlList[a];if(n.render==r){o.push({id:n.id,style:n.options.style,title:n.options.title,src:n.options.src,scope:n.options.scope,col:e,row:s,isOpen:"0px"!=WebSquare.style.getStyle(this.getElementById(n.id+"_content"),"height")});break}}t.push(o)}return t},h.prototype.getPanelInfoById=function(t){for(var e=this.getPanelInfo(),i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var r=o[s];if(t==r.id)return r}},h.prototype.setPanelTitle=function(t,e){var i=this.getPanelById(t);i&&(i.options.title=e,i.render.childNodes[0].childNodes[1].innerHTML=e)},h.prototype.openPanel=function(t){var e=this.getPanelById(t),i=e.getElementById(e.id+"_content");0==i.offsetHeight&&WebSquare.style.animate(i,{height:i.scrollHeight},{key:e.id+"_toggle",easing:"linear",duration:300,caller:e,complete:function(){WebSquare.style.setStyle(i,"height",""),e.removeClass("w2panel_closed"),r.B.fireEvent(e,"onpanelopen")}})},h.prototype.closePanel=function(t){var e=this.getPanelById(t),i=e.getElementById(e.id+"_content");0==i.offsetHeight||(WebSquare.style.setStyle(i,"height",i.scrollHeight+"px"),WebSquare.style.animate(i,{height:0},{key:e.id+"_toggle",easing:"linear",duration:300,caller:e,complete:function(){e.addClass("w2panel_closed"),r.B.fireEvent(e,"onpanelclose")}}))},h.prototype.handleMousedownEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);this.options.panelMove&&e.next();)if(e.match("w2panel_title"))return this.dragDropElem=e.getElement().parentNode,this.render.style.cursor="pointer",this.addClass("w2noselect"),void r.B.stopEvent(t);this.dragDropElem=null},h.prototype.handleMousemoveEvent=function(t){this.dragDropElem&&(this.ghost||(this.ghost=document.createElement("div"),this.ghost.innerHTML=this.dragDropElem.childNodes[0].childNodes[1].innerHTML,this.ghost.className="w2panelContainer_ghost",WebSquare.getBody().appendChild(this.ghost)),this.ghost.style.left=r.B.getMouseX(t)+10+"px",this.ghost.style.top=r.B.getMouseY(t)+10+"px",r.B.preventDefault(t))},h.prototype.handleMouseupEvent=function(t){try{if(this.dragDropElem){
for(var e=this.event.getTargetIterator(t,this.render);e.next()&&(!e.match("w2panel_title")||e.getElement().parentNode!=this.dragDropElem);)if(e.match(null,this.id)){for(var i=r.B.getMouseX(t)+this.render.scrollLeft-WebSquare.style.getAbsoluteLeft(this.render),o=r.B.getMouseY(t)+this.render.scrollTop-WebSquare.style.getAbsoluteTop(this.render),a=null,n=0;n<this.render.childNodes.length;n++){if(i<(a=this.render.childNodes[n]).offsetLeft+a.offsetWidth)break}for(var l=this.render.childNodes[n].childNodes,h=0;h<l.length;h++){var d=l[h];if(o<d.offsetTop+d.offsetHeight)break}if(this.dragDropElem.parentNode.removeChild(this.dragDropElem),!a)return;h<l.length?a.insertBefore(this.dragDropElem,l[h]):(h=l.length,a.appendChild(this.dragDropElem)),r.B.fireEvent(this,"onpanelmove",h,n)}this.render.style.cursor="",this.removeClass("w2noselect")}this.dragDropElem=null,this.ghost&&(this.ghost.parentNode.removeChild(this.ghost),this.ghost=null)}catch(t){s.w.printStackTrace(t,null,this)}},h.prototype.movePanel=function(t,e,i){try{var o=this.getPanelById(t),a=this.render.childNodes[i];if(!a)return void n.k.printLog("invalid position : ["+e+","+i+"]["+this.id+"]");var l=this.render.childNodes[i].childNodes;o?(o.render.parentNode.removeChild(o.render),e<l.length?a.insertBefore(o.render,l[e]):(e=l.length,a.appendChild(o.render)),r.B.fireEvent(this,"onpanelmove",e,i)):n.k.printLog("cannot find pannel : "+t+"["+this.id+"]")}catch(t){s.w.printStackTrace(t,null,this)}};var d=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(d.prototype,l.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.panel",pluginName:"panel",title:"",src:"",scope:!1,isOpen:!0},d.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2panel "+this.options.className+"'>"),t.push("<div id='"+this.id+"_title' class='w2panel_title'>"),t.push("<div id='"+this.id+"_title_image' class='w2panel_title_image'></div>"),t.push("<span id='"+this.id+"_title_text' class='w2panel_title_text'>"+this.options.title+"</span>"),t.push("</div>"),t.push("</div>"),t.join("")},d.prototype.setAction=function(){var t=new WebSquare.uiplugin.wframe(this.id+"_content",{className:"w2panel_content",src:this.options.src,scope:this.options.scope,style:this.options.isOpen?"":"height:0"});t.appendTo(this),t.activate(),this.contentRender=t.render,this.event.addListener(this.getElementById(this.id+"_title"),"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),this.options.isOpen||this.addClass("w2panel_closed")},d.prototype.handleTitleClick=function(t){0==this.getElementById(this.id+"_content").offsetHeight?this.parentControl.openPanel(this.id):this.parentControl.closePanel(this.id)}},463:function(t,e,i){"use strict";i.r(e),i.d(e,{radio:function(){return u}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=i(5373),d=i(2117),u=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(u.prototype,l.s.prototype),o.x.extend(u.prototype,h.E.prototype),o.x.extend(u.prototype,d.z.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.radio",pluginName:"radio",userEvents:["onchange","onlabelclick","onradioclick","onviewchange","onkeyup","onkeydown"],useConfig:!0,renderType:"",tagname:"div",itemTagname:"div",value:"",cols:0,rows:0,name:"",nameScope:!1,selectedIndex:-1,initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,title:"",useRadioTitle:!0,inValidValue:"reset",escape:!0,ignoreTabIndex:!1,tooltipItemLabel:"",tooltipShowAlways:!1,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F"},u.prototype.initialize=function(t){try{var e=s.v.getConfiguration("/WebSquare/radio/renderType/@value")
;""==this.options.renderType&&""!=e?this.options.renderType=e:""==this.options.renderType&&(this.options.renderType="table"),this.selectedIndex=-1,this.inputType="radio","native"==this.options.renderType?this.itemArr=[{label:"",value:this.options.value}]:this.initializeItemArr(t),this.itemDisabledArray=[];for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(!1);this.setTableCount(),this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.options.tooltipFormatter&&(this.tooltipFormatter=n.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toHTML=function(){try{var t=[],e=this.itemArr.length,i=this.options.name||this.id+"_input";this.options.nameScope&&this.options.name&&this.scope_id&&(i=this.scope_id+"_"+i);var o=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.title?"":"title='"+this.options.title+"'",a=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'";if(1==this.options.ignoreTabIndex&&(a=n.D.isIEAllVersion("8")||n.D.isIEAllVersion("9")?" tabindex='-40000'":" tabindex='-1'"),"native"==this.options.renderType.toLowerCase())t.push("<input type='"+this.inputType+"' "+o+" class='w2"+this.inputType+"_input "+this.options.className+"' name='"+i+"' id='"+this.id+"' index='0' "+s+a+" />");else if("radiogroup"==this.options.renderType.toLowerCase()){t.push("<"+this.options.tagname+" id='"+this.id+"' "+o+" class='w2"+this.inputType+" "+this.options.className+"' "+s+" >");for(var l=0;l<e;l++){var h="";this.itemArr&&this.itemArr[l]&&!0===this.itemArr[l]._hidden&&(h=" style='display:none;'");var d=this.id+"_input_"+l,u=this.options.escape?WebSquare.xml._encode(this.itemArr[l].label):this.itemArr[l].label,c="",p="";this.itemDisabledArray[l]&&(c="disabled",p="w2radio_disabled"),t.push("<"+this.options.itemTagname+" class='w2radio_item w2radio_item_"+l+"'"+h+">"),t.push("<input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+i+"' index='"+l+"'  id='"+d+"' "+c+a+"/>"),t.push("<label class='w2"+this.inputType+"_label "+p+"' index='"+l+"' for='"+d+"' >"+u+"</"+"label>"),t.push("</"+this.options.itemTagname+">")}t.push("</"+this.options.tagname+">")}else{t.push("<div id='"+this.id+"' "+o+" class='w2"+this.inputType+" "+this.options.className+"' "+s+" >"),t.push("<table class='w2"+this.inputType+"_main'>");for(var g=0;g<this.rowCount;g++){d=this.id+"_input_"+g;t.push("<tr class='w2"+this.inputType+"_row'>");for(var m=0;m<this.colCount;m++){var f=g*this.colCount+m;h="";this.itemArr&&this.itemArr[f]&&!0===this.itemArr[f]._hidden&&(h=" style='display:none;'");d=this.id+"_input_"+f,c="",p="";if(this.itemDisabledArray[f]&&(c="disabled",p="w2radio_disabled"),f<e){u=this.options.escape?WebSquare.xml._encode(this.itemArr[f].label):this.itemArr[f].label;var b=this.options.useRadioTitle?" title='"+u+"' ":"";t.push("<td class='w2"+this.inputType+"_td_input'"+h+"><input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+i+"' index='"+f+"'  id='"+d+"'"+b+" "+c+a+"/></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+h+"><"+"label class='w2"+this.inputType+"_label "+p+"' index='"+f+"' for='"+d+"' >"+u+"</"+"label></td>")}else t.push("<td class='w2"+this.inputType+"_td_input'"+h+"></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+h+"></td>")}t.push("</tr>")}t.push("</table>"),t.push("</div>")}return t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw()),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}this.options.selectedIndex>-1&&(this.setSelectedIndexNM(this.options.selectedIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),
this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getAccessibiltyId=function(){try{return"native"==this.options.renderType?this.id:this.id+"_input_0"}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=this.getValue(),e=!1;0==this.getItemCount()&&this.options.selectedIndex>-1&&(e=!0),this.refreshItemArr(),this.itemDisabledArray=new Array;for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(this.options.disabled);this.componentRedraw(t),e&&(this.setSelectedIndexNM(this.options.selectedIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),this.options.enableColumn&&this.refreshEnable()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.componentRedraw=function(t){try{this.setTableCount(),this.redraw(),this.setValueNM(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndex=function(t){try{if(n.D.isNull(t))return;t=parseInt(t);var e=this.getSelectedIndex(),i="";this.modelControl.isBinded()?i=this.modelControl.getData():e>=0&&(i=this.itemArr[e].value),this.setSelectedIndexNM(t),this.modelControl.setData(this.itemArr[t].value),e!=this.getSelectedIndex()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()}),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndexNM=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;this.selectedIndex=t;var i=this.getRadioList()[t];return e=null==e||e,i.checked=e,!0}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValueNM=function(t){try{if(n.D.isNull(t))return;t=t.toString();for(var e=this.getItemCount(),i=!1,o=0;o<e;o++)this.itemArr[o].value==t?(this.setSelectedIndexNM(o,!0),i=!0):"reset"==this.options.inValidValue&&this.checkedRadio(o,!1);"reset"==this.options.inValidValue&&0==i&&(this.selectedIndex=-1)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.checkedRadio=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;var i=this.getRadioList()[t];return e=null==e||e,i.checked=e,!0}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInstanceValue=function(){try{var t=this.getValue();this.modelControl.setData(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setTableCount=function(){try{if(this.rowCount=this.itemArr.length,this.colCount=1,0!=this.options.rows){var t=this.options.rows;this.rowCount=t,this.colCount=Math.ceil(this.itemArr.length/t)}
if(0!=this.options.cols){var e=this.options.cols;this.colCount=e,this.rowCount=Math.ceil(this.itemArr.length/e)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getValue=function(){try{for(var t="",e=this.getRadioList(),i=0;i<e.length;i++)e[i].checked&&(t=this.itemArr[i].value);return t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getText=function(){try{for(var t="",e=this.getRadioList(),i=0;i<e.length;i++)e[i].checked&&(t=this.itemArr[i].label);return t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.addItem=function(t,e,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var o=this.getValue(),s={};s.value=t,s.label=e,this.itemArr.splice(i,0,s),this.itemDisabledArray.splice(i,0,!!this.options.disabled);for(var a=this.getRadioList(),n=[],l=0;l<a.length;l++)n.push(a[l].itemDisabled);n.splice(i,0,!1),this.componentRedraw(o);var h=this.getRadioList();for(l=0;l<h.length;l++)h[l].itemDisabled=n[l];return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.deleteItem=function(t){try{if(t=parseInt(t,10),isNaN(t))return;for(var e=this.getValue(),i=null,o=this.getRadioList(),s=[],a=0;a<o.length;a++)s.push(o[a].itemDisabled);t>=0&&t<this.getItemCount()&&(i=this.itemArr.splice(t,1)[0],this.itemDisabledArray.splice(t,1),s.splice(t,1)),this.componentRedraw(e);var n=this.getRadioList();for(a=0;a<n.length;a++)n[a].itemDisabled=s[a];return i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.removeAll=function(){try{this.itemArr=new Array,this.itemDisabledArray=new Array,this.componentRedraw("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"readOnly":for(var i=this.getRadioList(),o=0;o<i.length;o++)i[o].disabled=e;break;case"mandatory":1==e?this.addClass(this.render,"w2radio_mandatory"):this.removeClass(this.render,"w2radio_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getRadioList=function(){try{return"native"==this.options.renderType?[this.render]:this.getDomList("radioArr","input")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getLabelList=function(){try{return this.getDomList("labelArr","label")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.focus=function(){try{var t=this.getRadioList();-1!=this.selectedIndex?t[this.selectedIndex].focus():t[0].focus()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.click=function(t){try{this.getRadioList()[t].click()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.reset=function(){try{for(var t=this.getRadioList(),e=this.getValue(),i=0;i<t.length;i++)t[i].checked&&(t[i].checked=!1);this.selectedIndex=-1;var o=this.getValue();this.setInstanceValue(),e!=o&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:o})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t);for(var e=this.getRadioList(),i=this.getLabelList(),o=0;o<e.length;o++)e[o].itemDisabled||(t?e[o].setAttribute("disabled","disabled"):e[o].removeAttribute("disabled"),this.itemDisabledArray[o]=t,i[o]&&(t?this.addClass(i[o],"w2radio_disabled"):this.removeClass(i[o],"w2radio_disabled")));return this.options.disabled=t,t?this.render.setAttribute("disabled","disabled"):this.render.removeAttribute("disabled"),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setItemDisabled=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;e=n.D.getBoolean(e)
;var i=this.getRadioList(),o=this.getLabelList();i[t].disabled=e,i[t].itemDisabled=e,this.itemDisabledArray[t]=e,1==e?this.addClass(o[t],"w2radio_disabled"):this.removeClass(o[t],"w2radio_disabled")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getItemDisabled=function(t){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;return this.getRadioList()[t].disabled}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInitValue=function(t){try{for(var e=this.getValue(),i=this.getRadioList(),o=0;o<i.length;o++)i[o].checked&&(i[o].checked=!1);this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},u.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=n.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},u.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=n.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},u.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){r.w.printStackTrace(t)}},u.prototype.setNextTabID=function(t,e){try{null!=t&&n.D.setNextTabID(this.id,t,e)}catch(t){r.w.printStackTrace(t)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},u.prototype.handleClickEvent=function(t){try{this.setRefPosition();for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2"+this.inputType+"_input")){var i=e.getElement().getAttribute("index"),o=this.selectedIndex;if(this.getRadioList()[i].disabled)continue;this.setSelectedIndex(i),this.fireOnclick({type:"1",index:i,oldIndex:o})}if(e.match("w2"+this.inputType+"_label")&&!e.match("w2"+this.inputType+"_disabled")){i=e.getElement().getAttribute("index"),this.getRadioList();a.B.preventDefault(t);o=this.selectedIndex;this.setSelectedIndex(i),this.fireOnclick({type:"2",index:i,oldIndex:o})}}e=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{for(var e=a.B.getTarget(t);e&&(!e.firstChild||"LABEL"!=e.firstChild.tagName)&&!("radiogroup"===this.options.renderType&&e&&"DIV"===e.tagName&&e.className.indexOf("w2radio_item")>=0);)e=e.parentNode;if(e){var i;i="radiogroup"===this.options.renderType?e.getElementsByClassName("w2radio_label")[0]:e.firstChild;e.offsetWidth,e.offsetHeight;var o=WebSquare.style.getStyle(e,"text-overflow"),s=i.innerHTML;if(!0===this.options.tooltipShowAlways){var n=WebSquare.style.getAbsoluteLeft(i),l=WebSquare.style.getAbsoluteTop(i);if("function"==typeof this.tooltipFormatter){var h=parseInt(i.getAttribute("index"),10);s=this.tooltipFormatter(s,h)}this.showTooltip(n,l,s)}else if("ellipsis"==o){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=e.className,this.toolTipRuler.innerHTML=e.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(e,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(e,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(e,"font-weight");var d=this.toolTipRuler.firstChild.offsetWidth,u=e.clientWidth;if(3!=i.nodeType){
var c=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),p=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");d-=parseInt(c||"0",10),d-=parseInt(p||"0",10),u-=parseInt(WebSquare.style.getStyle(i,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(i,"padding-right"),10),u-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(u<d){n=WebSquare.style.getAbsoluteLeft(i),l=WebSquare.style.getAbsoluteTop(i);if(document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel)s=this.options.tooltipItemLabel;else if("function"==typeof this.tooltipFormatter){h=parseInt(i.getAttribute("index"),10);s=this.tooltipFormatter(s,h)}this.showTooltip(n,l,s)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),!0!==this.options.tooltipDisplay&&!0!==this.options.tooltipShowAlways||this.hideTooltip()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null),this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){var o=document.body.scrollWidth;this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2radio_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i;var s=Math.max(e-(this.tooltip.render.offsetHeight+3),0);if(this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",s+"px"),document.body.scrollWidth>o){var r=t-(document.body.scrollWidth-o);r<0&&(r=0),this.tooltip.setStyle("left",r+"px")}})),100*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{9==(t.charCode?t.charCode:t.keyCode)&&(this.tabOrderMoveStart=!1,t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.fireOnchange=function(){try{a.B.fireEvent(this,"onchange")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.fireOnclick=function(t){try{if(!t)return;var e=t.type||"1",i=t.index,o=this.getValue(),s=t.oldIndex;this.focus(),"1"===e?a.B.fireEvent(this,"onradioclick",i,o):"2"===e&&a.B.fireEvent(this,"onlabelclick",i,o),i!=s&&a.B.fireEvent(this,"onviewchange",{index:i,value:o})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshVisible=function(){try{if(!this.render)return;this._refreshVisible(this.render.getElementsByTagName("input")),
"radiogroup"!==this.options.renderType.toLowerCase()&&this._refreshVisible(this.render.getElementsByTagName("label"))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._refreshVisible=function(t){try{for(var e=0;e<t.length;e++){var i=parseInt(t[e].getAttribute("index"),10);this.itemArr[i]&&!0===this.itemArr[i]._hidden?t[i].parentNode.style.display="none":t[i].parentNode.style.display=""}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshEnable=function(){try{for(var t=this.getItemCount(),e=0;e<t;e++)this.itemArr[e]&&!0===this.itemArr[e]._disabled?this.setItemDisabled(e,!0):this.setItemDisabled(e,!1)}catch(t){r.w.printStackTrace(t,null,this)}}},183:function(t,e,i){"use strict";i.r(e),i.d(e,{scrollView:function(){return d}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=i(4748),d=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(d.prototype,l.s.prototype),o.x.extend(d.prototype,h.g.prototype),d.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.scrollView",pluginName:"scrollView",userEvents:["onscroll","onscrollbottom"],parseChild:!0,verticalScroll:!0,horizontalScroll:!1,bounce:!0,paging:!1,showVerticalScroll:!0,showHorizontalScroll:!0,slideDuration:1200,resilienceDuration:500,pagingDuration:300,slidePeriod:15,scrollTop:0,scrollLeft:0,scrollType:"mobile",resizeAutoScroll:!1,css3d:!1,fadeOutScrollBar:!0,eventSmoothing:!0,overScrollGlow:!1,dragScrollSize:50,slideThreshold:5,useStylus:!1},d.prototype.initialize=function(t){this.isMobile=n.D.isMobile(),this.isAndroid=/android/.test(navigator.userAgent.toLowerCase()),this.transformArr=["-webkit-transform",":","translate3d(",,"px, ",,"px, 0px) scale(1)"],this.support3D="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,this.fingerTop=0,this.fingerLeft=0,this.scrollLock=!1,this.measureDrawTime=!1,WebSquare.dragdrop2.scrollable[this.uuid]={scroll:!1}},d.prototype.toHTML=function(){try{var t=[],e=this.getChildren(),i=this.options.className,o="",s=""==this.options.style?"":"style='"+this.options.style+"'",a=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";this.isMobile||"auto"!=this.options.scrollType?"accessibility"==this.options.scrollType?i+=" nativeScroll":o=" style='width: 100%;height: 100%;overflow: hidden'":i+=" nativeScroll",t.push("<div id='"+this.id+"' "+s+" class='w2scrollView "+i+"' "+a+">"),t.push("<div id='"+this.id+"_container' class='w2scrollView_container'"+o+">");for(var n=0;n<e.length;n++)t.push(e[n].toHTML());return t.push("</div>"),t.push("<div id='"+this.id+"_iScrollX' class='w2scrollView_iScrollX' style='visibility:hidden;left:0px;'></div>"),t.push("<div id='"+this.id+"_iScrollY' class='w2scrollView_iScrollY' style='visibility:hidden;top:0px;'></div>"),t.push("<div id='"+this.id+"_overScrollTop' class='w2scrollView_overScrollTop' style='display:none;top:0px;'></div>"),t.push("<div id='"+this.id+"_overScrollBottom' class='w2scrollView_overScrollBottom' style='display:none;bottom:0px;'></div>"),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setAction=function(){this.dom.container=this.getElementById(this.id+"_container"),this.dom.iScrollX=this.getElementById(this.id+"_iScrollX"),this.dom.iScrollY=this.getElementById(this.id+"_iScrollY"),this.dom.overScrollTop=this.getElementById(this.id+"_overScrollTop"),this.dom.overScrollBottom=this.getElementById(this.id+"_overScrollBottom"),this.iScroll={prevTouches:[]},this.isMobile?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTouchEnd))):"auto"!=this.options.scrollType&&"accessibility"!=this.options.scrollType&&(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleTouchStart)),
this.event.addListener(document.documentElement,"onmousemove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.handleTouchEnd)),this.event.addListener(document.documentElement,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOut)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,(function(t){a.B.preventDefault(t)})))),this.iScrollXHeight=parseInt(1.5*this.dom.iScrollX.offsetHeight,10),this.iScrollYWidth=parseInt(1.5*this.dom.iScrollY.offsetWidth,10),this.checkResize(),this._scrollTo(this.options.scrollLeft,this.options.scrollTop),this.measureDrawTime=!0},d.prototype.setIScroll=function(){try{if(this.options.verticalScroll&&this.options.showVerticalScroll){var t=this.render.clientHeight,e=this.dom.container.scrollHeight;if(e>t){this.options.horizontalScroll&&(t-=this.iScrollXHeight);var i=this.getMaxScrollTop(),o=parseInt(t*t/e,10);o=o<30?30:o;var s=parseInt(this.getScrollTop()*(t-o)/i,10);s<0?(o+=s,s=0):s+o>=t&&(o=t-s),this.options.css3d&&this.support3D?(this.transformArr[3]=0,this.transformArr[5]=s,this.dom.iScrollY.style[this.transformArr[0]]=this.transformArr.slice(2).join("")):this.dom.iScrollY.style.top=s+"px",this.dom.iScrollY.style.height=o+"px",this.dom.iScrollY.style.visibility="visible"}else this.dom.iScrollY.style.visibility="hidden"}if(this.options.horizontalScroll&&this.options.showHorizontalScroll){var a=this.render.clientWidth,n=this.dom.container.scrollWidth;if(n>a){this.options.verticalScroll&&(a-=this.iScrollYWidth);var l=this.getMaxScrollLeft(),h=parseInt(a*a/n,10);h=h<30?30:h;var d=parseInt(this.getScrollLeft()*(a-h)/l,10);d<0?(h+=d,d=0):d+h>=a&&(h=a-d),this.options.css3d&&this.support3D?(this.transformArr[3]=d,this.transformArr[5]=0,this.dom.iScrollX.style[this.transformArr[0]]=this.transformArr.slice(2).join("")):this.dom.iScrollX.style.left=d+"px",this.dom.iScrollX.style.width=h+"px",this.dom.iScrollX.style.visibility="visible"}else this.dom.iScrollX.style.visibility="hidden"}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.checkResize=function(){try{var t=this.render.clientHeight,e=this.render.clientWidth,i=this.dom.container.scrollHeight,o=this.dom.container.scrollWidth;if(!this.sizeBackup||this.sizeBackup.renderWidth!=e||this.sizeBackup.renderHeight!=t||this.sizeBackup.scrollWidth!=o||this.sizeBackup.scrollHeight!=i){this.sizeBackup={renderWidth:e,renderHeight:t,scrollWidth:o,scrollHeight:i};var a=parseInt(this.dom.container.style.top||0,10);this.isSliding&&a&&(this.stopSlide(),this._scrollTo(null,this.dom.container.scrollTop-a));var n=this.getScrollLeft(),l=this.getScrollTop(),h=this.getMaxScrollLeft(),d=this.getMaxScrollTop();if(this.options.resizeAutoScroll&&this.sizeBackup){for(var u=document.activeElement,c=u;(c=c.parentNode)&&c!=this.render;);if(c){var p=WebSquare.style.getAbsoluteTop(u),g=WebSquare.style.getAbsoluteTop(this.render),m=l;p<g?m-=g-p:p+u.offsetHeight>g+t&&(m+=p+u.offsetHeight-(g+t)),m!==l&&m>=0&&m<=d&&this._scrollTo(null,m)}}(n>h||l>d)&&(this.stopSlide(),this._scrollTo(n<h?n:h,l<d?l:d)),this.setIScroll()}s.v.setTimer(this.checkResize,{key:this.id+"_checkResize",caller:this,delay:100})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.iScrollAddMoveClass=function(){this.options.fadeOutScrollBar&&(s.v.clearTimer(this.id+"_iScrollRemoveClass"),WebSquare.style.setStyle(this.dom.iScrollX,"opacity","1"),WebSquare.style.setStyle(this.dom.iScrollY,"opacity","1")),this.__addClass(this.dom.iScrollX,"w2scrollView_iScrollX_move"),this.__addClass(this.dom.iScrollY,"w2scrollView_iScrollY_move")},d.prototype.iScrollRemoveMoveClass=function(){this.options.fadeOutScrollBar?WebSquare.style.animate([this.dom.iScrollX,this.dom.iScrollY],{opacity:0},{key:this.id+"_iScrollRemoveClass",duration:500,easing:"ease-out",caller:this,complete:function(){this.__removeClass(this.dom.iScrollX,"w2scrollView_iScrollX_move"),
this.__removeClass(this.dom.iScrollY,"w2scrollView_iScrollY_move")}}):(this.__removeClass(this.dom.iScrollX,"w2scrollView_iScrollX_move"),this.__removeClass(this.dom.iScrollY,"w2scrollView_iScrollY_move"))},d.prototype.scrollTo=function(t,e,i){this.stopSlide(),(i=i||{}).duration=null==i.duration?500:i.duration,i.timingFunction=i.timingFunction||"ease",this.options.horizontalScroll&&"number"==typeof t&&(i.initX=this.getScrollLeft(),i.finishX=t),this.options.verticalScroll&&"number"==typeof e&&(i.initY=this.getScrollTop(),i.finishY=e),this.iScroll.prevTouches=[],this.isSliding=!0,this.setIScroll(),this.iScrollAddMoveClass();var o=i.delay||0;o<=0?this.slide(i):s.v.setTimer(this.slide,{key:this.id+"_iScroll_slide",caller:this,delay:o,args:[i]})},d.prototype._scrollTo=function(t,e){this.measureDrawTime&&s.v.measureTime((function(t){this.options.slidePeriod=parseInt(t.aver,10)}),{key:this.id+"_measureDrawTime",caller:this});t=parseInt(t,10),e=parseInt(e,10);var i=this.getScrollLeft(),o=this.getScrollTop(),r=this.getMaxScrollLeft(),n=this.getMaxScrollTop();if(t=isNaN(t)?i:t,e=isNaN(e)?o:e,t!=i||e!=o){if(WebSquare.getBody().getLayerListener().hideAll(),this.options.css3d&&this.support3D)this.transformArr[3]=-t,this.transformArr[5]=-e,this.dom.container.style.cssText=this.transformArr.join("");else{var l=t,h=0,d=e,u=0;t<0?(l=0,h=-t):r<t&&(l=r,h=-(t-r)),e<0?(d=0,u=-e):n<e&&(d=n,u=-(e-n)),this.dom.container.scrollLeft=l,this.dom.container.scrollTop=d,this.dom.container.style.left=h+"px",this.dom.container.style.top=u+"px"}this.options.scrollLeft=t,this.options.scrollTop=e,this.setIScroll(),a.B.fireEvent(this,"onscroll",t,e),!this.scrollBottom&&e>=n&&(this.scrollBottom=!0,a.B.fireEvent(this,"onscrollbottom"))}},d.prototype.scrollBy=function(t,e,i){this.stopSlide(!0);t=t||0,e=e||0;var o=this.getScrollLeft(),s=this.getScrollTop();this.scrollTo(o+t,s+e,i)},d.prototype.resetScrollBottom=function(){this.scrollBottom=!1},d.prototype.slide=function(t){try{s.v.clearTimer(this.id+"_iScroll_slide");var e=this.render.clientWidth,i=this.render.clientHeight,o=this.getScrollTop(),a=this.getScrollLeft(),n=this.getMaxScrollTop(),l=this.getMaxScrollLeft();null==t.endTime&&(t.endTime=(new Date).getTime()+t.duration),null==t.slidePeriod&&(t.slidePeriod=this.options.slidePeriod);var h=null==t.initX?a:t.initX,d=null==t.initY?o:t.initY,u=null==t.finishX?a:t.finishX,c=null==t.finishY?o:t.finishY,p=t.duration,g=(new Date).getTime()-(t.endTime-p);this.forceToStopSlide&&(g=p),h<0&&2*h<u&&u<0&&(u=0),d<0&&2*d<c&&c<0&&(c=0),h>l&&l<u&&u<2*h-l&&(u=l),d>n&&n<c&&c<2*d-n&&(c=n);var m=WebSquare.style.cubicBezierAtTime(g/p,t.timingFunction,p/1e3),f=h+(u-h)*m,b=d+(c-d)*m;if(this.options.bounce)!t.xResilience&&(f<0&&u<0||l<f&&l<u)&&(t.xResilience=!0,f<-e/2&&(f=-e/2),f>l+e/2&&(f=l+e/2),u<-e?(h=f,u=-e):u>l+e&&(h=f,u=l+e),u<0?t.turningPointX=u/2:u>l&&(t.turningPointX=l+(u-l)/2)),!t.yResilience&&(b<0&&c<0||n<b&&n<c)&&(t.yResilience=!0,b<-i/2&&(b=-i/2),b>n+i/2&&(b=n+i/2),c<-i?(d=b,c=-i):c>n+i&&(d=b,c=n+e),t.turningPointY=c<0?c/2:n+(c-n)/2),t.xResilience&&(f<t.turningPointX&&u<0||f>t.turningPointX&&u>0)&&(f=-f+2*t.turningPointX),t.yResilience&&(b<t.turningPointY&&c<0||b>t.turningPointY&&c>0)&&(b=-b+2*t.turningPointY);else{f<0&&(f=0),f>l&&(f=l),b<0&&(b=0),b>n&&(b=n);var y=u==f||u<=0&&f<=0||u>=l&&f>=l,v=c==b||c<=0&&b<=0||c>=n&&b>=n,w=this.options.horizontalScroll,S=this.options.verticalScroll;(w&&S&&y&&v||w&&!S&&y||!w&&S&&v)&&(g=p)}if(t.initX=h,t.initY=d,t.finishX=u,t.finishY=c,g>=p){f=t.finishX,b=t.finishY,f<0&&(f=0),f>l&&(f=l),b<0&&(b=0),b>n&&(b=n),this._scrollTo(f,b),this.stopSlide();var C=!0;("none"!=this.dom.overScrollTop.style.display&&this.dom.overScrollTop.offsetTop>=-this.dom.overScrollTop.offsetHeight||"none"!=this.dom.overScrollBottom.style.display&&this.dom.overScrollBottom.offsetTop<this.render.clientHeight)&&(C=!1),this.hideOverScrollGlow(C)}else this._scrollTo(f,b),s.v.setTimer(this.slide,{key:this.id+"_iScroll_slide",caller:this,delay:t.slidePeriod,args:[t]})
}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.stopSlide=function(t){try{this.isSliding&&(this.isSliding=!1,this.forceToStopSlide=t,s.v.clearTimer(this.id+"_iScroll_slide",t),this.forceToStopSlide=null,this.iScrollRemoveMoveClass())}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getSlideFactor=function(t,e){var i=this.isMobile?.3:1;return parseInt(i*t/100*e,10)},d.prototype.hideOverScrollGlow=function(t){if(!this.options.bounce&&this.options.overScrollGlow){var e=this,i=this.getScrollTop();t?0==i?(WebSquare.style.show(this.dom.overScrollTop),WebSquare.style.setStyle(this.dom.overScrollTop,"top",-this.dom.overScrollTop.offsetHeight+"px"),WebSquare.style.animate(this.dom.overScrollTop,{top:0},{key:this.id+"_hideOverScrollGlowWithGlow",easing:"ease-in",duration:300,complete:function(){e.hideOverScrollGlow()}})):i==this.getMaxScrollTop()&&(WebSquare.style.show(this.dom.overScrollBottom),WebSquare.style.setStyle(this.dom.overScrollBottom,"bottom",-this.dom.overScrollBottom.offsetHeight+"px"),WebSquare.style.animate(this.dom.overScrollBottom,{bottom:0},{key:this.id+"_hideOverScrollGlowWithGlow",easing:"ease-in",duration:300,complete:function(){e.hideOverScrollGlow()}})):"none"!=this.dom.overScrollTop.style.display&&this.dom.overScrollTop.offsetTop>=-this.dom.overScrollTop.offsetHeight?WebSquare.style.animate(this.dom.overScrollTop,{top:-this.dom.overScrollTop.offsetHeight},{key:this.id+"_hideOverScrollGlow",easing:"ease-out",duration:300,complete:function(){WebSquare.style.hide(e.dom.overScrollTop)}}):"none"!=this.dom.overScrollBottom.style.display&&this.dom.overScrollBottom.offsetTop<this.render.clientHeight&&WebSquare.style.animate(this.dom.overScrollBottom,{bottom:-this.dom.overScrollBottom.offsetHeight},{key:this.id+"_hideOverScrollGlow",easing:"ease-out",duration:300,complete:function(){WebSquare.style.hide(e.dom.overScrollBottom)}})}},d.prototype.setScrollLock=function(t){this.scrollLock=!!t},d.prototype.getContentSize=function(t){try{var e=this.dom.container.scrollWidth,i=this.dom.container.scrollHeight;if(!t)return{width:e,height:i};if("height"==(t=t.toLowerCase()))return i;if("width"==t)return e;$l("getContentSize : wrong sizeName["+t+"]["+this.id+"]")}catch(t){r.w.printStackTrace(t)}},d.prototype.getMaxScrollTop=function(){var t=this.dom.container.scrollHeight-this.render.clientHeight;return t>=0?t:0},d.prototype.getMaxScrollLeft=function(){var t=this.dom.container.scrollWidth-this.render.clientWidth;return t>=0?t:0},d.prototype.getScrollTop=function(){try{if(this.options.css3d&&this.support3D)return this.options.scrollTop;var t=this.dom.container.scrollTop;return 0!=t&&t!=this.getMaxScrollTop()||(t-=parseInt(this.dom.container.style.top||0,10)),this.options.scrollTop=t,t}catch(t){r.w.printStackTrace(t)}},d.prototype.getScrollLeft=function(){try{if(this.options.css3d&&this.support3D)return this.options.scrollLeft;var t=this.dom.container.scrollLeft;return 0!=t&&t!=this.getMaxScrollLeft()||(t-=parseInt(this.dom.container.style.left||0,10)),this.options.scrollLeft=t,t}catch(t){r.w.printStackTrace(t)}},d.prototype.handleTouchStart=function(t){try{if(this.isTouched=!0,this.options.useStylus=t.touches&&t.touches[0].touchType&&t.touches[0].force>0?"stylus"===t.touches[0].touchType:this.options.useStylus||/iPad/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!window.MSStream,a.B.stopPropagation(t),this.stopSlide(),!t.touches||1==t.touches.length){this.setIScroll(),this.iScrollAddMoveClass(),this.iScroll.prevTouches=[{x:t.touches?t.touches[0].pageX:t.clientX,y:t.touches?t.touches[0].pageY:t.clientY}],this.distX=0,this.distY=0;var e=t.touches?t.touches[0]:t;this.pointX=e.pageX,this.pointY=e.pageY,this.iScroll.direction="",this.options.horizontalScroll&&!this.options.verticalScroll?this.iScroll.direction="horizontal":!this.options.horizontalScroll&&this.options.verticalScroll&&(this.iScroll.direction="vertical"),this.fingerLeft=this.getScrollLeft(),
this.fingerTop=this.getScrollTop()}}catch(t){r.w.printStackTrace(t)}},d.prototype.handleTouchMove=function(t){try{if(!t.touches||1==t.touches.length){var e=t.touches?t.touches[0]:t,i=e.pageX-this.pointX,o=e.pageY-this.pointY;this.pointX=e.pageX,this.pointY=e.pageY,this.distX+=i,this.distY+=o,this.options.eventSmoothing?s.v.setTimer(this._handleTouchMove,{key:this.id+"_handleTouchMove",caller:this,args:[{clientX:t.touches?t.touches[0].pageX:t.clientX,clientY:t.touches?t.touches[0].pageY:t.clientY}],delay:1,max:1}):this._handleTouchMove(t),(this.options.useStylus&&Math.abs(this.distX)>6||Math.abs(this.distY)>6)&&a.B.stopEvent(t)}}catch(t){r.w.printStackTrace(t)}},d.prototype._handleTouchMove=function(t){try{if(this.scrollLock||this.iScroll.prevTouches.length<=0)return;this.iScroll.prevTouches.push({x:t.touches?t.touches[0].pageX:t.clientX,y:t.touches?t.touches[0].pageY:t.clientY});var e=this.iScroll.prevTouches.length;this.iScroll.prevTouches=[this.iScroll.prevTouches[e-2],this.iScroll.prevTouches[e-1]];var i=this.iScroll.prevTouches,o=this.options.horizontalScroll?i[0].x-i[1].x:0,s=this.options.verticalScroll?i[0].y-i[1].y:0,a=this.render.clientWidth,n=this.render.clientHeight,l=this.getScrollTop(),h=this.getScrollLeft(),d=this.getMaxScrollTop(),u=this.getMaxScrollLeft();if(this.options.horizontalScroll&&this.options.verticalScroll&&!this.iScroll.direction){var c=Math.abs(s/o);(0==o||0==s)&&Math.abs(o+s)<=2?this.iScroll.direction="":this.iScroll.direction=0==o||c>2.747?"vertical":c<.364?"horizontal":"both"}if("vertical"==this.iScroll.direction?(o=0,h<0?(this._scrollTo(0,null),h=this.fingerLeft=0):h>u&&(this._scrollTo(u,null),h=this.fingerLeft=u)):"horizontal"==this.iScroll.direction&&(s=0,l<0?(this._scrollTo(null,0),l=this.fingerTop=0):l>d&&(this._scrollTo(null,d),l=this.fingerTop=d)),this.options.bounce||this.options.overScrollGlow||(0<=h&&h<=u&&(this.fingerLeft=h),0<=l&&l<=d&&(this.fingerTop=l)),h=this.fingerLeft+=o,l=this.fingerTop+=s,this.options.bounce)h<0?(h/=2)<-a/2&&(h=-a/2):h>u&&(h=u+(h-u)/2)>u+a/2&&(h=u+a/2),l<0?(l/=2)<-n/2&&(l=-n/2):l>d&&(l=d+(l-d)/2)>d+n/2&&(l=d+n/2);else if(h<0&&(h=0),h>u&&(h=u),l<0&&(l=0),l>d&&(l=d),this.options.overScrollGlow){if(this.fingerTop<0){WebSquare.style.show(this.dom.overScrollTop);var p=-2*(g=this.dom.overScrollTop.offsetHeight)/n*this.fingerTop-g;p>0&&(p=0),WebSquare.style.setStyle(this.dom.overScrollTop,"top",p+"px")}else WebSquare.style.hide(this.dom.overScrollTop);if(this.fingerTop>d){WebSquare.style.show(this.dom.overScrollBottom);var g,m=-2*(g=this.dom.overScrollBottom.offsetHeight)/n*(d-this.fingerTop)-g;m>0&&(m=0),WebSquare.style.setStyle(this.dom.overScrollBottom,"bottom",m+"px")}else WebSquare.style.hide(this.dom.overScrollBottom)}this._scrollTo(h,l)}catch(t){r.w.printStackTrace(t)}},d.prototype.handleTouchEnd=function(t){try{this.isTouched=!1;var e=this.iScroll.prevTouches.length;if(a.B.stopPropagation(t),0==e)return;var i=this.render.clientWidth,o=this.render.clientHeight,s=this.dom.container.scrollWidth,n=this.dom.container.scrollHeight,l=this.getMaxScrollLeft(),h=this.getMaxScrollTop(),d=this.getScrollLeft(),u=this.getScrollTop(),c=null,p=null,g=null,m=null;if(e>=2){this.iScroll.prevTouches=[this.iScroll.prevTouches[e-2],this.iScroll.prevTouches[e-1]];var f=this.iScroll.prevTouches,b=f[0].x-f[1].x,y=f[0].y-f[1].y;if("vertical"==this.iScroll.direction&&(b=0),"horizontal"==this.iScroll.direction&&(y=0),b*b+y*y>this.options.slideThreshold*this.options.slideThreshold){if(this.iScroll.prevTouches=[],this.isSliding=!0,this.options.paging){if(this.options.horizontalScroll)(c=(parseInt(d/i,10)+(b>0?1:0))*i)<0&&(c=0),c>l&&(c=l);if(this.options.verticalScroll)(p=(parseInt(u/o,10)+(y>0?1:0))*o)<0&&(p=0),p>h&&(p=h);g=this.options.pagingDuration,m="ease"}else c=d+this.getSlideFactor(b,s),p=u+this.getSlideFactor(y,n),g=this.options.slideDuration,m="deceleration";return this.slide({initX:d,initY:u,finishX:this.options.horizontalScroll?c:null,finishY:this.options.verticalScroll?p:null,
duration:g,timingFunction:m}),void(!this.options.bounce&&this.options.overScrollGlow&&(0==u&&p>0||u==h&&p<h)&&this.hideOverScrollGlow())}}if(this.options.paging){if(this.options.horizontalScroll&&!this.options.verticalScroll)c=parseInt((d+i/2)/i,10)*i;else if(!this.options.horizontalScroll&&this.options.verticalScroll){p=parseInt((u+o/2)/o,10)*o}g=this.options.pagingDuration}else g=this.options.resilienceDuration;d<0?c=0:l<d&&(c=l),u<0?p=0:h<u&&(p=h),null!=c||null!=p?(this.iScroll.prevTouches=[],this.isSliding=!0,this.slide({initX:d,initY:u,finishX:c,finishY:p,xResilience:null!=c,yResilience:null!=p,duration:g,timingFunction:"deceleration"})):(this.iScrollRemoveMoveClass(),this.iScroll.prevTouches=[]),this.hideOverScrollGlow()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleMouseOut=function(t){null==a.B.getRelatedTarget(t)&&this.handleTouchEnd(t)},d.prototype.finalize=function(){s.v.clearTimer(this.id+"_checkResize"),s.v.clearTimer(this.id+"_iScroll_slide"),s.v.clearTimer(this.id+"_handleTouchMove"),s.v.clearTimer(this.id+"_hideOverScrollGlowWithGlow"),s.v.clearTimer(this.id+"_hideOverScrollGlow"),s.v.clearTimer(this.id+"_iScrollRemoveClass"),WebSquare.dragdrop2.scrollable[this.uuid]=null,delete WebSquare.dragdrop2.scrollable[this.uuid]}},8510:function(t,e,i){"use strict";i.r(e),i.d(e,{selectbox:function(){return u},selectbox_native:function(){return c}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=i(5373),d=i(2117),u=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(u.prototype,l.s.prototype),o.x.extend(u.prototype,h.E.prototype),o.x.extend(u.prototype,d.z.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.selectbox",pluginName:"selectbox",renderType:"component",mobileRenderType:"",serializable:!0,userEvents:["onchange","onclose","onviewchange","onblur","ontooltipshow","ontooltiphide","onselected"],systemEvents:["onclick","ondblclick","onfocus","onblur","onkeydown","onkeyup"],useOtherComponentId:"",useConfig:!0,value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,displayMode:"0",delimiter:"\t",textAlign:"",defaultStyle:"",activeStyle:"",defaultClass:"w2SelectDefault",activeClass:"w2SelectActive",disabledClass:"w2selectbox_disabled",useLocale:!1,submenuSize:"auto",direction:"auto",tableRender:"",tooltipDisplay:!1,tooltipShowAlways:!1,tooltipClass:"",tooltipTime:1,tooltipDisplayItem:!1,itemTooltipDisplay:!1,itemTooltipFormatter:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",title:"",setDataRemoveAll:!0,escape:!0,emptyItem:!1,emptyValue:"",emptyIndex:0,optionOrder:"choose",animation:"",closeonmouseleave:!1,selectedData:!0,dataListAutoRefresh:!1,refreshSelectedIndex:!1,preventWheelEvent:!1,customFormatter:"",customLabelFormatter:"",keyMoveListSync:!1,keyMoveSync:!0,wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",findItemFirstKey:!0,enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",keyBufferResetTime:1e3,customToggleKey:"",preventKeyList:"",valueNotInList:"default"},u.prototype.initialize=function(t){try{if(this._initializeCommon(t&&"$blank"==t.getAttribute("chooseOptionLabel")),this.gridOptions={},this.gridViewOptions={},t){var e="xf"==t.getTagName().split(":")[0]?s.v._XML_NAMESPACE.XFORMS:s.v._XML_NAMESPACE.W2,i=WebSquare.Elem.api.getElementsByTagName(t,"choices",e)[0];if(i){var o=WebSquare.Elem.api.getElementsByTagName(i,"gridItemset",s.v._XML_NAMESPACE.W2)[0];null==o&&(o=WebSquare.Elem.api.getElementsByTagName(i,"gridViewItemset",s.v._XML_NAMESPACE.W2)[0]),o&&"w2:gridItemset"==o.getTagName()?this.itemTableMode="grid":o&&"w2:gridViewItemset"==o.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView")}
"grid"==this.itemTableMode?this.initializeGridItemArr(t):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(t):this.initializeItemArr(t);var a=n.D.isMobile();if("ul"!==this.options.tableRender||"auto"==this.options.renderType&&a||(this.options.renderType="component"),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.myhelper=new WebSquare.korHelper,this._preventKeyObj={},this.options.preventKeyList)if("all"===this.options.preventKeyList)this._preventKeyObj.all=!0;else for(var l=this.options.preventKeyList.split(","),h=0;h<l.length;h++){var d=l[h].wq_trim();d&&(this._preventKeyObj[d]=!0)}this.options.itemTooltipDisplay=this.options.tooltipDisplayItem?this.options.tooltipDisplayItem:this.options.itemTooltipDisplay,this.options.itemTooltipDisplay&&this.options.itemTooltipFormatter&&(this.itemTooltipFormatter=n.D.getGlobalFunction(this.options.itemTooltipFormatter,this.scope_id))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._initializeCommon=function(t){try{this.itemTable=null,this.isOpen=!1,this.statusSubLayer=!1,this.selectedIndex=-1,this.selectedAllIndex=-1,this.cursorIndex=-1,this.showRowIndex=0,this.displayCount=0,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.defaultAllOptionLabel=WebSquare.language.getMessage("SelectBox_all");var e=s.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/chooseOptionLabel/@value");this.defaultChooseOptionLabel=t||!t&&"$blank"===e?"":WebSquare.language.getMessage("SelectBox_choose"),this._initDisplayMode(),this.options.selectedData="false"!=this.options.selectedData&&!1!==this.options.selectedData,this.refreshStop=!1,this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.isFireTooltipEvent=!1,this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"ㅁ",67:"ㅊ",68:"ㅇ",69:"ㄷ",70:"ㄹ",71:"ㅎ",81:"ㅂ",82:"ㄱ",83:"ㄴ",84:"ㅅ",86:"ㅍ",87:"ㅈ",88:"ㅌ",90:"ㅋ"},this.korCharHash2={69:"ㄸ",81:"ㅃ",82:"ㄲ",84:"ㅆ",87:"ㅉ"}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.finalize=function(){try{l.s.prototype.finalize.call(this),this.labelRuler&&(this.labelRuler.parentNode.removeChild(this.labelRuler),this.labelRuler=null),this.itemTable&&(this.itemTable.remove(),this.itemTable=null)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i="";i=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'";var o=""==this.options.title?"":"title='"+this.options.title+"'",s=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'",a=""==this.options.textAlign?s:"style='text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'";return"ul"===this.options.tableRender?(t.push("<div id='"+this.id+"' "+e+" class='w2selectbox "+this.options.className+"' "+o+" role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='none'>"),t.push("<a id='"+this.id+"_main_tbody' class='w2selectbox_ul_table_main' href='#"+this.id+"_itemTable' onclick='event.returnValue=false; return false;'>"),t.push("<div class='w2selectbox_ul_col_label' "+s+"><span id='"+this.id+"_label' role='document' aria-live='assertive' aria-automatic='true' class='w2selectbox_ul_label' "+a+"></span></div>"),t.push("<span class='w2selectbox_ul_col_arrow'></span>"),t.push("</a>"),
t.push("</div>")):(t.push("<div id='"+this.id+"' role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='none' "+e+" class='w2selectbox "+this.options.className+"' "+i+" "+o+">"),t.push("<table class='w2selectbox_table_main'>"),t.push("<tbody id='"+this.id+"_main_tbody'>"),t.push("<tr class='w2selectbox_row w2selectbox_row_main'>"),t.push("<td class='w2selectbox_col_label' "+s+"><div id='"+this.id+"_label' role='document' aria-live='assertive' aria-automatic='true' class='w2selectbox_label' "+a+"></div></td>"),t.push("<td class='w2selectbox_col_button' id='"+this.id+"_button'  aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>"),t.push("</tr></tbody>"),t.push("</table>"),t.push("</div>")),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setPreAction=function(){try{this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),this.dom.tbody=this.getElementById(this.id+"_main_tbody"),this.options.useOtherComponentId?s.v.setTimer((function(){this.otherComponent=n.D.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(t){a.B.stopPropagation(t)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),n.D.isMobile()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,(function(t){this._closeSubLayer()})))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopPropagation(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),this.modelControl.isItemsetBinded()?(this.refreshItemArr(),this.componentRedraw()):!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength()}catch(t){r.w.printStackTrace(t,null,this)}},
u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.modelControl.isBinded()){var i=this.modelControl.getData();this.setValueNM(i)}if(-1==this.selectedIndex&&this.getItemCount()>0&&(0==this.options.emptyIndex||!this.options.emptyIndex))if(this.modelControl.isBinded()){i=this.getValue();if(this.options.emptyRef){for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value==i){this.setSelectedIndexNM(0),this.modelControl.setData(i);break}}else this.setSelectedIndexNM(0),this.modelControl.setData(i)}else this.setSelectedIndexNM(0),this.broadcast({linkedDataList:["refresh",["replace"]]});else this.options.emptyIndex&&"number"==typeof this.options.emptyIndex?this.modelControl.isBinded()?(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(this.options.emptyIndex),this.broadcast({linkedDataList:["refresh",["replace"]]})):this.selectedIndex>0&&this.getItemCount()>0&&(this.modelControl.isBinded()||(this.setSelectedIndexNM(this.selectedIndex),this.broadcast({linkedDataList:["refresh",["replace"]]})));this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.onComplete=function(){try{this.options.customFormatter&&this.customFormatter(),l.s.prototype.onComplete.call(this)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.customFormatter=function(){try{var t=null;"grid"===this.itemTableMode||"gridView"===this.itemTableMode||("function"==typeof this.options.customFormatter?t=this.options.customFormatter:null!=(t=n.D.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=t),"function"==typeof t&&(this.modelControl.isBinded()&&!this.modelControl.isDataCollectionItemsetBinded&&this.refreshItemArr(),this.itemArr=t.call(this,this.itemArr),this.componentRedraw()))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refreshItemset=function(t,e){try{if(this.refreshStop)return;if(this.modelControl.isItemsetBinded())if(this.refreshItemArr(),this.componentRedraw(!1,t,e),"grid"==this.itemTableMode?(this.refreshGridItemArr(),null!=this.itemTable&&null!=this.itemTable.grid?(this.itemTable.grid.clearFilter(),this.setGridData(),this.options.allOption&&this.gridItemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr))):1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr))):"gridView"==this.itemTableMode&&(this.refreshGridViewItemArr(),null!=this.itemTable&&null!=this.itemTable.gridView?"dataList"===this.gridViewOptions.dataComp.initializeType&&this.setGridViewData():1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr))),this.modelControl.isBinded())this.refresh();else{if(this.options.customFormatter&&this.customFormatter(),"auto"==this.options.submenuSize&&this.itemTable&&"grid"!==this.itemTableMode&&"gridView"!==this.itemTableMode&&!0!==this.refreshStopItemTable){var i=this.getMaxLabelSize();this.itemTable.setStyle("width",i+"px")}-1!=this.getSelectedIndex()||null!=this.getValue()&&""!==this.getValue()&&"keepValue"!==this.options.valueNotInList||this.setSelectedIndexNM(0)}this.isOpen&&this.setItemTable(),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.refresh=function(){try{if(this.refreshStop)return;if(this.modelControl.isBinded()){var t=this.modelControl.getDataComp(),e=this.getItemCount()
;if(t&&"linkedDataList"===t.initializeType&&(this.options.chooseOption||this.options.allOption)&&(1!=e||this.itemArr[0].label!==this._getChooseOptionLabel()&&this.itemArr[0].label!==this.defaultAllOptionLabel?2==e&&this.itemArr[0].label===this._getChooseOptionLabel()&&this.itemArr[1].label===this.defaultAllOptionLabel&&(e-=2):e--),e>0){this.modelControl.isDataCollectionItemsetBinded&&this.refreshItemArr();var i=this.getValue(),o=this.modelControl.getData();this.options.customFormatter&&this.customFormatter();var s=this.setValueNM(o);1==s?(i!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()}),null!=this.getValue()&&o!=this.getValue()&&this.modelControl.setData(this.getValue()),this.broadcast({linkedDataList:["refresh",["replace"]]})):isNaN(s)?null!=this.getValue()&&o!=this.getValue()&&this.modelControl.setData(this.getValue()):this._setValueNotInList(o,!1)}}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.changeChooseOption=function(t,e){try{var i=-2;if(!0===this.options.chooseOption){i=-1;for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value===this.options.chooseOptionValue){i=s;break}i>-1&&this.itemArr.splice(i,1)}this.options.chooseOption=!0,this.options.chooseOptionValue=t,this.options.chooseOptionLabel=e,this.itemArr=[{label:e,value:t}].concat(this.itemArr),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),i!==this.getSelectedIndex()&&-1!==this.getSelectedIndex()||this.setSelectedIndex(0)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.showChooseOption=function(t){try{var e=this._getChooseOptionLabel();e=WebSquare.xml.decode(e).replace("&nbsp;"," ");var i=this.options.chooseOptionValue;if(1==t)this.options.chooseOption!=t&&("all"==this.options.optionOrder&&1==this.options.allOption?this.itemArr.splice(1,0,{label:e,value:i}):this.itemArr=[{label:e,value:i}].concat(this.itemArr));else if(this.options.chooseOptions!=t)for(var o=0;o<this.itemArr.length;o++)if(this.itemArr[o].label==e){this.itemArr.splice(o,1);break}this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),-2!==this.getSelectedIndex()&&-1!==this.getSelectedIndex()&&0!==this.getSelectedIndex()||this.setSelectedIndex(0),this.options.chooseOption=t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.componentRedraw=function(t,e,i){try{if(this.refreshStop)return;if(this.showRowIndex=0,!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.setSelectOptions(),this.itemArr.length>0){var o=0;if(e||this.options.refreshSelectedIndex&&"insertRow"===i)return"insertRow"!==i&&"replace"!=e&&this.getSelectedIndex()>-1&&(o=this.getSelectedIndex()),void this.setSelectedIndexNM(o);if(this.options.refreshSelectedIndex&&"setCellData"===i)o=this.getSelectedIndex();else if(this.modelControl.isItemsetBinded()&&!this.modelControl.isBinded()&&-1!==this.selectedIndex)return void(this.options.emptyItem?this.setSelectedIndexNM(-1):this.setSelectedIndexNM(0));if(this._setLabel(o),this.options.refreshSelectedIndex&&"setCellData"===i)return}else this.dom.label&&(this.dom.label.innerHTML="");this.setValueNM("")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setLabelWidthByItemLength=function(){try{var t=this.getMaxLabelSize();this.render&&(this.render.style.width=t+"px")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getMaxLabelSize=function(){try{this.labelRuler||(this.labelRuler=document.createElement("div"),this.labelRuler.style.position="absolute",this.labelRuler.style.top="-1000px",this.labelRuler.style.left="-1000px",this.labelRuler.style.visibility="hidden",
document.body.appendChild(this.labelRuler));for(var t=0,e=0;e<this.itemArr.length;e++)this.labelRuler.innerHTML=this.itemArr[e].label,this.labelRuler.offsetWidth>t&&(t=this.labelRuler.offsetWidth);var i=document.getElementById(this.id+"_button"),o=0;return i&&(o=i.offsetWidth||parseInt(WebSquare.style.getComputedStyle(i,"width"))),t+o+10}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSubLayer=function(){try{var t=this;if(null==this.itemTable)if("grid"==this.itemTableMode)"auto"==this.options.submenuSize&&(this.gridOptions.width||(this.gridOptions.parentWidth=this.render.offsetWidth),this.gridOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(e,i){t.focus(),"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(e)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(o)}else 27==i&&(t._closeSubLayer(),t.focus())}))),this.setGridData();else if("gridView"==this.itemTableMode)"auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(e,i){t.focus(),"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(e)})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(o)}else 27==i&&(t._closeSubLayer(),t.focus())}))),this.setGridViewData();else{"ul"===this.options.tableRender?this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"position:absolute;",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_sb",w2table_main:"w2table_sb_ul_main",w2table_row:"w2table_sb_ul_row",w2table_col:"w2table_sb_ul_col",w2table_col_over:"w2table_sb_ul_col_over",escape:this.options.escape,tableRender:this.options.tableRender,wheelRows:this.options.wheelRows,chooseOption:this.options.chooseOption,allOption:this.options.allOption,findItemKor:this.options.findItemKor,findItem:this.options.findItem,keyBufferResetTime:this.options.keyBufferResetTime,parent_uuid:this.uuid}):this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"position:absolute;",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_sb",w2table_main:"w2table_sb_main",
w2table_row:"w2table_sb_row",w2table_col:"w2table_sb_col",w2table_col_over:"w2table_sb_col_over",escape:this.options.escape,wheelRows:this.options.wheelRows,chooseOption:this.options.chooseOption,allOption:this.options.allOption,findItemKor:this.options.findItemKor,findItem:this.options.findItem,keyBufferResetTime:this.options.keyBufferResetTime,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.addClickEventListener((function(e,i){var o=e.charCode?e.charCode:e.keyCode,s=t.selectedIndex,r=t.getValue();if(t.focus(),t.setSelectedIndex1(i),t.options.keyMoveSync||0!=t.options.keyMoveSync||13!=o||"keydown"!==e.type){var n={oldValue:r,newValue:t.getValue(),oldSelectedIndex:s,newSelectedIndex:t.selectedIndex};a.B.fireEvent(t,"onselected",n)}})),this.itemTable.addKeyDownEventListener((function(e){var i=e.charCode?e.charCode:e.keyCode;t.options.customToggleKey==i?(t._closeSubLayer(),t.focus()):"ul"==this.options.tableRender&&t.itemTable.endReached?(t.itemTable.endReached=!1,t.closeSubLayer(),t.focus()):27==i&&(t._closeSubLayer(),t.focus())})),this.options.keyMoveSync||this.itemTable.addKeyUpEventListener((function(e,i){if(13==(e.charCode?e.charCode:e.keyCode)){var o=t.selectedIndex,s=t.getValue();t.focus(),t.setSelectedIndex1(i);var r={oldValue:s,newValue:t.getValue(),oldSelectedIndex:o,newSelectedIndex:t.selectedIndex};a.B.fireEvent(t,"onselected",r)}})),this.options.keyMoveListSync&&this.itemTable.addOnchangeListener((function(e){try{t.setSelectedIndex1(e,{skipClose:!0})}catch(t){r.w.printStackTrace(t,null,this)}}));var e=WebSquare.idCache[this.uuid],i=this.options.closeonmouseleave,o=this.options.itemTooltipDisplay;(i||o)&&this.itemTable.addMouseLeaveEventListener((function(s){if(i){var r=t.render.offsetHeight,a=t.getAbsolutePosition("top");s.clientY>=a&&s.clientY<=a+r||t.closeSubLayer()}o&&e.hideTooltip()})),o&&this.itemTable.addMouseOverEventListener((function(t){var i=t,o=WebSquare.style.getAbsoluteLeft(i)+20,s=WebSquare.style.getAbsoluteTop(i)+i.offsetHeight+3,r="ul"===e.options.tableRender?i.innerText:i.innerHTML;if(e.itemTooltipFormatter&&"function"==typeof e.itemTooltipFormatter){var a=parseInt(i.getAttribute("index"),10);r=e.itemTooltipFormatter(r,a,e.options._rowIndex,e.options._colIndex)}e.showTooltip(o,s,r)})),this.setSelectOptions(),this.setItemTable()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setGridData=function(){try{if(this.itemTable.grid.setData(this.gridItemArr),this.options.allOption&&this.gridItemArr.length>0){for(var t=[],e=-1,i=0;i<this.itemsetObj.items.length;i++)-1==e&&this.itemsetObj.items[i].ref==this.itemsetObj.label&&(e=i),t.push("");t[-1==e?0:e]=this.defaultAllOptionLabel,this.itemTable.grid.setRowData(0,t,!1)}if(this.itemsetObj.sortIndex&&this.gridItemArr.length>0){var o=[];if(this.options.allOption){var s=this.itemsetObj.sortIndex.split(" ")[0],a=this.itemTable.grid.getCellInfo(s).options.dataType,n=parseInt(this.itemsetObj.sortOrder.split(" ")[0],10);o[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==a?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*n:t<e?-1*n:0)}}this.itemTable.grid.multisort({sortIndex:this.itemsetObj.sortIndex,sortOrder:this.itemsetObj.sortOrder,sortFuncArr:o})}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setGridViewData=function(){try{var t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList);t.setData(this.gridViewItemArr.slice());var e=this.gridViewOptions.dataComp.filterManager.filterArr;if(e)for(var i=0;i<e.length;i++)t.setColumnFilter({type:e[i].options.type,colIndex:e[i].options.colIndex,key:e[i].options.key,condition:e[i].options.condition});if(this.options.chooseOption||this.options.allOption){for(var o=t.getAllData(),s=this.itemsetObj.label,a=t.getColumnIndex(s),n=t.getColumnCount(),l=a,h=0,d=[],u=0;u<n;u++)d.push("");if(this.options.chooseOption){var c=WebSquare.language.getMessage("SelectBox_choose")||"-선택-"
;o[l]!=c&&(d[a]=this._getChooseOptionLabel(),t.setRowData(h,d,!1))}if(this.options.allOption){WebSquare.language.getMessage("SelectBox_all");o[l]!=c&&(l=this.options.chooseOption?a+n:a,h=this.options.chooseOption?1:0,d[a]=this.defaultAllOptionLabel,t.setRowData(h,d,!1))}}var p=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;p&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),p&&this.itemTable.hide()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectOptions=function(){try{null!=this.itemTable&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&!0!==this.refreshStopItemTable&&this.itemTable.setItemArr(this.itemArr)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setItemTable=function(){try{var t,e=this.render.offsetWidth,i=document.body.offsetWidth,o=WebSquare.style.getAbsoluteLeft(this.render),a=WebSquare.style.getAbsoluteTop(this.render),n=this.itemTable.render.getElementsByTagName("td");if("ul"===this.options.tableRender&&(n=this.itemTable.render.getElementsByTagName("li")),n&&n.length>0){t=0;for(var l=Math.min(this.getVisibleItemCount(),this.options.visibleRowNum),h=0;h<l;h++)t+=n[h].offsetHeight;s.v.browserCheck.moz&&t<34&&1==l&&(t=34),this.itemTable.setStyle("height",t+"px")}else this.itemTable.setStyle("height","0px");"auto"==this.itemTable.getStyle("overflow-x")&&(t+=20,this.itemTable.setStyle("height",t+"px"));var d=WebSquare.style.getSize(this.itemTable.render,"outerwidth")-WebSquare.style.getSize(this.itemTable.render,"width");if("fixed"==this.options.submenuSize)this.itemTable.setStyle("width",e-d+"px"),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=e+"px":this.itemTable.render.firstChild.style.width=e-17+"px";else if("auto"==this.options.submenuSize){var u,c=this.render.offsetWidth,p=WebSquare.style.getSize(this.itemTable.render,"innerwidth")-WebSquare.style.getSize(this.itemTable.render,"width"),g=this.itemTable.render.clientWidth-p;if(i>c&&i<g&&(g=i-d),g=c-d,this.itemTable.setStyle("width",g+"px"),this.itemTable.render.clientHeight>=this.itemTable.render.scrollHeight||this.getItemCount()<=this.options.visibleRowNum)this.itemTable.render.firstChild.style.width=g+"px",(u=this.itemTable.render.scrollWidth-d)>g&&(this.itemTable.render.firstChild.style.width=u+"px",this.itemTable.setStyle("width",u+"px"));else this.itemTable.render.firstChild.style.width=g-17+"px",(u=this.itemTable.render.scrollWidth-d)>i&&(u=i-17),u>g-17&&(this.itemTable.render.firstChild.style.width=u+"px",this.itemTable.setStyle("width",u+17+"px"));0===this.getItemCount()&&(this.itemTable.setStyle("width","0px"),this.itemTable.render.firstChild.style.width="0px")}else this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1&&this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+17+"px");var m=this.options.direction;if("auto"==m){var f=document.body.scrollTop;f<document.documentElement.scrollTop&&(f=document.documentElement.scrollTop);var b=WebSquare.style.getScale(),y=(a-f)*b,v=document.documentElement.clientHeight-(y+this.render.offsetHeight),w=this.itemTable.render.offsetHeight*b,S=Math.max(v,y);if(S<w&&n&&n.length>0){var C=0;for(h=0;h<n.length&&!(C+n[h].offsetHeight+2>S);h++)C+=n[h].offsetHeight;this.itemTable.rowCount=h,this.itemTable.setStyle("height",C+"px"),S!==v&&(m="up")}else v<w&&y>w&&(m="up")}if("up"==m?a-=this.itemTable.render.offsetHeight:a+=this.render.offsetHeight,document.documentElement.clientWidth<o+this.itemTable.render.offsetWidth)(o=o+this.render.offsetWidth-this.itemTable.render.offsetWidth)<0?(o=WebSquare.style.getAbsoluteLeft(this.render),g=document.body.offsetWidth-17-o,this.itemTable.setStyle("width",g+"px"),"auto"!=this.itemTable.getStyle("overflow-x")&&(t+=20),this.itemTable.setStyle("height",t+"px"),
this.itemTable.setStyle("overflow-x","auto")):this.itemTable.setStyle("overflow-x","hidden");else{g=this.itemTable.render.firstChild.offsetWidth;var x=this.itemTable.render.clientWidth;if(o+g<i&&"auto"==this.itemTable.getStyle("overflow-x")){var _=g>x?g:x;t-=20,this.itemTable.setStyle("height",t+"px"),this.itemTable.setStyle("width",_+"px"),this.itemTable.setStyle("overflow-x","hidden")}}this.itemTableDirection=m,this.itemTable.setPosition(o,a),WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption){var t=[],e=null;"label"==this.options.sortOption?e=function(){return this.label}:"value"==this.options.sortOption&&(e=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var o=this.itemArr[i];o.toString=e,t.push(o)}t.sort(),"descending"==this.options.sortMethod&&t.reverse(),this.itemArr=t}if("0"!=this.options.displayMode)for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);if("all"==this.options.optionOrder){if(1==this.options.chooseOption){var s=this._getChooseOptionLabel();s=WebSquare.xml.decode(s).replace("&nbsp;"," "),this.itemArr=[{label:s,value:this.options.chooseOptionValue}].concat(this.itemArr)}1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr))}else if(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr)),1==this.options.chooseOption){s=this._getChooseOptionLabel();s=WebSquare.xml.decode(s).replace("&nbsp;"," "),this.itemArr=[{label:s,value:this.options.chooseOptionValue}].concat(this.itemArr)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.openSubLayer=function(){try{WebSquare.getBody().getLayerListener().show(this.id)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._openSubLayer=function(){try{if(this.setSubLayer(),!this.isOpen){if(this.itemTable.show(),this.addClass("w2selectbox_open"),this.itemTable.render.setAttribute("aria-expanded","true"),this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),n.D.isMobile()||this.itemTable.focus(),"ul"==this.options.tableRender&&(this.itemTable.removeClass(this.itemTable.selectedCell,this.itemTable.options.w2table_col_over),this.itemTable.selectedCell=null),this.options.emptyItem?this.itemTable.setSelectedIndex(this.selectedIndex,{noChangeFunc:!0}):-1!=this.selectedIndex&&this.itemTable.setSelectedIndex(this.selectedIndex),""!=this.options.animation&&"string"==typeof this.options.animation){var t="down",e=WebSquare.style.getAbsoluteTop(this.render),i=document.body.scrollTop;i<document.documentElement.scrollTop&&(i=document.documentElement.scrollTop);var o=e-i,s=document.documentElement.clientHeight-(o+this.render.offsetHeight),a=this.itemTable.render.offsetHeight;s<a&&o>a&&(t="up"),"show"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().fadeIn("slow"):"slidedown"==this.options.animation.toLowerCase()&&"down"==t&&$("#"+this.itemTable.id).hide().slideDown("fast")}this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex)}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._openOtherLayer=function(){try{var t=this.otherComponent;if("grid"==this.itemTableMode?(this.setSubLayer(),this.setGridData(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),
t=this.itemTable):"gridView"==this.itemTableMode&&(this.setSubLayer(),this.setGridViewData(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.style.height),t=this.itemTable),!this.isOpen){t.show(),this.addClass("w2selectbox_open");var e=WebSquare.style.getAbsoluteLeft(this.render),i=WebSquare.style.getAbsoluteTop(this.render),o=this.options.direction;if("auto"==o){var s=document.body.scrollTop;s<document.documentElement.scrollTop&&(s=document.documentElement.scrollTop);var a=i-s,l=document.documentElement.clientHeight-(a+this.render.offsetHeight),h=t.render.offsetHeight;l<h&&a>h&&(o="up")}"up"==o?"gridView"==this.itemTableMode?i-=t.gridView.render.offsetHeight:i-=t.grid.render.offsetHeight:i+=this.render.offsetHeight,"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(e=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(t.render.style.width=this.render.offsetWidth+"px")),document.documentElement.clientWidth<e+t.render.offsetWidth&&(e=e+this.render.offsetWidth-t.render.offsetWidth),e<0&&(e=0),t.setPosition(e,i),this.isOpen=!0,this.itemTableDirection=o,WebSquare.style.adjustZIndex(this.uuid,t.uuid,"itemTable"),!n.D.isMobile()&&this.options.findItemFirstKey&&("grid"==this.itemTableMode?t.grid.render.focus():"gridView"==this.itemTableMode&&t.gridView.render.focus())}-1!=this.selectedIndex&&this.itemTable.setSelectedIndex(this.selectedIndex)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.closeSubLayer=function(t){try{var e={documentClick:t};null!=this.itemTable&&("grid"==this.itemTableMode?this.itemTable.grid.applyFocusedCellOut(this.itemTable.grid.focusedCell[0]):"gridView"==this.itemTableMode&&this.itemTable.gridView.applyFocusedCellOut(this.itemTable.gridView.focusedCell[0])),WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._closeSubLayer=function(t){try{var e=(t=t||{}).documentClick;this.isOpen&&null!=this.itemTable&&(this.itemTable.hide(),this.removeClass("w2selectbox_open"),this.itemTable.render.setAttribute("aria-expanded","true"),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex),!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._closeOtherLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.otherComponent;"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i&&(i.hide(),this.removeClass("w2selectbox_open"),this.isOpen=!1,!0===e?a.B.fireEvent(this,"onclose",!0):a.B.fireEvent(this,"onclose",!1))}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndex=function(t,e){try{if(t=parseInt(t,10),isNaN(t))return;if(t<0||t>=this.getItemCount()){if(this.options.emptyItem)if(this.modelControl.isBinded())(1==this.options.selectedData||0!=e)&&this.modelControl.setData(this.options.emptyValue),this.setSelectedIndexNM(-1);else{var i=this.getSelectedIndex(),o=this.getValue();this.setSelectedIndexNM(-1),-1!=i&&a.B.fireEvent(this,"onchange",{oldValue:o,newValue:this.getValue()})}return}if(this.modelControl.isBinded()){var s=this.modelControl.dataCollectionRefInfo?this.modelControl.dataCollectionRefInfo.dataComp:null;1==this.options.selectedData?(this.modelControl.setData(this.itemArr[t].value),null==s||s.getBroadcast()||this.setSelectedIndexNM(t)):0!=e?this.itemArr[t].value!=WebSquare.allValue?(this.modelControl.setData(this.itemArr[t].value),1==this.options.chooseOption&&0==t?this.setSelectedIndexNM(0):null==s||s.getBroadcast()||this.setSelectedIndexNM(t)):(this.modelControl.setData(""),this.setSelectedIndexNM(t)):this.setSelectedIndexNM(-1)}else{
i=this.getSelectedIndex(),o=this.getValue();this.setSelectedIndexNM(t),i!=this.getSelectedIndex()&&a.B.fireEvent(this,"onchange",{oldValue:o,newValue:this.getValue()})}this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndexNM=function(t){try{return t=parseInt(t,10),isNaN(t)?!1:t<0||t>=this.getItemCount()?!!this.options.emptyItem&&(this.selectedIndex=-1,this.dom.label.innerHTML="",this.itemTable&&this.itemTable.setSelectedIndex(0),!0):(this.selectedIndex=t,this._setLabel(t),this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+t),!0)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAllSelectedIndex=function(t,e){try{if(!this.allItemArr[t])return this.selectedAllIndex=-1,!1;this.selectedIndex=-1,this.selectedAllIndex=t;var i=this.allItemArr[t].label+"";return this.dom.label&&(this.dom.label.innerHTML=this._getLabel(i)),e&&this.modelControl.setData(this.allItemArr[t].value),NaN}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getSelectedRow=function(){try{if("gridView"==this.itemTableMode&&this.itemTable){var t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList);if(t)return t.getRowArray(this.getSelectedIndex())}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setValue=function(t){try{var e=!0;if(n.D.isNull(t))return!1;var i=this.getValue();if(this.modelControl.isBinded())this.modelControl.setData(t);else{i=this.getValue();var o=this.setValueNM(t);1==o?i!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()}):isNaN(o)||(this._setValueNotInList(t),e=!1)}return this.broadcast({linkedDataList:["refresh",["replace"]]}),e}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype.setValueNM=function(t){try{if(n.D.isNull(t))return;t=t.toString();for(var e=this.getItemCount(),i=0;i<e;i++)if(this.itemArr[i].value==t)return this.setSelectedIndexNM(i),!0;return this.setAllValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setAllValue=function(t,e){try{try{if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(t){return!1}if(n.D.isNull(t))return!1;t=t.toString();for(var i=this.allItemArr.length,o=0;o<i;o++)if(this.allItemArr[o].value==t)return this.setAllSelectedIndex(o,e);return!1}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype._setValueNotInList=function(t,e){try{switch(this.options.valueNotInList){case"keepValue":if(t)if(this.selectedIndex=-1,null!=this.dom.label.textContent)this.dom.label.textContent=t;else if(null!=this.dom.label.innerText)this.dom.label.innerText=t;else{var i=this._getLabel(t);this.dom.label.innerHTML=i}else this.options.emptyItem?this.setSelectedIndex(-1):this.setSelectedIndex(0);break;case"default":default:this.options.emptyItem?this.setSelectedIndex(-1,e):this.setSelectedIndex(0,e)}}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype.getValue=function(){try{if(this.itemArr[this.selectedIndex])return this.itemArr[this.selectedIndex].value;var t=this.getAllValue();return!1!==t?t:this._getValueNotInList()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getAllValue=function(t,e){try{try{if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(t){return!1}return!!this.allItemArr[this.selectedAllIndex]&&this.allItemArr[this.selectedAllIndex].value}catch(t){return r.w.printStackTrace(t,null,this),!1}},u.prototype._getValueNotInList=function(){try{switch(this.options.valueNotInList){case"keepValue":
return(null!=this.dom.label.textContent?this.dom.label.textContent:null!=this.dom.label.innerText?this.dom.label.innerText:this.dom.label.innerHTML)||(this.options.emptyItem&&-1==this.selectedIndex?this.options.emptyValue:null);case"default":default:return this.options.emptyItem&&-1==this.selectedIndex?this.options.emptyValue:null}}catch(t){return r.w.printStackTrace(t,null,this),null}},u.prototype.setText=function(t,e){try{var i=this.getItemCount(),o="";if(e)for(var s=0;s<i;s++)this.itemArr[s].orgLabel==t&&(o=this.itemArr[s].value);else for(s=0;s<i;s++)this.itemArr[s].label==t&&(o=this.itemArr[s].value);this.setValue(o)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.getText=function(t){try{return this.itemArr[this.selectedIndex]?t?this.itemArr[this.selectedIndex].orgLabel:this.itemArr[this.selectedIndex].label:this.options.emptyItem&&-1==this.selectedIndex?"":null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.addItemArr=function(t,e,i){try{!0===i||!1===i?this.itemArr.push({label:t,value:e,_hidden:i}):this.itemArr.push({label:t,value:e})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.addItem=function(t,e,i,o){try{if(i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount()),null==o&&(o=this.options.dataListAutoRefresh),this.itemsetObj.nodeset.match("data:")&&o){var s=this.modelControl.getDataComp();if(s&&WebSquare.idCache[s.uuid]){var a={};a[this.itemsetObj.value]=t,a[this.itemsetObj.label]=e,this.stopRefresh(!0),s.insertJSON(i,[a]),this.stopRefresh(!1)}}var n={};return n.value=t,n.label=e,this.itemArr.splice(i,0,n),"0"!=this.options.displayMode&&(this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i)),this.options.emptyItem&&-1==this.selectedIndex&&this.setSelectedIndex(0),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),i}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.deleteItem=function(t,e){try{if(t=parseInt(t,10),isNaN(t))return;if(null==e&&(e=this.options.dataListAutoRefresh),this.itemsetObj.nodeset.match("data:")&&e){var i=this.modelControl.getDataComp();if(i&&WebSquare.idCache[i.uuid]){var o=0;this.options.chooseOption&&o++,this.options.allOption&&o++,this.stopRefresh(!0),i.removeRow(t-o),this.stopRefresh(!1)}}var s=null;return t>=0&&t<this.getItemCount()&&(s=this.itemArr.splice(t,1)[0]),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.options.emptyItem&&(-1!=this.selectedIndex&&t!=this.selectedIndex||this.setSelectedIndex(0)),this.options.emptyItem&&"native"==this.options.renderType?this.selectedIndex>t&&t>=0?this.setSelectedIndex(this.selectedIndex-1):this.setSelectedIndex(this.selectedIndex):this.selectedIndex>t&&t>=0&&this.setSelectedIndex(this.selectedIndex-1),s}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.removeAll=function(t){try{var e=this.getValue();if(this.itemArr=new Array,t&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr)),1==this.options.chooseOption)){var i=this._getChooseOptionLabel();i=WebSquare.xml.decode(i).replace("&nbsp;"," "),this.itemArr=[{label:i,value:this.options.chooseOptionValue}].concat(this.itemArr)}if(this.setSelectOptions(this.itemArr),this.dom.label)if(this.itemArr.length>0){i=this.itemArr[0].label+"";n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10?(i.indexOf("&")>-1&&(i=i.wq_replaceAll("&","&amp;")),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;")):this.options.escape&&(i=WebSquare.xml._encode(i)),this.dom.label.innerHTML=i}else this.dom.label.innerHTML=""
;if(this.options.setDataRemoveAll&&(t?this.setSelectedIndex(0):(this.selectedIndex=-1,!this.dom.label&&this.dom.select&&(this.dom.select.selectedIndex=-1),this.modelControl.isBinded()&&this.modelControl.setData(""),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()}))),"grid"==this.itemTableMode)this.gridItemArr=[],this.itemTable&&this.itemTable.grid.removeAll();else if("gridView"==this.itemTableMode){if(this.gridViewItemArr=[],this.itemTable)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).removeAll()}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":"component"==this.options.renderType?e?(this.closeSubLayer(),this.getElementById(this.id+"_label").style.color="#848684"):this.getElementById(this.id+"_label").style.color="":e?this.dom.select&&this.dom.select.setAttribute("disabled","disabled"):this.dom.select&&this.dom.select.removeAttribute("disabled");var i=this.dom.button;1==e?(this.addClass(this.render,this.options.disabledClass),null!=i&&this.addClass(i,"w2selectbox_button_disabled")):(this.removeClass(this.render,this.options.disabledClass),null!=i&&this.removeClass(i,"w2selectbox_button_disabled"));break;case"mandatory":1==e?this.addClass(this.render,"w2selectbox_mandatory"):this.removeClass(this.render,"w2selectbox_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setSelectedIndex1=function(t,e){try{void 0!==e&&null!=e||(e={});var i=this.selectedIndex,o=this.getValue();if(this.setSelectedIndex(t),i!=this.selectedIndex){var s={oldValue:o,newValue:this.getValue(),oldSelectedIndex:i,newSelectedIndex:this.selectedIndex};a.B.fireEvent(this,"onviewchange",s)}!0!==e.skipClose&&this.closeSubLayer()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setInitValue=function(t){try{var e=this.getValue();""===this.options.initValue&&this.itemArr&&this.itemArr[0]&&(this.options.initValue=this.itemArr[0].value),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.hide=function(){try{this.closeSubLayer(),l.s.prototype.hide.call(this)}catch(t){r.w.printStackTrace(t)}},u.prototype.showTooltip=function(t,e,i){try{if(!i)return;null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o="";this.options.itemTooltipDisplay&&(o="position:absolute;z-index:10000;"),this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2selectbox_tooltip "+this.options.tooltipClass,style:o}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=WebSquare.xml._encode(i)),this.tooltip.render.innerHTML=i,this.isFireTooltipEvent||(this.isFireTooltipEvent=!0,a.B.fireEvent(this,"ontooltipshow"))})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},
u.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&(this.tooltip.setStyle("display","none"),a.B.fireEvent(this,"ontooltiphide"),this.isFireTooltipEvent=!1)})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=n.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},u.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=n.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},u.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){r.w.printStackTrace(t)}},u.prototype.setNextTabID=function(t,e){try{null!=t&&n.D.setNextTabID(this.id,t,e)}catch(t){r.w.printStackTrace(t)}},u.prototype.handleClickEvent=function(t){try{if(this.options.disabled)return!1;n.D.isMobile()||this.focus(),this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getSelectedIndex();if(!0===this._preventKeyObj[e]||!0===this._preventKeyObj.all)return;if(13==e&&this.options.keyMoveSync)return void this.handleClickEvent(t);if(this.options.customToggleKey==e)return void this.toggle();if(this.isOpen)return;if(!this.options.keyMoveSync||38!=e&&40!=e&&33!=e&&34!=e&&35!=e&&36!=e)return 9==e?(this.tabOrderMoveStart=!1,void(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))):(this.findItemStartedWithKeyChar(t,e),void(this.options.findItem&&this._keyBuffer&&(n.D.clearTimeout(this.id+"_selectKeyBuffer"),n.D.setTimeout((function(){this._keyBuffer=""}),{key:this.id+"_selectKeyBuffer",caller:this,delay:this.options.keyBufferResetTime}))));if(this._oldIndex=this.selectedIndex,this._oldValue=this.getValue(),38==e)i>0&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndex1(i-1),this.targetFocusedIndex=i-1):this.setSelectedIndex1(i-1));else if(40==e)"grid"==this.itemTableMode||"gridView"==this.itemTableMode?i+1<this.getItemCount()&&(this.setSelectedIndex1(i+1),this.targetFocusedIndex=i+1):i+1<this.getItemCount()&&this.setSelectedIndex1(i+1);else if(33==e){if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(o=i-this.options.visibleRowNum)<0&&(o=0),this.setSelectedIndex1(o),this.targetFocusedIndex=o;else(o=i-this.options.visibleRowNum)<0&&(o=0),this.setSelectedIndex1(o)}else if(34==e){var o;if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(o=i+this.options.visibleRowNum)>=this.getItemCount()&&(o=this.getItemCount()-1),this.setSelectedIndex1(o),this.targetFocusedIndex=o;else(o=i+this.options.visibleRowNum)>=this.getItemCount()&&(o=this.getItemCount()-1),this.setSelectedIndex1(o)}else 35==e?"grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndex1(this.getItemCount()-1),this.targetFocusedIndex=this.getItemCount()-1):this.setSelectedIndex1(this.getItemCount()-1):36==e&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndex1(0),this.targetFocusedIndex=0):this.setSelectedIndex1(0));if(this._oldIndex!=this.selectedIndex){var s={oldValue:this._oldValue,newValue:this.getValue(),oldSelectedIndex:this._oldIndex,newSelectedIndex:this.selectedIndex};a.B.fireEvent(this,"onselected",s)}a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},
u.prototype.handleKeyupEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode;if(!0===this._preventKeyObj[i]||!0===this._preventKeyObj.all)return;if(!this.options.keyMoveSync&&this.modelControl.isBinded()){var o=this.getSelectedIndex();if(13==i){for(var s=this.modelControl.getData(),l=-1,h=0;h<this.itemArr.length;h++)if(this.itemArr[h].value==s){l=h;break}var d={oldValue:s,newValue:this.getValue(),oldSelectedIndex:l,newSelectedIndex:o};this.setSelectedIndex(this.getSelectedIndex()),a.B.fireEvent(this,"onselected",d)}else if(38==i||40==i||33==i||34==i||35==i||36==i)if(this._onSelected=!1,this._oldIndex=this.selectedIndex,this._oldValue=this.getValue(),38==i)o>0&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndexNM(o-1),this.targetFocusedIndex=o-1):this.setSelectedIndexNM(o-1));else if(40==i)"grid"==this.itemTableMode||"gridView"==this.itemTableMode?o+1<this.getItemCount()&&(this.setSelectedIndexNM(o+1),this.targetFocusedIndex=o+1):o+1<this.getItemCount()&&this.setSelectedIndexNM(o+1);else if(33==i){if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(u=o-this.options.visibleRowNum)<0&&(u=0),this.setSelectedIndexNM(u),this.targetFocusedIndex=u;else(u=o-this.options.visibleRowNum)<0&&(u=0),this.setSelectedIndexNM(u)}else if(34==i){var u;if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(u=o+this.options.visibleRowNum)>=this.getItemCount()&&(u=this.getItemCount()-1),this.setSelectedIndexNM(u),this.targetFocusedIndex=u;else(u=o+this.options.visibleRowNum)>=this.getItemCount()&&(u=this.getItemCount()-1),this.setSelectedIndexNM(u)}else 35==i?"grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndexNM(this.getItemCount()-1),this.targetFocusedIndex=this.getItemCount()-1):this.setSelectedIndexNM(this.getItemCount()-1):36==i&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndexNM(0),this.targetFocusedIndex=0):this.setSelectedIndexNM(0))}if(9==i||13==i&&this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMousewheelEvent=function(t){try{if(this.options.preventWheelEvent)return;a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2selectbox_focus")&&!this.isOpen){var i=this.getSelectedIndex();t.wheelDelta>0||t.detail<0?this.setSelectedIndex1(i-1):this.setSelectedIndex1(i+1)}e=null}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleFocusEvent=function(t){try{a.B.stopEvent(t),this.addClass(this.dom.tbody,"w2selectbox_focus"),this.addClass("w2selectbox_body_focus")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleBlurEvent=function(t){try{a.B.stopEvent(t),this.removeClass(this.dom.tbody,"w2selectbox_focus"),this.removeClass("w2selectbox_body_focus"),this.itemTable&&this.itemTable.itemTableFocus||a.B.fireEvent(this,"onblur",t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{if(a.B.stopEvent(t),this.addClass(this.dom.tbody,"w2selectbox_over"),this.addClass("w2selectbox_body_over"),!this.isOpen){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2selectbox")&&(1==this.options.tooltipDisplay||1==this.options.tooltipShowAlways)){var i=e.getElement(),o=i.getElementsByClassName("w2selectbox_label")[0],s=WebSquare.style.getStyle(o,"text-overflow"),n=this.dom.label.innerHTML;if(!0===this.options.tooltipShowAlways){var l=WebSquare.style.getAbsoluteLeft(i)+20,h=WebSquare.style.getAbsoluteTop(i)+this.render.offsetHeight+3;this.showTooltip(l,h,n)}else if("ellipsis"==s){
this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=o.className,this.toolTipRuler.innerHTML=o.innerText,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(o,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(o,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(o,"font-weight");var d=this.toolTipRuler.offsetWidth,u=o.clientWidth;if(3!=o.nodeType){var c=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),p=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");d-=parseInt(c||"0",10),d-=parseInt(p||"0",10),u-=parseInt(WebSquare.style.getStyle(o,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(o,"padding-right"),10),u-=parseInt(WebSquare.style.getStyle(i,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(i,"padding-right"),10)}if(u<d){l=WebSquare.style.getAbsoluteLeft(i)+20,h=WebSquare.style.getAbsoluteTop(i)+this.render.offsetHeight+3;document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel&&(n=this.options.tooltipItemLabel),this.showTooltip(l,h,n)}}}e=null}}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),1!=this.options.tooltipDisplay&&1!=this.options.tooltipShowAlways||this.hideTooltip(),this.removeClass(this.dom.tbody,"w2selectbox_over"),this.removeClass("w2selectbox_body_over")}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.handleMouseleaveEvent=function(t){try{var e=this.render.offsetHeight-1,i=this.render.offsetWidth-1,o=this.getAbsolutePosition("top"),s=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(t.clientX<s||t.clientX>s+i||t.clientY>o||t.clinetY>o+e)&&this.closeSubLayer():(t.clientX<s||t.clientX>s+i||t.clientY<o||t.clinetY>o+e)&&this.closeSubLayer())}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.findItemStartedWithKeyChar=function(t,e){try{var i=this.keyCharHash[e],o=-1;if(i){var s=this.korCharHash[e],a=this.korCharHash2[e],l=this.selectedIndex;this.options.findItem?(this._keyBuffer+=i,l=0):(this._keyBuffer=i,l++);for(var h=1;;){l%=this.itemArr.length;var d=this.itemArr[l].label.toLowerCase();if(0!=l||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=l&&1!=l||!0!==this.options.chooseOption||!0!==this.options.allOption){var u=!1;s&&!t.shiftKey?u=this.myhelper.startWith(d,s):a&&t.shiftKey&&(u=this.myhelper.startWith(d,a));var c=this.options.findItem?this._keyBuffer:i;if(d.startsWith(c)||u&&n.D.getBoolean(this.options.findItemKor)){o=l;break}if(d.startsWith(c)){this._keyBuffer="",o=l;break}if(h>this.itemArr.length)break;l++,h++}else{if(this.itemArr.length<=2)break;l++}else{if(this.itemArr.length<=1)break;l++}}if(o>-1)return this.setSelectedIndex1(o),!0}if(-1==o)return this._keyBuffer="",!1}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.setRef=function(t){try{"string"==typeof t&&t.length>0&&(this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh())}catch(t){r.w.printStackTrace(t)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},u.prototype._setLabel=function(t,e){try{var i=e&&e.skipCustomFormatter;if(this.dom.label){var o=this.itemArr[t].label+"";if(this.options.customLabelFormatter&&!0!==i&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var s=this.itemArr[t].value+"",a=this.itemArr[t].orgLabel+""
;(0!=t||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=t&&1!=t||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(o=this.customLabelFormatter.call(this,a,s,this.isOpen))}else o=this._getLabel(o);this.dom.label.innerHTML=o}}catch(t){r.w.printStackTrace(t)}},u.prototype._getLabel=function(t){try{var e=t;return n.D.isIE()&&parseInt(s.v.browserVersion(),10)<10?(t.indexOf("&")>-1&&(t=t.wq_replaceAll("&","&amp;")),t=this.options.escape?WebSquare.xml._encode(t):t.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;")):this.options.escape&&(t=WebSquare.xml._encode(t)),e}catch(t){r.w.printStackTrace(t)}},u.prototype._getChooseOptionLabel=function(t){try{var e;if("$blank"===this.options.chooseOptionLabel)e="";else if(e=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var i=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);i&&(e=i)}return e}catch(t){r.w.printStackTrace(t)}},u.prototype.stopRefresh=function(t){try{this.refreshStop=n.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.stopRefreshItemTable=function(t){try{this.refreshStopItemTable=n.D.getBoolean(t)}catch(t){r.w.printStackTrace(t,null,this)}},u.prototype.focus=function(){"ul"==this.options.tableRender?this.dom.tbody.focus():this.render.focus()},u.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),!0===t?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(t){r.w.printStackTrace(t)}return t},u.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},u.prototype.restore=function(t){this.setSelectedIndex(t.selectedIndex)};var c=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(c.prototype,u.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.selectbox",pluginName:"selectbox",renderType:"native",userEvents:["onchange","onclose","onviewchange","onfocus"],useConfig:!0,value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",displayMode:"0",delimiter:"\t",textAlign:"",useLocale:!1,disabledClass:"w2selectbox_disabled",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",title:"",emptyItem:!1,emptyValue:"",emptyIndex:0,findItem:!1,initStyle:!1},c.prototype.initialize=function(t){try{this._initializeCommon(t&&"$blank"==t.getAttribute("chooseOptionLabel")),this.initializeItemArr(t)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.finalize=function(){l.s.prototype.finalize.call(this)},c.prototype.toHTML=function(){try{var t=[],e=this.options.style?"style='"+this.options.style+"'":"",i=this.options.title?"title='"+this.options.title+"'":"";if("select"==this.options.renderType){t.push("<select id='"+this.id+"' "+e+" class='w2selectbox_select "+this.options.className+"' "+i+">");for(var o=0;o<this.itemArr.length;o++)t.push("<option>"+this.itemArr[o].label+"</option>");t.push("</select>")}else{t.push("<div id='"+this.id+"' "+e+" class='w2selectbox_native "+(n.D.isMobile()?"w2selectbox_native_mobile ":"")+(this.options.labelWidthAuto?"":"fixedWidth ")+this.options.className+"'>"),t.push("<div class='w2selectbox_native_innerDiv'>"),t.push("<select class='w2selectbox_native_select' id='"+this.id+"_input_0' "+i+">");for(o=0;o<this.itemArr.length;o++)t.push("<option>"+this.itemArr[o].label+"</option>");t.push("</select>"),t.push("</div>"),t.push("</div>")}return t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){try{if(this.dom.select="select"==this.options.renderType?this.render:this.render.firstChild.firstChild,!(n.D.isIE(6)||n.D.isIE(7))&&"native"==this.options.renderType){var t=this.render.clientHeight-this.dom.select.offsetHeight
;t>0&&(this.dom.select.style.marginTop=parseInt(t/2,10)+"px")}!0===this.options.labelWidthAuto&&(this.render.style.width=""),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.modelControl.isBinded()){var i=this.modelControl.getData();this.setValueNM(i)}if(-1==this.selectedIndex&&this.getItemCount()>0&&(0==this.options.emptyIndex||!this.options.emptyIndex))if(this.modelControl.isBinded()){i=this.getValue();if(this.options.emptyRef){for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value==i){this.setSelectedIndexNM(0),this.modelControl.setData(i);break}}else this.setSelectedIndexNM(0),this.modelControl.setData(i)}else this.setSelectedIndexNM(0),this.broadcast({linkedDataList:["refresh",["replace"]]});else if(this.getItemCount()>0&&this.modelControl.isBinded()&&(0==this.options.emptyIndex||!this.options.emptyIndex)){i=this.getValue();this.modelControl.getData()!==i&&this.modelControl.setData(i)}else this.options.emptyIndex&&"number"==typeof this.options.emptyIndex&&(this.modelControl.isBinded()?(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(this.options.emptyIndex),this.broadcast({linkedDataList:["refresh",["replace"]]})));this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.event.addListener2(this.dom.select,"onchange",this.event.bindAsEventListener(this,this.handleOnchange)),this.event.addListener(this.dom.select,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.dom.select,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent))}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(t,e){try{if(this.refreshStop)return;if(this.showRowIndex=0,this.setSelectOptions(),this.itemArr.length>0){if(this.options.refreshSelectedIndex&&"setCellData"===e)return;if(t||"insertRow"===e){var i=0;return"insertRow"!==e&&"replace"!=t&&this.getSelectedIndex()>-1&&(i=this.getSelectedIndex()),this.dom.select.selectedIndex=i,void(this.selectedIndex=i)}this.dom.select.selectedIndex=0,this.selectedIndex=0}this.setValueNM("")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshVisible=function(){try{for(var t=0;t<this.itemArr.length;t++)!0===this.itemArr[t]._hidden&&this.dom.select?this.dom.select.options[t].style.display="none":this.dom.select.options[t].style.display=""}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.refreshEnable=function(){try{for(var t=0;t<this.itemArr.length;t++)!0===this.itemArr[t]._disabled&&this.dom.select?this.dom.select.options[t].setAttribute("disabled",""):this.dom.select.options[t].removeAttribute("disabled")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectOptions=function(){try{for(var t=this.dom.select.options.length;t>=0;t--)this.dom.select.remove(t);for(t=0;t<this.itemArr.length;t++){var e=document.createElement("option");e.text=this.itemArr[t].label,this.dom.select.options[t]=e,!0===this.itemArr[t]._hidden&&(this.dom.select.options[t].style.display="none"),!0===this.itemArr[t]._disabled&&this.dom.select.options[t].setAttribute("disabled","")}}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndexNM=function(t){try{return t=parseInt(t),!this.options.emptyItem&&(isNaN(t)||t<0||t>=this.getItemCount())?!1:(this.selectedIndex=t,this.dom.select&&(this.dom.select.selectedIndex=t),this.broadcast({linkedDataList:["refresh",["replace"]]}),!0)}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleOnchange=function(t){
var e=this.dom.select.selectedIndex,i=this.getSelectedIndex(),o=this.getValue();this.setSelectedIndexNM(e),this.options.emptyItem&&-1==e?this.modelControl.setData(this.options.emptyValue):this.modelControl.setData(this.itemArr[e].value);var s=this.getValue();if(this.selectedIndex=e,i!=this.getSelectedIndex()){a.B.fireEvent(this,"onchange",{oldValue:o,newValue:s});var r={oldValue:o,newValue:s,oldSelectedIndex:i,newSelectedIndex:this.selectedIndex};a.B.fireEvent(this,"onviewchange",r)}},c.prototype.handleKeydownEvent=function(t){try{if(9==(t.charCode?t.charCode:t.keyCode))return this.tabOrderMoveStart=!1,void(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.B.preventDefault(t)))}catch(t){r.w.printStackTrace(t)}},c.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleBlurEvent=function(t){try{a.B.fireEvent(this,"onblur")}catch(t){r.w.printStackTrace(t,null,this)}},c.prototype.handleFocusEvent=function(t){a.B.fireEvent(this,"onfocus")},c.prototype.focus=function(){this.dom.select.focus()},c.prototype.setDisabled=function(t){try{t=n.D.getBoolean(t),this.options.disabled=t,this.onPropertyChange("disabled",t)}catch(t){r.w.printStackTrace(t)}return t},c.prototype._getValueNotInList=function(){try{switch(this.options.valueNotInList){case"keepValue":case"default":default:return this.options.emptyItem&&-1==this.selectedIndex?this.options.emptyValue:null}}catch(t){return r.w.printStackTrace(t,null,this),null}},c.prototype._setValueNotInList=function(t,e){try{switch(this.options.valueNotInList){case"keepValue":case"default":default:this.options.emptyItem?this.setSelectedIndex(-1,e):this.setSelectedIndex(0,e)}}catch(t){return r.w.printStackTrace(t,null,this),!1}}},5004:function(t,e,i){"use strict";i.r(e),i.d(e,{span:function(){return h}});var o=i(1974),s=i(5052),r=i(5948),a=i(8683),n=i(9075),l=i(1),h=function(t,e,i){l.s.call(this,t,e,i),this.options.tagname="span"};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.span",pluginName:"span",parseAttributes:!0,userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onmouseover","onmouseout"],useConfig:!0,label:"",escape:!0,escapeFormatter:"",tagname:"span",localeRef:"",useLocale:!1,ioFormat:"",displayFormat:"",displayFormatter:null,dataType:"text",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:""},h.prototype.htmlStr=["<",""," id='","","' ",""," class='w2span ","","' ","",">","","</","",">"],h.prototype.htmlClosingStr=["<",""," id='","","' ",""," class='w2span ","","'",""," />"],h.prototype.initialize=function(t){if(this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break
;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter="-")}t&&t.getAttribute("escape");this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.useEscapeFormatter=!1},h.prototype.toHTML=function(){if(null!=this.scope_obj&&this.scope_obj.id&&this.options.for){var t=a.D.getComponentById(this.options.for,this.scope_obj.id);null!=t&&(this.options.for=t.id)}var e="";if(s.v.getEmptyTag()[this.options.tagname.toLowerCase()])(e=this.htmlClosingStr)[1]=this.options.tagname,e[3]=this.id,e[5]=""==this.options.style?"":" style='"+this.options.style+"'",e[5]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",e[7]=this.options.className,e[9]=("label"==this.options.tagname?" for='"+this.options.for+"'":"")+this.getAttributesString();else{(e=this.htmlStr)[1]=this.options.tagname,e[3]=this.id,e[5]=""==this.options.style?"":"style='"+this.options.style+"'",e[5]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",e[7]=this.options.className,e[9]=("label"==this.options.tagname?" for='"+this.options.for+"'":"")+this.getAttributesString();var i="";i=this.options.escapeFormatter?this.setEscapeFormatter():this.options.escape?this.formatter.format(WebSquare.xml._encode(this.options.label+"")):this.formatter.format(this.options.label),e[11]=i,e[13]=this.options.tagname}return e.join("")},h.prototype.setEscapeFormatter=function(){try{if(this.options.escapeFormatter){try{if("function"==typeof this.options.escapeFormatter)this.useEscapeFormatter=!0;else{var t=a.D.getGlobalFunction(this.options.escapeFormatter,this.scope_id);"function"==typeof t&&(this.options.escapeFormatter=t,this.useEscapeFormatter=!0)}}catch(t){n.k.printLog("cannot find function : "+this.options.escapeFormatter+"["+this.id+"]")}var e=this.options.label;return this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e)}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.onComplete=function(){this.options.escapeFormatter&&!this.useEscapeFormatter&&(this.render.innerHTML=this.setEscapeFormatter()),l.s.prototype.onComplete.call(this)},h.prototype.setAction=function(){try{if(this.refresh(),this.displayLocaleValue(),"label"!=this.options.tagname||""==this.options.for)return;var t=a.D.getComponentById(this.options.for)||null;if(null==t)return;var e="function"==typeof t.getAccessibiltyId?t.getAccessibiltyId():this.options.for;this.render.setAttribute("for",e)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setLocaleRef=function(t){try{this.options.localeRef=t,this.displayLocaleValue()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.label=t,this.useEscapeFormatter&&(t=this.options.escapeFormatter.call(this,t)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(t+"")):this.formatter.format(t),this.options.label=t}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setLabel=function(t){try{this.setValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getLabel=function(){try{return this.getValue()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setValue=function(t){try{this.options.label=t;var e=this.options.label
;this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e),this.modelControl.setData(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getValue=function(){try{return this.options.escape?WebSquare.xml._decode(this.options.label+""):this.options.label}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getFormatValue=function(){try{return this.options.escape?this.formatter.format(WebSquare.xml._decode(this.options.label+"")):this.formatter.format(this.options.label)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setDisplayFormatter=function(t){try{this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.w.printStackTrace(t)}},h.prototype.getDataType=function(){try{return this.options.dataType}catch(t){r.w.printStackTrace(t)}},h.prototype.addClass=function(){try{l.s.prototype.addClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.removeClass=function(){try{l.s.prototype.removeClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.changeClass=function(){try{l.s.prototype.changeClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.toggleClass=function(){try{l.s.prototype.toggleClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getAttributeNode=function(t){try{return l.s.attributes.getAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},h.prototype.setAttributeNode=function(t,e){try{l.s.attributes.setAttributeNode.call(this,t,e)}catch(t){r.w.printStackTrace(t)}},h.prototype.removeAttributeNode=function(t){try{l.s.attributes.removeAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},h.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},h.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},h.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t)}}},3921:function(t,e,i){"use strict";i.r(e),i.d(e,{spinner:function(){return l}});var o=i(1974),s=i(5948),r=i(1454),a=i(8683),n=i(1),l=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.spinner",pluginName:"spinner",userEvents:["onDownButtonClick","onUpButtonClick","onviewchange","oneditkeyup","oneditenter","oneditfull"],useConfig:!0,buttonPosition:"horizon",buttonSize:30,spinnerClass:"type1",maxValue:"",minValue:"",maxYear:2030,minYear:1978,dataType:"number",dataTypeTimeSecond:!1,increment:1,dateIncrementType:"day",initValue:"",inputReadOnly:!1,ioFormat:"yyyyMMdd",ioFormatter:"",displayFormat:"",displayFormatter:"",dateMask:"yyyy/MM/dd",timeSecMask:"HH:mm:ss",timeMask:"HH:mm",title:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",positionFix:!1,autoFocus:!1,nextTabByEnter:!1,useAlert:!0},l.prototype.initialize=function(t){var e=this.options.style,i=this.options.readOnly
;if(this.options.style=this.options.positionFix?"height:100%;":"position:absolute;width:0px;height:100%",this.options.readOnly=this.options.inputReadOnly,"date"===this.options.dataType&&!0===this.options.autoFocus&&("day"==this.options.dateIncrementType?this.options.maxByteLength=8:"month"==this.options.dateIncrementType?this.options.maxByteLength=6:"hour"==this.options.dateIncrementType?this.options.maxByteLength=10:"minute"==this.options.dateIncrementType?this.options.maxByteLength=12:"year"==this.options.dateIncrementType&&(this.options.maxByteLength=4)),this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":"day"==this.options.dateIncrementType?this.options.displayFormat=this.options.dateMask:"month"==this.options.dateIncrementType?this.options.displayFormat="yyyy/MM":"hour"==this.options.dateIncrementType?this.options.displayFormat="yyyy/MM/dd HH":"minute"==this.options.dateIncrementType?this.options.displayFormat="yyyy/MM/dd HH:mm":"year"==this.options.dateIncrementType&&(this.options.displayFormat="yyyy");break;case"time":this.options.dataTypeTimeSecond?this.options.displayFormat=this.options.timeSecMask:"hour"==this.options.dateIncrementType||"minute"==this.options.dateIncrementType?this.options.displayFormat=this.options.timeMask:"second"==this.options.dateIncrementType&&(this.options.displayFormat=this.options.timeSecMask);break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter="-")}"month"==this.options.dateIncrementType?this.options.ioFormat="yyyyMM":"hour"==this.options.dateIncrementType?this.options.ioFormat="yyyyMMddHH":"minute"==this.options.dateIncrementType?this.options.ioFormat="yyyyMMddHHmm":"year"==this.options.dateIncrementType&&(this.options.ioFormat="yyyy"),"time"==this.options.dataType&&(this.options.ioFormat="HHmmss");var s=this.options.nextTabID;this.options.nextTabID=null,"number"===this.options.dataType&&(this.options.max&&""!=this.options.max&&!isNaN(Number(this.options.max))&&(this.options.maxValue=this.options.max),this.options.min&&""!=this.options.min&&!isNaN(Number(this.options.min))&&(this.options.minValue=this.options.min),this.options.initValue&&!isNaN(Number(this.options.initValue))&&(this.options.minValue&&Number(this.options.minValue)>Number(this.options.initValue)&&(this.options.initValue=this.options.minValue),this.options.maxValue&&Number(this.options.maxValue)<Number(this.options.initValue)&&(this.options.initValue=this.options.maxValue)));var n=o.x.extend({},this.options),l=this.id+"___input";n.id=l,delete n._scope_obj_org_id,delete n._scope_obj_uuid,delete n._scope_obj_runtime_id,this.input=new WebSquare.uiplugin.input(l,n,t),this.input.options.useAlert=this.options.useAlert;var h=this.uuid;this.input.handleBlurEventBasic=function(t){if(!this.getReadOnly()||this.options.readOnlyFocusEvent){r.B.fireEvent(this,"oneditend"),this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass),this.setValue(this.getValue())
;var e=WebSquare.historyManager.get(this.options.pluginName,this.id);if(void 0===e.value&&(e.value=this.originalValue),e.value!=this.getValue()){var i=WebSquare.idCache[h];r.B.fireEvent(i,"onchange"),r.B.fireEvent(i,"onviewchange",{oldValue:e.value,newValue:this.getValue()})}if(("date"==this.options.dataType||"time"==this.options.dataType)&&null!=this.options.dateIncrementType&&""!==this.getValue())if(void 0===WebSquare.date.dateTimeAdd(this.getValue(),0,this.options.dateIncrementType,this.options.dataType,this.options.dataTypeTimeSecond,{useAlert:this.options.useAlert}))if(!0===this.options.autoFocus&&!1!==this.options.useAlert&&"year"!==this.options.dateIncrementType){var o=this;setTimeout((function(){o.focus()}),1)}else this.blur();r.B.fireEvent(this,"onblur",t),r.B.fireEvent(this,"onafteredit"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),a.D.isIEAllVersion()||a.D.isOpera()||r.B.fireEvent(this,"onfocusout",t)}},this.options.nextTabID=s,this.options.style=e,this.options.readOnly=i,this.addControl(this.input),this.modelControl.ref=this.options.ref,this.input.modelControl.id=this.id,this.input.modelControl.scope_uuid=this.options._scope_obj_uuid,this.options.skin&&""!=this.options.skin&&(this.options.spinnerClass=this.options.skin)},l.prototype.toHTML=function(){try{var t=this.isGridCellComponent?"w2grid_spinner_up_start":"w2spinner_up_start",e=this.isGridCellComponent?"w2grid_spinner_up_center":"w2spinner_up_center",i=this.isGridCellComponent?"w2grid_spinner_up_end":"w2spinner_up_end",o=this.isGridCellComponent?"w2grid_spinner_up_image":"w2spinner_up_image",r=this.isGridCellComponent?"w2grid_spinner_down_start":"w2spinner_down_start",a=this.isGridCellComponent?"w2grid_spinner_down_center":"w2spinner_down_center",n=this.isGridCellComponent?"w2grid_spinner_down_end":"w2spinner_down_end",l=this.isGridCellComponent?"w2grid_spinner_down_image":"w2spinner_down_image",h=[],d="",u=""==this.options.style?"":"style='"+this.options.style+"'";if(d="vertical"==this.options.buttonPosition?"w2_vertical ":"w2_horizon ",d+=this.options.spinnerClass+" ",this.options.positionFix){var c="type2"==this.options.skin?"w2spinner_pos_fix ":"";h.push("<div id='"+this.id+"' "+u+" class='w2spinner w2spinner_pos_fix_alignment "+d+this.options.className+"'>"),"type1"==this.options.skin&&(h.push(this.getChild(this.id+"___input").toHTML()),h.push("<div id='"+this.id+"_btnArea' class='w2spinner_btnArea' style='width:"+this.options.buttonSize+"px' >")),h.push("<div id='"+this.id+"_upButton' class='w2spinner_up "+c+"' style='width:"+this.options.buttonSize+"px;' >"),h.push("<div class='"+t+"'></div>"),h.push("<div class='"+e+"'></div>"),h.push("<div class='"+i+"'></div>"),h.push("<div id='"+this.id+"_upButton_image' class='"+o+"'></div>"),h.push("</div>"),"type2"==this.options.skin&&h.push(this.getChild(this.id+"___input").toHTML()),h.push("<div id='"+this.id+"_downButton' class='w2spinner_down "+c+"' style='width:"+this.options.buttonSize+"px;' >"),h.push("<div class='"+r+"'></div>"),h.push("<div class='"+a+"'></div>"),h.push("<div class='"+n+"'></div>"),h.push("<div id='"+this.id+"_downButton_image' class='"+l+"'></div>"),h.push("</div>"),"type1"==this.options.skin&&h.push("</div>"),h.push("</div>")}else h.push("<div id='"+this.id+"' "+u+" class='w2spinner "+d+this.options.className+"'>"),h.push("<div id='"+this.id+"_upButton' class='w2spinner_up'>"),h.push("<div class='"+t+"'></div>"),h.push("<div class='"+e+"'></div>"),h.push("<div class='"+i+"'></div>"),h.push("<div id='"+this.id+"_upButton_image' class='"+o+"'></div>"),h.push("</div>"),h.push("<div id='"+this.id+"_downButton' class='w2spinner_down'>"),h.push("<div class='"+r+"'></div>"),h.push("<div class='"+a+"'></div>"),h.push("<div class='"+n+"'></div>"),h.push("<div id='"+this.id+"_downButton_image' class='"+l+"'></div>"),h.push("</div>"),
h.push(this.getChild(this.id+"___input").toHTML()),h.push("</div>");return h.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),"date"==this.options.dataType){this.dateValidator=null,this.input.validator.addCommand(new WebSquare.validator.dateCommand(this.options.ioFormat)),this.options.validateOnInput||this.input.validator.addCommand(new WebSquare.validator.ignoreCharCommand(" -/:-~"));var t;if(t=this.options.ioFormat.length,this.input.validator.addCommand(new WebSquare.validator.maxLengthCommand(t)),this.input.validator.addCommand(new WebSquare.validator.minLengthCommand(t)),this.validMesssage=WebSquare.language.getMessage("IC_invalidCalendarSelect"),null==this.validMesssage||""==this.validMesssage){var e=WebSquare.language.getMessage("TabControl_warning1")||"날짜 형식이 잘못 되었습니다.";this.validMesssage=e}}this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.positionFix?this._adjustAlignment():this.setInputStyle(),this.options.inputReadOnly&&this.input.bind("onmousedown",(function(t){r.B.preventDefault(t)}))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setSize=function(t,e){try{n.s.prototype.setSize.call(this,t,e),this.setInputStyle()}catch(t){s.w.printStackTrace(t)}},l.prototype.refreshItemset=function(){},l.prototype.refresh=function(){},l.prototype.setInputStyle=function(){try{this.input.originalStyleObj={paddingTop:parseInt(this.input.getStyle("padding-top"))||0,paddingBottom:parseInt(this.input.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.input.getStyle("padding-left"))||0,paddingRight:parseInt(this.input.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.input.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.input.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.input.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.input.getStyle("border-right-width"))||0};var t=this.input.originalStyleObj.paddingLeft+this.input.originalStyleObj.paddingRight+this.input.originalStyleObj.borderLeftWidth+this.input.originalStyleObj.borderRightWidth,e=this.input.originalStyleObj.paddingTop+this.input.originalStyleObj.paddingBottom+this.input.originalStyleObj.borderTopWidth+this.input.originalStyleObj.borderBottomWidth,i=this.render.clientWidth||parseInt(this.render.style.width,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"width"),10),o=this.render.clientHeight||parseInt(this.render.style.height,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"height"),10);if("vertical"==this.options.buttonPosition){var r=this.render.clientHeight-e-this.options.buttonSize;r<0&&(r=0),this.input.setStyle("width",this.render.clientWidth+"px"),this.input.setStyle("height",r+"px")}else{var a=i-t-this.options.buttonSize;a<0&&(a=0),this.input.setStyle("width",a+"px"),this.input.setStyle("height",o+"px")}this.input.setVerticalAlign()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype._adjustAlignment=function(){try{this.input.originalStyleObj={paddingTop:parseInt(this.input.getStyle("padding-top"))||0,paddingBottom:parseInt(this.input.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.input.getStyle("padding-left"))||0,paddingRight:parseInt(this.input.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.input.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.input.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.input.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.input.getStyle("border-right-width"))||0}
;var t=this.input.originalStyleObj.paddingLeft+this.input.originalStyleObj.paddingRight+this.input.originalStyleObj.borderLeftWidth+this.input.originalStyleObj.borderRightWidth;"type2"==this.options.skin&&(t+=this.input.options.buttonSize,this.input.setStyle("left","0")),this.input.setStyle("height",this.render.offsetHeight+"px"),this.input.setStyle("width",this.render.clientWidth-t-this.options.buttonSize+"px")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleClickEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2spinner_up")){this.upButtonClick();break}if(e.match("w2spinner_down")){this.downButtonClick();break}}e=null},l.prototype.handleMousewheelEvent=function(t){try{r.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2spinner")){if(t.wheelDelta>0||t.detail<0){this.upButtonClick();break}r.B.fireEvent(this,"onDownButtonClick"),this.downButtonClick();break}e=null}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(9==e||13==e&&!0===this.options.nextTabByEnter)for(var i=this.event.getTargetIterator(t,this.render);i.next();){var o;if(i.match("w2input"))if(!1!==r.B.fireEvent(this,"oneditenter",t))if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(r.B.preventDefault(t),o=a.D.getPreTabbableComp(this.id))return void o.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(r.B.preventDefault(t),o=a.D.getNextTabbableComp(this.id))return void o.focus()}else 38==e?this.upButtonClick():40==e&&this.downButtonClick()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.focus=function(){try{this.input.focus()}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.upButtonClick=function(){if(0!=r.B.fireEvent(this,"onUpButtonClick"))if("number"==this.options.dataType){if(""==this.getValue())i=1,this.options.minValue&&(i=this.options.minValue);else{var t=Number(this.options.minValue),e=Number(this.options.maxValue),i=Number(this.getValue())+Number(this.options.increment),o=Number(this.getValue());this.options.maxValue?i<=e?this.options.minValue&&i<t&&(i=t):i=e:this.options.minValue&&i<t&&(i=t)}this.setValue(i),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("date"==this.options.dataType)if("day"==this.options.dateIncrementType||"month"==this.options.dateIncrementType){var s="";s=8==this.options.ioFormat.length?this.calcurateDate(this.getValue(),this.options.increment,"day",this.options.dataType):this.calcurateDate(this.getValue(),this.options.increment,"month",this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else{s="";s=this.calcurateDate(this.getValue(),this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("time"==this.options.dataType){s="";s=this.calcurateDate(this.getValue(),this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}},l.prototype.downButtonClick=function(){if(0!=r.B.fireEvent(this,"onDownButtonClick"))if("number"==this.options.dataType){if(""==this.getValue())i=1,this.options.minValue&&(i=this.options.minValue);else{var t=Number(this.options.minValue),e=Number(this.options.maxValue),i=Number(this.getValue())-Number(this.options.increment),o=Number(this.getValue());this.options.minValue?i>=t?this.options.maxValue&&i>e&&(i=e):i=t:this.options.maxValue&&i>e&&(i=e)}this.setValue(i),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("date"==this.options.dataType)if("day"==this.options.dateIncrementType){var s=""
;s=8==this.options.ioFormat.length?this.calcurateDate(this.getValue(),-1*this.options.increment,"day",this.options.dataType):this.calcurateDate(this.getValue(),-1*this.options.increment,"month",this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else{s="";s=this.calcurateDate(this.getValue(),-1*this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("time"==this.options.dataType){s="";s=this.calcurateDate(this.getValue(),-1*this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.B.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}},l.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=a.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){s.w.printStackTrace(t)}},l.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=a.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){s.w.printStackTrace(t)}},l.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){s.w.printStackTrace(t)}},l.prototype.setNextTabID=function(t,e){try{null!=t&&a.D.setNextTabID(this.id,t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.calcurateDate=function(t,e,i,o){var s=parseInt(t.substring(0,4),10),r=parseInt(t.substring(4,6),10),a="",n=WebSquare.date.getMaxMinYear(),l=n.maxYear,h=n.minYear;return e=parseInt(e,10),8==t.length&&(a=parseInt(t.substring(6,8),10)),"day"==i?(t=WebSquare.date.dateAdd(t,e,{useAlert:this.options.useAlert}),isNaN(t)&&(t=""),t):"day"==this.options.dateIncrementType||"month"==i?6!=t.length?(!1!==this.options.useAlert&&alert(WebSquare.language.getMessage("E_date_month_ShouldBeyyMMFormat",t)),t):s>l||s<h?(!1!==this.options.useAlert&&alert(WebSquare.language.getMessage("E_date_YearRange",h,l,s)),s):r>12||r<1?(!1!==this.options.useAlert&&alert(WebSquare.language.getMessage("E_date_MonthRange","1","12",r)),r):((r+=e)>12?(s+=parseInt(r/12),r=parseInt(r%12)):r<0?(s-=parseInt(-1*r/12)+1,r=12-parseInt(-1*r%12)):0==r&&(s-=1,r=12),r<10&&(r="0"+r),a?(a<10&&(a="0"+a),s+""+r+a):s+""+r):t=WebSquare.date.dateTimeAdd(t,e,i,o,this.options.dataTypeTimeSecond)},l.prototype.setDisabled=function(t){try{t=a.D.getBoolean(t),t=n.s.prototype.setDisabled.call(this,t),this.input.setDisabled(t)}catch(t){s.w.printStackTrace(t)}return t},l.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":e?this.addClass(this.render,"w2spinner_disabled"):this.removeClass(this.render,"w2spinner_disabled")}}catch(t){s.w.printStackTrace(t,null,this)}},l.apiExtend=function(){var t=WebSquare.uiplugin.input.prototype,e=WebSquare.uiplugin.spinner.prototype;for(var i in t)e[i]||(e[i]=function(t){return function(){return this.input[t].apply(this.input,arguments)}}(i));e.refresh=function(){return this.input.refresh.apply(this.input,arguments)}},l.prototype.finalize=function(){try{for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove()}catch(t){s.w.printStackTrace(t,null,this)}},l._initImport=function(){l.apiExtend()},o.x._initImportList.push("uiplugin.spinner")},8491:function(t,e,i){"use strict";i.r(e),i.d(e,{tabControl:function(){return g},content:function(){return m}});var o=i(2137),s=i(7757),r=i.n(s),a=i(1974),n=i(5052),l=i(5948),h=i(1454),d=i(8683),u=i(9075),c=i(1),p=i(3252),g=function(t,e,i){c.s.call(this,t,e,i)};a.x.extend(g.prototype,c.s.prototype),g.prototype.defaultOptions={pluginType:"uiplugin.tabControl",pluginName:"tabControl",
userEvents:["ontabclick","onchange","ontabclose","onbeforeselect","onbeforetabclose","onbeforetabmove","onaftertabmove","ondrawcomplete","ontabload","ontabsplit"],useConfig:!0,selectedIndex:0,containerClass:"w2tabcontrol_container",hostClass:"w2tabcontrol_tabhost",tabPosition:"",tabClass:"",tabStyle:"",activeTabClass:"w2tabcontrol_active",overTabClass:"w2tabcontrol_over",disabledTabClass:"w2tabcontrol_disabled",contentsClass:"w2tabcontrol_contents",selectedClass:"w2tabcontrol_selected",alwaysDraw:!1,useTabKeyOnly:!1,useMoveNextTabFocus:!1,useBackbridge:!1,useH3Bridge:!1,useConfirmMessage:!1,confirmTrueAction:"exist",confirmFalseAction:"new",confirmMessage:"[#title]탭이 존재합니다. 기존의 탭을 사용하시려면 '확인'을 새로운 탭을 생성하시려면 '취소'를 선택하세요",confirmMessageLocaleRef:"",tabScroll:!1,mobileTabScroll:!1,adjustTabScroll:!1,visibleRowNum:5,closable:!1,useBridgeHelper:!0,spa:!1,spaIframeMaxSize:0,spaIframeMinSize:0,spaInitCount:0,windowMaxNum:-1,tabScrollAuto:!1,focusOnStart:!0,useDrag:!1,preventTabClickEvent:!1,useLocale:!1,localeRef:"",hiddenTab:!1,useATagBtn:!1,tabMove:!1,initStyle:!1,useAccessibilityMenu:!1,forceChildCompEnabled:!1,tableRender:"",removeBridge:!1,spaAuto:!1,spaAutoDelay:3e3,closeAllBtn:!1,processMsgFrame:!1,frameModal:!1,changeActiveTab:!1,keepDisabledTab:!1,senseReader:!1};var m=function(){};m.prototype.defaultOptions={alwaysDraw:!1,src:"",style:"",frameMode:"",name:"",title:"",scope:!1,tabHTML:"",initScript:"",postScript:"",frameModal:"",processMsgFrame:""},g.prototype.initialize=function(t){try{if(this.selectedIndex=0,this.tabArr=[],this.contentsArr=[],this.tabContentOptions=WebSquare.uiplugin.content.prototype.defaultOptions,this.focusedIndex=-1,this.activeFirstTime=!1,this.increaseKey=0,this.visibleTabIndex=0,this.itemTable=null,this.isOpen=!1,this.itemTableTdMargin=null,this.senseReaderMode=!0,this.bridgeIdArr=[],this.backbridgeIdArr=[],this.lastEventType="",this.storedFrame=[],this.autoNum=0,this.options.iframeStorageCount&&!this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.iframeStorageCount),this.options.iframeMaxSize&&!this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.iframeMaxSize),this.options.iframeMinSize&&!this.options.spaIframeMinSize&&(this.options.spaIframeMinSize=this.options.iframeMinSize),this.options.spaIframeMinSize>this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize),this.options.spaInitCount>0&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount),("true"==n.v.getConfiguration("/WebSquare/spa/@value")||this.options.spaIframeMaxSize>0)&&(this.options.spa=!0),this.options.spaAuto&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!0),d.D.getBoolean(this.options.useATagBtn)&&d.D.getBoolean(this.options.closable)?this.options.useATagBtn=!0:this.options.useATagBtn=!1,0==this.options.forceChildCompEnabled&&(this.options.forceChildCompEnabled=n.v.getConfiguration("/WebSquare/tabControl/forceChildCompEnabled/@value")||!1),null==t)return;this._initializeIScroll(),this.disabledTabStack=[],this.disabledComponents={},this.tabArr=this.makeTabArray(t,this.options),this.contentsArr=this.makeTabContentsArray(t,this.tabContentOptions,this.tabArr),this.initAllContents(),this.options.changeActiveTab&&(this.options.tabScroll=!0),!this.options.tabScroll||"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||(this.options.tabScroll=!1)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.initContents=function(t){try{var e,i,o=this.options._scope_obj_uuid,s=null==o?null:WebSquare.idCache[o],r=t.contentsID;null!=s&&(r=this.options._scope_obj_org_id+t.contentsID.slice(this.id.length));var a,h=!0,u=d.D.getBoolean(t.scope)||d.D.getBoolean(n.v.getConfiguration("/WebSquare/wframe/scope/@value"));switch(t.frameMode){case"iframe":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",style:"width:100%; height:100%;",name:t.name,
title:t.title,spa:this.options.spa,pluginName:"iframe"};break;case"wframe":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",scope:u,pluginName:"wframe",delegateProcessMsg:t.delegateProcessMsg||!1!==t.delegateProcessMsg&&d.D.getBoolean(this.options.delegateProcessMsg)||!1,processMsgFrame:t.processMsgFrame||!1!==t.processMsgFrame&&this.options.processMsgFrame||!1,frameModal:t.frameModal||!1!==t.frameModal&&this.options.frameModal||!1},t.initScript&&(e.initScript=t.initScript),t.postScript&&(e.postScript=t.postScript);break;case"wframePreload":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",scope:u,pluginName:"wframe",src:t.src,preload:!0,delegateProcessMsg:t.delegateProcessMsg||!1!==t.delegateProcessMsg&&d.D.getBoolean(this.options.delegateProcessMsg)||!1,processMsgFrame:t.processMsgFrame||!1!==t.processMsgFrame&&this.options.processMsgFrame||!1,frameModal:t.frameModal||!1!==t.frameModal&&this.options.frameModal||!1},t.initScript&&(e.initScript=t.initScript),t.postScript&&(e.postScript=t.postScript);break;default:h=!1,(i=t.xml).setAttribute("className","w2tabcontrol_contents_wrapper")}return a=i&&"json"===i._elementType?p.D.createByJSON(r+"_body",null,i._element,s,o,h):p.D.create(r+"_body",e,i,s,o,h),t.dataObject&&a.setDataObject(t.dataObject),a}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.initAllContents=function(){try{for(var t,e,i=0;i<this.contentsArr.length;i++)t=this.contentsArr[i],e=this.initContents(t),this.addControl(e)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.makeTabContentsArray=function(t,e,i){try{if(null==i||i.length<1)return[];for(var o=[],s={},r=t.getChildNodes(),n=[],h=0;h<r.length;h++)"w2:content"===r[h].getTagName()&&n.push(r[h]);for(h=0;h<i.length;h++){var u=h<n.length?n[h]:null;null==u||1!=u.getNodeType()||"w2:content"!=u.getTagName()?(u=null,s={}):s=WebSquare.WebSquareparser.parseAttribute(u);var c=null==u||null==u.getAttribute("id")?this.id+"_contents_"+h:this.id+"_contents_"+u.getAttribute("id");i[h].contentsID=c,s.alwaysDraw?s.alwaysDraw=d.D.getBoolean(s.alwaysDraw):0==s.alwaysDraw||(s.alwaysDraw=this.options.alwaysDraw);var p=a.x.extend({contentsID:c,contentsClass:s.contentsClass||this.options.contentsClass,src:s.src||e.src,frameMode:null!=s.src&&""!=s.src?s.frameMode||e.frameMode:"",alwaysDraw:s.alwaysDraw,render:null,xml:u,name:s.name||"",title:s.title,scope:s.scope||e.scope},s||{});null!=p.src&&""!=p.src&&""==p.frameMode&&(p.frameMode="wframe"),o.push(p)}return o}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.makeTabArray=function(t,e){try{if(null==t)return[];for(var i=[],o=!1,s=!1,r=0,a=t.getChildNodes(),n=0;n<a.length;n++){var h=a[n];if(1==h.getNodeType()&&"w2:tabs"==h.getTagName()){if(r++,-1!=this.options.windowMaxNum&&r>this.options.windowMaxNum){alert(WebSquare.language.getMessage("TabControl_maxNum_warning",this.options.windowMaxNum));break}var u=h.getAttribute("id"),c=this.id+"_tab_"+(null==u?n:u),p=WebSquare.WebSquareparser.parseAttribute(h);if(void 0===p.label&&(p.label=""),("true"==p.useLocale||this.options.useLocale&&"false"!=p.useLocale)&&p.localeRef){var g=this.getLocaleValue(p.localeRef);g&&(p.label=g)}1==this.options.closable&&(o=!0),1==this.options.useATagBtn&&(s=!0);var m={tabID:c,userTabID:u,contentsID:"",tabLabel:p.label,disabled:"true"==p.disabled,render:null,tabWidth:parseInt(p.tabWidth,10)>0?parseInt(p.tabWidth,10):this.options.tabWidth,tabGap:parseInt(p.tabGap,10)>0?parseInt(p.tabGap,10):this.options.tabGap,tabHeight:parseInt(p.tabHeight,10)>0?parseInt(p.tabHeight,10):this.options.tabHeight,tabClass:p.className||this.options.tabClass,tabStyle:p.style||this.options.tabStyle,activeTabClass:p.activeTabClass||this.options.activeTabClass,disabledTabClass:p.disabledTabClass||this.options.disabledTabClass,selectedClass:p.selectedClass||this.options.selectedClass,selectedImage:p.selectedImage?"url("+p.selectedImage+")":"",defaultImage:p.defaultImage?"url("+p.defaultImage+")":"",
hoverImage:p.hoverImage?"url("+p.hoverImage+")":"",tabType:"image"==p.tabType?"image":"text",defaultClass:p.defaultClass||"",hoverClass:p.hoverClass||"",closable:1==d.D.getBoolean(p.closable)||o,hiddenTab:1==d.D.getBoolean(p.hiddenTab),closeBtn:null,label:p.label,value:c,title:p.title||p.label,tabHTML:p.tabHTML,useATagBtn:1==d.D.getBoolean(p.useATagBtn)||s};"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||"string"==typeof m.tabStyle&&m.tabStyle.indexOf("width")<0&&(m.tabStyle="width:"+15*m.label.length+"px;"+m.tabStyle),i.push(m)}}return i}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i="";switch(this.options.tabPosition){case"top":i="w2tabcontrol_top ";break;case"bottom":i="w2tabcontrol_bottom ";break;case"left":i="w2tabcontrol_left ";break;case"right":i="w2tabcontrol_right "}return t.push("<div id='"+this.id+"' "+e+" class='w2tabcontrol "+i+this.options.className+"'>"),"bottom"==this.options.tabPosition&&t.push(this.makeAllContentsHTML()),this.options.tabScroll&&!d.D.isMobile()||this.options.tabScroll&&!this.options.mobileTabScroll?(t.push("<div id='"+this.id+"_control' class='w2tabcontrol_control'>"),this.options.useAccessibilityMenu?t.push("<button type='button' title='"+WebSquare.language.getMessage("TabControl_previous_tab")+"' id='"+this.id+"_btn_scrollLeft' class='w2tabcontrol_control btn_scrollLeft'></button>"):t.push("<div id='"+this.id+"_btn_scrollLeft' class='w2tabcontrol_control btn_scrollLeft' title='"+WebSquare.language.getMessage("TabControl_previous_tab")+"' tabindex='-1'></div>"),t.push("<div id='"+this.id+"_mask' class='w2tabcontrol_control mask'>"),t.push("<div id='"+this.id+"_scroll' class='w2tabcontrol_control scroll'>")):d.D.isMobile()&&this.options.mobileTabScroll&&t.push("<div id='"+this.id+"_mobiletabscroll' class='w2tabcontrol_mobiletabscroll'>"),t.push(this.makeAllTabHTML()),this.options.tabScroll&&!d.D.isMobile()||this.options.tabScroll&&!this.options.mobileTabScroll?(t.push("</div>"),t.push("</div>"),this.options.useAccessibilityMenu?(t.push("<button type='button' id='"+this.id+"_btn_scrollRight' title='"+WebSquare.language.getMessage("TabControl_next_tab")+"' class='w2tabcontrol_control btn_scrollRight'></button>"),t.push("<button type='button' id='"+this.id+"_btn_submenu' title='"+WebSquare.language.getMessage("TabControl_tab_list")+"' class='w2tabcontrol_control btn_submenu'></button>")):(t.push("<div id='"+this.id+"_btn_scrollRight' class='w2tabcontrol_control btn_scrollRight' title='"+WebSquare.language.getMessage("TabControl_next_tab")+"' tabindex='-1'></div>"),t.push("<div id='"+this.id+"_btn_submenu' class='w2tabcontrol_control btn_submenu' title='"+WebSquare.language.getMessage("TabControl_tab_list")+"' tabindex='-1'></div>")),t.push("</div>")):d.D.isMobile()&&this.options.mobileTabScroll&&t.push("</div>"),"bottom"!=this.options.tabPosition&&t.push(this.makeAllContentsHTML()),t.push("</div>"),t.join("")}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.makeTextTabHTML=function(t,e,i){try{var o=WebSquare.language.getMessage("TabControl_close")||"닫기",s="";switch(this.options.tabPosition){case"top":s=" w2tabcontrol_tabhost_top";break;case"bottom":s=" w2tabcontrol_tabhost_bottom";break;case"left":s=" w2tabcontrol_tabhost_left";break;case"right":s=" w2tabcontrol_tabhost_right"}
var r=["<li id='",null,"'  class='w2tabcontrol_li ",null,"' ",null," index='",null,"' ><div class='w2tabcontrol_tab_center"+s+"' ><a role='tab' id='"+t.tabID+"_tabHTML'",null,"' href='",null,"' ",null," "+(0==this.options.useTabKeyOnly?"tabindex='-1'":"")+" >",null,"</a></div><div class='w2tabcontrol_tab_left"+s+"'></div><div class='w2tabcontrol_tab_right"+s+"' >","<div id='",null,"' class='w2tabcontrol_tab_close' title='"+o+"'></div></div></li>"],a=(t.tabWidth>0?"width:"+t.tabWidth+"px;":"")+(t.tabHeight>0?"height:"+t.tabHeight+"px;line-height:"+(t.tabHeight-1)+"px;":"")+(t.tabGap>0?"margin-right:"+t.tabGap+"px;":"")+(t.tabStyle?t.tabStyle:"");return r[1]=t.tabID,r[3]=" w2tabcontrol_li_"+e+(t.disabled?" "+t.disabledTabClass:"")+(t.tabClass?" "+t.tabClass:""),i||e!==this.options.selectedIndex+1?r[3]+=t.defaultClass?" "+t.defaultClass:"":r[3]+=" "+t.activeTabClass+(t.selectClass?" "+t.selectClass:" "+t.selectedClass),r[5]=""==a?"":'style="'+a+'"',r[7]=e,r[9]=" aria-controls='"+t.contentsID+"'",r[9]+=" aria-selected='"+(e===this.options.selectedIndex+1?"true":"false"),this.options.removeBridge?r[11]="javascript:void(null);":r[11]="#"+t.contentsID+"_bridge",r[13]=""==t.title?"":'title="'+t.title+'"',r[15]=t.tabLabel,d.D.getBoolean(this.options.useATagBtn)&&(r[17]="<a id='",r[19]="' class='w2tabcontrol_tab_close_atag' href='javascript:void(null);' title='닫기'></a></div></li>"),r[18]=t.tabID+"_close",r.join("")}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.makeImageTabHTML=function(t,e,i){try{var o=WebSquare.language.getMessage("TabControl_close")||"닫기",s=["<li id='",null,"' class='w2tabcontrol_li ",null,"' ",null," index='",null,"'><div  id='"+t.tabID+"_tabHTML' class='w2tabcontrol_tab_center2' ",null," ",null," role='tab' ",null," "+(0==this.options.useTabKeyOnly?"tabindex='-1'":"")+" ></div><div class='w2tabcontrol_tab_left2'></div><div class='w2tabcontrol_tab_right2' >","<div id='",null,"' class='w2tabcontrol_tab_close2' title='"+o+"'></div>","</div></li>"],r=(t.tabWidth>0?"width:"+t.tabWidth+"px;":"")+(t.tabHeight>0?"height:"+t.tabHeight+"px;line-height:"+(t.tabHeight-1)+"px;":"")+(t.tabGap>0?"margin-right:"+t.tabGap+"px;":"")+(t.tabStyle?t.tabStyle:"");return s[1]=t.tabID,s[3]=" w2tabcontrol_li_"+e+(t.disabled?" "+t.disabledTabClass:"")+(t.tabClass?" "+t.tabClass:""),i||e!==this.options.selectedIndex+1?(s[3]+=t.defaultClass?" "+t.defaultClass:"",s[9]=t.defaultImage?"style='background-image:"+t.defaultImage+";":""):(s[3]+=" "+t.activeTabClass+(t.selectClass?" "+t.selectClass:" "+t.selectedClass),s[9]=t.selectedImage?"style='background-image:"+t.selectedImage+";'":""),s[5]=""==r?"":'style="'+r+'"',s[7]=e,s[11]=""==t.title?"":'title="'+t.title+'"',s[13]=""==t.contentsID?"":'aria-controls="'+t.contentsID+'"',s[13]+=" aria-selected='"+(e===this.options.selectedIndex+1?"true":"false")+"'",s[16]=t.tabID+"_close",d.D.getBoolean(this.options.useATagBtn)&&(s[15]="<a id='",s[17]="' class='w2tabcontrol_tab_close2_atag' href='javascript:void(null);' title='"+o+"'></a>"),s.join("")}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.makeAllTabHTML=function(){try{var t="";switch(this.options.tabPosition){case"top":t="w2tabcontrol_tabhost_top";break;case"bottom":t="w2tabcontrol_tabhost_bottom";break;case"left":t="w2tabcontrol_tabhost_left";break;case"right":t="w2tabcontrol_tabhost_right"}var e=[];e.push("<ul id='"+this.id+"_tabhost' class='"+this.options.hostClass+" "+t+"' role='tablist' >");for(var i=0;i<this.tabArr.length;i++){var o=this.tabArr[i];this.tabArr[i].hiddenTab&&(o.tabStyle=o.tabStyle+"; display:none; visibility:hidden;");var s="make"+o.tabType.capitalize()+"TabHTML";e.push(this[s](o,i+1))}return e.push("</ul>"),e.join("")}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.makeContentsHTML=function(t,e,i,o){try{var s=["<div id='",null,"' class='",null,"' role='tabpanel",null,null,null,"</div>"],r=this.getChild(t.contentsID+"_body"),a=""
;a=this.contentsArr[this.options.selectedIndex]!==t?"' aria-hidden='true' style='display:none'>":"' aria-hidden='false'>";var n="",h="";if(this.options.useTabKeyOnly){var u=t.title||e;if(this.options.useH3Bridge)n="<h3 id='"+t.contentsID+"_bridge' style='' class='w2tabcontrol_contents_bridge_h3'>"+u+"</h3>",o>=0?this.bridgeIdArr.splice(o,0,t.contentsID+"_bridge"):this.bridgeIdArr.push(t.contentsID+"_bridge");else{var c=this.options.useBridgeHelper?"<h3 id='"+t.contentsID+"_bridge_helper' style='position:absolute;text-indent : -10000px;background:none;height:0px;' class='w2tabcontrol_contents_bridge_helper'>"+u+"</h3>":"";n=!0!==this.options.removeBridge||this.options.adaptive||d.D.isMobile()?"<a id='"+t.contentsID+"_bridge' class='w2tabcontrol_bridge' href='#'>"+c+"</a>":c,o>=0?this.bridgeIdArr.splice(o,0,t.contentsID+"_bridge"):this.bridgeIdArr.push(t.contentsID+"_bridge")}}return this.options.useBackbridge&&(h="<a id='"+t.contentsID+"_backbridge' tabindex='0' title='go back' class='w2tabcontrol_bridge'></a>",o>=0?this.backbridgeIdArr.splice(o,0,t.contentsID+"_backbridge"):this.backbridgeIdArr.push(t.contentsID+"_backbridge")),s[1]=t.contentsID,s[3]=t.contentsClass,s[5]=d.D.getBoolean(this.options.removeAriaLabelledby)?"":"' aria-labelledby='"+e,s[6]=a,s[7]=n,s[7]+=t.alwaysDraw&&!i?r.toHTML():"",s[7]+=h,s.join("")}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.makeAllContentsHTML=function(){try{var t=[];t.push("<div id='"+this.id+"_container' class='"+this.options.containerClass+"'>");for(var e=0;e<this.contentsArr.length;e++){var i=this.contentsArr[e],o=this.tabArr[e];t.push(this.makeContentsHTML(i,o.tabLabel))}return t.push("</div>"),t.join("")}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setAdaptive=function(){try{var t,e=this.options.adaptive,i=parseInt(this.options.adaptiveThreshold)||480;"layout"==e&&(t="w2tab_adaptive_layout"),d.D.isIE()&&parseInt(n.v.browserVersion(),10)<10||(parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=i?this.hasClass(t)||this.addAdaptive():this.hasClass(t)&&this.removeAdaptive())}catch(t){l.w.printStackTrace(t)}},g.prototype.addAdaptive=function(){try{var t;if("layout"==this.options.adaptive&&(t="w2tab_adaptive_layout"),this.addClass(t),this.options.tabScroll)document.getElementById(this.id+"_control").style.display="none"}catch(t){l.w.printStackTrace(t)}},g.prototype.removeAdaptive=function(){try{var t;if("layout"==this.options.adaptive&&(t="w2tab_adaptive_layout"),this.removeClass(t),this.options.tabScroll)document.getElementById(this.id+"_control").style.display="block"}catch(t){l.w.printStackTrace(t)}},g.prototype.setAction=function(){try{if(this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}var i=WebSquare.BootLoader.fullViewed||!1,o=d.D.fullViewed||!1;i||o||"layout"==this.options.adaptive&&(this.setAdaptive(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive)));for(var s=this.getTabHostAndContainer(),r=0;r<this.tabArr.length;r++){var a=this.tabArr[r];a.render=document.getElementById(a.tabID),a.closeBtn=document.getElementById(a.tabID+"_close"),a.contentsRender=document.getElementById(a.contentsID),this.contentsArr[r].render=a.contentsRender;var u=this.contentsArr[r].frameMode;if(1==this.contentsArr[r].alwaysDraw&&("iframe"===u||"wframe"===u||"wframePreload"===u)){var c=this.getChild(a.contentsID+"_body");c.options&&"wframe"===c.options.pluginName&&(c.options.mode="sync"),this._addTabEvent({uuid:c.uuid,tabID:a.tabID,idx:r,userTabID:a.userTabID}),"wframePreload"!==u&&c.setSrc(this.contentsArr[r].src,this.contentsArr[r].forceReload),"iframe"===u&&d.D.isIEAllVersion()&&d.D.setInterval(this.checkLoadEvent,{key:c.id+"_checkLoadEvent",caller:this,args:[c],delay:70})}a.tabHTML&&this.setTabHTML(a.userTabID,a.tabHTML)}if(this.options.tabScroll){
WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:{}});var p=document.getElementById(this.id+"_btn_submenu");p&&(d.D.isMobile()?h.B.addListener(p,"ontouchstart",(function(t){h.B.stopPropagation(t)})):h.B.addListener(p,"onmousedown",(function(t){h.B.stopPropagation(t)})))}this.options.senseReader&&n.v.browserCheck.android||!d.D.isMobile()?(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleTabClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent))):(d.D.getBoolean(n.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleTabClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent))),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleMouseoverEvent))),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),d.D.isIE(6)&&this.event.addListener(this.render,"onresize",this.event.bindAsEventListener(this,this.handleResizeEvent));var g=this;if(this.options.useTabKeyOnly?(this.event.addListener(s.tabhost,"onfocusin",(function(t){g.lastEventType=t.type})),this.event.addListener(s.tabhost,"onkeydown",(function(t){var e=t.charCode||t.keyCode;9!==e&&13!==e||(g.lastEventType=t.type)})),this.event.addListener(s.tabhost,"onmousedown",(function(t){g.senseReaderMode=!1}))):(this.event.addListener(s.tabhost,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),this.event.addListener(s.container,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),1==this.options.useMoveNextTabFocus&&this.event.addListener(s.container,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusInEvent))),d.D.isMobile()?(this.event.addListener(s.tabhost,"ontouchstart",this.event.bindAsEventListener(this,this.handleTabMove)),this.event.addListener(s.tabhost,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove))):this.event.addListener(s.tabhost,"onmousedown",this.event.bindAsEventListener(this,this.handleTabMove)),this.options.useBackbridge)for(r=0;r<this.backbridgeIdArr.length;r++){var m=this.getElementById(this.backbridgeIdArr[r]);if(m){!function(t){h.B.addListener(m,"onkeydown",(function(e){13===(e.charCode||e.keyCode)&&g.setFocusedTab(t)}))}(r)}}this.setActiveTab(this.options.selectedIndex),this.adjustContentsHeight(),this.options.tabScroll&&this.options.adjustTabScroll&&this.checkScrollBtnVisibility()}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.onComplete=function(){n.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:10}),this.options.spaAuto&&n.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]}),c.s.prototype.onComplete.call(this)},g.prototype.makeIframe=function(){if(WebSquare.uiplugin.iframe){for(var t,e=this.storedFrame.length,i=0;i<this.contentsArr.length;i++)"iframe"==this.contentsArr[i].frameMode&&e++;this.options.spaIframeMinSize>e&&(this._makeIframe(),n.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:50}))}else{requires("uiplugin.iframe").then((t=this,function(e,i){t.makeIframe()}))}},g.prototype._makeIframe=function(){try{var t=document.getElementById(this.id+"_container"),e=["<div id='",null,"' class='",this.options.contentsClass,"' role='tabpanel","","' aria-hidden='true' style='display:none'>",null,"</div>"],i=this.uuid+"_iframe_"+this.autoNum++,o=new WebSquare.uiplugin.iframe(i,{className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",style:"width:100%; height:100%;",spa:this.options.spa,src:WebSquare.net.getBlankXML()});e[1]=i,
e[5]=d.D.getBoolean(this.options.removeAriaLabelledby)?"":"' aria-labelledby='",e[7]=o.toHTML();var s=document.createElement("div");s.innerHTML=e.join("");var r=s.removeChild(s.firstChild);t.appendChild(r),o.render=r.firstChild,this.storedFrame.push(o.id),o.activeStatus="active"}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.createFrame=function(t){try{if(this.options.windowMaxNum<=this.getTabCount()+this.storedFrame.length)return void u.k.printLog("["+this.id+"] createFrame error : frames are full ("+this.options.windowMaxNum+")");void 0!==t&&null!=t||(t={}),(isNaN(t.maxFrame)||t.maxFrame>this.storedFrame.length)&&this._makeIframe()}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.addRoundedCornerForIE=function(){try{for(var t=WebSquare.language.getMessage("TabControl_right_corner")||"오른쪽 모서리 이미지",e=WebSquare.language.getMessage("TabControl_left_corner")||"왼쪽 모서리 이미지",i=0;i<this.tabArr.length;i++){var o=this.tabArr[i];if("img"!=o.render.firstChild.nodeName.toLowerCase()){var s=document.createElement("img");s.src=a.x._resourceURI+"uiplugin/tabControl/images/right-top.png",s.className="w2tabcontrol_righttop",s.setAttribute("alt",t),o.render.insertBefore(s,o.render.firstChild),(s=document.createElement("img")).src=a.x._resourceURI+"uiplugin/tabControl/images/left-top.png",s.className="w2tabcontrol_lefttop",s.setAttribute("alt",e),o.render.insertBefore(s,o.render.firstChild),s=null}}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.getTabHostAndContainer=function(){try{var t=document.getElementById(this.id+"_tabhost");return{container:document.getElementById(this.id+"_container"),tabhost:t}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.adjustContentsHeight=function(){try{var t=this.getTabHostAndContainer(),e=t.container,i=t.tabhost,o=d.D.getStyleProperty(this.render,"height");if(d.D.isIEAllVersion()&&("auto"===o||"0px"===o)&&window.getComputedStyle)try{o=document.defaultView.getComputedStyle(this.render,null).getPropertyValue("height"),parseInt(o,10)<e.offsetHeight&&(this.render.style.height=e.offsetHeight+i.offsetHeight+"px")}catch(t){l.w.printStackTrace(t,null,this)}if(this.options.tabScroll&&"auto"!=o&&"0px"!=o){var s=document.getElementById(this.id+"_control");if(parseInt(o,10)==parseInt(d.D.getStyleProperty(s,"height"),10))return}if(null==o||""==o||"auto"==o||"0px"==o)return;if("%"==(o+"").charAt((o+"").length-1))return;var r=(parseInt(o,10)||0)-(parseInt(d.D.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(d.D.getStyleProperty(this.render,"padding-bottom"),10)||0),a=(parseInt(d.D.getStyleProperty(i,"height"),10)||0)+(parseInt(d.D.getStyleProperty(i,"border-top-width"),10)||0)+(parseInt(d.D.getStyleProperty(i,"border-bottom-width"),10)||0)+(parseInt(d.D.getStyleProperty(i,"margin-top"),10)||0)+(parseInt(d.D.getStyleProperty(i,"margin-bottom"),10)||0);switch(this.options.tabPosition?e.style.position="absolute":e.style.height=r-a+"px",this.options.tabPosition){case"top":e.style.height=r-a+"px",e.style.top=i.offsetTop+i.scrollHeight+"px";break;case"bottom":if(e.style.height=r-a+"px",this.options.tabScroll)(s=document.getElementById(this.id+"_control")).style.top=e.offsetTop+e.offsetHeight+"px";else i.style.top=e.offsetTop+e.offsetHeight+"px";break;case"left":for(var n=0,h=[],u=0;u<this.tabArr.length;u++)if(this.tabArr[u].render){var c=WebSquare.style.getSize(this.tabArr[u].render,"width");h.push(c),n=Math.max(c,n)}else h.push(-1);i.style.width=n+"px",i.style.left="0px",e.style.height=r+"px",e.style.left=n+"px",e.style.width="auto",e.style.right="0px";for(u=0;u<h.length;u++)h[u]<n&&(this.tabArr[u].render.style.left=n-h[u]+"px");break;case"right":for(n=0,u=0;u<this.tabArr.length;u++)this.tabArr[u].render&&(n=Math.max(WebSquare.style.getSize(this.tabArr[u].render,"width"),n));i.style.width=n+"px",i.style.right="0px",e.style.height=r+"px",e.style.left="0px",e.style.width="auto",e.style.right=n+"px"}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setClosable=function(t,e){try{
if(t=parseInt(t,10),e=e||!1,t<0||t>=this.tabArr.length)return!1;this.tabArr[t].closable=e}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setActiveTab=function(){var t=(0,o.Z)(r().mark((function t(e){var i,o,s,a,n,u,c,g,m,f,b,y,v;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,!((e=parseInt(e,10))<0||e>=this.tabArr.length)){t.next=5;break}return t.abrupt("return",!1);case 5:if(!this.tabArr[e].disabled&&!this.tabArr[e].hidden){t.next=10;break}return(i=this.tabArr[e]).render=document.getElementById(i.tabID),this.removeClass(i.render,i.activeTabClass),t.abrupt("return",!1);case 10:for(this.changeTabhostAccessibility(e),o=0;o<this.tabArr.length;o++){if((i=this.tabArr[o]).render=document.getElementById(i.tabID),o!=e){this.removeClass(i.render,i.activeTabClass),i.selectedClass&&this.removeClass(i.render,i.selectedClass),i.defaultClass&&this.addClass(i.render,i.defaultClass),i.contentsRender.style.display="none",i.contentsRender.style.visibility="hidden",i.contentsRender.setAttribute("aria-hidden","true"),this.addClass(i.contentsRender," "),"image"==i.tabType&&((s=i.render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=i.defaultImage||s.style[WebSquare.style.camelize("background-image")]);try{null!=(a=this.getChild(i.contentsID+"_body"))&&a.removeClass("w2tabcontrol_contents_wrapper_selected"),this.options.useTabKeyOnly&&null!=(n=document.getElementById(this.bridgeIdArr[o]))&&this.removeClass(n,"w2tabcontrol_contents_bridge_selected"),null!=a&&"active"===a.activeStatus&&"iframe"===a.options.pluginName&&a.getWindow()&&a.getWindow().WebSquare&&a.getWindow().WebSquare.getBody()&&a.getWindow().WebSquare.getBody().getLayerListener().hideAll()}catch(t){l.w.printStackTrace(t,null,this)}}0==this.options.useTabKeyOnly&&(u="image"==i.tabType?i.render.getElementsByTagName("div")[0]:i.render.getElementsByTagName("a")[0],o!=e?"a"==u.nodeName.toLowerCase()&&""==u.innerHTML?u.parentNode.setAttribute("tabIndex","-1"):u.setAttribute("tabIndex","-1"):"a"==u.nodeName.toLowerCase()&&""==u.innerHTML?u.parentNode.setAttribute("tabIndex","0"):u.setAttribute("tabIndex","0"))}if(i=this.tabArr[e],c=this.contentsArr[e],this.addClass(i.render,i.activeTabClass),i.defaultClass&&this.removeClass(i.render,i.defaultClass),i.selectedClass&&this.addClass(i.render,i.selectedClass),"image"==i.tabType&&((s=i.render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=i.selectedImage||s.style[WebSquare.style.camelize("background-image")]),c.render.style.display="block",c.render.style.visibility="visible",c.render.setAttribute("aria-hidden","false"),this.addClass(c.render," "),g=this.getChild(i.contentsID+"_body"),this.options.useTabKeyOnly&&null!=(n=document.getElementById(this.bridgeIdArr[e]))&&this.addClass(n,"w2tabcontrol_contents_bridge_selected"),m=WebSquare.BootLoader.fullViewed||!1,f=d.D.fullViewed||!1,b=this.selectedIndex,this.selectedIndex=e,this.focusedIndex=e,0==c.alwaysDraw&&g.reuseFrame&&!g.loaded&&(g.loaded=!0,this._addTabEvent({uuid:g.uuid,tabID:i.tabID,idx:e,userTabID:i.userTabID}),g.setSrc(c.src,c.forceReload)),0!=c.alwaysDraw||g.reuseFrame){t.next=41;break}if(g.render){t.next=38;break}return t.next=34,p.D.initAsync();case 34:return t.next=36,this._setActiveTabAsync(e);case 36:t.next=39;break;case 38:m||f||g.refreshAdaptive();case 39:t.next=56;break;case 41:if(1!=c.alwaysDraw){t.next=56;break}if(this.options.useTabKeyOnly||1!=this.options.useMoveNextTabFocus){t.next=54;break}if(!(e<this.tabArr.length-1)){t.next=54;break}y=!1,o=0;case 46:if(!(o<c.render.firstChild.childNodes.length)){t.next=53;break}if("dummyDivForNextTabFocus"!=c.render.firstChild.childNodes[o].id){t.next=50;break}return y=!0,t.abrupt("break",53);case 50:o++,t.next=46;break;case 53:0==y&&(c.render.firstChild.innerHTML+="<div id='dummyDivForNextTabFocus' tabIndex=0></div>");case 54:m||f||g.refreshAdaptive(),
"wframe"===g.options.pluginName&&e!==this.selectedIndex&&h.B.fireEvent(g,"onsetsize");case 56:return"iframe"==c.frameMode&&"src"in c&&""!=c.src&&1==c.alwaysDraw&&("about:blank"==(v=g.render.getAttribute("src"))||WebSquare.net.isSSLBlankPage(v))&&(this._addTabEvent({uuid:g.uuid,tabID:i.tabID,idx:e,userTabID:i.userTabID}),g.setSrc(c.src,c.forceReload),d.D.isIEAllVersion()&&d.D.setInterval(this.checkLoadEvent,{key:g.id+"_checkLoadEvent",caller:this,args:[g],delay:70})),g.addClass("w2tabcontrol_contents_wrapper_selected"),b!=e&&h.B.fireEvent(this,"onchange",i.tabID,e,i.userTabID),this.options.useTabKeyOnly&&(n=document.getElementById(this.bridgeIdArr[e]))&&this.activeFirstTime&&this.options.focusOnStart&&n.focus(),1!=this.activeFirstTime&&(this.activeFirstTime=!0),this.options.tabScroll&&(this.visibleTabIndex>this.selectedIndex?this.scrollTab(this.selectedIndex):this.getVisibleTab()[this.selectedIndex]||this.scrollTab(this.selectedIndex,"right")),WebSquare.getBody().getLayerListener().hideAll(),t.abrupt("return",!0);case 66:t.prev=66,t.t0=t.catch(1),l.w.printStackTrace(t.t0,null,this);case 69:case"end":return t.stop()}}),t,this,[[1,66]])})));return function(e){return t.apply(this,arguments)}}(),g.prototype._setActiveTabAsync=function(){var t=(0,o.Z)(r().mark((function t(e){var i,o,s,a,n,u,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=this.tabArr[e],o=this.contentsArr[e],s=this.getChild(i.contentsID+"_body"),!this.options.useTabKeyOnly){t.next=10;break}a=!0!==this.options.removeBridge||this.options.adaptive||d.D.isMobile()?document.getElementById(this.bridgeIdArr[e]):document.getElementById(this.bridgeIdArr[e]+"_helper"),o.render.innerHTML=a.outerHTML+s.toHTML(),t.next=23;break;case 10:if(o.render.innerHTML=s.toHTML(),1!=this.options.useMoveNextTabFocus){t.next=23;break}if(!(e<this.tabArr.length-1)){t.next=23;break}n=!1,u=0;case 15:if(!(u<o.render.firstChild.childNodes.length)){t.next=22;break}if("dummyDivForNextTabFocus"!=o.render.firstChild.childNodes[u].id){t.next=19;break}return n=!0,t.abrupt("break",22);case 19:u++,t.next=15;break;case 22:0==n&&(o.render.firstChild.innerHTML+="<div id='dummyDivForNextTabFocus' tabIndex=0></div>");case 23:if((c="wframe"===o.frameMode||"wframePreload"===o.frameMode||"iframe"===o.frameMode)&&this._addTabEvent({uuid:s.uuid,tabID:i.tabID,idx:e,userTabID:i.userTabID}),s.render&&null==s.render.parentNode&&(s.render=document.getElementById(s.id)),s.activate(),o.render.clientHeight>s.render.clientHeight&&(s.render.style.height=o.render.clientHeight+"px"),s.onComplete(),"iframe"!==o.frameMode){t.next=33;break}s.setSrc(o.src,o.forceReload),t.next=36;break;case 33:if("wframe"!==o.frameMode){t.next=36;break}return t.next=36,s.setSrc(o.src,o.forceReload);case 36:c||(h.B.fireEvent(this,"ondrawcomplete",i.tabID,e,i.userTabID),h.B.fireEvent(this,"ontabload",i.tabID,e,i.userTabID)),t.next=42;break;case 39:t.prev=39,t.t0=t.catch(1),l.w.printStackTrace(t.t0,null,this);case 42:case"end":return t.stop()}}),t,this,[[1,39]])})));return function(e){return t.apply(this,arguments)}}(),g.prototype.activateTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;if(this.tabArr[t].disabled)return!1;var e=this.tabArr[t],i=this.contentsArr[t],o=this.getChild(e.contentsID+"_body");0==i.alwaysDraw&&o.reuseFrame&&!o.loaded&&(o.loaded=!0,o.setSrc(i.src,i.forceReload));var s=Promise.resolve();if(0==i.alwaysDraw&&!o.reuseFrame&&!o.render){var r=this.uuid;p.D._awaitObj.key.length>0||p.D._asyncList.length>0?s=p.D.initAsync().then((function(e,i){WebSquare.idCache[r]._activateTabAsync(t)})):this._activateTabAsync(t)}return s}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype._activateTabAsync=function(t){try{var e,i=this.tabArr[t],o=this.contentsArr[t],s=this.getChild(i.contentsID+"_body")
;if(this.options.useTabKeyOnly)e=!0!==this.options.removeBridge||this.options.adaptive||d.D.isMobile()?document.getElementById(this.bridgeIdArr[t]):document.getElementById(this.bridgeIdArr[t]+"_helper"),o.render.innerHTML=e.outerHTML+s.toHTML();else o.render.innerHTML=s.toHTML();s.activate(),s.onComplete(),"wframePreload"===o.frameMode||"wframe"!==o.frameMode&&"iframe"!==o.frameMode||!o.src||s.setSrc(o.src,o.forceReload)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.scrollTab=function(t,e,i){try{if(!this.options.tabScroll||t>=this.tabArr.length||t<0)return;if(e=void 0===e?"left":e,t=parseInt(t,10),"btn_scrollLeft"==i){for(;this.tabArr[t].render&&"none"==this.tabArr[t].render.style.display;)if(--t<0)return}else if("btn_scrollRight"==i)for(;this.tabArr[t].render&&"none"==this.tabArr[t].render.style.display;)t++;if("right"==e){var o=document.getElementById(this.id+"_mask"),s=WebSquare.style._getSize(o,"innerWidth"),r=WebSquare.style._getSize(this.tabArr[t].render,"outerMarginWidth");do{var a=t-1;if(a<0)break;if("none"!=this.tabArr[t].render.style.display&&(r+=WebSquare.style._getSize(this.tabArr[a].render,"outerMarginWidth")),r>s)break}while(t-- >0)}for(var n=document.getElementById(this.id+"_scroll"),h=0,d=0;d<t;d++)"none"!=this.tabArr[d].render.style.display&&(h-=WebSquare.style._getSize(this.tabArr[d].render,"outerMarginWidth"));WebSquare.style.setStyle(n,"left",h+"px"),this.visibleTabIndex=t}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.changeActiveTab=function(t){try{if(!this.options.tabScroll)return;var e=this.selectedIndex;if("btn_scrollLeft"==t&&e>0){for(e--;e>0&&this.tabArr[e].render&&("none"==this.tabArr[e].render.style.display||this.tabArr[e].disabled);)if(--e<0)return}else if("btn_scrollRight"==t&&e<this.tabArr.length-1)for(e++;e<this.tabArr.length-1&&this.tabArr[e].render&&("none"==this.tabArr[e].render.style.display||this.tabArr[e].disabled);)if(e++,this.tabArr.length-1<e)return;e!=this.selectedIndex&&this.setActiveTab(e)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.getVisibleTab=function(){try{var t={};if(this.options.tabScroll)for(var e=document.getElementById(this.id+"_mask"),i=WebSquare.style.getSize(e,"innerWidth"),o=0,s=this.visibleTabIndex;s<this.tabArr.length;s++)(o+=WebSquare.style.getSize(this.tabArr[s].render,"outerMarginWidth"))<=i&&(t[s]=!0);return t}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.getRealTabIndex=function(t){try{for(var e=0,i=0,o=0;o<this.tabArr.length;o++)if(!this.tabArr[o].hidden&&"none"!=this.tabArr[o].render.style.display&&"hidden"!=this.tabArr[o].render.style.visibility){if(e>=t){i=o;break}e++}return i}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setFocusedTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;var e=this.tabArr[t];if(e.disabled)return!1;e.render=document.getElementById(e.tabID);var i="image"==e.tabType?e.render.getElementsByTagName("div")[0]:e.render.getElementsByTagName("a")[0];"a"==i.nodeName.toLowerCase()&&""==i.innerHTML?i.parentNode.focus():i.focus()}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.checkScrollBtnVisibility=function(){try{if(this.options.tabScroll){for(var t=document.getElementById(this.id+"_control"),e=document.getElementById(this.id+"_mask"),i=document.getElementById(this.id+"_btn_scrollLeft"),o=document.getElementById(this.id+"_btn_scrollRight"),s=document.getElementById(this.id+"_btn_submenu"),r=document.getElementById(this.id+"_scroll"),a=WebSquare.style.getSize(t,"innerWidth"),n=0,h=0;h<this.tabArr.length;h++)if((n+=WebSquare.style.getSize(this.tabArr[h].render,"outerMarginWidth"))>a)return void(this.hasClass(e,"mask")||(this.addClass(e,"mask"),i.style.display="",o.style.display="",s.style.display="",i.style.visibility="",o.style.visibility="",s.style.visibility=""));this.hasClass(e,"mask")&&(WebSquare.style.setStyle(r,"left","0px"),this.removeClass(e,"mask"),i.style.display="none",o.style.display="none",s.style.display="none",i.style.visibility="hidden",
o.style.visibility="hidden",s.style.visibility="hidden",this.visibleTabIndex=0)}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.handleTabClickEvent=function(t){try{for(var e,i=this.event.getTargetIterator(t,this.render,this._eventBubbling),o="none";i.next();){var s=i.getElement(),r="w2tabcontrol_tab_close",a="w2tabcontrol_tab_close2",n=d.D.getBoolean(this.options.useATagBtn);if(n&&(r="w2tabcontrol_tab_close_atag",a="w2tabcontrol_tab_close2_atag"),this.__hasClass(s,r)||this.__hasClass(s,a)){o="ontabclose",e=(n?s.parentNode.parentNode.getElementsByTagName("a").length>1?s.parentNode.parentNode.getElementsByTagName("a")[0]:s.parentNode.parentNode.getElementsByTagName("div")[0]:s.parentNode.parentNode.getElementsByTagName("a").length>0?s.parentNode.parentNode.getElementsByTagName("a")[0]:s.parentNode.parentNode.getElementsByTagName("div")[0]).getAttribute("aria-controls");break}if(i.match("w2tabcontrol_li",null,null,this.id+"_tab_")){o="ontabclick",e=(n?s.getElementsByTagName("a").length>1?s.getElementsByTagName("a")[0]:s.getElementsByTagName("div")[0]:s.getElementsByTagName("a").length>0?s.getElementsByTagName("a")[0]:s.getElementsByTagName("div")[0]).getAttribute("aria-controls");break}if(i.match("btn_scrollLeft",null,null,this.id+"_btn_scrollLeft")){this._eventBubbling||h.B.stopPropagation(t),this.options.changeActiveTab?this.changeActiveTab("btn_scrollLeft"):this.scrollTab(this.visibleTabIndex-1,null,"btn_scrollLeft");break}if(i.match("btn_scrollRight",null,null,this.id+"_btn_scrollRight"))if(this._eventBubbling||h.B.stopPropagation(t),this.options.changeActiveTab)this.changeActiveTab("btn_scrollRight");else{for(var u=document.getElementById(this.id+"_mask"),c=WebSquare.style.getSize(u,"outerMarginWidth"),p=0,g=this.visibleTabIndex;g<this.tabArr.length;g++)"none"!=this.tabArr[g].render.style.display&&(p+=WebSquare.style.getSize(this.tabArr[g].render,"outerMarginWidth"));if(p>c){this.scrollTab(this.visibleTabIndex+1,null,"btn_scrollRight");break}}else{if(i.match("btn_submenu",null,null,this.id+"_btn_submenu")){this._eventBubbling||h.B.stopPropagation(t),this.toggle();break}if(this.hasClass("w2tab_adaptive_layout")&&(this.__hasClass(s,"w2tabcontrol_contents_bridge_helper")||this.options.useH3Bridge&&this.__hasClass(s,"w2tabcontrol_contents_bridge_h3"))){o="ontabclick",e=this.options.useH3Bridge?s.parentNode.id:s.parentNode.parentNode.id;break}if(i.match("btn_close_all",null,null,this.id)){this._eventBubbling||h.B.stopPropagation(t),this.deleteAllTabs();break}}}if(i=null,"none"==o)return;this.senseReaderMode&&"focusin"===this.lastEventType||this.hasClass("w2tab_adaptive_layout")||(this._eventBubbling&&"ontabclick"==o?h.B.preventDefault(t):h.B.stopEvent(t));var m,f=-1;for(g=0;g<this.tabArr.length;g++)if((m=this.tabArr[g]).contentsID==e){f=g;break}if("ontabclick"==o){if(f>=0&&(1!=this.tabArr[f].disabled||1!=this.options.preventTabClickEvent)){var b=Promise.resolve();this.selectedIndex==f&&1!=this.options.useTabKeyOnly||(b=this.setSelectedTabIndex(f)),b.then(function(t,e,i,o){return function(s,r){h.B.fireEvent(t,e,i,o)}}(this,o,m.tabID,f))}}else this.deleteTab(f)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.handleMouseoverEvent=function(t){try{var e,i,o=this.event.getTargetIterator(t,this.render);if(d.D.isMobile()&&"mouseover"!==t.type&&(i=this.iScroll.bTouchMove,this._initializeIScroll(),!0===i))return;for(;o.next();){if(o.match("w2tabcontrol_li")){for(var s=o.getElement(),r=0;r<this.tabArr.length;r++)if(this.tabArr[r].render)if(this.tabArr[r].render!=s)this.removeClass(this.tabArr[r].render,this.options.overTabClass),this.tabArr[r].hoverClass&&this.removeClass(this.tabArr[r].render,this.tabArr[r].hoverClass),this.tabArr[r].closeBtn&&(this.tabArr[r].closeBtn.style.display="none"),
"image"==this.tabArr[r].tabType&&((e=this.tabArr[r].render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=(this.selectedIndex==r?this.tabArr[r].selectedImage:this.tabArr[r].defaultImage)||e.style[WebSquare.style.camelize("background-image")]);else{if(this.tabArr[r].disabled)continue;this.addClass(s,this.options.overTabClass),this.tabArr[r].hoverClass&&this.addClass(this.tabArr[r].render,this.tabArr[r].hoverClass),this.tabArr[r].closable&&this.tabArr[r].closeBtn&&(this.tabArr[r].closeBtn.style.display="block"),"image"==this.tabArr[r].tabType&&((e=this.tabArr[r].render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=this.tabArr[r].hoverImage||this.tabArr[r].selectedImage||e.style[WebSquare.style.camelize("background-image")])}return void(d.D.isMobile()&&"mouseover"!==t.type&&this.handleTabClickEvent(t))}o.match("btn_scrollLeft")?this.addClass(o.getElement(),"btn_scrollLeft_over"):o.match("btn_scrollRight")?this.addClass(o.getElement(),"btn_scrollRight_over"):o.match("btn_submenu")?this.addClass(o.getElement(),"btn_submenu_over"):o.match("btn_close_all")&&this.addClass(o.getElement(),"btn_close_all_over")}for(r=0;r<this.tabArr.length;r++)this.tabArr[r].render&&(this.removeClass(this.tabArr[r].render,this.options.overTabClass),this.tabArr[r].hoverClass&&this.removeClass(this.tabArr[r].render,this.tabArr[r].hoverClass),this.tabArr[r].closeBtn&&(this.tabArr[r].closeBtn.style.display="none"),"image"==this.tabArr[r].tabType&&((e=this.tabArr[r].render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=(this.selectedIndex==r?this.tabArr[r].selectedImage:this.tabArr[r].defaultImage)||e.style[WebSquare.style.camelize("background-image")]));o=null,d.D.isMobile()&&"mouseover"!==t.type&&this.handleTabClickEvent(t)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.handleMouseoutEvent=function(t){try{h.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2tabcontrol_li")){for(var i=e.getElement(),o=-1,s=0;s<this.tabArr.length;s++)if(this.tabArr[s].render===i){o=s;break}if(null==this.tabArr[o])break;if(this.removeClass(this.tabArr[o].render,this.options.overTabClass),this.tabArr[o].hoverClass&&this.removeClass(this.tabArr[o].render,this.tabArr[o].hoverClass),this.tabArr[o].closeBtn.style.display="none","image"==this.tabArr[o].tabType){var r=this.tabArr[o].render.getElementsByTagName("div")[0];r.style[WebSquare.style.camelize("background-image")]=(this.selectedIndex==o?this.tabArr[o].selectedImage:this.tabArr[o].defaultImage)||r.style[WebSquare.style.camelize("background-image")]}break}if(e.match("btn_scrollLeft")){this.removeClass(e.getElement(),"btn_scrollLeft_over");break}if(e.match("btn_scrollRight")){this.removeClass(e.getElement(),"btn_scrollRight_over");break}if(e.match("btn_submenu")){this.removeClass(e.getElement(),"btn_submenu_over");break}if(e.match("btn_close_all")){this.removeClass(e.getElement(),"btn_close_all_over");break}}e=null}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.handleResizeEvent=function(t){try{if(this.options.tabScroll){var e=document.getElementById(this.id+"_control"),i=document.getElementById(this.id+"_mask"),o=document.getElementById(this.id+"_btn_scrollLeft"),s=document.getElementById(this.id+"_btn_scrollRight"),r=document.getElementById(this.id+"_btn_submenu"),a=WebSquare.style.getSize(e,"innerWidth")-WebSquare.style.getSize(o,"outerMarginWidth")-WebSquare.style.getSize(s,"outerMarginWidth")-WebSquare.style.getSize(r,"outerMarginWidth"),n=parseInt(WebSquare.style.getStyleProperty(i,"padding-left"))+parseInt(WebSquare.style.getStyleProperty(i,"margin-left"))+parseInt(WebSquare.style.getStyleProperty(i,"padding-right"))+parseInt(WebSquare.style.getStyleProperty(i,"margin-right"));WebSquare.style.setStyle(i,"width",a-n+"px")}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.handleKeyEvent=function(t){try{
var e=t.charCode?t.charCode:t.keyCode,i=this.getTabHostAndContainer(),o=this.event.getTargetIterator(t,this.render);if(13!=e&&37!=e&&38!=e&&39!=e&&40!=e&&46!=e)return;if(46==e&&t.altKey)return void this.deleteTab(this.getSelectedTabIndex());for(;o.next();)if((r=o.getElement())==i.container){if((37==e||38==e)&&t.ctrlKey){var s=this.tabArr[this.selectedIndex];if(1==(r="image"==s.tabType?s.render.getElementsByTagName("div")[0]:s.render.getElementsByTagName("a")[0]).nodeType)return r.focus(),void h.B.stopEvent(t)}return}switch(e){case 13:return void this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0);case 37:case 38:this.focusedIndex=this.focusedIndex>0?this.focusedIndex-1:0,"a"==(r="image"==this.tabArr[this.focusedIndex].tabType?this.tabArr[this.focusedIndex].render.getElementsByTagName("div")[0]:this.tabArr[this.focusedIndex].render.getElementsByTagName("a")[0]).nodeName.toLowerCase()&&""==r.innerHTML?r.parentNode.focus():r.focus(),this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0);break;case 39:case 40:var r;this.focusedIndex=this.focusedIndex+1<this.tabArr.length?this.focusedIndex+1:this.focusedIndex,"a"==(r="image"==this.tabArr[this.focusedIndex].tabType?this.tabArr[this.focusedIndex].render.getElementsByTagName("div")[0]:this.tabArr[this.focusedIndex].render.getElementsByTagName("a")[0]).nodeName.toLowerCase()&&""==r.innerHTML?r.parentNode.focus():r.focus(),this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0)}o=null,h.B.stopEvent(t)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.handleFocusInEvent=function(t){try{var e=this.event.getTargetIterator(t,this.render);for(this.lastEventType=t.type;e.next();)if(e.match(null,"dummyDivForNextTabFocus")){var i=this.tabArr[this.focusedIndex+1],o="image"==i.tabType?i.render.getElementsByTagName("div")[0]:i.render.getElementsByTagName("a")[0];if(1==o.nodeType)return this.focusedIndex++,o.focus(),this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0),e=null,void h.B.stopEvent(t)}e=null}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.handleTabMove=function(t){try{if(d.D.isMobile()){var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;(e||i)&&(this.iScroll.prevTouches={x:e?t.touches[0].clientX:t.clientX,y:e?t.touches[0].clientY:t.clientY})}if(!this.options.tabMove&&!this.options.tabSplit)return;h.B.stopEvent(t);var o=this.event.getTargetIterator(t,this.render),s=-1,r=this.uuid;for(this._zoomLevel=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;o.next();)if(o.match("w2tabcontrol_li")){var a=o.getElement();if(!a)return;for(var n=0;n<this.tabArr.length;n++)if(this.tabArr[n].render===a){s=n;break}if(isNaN(s)||s<0)return;WebSquare.dragdrop.gDragManager.activate(t,a,{id:this.id+"_ghostLayer_tabMove",className:"w2tabcontrol_drag_tabMove",dragoverClass:"w2tabcontrol_li",dropClass:"w2tabcontrol_li",delay:15,makeGhostLayer:function(t){return t.render.className="",t.render.style.zIndex=-1e3,t.render.style.width="0px",t.render.style.height="0px",t},handleStart:function(t){var e=s,i=WebSquare.idCache[r];if(!i.options.tabSplit){var o=$(i.tabArr[e].render);this.isVertical="left"===i.options.tabPosition||"right"===i.options.tabPosition,this.isVertical?this.tabMove_top=o.css("top"):this.tabMove_left=o.css("left"),this.dragOverTab={},this.dropIndex=-1,this.tabMove_zIndex=o.css("zIndex");var a=Number(this.tabMove_zIndex);if(this.tabMove_zIndex_Array=[],isNaN(a)||a<=0)for(var n=0;n<i.tabArr.length;n++){var l=$(i.tabArr[n].render);this.tabMove_zIndex_Array.push(l.css("zIndex")),n===e?l.css("zIndex",0):l.css("zIndex",1)}else o.css("zIndex",a-1)}},onDrop:function(t,e,i,o,a,n,l){var d=s,u=WebSquare.idCache[r];if(u.options.tabSplit)h.B.fireEvent(u,"ontabsplit",d);else{var c=$(u.tabArr[d].render);if(this.isVertical?c.css("top",this.tabMove_top):c.css("left",this.tabMove_left),
this.tabMove_zIndex_Array.length>0)for(var p=0;p<u.tabArr.length;p++)$(u.tabArr[p].render).css("zIndex",this.tabMove_zIndex_Array[p]);else c.css("zIndex",this.tabMove_zIndex);for(var g in this.dragOverTab)this.isVertical?$(u.tabArr[g].render).css("top",this.dragOverTab[g]):$(u.tabArr[g].render).css("left",this.dragOverTab[g]);u.options.tabMove&&u.moveTab(d,this.dropIndex),this.tabMove_left="",this.tabMove_zIndex="",this.dragOverTab={},this.tabMove_zIndex_Array=[]}},onDragover:function(t,e,i,o,a,n,l){var h=s,d=-1,u=WebSquare.idCache[r];if(!u.options.tabSplit){for(var c=0;c<u.tabArr.length;c++)if(u.tabArr[c].render===e){d=c;break}var p=$(u.tabArr[h].render);if(this.isVertical?p.css("top",n/u._zoomLevel):p.css("left",a/u._zoomLevel),null!=u.tabArr[d]&&d!==h){var g=$(u.tabArr[d].render);null==this.dragOverTab[d]?(this.isVertical?(this.dragOverTab[d]=g.css("top"),h>d?g.css("top",p.height()):g.css("top",-1*p.height())):(this.dragOverTab[d]=g.css("left"),h>d?g.css("left",p.width()):g.css("left",-1*p.width())),this.dropIndex=d):(this.isVertical?g.css("top",this.dragOverTab[d]):g.css("left",this.dragOverTab[d]),this.dragOverTab[d]=null,delete this.dragOverTab[d],this.dropIndex=h>d?d+1:d-1)}}}}),o.stop()}o=null}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.handleTouchMove=function(t){try{var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;if(e||i){var o={x:e?t.touches[0].clientX:t.clientX,y:e?t.touches[0].clientY:t.clientY},s=this.iScroll.prevTouches.x-o.x,r=this.iScroll.prevTouches.y-o.y;(Math.abs(s)>this.iScroll.epsilon||Math.abs(r)>this.iScroll.epsilon)&&(this.iScroll.bTouchMove=!0)}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.getWindow=function(t){try{var e,i=void 0!==t?t:this.selectedIndex;if(i=this._getTabIndex(i),!this._isValidTabIndex(i))return e;for(var o=0;o<this.contentsArr.length;o++){var s=this.getChild(this.contentsArr[o].contentsID+"_body");if(o==i){e="iframe"===s.getPluginName()||"wframe"===s.getPluginName()?s.getWindow():window;break}}return e}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setContentsHeight=function(t){try{var e=this.getTabHostAndContainer(),i=e.container,o=e.tabhost;t=parseInt(t,10),i.style.height=t+"px";parseInt(d.D.getStyleProperty(o,"height"),10),parseInt(d.D.getStyleProperty(o,"border-top-width"),10),parseInt(d.D.getStyleProperty(o,"border-bottom-width"),10),parseInt(d.D.getStyleProperty(o,"margin-top"),10),parseInt(d.D.getStyleProperty(o,"margin-bottom"),10)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.getSelectedTabID=function(){try{return this.selectedIndex<this.tabArr.length&&this.selectedIndex>=0?this.tabArr[this.selectedIndex].userTabID:null}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.getSelectedTabIndex=function(){try{return this.selectedIndex<this.tabArr.length&&this.selectedIndex>=0?this.selectedIndex:-1}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.getTabIndex=function(t){var e=null;try{for(var i=0;i<this.tabArr.length;i++)if(t==this.tabArr[i].userTabID){e=i;break}return e}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype._getTabIndex=function(t){try{var e=t;if("string"==typeof t&&null==(e=this.getTabIndex(t))&&(e=Number(t),isNaN(e)))return;return e}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.getTabID=function(t){var e="";try{for(var i=0;i<this.tabArr.length;i++)if(t==i){e=this.tabArr[i].userTabID;break}return e}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setSelectedTabIndex=function(){var t=(0,o.Z)(r().mark((function t(e){var i,o,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=0,"string"!=typeof e){t.next=17;break}o=!0,s=0;case 6:if(!(s<this.tabArr.length)){t.next=14;break}if(this.tabArr[s].userTabID!=e){t.next=11;break}return i=s,o=!1,t.abrupt("break",14);case 11:s++,t.next=6;break;case 14:o&&(i=e),t.next=18;break;case 17:i=e;case 18:if(0!=h.B.fireEvent(this,"onbeforeselect",this.getSelectedTabIndex(),i)){t.next=21
;break}return t.abrupt("return");case 21:return t.next=23,this.setActiveTab(i);case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(1),l.w.printStackTrace(t.t0,null,this);case 28:case"end":return t.stop()}}),t,this,[[1,25]])})));return function(e){return t.apply(this,arguments)}}(),g.prototype.getTabCount=function(t){try{var e=this.tabArr.length,i=0;if(!1===(t||{}).hiddenTab){for(var o=0,s=this.tabArr.length;o<s;o++)this.tabArr[o].hidden&&i++;e-=i}return e}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.deleteTab=function(){var t=(0,o.Z)(r().mark((function t(e){var i,o,s,a,n,d,u,c,p,g,m,f,b;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,!((e=parseInt(e,10))<0||e>=this.tabArr.length)){t.next=5;break}return t.abrupt("return");case 5:if(i=this.tabArr[e],o=i.tabID,s=i.userTabID,!1!==h.B.fireEvent(this,"onbeforetabclose",o,e)){t.next=10;break}return t.abrupt("return");case 10:if(this.selectedIndex!=e){t.next=35;break}a=e+1;case 12:if(t.t0=a<this.tabArr.length,!t.t0){t.next=18;break}return t.next=16,this.setActiveTab(a);case 16:t.t1=t.sent,t.t0=0==t.t1;case 18:if(!t.t0){t.next=22;break}a++,t.next=12;break;case 22:if(!(a>=this.tabArr.length)){t.next=34;break}a=e-1;case 24:if(t.t2=a>=0,!t.t2){t.next=30;break}return t.next=28,this.setActiveTab(a);case 28:t.t3=t.sent,t.t2=0==t.t3;case 30:if(!t.t2){t.next=34;break}a--,t.next=24;break;case 34:this.selectedIndex>e&&this.selectedIndex--;case 35:if(n=this.contentsArr[e],d=this.getChild(this.tabArr[e].contentsID+"_body"),u="iframe"==n.frameMode&&d.render&&this.storedFrame.length<this.options.spaIframeMaxSize,c="wframe"===n.frameMode||"wframePreload"===n.frameMode||"iframe"===n.frameMode,d&&(u?(d.loaded=!1,this.removeControl(d),this.storedFrame.push(d.id),d.setSrc(WebSquare.net.getBlankXML())):d.remove()),p=i.render.parentNode,g=n.render.parentNode,p.removeChild(i.render),u){for(a=0;a<n.render.childNodes.length;a++)n.render.childNodes[a]!=d.render&&n.render.removeChild(n.render.childNodes[a]);n.render.style.display="none",n.render.style.visibility="hidden",n.render.setAttribute("aria-hidden","true"),this.addClass(n.render," ")}else g.removeChild(n.render);for(m in d=null,this.tabArr[e])this.tabArr[e][m]=null;for(m in this.contentsArr[e])this.contentsArr[e][m]=null;for(i=null,n=null,this.tabArr.splice(e,1),this.contentsArr.splice(e,1),this.bridgeIdArr.splice(e,1),this.backbridgeIdArr.splice(e,1),a=e;a<this.tabArr.length;a++)i=this.tabArr[a],f=a+2,b=a+1,this.__removeClass(i.render,"w2tabcontrol_li_"+f),this.__addClass(i.render,"w2tabcontrol_li_"+b);if(!(e<this.selectedIndex)){t.next=59;break}return t.next=57,this.setActiveTab(this.selectedIndex-1);case 57:t.next=72;break;case 59:if(e!=this.selectedIndex){t.next=69;break}if(!this.tabArr[this.selectedIndex]){t.next=65;break}return t.next=63,this.setActiveTab(this.selectedIndex);case 63:t.next=67;break;case 65:return t.next=67,this.setActiveTab(this.selectedIndex-1);case 67:t.next=72;break;case 69:if(!(e>this.selectedIndex)){t.next=72;break}return t.next=72,this.setActiveTab(this.selectedIndex);case 72:this.options.tabScrollAuto&&this.scrollTab(Math.max(this.visibleTabIndex-1,0)),this.options.tabScroll&&this.options.adjustTabScroll&&this.checkScrollBtnVisibility(),h.B.fireEvent(this,"ontabclose",o,e),c||(h.B.fireEvent(this,"ondrawcomplete",o,e,s),h.B.fireEvent(this,"ontabload",o,e,s)),t.next=81;break;case 78:t.prev=78,t.t4=t.catch(1),l.w.printStackTrace(t.t4,null,this);case 81:case"end":return t.stop()}}),t,this,[[1,78]])})));return function(e){return t.apply(this,arguments)}}(),g.prototype.deleteAllTabs=function(){for(var t=this.getTabCount()-1;t>=0;t--)this.deleteTab(t)},g.prototype.getFrame=function(t){if(t=this._getTabIndex(t),this._isValidTabIndex(t)){var e=this.contentsArr[t],i=this.getChild(e.contentsID+"_body");return null!=i?i:void 0}},g.prototype._getCurrentFrame=function(){var t=this.contentsArr[this.selectedIndex],e=this.getChild(t.contentsID+"_body");if(null!=e)return e},
g.prototype.isLoaded=function(t){if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;var e=this.contentsArr[t];return this.getChild(e.contentsID+"_body").completed},g.prototype.addTab=function(){var t=(0,o.Z)(r().mark((function t(e,i,o){var s,h,u,c,g,m,f,b,y,v,w,S,C,x,_,I,T,k,D,L,W,A,E,M,q,R,N,F,O,B,V;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,s=e||"",void 0!==i){t.next=5;break}return t.abrupt("return");case 5:h=!1,u=0;case 7:if(!(u<this.tabArr.length)){t.next=14;break}if(""!=s&&this.tabArr[u].userTabID!=s){t.next=11;break}return h=!0,t.abrupt("break",14);case 11:u++,t.next=7;break;case 14:if(c=i.openAction,!h){t.next=46;break}if(c||this.options.useConfirmMessage&&(g=this.options.confirmMessage,i.useLocale&&this.options.confirmMessageLocaleRef?(m=this.getLocaleValue(this.options.confirmMessageLocaleRef))&&(g=m):g.indexOf("#title")>-1&&(g=g.replace("#title",i.label)),!0,f=confirm(g),c=f?this.options.confirmTrueAction:this.options.confirmFalseAction),"exist"!==c){t.next=27;break}return b=this.getTabIndex(s),y=this.contentsArr[b],"active"!=(v=this.getChild(this.tabArr[b].contentsID+"_body")).activeStatus?y.src=o.src||"about:blank":"iframe"===v.options.pluginName?v.setSrc(o.src||"about:blank",y.forceReload):(o.dataObject?w={dataObject:o.dataObject}:y.dataObject&&(w={dataObject:y.dataObject}),v.setSrc(o.src||"",w)),t.next=24,this.setSelectedTabIndex(b);case 24:return t.abrupt("return",s);case 27:if("new"!==c){t.next=31;break}s=s+"_"+this.increaseKey++,t.next=46;break;case 31:if("select"!==c){t.next=37;break}return t.next=34,this.setSelectedTabIndex(this.getTabIndex(s));case 34:return t.abrupt("return",s);case 37:if("last"!==c){t.next=45;break}return b=this.getTabIndex(s),$("#"+this.id+"_tabhost").children().last().after($("#"+this.id+"_tab_"+s)),t.next=42,this.setSelectedTabIndex(b);case 42:case 45:return t.abrupt("return",s);case 46:if(!(-1!=this.options.windowMaxNum&&this.getTabCount()>=this.options.windowMaxNum)){t.next=49;break}return alert(WebSquare.language.getMessage("TabControl_maxNum_warning",this.options.windowMaxNum)),t.abrupt("return");case 49:if(S=this.id+"_tab_"+s,C={tabID:S,userTabID:s,contentsID:"",tabLabel:i.label||"",disabled:i.disabled||!1,render:null,tabWidth:parseInt(i.tabWidth,10)>0?parseInt(i.tabWidth,10):this.options.tabWidth,tabHeight:parseInt(i.tabHeight,10)>0?parseInt(i.tabHeight,10):this.options.tabHeight,tabClass:i.class||this.options.tabClass,tabStyle:i.style||this.options.tabStyle,activeTabClass:i.activeTabClass||this.options.activeTabClass,disabledTabClass:i.disabledTabClass||this.options.disabledTabClass,selectedClass:i.selectedClass||this.options.selectedClass,selectedImage:i.selectedImage?"url("+i.selectedImage+")":"",defaultImage:i.defaultImage?"url("+i.defaultImage+")":"",hoverImage:i.hoverImage?"url("+i.hoverImage+")":"",tabType:"image"==i.tabType?"image":"text",defaultClass:i.defaultClass||"",hoverClass:i.hoverClass||"",closable:null!=i.closable?d.D.getBoolean(i.closable):this.options.closable,closeBtn:null,label:i.label||"",value:S,title:i.title||i.label,tabHTML:i.tabHTML||"",useLocale:i.useLocale||this.options.useLocale,useATagBtn:null!=i.useATagBtn?d.D.getBoolean(i.useATagBtn):this.options.useATagBtn},"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||"string"==typeof C.tabStyle&&C.tabStyle.indexOf("width")<0&&(C.tabStyle="width:"+15*C.label.length+"px;"+C.tabStyle),x=a.x.extendKeepingType({},WebSquare.uiplugin.content.prototype.defaultOptions),_=a.x.extendKeepingType(x,o),!1===o.processMsgFrame&&(_.processMsgFrame=!1),!1===o.delegateProcessMsg&&(_.delegateProcessMsg=!1),!1===o.frameModal&&(_.frameModal=!1),I=this.id+"_contents_"+s,C.contentsID=I,(y=a.x.extend({contentsID:I,contentsClass:o.contentsClass||this.options.contentsClass,render:null,xml:null,name:_.name||"",scope:_.scope},_||{})).src&&(_.frameMode||(y.frameMode=_.wframe?"wframe":"iframe")),i.addTabIndex>=0?(this.tabArr.splice(i.addTabIndex,0,C),
this.contentsArr.splice(i.addTabIndex,0,y)):(this.tabArr.push(C),this.contentsArr.push(y)),T=this.getTabHostAndContainer(),k=T.container,D=T.tabhost,i.addTabIndex<=this.selectedIndex&&this.selectedIndex++,!(this.storedFrame.length>0&&"iframe"===y.frameMode)){t.next=85;break}L=I+"_body",W=!1,u=0;case 70:if(!(u<this.storedFrame.length)){t.next=78;break}if(this.storedFrame[u]!=L){t.next=75;break}return A=this.storedFrame.splice(u,1),W=!0,t.abrupt("break",78);case 75:u++,t.next=70;break;case 78:W||(A=this.storedFrame.shift()),(v=d.D.getComponentById(A)).reuseFrame=!0,W||n.v.setId(L,v),_.name&&v.setAttribute("name",_.name),t.next=86;break;case 85:v=this.initContents(y);case 86:if("wframePreload"!==y.frameMode){t.next=89;break}return t.next=89,p.D.initAsync();case 89:for(this.addControl(v),E="make"+C.tabType.capitalize()+"TabHTML",i.addTabIndex>=0?((M=document.createElement("div")).innerHTML=this[E](C,this.tabArr.length,!0),D.insertBefore(M.childNodes[0],D.childNodes[i.addTabIndex]||null)):D.innerHTML+=this[E](C,this.tabArr.length,!0),"top"!==this.options.tabPosition&&"bottom"!==this.options.tabPosition||!C.tabWidth&&C.tabStyle.indexOf("width")<0&&(q=i.addTabIndex>=0?D.childNodes[i.addTabIndex]:D.lastChild,R=0,null!=q&&(q.style.overflow="visible",null!=q.firstChild&&(q.firstChild.style.overflow="visible"),q.childNodes.length>1&&(R+=q.childNodes[1].offsetWidth),q.childNodes.length>2&&(R+=q.childNodes[2].offsetWidth)),q.style.width=q.scrollWidth+R+"px"),(N=document.createElement("div")).innerHTML=this.makeContentsHTML(y,C.tabLabel,v&&v.reuseFrame,i.addTabIndex),F=N.removeChild(N.firstChild),v&&v.reuseFrame&&v.render&&v.render.parentNode?(O=v.render.parentNode,this.options.useTabKeyOnly&&(null!=(B=document.getElementById("bridgeId"))&&O.removeChild(B),O.insertBefore(F.firstChild,v.render)),this.options.useBackbridge&&(null!=(B=document.getElementById("bridgeId"))&&O.removeChild(B),O.appendChild(F.lastChild,v.render)),O.setAttribute("id",y.contentsID),O.setAttribute("class",y.contentsClass),d.D.getBoolean(this.options.removeAriaLabelledby)||O.setAttribute("aria-labelledby",C.tabLabel)):k.appendChild(F),N=null,F=null,y.alwaysDraw&&("iframe"!==y.frameMode&&"wframe"!==y.frameMode&&"wframePreload"!==y.frameMode||this._addTabEvent({uuid:v.uuid,tabID:C.tabID,idx:i.addTabIndex>=0?i.addTabIndex:this.tabArr.length-1,userTabID:C.userTabID}),v.reuseFrame||(v.activate(),v.onComplete()),"iframe"!==y.frameMode&&"wframe"!==y.frameMode||v.setSrc(y.src,y.forceReload),d.D.isIEAllVersion()&&"iframe"===y.frameMode&&d.D.setInterval(this.checkLoadEvent,{key:v.id+"_checkLoadEvent",caller:this,args:[v],delay:70})),u=0;u<this.tabArr.length;u++)(C=this.tabArr[u]).render=document.getElementById(C.tabID),C.closeBtn=document.getElementById(C.tabID+"_close"),C.contentsRender=document.getElementById(C.contentsID),this.contentsArr[u].render=C.contentsRender,i.addTabIndex>=0&&C.render.setAttribute("index",u+1),C.tabHTML&&this.setTabHTML(C.userTabID,C.tabHTML);if(V=i.addTabIndex>=0?i.addTabIndex:this.tabArr.length-1,this.tabArr[V].contentsRender.style.display="none",1!=this.tabArr.length){t.next=107;break}return t.next=106,this.setActiveTab(0);case 106:"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||this.adjustContentsHeight();case 107:return this.options.tabScroll&&this.options.adjustTabScroll&&this.checkScrollBtnVisibility(),this.options.spaAuto&&n.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]}),t.abrupt("return",s);case 112:t.prev=112,t.t0=t.catch(1),l.w.printStackTrace(t.t0,null,this);case 115:case"end":return t.stop()}}),t,this,[[1,112]])})));return function(e,i,o){return t.apply(this,arguments)}}(),g.prototype.disableTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;var e=this.tabArr[t];if(1==e.disabled)return;var i=this.contentsArr[t];this.removeClass(e.render,e.activeTabClass),this.addClass(e.render,e.disabledTabClass),
d.D.isIE(8)&&(e.render.style.zIndex=0);var o=e.render.getElementsByTagName("a")[0];null!=o&&(o.removeAttribute("href"),o=null),e.disabled=!0;var s=this.getChild(i.contentsID+"_body");"stop"!=s.activeStatus&&(this.disabledComponents[t]=d.D.setDisabled({componentId:s.id,disabled:!0}).skipComponents);for(var r=0;r<this.disabledTabStack.length;r++)if(this.disabledTabStack[r].tabID===e.tabID){this.disabledTabStack.splice(r,1);break}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.enableTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;var e=this.tabArr[t];if(0==e.disabled)return;var i=this.contentsArr[t];this.removeClass(e.render,e.disabledTabClass),this.selectedIndex>=0&&t==this.selectedIndex&&this.addClass(e.render,e.activeTabClass),e.disabled=!1,d.D.isIE(8)&&(e.render.style.zIndex="");var o=e.render.getElementsByTagName("a")[0];null!=o&&(o.setAttribute("href","#"+e.contentsID+"_bridge"),o=null);var s=this.getChild(i.contentsID+"_body");if("stop"!=s.activeStatus){var r={componentId:s.id,disabled:!1};null!=this.disabledComponents[t]&&0==this.options.forceChildCompEnabled&&(r.excludeIdList=this.disabledComponents[t]),d.D.setDisabled(r),null!=this.disabledComponents[t]&&delete this.disabledComponents[t]}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.hideTab=function(){var t=(0,o.Z)(r().mark((function t(e){var i,o,s,a,n,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,!((e=parseInt(e,10))<0||e>=this.tabArr.length)){t.next=5;break}return t.abrupt("return");case 5:if(0!=h.B.fireEvent(this,"onbeforehide",this.getSelectedTabIndex(),e)){t.next=8;break}return t.abrupt("return");case 8:if(e!=this.selectedIndex){t.next=33;break}i=e+1;case 10:if(t.t0=i<this.tabArr.length,!t.t0){t.next=16;break}return t.next=14,this.setActiveTab(i);case 14:t.t1=t.sent,t.t0=0==t.t1;case 16:if(!t.t0){t.next=20;break}i++,t.next=10;break;case 20:if(!(i>=this.tabArr.length)){t.next=32;break}i=e-1;case 22:if(t.t2=i>=0,!t.t2){t.next=28;break}return t.next=26,this.setActiveTab(i);case 26:t.t3=t.sent,t.t2=0==t.t3;case 28:if(!t.t2){t.next=32;break}i--,t.next=22;break;case 32:e==this.selectedIndex&&(this.selectedIndex=-1);case 33:o=this.tabArr[e],s=this.contentsArr[e],d.D.isIE(8)&&(o.render.style.zIndex=0),o.render.style.visibility="hidden",o.render.style.display="none",o.hidden=!0,s.render.style.display="none",s.render.style.visibility="hidden",s.render.setAttribute("aria-hidden","true"),this.options.tabScrollAuto&&this.options.tabScroll&&(a=this.visibleTabIndex,n=this.getVisibleTab(),u=a+Object.keys(n).length-1,(this.visibleTabIndex==e||u==e||this.visibleTabIndex<e&&u>e)&&(a-=1),this.scrollTab(Math.max(a,0))),t.next=48;break;case 45:t.prev=45,t.t4=t.catch(1),l.w.printStackTrace(t.t4,null,this);case 48:case"end":return t.stop()}}),t,this,[[1,45]])})));return function(e){return t.apply(this,arguments)}}(),g.prototype.showTab=function(){var t=(0,o.Z)(r().mark((function t(e){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,!((e=parseInt(e,10))<0||e>=this.tabArr.length)){t.next=5;break}return t.abrupt("return");case 5:if(0!=h.B.fireEvent(this,"onbeforeshow",this.getSelectedTabIndex(),e)){t.next=8;break}return t.abrupt("return");case 8:if((i=this.tabArr[e]).render.style.visibility="visible",i.render.style.display="",i.hidden=!1,-1!=this.selectedIndex){t.next=17;break}return t.next=15,this.setActiveTab(e);case 15:t.next=18;break;case 17:this.options.tabScrollAuto&&this.options.tabScroll&&this.visibleTabIndex>e&&this.scrollTab(this.visibleTabIndex);case 18:d.D.isIE(8)&&(i.render.style.zIndex=""),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),l.w.printStackTrace(t.t0,null,this);case 24:case"end":return t.stop()}}),t,this,[[1,21]])})));return function(e){return t.apply(this,arguments)}}(),g.prototype.getLabelText=function(t){try{return(t=parseInt(t,10))<0||t>=this.tabArr.length?null:this.tabArr[t].tabLabel}catch(t){l.w.printStackTrace(t,null,this)}},
g.prototype.setLabelText=function(t,e){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;1==this.options.tabScroll&&(this.tabArr[t].label=e);for(var i,o=this.tabArr[t],s=0;s<o.render.childNodes.length;s++)if(1==(i=o.render.childNodes[s]).nodeType&&"div"==i.nodeName.toLowerCase())for(var r=0;r<i.childNodes.length;r++){var a=i.childNodes[r];if(1==a.nodeType&&"a"==a.nodeName.toLowerCase())return o.tabLabel=e,void(a.innerHTML=e);if(1==a.nodeType&&"div"==a.nodeName.toLowerCase())return o.tabLabel=e,void a.setAttribute("title",e)}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setDisabled=function(t,e){try{t=d.D.getBoolean(t);if(c.s.prototype.setDisabled.call(this,t),e||this.options.keepDisabledTab)if(t)for(var i=0;i<this.tabArr.length;i++)this.tabArr[i].disabled||this.disabledTabStack.push(this.tabArr[i].tabID),this.disableTab(i);else{for(i=0;i<this.disabledTabStack.length;i++)for(var o=0;o<this.tabArr.length;o++)if(this.tabArr[o].tabID===this.disabledTabStack[i]){this.enableTab(o);break}this.disabledTabStack=[]}else{for(i=0;i<this.tabArr.length;i++)t?this.disableTab(i):this.enableTab(i);this.disabledTabStack=[]}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setSize=function(t,e){try{c.s.prototype.setSize.call(this,t,e)}catch(t){l.w.printStackTrace(t)}},g.prototype.setSubLayer=function(){try{if(null==this.itemTable){this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:"auto",style:"position:absolute;",defaultStyle:"",className:"w2table ",w2table:"w2table_tabControl",w2table_main:"w2table_tabControl_main",w2table_row:"w2table_tabControl_row",w2table_col:"w2table_tabControl_col",w2table_col_over:"w2table_tabControl_col_over",escape:!0,useAccessibilityMenu:this.options.useAccessibilityMenu,tableRender:this.options.tableRender,wheelRows:this.options.wheelRows,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate();var t=this;this.itemTable.addClickEventListener(function(){var e=(0,o.Z)(r().mark((function e(i,o){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.setSelectedTabIndex(t.getRealTabIndex(o));case 3:t.closeSubLayer();case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()),this.itemTable.addKeyDownEventListener(function(){var e=(0,o.Z)(r().mark((function e(i){var o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!=(o=i.charCode?i.charCode:i.keyCode)&&32!=o){e.next=9;break}return e.next=5,t.setSelectedTabIndex(t.getRealTabIndex(this.getSelectedIndex()));case 5:t.focus(),t.closeSubLayer(),e.next=10;break;case 9:27==o&&(t.focus(),t.closeSubLayer());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setSelectOptions=function(){try{if(null!=this.itemTable){for(var t=[],e=0;e<this.tabArr.length;e++)this.tabArr[e].hidden||"none"==this.tabArr[e].render.style.display||"hidden"==this.tabArr[e].render.style.visibility||t.push(this.tabArr[e]);this.itemTable.setItemArr(t)}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setItemTable=function(){try{for(var t=document.getElementById(this.id+"_btn_submenu"),e=WebSquare.style.getSize(t,"outerMarginHeight"),i=WebSquare.style.getAbsoluteLeft(this.render)+this.render.offsetWidth,o=WebSquare.style.getAbsoluteTop(t)+e,s=0,r=0;r<this.tabArr.length;r++){var a=WebSquare.style.getSize(this.tabArr[r].render,"outerMarginWidth");a>s&&(s=a)}if(null===this.itemTableTdMargin){var n=document.getElementById(this.id+"_itemTable_0")
;n?this.options.useAccessibilityMenu?this.itemTableTdMargin=parseInt(WebSquare.style.getStyleProperty(n.parentNode,"margin-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(n.parentNode,"padding-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(n.parentNode,"padding-right"),10)||0+parseInt(WebSquare.style.getStyleProperty(n.parentNode,"margin-right"),10)||0:this.itemTableTdMargin=parseInt(WebSquare.style.getStyleProperty(n,"margin-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(n,"padding-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(n,"padding-right"),10)||0+parseInt(WebSquare.style.getStyleProperty(n,"margin-right"),10)||0:this.itemTableTdMargin=0}s+=this.itemTableTdMargin;var h=document.getElementById(this.itemTable.id+"_main");WebSquare.style.setStyle(h,"width",s+"px"),WebSquare.style.setStyle(this.itemTable.render,"width",s+"px"),i-=s;var d=document.body.scrollTop;d<document.documentElement.scrollTop&&(d=document.documentElement.scrollTop);var u=o-d;document.documentElement.clientHeight-u<this.itemTable.render.offsetHeight&&(o=o-this.itemTable.render.offsetHeight-e),this.itemTable.setPosition(i,o),WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.openSubLayer=function(){try{WebSquare.getBody().getLayerListener().show(this.id)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype._openSubLayer=function(){try{this.setSubLayer(),this.isOpen||(this.itemTable.show(),this.itemTable.render.setAttribute("aria-expanded","true"),this.setSelectOptions(),this.setItemTable(),this.itemTable.focus(),this.isOpen=!0)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.closeSubLayer=function(t){try{var e={documentClick:t};WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype._closeSubLayer=function(t){try{this.isOpen&&null!=this.itemTable&&(this.itemTable.hide(),this.itemTable.render.setAttribute("aria-expanded","true"),this.isOpen=!1)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.finalize=function(){try{for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove();for(t=this.storedFrame.length-1;t>=0;t--){var e=d.D.getComponentById(this.storedFrame[t]);null!=e&&e.remove()}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.checkLoadEvent=function(t){try{if(t&&t.render&&t.render.contentWindow){var e=t.render.contentWindow;e.WebSquare&&e.WebSquare.scriptSectionExcuteFlag&&"executed"===e.WebSquare.scriptSectionExcuteFlag&&(d.D.clearInterval(t.id+"_checkLoadEvent"),d.D.fullViewed&&d.D.zoomed(e.document.body,"1")),e.WebSquare||d.D.clearInterval(t.id+"_checkLoadEvent")}}catch(e){t&&d.D.clearInterval(t.id+"_checkLoadEvent"),l.w.printStackTrace(e,null,this)}},g.prototype.moveTab=function(t,e){try{if(t===e||t<0||e<0)return;var i=this.tabArr[this.selectedIndex],o=this.tabArr[t].userTabID,s=this.tabArr[e].userTabID;if(!1===h.B.fireEvent(this,"onbeforetabmove",{startTabID:o,startTabIndex:t,endTabID:s,endTabIndex:e}))return;var r=this.getTabHostAndContainer().tabhost,a=t>e?0:1;e<this.getTabCount()-1?r.insertBefore(this.tabArr[t].render,this.tabArr[e+a].render):r.appendChild(this.tabArr[t].render);var n=function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])};n(this.tabArr,t,e),n(this.contentsArr,t,e),n(this.bridgeIdArr,t,e),this.backbridgeIdArr&&this.backbridgeIdArr.length>0&&n(this.backbridgeIdArr,t,e);for(var d=0;d<this.tabArr.length;d++)if(this.tabArr[d]===i){this.selectedIndex=d;break}h.B.fireEvent(this,"onaftertabmove",{startTabID:o,startTabIndex:t,endTabID:s,endTabIndex:e})}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.getTabInfo=function(){try{for(var t=[],e=this.getTabCount(),i=0;i<e;i++)t.push({id:this.tabArr[i].userTabID,label:this.tabArr[i].label,
defaultTabIndex:Number(this.tabArr[i].render.getAttribute("index"))-1,currentTabIndex:i,src:this.contentsArr[i].src,alwaysDraw:this.contentsArr[i].alwaysDraw});return t}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setTabOrder=function(t){try{var e=this.getTabCount();if(t.length!==e)return void u.k.printLog("WARNING !!! : setTabOrder argument array length must be "+e+"["+this.id+"]");for(var i=[],o=0;o<e;o++){var s=this.getTabIndex(t[o]);null==s&&(s=t[o]),i.push(s)}var r=this.getTabHostAndContainer().tabhost;for(o=0;o<e;o++)r.appendChild(this.tabArr[i[o]].render);var a=function(t,e){for(var i=t.splice(0,t.length),o=0;o<i.length;o++)t.push(i[e[o]])};a(this.tabArr,i),a(this.contentsArr,i),a(this.bridgeIdArr,i),this.backbridgeIdArr&&this.backbridgeIdArr.length>0&&a(this.backbridgeIdArr,i),this.selectedIndex=i[this.selectedIndex]}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setTabHTML=function(t,e){try{var i=this._getTabIndex(t);if(!this._isValidTabIndex(i))return;var o=this.tabArr[i];if(e&&o){var s=e;try{var r=d.D.getGlobalFunction(e,this.scope_id);s="function"==typeof r?r(o.label):r}catch(t){s=e}var a=document.getElementById(o.tabID+"_tabHTML");a&&(a.innerHTML=s,this.options.tabHTML=s)}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setWidth=function(t){try{if(t=parseInt(t,10),!isNaN(t)){this.render.style.width=t+"px",this.getTabHostAndContainer().container.style.width=t+"px";for(var e=0;e<this.tabArr.length;e++){var i=this.tabArr[e],o=this.contentsArr[e],s=this.getChild(o.contentsID+"_body");i.contentsRender=document.getElementById(i.contentsID),i.contentsRender.style.width=t+"px",s&&s.render&&(s.render.style.width=t+"px")}}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setHeight=function(t){try{if(t=parseInt(t,10),!isNaN(t)){this.render.style.height=t+"px";var e=this.getTabHostAndContainer(),i=e.container;t-=e.tabhost.clientHeight,i.style.height=t+"px";for(var o=0;o<this.tabArr.length;o++){var s=this.tabArr[o],r=this.contentsArr[o],a=this.getChild(r.contentsID+"_body");s.contentsRender=document.getElementById(s.contentsID),s.contentsRender.style.height=t+"px",a&&a.render&&(a.render.style.height=t+"px")}}}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.setWindowMaxNum=function(t){try{if(!t||"number"!=typeof t)return!1;this.options.windowMaxNum=t}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype.changeTabhostAccessibility=function(t,e){try{if(null==t||null==t||t<0||t>=this.getTabCount())return;if(0==e||e||(e=this.selectedIndex),t==e)return;var i,o,s=this.getTabHostAndContainer().tabhost,r=s.childNodes[t],a=s.childNodes[e];return"image"==this.tabArr[t].tabType?r&&r.firstChild&&(i=r.firstChild):r&&r.firstChild&&r.firstChild.firstChild&&(i=r.firstChild.firstChild),this.tabArr[e]&&"image"==this.tabArr[e].tabType?a&&a.firstChild&&(o=a.firstChild):a&&a.firstChild&&a.firstChild.firstChild&&(o=a.firstChild.firstChild),o&&o.setAttribute("aria-selected","false"),void(i&&i.setAttribute("aria-selected","true"))}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype._addTabEvent=function(t){try{var e=WebSquare.idCache[t.uuid],i=this.uuid,o=t.tabID,s=t.userTabID,r="on"+e.options.pluginName+"load";e.bind(r,(function(){var t=WebSquare.idCache[i];if(t){var e=t.getTabIndex(s);h.B.fireEvent(t,"ondrawcomplete",o,e,s),h.B.fireEvent(t,"ontabload",o,e,s)}}));var a="on"+e.options.pluginName+"unload";e.bind(a,(function(){var t=WebSquare.idCache[i];if(t){var e=t.getTabIndex(s);h.B.fireEvent(t,"ontabunload",o,e,s)}}))}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype._isValidTabIndex=function(t){try{return!(isNaN(t)||t<0||t>=this.tabArr.length)}catch(t){l.w.printStackTrace(t,null,this)}},g.prototype._initializeIScroll=function(){try{d.D.isMobile()&&(this.iScroll={epsilon:30})}catch(t){l.w.printStackTrace(t,null,this)}}},7624:function(t,e,i){"use strict";i.r(e),i.d(e,{textarea:function(){return d}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=i(2117),d=function(t,e,i){
l.s.call(this,t,e,i)};o.x.extend(d.prototype,l.s.prototype),o.x.extend(d.prototype,h.z.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.textarea",pluginName:"textarea",userEvents:["oneditend","onchange","onviewchange","oneditkeyup","oneditenter","oneditfull"],systemEvents:["onclick","ondblclick","onkeydown","onfocus","onbeforeeditfocus","onfocusin","onblur","onkeyup","onkeypress","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove"],useConfig:!0,initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,title:"",wrap:"",readOnlyClass:"w2textarea_readonly",focusRemember:!1,placeholder:"",showPlaceHolderOnReadOnly:!1,name:"",refSyncKeyup:!1,preventCopyPaste:!1,nextTabByEnter:!1},d.prototype.initialize=function(t){try{this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.refreshStop=!1,this.caretPosition={start:-1,end:-1},this.rememberCaretPosition=this.options.focusRemember&&s.v.browserCheck.ie&&parseInt(s.v.browserVersion(),10)<10,this._focusStatus="init",this.realValue="",this.supportPlaceholder=!1,this.options.placeholder&&WebSquare.uiplugin.textarea.placeholder&&(this.supportPlaceholder=!0),this.beforeEditValue=""}catch(t){r.w.printStackTrace(t,null,this)}},d.placeholder="string"==typeof document.createElement("textarea").placeholder,d.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'",o=""==this.options.title?"":"title='"+this.options.title+"'",s=""==this.options.wrap?"":"wrap='"+this.options.wrap+"'",a=""==this.supportPlaceholder?"":" placeholder='"+this.options.placeholder+"'",n=""==this.options.name?"":"name='"+this.options.name+"'";return t.push("<textarea id='"+this.id+"' "+e+" class='w2textarea "+this.options.className+"' "+o+" "+s+" "+i+" "+a+" "+n+">"),t.push("</textarea>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setAction=function(){try{this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.addEvent("oneditend",(function(){if(!this.options.placeholder||this.supportPlaceholder||0!=this.realValue.length||!this.render.className.match("w2textarea_placeholder")){var t=this.getValue(),e=t;-1!=this.options.maxByteLength&&(t=n.D.getStringByByteSize(t,this.options.maxByteLength)),t=this.validator.validateString(t),this.options.focusRemember&&e==t||this.setValueNM(t)}})),this.options.maxlength>0&&this.render.setAttribute("maxlength",this.options.maxlength),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),(n.D.isIEAllVersion()||n.D.isSpartan())&&(this.event.addListener(this.render,"onbeforeeditfocus",this.event.bindAsEventListener(this,this.handleBeforeFocusEvent)),this.event.addListener(this.render,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusinEvent))),this.options.preventCopyPaste&&(n.D.isOpera()&&(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t),this.focus()}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,(function(t){t.ctrlKey&&(88!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode||a.B.stopEvent(t))})))),this.setStyle("MozUserSelect","none"),this.event.addListener(this.render,"ondragstart",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){
a.B.stopEvent(t)}))),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)}))),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,(function(t){a.B.stopEvent(t)})))),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.rememberCaretPosition&&this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2textarea_placeholder")),this.refresh()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setValueNM=function(t){try{if(n.D.isNull(t)||this.refreshStop)return;t=t.toString(),this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass("w2textarea_placeholder")||this.addClass("w2textarea_placeholder"),this.render.value=this.options.placeholder):(this.removeClass("w2textarea_placeholder"),this.render.value=t):this.render.value=t,this.realValue=t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getValue=function(){try{return this.refreshStop?this.refreshStopValue:this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2textarea_placeholder")?"":this.render.value}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setInitValue=function(t){try{var e=this.getValue();this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.addClass(this.render,"w2textarea_disabled"):this.removeClass(this.render,"w2textarea_disabled");break;case"readOnly":1==e?this.addClass(this.render,this.options.readOnlyClass):this.removeClass(this.render,this.options.readOnlyClass);break;case"mandatory":1==e?this.addClass(this.render,"w2textarea_mandatory"):this.removeClass(this.render,"w2textarea_mandatory")}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},d.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t)}},d.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=n.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},d.prototype.focusPreTabOrder=function(){try{
if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=n.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){r.w.printStackTrace(t)}},d.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){r.w.printStackTrace(t)}},d.prototype.setNextTabID=function(t,e){try{null!=t&&n.D.setNextTabID(this.id,t,e)}catch(t){r.w.printStackTrace(t)}},d.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},d.prototype.handleFocusEvent=function(t){try{this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value="",this.removeClass("w2textarea_placeholder")),this.rememberCaretPosition&&(this.caretPosition=WebSquare.text.getSelection(this.render));var e=this;WebSquare.historyManager.set(this.options.pluginName,this.id,{value:this.getValue()},{onRestore:function(t){e.refreshStop=!0,e.refreshStopValue=t.value;var i=e.refreshStopValue;if(!n.D.isNull(i)){var o=e.render.value;e.setValueNM(i),e.modelControl.setData(i),o!=i&&a.B.fireEvent(e,"onchange",{oldValue:o,newValue:i}),e.refreshStop=!1,e.refreshStopValue=""}}}),this._focusStatus="done"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleBlurEvent=function(t){try{if(a.B.fireEvent(this,"oneditend"),this.options.focusRemember){var e=this.getValue();if(n.D.isNull(e))return;this.modelControl.setData(e)}else this.setValue(this.getValue());var i=WebSquare.historyManager.get(this.options.pluginName,this.id);i.value!=this.getValue()&&(a.B.fireEvent(this,"onchange",{oldValue:i.value,newValue:this.getValue()}),a.B.fireEvent(this,"onviewchange",{oldValue:i.value,newValue:this.getValue()})),this._focusStatus="init"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleKeydownEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode;if(9==i||13==i&&!0===this.options.nextTabByEnter)if(!1!==a.B.fireEvent(this,"onEditEnter",t))if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(a.B.preventDefault(t),e=n.D.getPreTabbableComp(this.id))return void e.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(a.B.preventDefault(t),e=n.D.getNextTabbableComp(this.id))return void e.focus();this.beforeEditValue=this.getValue()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleKeypressEvent=function(t){try{this.validator.validateKeyPress(this.render,this.getValue(),t)||a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleKeyupEvent=function(t){try{this.options.refSyncKeyup&&this.commit();var e=!1,i=t.charCode?t.charCode:t.keyCode;if(37==i);else if(38==i);else if(39==i);else if(40==i);else if(33==i);else if(34==i);else if(35==i);else if(36==i);else if(n.D.isIE()&&this.options.maxlength>-1){var o=WebSquare.text.getSelection(this.render);0!=t.charCode&&o.start==o.end&&this.render.value.length+1>this.options.maxlength&&(e=!0)}if(-1!=this.options.maxByteLength)(s=this.render.value)!=n.D.getStringByByteSize(s,this.options.maxByteLength)&&(e=!0);if(this.rememberCaretPosition&&(this.caretPosition=WebSquare.text.getSelection(this.render)),e&&(this.render.blur(),this.rememberCaretPosition?WebSquare.text.setSelection(this.render,this.caretPosition):this.render.focus()),-1!=this.options.maxByteLength){var s=this.render.value,l=n.D.getByteLength(s)===this.options.maxByteLength&&!0!==n.D.isKorean(s.charAt(s.length-1)),h=n.D.getByteLength(s)>this.options.maxByteLength;if(l||h){var d={value:this.getValue(),keyCode:i};a.B.fireEvent(this,"oneditfull",d)}}d={oldValue:this.beforeEditValue,newValue:this.getValue(),keyCode:i};a.B.fireEvent(this,"oneditkeyup",d,t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.focus=function(){
this.rememberCaretPosition?WebSquare.text.setSelection(this.render,this.caretPosition):l.s.prototype.focus.call(this)},d.prototype.handleMouseupEvent=function(t){this.caretPosition=WebSquare.text.getSelection(this.render)},d.prototype.handleFocusinEvent=function(t){this._focusStatus="focusin"},d.prototype.handleBeforeFocusEvent=function(t){switch(this._focusStatus){case"init":this._focusStatus="ready";break;case"ready":this._focusStatus="cancel",this.focus();break;case"done":this._focusStatus="init"}},d.prototype.setPlaceholder=function(t){try{if(n.D.isNull(t))return;if(this.options.placeholder!=t)if(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder){var e=document.getElementById(this.id);this.options.showPlaceHolderOnReadOnly||!e.disabled&&!e.readOnly?e.placeholder=this.options.placeholder:this.options.placeholder=""}else 0==this.realValue.length&&(this.render.disabled||this.render.readOnly?this.options.placeholder="":this.hasClass("w2textarea_placeholder")?this.render.value=this.options.placeholder:(this.render.value=this.options.placeholder,this.addClass("w2textarea_placeholder")))}catch(t){r.w.printStackTrace(t)}},d.prototype.setDisabled=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.disabled=t,this.setProperty("disabled",t)}else this.options.disabled=t,this.setProperty("disabled",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.w.printStackTrace(t)}return t},d.prototype.setReadOnly=function(t){try{if(t=n.D.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t)}else this.options.readOnly=t,this.setProperty("readOnly",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.w.printStackTrace(t,null,this)}return t},d.prototype.commit=function(){try{this.setValue(this.getValue())}catch(t){r.w.printStackTrace(t,null,this)}}},7107:function(t,e,i){"use strict";i.r(e),i.d(e,{textbox:function(){return d}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(9075),h=i(1),d=function(t,e,i){if(h.s.call(this,t,e,i),i){var o=WebSquare.Elem.api.getLocalName(i);"textbox"!=o&&(this.options.tagname=o)}""!=this.options.for&&(this.options.tagname="label")};o.x.extend(d.prototype,h.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.textbox",pluginName:"textbox",serializable:!0,parseAttributes:!0,userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onmouseover","onmouseout"],useConfig:!0,label:"",escape:!0,escapeFormatter:"",for:"",tagname:"div",localeRef:"",useLocale:!1,ioFormat:"",displayFormat:"",displayFormatter:null,dataType:"text",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",initStyle:!1,tooltipClass:"",tooltipTime:1,tooltipDisplay:!1,tooltipPositionX:"20",tooltipPositionY:"3+cellHeight",tooltipShowAlways:!1},d.prototype.htmlStr=["<",""," id='","","' ",""," class='w2textbox ","","' ","",">","","</","",">"],d.prototype.htmlClosingStr=["<",""," id='","","' ",""," class='w2textbox ","","'",""," />"],d.prototype.initialize=function(t){if(this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,
this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter="-")}this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.useEscapeFormatter=!1,this.tooltipPositionParse=!1},d.prototype.toHTML=function(){if(null!=this.scope_obj&&this.scope_obj.id&&this.options.for){var t=n.D.getComponentById(this.options.for,this.scope_obj.id);null!=t&&(this.options.for=t.id)}var e=s.v.getEmptyTag(),i="",o="";if(""!=this.options.for&&(o=" for='"+this.options["_for".slice(1)]+"'"),e[this.options.tagname.toLowerCase()])(i=this.htmlClosingStr)[1]=this.options.tagname,i[3]=this.id,i[5]=""==this.options.style?"":" style='"+this.options.style+"'",i[5]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",i[7]=this.options.className,i[9]=("label"==this.options.tagname?o:"")+this.getAttributesString();else{(i=this.htmlStr)[1]=this.options.tagname,i[3]=this.id,i[5]=""==this.options.style?"":"style='"+this.options.style+"'",i[5]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",i[7]=this.options.className,i[9]=("label"==this.options.tagname?o:"")+this.getAttributesString();var r="";r=this.options.escapeFormatter?this.setEscapeFormatter():this.options.escape?this.formatter.format(WebSquare.xml._encode(this.options.label)):this.formatter.format(this.options.label),i[11]=r,i[13]=this.options.tagname}return i.join("")},d.prototype.setEscapeFormatter=function(){try{if(this.options.escapeFormatter){try{if("function"==typeof this.options.escapeFormatter)this.useEscapeFormatter=!0;else{var t=n.D.getGlobalFunction(this.options.escapeFormatter,this.scope_id);this.options.escapeFormatter=t,"function"==typeof t&&(this.useEscapeFormatter=!0)}}catch(t){l.k.printLog("cannot find function : "+this.options.escapeFormatter+"["+this.id+"]")}var e=this.options.label;return this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e)}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.onComplete=function(){this.options.escapeFormatter&&!this.useEscapeFormatter&&(this.render.innerHTML=this.setEscapeFormatter()),h.s.prototype.onComplete.call(this)},d.prototype.setAction=function(){try{if(this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.refresh(),this.displayLocaleValue(),this.options.tooltipDisplay&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent))),"label"!=this.options.tagname||""==this.options.for)return;var i=n.D.getComponentById(this.options.for)||null;if(null==i)return
;var o="function"==typeof i.getAccessibiltyId?i.getAccessibiltyId():this.options.for;this.render.setAttribute("for",o)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setLocaleRef=function(t){try{this.options.localeRef=t,this.displayLocaleValue()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.label=t,this.useEscapeFormatter&&(t=this.options.escapeFormatter.call(this,t)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(t+"")):this.formatter.format(t),this.options.label=t}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setLabel=function(t){try{this.setValue(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getLabel=function(){try{return this.getValue()}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setValue=function(t){try{this.options.label=t;var e=this.options.label;this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e),this.modelControl.setData(t)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getValue=function(){try{return this.options.escape?WebSquare.xml._decode(this.options.label+""):this.options.label}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getFormatValue=function(){try{return this.options.escape?this.formatter.format(WebSquare.xml._decode(this.options.label+"")):this.formatter.format(this.options.label)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.setDisplayFormatter=function(t){try{this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.w.printStackTrace(t)}},d.prototype.getDataType=function(){try{return this.options.dataType}catch(t){r.w.printStackTrace(t)}},d.prototype.addClass=function(){try{h.s.prototype.addClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.removeClass=function(){try{h.s.prototype.removeClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.changeClass=function(){try{h.s.prototype.changeClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.toggleClass=function(){try{h.s.prototype.toggleClass.apply(this,arguments)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getAttributeNode=function(t){try{return h.s.attributes.getAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},d.prototype.setAttributeNode=function(t,e){try{h.s.attributes.setAttributeNode.call(this,t,e)}catch(t){r.w.printStackTrace(t)}},d.prototype.removeAttributeNode=function(t){try{h.s.attributes.removeAttributeNode.call(this,t)}catch(t){r.w.printStackTrace(t)}},d.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.w.printStackTrace(t)}},d.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.w.printStackTrace(t)}},d.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.w.printStackTrace(t)}},d.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),
this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null),this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2textbox_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i})),100*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.serialize=function(){return{value:this.getValue()}},d.prototype.restore=function(t){try{this.setValue(t.value)}catch(t){return r.w.printStackTrace(t,null,this),!1}return!0},d.prototype.handleMouseoverEvent=function(t){try{var e=a.B.getTarget(t);if(e){var i=e,o=WebSquare.style.getStyle(e,"text-overflow"),s=e.offsetWidth,h=e.offsetHeight,d=20,u=h+3;try{this.options.tooltipPositionX&&(d=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(s,h)),this.options.tooltipPositionY&&(u=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(s,h))}catch(t){l.k.printLog("tooltipPosistion 옵션 적용 중 오류 발생. 옵션 무시하고 기본값 적용.["+this.id+"]"),r.w.printStackTrace(t,null,this)}if("ellipsis"==o){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=i.className,this.toolTipRuler.innerHTML=i.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(i,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(i,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(i,"font-weight");var c=this.toolTipRuler.offsetWidth,p=e.clientWidth;if(3!=i.nodeType){var g=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),m=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");c-=parseInt(g||"0",10),c-=parseInt(m||"0",10),p-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),p-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(p<c||this.options.tooltipShowAlways){var f=WebSquare.style.getAbsoluteLeft(e)+d,b=WebSquare.style.getAbsoluteTop(e)+u,y=i.innerText.wq_trim();if(this.options.tooltipFormatter)try{var v=n.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);"function"==typeof v&&(y=v(this.id,y))}catch(t){r.w.printStackTrace(t,null,this)}document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel&&(y=this.options.tooltipItemLabel),this.showTooltip(f,b,y)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.handleMouseoutEvent=function(t){try{a.B.stopEvent(t),this.hideTooltip()}catch(t){r.w.printStackTrace(t,null,this)}}},2006:function(t,e,i){"use strict";i.r(e),i.d(e,{treeview:function(){return p}});var o=i(484),s=i(1974),r=i(5052),a=i(5948),n=i(1454),l=i(8683),h=i(9075),d=i(1),u=function(){this.index=-1,this.id="",this.label="",this.orgLabel="",this.value="",this.element=null,this.depth=-1,this.parentNode=null,this.childNodes=[],this._isRoot=null,this._hasChild=null,this._isLastChild=null,this.image="",this.selectedImage="",this.expandedImage="",this.checked=!1,this.folder=!1};u.prototype.appendChild=function(t){
if(!t)return!1;var e=this;do{if(t==e)return!1;e=e.parentNode}while(e);return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=this,this.childNodes.push(t),!0},u.prototype.removeChild=function(t){if(t){for(var e=[],i=0;i<this.childNodes.length;i++){var o=this.childNodes[i];o!=t&&e.push(o)}this.childNodes=e}},u.prototype.isRoot=function(){return this._isRoot=null,this._isRoot=null==this.parentNode,this._isRoot},u.prototype.hasChild=function(){return this._hasChild=null,this.folder?this.folder:(this._hasChild=0!=this.childNodes.length,this._hasChild)},u.prototype.isLeaf=function(){return!this.hasChild()},u.prototype.isFirstChild=function(){var t=!1;return this.parentNode?(this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},u.prototype.isLastChild=function(){if(this._isLastChild=null,!this.parentNode)return!0;var t=this.parentNode.childNodes;return t[t.length-1]==this&&(this._isLastChild=!0),1!=this._isLastChild&&(this._isLastChild=!1),this._isLastChild},u.prototype.isFirstChildByRoot=function(){var t=!1;return this.parentNode?(0!=this.parentNode.depth||this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},(u.nodeIterator=function(t,e){this.node=t,this.status=0,this.options=s.x.extend({type:"dfs",pruning:null},s.x.extend({},e)),this.stack=[]}).prototype.next=function(){return!!this.node&&(0==this.status?(this.status=1,!0):("dfs"==this.options.type?(this.stack=this.node.childNodes.concat(this.stack),this.node=this.stack.shift()):"bfs"==this.options.type&&(this.stack=this.stack.concat(this.node.childNodes),this.node=this.stack.shift()),!!this.node))},u.nodeIterator.prototype.stop=function(){this.status=2},u.nodeIterator.prototype.getNode=function(){return this.node};var c=function(){this.nodeCount=0,this.rootNode=null,this.hash_index_node={},this.useXPath=!1,this.useCheckbox=!1,this.useImage=!1;this.xpath={nodeset:"",label:"w2:label",value:"w2:value",depth:"w2:depth",nodeName:"w2:node",checkbox:"",folder:"w2:folder"},this.dataPath={},this.imageXPath={image:"",iconImage:"",leafImage:"",selectedImage:"",expandedImage:""},this.checkbox={xpath:"",trueValue:"",falseValue:"",checkboxDisabled:"",checkboxDisabledTrueValue:"",checkboxDisabledFalseValue:"",checkboxDisabledAll:""},this.valueAttribute="",this.displayMode="0",this.delimiter="\t",this.customFormatter="",this.treeView="",this.isInstance=!1};c.prototype.getNodeset=function(){if(""!=this.xpath.nodeset)return this.xpath.nodeset},c.prototype.setXPath=function(t,e,i,o,s,r,a){""!=t&&(this.useXPath=!0,this.xpath.nodeset=t,this.xpath.label=e,this.xpath.value=i,this.xpath.depth=o,this.xpath.nodeName=s,this.xpath.folder=r,this.xpath.auth=a)},c.prototype.setDataPath=function(t,e,i,o,s,r){this.dataPath.label=t,this.dataPath.value=e,this.dataPath.depth=i,this.dataPath.nodeName=o,this.dataPath.folder=s,this.dataPath.checkbox=r},c.prototype.setCheckbox=function(t,e,i,o,s,r,a,n,l,h,d){""!=t&&(this.useCheckbox=!0,this.checkbox.xpath=t,this.checkbox.trueValue=e,this.checkbox.falseValue=i,this.checkbox.checkboxDisabled=o,this.checkbox.checkboxDisabledTrueValue=s,this.checkbox.checkboxDisabledFalseValue=r,this.checkbox.checkboxDisabledAll=a,this.checkbox.refreshCheckboxModel=n,this.checkbox.refreshCheckboxDisableModel=l,this.checkbox.hierarchy=h,this.checkbox.colID=d)},c.prototype.setDisplayMode=function(t,e){this.displayMode=t,this.delimiter=e},c.prototype.setImage=function(t,e,i,o,s,r){this.useImage=!0,this.imageXPath.image=t||"",this.imageXPath.iconImage=e||"",this.imageXPath.leafImage=i||"",this.imageXPath.selectedImage=o||"",this.imageXPath.expandedImage=s||"",this.imageXPath.imageTitle=r||""},c.prototype.setXML=function(t){t&&(this.nodeCount=0,this.rootNode=null,this.hash_index_node={},1==this.isInstance?(this.rootNode=this.parseNodeInstance(t,0,0),1==this.useImage&&this.parseImageInstance(this.rootNode)):(this.rootNode=this.parseNode(t,0,0),1==this.useImage&&this.parseImage(this.rootNode)))},c.prototype.appendXML=function(t,e){
if(t){var i=this.findNodeByIndex(e),o=i.element,s=1;if(1==this.isInstance){for(var r=t.firstChild;null!=r;r=t.firstChild)1==r.nodeType&&r.tagName==this.xpath.nodeName&&i.appendChild(this.parseNodeInstance(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImageInstance(i)}else{for(var a=t.getChildNodes(),n=0;n<a.length;n++)1==(r=a[n]).nodeType&&r.getTagName()==this.xpath.nodeName&&i.appendChild(this.parseNode(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImage(i)}return i}},c.prototype.parseNodeInstance=function(t,e,i,o){if(!t)return null;var s=WebSquare.xml.getValue(t,this.xpath.label).wq_trim(),r=!1,a=this.xpath.auth&&WebSquare.xml.getValue(t,this.xpath.auth).wq_trim();if(this.xpath.folder){var n=WebSquare.xml.getValue(t,this.xpath.folder).wq_trim();this.treeview&&this.treeview.options&&this.treeview.options.trueValue&&(r=n==this.treeview.options.trueValue),"true"!=n.toLowerCase()&&"false"!=n.toLowerCase()||(r="true"==n)}for(var l="",h=this.xpath.value.split(" "),d=0;d<h.length;d++)0!=d&&(l+="$$"),l+=WebSquare.xml.getValue(t,h[d]).wq_trim();var c=new u;switch(c.index=this.nodeCount++,c.depthIndex=i,this.displayMode){case"0":c.label=s;break;case"1":c.label=l+this.delimiter+s;break;case"2":c.label=s+this.delimiter+l;break;default:c.label=s}if(c.orgLabel=c.label,c.value=l,c.element=t,c.depth=e,c.folder=r,c.auth=a,1==e?this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset:e>1&&("recursive"==this.dataType?this.xpath.value?c.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+c.value+"']":c.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset),1==this.useCheckbox){var p=WebSquare.xml.getValue(t,this.checkbox.xpath).wq_trim();if(c.checkboxXPath=c.xpath+"/"+this.checkbox.xpath,p==this.checkbox.trueValue?(c.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.trueValue)):(c.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){c.checkboxDisableXPath=c.xpath+"/"+this.checkbox.checkboxDisabled;var g=WebSquare.xml.getValue(t,this.checkbox.checkboxDisabled).wq_trim();1==this.checkbox.checkboxDisabledAll?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),g==this.checkbox.checkboxDisabledTrueValue?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):g==this.checkbox.checkboxDisabledFalseValue&&(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}for(var m=1,f=t.firstChild;null!=f;f=f.nextSibling)1==f.nodeType&&f.tagName==this.xpath.nodeName&&c.appendChild(this.parseNodeInstance(f,e+1,m++,c));if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var b=0,y=!1;for(d=0;d<c.childNodes.length;d++){var v=c.childNodes[d];1==v.checked?b++:1==v.partial&&(y=!0)}1==y||0<b&&b<c.childNodes.length?c.partial=!0:b>0&&b==c.childNodes.length?(c.checked=!0,c.checkboxDom||(c.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+c.index)),c.checkboxDom&&(c.checkboxDom.checked=!0)):c.partial=!1}if(this.hash_index_node[c.index]=c,"function"==typeof this.customFormatter){var w=this.customFormatter,S=this.getCloneNode(c),C=w.call(this.treeview,c.orgLabel,c.label,S)||c.label;c.label=C}return c},c.prototype.parseNode=function(t,e,i,o){
if(!t)return null;var s=WebSquare.jsonUtil.getValue(t._element,this.xpath.label,this.valueAttribute),r=!1,a=this.xpath.auth&&WebSquare.jsonUtil.getValue(t._element,this.xpath.auth,this.valueAttribute);if(this.xpath.folder){var n=WebSquare.jsonUtil.getValue(t._element,this.xpath.folder,this.valueAttribute);this.treeview&&this.treeview.options&&this.treeview.options.trueValue&&(r=n==this.treeview.options.trueValue),"true"!=n.toLowerCase()&&"false"!=n.toLowerCase()||(r="true"==n)}for(var l="",h=this.xpath.value.split(" "),d=0;d<h.length;d++)0!=d&&(l+="$$"),l+=WebSquare.jsonUtil.getValue(t._element,h[d],this.valueAttribute);var c=new u;switch(c.index=this.nodeCount++,c.depthIndex=i,this.displayMode){case"0":c.label=s;break;case"1":c.label=l+this.delimiter+s;break;case"2":c.label=s+this.delimiter+l;break;default:c.label=s}if(c.orgLabel=c.label,c.value=l,c.element=t,c.depth=e,c.folder=r,c.auth=a,1==e?this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset:e>1&&("recursive"==this.dataType?this.xpath.value?c.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+c.value+"']":c.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset),1==this.useCheckbox){var p=WebSquare.jsonUtil.getValue(t._element,this.checkbox.xpath,this.valueAttribute);if(c.checkboxXPath=c.xpath+"/"+this.checkbox.xpath,p==this.checkbox.trueValue?(c.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.trueValue)):(c.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){c.checkboxDisableXPath=c.xpath+"/"+this.checkbox.checkboxDisabled;var g=WebSquare.jsonUtil.getValue(t._element,this.checkbox.checkboxDisabled,this.valueAttribute);1==this.checkbox.checkboxDisabledAll?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),g==this.checkbox.checkboxDisabledTrueValue?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):g==this.checkbox.checkboxDisabledFalseValue&&(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}var m=1,f=t.getChildNodes();for(d=0;d<f.length;d++){var b=f[d];1==b.nodeType&&b.getTagName()==this.xpath.nodeName&&c.appendChild(this.parseNode(b,e+1,m++,c))}if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var y=0,v=!1;for(d=0;d<c.childNodes.length;d++){var w=c.childNodes[d];1==w.checked?y++:1==w.partial&&(v=!0)}1==v||0<y&&y<c.childNodes.length?c.partial=!0:y>0&&y==c.childNodes.length?(c.checked=!0,c.checkboxDom||(c.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+c.index)),c.checkboxDom&&(c.checkboxDom.checked=!0)):c.partial=!1}if(this.hash_index_node[c.index]=c,"function"==typeof this.customFormatter){var S=this.customFormatter,C=this.getCloneNode(c),x=S.call(this.treeview,c.orgLabel,c.label,C)||c.label;c.label=x}return c},c.prototype.parseNodeByNode=function(t,e,i,o){if(!t)return null;var s=new u;s.index=this.nodeCount++,s.depthIndex=i,s.label=t.label,s.orgLabel=s.label,s.value=t.value,s.element=t.element.cloneNode(!0),s.depth=e,s.folder=t.folder,s.xpath="",s.checkboxXPath="",s.imageTitle=t.imageTitle,s.labelStyle=t.labelStyle,void 0!==t.checked&&(s.checked=t.checked),s.checkboxDisableXPath="",void 0!==t.checkboxDisabled&&(s.checkboxDisabled=t.checkboxDisabled)
;for(var r=1,a=0;a<t.childNodes.length;a++)s.appendChild(this.parseNodeByNode(t.childNodes[a],e+1,r++,s));return this.hash_index_node[s.index]=s,s},c.prototype.parseImage=function(t){var e="",i="",o="",s="",a="",n=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(n)?this.imageXPath.image:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.image,this.valueAttribute)),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(n)?this.imageXPath.iconImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.iconImage,this.valueAttribute)),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(n)?this.imageXPath.selectedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.selectedImage,this.valueAttribute)),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(n)?this.imageXPath.expandedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.expandedImage,this.valueAttribute)),""!=this.imageXPath.leafImage&&(a=this.imageXPath.leafImage.match(n)?this.imageXPath.leafImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.leafImage,this.valueAttribute)),""!=a&&1==t.isLeaf()&&(e=a),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),this.treeview&&"function"==typeof this.treeview.getURL?(t.image=""==e?"":this.treeview.getURL(e),t.selectedImage=""==o?"":this.treeview.getURL(o),t.expandedImage=""==s?"":this.treeview.getURL(s)):(t.image=""==e?"":r.v.getURL(e),t.selectedImage=""==o?"":r.v.getURL(o),t.expandedImage=""==s?"":r.v.getURL(s)),t.imageTitle=this.imageXPath.imageTitle&&WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.imageTitle);for(var l=0;l<t.childNodes.length;l++)this.parseImage(t.childNodes[l])},c.prototype.parseImageInstance=function(t){var e="",i="",o="",s="",a="",n=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(n)?this.imageXPath.image:WebSquare.xml.getValue(t.element,this.imageXPath.image).wq_trim()||""),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(n)?this.imageXPath.iconImage:WebSquare.xml.getValue(t.element,this.imageXPath.iconImage).wq_trim()||""),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(n)?this.imageXPath.selectedImage:WebSquare.xml.getValue(t.element,this.imageXPath.selectedImage).wq_trim()||""),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(n)?this.imageXPath.expandedImage:WebSquare.xml.getValue(t.element,this.imageXPath.expandedImage).wq_trim()||""),""!=this.imageXPath.leafImage&&(a=this.imageXPath.leafImage.match(n)?this.imageXPath.leafImage:WebSquare.xml.getValue(t.element,this.imageXPath.leafImage).wq_trim()||""),""!=a&&1==t.isLeaf()&&(e=a),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),this.treeview&&"function"==typeof this.treeview.getURL?(t.image=""==e?"":this.treeview.getURL(e),t.selectedImage=""==o?"":this.treeview.getURL(o),t.expandedImage=""==s?"":this.treeview.getURL(s)):(t.image=""==e?"":r.v.getURL(e),t.selectedImage=""==o?"":r.v.getURL(o),t.expandedImage=""==s?"":r.v.getURL(s)),t.imageTitle=this.imageXPath.imageTitle&&WebSquare.xml.getValue(t.element,this.imageXPath.imageTitle);for(var l=0;l<t.childNodes.length;l++)this.parseImageInstance(t.childNodes[l])},c.prototype.parseListToTree=function(t){for(var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=WebSquare.xmljs.xml2json(e).E[0],o=0;o<t.length;o++)t[o]._element.parent=i;var s=i,r=0;this.dataType="list";for(o=0;o<t.length;o++){s=new WebSquare.Elem(s);var a=t[o],n=parseInt(WebSquare.jsonUtil.getValue(a._element,this.xpath.depth,this.valueAttribute))||0;r=parseInt(WebSquare.jsonUtil.getValue(s._element,this.xpath.depth,this.valueAttribute))||0;if(0===n&&0!==r&&(a.setNodeValue(this.xpath.depth,r),n=r),r<n)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n&&0==o)a._element.parent=s._element,
a=s.appendChild(a._element);else if(r==n){a._element.parent=s.getParentNode()._element,a=s.getParentNode().appendChild(a._element)}else if(r>n){s=s.getParentNode();for(var l=0;l<r-n;l++)null!=s._element.parent&&(s=s.getParentNode());s.element&&(s=s._element),a._element.parent=s._element,a=s.appendChild(a._element)}s=a}return new WebSquare.Elem(i)},c.prototype.parseListToTreeInstance=function(t){var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=e.documentElement,o=0;this.dataType="list";for(var s=0;s<t.length;s++){var r=t[s].cloneNode(!0),a=parseInt(WebSquare.xml.getValue(r,this.xpath.depth))||0;o=parseInt(WebSquare.xml.getValue(i,this.xpath.depth))||0;if(0===a&&0!==o&&(WebSquare.xml.setValue(r,this.xpath.depth,o),a=o),o<a)r=WebSquare.xml.appendChild(i,r);else if(o==a&&0==s)r=WebSquare.xml.appendChild(i,r);else if(o==a){var n=i.parentNode;r=WebSquare.xml.appendChild(n,r)}else if(o>a){i=i.parentNode;for(var l=0;l<o-a;l++)null!=i.parentNode&&(i=i.parentNode);i.documentElement&&(i=i.documentElement),r=WebSquare.xml.appendChild(i,r)}i=r}return e.documentElement},c.prototype.parseRecursiveToTree=function(t){this.dataType="recursive";var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0);if(t[0]instanceof WebSquare.Elem){for(var i=new WebSquare.Elem(WebSquare.xmljs.xml2json(e).E[0]),o=0;o<t.length;o++){var s=null;s=t[o],i.appendChild(s._element)}return i}for(o=0;o<t.length;o++){s=null;s=l.D.isOpera()?WebSquare.xml.parse(t[o]).firstChild:t[o].cloneNode(!0),WebSquare.xml.appendChild(e.documentElement,s)}return e.documentElement},c.prototype.parseTreeToList=function(){var t=this.xpath.nodeset;if(t.indexOf("/")>-1){var e=t.split("/");t=e[e.length-2]}t&&""!=t||(t="Treeview");var i=WebSquare.xml.parse("<"+t+' xmlns:w2="http://www.inswave.com/websquare" />',!0),o=i.documentElement,s=this.getNodeIterator({type:"dfs"});for(s.next();s.next();){var r=s.getNode();o.appendChild(r.element)}return i.documentElement},c.prototype.getNodeIterator=function(t){return t=s.x.extend({rootNode:null},t||{}),new u.nodeIterator(t.rootNode||this.rootNode,t)},c.prototype.size=function(){return this.nodeCount},c.prototype.findNodeByValue=function(t){for(var e=null,i=this.getNodeIterator();i.next();)if(i.getNode().value==t){e=i.getNode();break}return i=null,e},c.prototype.findNodeByIndex=function(t){var e=this.hash_index_node[t];return e||null},c.prototype.setRender=function(t,e){t.rendered=e;for(var i=0;i<t.childNodes.length;i++)this.setRender(t.childNodes[i],e)},c.prototype.getCloneNode=function(t){var e={};return e.checkboxDisabled=t.checkboxDisabled,e.checked=t.checked,e.folder=t.folder,e.image=t.image,e.imageTitle=t.imageTitle,e.rendered=t.rendered,e.id=t.id,e.index=t.index,e.value=t.value,e.label=t.label,e.labelStyle=t.labelStyle,e},c.prototype.clearNode=function(t){t.element=null,t.parentNode=null,t.childNodes=[],delete this.hash_index_node[t.index]},c.prototype.changeNodeIndex=function(t,e){var i=this.hash_index_node[t];i.index=e,delete this.hash_index_node[t],this.hash_index_node[e]=i,this.changeDomIndex("node",t,e,!0),this.changeDomIndex("group",t,e,!0),this.changeDomIndex("checkbox",t,e),this.changeDomIndex("label",t,e),this.changeDomIndex("guideline",t,e),this.changeDomIndex("child",t,e),this.changeDomIndex("col_icon_navi",t,e),i.checkboxDom&&(i.checkboxDom=null,delete i.checkboxDom)},c.prototype.changeDomIndex=function(t,e,i,o){var s=document.getElementById(this.treeview.id+"_"+t+"_"+e);null!=s&&(s.setAttribute("id",this.treeview.id+"_"+t+"_"+i),o&&s.setAttribute("index",i))},c.prototype.getLastChildIndex=function(t){var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.size();for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i};var p=function(t,e,i){d.s.call(this,t,e,i)};s.x.extend(p.prototype,d.s.prototype),
p.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.treeview",pluginName:"treeview",userEvents:["onclick","ondblclick","onchange","onrightbuttonclick","ondrop","oncheckboxclick","onlabelclick","ontoggleclick","onviewchange","oneditend","onlabelover","ontooltipshow","ontooltiphide"],repeatNode:"",useDrag:!1,dataType:"recursive",lineShow:!0,alwaysDraw:!1,imgclass:"",labelclass:"",labelonClickClass:"w2treeview_select_node",defaultImage:"",iconImage:"",selectedImage:"",expandedImage:"",leafImage:"",showTreeDepth:1e3,showCheckbox:!1,trueValue:"true",falseValue:"false",checkAllChildNodes:!1,checkboxDisabled:"",checkboxDisabledTrueValue:"true",checkboxDisabledFalseValue:"false",checkboxDisabledAll:!1,rowHeight:-1,toggleEvent:"ondblclick",tooltipDisplay:!1,tooltipShowAlways:!1,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,hierarchy:!1,refreshCheckboxModel:!1,refreshCheckboxDisableModel:!1,accessibility:void 0,title:"",accordion:!1,dynamicAppend:!1,displayMode:"0",delimiter:"\t",folderOpenToggleImage:s.x._resourceURI+"uiplugin/treeview/images/plus.gif",folderCloseToggleImage:s.x._resourceURI+"uiplugin/treeview/images/minus.gif",leafToggleImage:s.x._resourceURI+"uiplugin/treeview/images/middle.gif",lastToggleImage:s.x._resourceURI+"uiplugin/treeview/images/last.gif",middleToggleImage:s.x._resourceURI+"uiplugin/treeview/images/middle.gif",escape:!0,toggleButtonEvent:"onclick",scrollFix:!1,animation:"",renderType:"table",noFocusOnIconLabelClick:!1,useHirarchySelect:!1,forceRefresh:!1,moveSibling:!1},p.prototype.initialize=function(t){try{switch(this.inlineElement=!1,1==this.options.hierarchy&&(this.options.checkAllChildNodes=!0),this.tree=new c,this.tree.treeview=this,this.selectedInfo={groupDom:null,dom:null,node:null},this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.openedNodes={},this.originalBackgroundColor="",this.originalColor="",this.options.animation=this.options.animation?this.options.animation:"",this.options.accessibility=!!t&&l.D.getBoolean(t.getAttribute("accessibility")),this.options.accessibility&&(this.options.lineShow=!1),1==this.options.accordion&&(this.options.showTreeDepth=0),this.useDataCollection=!1,this.successBinding=!1,this.beforeSetRowData={},this.editModeComp=null,this.options.displayMode){case"0":case"1":case"2":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;default:this.options.displayMode="0"}if(this.tree.setDisplayMode(this.options.displayMode,this.options.delimiter),this.options.customFormatter&&(this.tree.customFormatter=l.D.getGlobalFunction(this.options.customFormatter,this.scope_id)),this.resizeObj={width:0,height:0},t){var e=WebSquare.WebSquareparser.parseItemset(t);this.modelControl.setItemset(e.nodeset,e.label,e.value),0==this.options.modelBinding&&(this.options.refreshCheckboxModel=!1,this.options.refreshCheckboxDisableModel=!1);var i=null,o=WebSquare.Elem.api.getElementsByTagName(t,"itemset",r.v._XML_NAMESPACE.W2)[0];if(o){var s=WebSquare.Elem.api.getValue(o,"@nodeset"),n=null;this.useDataCollection=s.match("data:");if(this.useDataCollection){this.modelControl.getDataCollectionItemsetData(this.modelControl.id);var h=this.modelControl.getDataComp();if(null!=h){var d=0===h.filterManager.filterArr.length?h.getAllXML():h.getAllFilteredXML(),u=WebSquare.xmljs.xml2json(d).E[0];n=new WebSquare.Elem(u).getChildNodes(),s=h.options.baseNode+"/"+h.options.repeatNode;var p=h.options.repeatNode.split("/");if(0!=p.length&&p.length>1){for(var g=[],m=0;m<n.length;m++)g.push(n[m].getChildNodes()[0]);n=g}h.options.valueAttribute&&(this.tree.valueAttribute=h.options.valueAttribute),this.successBinding=!0}}else{n=WebSquare.ModelUtil.findInstanceNodes(s,null,this.scope_id);this.tree.isInstance=!0}var f=s.replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);f&&(f=f[0])
;var b=WebSquare.Elem.api.getElementsByTagName(o,"label",r.v._XML_NAMESPACE.W2)[0],y=WebSquare.Elem.api.getElementsByTagName(o,"value",r.v._XML_NAMESPACE.W2)[0],v=WebSquare.Elem.api.getElementsByTagName(o,"depth",r.v._XML_NAMESPACE.W2)[0],w=WebSquare.Elem.api.getElementsByTagName(o,"folder",r.v._XML_NAMESPACE.W2)[0],S=b?WebSquare.Elem.api.getValue(b,"@ref"):"",C=y?WebSquare.Elem.api.getValue(y,"@ref"):"",x=v?WebSquare.Elem.api.getValue(v,"@ref"):"",_=w?WebSquare.Elem.api.getValue(w,"@ref"):"",I=WebSquare.Elem.api.getElementsByTagName(o,"image",r.v._XML_NAMESPACE.W2)[0],T=WebSquare.Elem.api.getElementsByTagName(o,"iconImage",r.v._XML_NAMESPACE.W2)[0],k=WebSquare.Elem.api.getElementsByTagName(o,"selectedImage",r.v._XML_NAMESPACE.W2)[0],D=WebSquare.Elem.api.getElementsByTagName(o,"expandedImage",r.v._XML_NAMESPACE.W2)[0],L=WebSquare.Elem.api.getElementsByTagName(o,"leafImage",r.v._XML_NAMESPACE.W2)[0],W=WebSquare.Elem.api.getElementsByTagName(o,"checkboxDisabled",r.v._XML_NAMESPACE.W2)[0],A=WebSquare.Elem.api.getElementsByTagName(o,"checkbox",r.v._XML_NAMESPACE.W2)[0],E=WebSquare.Elem.api.getElementsByTagName(o,"imageTitle",r.v._XML_NAMESPACE.W2)[0],M=I?WebSquare.Elem.api.getValue(I,"@ref"):"",q=T?WebSquare.Elem.api.getValue(T,"@ref"):"",R=k?WebSquare.Elem.api.getValue(k,"@ref"):"",N=D?WebSquare.Elem.api.getValue(D,"@ref"):"",F=L?WebSquare.Elem.api.getValue(L,"@ref"):"",O=W?WebSquare.Elem.api.getValue(W,"@ref"):"",B=E?WebSquare.Elem.api.getValue(E,"@ref"):"",V=A?WebSquare.Elem.api.getValue(A,"@ref"):"",H=V;this.useDataCollection&&this.tree.setDataPath(S,C,x,f,_,H),""!=this.options.defaultImage&&(M=this.options.defaultImage),""!=this.options.iconImage&&(q=this.options.iconImage),""!=this.options.selectedImage&&(R=this.options.selectedImage),""!=this.options.expandedImage&&(N=this.options.expandedImage),""!=this.options.leafImage&&(F=this.options.leafImage),""!=this.options.checkboxDisabled&&(O=this.options.checkboxDisabled),this.tree.setXPath(s,S,C,x,f,_),this.tree.setCheckbox(H,this.options.trueValue,this.options.falseValue,O,this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy,V),this.tree.setImage(M,q,F,R,N,B),null!=n&&("recursive"==this.options.dataType?i=this.tree.parseRecursiveToTree(n):"listed"==this.options.dataType&&(i=1==this.tree.isInstance?this.tree.parseListToTreeInstance(n):this.tree.parseListToTree(n)))}else{this.inlineElement=!0,i=t;M="w2:image",q="w2:iconImage",R="w2:selectedImage",N="w2:expandedImage",F="w2:leafImage";""!=this.options.defaultImage&&(M=this.options.defaultImage),""!=this.options.iconImage&&(q=this.options.iconImage),""!=this.options.selectedImage&&(R=this.options.selectedImage),""!=this.options.expandedImage&&(N=this.options.expandedImage),""!=this.options.leafImage&&(F=this.options.leafImage),this.tree.setImage(M,q,F,R,N,"w2:imageTitle"),this.tree.setCheckbox("w2:checkbox",this.options.trueValue,this.options.falseValue,"w2:checkboxDisabled",this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy)}i&&this.tree.setXML(i)}this.options=WebSquare.cssManager.styleToClass(this.id,this.options),1==this.options.showCheckbox&&(1==l.D.isOpera()?this.checkboxStyle="left:-1px;top:-1px":this.checkboxStyle="left:0px;top:0px"),this.isFireTooltipEvent=!1,this.options.useHirarchySelect&&(this.selectedInfoStack=[])}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.appendData=function(t,e,i){try{if(0==this.options.dynamicAppend&&$l("treeview를 동적으로 처리하는 경우에는  dynamicAppend='true'로 설정하는 것을 권장합니다.["+this.id+"]"),void 0===t||null==t||!e)return;i=void 0!==i&&i;var o=this.tree.findNodeByIndex(t);if(!i&&o.childNodes&&o.childNodes[0]&&o.childNodes[0].rendered)return;var s=null
;if(1==this.tree.isInstance)var r=e;else if(e[0]){var n=e[0].parentNode;r=new WebSquare.Elem(WebSquare.xmljs.xml2json(n)).getChildNodes()}"recursive"==this.options.dataType?s=this.tree.parseRecursiveToTree(r):"listed"==this.options.dataType&&(s=1==this.tree.isInstance?this.tree.parseListToTreeInstance(r):this.tree.parseListToTree(r)),this.tree.appendXML(s,t),0==t?(o.hasChild(),this.drawContents()):(this.refreshNaviIcon(o),o.childNodes.length>0&&(o.childNodes[0].rendered=!1,this.toggleChild(null,o.index,!0)))}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'",o=""==this.options.title?"":"title='"+this.options.title+"'";return t.push("<div "+i+" id='"+this.id+"' index='0' "+e+" class='w2treeview "+this.options.className+"' "+o+">"),t.push("</div>"),t.join("")}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.setAction=function(){try{if(!this.useDataCollection||this.successBinding)if(this.tree.rootNode&&this.drawContents(),"none"!=this.options.toggleEvent&&this.event.addListener(this.render,this.options.toggleEvent,this.event.bindAsEventListener(this,this.handleToggleEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),l.D.isMobile()||(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent))),this.event.addListener(this.render,"onselectstart",(function(t){n.B.stopEvent(t)})),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,this.handleContextmenuEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.activateDrag)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.refreshStop=!1,this.useDataCollection)this.modelControl.getDataComp().bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck))}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.refreshItemset=function(t){try{if(this.modelControl.isItemsetBinded()&&!this.refreshStop){this.refreshStop=!0;var e=null,i=this.tree.getNodeset(),o=null,s=!1;if(this.useDataCollection){if(null!=(m=this.modelControl.getDataComp())){this.tree.isInstance=!1;var r="";if(m.options&&"string"==typeof m.options.repeatNode){var n=(r=m.options.repeatNode).lastIndexOf("/");n>=0&&(r=r.slice(n+1))}var l=0===m.filterManager.filterArr.length?m.getAllXML({repeatNode:r}):m.getAllFilteredXML({repeatNode:r}),h=WebSquare.xmljs.xml2json(l).E[0];if(o=new WebSquare.Elem(h).getChildNodes(),!this.successBinding){var d=(i=m.options.baseNode+"/"+m.options.repeatNode).replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);d&&(d=d[0]),m.options.valueAttribute&&(this.tree.valueAttribute=m.options.valueAttribute);var u=this.tree.xpath.label,c=this.tree.xpath.value,p=this.tree.xpath.depth,g=this.tree.xpath.folder;this.tree.setXPath(i,u,c,p,d,g),this.successBinding=!0,s=!0}}}else o=WebSquare.ModelUtil.findInstanceNodes(i,null,this.scope_id);null!=o&&("recursive"==this.options.dataType?e=this.tree.parseRecursiveToTree(o):"listed"==this.options.dataType&&(e=1==this.tree.isInstance?this.tree.parseListToTreeInstance(o):this.tree.parseListToTree(o))),this.tree.setXML(e);var m,f=this.selectedInfo.node;if(s)if(t&&!0===t.setNodeSet){if(this.drawContents(),this.useDataCollection)(m=this.modelControl.getDataComp()).bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck))}else this.setAction(),this.refreshStop=!0;else this.drawContents()
;if(this.useDataCollection&&null!=f)null!=(m=this.modelControl.getDataComp())&&null!=m.getRowPosition()&&this.selectNode2(f);this.refreshStop=!1}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.refreshItemArr=function(){this.refreshItemset()},p.prototype.drawContents=function(){try{this.selectedInfo={dom:null,node:null},this.initRenderStatus();for(var t=[],e=0;e<this.tree.rootNode.childNodes.length;e++)t.push(this.nodeToHTML(this.tree.rootNode.childNodes[e]));this.render.innerHTML=t.join(""),this.tree.rootNode.childNodes.length>0&&(this.resizeObj={width:this.render.offsetWidth,height:this.render.offsetHeight})}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.selectNode=function(t,e,i,o){try{i=void 0===i||i;var s=l.D.getBoolean(this.options.useHirarchySelect),r=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,h=null;if(null!=t?h=this.tree.findNodeByValue(t):null!=e&&(h=this.tree.findNodeByIndex(e)),this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor),s&&this.selectedInfoStack.length>0){for(var d=0;d<this.selectedInfoStack.length;d++){var u=this.selectedInfoStack[d];u.dom&&(this.removeClass(u.dom,this.options.labelonClickClass),u.dom.style.backgroundColor=u.org.background,u.dom.style.color=u.org.color)}this.selectedInfoStack=[]}if(null!=r&&null!=h?r.index!=h.index&&n.B.fireEvent(this,"onchange",r,h):(null==r&&null!=h||null!=r&&null==h)&&n.B.fireEvent(this,"onchange",r,h),this.selectedInfo.node=h,null!=this.selectedInfo.node&&i){for(var c=this.selectedInfo.node.parentNode,p=[];c;){e=c.index;p.push(e),c=c.parentNode}for(var d in p.reverse(),p)this.toggleChild(null,p[d],!0)}if(this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.selectedInfo.groupDom=document.getElementById(this.id+"_group_"+this.selectedInfo.node.index),this.addClass(this.selectedInfo.dom,this.options.labelonClickClass),this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color,s){for(c=this.selectedInfo.node;c;){var g=document.getElementById(this.id+"_label_"+c.index);this.selectedInfoStack.push({node:c,groupDom:document.getElementById(this.id+"_group_"+c.index),dom:g,org:{background:g?g.style.backgroundColor:null,color:g?g.style.color:null}}),this.selectedInfoStack[this.selectedInfoStack.length-1].dom&&(this.addClass(this.selectedInfoStack[this.selectedInfoStack.length-1].dom,this.options.labelonClickClass),this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.backgroundColor="",this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.color=""),c=c.parentNode}this.selectedInfoStack.reverse()}if(this.selectedInfo.dom.style.backgroundColor="",this.selectedInfo.dom.style.color="",!0!==o&&(this.options.scrollFix||(this.selectedInfo.groupDom.setAttribute("tabindex",0),this.selectedInfo.groupDom.focus(),this.selectedInfo.groupDom.setAttribute("tabindex",-1)),this.useDataCollection&&this.successBinding)){var m=this.modelControl.getDataComp();if(null!=this.selectedInfo.node){for(var f in m.refCompHash){var b=m.refCompHash[f];null!=b&&WebSquare.idCache[b.uuid]&&"input"==b.options.pluginName&&b.setValue(b.getValue())}m.setRowPosition(this.selectedInfo.node.index-1)}else m.setRowPosition(null)}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.selectNode1=function(t,e,i,o){try{if(null!=this.selectedInfo.node){var s=this.tree.getCloneNode(this.selectedInfo.node),r=s.index;if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node)if(r!=this.selectedInfo.node.index){var l={oldNode:s,newNode:this.tree.getCloneNode(this.selectedInfo.node)};n.B.fireEvent(this,"onviewchange",l)}}else if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node){l={oldNode:{},newNode:this.tree.getCloneNode(this.selectedInfo.node)}
;n.B.fireEvent(this,"onviewchange",l)}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.selectNode2=function(t){try{this.selectedInfo.node=t,this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.selectedInfo.groupDom=document.getElementById(this.id+"_group_"+this.selectedInfo.node.index),this.addClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom?(this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color,this.selectedInfo.dom.style.backgroundColor="",this.selectedInfo.dom.style.color=""):(this.originalBackgroundColor="",this.originalColor="")}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.findNode=function(t,e){try{if(void 0===e&&(e=!0),!0===e){this.selectNode(t,null);var i=WebSquare.style.getAbsoluteTop(this.selectedInfo.dom),o=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight;return o<i&&(this.render.scrollTop=i-o+parseInt(this.render.offsetHeight/2)),this.getSelectedNode()}return this.tree.findNodeByValue(t)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.findNodeByValue=function(t,e){try{var i=this.tree.findNodeByValue(t);if(!0===e&&i){this.selectNode(t,null);var o=WebSquare.style.getAbsoluteTop(this.selectedInfo.dom),s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight;return s<o&&(this.render.scrollTop=o-s+parseInt(this.render.offsetHeight/2)),this.getSelectedNode()}return i}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.findNodeByIndex=function(t,e){try{var i=this.tree.findNodeByIndex(t);if(!0===e&&i){this.selectNode(null,t);var o=WebSquare.style.getAbsoluteTop(this.selectedInfo.dom),s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight;return s<o&&(this.render.scrollTop=o-s+parseInt(this.render.offsetHeight/2)),this.getSelectedNode()}return i}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.isOpen=function(t){try{if(t>=this.tree.size()||t<1)return;var e=document.getElementById(this.id+"_node_"+t),i=!1;return e&&(i=l.D.getBoolean(e.getAttribute("opened"))),i}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getSelectedNode=function(){try{return this.selectedInfo?this.selectedInfo.node:null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getSelectedDom=function(){try{return this.selectedInfo?this.selectedInfo.dom:null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getSelectedLabel=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.label:""}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getSelectedValue=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.value:""}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getSelectedIndex=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.index:""}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getSelectedElement=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.element:null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.isLeaf=function(){try{return!this.selectedInfo||!this.selectedInfo.node||!this.selectedInfo.node.hasChild()}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.setLabelStyle=function(t,e,i,s){var r;"object"===(0,o.Z)(t)&&"number"==typeof t.index?r=t:"number"==typeof t?r=this.tree.findNodeByIndex(t):"string"==typeof t&&(r=this.tree.findNodeByValue(t)),this._setLabelStyle(r,e,i,s)},p.prototype.setCustomFormatter=function(t){if("function"==typeof t){for(var e=this.tree.getNodeIterator();e.next();){var i=e.getNode();if(!i.isRoot()){var o=this.tree.getCloneNode(i),s=t.call(this,i.orgLabel,i.label,o)||i.label;if(i.label=s,i.rendered)document.getElementById(this.id+"_label_"+i.index).firstChild.nodeValue=i.label}}e=null,this.options.customFormatter=t,this.tree.customFormatter=t}},p.prototype._setLabelStyle=function(t,e,i,o){if(null!=t){
if(null==t.labelStyle&&(t.labelStyle={}),t.labelStyle[e]=i,this.originalBackgroundColor=t.labelStyle["background-color"]||this.originalBackgroundColor,this.originalColor=t.labelStyle.color||this.originalColor,t.rendered){var s=document.getElementById(this.id+"_label_"+t.index);if(s){for(var r="",a=0;a<e.length;a++)"-"===e.charAt(a)?(r+=e.charAt(a+1).capitalize(),a++):r+=e.charAt(a);s.style[r]=i}}if(!0===o)for(a=0;a<t.childNodes.length;a++){var n=t.childNodes[a];this._setLabelStyle(n,e,i,o)}}},p.prototype.checkNode=function(t,e,i,o,s){try{var r=this.tree.findNodeByIndex(t);if(r.checked=e,r.checkboxDom||(r.checkboxDom=document.getElementById(this.id+"_checkbox_"+t)),r.checkboxDom&&(r.checkboxDom.checked=e),1==this.options.refreshCheckboxModel){if(this.stopRefresh(!0),this.useDataCollection&&this.tree.checkbox.colID){var n=this.modelControl.getDataComp(),l=e?this.options.trueValue:this.options.falseValue;null!=n&&n.setCellData(t-1,this.tree.checkbox.colID,l,null,s),r.element.setAttribute(n.options.valueAttribute,l)}else 1==e?r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.trueValue,null,this.scope_id):r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.falseValue,null,this.scope_id);this.stopRefresh(!1)}if(!1!==i&&(1==i||1==this.options.hierarchy||1==this.options.checkAllChildNodes))for(var h=0;h<r.childNodes.length;h++){var d=r.childNodes[h];this.checkNode(d.index,e,!0,!1)}if(1==this.options.hierarchy&&this.partialSelection(r),!1!==o&&r.parentNode.parentNode&&1==this.options.hierarchy){var u=!0;for(h=0;h<r.parentNode.childNodes.length;h++){if(1!=(d=r.parentNode.childNodes[h]).checked){u=!1;break}}1==u?this.checkNode(r.parentNode.index,!0,!1):this.checkNode(r.parentNode.index,!1,!1)}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.partialSelection=function(t){try{var e=0,i=!1;if(0==t.childNodes.length)return;for(var o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];1==s.checked?e++:1==s.partial&&(i=!0)}1==i||0<e&&e<t.childNodes.length?(t.partial=!0,t.checkboxDom&&(this.addClass(t.checkboxDom,"w2treeview_partialselect"),t.checkboxDom.checked=!0)):(t.partial=!1,t.checkboxDom&&(this.removeClass(t.checkboxDom,"w2treeview_partialselect"),1==t.checked?t.checkboxDom.checked=!0:t.checkboxDom.checked=!1))}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.disableCheckboxByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);this.disableCheckbox(o,e,i)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.setLabelByIndex=function(t,e,i){this.setLabel(this.tree.findNodeByIndex(t),e,i)},p.prototype.setLabelByValue=function(t,e,i){this.setLabel(this.tree.findNodeByValue(t),e,i)},p.prototype.setLabel=function(t,e,i){try{if(t){var o=this.refreshStop;this.refreshStop=!0;var s=this.tree.valueAttribute,r=this.tree.xpath.label;if(this.modelControl.useItemset&&WebSquare.ModelUtil.setInstanceValue(t.xpath+"/"+this.tree.xpath.label,e),1==this.tree.isInstance)WebSquare.xml.setValue(t.element,"label",e);else if(s){t.element.getElementsByTagName(r)[0].setAttribute(s,e)}else{var n=t.element.getValue(r).getChildNodes();1==n.length&&n[0].setNodeValue(e)}if(this.options.customFormatter&&(this.tree.customFormatter=l.D.getGlobalFunction(this.options.customFormatter,this.scope_id)),"function"==typeof this.tree.customFormatter){var h=this.tree.getCloneNode(t);e=this.tree.customFormatter.call(this,e,e,h)}if(t.label=e,t.orgLabel=e,t.rendered)document.getElementById(this.id+"_label_"+t.index).innerHTML=e;if(this.refreshStop=o,this.useDataCollection){var d=this.modelControl.getDataComp();null!=d&&d.setCellData(t.index-1,this.tree.dataPath.label,e,null,i)}}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.setValue=function(t,e,i){try{if(t){var o=this.refreshStop;this.refreshStop=!0;var s=this.tree.valueAttribute,r=this.tree.xpath.value
;if(this.modelControl.useItemset&&WebSquare.ModelUtil.setInstanceValue(t.xpath+"/"+this.tree.xpath.value,e),1==this.tree.isInstance)WebSquare.xml.setValue(t.element,r,e),t.value=e;else{if(s){t.element.getElementsByTagName(r)[0].setAttribute(s,e)}else{var n=t.element.getValue(r).getChildNodes();1==n.length&&n[0].setNodeValue(e)}t.value=e}if(this.refreshStop=o,this.useDataCollection){var l=this.modelControl.getDataComp();null!=l&&l.setCellData(t.index-1,this.tree.dataPath.value,e,null,i)}}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.setValueByIndex=function(t,e,i){this.setValue(this.tree.findNodeByIndex(t),e,i)},p.prototype.disableCheckbox=function(t,e,i){try{if(e=l.D.getBoolean(e),t.checkboxDom||(t.checkboxDom=document.getElementById(this.id+"_checkbox_"+t.index)),t.checkboxDom&&(t.checkboxDom.disabled=e,t.checkboxDisabled=e),1==this.options.refreshCheckboxDisableModel&&(this.stopRefresh(!0),1==e?null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath,null,this.scope_id)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledTrueValue):null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath,null,this.scope_id)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledFalseValue),this.stopRefresh(!1)),!0===i||!1===i)for(var o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];this.disableCheckbox(s,e,i)}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.checkByIndex=function(t,e,i){try{var o=this.tree.findNodeByIndex(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.checkByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getParentValue=function(t){try{var e="",i=this.tree.findNodeByValue(t);return i&&i.parentNode&&(e=i.parentNode.value),e}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getChildData=function(t,e){try{for(var i=this.tree.findNodeByValue(t),o=[],s=0;s<i.childNodes.length;s++)1==this.options.dynamicAppend||this.useDataCollection?o.push(i.childNodes[s].element):o.push(WebSquare.ModelUtil.findInstanceNode(i.childNodes[s].xpath,null,this.scope_id)),1==e&&(o=o.concat(this.getChildData(i.childNodes[s].value,!0)));return o}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getXPathByValue=function(t){try{return this.tree.findNodeByValue(t).xpath}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.nodeToHTML=function(t){try{if(!t)return"";t.rendered=!0;var e,i,s=[],r=this.options.accessibility;if(this.options.customFormatter&&(this.tree.customFormatter=l.D.getGlobalFunction(this.options.customFormatter,this.scope_id)),"function"==typeof this.tree.customFormatter){var n=this.tree.getCloneNode(t),h=this.tree.customFormatter.call(this,t.orgLabel,t.label,n)||t.label;e=this.options.escape?WebSquare.xml._encode(t.label):h,i=this.options.escape?WebSquare.xml._encode(t.value):t.value}else e=this.options.escape?WebSquare.xml._encode(t.label):t.label,i=this.options.escape?WebSquare.xml._encode(t.value):t.value;r?s.push("<ol tabindex='-1' id='"+this.id+"_group_"+t.index+"' class='w2treeview_group' aria-expanded='true' index='"+t.index+"' label='"+e+"'>"):s.push("<div tabindex='-1' id='"+this.id+"_group_"+t.index+"' class='w2treeview_group' index='"+t.index+"' label='"+e+"'>"),s.push("<table id='"+this.id+"_node_"+t.index+"' treeNodeValue='"+i+"' index='"+t.index+"'");var d="";if(t.isLastChild()?d=" w2treeview_last_sibling":t.isFirstChild()&&(d=" w2treeview_first_sibling"),
t.hasChild()?t.depth>this.options.showTreeDepth||t.folder?s.push("class='w2treeview_node w2treeview_table_node w2treeview_notleaf w2treeview_close_child"+d+"'>"):s.push("class='w2treeview_node w2treeview_table_node w2treeview_notleaf w2treeview_open_child"+d+"' opened='true'>"):t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?s.push("class='w2treeview_node w2treeview_table_node w2treeview_root_single_leaf w2treeview_open_child"+d+"'>"):s.push("class='w2treeview_node w2treeview_table_node w2treeview_root_multi_leaf w2treeview_open_child"+d+"'>"):t.isLastChild()?s.push("class='w2treeview_node w2treeview_table_node w2treeview_leaf w2treeview_last_leaf w2treeview_open_child"+d+"'>"):s.push("class='w2treeview_node w2treeview_table_node w2treeview_leaf w2treeview_open_child"+d+"'>"),s.push("<tr class='w2treeview_row_parent w2treeview_row_depth"+t.depth+"'>"),1==this.options.lineShow?s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><div class='w2treeview_icon_navi'></div></td>"):t.isLeaf()?r?s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'></td>"):s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><div class='w2treeview_icon_none'></div></td>"):r?t.depth>this.options.showTreeDepth?s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><img id='"+this.id+"_toggle_"+t.index+"' src='"+this.options.folderOpenToggleImage+"' class='w2treeview_icon_navi_img' /></td>"):s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><img id='"+this.id+"_toggle_"+t.index+"' src='"+this.options.folderCloseToggleImage+"' class='w2treeview_icon_navi_img' /></td>"):s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><div class='w2treeview_icon_navi'></div></td>"),""!=t.image){var u=t.image;1==t.hasChild()&&t.depth<=this.options.showTreeDepth&&(u=t.expandedImage);var c=t.imageTitle?"title='"+t.imageTitle+"'":"";s.push("<td class='w2treeview_col_icon_label'>"),s.push("<div id='"+this.id+"_icon_"+t.index+"' class='w2treeview_icon_label'"+c+" style='background-image:url("+u+")'></div>"),s.push("</td>")}else s.push("<td class='w2treeview_none'></td>");1==this.options.showCheckbox&&(s.push("<td class='w2treeview_col w2treeview_col_icon_checkbox'>"),l.D.isIE()?s.push("<div style='left:0px;top:-1px;' class='w2treeview_partialdiv'>"):s.push("<div style='left:4px;top:-1px;' class='w2treeview_partialdiv'>"),1==t.checked?1==t.checkboxDisabled?s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' disabled='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' />"):s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' />"):1==t.checkboxDisabled?1==t.partial?s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' disabled='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox w2treeview_partialselect' />"):s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' disabled='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' /></div>"):1==t.partial?s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox w2treeview_partialselect' />"):s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' />"),s.push("          </div>"),s.push("      </td>"));var p="";if("object"===(0,o.Z)(t.labelStyle)){var g="";for(var m in t.labelStyle)g+=m+":"+t.labelStyle[m]+";";p=" style='"+g+"'"}
if(-1!=this.options.rowHeight?s.push("<td class='w2treeview_col_label' style='height:"+this.options.rowHeight+"px;'><span id='"+this.id+"_label_"+t.index+"' class='w2treeview_label "+this.options.labelclass+"'"+p+">"+e+"</span></td>"):s.push("<td class='w2treeview_col_label'><span id='"+this.id+"_label_"+t.index+"' class='w2treeview_label "+this.options.labelclass+"'"+p+">"+e+"</span></td>"),s.push("</tr>"),t.hasChild()||1==this.options.dynamicAppend){if(s.push("<tr class='w2treeview_row_child'>"),0==this.options.lineShow||t.isLastChild()?s.push("<td id='"+this.id+"_guideline_"+t.index+"' class='w2treeview_noguideline w2treeview_col_depth"+t.depth+"'></td>"):s.push("<td id='"+this.id+"_guideline_"+t.index+"' class='w2treeview_guideline w2treeview_row_depth"+t.depth+"'></td>"),1==this.options.showCheckbox?s.push("<td colspan='3'>"):s.push("<td colspan='2'>"),t.depth>this.options.showTreeDepth?s.push("<div id='"+this.id+"_child_"+t.index+"' class='w2treeview_child w2treeview_none'>"):s.push("<div id='"+this.id+"_child_"+t.index+"' class='w2treeview_child'>"),!t.folder&&(1==this.options.alwaysDraw||t.depth<=this.options.showTreeDepth))for(var f=0;f<t.childNodes.length;f++)s.push(this.nodeToHTML(t.childNodes[f]));s.push("</div>"),s.push("</td>"),s.push("</tr>")}return s.push("</table>"),r?s.push("</ol>"):s.push("</div>"),s.join("")}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.toggleChild=function(t,e,i){try{var o;if(null==e&&(e=-1),null!=t)(o=this.tree.findNodeByValue(t))&&(e=o.index);if((o=this.tree.findNodeByIndex(e))&&o.depth>0&&o.hasChild()){var s=document.getElementById(this.id+"_node_"+e),r=document.getElementById(this.id+"_child_"+e),n=document.getElementById(this.id+"_icon_"+e);if(s&&r){if(!!!(o.childNodes&&o.childNodes[0]&&o.childNodes[0].rendered)||this.options.accessibility){for(var h=[],d=0;d<o.childNodes.length;d++)h.push(this.nodeToHTML(o.childNodes[d]));r.innerHTML=h.join("")}var u=l.D.getBoolean(s.getAttribute("opened"));if(void 0!==i&&null!=i||(i=0==u),o.folder=!i,this.tree.dataPath.folder){var c=i?this.options.falseValue:this.options.trueValue,p=this.modelControl.getDataComp();p&&p.setCellData(o.index-1,this.tree.dataPath.folder,c)}if(1==i){if(1==this.options.accordion){for(var g={},m=o;m.parentNode;)g[(m=m.parentNode).index]=m.depth;for(var d in this.openedNodes)this.openedNodes[d]==o||g[this.openedNodes[d].index]||this.openedNodes[d].depth<=o.depth&&this.toggleChild(null,d,!1);this.openedNodes[e]=o}if(s.setAttribute("opened","true"),r.style.display="block",this.changeClass(s,"w2treeview_close_child","w2treeview_open_child"),n&&(n.style.backgroundImage="url("+o.expandedImage+")"),this.options.accessibility)(f=document.getElementById(this.id+"_toggle_"+e))&&(f.src=this.options.folderCloseToggleImage);"show"==this.options.animation.toLowerCase()?$("#"+r.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+r.id).hide().fadeIn("fast"):"slidedown"==this.options.animation.toLowerCase()&&$("#"+r.id).hide().slideDown("fast")}else if(0==i){var f;if(s.setAttribute("opened","false"),this.openedNodes[e]&&delete this.openedNodes[e],""!=this.options.animation?"fadein"==this.options.animation.toLowerCase()?$("#"+r.id).fadeOut("fast"):"slidedown"==this.options.animation.toLowerCase()?$("#"+r.id).slideUp("fast"):r.style.display="none":r.style.display="none",this.changeClass(s,"w2treeview_open_child","w2treeview_close_child"),n&&(n.style.backgroundImage="url("+o.image+")"),this.options.accessibility)(f=document.getElementById(this.id+"_toggle_"+e))&&(f.src=this.options.folderOpenToggleImage),WebSquare.removeChildren(r)}}}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.spanAll=function(t){try{if(1==this.options.accordion)return void $l("treeview의 accordion 모드에서는 spanAll API를 지원하지 않습니다.["+this.id+"]");if(1==t)for(var e=0;e<this.tree.size();e++)this.toggleChild(null,e,t);else if(0==t)for(e=this.tree.size()-1;e>=0;e--)this.toggleChild(null,e,t)}catch(t){a.w.printStackTrace(t,null,this)}},
p.prototype.spanNode=function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this._spanNode(arguments[0]):2===arguments.length&&"object"===(0,o.Z)(arguments[0])&&"boolean"==typeof arguments[1]?this._spanNode(arguments[0],arguments[1]):this._spanNode({index:t,applyChildNodes:i},e)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype._spanNode=function(t,e){try{if(1==this.options.accordion)return void $l("treeview의 accordion 모드에서는 spanNode API를 지원하지 않습니다.["+this.id+"]");var i=t.index,o=t.depth,s=t.applyChildNodes;if(0==i||i){var r=(d=this.findNodeByIndex(i)).childNodes;if(1==e){if(1==s)for(var n=0;n<r.length;n++)r[n].childNodes.length>0&&this.spanNode(r[n].index,e,s)}else if(0==e&&1==s)for(n=r.length-1;n>=0;n--)r[n].childNodes.length>0&&this.spanNode(r[n].index,e,s);this.toggleChild(null,i,e)}else if(0==o||o)for(var l=0,h=this.tree.nodeCount;l<h;l++){var d;if((d=this.tree.hash_index_node[l]).depth===o){if("boolean"==typeof s)for(var u=d.childNodes,c=(n=0,u.length);n<c;n++)u[n].childNodes.length>0&&this.spanNode(u[n].index,e,s);this.toggleChild(null,d.index,e)}}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null),this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2treeview_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=WebSquare.xml._encode(i)),this.tooltip.render.innerHTML=i,this.isFireTooltipEvent||(this.isFireTooltipEvent=!0,n.B.fireEvent(this,"ontooltipshow"))})),1e3*this.options.tooltipTime)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&(this.tooltip.setStyle("display","none"),n.B.fireEvent(this,"ontooltiphide"),this.isFireTooltipEvent=!1)})),1e3*this.options.tooltipTime)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.setXML=function(t){try{var e=null;if(1==this.tree.isInstance){var i=this.tree.getNodeset(),o=WebSquare.xml.findNodes(t,i);"recursive"==this.options.dataType?e=this.tree.parseRecursiveToTree(o):"listed"==this.options.dataType&&(e=this.tree.parseListToTreeInstance(o))}else{var s=WebSquare.xmljs.xml2json(t).E[0];o=new WebSquare.Elem(s).getChildNodes();"recursive"==this.options.dataType?e=this.tree.parseRecursiveToTree(o):"listed"==this.options.dataType&&(e=this.tree.parseListToTree(o))}this.tree.setXML(e),this.drawContents()}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.activateDrag=function(t){try{n.B.stopEvent(t),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll();var e=this,i=this.event.getTargetIterator(t,this.render);if(i.element.id===this.id)return;for(var o=!1,s=!1,r=!1,h=!1;i.next();)if(i.match("w2treeview_label")&&(h=!0),(i.match("w2treeview_icon_navi")||i.match("w2treeview_icon_navi_img"))&&(o=!0),i.match("w2treeview_icon_label")&&(s=!0),i.match("w2treeview_checkbox")&&(r=!0),i.match("w2treeview_node")){var d=i.getElement().getAttribute("index");if(null==d){i.stop();break}if("onmousedown"==this.options.toggleButtonEvent){var u=this.tree.findNodeByIndex(d);if(o&&!u.isLeaf()){this.toggleChild(null,d);var c=!!(u.childNodes&&u.childNodes[0]&&u.childNodes[0].rendered);this.inlineElement?n.B.fireEvent(this,"ontoggleclick",null,d,c):n.B.fireEvent(this,"ontoggleclick",u.element,d,c)}
}if((h||r||s||o)&&this.selectNode1(null,d,!1,!0),1==this.options.useDrag){var p=this.getSelectedLabel();WebSquare.dragdrop.gDragManager.activate(t,i.getElement(),{id:this.id+"_drag",className:"w2treeview_drag",contents:p,delay:15,dropClass:"w2treeview_node",dragoverClass:"w2treeview_label",applyMousePosition:!0,onDrop:function(t,i,o,s,r,a,h){if(t){var d=null,u={},c=null,p=null,g=null;for(u=i?new WebSquare.targetIterator(i,e.render):e.event.getTargetIterator(h);u.next();){if(u.match("w2treeview")){var m=u.getElement().id;l.D.getComponentById(m)&&(d=l.D.getComponentById(m)),u.stop()}if(u.match("w2grid")&&(c=u.getElement().id,u.stop()),!p&&u.match(null,null,"td")){var f=u.getElement();p=parseInt(f.getAttribute("tdIndex"),10)}}if(u=null,d&&!i&&(i=document.getElementById(d.id+"_node_0")),t&&i&&d){var b=t.getAttribute("index"),y=i.getAttribute("index"),v=e.tree.findNodeByIndex(b),w=d.tree.findNodeByIndex(y);n.B.fireEvent(d,"ondrop",v,w,e,d,h)}if(null!=c&&(g=(c=l.D.getComponentById(c)).getDataLength(),null!=p&&(g=c.rowIndex+parseInt(p/(c.oneRowDataLength+c.defaultColCnt)))),t&&c){b=parseInt(t.getAttribute("index"),10)-1;if(e.useDataCollection)var S=e.modelControl.getDataComp();v=e.tree.findNodeByIndex(b+1);n.B.fireEvent(c,"ondropfromtree",{dataListId:S.id,fromRowIndex:b,toRowIndex:g,dragNode:v})}}},onDragover:function(t,i,o,s,r,a,h){if(t)if(i){for(var d=null,u=new WebSquare.targetIterator(i,e.render);u.next();)if(u.match("w2treeview")){var c=u.getElement().id;l.D.getComponentById(c)&&(d=l.D.getComponentById(c)),u.stop()}if(u=null,d){var p=t.getAttribute("index"),g=i.getAttribute("id"),m=g.substring(g.lastIndexOf("_")+1,g.length),f=e.tree.findNodeByIndex(p),b=d.tree.findNodeByIndex(m);n.B.fireEvent(d,"ondragover",f,b,e,d,h)}}else n.B.fireEvent(e,"ondragleave",h)}})}i.stop()}i=null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.appendXmlNodes=function(t,e){try{this.appendData(t.index,e,!0)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.appendNode=function(t,e){try{if(0==this.options.dynamicAppend&&$l("treeview를 동적으로 처리하는 경우에는  dynamicAppend='true'로 설정하는 것을 권장합니다.["+this.id+"]"),1==this.options.dynamicAppend){var i=t.childNodes?t.childNodes.length+1:1;t.appendChild(this.tree.parseNodeByNode(e,t.depth+1,i,t));for(var o=0;o<t.childNodes.length;o++)this.tree.setRender(t.childNodes[o],!1);this.refreshNaviIcon(t),t.childNodes.length>0&&(t.childNodes[0].rendered=!1,this.toggleChild(null,t.index,!0))}else t.appendChild(e),this.drawContents()}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.refreshNaviIcon=function(t){try{if(!t)return;var e=t.index,i=document.getElementById(this.id+"_node_"+e),o=document.getElementById(this.id+"_col_icon_navi_"+e);t.childNodes.length>0?this.options.accessibility?o&&(o.innerHTML="<img id='"+this.id+"_toggle_"+e+"' src='"+this.options.folderOpenToggleImage+"' class='w2treeview_icon_navi_img' />"):(i&&this.removeClass(i,"w2treeview_leaf"),i&&this.removeClass(i,"w2treeview_last_leaf"),i&&this.removeClass(i,"w2treeview_root_single_leaf"),i&&this.removeClass(i,"w2treeview_root_multi_leaf"),t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?o&&this.changeClass(o,"w2treeview_first_leaf","w2treeview_icon_navi"):o&&this.changeClass(o,"w2treeview_root_multi_leaf","w2treeview_icon_navi"):t.isLastChild()?o&&this.changeClass(o,"w2treeview_last_leaf","w2treeview_icon_navi"):o&&this.changeClass(o,"w2treeview_leaf","w2treeview_icon_navi")):this.options.accessibility?o&&(o.innerHTML="<img id='"+this.id+"_toggle_"+e+"' src='"+this.options.leafToggleImage+"' class='w2treeview_icon_navi_img' />"):i&&this.changeClass(i,"w2treeview_notleaf","w2treeview_leaf")}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.removeNode=function(t){try{if(!t)return;var e=t.parentNode;if(e){var i=e.index;if(e.removeChild(t),1==this.options.dynamicAppend){var o=t.index,s=document.getElementById(this.id+"_group_"+o);s&&WebSquare.removeChildren(s),0==i?(e._hasChild=e.folder?null:0!=e.childNodes.length,
this.drawContents()):this.refreshNaviIcon(e)}else this.drawContents()}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.removeNodeList=function(t){try{for(var e=0;e<t.length;e++)if(t[e]){var i=t[e].parentNode;i&&i.removeChild(t[e])}this.drawContents()}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.initRenderStatus=function(){try{this.tree.setRender(this.tree.rootNode,!1)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getCheckedNodeByType=function(t,e){try{"object"===(0,o.Z)(t)&&null!=t||(t={});for(var i=[],s=this.tree.getNodeIterator({type:"bfs"});s.next();){var r=s.getNode();(1==r.checked||t.hierarchy&&1==r.partial&&!r.isRoot())&&(t.excludeRoot&&!r.isRoot()||!t.excludeRoot)&&i.push(r[e])}return i}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getCheckedValues=function(t){return this.getCheckedNodeByType(t,"value")},p.prototype.getCheckedLabels=function(t){return this.getCheckedNodeByType(t,"label")},p.prototype.getCheckedIndexes=function(t){return this.getCheckedNodeByType(t,"index")},p.prototype.getCheckedNodes=function(t){return this.getCheckedNodeByType(t,"element")},p.prototype.expandNode=function(t,e){try{if("number"==typeof t?this.toggleChild(null,t,!0):this.toggleChild(t,null,!0),e){var i=null;i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t);for(var o=0;o<i.childNodes.length;o++)this.expandNode(i.childNodes[o].index,e)}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.collapseNode=function(t,e){try{if(e){var i=null;i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t);for(var o=0;o<i.childNodes.length;o++)this.collapseNode(i.childNodes[o].index,e)}"number"==typeof t?this.toggleChild(null,t,!1):this.toggleChild(t,null,!1)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getAllXML=function(){try{var t=null;return"recursive"==this.options.dataType?t=this.tree.rootNode.element:"listed"==this.options.dataType&&(t=this.tree.parseTreeToList()),t}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.stopRefresh=function(t){try{this.refreshStop=l.D.getBoolean(t)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getNextNode=function(t){for(var e=t.index,i=t.depth,o=document.getElementById(this.id+"_node_"+e),s=l.D.getBoolean(o.getAttribute("opened")),r=this.tree.getNodeIterator({type:"dfs"}),a=!1;r.next();){var n=r.getNode();if(a){if(s)break;if(n.depth<=i)break}else n.index==e&&(a=!0)}return r.getNode()},p.prototype.getPreviousNode=function(t){for(var e=null,i=t.index,o=this.tree.getNodeIterator({type:"dfs"}),s={};o.next();){var r=o.getNode();if(r.index==i)return e;if(this.options.accessibility)document.getElementById(this.id+"_group_"+r.index)&&(e=r);else{var a=document.getElementById(this.id+"_node_"+r.index),n=!!a&&l.D.getBoolean(a.getAttribute("opened"));s[r.parentNode?r.parentNode.depth:0]||0==r.depth?(0==r.depth&&(n=!0),s[r.depth]=n,e=r):s[r.depth]=!1}}return e},p.prototype.handleToggleEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2treeview_label")&&(e=!0),e&&i.match("w2treeview_node")){var o=i.getElement().getAttribute("index");this.toggleChild(null,o),i.stop()}i=null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.handleDblclickEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)i.match("w2treeview_label")&&(e=!0),e&&i.match("w2treeview_node")&&(n.B.fireEvent(this,"ondblclick"),i.stop());i=null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.handleClickEvent=function(t){try{for(var e=!1,i=!1,o=!1,s=!1,l=this.event.getTargetIterator(t,this.render);l.next();)if(l.match("w2treeview_label")&&(s=!0),(l.match("w2treeview_icon_navi")||l.match("w2treeview_icon_navi_img"))&&(e=!0),l.match("w2treeview_icon_label")&&(i=!0),l.match("w2treeview_checkbox")&&(o=!0),l.match("w2treeview_node")){var h=l.getElement().getAttribute("treeNodeValue"),d=l.getElement().getAttribute("index"),u=this.tree.findNodeByIndex(d)
;if(e&&!u.isLeaf()&&"onmousedown"!=this.options.toggleButtonEvent){this.toggleChild(null,d);var c=!!(u.childNodes&&u.childNodes[0]&&u.childNodes[0].rendered);this.inlineElement?n.B.fireEvent(this,"ontoggleclick",null,d,c):n.B.fireEvent(this,"ontoggleclick",u.element,d,c)}if(o&&!u.checkboxDisabled){var p=!u.checked;this.checkNode(d,p),this.inlineElement?n.B.fireEvent(this,"oncheckboxclick",h,null,d):1==this.options.dynamicAppend||this.useDataCollection?n.B.fireEvent(this,"oncheckboxclick",h,u.element,d):n.B.fireEvent(this,"oncheckboxclick",h,WebSquare.ModelUtil.findInstanceNode(u.xpath,null,this.scope_id),d)}s&&(this.inlineElement?n.B.fireEvent(this,"onlabelclick",h,null,d):n.B.fireEvent(this,"onlabelclick",h,u.element,d)),i&&(this.inlineElement?n.B.fireEvent(this,"onImageclick",h,null,d):n.B.fireEvent(this,"onImageclick",h,u.element,d));var g=r.v.getConfiguration("/WebSquare/treeview/useClickEventToggleButton/@value");(s||o||i||e&&"false"!=g)&&(this.selectNode1(null,d,!1,this.options.noFocusOnIconLabelClick),n.B.fireEvent(this,"onclick")),l.stop()}l=null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.handleMouseoverEvent=function(t){try{n.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2treeview_label")){if(this.addClass(e.getElement(),"w2treeview_over"),this.options.tooltipDisplay||this.options.tooltipShowAlways){var i=e.getElement(),o=WebSquare.style.getAbsoluteLeft(i),s=WebSquare.style.getAbsoluteTop(i),r=i.innerHTML,h=WebSquare.style.getAbsoluteLeft(this.render),d=!1;if(this.options.tooltipDisplay)if(o+i.offsetWidth>h+this.render.clientWidth+this.render.scrollLeft)d=!0;else if(l.D.isIEAllVersion()&&!l.D.isIE(6)&&!l.D.isIE(7)){var u=i.style.display;i.style.display="block",i.clientWidth<i.scrollWidth&&(d=!0),i.style.display=u}if(d||this.options.tooltipShowAlways){var c=l.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);if("function"==typeof c){for(var p=new WebSquare.targetIterator(i,this.render),g=-1;p.next();)p.match("w2treeview_node")&&(g=p.getElement().getAttribute("index"),p.stop());p=null;try{r=c(r,g,!!d||i.offsetWidth<i.scrollWidth)}catch(t){a.w.printStackTrace(t,null,this)}}""!=r&&this.showTooltip(o,s,r)}}p=new WebSquare.targetIterator(e.getElement(),this.render),g=-1;for(var m="",f=null;p.next();)p.match("w2treeview_node")&&(g=p.getElement().getAttribute("index"),m=p.getElement().getAttribute("treeNodeValue"),f=this.tree.findNodeByIndex(g),p.stop());p=null,n.B.fireEvent(this,"onlabelover",g,f.element,m)}e=null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.handleMouseoutEvent=function(t){try{n.B.stopEvent(t),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2treeview_label")&&this.removeClass(e.getElement(),"w2treeview_over");e=null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.handleContextmenuEvent=function(t){try{n.B.stopEvent(t);for(var e=!1,i=!1,o=!1,s=!1,r=this.event.getTargetIterator(t,this.render);r.next();){if(r.match("w2treeview_label")&&(s=!0),r.match("w2treeview_icon_navi")&&(e=!0),r.match("w2treeview_icon_label")&&(i=!0),r.match("w2treeview_checkbox")&&(o=!0),r.match("w2treeview_node")){var l=r.getElement().getAttribute("index");if(e&&this.toggleChild(null,l),o){var h=document.getElementById(this.id+"_checkbox_"+l).checked;this.checkNode(l,h)}(s||o||i)&&(this.selectNode1(null,l),n.B.fireEvent(this,"onrightbuttonclick",this.findNodeByIndex(l),n.B.getMouseX(t),n.B.getMouseY(t))),r.stop()}r.match("w2treeview")&&this.tree.nodeCount<=1&&(n.B.fireEvent(this,"onrightbuttonclick",null,n.B.getMouseX(t),n.B.getMouseY(t)),r.stop())}r=null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=0,o=null;this.selectedInfo.node?(o=this.selectedInfo.groupDom,i=this.selectedInfo.node.index):i=(o=t.srcElement||t.target).getAttribute("index")
;var s=this.tree.findNodeByIndex(i);if(37===e||39===e||13===e){var r=37!==e;13===e?this.toggleChild(null,i,null):this.toggleChild(null,i,r);var l=!!(s.childNodes&&s.childNodes[0]&&s.childNodes[0].rendered);this.inlineElement?n.B.fireEvent(this,"ontoggleclick",null,i,l):n.B.fireEvent(this,"ontoggleclick",s.element,i,l),n.B.stopEvent(t)}else if(38===e){var h=null;if(0==i?(i=1,h=this.tree.findNodeByIndex(i)):o.id.indexOf("_group_")>-1&&(h=this.getPreviousNode(s)),h){var d=h.index;document.getElementById(this.id+"_group_"+d)&&this.selectNode1(null,d,!1),n.B.stopEvent(t)}}else if(40===e){h=null;if(0==i?(i=1,h=this.tree.findNodeByIndex(i)):o.id.indexOf("_group_")>-1&&(h=this.getNextNode(s)),h){d=h.index;document.getElementById(this.id+"_group_"+d)&&this.selectNode1(null,d,!1),n.B.stopEvent(t)}}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":this.options.disabled=e,e?this.addClass(this.render,"w2treeview_disabled"):this.removeClass(this.render,"w2treeview_disabled")}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.setDisabled=function(t){t=l.D.getBoolean(t);var e=d.s.prototype.setDisabled.call(this,t);return this.disableCheckbox(this.tree.rootNode,t,!0),e},p.prototype.setEditMode=function(t,e){var i=document.getElementById(this.id+"_label_"+t);if(null==this.editModeComp||null==this.editModeComp.render){if(!e){this.editModeComp=new WebSquare.uiplugin.input(this.id+"_input"),this.editModeComp.writeTo(i.parentNode),this.editModeComp.activate();var o=this.uuid;this.editModeComp.bind("onblur",(function(){var t=WebSquare.idCache[o],e=t.modelControl.getDataComp(),i=this._oldValue,s=this.getValue();e.setCellData(this._index-1,t.tree.dataPath.label,s),t.appendChild(this),this.hide();var r=document.getElementById(t.id+"_label_"+this._index);WebSquare.style.show(r),this.setValueNM(""),n.B.fireEvent(t,"oneditend",{oldValue:i,newValue:s,index:this._index})})),this.editModeComp.bind("onkeydown",(function(t){n.B.stopPropagation(t)})),this.editModeComp.bind("onmousedown",(function(t){n.B.stopPropagation(t)})),this.editModeComp.bind("onselectstart",(function(t){n.B.stopPropagation(t)}))}}else this.editModeComp.show(),i.parentNode.appendChild(this.editModeComp.render);this.editModeComp._index=t,WebSquare.style.hide(i),this.editModeComp.setVerticalAlign=function(){};var s=this.findNodeByIndex(t);s&&""!=s.label&&(this.editModeComp.setValueNM(s.label),this.editModeComp._oldValue=s.label),this.editModeComp.focus()},p.prototype.finalize=function(){d.s.removeCheckResize(this.uuid),null!=this.editModeComp&&WebSquare.idCache[this.editModeComp.uuid]&&this.editModeComp.remove()},p.prototype.notifyValidCheck=function(t){try{if(t.colID===this.tree.dataPath.depth){var e=this.findNodeByIndex(t.rowIndex+1);if(t.newValue<1)throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be greater than 0."};if(t.oldValue&&t.newValue>t.oldValue&&e.isFirstChild())throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be less than "+(t.oldValue+1)}}else if(t.colID===this.tree.dataPath.value){e=this.findNodeByIndex(t.rowIndex+1);if(this.findNodeByValue(t.newValue))throw{message:"Invalid value : [value : "+e.value+", newValue : "+t.newValue+"]. The treeValue must be unique."}}return!0}catch(t){return a.w.printStackTrace(t,null,this),!1}},p.prototype.notifyInvalid=function(){},p.prototype.notifySetCellData=function(t,e,i,o){try{if(this.refreshStop||parseInt(o,10)===parseInt(i,10))return;if(e===this.tree.dataPath.label)this.setLabelByIndex(t+1,i,!0);else if(e===this.tree.dataPath.checkbox)i==this.options.trueValue?this.checkNode(t+1,!0):i==this.options.falseValue&&this.checkNode(t+1,!1);else if(e===this.tree.dataPath.depth){if(Math.abs(i-o)>1)return void this.refreshItemset();this.stopRefresh(!0),this.notifyDepthChanged(t+1,i,o),this.stopRefresh(!1);var s=this.findNodeByIndex(t+1)
;s.parentNode===this.tree.rootNode?this.drawContents():(this.refreshNaviIcon(s),this.toggleChild(null,s.parentNode.index,!0))}else e===this.tree.dataPath.value&&this.setValueByIndex(t+1,i,!0)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.notifyDepthChanged=function(t,e,i){try{var o=this.findNodeByIndex(t),s=this.modelControl.getDataComp();if(e>i){var r=(d=o.parentNode).childNodes[o.depthIndex-2],n=o.childNodes.splice(0,o.childNodes.length);d.childNodes.splice(o.depthIndex-1,1),o.parentNode=r,r.childNodes.push(o),o.depthIndex=r.childNodes.length,r.rendered=!1,o.rendered=!1;for(var l=0;l<n.length;l++)n[l].parentNode=r,r.childNodes.push(n[l]),n[l].depthIndex=r.childNodes.length,n[l].rendered=!1;d.childNodes[0].rendered=!1}else{if(o.hasChild())for(l=o.childNodes.length-1;l>=0;l--){var h=o.childNodes[l];s.setCellData(h.index-1,this.tree.dataPath.depth,h.depth-1),this.notifyDepthChanged(h.index,h.depth-1,h.depth)}var d,u=(d=o.parentNode).parentNode;if(o.depthIndex<d.childNodes.length){var c=d.childNodes.splice(o.depthIndex,d.childNodes.length-o.depthIndex);for(l=0;l<c.length;l++)c[l].parentNode=o,o.childNodes.push(c[l]),c[l].depthIndex=o.childNodes.length,c[l].rendered=!1}d.childNodes.splice(d.childNodes.length-1,1),o.parentNode=u,u.childNodes.splice(d.depthIndex,0,o);for(l=d.depthIndex;l<u.childNodes.length;l++)u.childNodes[l].depthIndex=l+1;u.childNodes[0].rendered=!1}o.depth=e,o.element.setAttribute(s.options.valueAttribute,e)}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.notifyInsertRow=function(t){try{if(this.refreshStop)return;var e=this.modelControl.getDataComp(),i=this.findNodeByIndex(t),o=new u;o.index=t+1,o.depthIndex=1,o.depth=i.depth+1,o.rendered=!1,o.parentNode=i;for(var s=e.getRowCount();s>=t+2;s--)this.tree.changeNodeIndex(s-1,s);this.tree.hash_index_node[t+1]=o,e.setCellData(t,this.tree.dataPath.depth,i.depth+1,null,!0);var r=e.getRowJSON(t),n={T:1,N:"data",A:{index:""+t},E:[]};for(var l in r){var h={T:1,N:l,A:{},parent:n};""!=r[l]&&(h.E=[],h.E.push({T:3,text:""+r[l]})),n.E.push(h)}o.element=new WebSquare.Elem(n),i.childNodes.unshift(o);for(s=1;s<i.childNodes.length;s++)i.childNodes[s].depthIndex=s+1;this.refreshNaviIcon(i),this.toggleChild(null,t,!0),this.tree.nodeCount=e.getRowCount()+1}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.notifyBeforeSetRowData=function(t,e){try{if(this.refreshStop)return;var i=this.modelControl.getDataComp();this.beforeSetRowData=e?{depth:i.getCellData(t,this.tree.dataPath.depth),label:i.getCellData(t,this.tree.dataPath.label),checkbox:i.getCellData(t,this.tree.dataPath.checkbox),value:i.getCellData(t,this.tree.dataPath.value),overwrite:e}:{depth:Number(i.getCellData(t-1,this.tree.dataPath.depth))+1,label:"",checkbox:"",value:i.getCellData(t,this.tree.dataPath.value),overwrite:e}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.notifySetRowData=function(t){try{if(this.refreshStop)return;var e,i=(e=this.modelControl.getDataComp()).getCellData(t,this.tree.dataPath.depth),o=e.getCellData(t,this.tree.dataPath.label),s=e.getCellData(t,this.tree.dataPath.checkbox),r=e.getCellData(t,this.tree.dataPath.value);if(i!=this.beforeSetRowData.depth)if(this.notifyValidCheck({colID:this.tree.dataPath.depth,oldValue:this.beforeSetRowData.depth,newValue:i,rowIndex:t}))this.notifySetCellData(t,this.tree.dataPath.depth,i,this.beforeSetRowData.depth);else(e=this.modelControl.getDataComp()).setCellData(t,this.tree.dataPath.depth,this.beforeSetRowData.depth);if(o!=this.beforeSetRowData.label&&this.notifySetCellData(t,this.tree.dataPath.label,o,this.beforeSetRowData.label),r!=this.beforeSetRowData.value)this.notifyValidCheck({colID:this.tree.dataPath.value,oldValue:this.beforeSetRowData.value,newValue:r,rowIndex:t})&&this.notifySetCellData(t,this.tree.dataPath.value,r,this.beforeSetRowData.value);s!=this.beforeSetRowData.checkbox&&this.notifySetCellData(t,this.tree.dataPath.checkbox,s,this.beforeSetRowData.checkbox),this.beforeSetRowData={},
this.tree.nodeCount=e.getRowCount()+1}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.notifyRemoveRow=function(t){try{if(this.options.forceRefresh)return this.stopRefresh(!1),void this.refreshItemset();if(this.refreshStop)return;var e=this.findNodeByIndex(t+1),i=e.parentNode,o=document.getElementById(this.id+"_group_"+e.index);if(o&&WebSquare.removeNode(o),this.stopRefresh(!0),this.notifyRemoveRow_allChildren(t),this.stopRefresh(!1),0==i.index)i._hasChild=i.folder?null:0!=i.childNodes.length,this.drawContents();else{this.refreshNaviIcon(i);var s=this.findNodeByIndex(t);if(s&&!s.isRoot()){if(s.isLastChild()){var r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,"w2treeview_last_sibling"),this.removeClass(r,"w2treeview_first_sibling"),s.isLeaf()&&this.addClass(r,"w2treeview_last_leaf")}else if(s.isFirstChild()){r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,"w2treeview_first_sibling")}if(s.parentNode.isLastChild()){var n=document.getElementById(this.id+"_guideline_"+s.parentNode.index);this.removeClass(n,"w2treeview_guideline"),this.addClass(n,"w2treeview_noguideline")}}}var l=this.modelControl.getDataComp();this.tree.nodeCount=l?l.getRowCount()+1:this.tree.nodeCount}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.notifyRemoveRow_allChildren=function(t){try{var e=this.findNodeByIndex(t+1),i=e.parentNode,o=this.modelControl.getDataComp(),s=t,r=o.getRowCount()+1,n=1;if(e.hasChild()){s=r-1;for(var l=e;!l.isRoot()&&l.depthIndex==l.parentNode.childNodes.length;)l=l.parentNode;l.isRoot()||l.depthIndex==l.parentNode.childNodes.length||(s=l.parentNode.childNodes[l.depthIndex].index-2);for(var h=[],d=t;d<s;d++)h.push(d),this.tree.clearNode(this.tree.findNodeByIndex(d+2)),n++;o.removeRows(h)}i.childNodes.splice(e.depthIndex-1,1);for(d=e.depthIndex-1;d<i.childNodes.length;d++)i.childNodes[d].depthIndex=d+1;this.tree.clearNode(e),this.selectedInfo={dom:null,node:null};for(d=s+2;d<=r;d++)this.tree.changeNodeIndex(d,d-n);this.tree.nodeCount=o.getRowCount()+1}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.notifyDataChanged=function(t){try{this.stopRefresh(!1),this.refreshItemset()}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getDataListInfo=function(){try{if(this.modelControl.isDataCollectionItemsetBinded){var t={};return t.id=this.modelControl.dataCollectionItemsetInfo.dataComp.id,t.nodeset=this.modelControl.itemsetObj.nodeset,t.label=this.modelControl.itemsetObj.label,t.value=this.modelControl.itemsetObj.value,t}return null}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.getLastChildIndex=function(t){try{var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.tree.nodeCount-1;for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.moveNode=function(t,e,i){try{if(!this.useDataCollection)return!1;if(t==e)return!1;if(t<e&&this.getLastChildIndex(t)>=e)return h.k.printLog("treeview moveNode : Invalid argument. [destIndex] must not be child of [srcIndex].["+this.id+"]"),!1;if(1==this.options.moveSibling&&!i)return this._bAppendMoveNode(t,e);for(var o=this.modelControl.getDataComp(),s=t-1,r=e-1,n=this.findNodeByIndex(t),l=this.findNodeByIndex(e),d=this.getLastChildIndex(s+1)-1,u=[],c=this.tree.dataPath.depth,p=0,g=s;g<=d;g++){var m=o.getRowJSON(g);m[c]=i?Number(m[c])+(l.depth-n.depth+1):Number(m[c])+(l.depth-n.depth),"number"!==o.getColumnInfo(c).dataType&&(m[c]=m[c]+""),u.push(m),p++}this.stopRefresh(!0),o.removeRange(s,d),s<r&&(r+=s-d-1);var f=0;if(!i){var b=this.getLastChildIndex(e);f=b-e,e<=s&&b>=d&&(f-=p)}return o.insertJSON(r+1+f,u),this.stopRefresh(!1),this.refreshItemset(),this.selectNode(null,r+2+f),!0}catch(t){return a.w.printStackTrace(t,null,this),!1}},p.prototype._bAppendMoveNode=function(t,e){try{
for(var i=this.modelControl.getDataComp(),o=t-1,s=e-1,r=this.findNodeByIndex(t),n=this.findNodeByIndex(e),l=this.getLastChildIndex(o+1)-1,h=[],d={},u=this.tree.dataPath.depth,c=o;c<=l;c++){var p=i.getRowJSON(c);p[u]=Number(p[u])+(n.depth-r.depth),"number"!==i.getColumnInfo(u).dataType&&(p[u]=p[u]+""),h.push(p),d[c]=p}var g=0;if(o>s){var m=[];if((f=this.getLastChildIndex(e)-1)>=o)for(c=s;c<=f;c++)d[c]||m.push(i.getRowJSON(c));else{for(c=s;c<=o-1;c++)m.push(i.getRowJSON(c));g=l-o}}else{m=[];var f=this.getLastChildIndex(e)-1;for(c=l+1;c<=f;c++)m.push(i.getRowJSON(c))}this.stopRefresh(!0);var b=o<s?o:s,y=f<o?o+g:f+g;i.removeRange(b,y);var v=[];if(o>s){v=h.concat(m);var w=s+1}else{v=m.concat(h);w=t+m.length}return i.insertJSON(b,v),this.stopRefresh(!1),this.refreshItemset(),this.selectNode(null,w),!0}catch(t){return a.w.printStackTrace(t,null,this),!1}},p.prototype.setNodeSet=function(t,e){try{var i=e||{},s=t;if(t.indexOf("data:")>=0&&(s=t.replaceAll("data:","")),this.modelControl.getDataComp(s)){for(var r in this.useDataCollection=t.match("data:"),this.modelControl.unbindItemset(),this.modelControl.setItemset("data:"+s,i.label,i.value),this.modelControl.dataCollectionBindItemset(),this.modelControl.getDataCollectionItemsetData(this.modelControl.id),e)(0,o.Z)("string"===e[r]&&""!==e[r])&&(this.tree.xpath[r]=e[r]),this.tree.dataPath[r]=e[r],"checkbox"===r&&(this.tree.checkbox.colID=e[r],this.tree.checkbox.xpath=e[r]);this.successBinding=!1,this.tree.valueAttribute="",this.refreshItemset({setNodeSet:!0})}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.deselectNode=function(){try{if(this.selectedInfo&&this.selectedInfo.node){var t=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,e=l.D.getBoolean(this.options.useHirarchySelect);if(this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor),e&&this.selectedInfoStack.length>0){for(var i=0;i<this.selectedInfoStack.length;i++){var o=this.selectedInfoStack[i];o.dom&&(this.removeClass(o.dom,this.options.labelonClickClass),o.dom.style.backgroundColor=o.org.background,o.dom.style.color=o.org.color)}this.selectedInfoStack=[]}n.B.fireEvent(this,"onchange",t,null),this.selectedInfo={groupDom:null,dom:null,node:null}}}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.setShowCheckBox=function(t){try{this.options.showCheckbox!=t&&(this.options.showCheckbox=t,this.drawContents())}catch(t){a.w.printStackTrace(t,null,this)}},p.prototype.checkResize=function(){try{if(this.render){var t=this.render.offsetWidth,e=this.render.offsetHeight;if(this.resizeObj&&t>0&&e>0){var i=t-this.resizeObj.width,o=e-this.resizeObj.height;0==i&&0==o||this.refreshItemset()}this.resizeObj={width:t,height:e}}}catch(t){a.w.printStackTrace(t,null,this)}}},9461:function(t,e,i){"use strict";i.r(e),i.d(e,{treeview_virtual:function(){return p}});var o=i(484),s=i(1974),r=i(8683),a=i(9075),n=function(){this.index=0,this.depthIndex=0,this.id="",this.label="",this.orgLabel="",this.value="",this.element=null,this.depth=-1,this.parentNode=null,this.childNodes=[],this._isRoot=null,this._hasChild=null,this._isLastChild=null,this.image="",this.selectedImage="",this.expandedImage="",this.checked=!1,this.folder=null,this.expandedNodes=[],this._isExpanded=!1,this._ancestor=0};n.prototype.appendChild=function(t){if(t){var e=this;do{if(t==e)return!1;e=e.parentNode}while(e);if(t.parentNode){for(var i=0;i<t.parentNode.expandedNodes.length;i++){if(t==t.parentNode.expandedNodes[i]){t.parentNode.expandedNodes.splice(i,1);break}}t.parentNode.removeChild(t)}return t.parentNode=this,this.depth>=1&&(t._ancestor=this._ancestor),this.childNodes.push(t),!0}},n.prototype.removeChild=function(t){if(t){for(var e=[],i=0;i<this.childNodes.length;i++){var o=this.childNodes[i];o!=t&&e.push(o)}this.childNodes=e}},n.prototype.isRoot=function(){
return this._isRoot=null,this._isRoot=null==this.parentNode,this._isRoot},n.prototype.hasChild=function(){return this._hasChild=null,this.folder?this.folder:(this._hasChild=0!=this.childNodes.length,this._hasChild=0!=this.childNodes.length,this._hasChild)},n.prototype.isLeaf=function(){return!this.hasChild()},n.prototype.isFirstChild=function(){var t=!1;return this.parentNode?(this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},n.prototype.isLastChild=function(){if(this._isLastChild=null,!this.parentNode)return!0;var t=this.parentNode.childNodes;return t[t.length-1]==this&&(this._isLastChild=!0),1!=this._isLastChild&&(this._isLastChild=!1),this._isLastChild},n.prototype.hasSibling=function(){return this._isLastChild=null,!!this.parentNode&&1!=this.parentNode.childNodes.length},n.prototype.isExpanded=function(){if(this._isExpanded=!1,this.hasChild()){for(var t=0;t<this.parentNode.expandedNodes.length;t++)if(this.index==this.parentNode.expandedNodes[t].index){this._isExpanded=!0;break}return this._isExpanded}return!1},n.prototype.isFirstChildByRoot=function(){var t=!1;return this.parentNode?(0!=this.parentNode.depth||this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},(n.nodeIterator=function(t,e){this.node=t,this.status=0,this.options=s.x.extend({type:"dfs",pruning:null},s.x.extend({},e)),this.stack=[]}).prototype.next=function(){return!!this.node&&(0==this.status?(this.status=1,!0):("dfs"==this.options.type?(this.stack=this.node.childNodes.concat(this.stack),this.node=this.stack.shift()):"bfs"==this.options.type&&(this.stack=this.stack.concat(this.node.childNodes),this.node=this.stack.shift()),!!this.node))},n.nodeIterator.prototype.stop=function(){this.status=2},n.nodeIterator.prototype.getNode=function(){return this.node};var l=function(){this.nodeCount=0,this.rootNode=null,this.hash_index_node={},this.useXPath=!1,this.useCheckbox=!1,this.useImage=!1;this.xpath={nodeset:"",label:"w2:label",value:"w2:value",depth:"w2:depth",nodeName:"w2:node",checkbox:"",folder:"w2:folder"},this.dataPath={},this.imageXPath={image:"",iconImage:"",leafImage:"",selectedImage:"",expandedImage:""},this.checkbox={xpath:"",trueValue:"",falseValue:"",checkboxDisabled:"",checkboxDisabledTrueValue:"",checkboxDisabledFalseValue:"",checkboxDisabledAll:""},this.valueAttribute="",this.displayMode="0",this.delimiter="\t",this.customFormatter="",this.treeView="",this.maxDepth=-1,this.isInstance=!1};l.prototype.getNodeset=function(){if(""!=this.xpath.nodeset)return this.xpath.nodeset},l.prototype.setXPath=function(t,e,i,o,s,r,a){""!=t&&(this.useXPath=!0,this.xpath.nodeset=t,this.xpath.label=e,this.xpath.value=i,this.xpath.depth=o,this.xpath.nodeName=s,this.xpath.folder=r,this.xpath.auth=a)},l.prototype.setDataPath=function(t,e,i,o,s,r){this.dataPath.label=t,this.dataPath.value=e,this.dataPath.depth=i,this.dataPath.nodeName=o,this.dataPath.folder=s,this.dataPath.checkbox=r},l.prototype.setCheckbox=function(t,e,i,o,s,r,a,n,l,h,d){""!=t&&(this.useCheckbox=!0,this.checkbox.xpath=t,this.checkbox.trueValue=e,this.checkbox.falseValue=i,this.checkbox.checkboxDisabled=o,this.checkbox.checkboxDisabledTrueValue=s,this.checkbox.checkboxDisabledFalseValue=r,this.checkbox.checkboxDisabledAll=a,this.checkbox.refreshCheckboxModel=n,this.checkbox.refreshCheckboxDisableModel=l,this.checkbox.hierarchy=h,this.checkbox.colID=d)},l.prototype.setDisplayMode=function(t,e){this.displayMode=t,this.delimiter=e},l.prototype.setImage=function(t,e,i,o,s,r){this.useImage=!0,this.imageXPath.image=t||"",this.imageXPath.iconImage=e||"",this.imageXPath.leafImage=i||"",this.imageXPath.selectedImage=o||"",this.imageXPath.expandedImage=s||"",this.imageXPath.imageTitle=r||""},l.prototype.setXML=function(t){t&&(this.nodeCount=0,this.rootNode=null,this.hash_index_node={},1==this.isInstance?(this.rootNode=this.parseNodeInstance(t,0,0),1==this.useImage&&this.parseImageInstance(this.rootNode)):(this.rootNode=this.parseNode(t,0,0),
1==this.useImage&&this.parseImage(this.rootNode)))},l.prototype.setDataList=function(t){var e=r.D.getComponentById(t);if(e){this.rootNode=new n,this.nodeCount=0,this.hash_index_node[this.rootNode.index]=this.rootNode,this.dataType="list";for(var i=e.getAllFilteredJSON(),o=this.rootNode,s=0;s<i.length;s++){var l=i[s],h=parseInt(l[this.dataPath.depth],10)||0,d=o.depth,u=new n;u.index=++this.nodeCount,u.depth=h,u.element=l,u.orgLabel=l[this.dataPath.label],u.label=l[this.dataPath.label],u.value=l[this.dataPath.value],u.folder=l[this.dataPath.folder];var c=u.label;switch(this.displayMode){case"0":u.label=c;break;case"1":u.label=u.value+this.delimiter+c;break;case"2":u.label=c+this.delimiter+u.value;break;default:u.label=c}if(1==this.useCheckbox&&l[this.dataPath.checkbox])if(l[this.dataPath.checkbox].wq_trim()==this.checkbox.trueValue?(u.checked=!0,1==this.checkbox.refreshCheckboxModel&&e.setCellData(s,this.dataPath.checkbox,this.checkbox.trueValue)):(u.checked=!1,1==this.checkbox.refreshCheckboxModel&&e.setCellData(s,this.dataPath.checkbox,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){var p=l[this.checkbox.checkboxDisabled].wq_trim();1==this.checkbox.checkboxDisabledAll?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(s,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledTrueValue)):(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(s,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledFalseValue)),p==this.checkbox.checkboxDisabledTrueValue?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(s,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledTrueValue)):p==this.checkbox.checkboxDisabledFalseValue&&(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(s,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledFalseValue))}if("function"==typeof this.customFormatter){var g=this.customFormatter,m=this.getCloneNode(u);u.label=g.call(this.treeview,u.orgLabel,u.label,m)||u.label}if(h<=0?a.k.printLog("["+t+"] depth 값은 양의정수여야 합니다. (1 이상)"):1==h&&(u._ancestor=u.index),d<h)o.appendChild(u);else if(d==h)o.parentNode.appendChild(u);else if(d>h){o=o.parentNode;for(var f=0;f<d-h&&null!=o.parentNode;f++)o=o.parentNode;o.appendChild(u)}o=u}(function t(e,i,o){if(o){o.depthIndex=i,o.depth=e,e>this.maxDepth&&(this.maxDepth=e);for(var s=0,r=0;r<o.childNodes.length;r++)t.call(this,e+1,s++,o.childNodes[r]);this.hash_index_node[o.index]=o}}).call(this,0,0,this.rootNode),1==this.useImage&&this.parseDataListImage(this.rootNode)}},l.prototype.setData=function(t){if(t&&null!=t.data)switch(this.nodeCount=0,this.rootNode=null,this.hash_index_node={},t.type){case"dataList":this.setDataList(t.data);break;case"xmlInstance":case"inlineXML":this.setXML(t.data)}},l.prototype.appendXML=function(t,e){if(t){var i=this.findNodeByIndex(e),o=i.element,s=1;if(1==this.isInstance){for(var r=t.firstChild;null!=r;r=t.firstChild)1==r.nodeType&&r.tagName==this.xpath.nodeName&&i.appendChild(this.parseNodeInstance(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImageInstance(i)}else{for(var a=t.getChildNodes(),n=0;n<a.length;n++)1==(r=a[n]).nodeType&&r.getTagName()==this.xpath.nodeName&&i.appendChild(this.parseNode(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImage(i)}return i}},l.prototype.parseNode=function(t,e,i,o){if(!t)return null;var s=WebSquare.jsonUtil.getValue(t._element,this.xpath.label,this.valueAttribute),r=null,a=this.xpath.auth&&WebSquare.jsonUtil.getValue(t._element,this.xpath.auth,this.valueAttribute);if(this.xpath.folder)r=WebSquare.jsonUtil.getValue(t._element,this.xpath.folder,this.valueAttribute);for(var l="",h=this.xpath.value.split(" "),d=0;d<h.length;d++)0!=d&&(l+="$$"),l+=WebSquare.jsonUtil.getValue(t._element,h[d],this.valueAttribute);var u=new n;switch(u.index=this.nodeCount++,u.depthIndex=i,this.displayMode){case"0":
u.label=s;break;case"1":u.label=l+this.delimiter+s;break;case"2":u.label=s+this.delimiter+l;break;default:u.label=s}if(u.orgLabel=u.label,u.value=l,u.element=t,u.depth=e,u.folder=r,u.auth=a,o&&(u._ancestor=o._ancestor),e>this.maxDepth&&(this.maxDepth=e),1==e?(this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset,u._ancestor=u.index):e>1&&("recursive"==this.dataType?this.xpath.value?u.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+u.value+"']":u.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset),1==this.useCheckbox){var c=WebSquare.jsonUtil.getValue(t._element,this.checkbox.xpath,this.valueAttribute);if(u.checkboxXPath=u.xpath+"/"+this.checkbox.xpath,c==this.checkbox.trueValue?(u.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.trueValue)):(u.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){u.checkboxDisableXPath=u.xpath+"/"+this.checkbox.checkboxDisabled;var p=WebSquare.jsonUtil.getValue(t._element,this.checkbox.checkboxDisabled,this.valueAttribute);1==this.checkbox.checkboxDisabledAll?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),p==this.checkbox.checkboxDisabledTrueValue?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):p==this.checkbox.checkboxDisabledFalseValue&&(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}var g=0,m=t.getChildNodes();for(d=0;d<m.length;d++){var f=m[d];1==f.nodeType&&f.getTagName()==this.xpath.nodeName&&u.appendChild(this.parseNode(f,e+1,g++,u))}if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var b=0,y=!1;for(d=0;d<u.childNodes.length;d++){var v=u.childNodes[d];1==v.checked?b++:1==v.partial&&(y=!0)}1==y||0<b&&b<u.childNodes.length?u.partial=!0:b>0&&b==u.childNodes.length?(u.checked=!0,u.checkboxDom||(u.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+u.index)),u.checkboxDom&&(u.checkboxDom.checked=!0)):u.partial=!1}if(this.hash_index_node[u.index]=u,"function"==typeof this.customFormatter){var w=this.customFormatter,S=this.getCloneNode(u),C=w.call(this.treeview,u.orgLabel,u.label,S)||u.label;u.label=C}return u},l.prototype.parseNodeInstance=function(t,e,i,o){if(!t)return null;var s=WebSquare.xml.getValue(t,this.xpath.label).wq_trim(),a=null,l=this.xpath.auth&&WebSquare.xml.getValue(t,this.xpath.auth).wq_trim();this.xpath.folder&&(a=r.D.getBoolean(WebSquare.xml.getValue(t,this.xpath.folder).wq_trim()));for(var h="",d=this.xpath.value.split(" "),u=0;u<d.length;u++)0!=u&&(h+="$$"),h+=WebSquare.xml.getValue(t,d[u]).wq_trim();var c=new n;switch(c.index=this.nodeCount++,c.depthIndex=i,this.displayMode){case"0":c.label=s;break;case"1":c.label=h+this.delimiter+s;break;case"2":c.label=s+this.delimiter+h;break;default:c.label=s}if(c.orgLabel=c.label,c.value=h,c.element=t,c.depth=e,c.folder=a,c.auth=l,o&&(c._ancestor=o._ancestor),e>this.maxDepth&&(this.maxDepth=e),1==e?(this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset,
c._ancestor=c.index):e>1&&("recursive"==this.dataType?this.xpath.value?c.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+c.value+"']":c.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset),1==this.useCheckbox){var p=WebSquare.xml.getValue(t,this.checkbox.xpath).wq_trim();if(c.checkboxXPath=c.xpath+"/"+this.checkbox.xpath,p==this.checkbox.trueValue?(c.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.trueValue)):(c.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){c.checkboxDisableXPath=c.xpath+"/"+this.checkbox.checkboxDisabled;var g=WebSquare.xml.getValue(t,this.checkbox.checkboxDisabled).wq_trim();1==this.checkbox.checkboxDisabledAll?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),g==this.checkbox.checkboxDisabledTrueValue?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):g==this.checkbox.checkboxDisabledFalseValue&&(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}for(var m=0,f=t.firstChild;null!=f;f=f.nextSibling)1==f.nodeType&&f.tagName==this.xpath.nodeName&&c.appendChild(this.parseNodeInstance(f,e+1,m++,c));if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var b=0,y=!1;for(u=0;u<c.childNodes.length;u++){var v=c.childNodes[u];1==v.checked?b++:1==v.partial&&(y=!0)}1==y||0<b&&b<c.childNodes.length?c.partial=!0:b>0&&b==c.childNodes.length?(c.checked=!0,c.checkboxDom||(c.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+c.index)),c.checkboxDom&&(c.checkboxDom.checked=!0)):c.partial=!1}if(this.hash_index_node[c.index]=c,"function"==typeof this.customFormatter){var w=this.customFormatter,S=this.getCloneNode(c),C=w.call(this.treeview,c.orgLabel,c.label,S)||c.label;c.label=C}return c},l.prototype.parseNodeByNode=function(t,e,i,o){if(!t)return null;var s=new n;s.index=t.index,s.depthIndex=i,s.parentNode=o,s.label=t.label,s.orgLabel=s.label,s.value=t.value,s.element=t.element.cloneNode(!0),s.depth=e,s.folder=t.folder,s.xpath="",s.checkboxXPath="",s.selectedImage=t.selectedImage,s.expandedImage=t.expandedImage,s.image=t.image,s.imageTitle=t.imageTitle,s.labelStyle=t.labelStyle,s.expandedNodes=t.expandedNodes.splice(0),void 0!==t.checked&&(s.checked=t.checked),s.checkboxDisableXPath="",void 0!==t.checkboxDisabled&&(s.checkboxDisabled=t.checkboxDisabled);for(var r=0,a=0;a<t.childNodes.length;a++)s.appendChild(this.parseNodeByNode(t.childNodes[a],e+1,r++,s,o));return this.hash_index_node[s.index]=s,s},l.prototype.parseImage=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.image,this.valueAttribute)),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.iconImage,this.valueAttribute)),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.selectedImage,this.valueAttribute)),
""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.expandedImage,this.valueAttribute)),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.leafImage,this.valueAttribute)),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),t.image=e,t.selectedImage=o,t.expandedImage=s,t.imageTitle=this.imageXPath.imageTitle&&WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.imageTitle,this.valueAttribute);for(var n=0;n<t.childNodes.length;n++)this.parseImage(t.childNodes[n])},l.prototype.parseImageInstance=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.xml.getValue(t.element,this.imageXPath.image).wq_trim()||""),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.xml.getValue(t.element,this.imageXPath.iconImage).wq_trim()||""),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.xml.getValue(t.element,this.imageXPath.selectedImage).wq_trim()||""),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.xml.getValue(t.element,this.imageXPath.expandedImage).wq_trim()||""),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.xml.getValue(t.element,this.imageXPath.leafImage).wq_trim()||""),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),t.image=e,t.selectedImage=o,t.expandedImage=s,t.imageTitle=this.imageXPath.imageTitle&&WebSquare.xml.getValue(t.element,this.imageXPath.imageTitle);for(var n=0;n<t.childNodes.length;n++)this.parseImageInstance(t.childNodes[n])},l.prototype.parseDataListImage=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:t.element?t.element[this.imageXPath.image].wq_trim():""),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:t.element?t.element[this.imageXPath.iconImage].wq_trim():""),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:t.element?t.element[this.imageXPath.selectedImage].wq_trim():""),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:t.element?t.element[this.imageXPath.expandedImage].wq_trim():""),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:t.element?t.element[this.imageXPath.leafImage].wq_trim():""),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),t.image=e,t.selectedImage=o,t.expandedImage=s,t.imageTitle=this.imageXPath.imageTitle&&WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.imageTitle,this.valueAttribute);for(var n=0;n<t.childNodes.length;n++)this.parseDataListImage(t.childNodes[n])},l.prototype.parseListToTree=function(t){for(var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=WebSquare.xmljs.xml2json(e).E[0],o=0;o<t.length;o++)t[o]._element.parent=i;var s=i,r=0;this.dataType="list";for(o=0;o<t.length;o++){s=new WebSquare.Elem(s);var a=t[o],n=parseInt(WebSquare.jsonUtil.getValue(a._element,this.xpath.depth,this.valueAttribute))||0;r=parseInt(WebSquare.jsonUtil.getValue(s._element,this.xpath.depth,this.valueAttribute))||0;if(0===n&&0!==r&&(a.setNodeValue(this.xpath.depth,r),n=r),r<n)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n&&0==o)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n){a._element.parent=s.getParentNode()._element,
a=s.getParentNode().appendChild(a._element)}else if(r>n){s=s.getParentNode();for(var l=0;l<r-n;l++)null!=s._element.parent&&(s=s.getParentNode());s.element&&(s=s._element),a._element.parent=s._element,a=s.appendChild(a._element)}s=a}return new WebSquare.Elem(i)},l.prototype.parseListToTreeInstance=function(t){var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=e.documentElement,o=0;this.dataType="list";for(var s=0;s<t.length;s++){var r=t[s].cloneNode(!0),a=parseInt(WebSquare.xml.getValue(r,this.xpath.depth))||0;o=parseInt(WebSquare.xml.getValue(i,this.xpath.depth))||0;if(0===a&&0!==o&&(WebSquare.xml.setValue(r,this.xpath.depth,o),a=o),o<a)r=WebSquare.xml.appendChild(i,r),o=a;else if(o==a&&0==s)r=WebSquare.xml.appendChild(i,r);else if(o==a){var n=i.parentNode;r=WebSquare.xml.appendChild(n,r)}else if(o>a){i=i.parentNode;for(var l=0;l<o-a;l++)null!=i.parentNode&&(i=i.parentNode);i.documentElement&&(i=i.documentElement),r=WebSquare.xml.appendChild(i,r)}i=r}return e.documentElement},l.prototype.parseRecursiveToTree=function(t){this.dataType="recursive";var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0);if(t[0]instanceof WebSquare.Elem){for(var i=new WebSquare.Elem(WebSquare.xmljs.xml2json(e).E[0]),o=0;o<t.length;o++){var s=null;s=t[o],i.appendChild(s._element)}return i}for(o=0;o<t.length;o++){s=null;s=r.D.isOpera()?WebSquare.xml.parse(t[o]).firstChild:t[o].cloneNode(!0),WebSquare.xml.appendChild(e.documentElement,s)}return e.documentElement},l.prototype.parseTreeToList=function(){var t=this.xpath.nodeset;if(t.indexOf("/")>-1){var e=t.split("/");t=e[e.length-2]}t&&""!=t||(t="Treeview");var i=WebSquare.xml.parse("<"+t+' xmlns:w2="http://www.inswave.com/websquare" />',!0),o=i.documentElement,s=this.getNodeIterator({type:"dfs"});for(s.next();s.next();){var r=s.getNode();o.appendChild(r.element)}return i.documentElement},l.prototype.getNodeIterator=function(t){return t=s.x.extend({rootNode:null},t||{}),new n.nodeIterator(t.rootNode||this.rootNode,t)},l.prototype.size=function(){return this.nodeCount},l.prototype.findNodeByValue=function(t){for(var e=null,i=this.getNodeIterator(),o=0;i.next();){var s=i.getNode();if(!s.parentNode||1!=s.depth&&!0!==s.parentNode._isExpanded||o++,s.value==t){e=s;break}}return e&&(e._nodePosition=o),i=null,e},l.prototype.findNodeByIndex=function(t){var e=this.hash_index_node[t];return e||null},l.prototype.IterateFindNodeByIndex=function(t){for(var e=null,i=this.getNodeIterator(),o=0;i.next();){var s=i.getNode();if(!s.parentNode||1!=s.depth&&!0!==s.parentNode._isExpanded||o++,s.index==t){e=s;break}}return e&&(e._nodePosition=o),i=null,e},l.prototype.setRender=function(t,e){t.rendered=e;for(var i=0;i<t.childNodes.length;i++)this.setRender(t.childNodes[i],e)},l.prototype.getCloneNode=function(t){var e={};return e.checkboxDisabled=t.checkboxDisabled,e.checked=t.checked,e.folder=t.folder,e.image=t.image,e.imageTitle=t.imageTitle,e.rendered=t.rendered,e.id=t.id,e.index=t.index,e.value=t.value,e.label=t.label,e.labelStyle=t.labelStyle,e},l.prototype.clearNode=function(t){t.element=null,t.parentNode=null,t.childNodes=[],delete this.hash_index_node[t.index]},l.prototype.changeNodeIndex=function(t,e){var i=this.hash_index_node[t];i.index=e,delete this.hash_index_node[t],this.hash_index_node[e]=i,this.changeDomIndex("node",t,e,!0),this.changeDomIndex("checkbox",t,e),this.changeDomIndex("label",t,e),i.checkboxDom&&(i.checkboxDom=null,delete i.checkboxDom)},l.prototype.changeDomIndex=function(t,e,i,o){var s=document.getElementById(this.treeview.id+"_"+t+"_"+e);null!=s&&(s.setAttribute("id",this.treeview.id+"_"+t+"_"+i),o&&s.setAttribute("index",i))},l.prototype.getLastChildIndex=function(t){var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.size();for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}
return i};var h=i(5052),d=i(5948),u=i(1454),c=i(1),p=function(t,e,i){c.s.call(this,t,e,i)};s.x.extend(p.prototype,c.s.prototype),p.prototype.defaultOptions={pluginType:"uiplugin.treeview",pluginName:"treeview",renderType:"virtual",userEvents:["onclick","ondblclick","onchange","onrightbuttonclick","ondrop","oncheckboxclick","onlabelclick","ontoggleclick","onviewchange","oneditend"],toggleEvent:"ondblclick",useConfig:!0,hierarchy:!1,refreshCheckboxModel:!1,refreshCheckboxDisableModel:!1,displayMode:"0",delimiter:"\t",folderOpenToggleImage:s.x._resourceURI+"uiplugin/treeview/images/plus.png",folderCloseToggleImage:s.x._resourceURI+"uiplugin/treeview/images/minus.png",leafToggleImage:s.x._resourceURI+"uiplugin/treeview/images/middle.gif",lastToggleImage:s.x._resourceURI+"uiplugin/treeview/images/last.gif",middleToggleImage:s.x._resourceURI+"uiplugin/treeview/images/middle.gif",labelclass:"",labelonClickClass:"treeview_select_node",labelForCheckbox:!1,title:"",escape:!0,rowHeight:20,useDrag:!1,accordion:!1,dynamicAppend:!1,dataType:"recursive",lineShow:!0,alwaysDraw:!1,showTreeDepth:0,showCheckbox:!1,trueValue:"true",falseValue:"false",checkAllChildNodes:!1,checkboxDisabled:"",checkboxDisabledTrueValue:"true",checkboxDisabledFalseValue:"false",checkboxDisabledAll:!1,scrollFix:!1,tooltipDisplay:!1,tooltipShowAlways:!1,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,redrawInterval:3,useHirarchySelect:!1},p.prototype.initialize=function(t){try{switch(this.inlineElement=!1,this.useDataCollection=!1,this.successBinding=!1,this.nativeScrollWidth=18,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.tree=new l,this.tree.treeview=this,this.selectedInfo={groupDom:null,dom:null,node:null},this.options.customFormatter&&(this.tree.customFormatter=r.D.getGlobalFunction(this.options.customFormatter,this.scope_id)),this.resizeObj={width:0,height:0},this.tree.setData(this._getDataObj(t)),this._request=null,this._expandedNodes=[this.tree.rootNode],this._items=[],1==this.options.accordion&&(this.options.showTreeDepth=0),this._setExpandedLevel(),this._arrowDownPressed=!1,this._arrowUpPressed=!1,this._forceRedraw=!1,this.isMobile=r.D.isMobile(),this.touchDelta={x:0,y:0},this.options.checkAllChildNodes=this.options.hierarchy,this.options.displayMode){case"0":case"1":case"2":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;default:this.options.displayMode="0"}this.tree.setDisplayMode(this.options.displayMode,this.options.delimiter),this.editModeComp=null,this.options=WebSquare.cssManager.styleToClass(this.id,this.options),1==this.options.showCheckbox&&(1==r.D.isOpera()?this.checkboxStyle="left:-1px;top:-1px":this.checkboxStyle="left:0px;top:0px"),this.options.useHirarchySelect&&(this.selectedInfoStack=[]),this.options.tooltipFormatter&&(this.tooltipFormatter=r.D.getGlobalFunction(this.options.tooltipFormatter,this.scope_id))}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.finalize=function(){null!=this.editModeComp&&WebSquare.idCache[this.editModeComp.uuid]&&this.editModeComp.remove(),this._request=null;for(var t=0,e=this._items.length;t<e;t++)this._items[t]=null;this._items=null;for(t=0,e=this.dom.length;t<e;t++)this.dom[t]=null;for(var i in this.dom=null,this.selectedInfo)this.selectedInfo.hasOwnProperty(i)&&(this.selectedInfo[i]=null);this.selectedInfo=null;for(t=0,e=this.tree.size();t<e;t++)this.tree.hash_index_node[t]=null;for(var i in this.tree)this.tree.hasOwnProperty(i)&&(this.tree[i]=null);this.tree=null,c.s.removeCheckResize(this.uuid),c.s.prototype.finalize.call(this)},p.prototype._getData=function(t,e,i){try{for(var o=[],s=0,r=t.length;s<r;s++){var a=[];a=this.tree.hash_index_node[t[s].parent].childNodes.slice(0),o.push({parent:t[s].parent,items:a.splice(t[s].offset,t[s].limit)})}this._setData(e,i,o)}catch(t){d.w.printStackTrace(t,null,this)}},
p.prototype._setData=function(t,e,i){for(var o=[],s=0,r=i.length;s<r;s++){for(var a=i[s],n=-1,l=0,h=o.length;l<h;l++)if(o[l].index===a.parent){n=l;break}o=n>-1?o.slice(0,n+1).concat(a.items).concat(o.slice(n+1)):a.items.concat(o)}this._items=o,this._redraw(o,t,e)},p.prototype._expandNode=function(t){t.expandedNodes||(t.expandedNodes=[]);var e=t.parentNode;e&&!t.isExpanded()&&(e.expandedNodes.push(t),e._isExpanded=!0)},p.prototype._collapseNode=function(t){var e=t.parentNode;if(e&&t.isExpanded()){for(var i=-1,o=0,s=e.expandedNodes.length;o<s;o++){var r=e.expandedNodes[o];if(t.index===r.index){i=o;break}}e.expandedNodes.splice(i,1),e._isExpanded=!1}},p.prototype.redraw=function(t,e){var i=this.render.clientHeight||parseInt(this.render.style.height,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"height"),10),o=Math.floor(i/this.options.rowHeight),s=Math.ceil(this.getElementById(this.id+"_scrollY_div").scrollTop/this.options.rowHeight);this._request=this._buildTree(s,o),this._getData(this._request,t,e),this._items.length>0&&(this.resizeObj={width:this.render.offsetWidth,height:this.render.offsetHeight})},p.prototype._buildTree=function(t,e){var i=[];this._sortAllExpandedNodes(this._expandedNodes),this._calculateExpandedNodes(this._expandedNodes,-1);return function o(s,r){for(var a=0,n=s.length;a<n;a++){var l=s[a];if(g=t,m=t+e,f=l._start,b=l._end,f<g&&b<g||f>m&&b>m)t>l._end&&r&&(r.offset-=l._end-l._start+1);else{var h=Math.max(t,l._start),d=Math.min(t+e-1,l._end),u=Math.max(0,Math.min(d-h+1,e));if(r&&(r.limit-=u,t>l._start)){var c=l._end-l._start+1-u;c>0&&(r.offset-=c)}var p={parent:l.index,offset:t>l._start?t-l._start:0,limit:Math.min(u,e)};i.push(p),o(l.expandedNodes,p)}}var g,m,f,b}(this._expandedNodes),i},p.prototype._iterateAllExpandedNodes=function(t,e){try{for(var i=0,o=t.length;i<o;i++)e(t[i]),this._iterateAllExpandedNodes(t[i].expandedNodes,e)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype._findExpandedNodeByIndex=function(t){var e=null;return this._iterateAllExpandedNodes(this._expandedNodes,(function(i){i.index===t&&(e=i)})),e},p.prototype._sortAllExpandedNodes=function(t){try{t.sort((function(t,e){return t.depthIndex-e.depthIndex}));for(var e=0;e<t.length;e++)this._sortAllExpandedNodes(t[e].expandedNodes)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype._calculateExpandedNodes=function(t,e){try{for(var i=0;i<t.length;i++){var o,s=t[i],r=t[i-1];o=r?r._end+1+(s.depthIndex-r.depthIndex):e+s.depthIndex+1,s._start=o;var a=s.childNodes.length;this._iterateAllExpandedNodes(s.expandedNodes,(function(t){a+=t.childNodes.length})),s._end=s._start+a-1,this._calculateExpandedNodes(s.expandedNodes,s._start)}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype._setExpandedLevel=function(){try{var t=0,e=null;if(1==this.options.alwaysDraw)for(t=0;t<this.tree.size();t++)e=this.tree.hash_index_node[t],this._expandNode(e);else for(t=0;t<this.tree.size();t++)(e=this.tree.hash_index_node[t]).depth<this.options.showTreeDepth&&this._expandNode(e)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.toHTML=function(){try{var t=[],e=this.nativeScrollWidth+"px",i=""==this.options.style?"":"style='"+this.options.style+"'",o="style='right:"+e+";'",s="style='right:"+e+"; height:"+e+";'",r="style='width:"+e+";'";return t.push("<div id='"+this.id+"' tabindex='0'"+i+" class='w2treeview_virtual "+this.options.className+"'>"),t.push("  <div id='"+this.id+"_main_div' "+o+" class='w2treeview_virtual_main_div' >"),t.push("  </div>"),t.push("  <div id='"+this.id+"_scrollX_div' "+s+" class='w2treeview_virtual_scrollX_div'>"),t.push("      <div id='"+this.id+"_scrollX_scrollbar' style='width:1px; height:1px; visibility:hidden;'></div>"),t.push("  </div>"),t.push("  <div id='"+this.id+"_scrollY_div' "+r+" class='w2treeview_virtual_scrollY_div' >"),t.push("      <div id='"+this.id+"_scrollY_scrollbar' style='width:1px; height:1px; visibility:hidden;'></div>"),t.push("  </div>"),t.push("</div>"),t.join("")}catch(t){
d.w.printStackTrace(t,null,this)}},p.prototype.setAction=function(){try{if(this.dom[this.id+"_main_div"]=document.getElementById(this.id+"_main_div"),this.dom[this.id+"_scrollX_div"]=document.getElementById(this.id+"_scrollX_div"),this.dom[this.id+"_scrollX_scrollbar"]=document.getElementById(this.id+"_scrollX_scrollbar"),this.dom[this.id+"_scrollY_div"]=document.getElementById(this.id+"_scrollY_div"),this.dom[this.id+"_scrollY_scrollbar"]=document.getElementById(this.id+"_scrollY_scrollbar"),this.tree.rootNode?this.redraw(!0):this._updateScroll(),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.isMobile||(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener2(this.dom[this.id+"_main_div"],"onmousewheel",this.handleMouseWheelEvent,this)),this.event.addListener(this.render,"onselectstart",(function(t){u.B.stopEvent(t)})),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,this.handleContextmenuEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.activateDrag)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener2(this.dom[this.id+"_scrollX_div"],"onscroll",this.handleScrollXEvent,this),this.event.addListener2(this.dom[this.id+"_scrollY_div"],"onscroll",this.handleScrollYEvent,this),this.refreshStop=!1,this.useDataCollection)this.modelControl.getDataComp().bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck));c.s.addCheckResize(this.uuid,"checkResize")}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype._redraw=function(t,e,i){try{for(var o=[],s=0,r=t.length;s<r;s++)o.push(this.nodeToHTML(t[s]));if(document.getElementById(this.id+"_main_div").innerHTML=o.join(""),1==e){var a=0;this._forceRedraw=!0,this._iterateAllExpandedNodes(this._expandedNodes,(function(t){a+=t.childNodes.length})),this._updateScroll(a)}i&&i.call(this)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype._getNativeScrollWidth=function(){var t=document.createElement("div");t.style="overflow-y:scroll; visibility:hidden; width:100px;",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var i=100-e.offsetWidth;return document.body.removeChild(t),i},p.prototype._updateScroll=function(t){var e=this.getElementById(this.id+"_main_div"),i=this.getElementById(this.id+"_scrollY_div"),o=this.getElementById(this.id+"_scrollX_div"),s=this.getElementById(this.id+"_scrollY_scrollbar"),r=this.getElementById(this.id+"_scrollX_scrollbar"),a=e.clientWidth,n=e.scrollWidth,l=t>=Math.floor(e.offsetHeight/this.options.rowHeight),h=a<n;i.style.visibility=l?"visible":"hidden",e.style.right=l?this.nativeScrollWidth+"px":0,o.style.visibility=h?"visible":"hidden",o.style.right=l?this.nativeScrollWidth+"px":0;var d=h?t*this.options.rowHeight+this.nativeScrollWidth:t*this.options.rowHeight,u=l?n+this.nativeScrollWidth:n;s.style.height=d+"px",r.style.width=u+"px"},p.prototype.expandNode=function(t,e){try{var i=null;if(i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t),this._expandNode(i),e)for(var o=0,s=i.childNodes.length;o<s;o++)this.expandNode(i.childNodes[o].index,e);this.redraw(!0)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.collapseNode=function(t,e){try{var i=null;if(i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t),this._collapseNode(i),e)for(var o=0,s=i.childNodes.length;o<s;o++)this.collapseNode(i.childNodes[o].index,e);this.redraw(!0)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.findNodeByValue=function(t,e){try{
var i=this.tree.findNodeByValue(t);if(!0===e&&i){var o=i._nodePosition*this.options.rowHeight,s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,r=this.dom[this.id+"_scrollY_div"].scrollTop;return s<o?(r+s<o||r>=o)&&(this.dom[this.id+"_scrollY_div"].scrollTop=o-s+parseInt(this.render.offsetHeight/2)):(r+s<o||r>=o)&&(this.dom[this.id+"_scrollY_div"].scrollTop=0),this.selectNode(t,null),this.getSelectedNode()}return i}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.findNodeByIndex=function(t,e){try{if(!0===e){if(!this.tree.findNodeByIndex(t))return;var i=this.tree.IterateFindNodeByIndex(t)._nodePosition*this.options.rowHeight,o=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,s=this.dom[this.id+"_scrollY_div"].scrollTop;return o<i?(s+o<i||s>=i)&&(this.dom[this.id+"_scrollY_div"].scrollTop=i-o+parseInt(this.render.offsetHeight/2)):(s+o<i||s>=i)&&(this.dom[this.id+"_scrollY_div"].scrollTop=0),this.selectNode(null,t),this.getSelectedNode()}return this.tree.findNodeByIndex(t)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.toggleChild=function(t,e,i){try{var o;if(null==e&&(e=-1),null!=t&&(o=this.tree.findNodeByValue(t))&&(e=o.index),o=this.tree.findNodeByIndex(e),1==this.options.accordion)for(var s=o._ancestor,r=1,a=this.tree.size();r<a;r++)this.tree.hash_index_node[r]._ancestor!=s&&this._collapseNode(this.tree.hash_index_node[r]);switch(i){case!0:this._expandNode(o);break;case!1:this._collapseNode(o);break;default:o.isExpanded()?this._collapseNode(o):this._expandNode(o)}this.redraw(!0)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.appendData=function(t,e,i){try{if(0==this.options.dynamicAppend&&$l("treeview를 동적으로 처리하는 경우에는  dynamicAppend='true'로 설정하는 것을 권장합니다.["+this.id+"]"),void 0===t||null==t||!e)return;i=void 0!==i&&i;var o=this.tree.findNodeByIndex(t);if(!i&&o.childNodes&&o.childNodes[0]&&o.childNodes[0].rendered)return;var s=null;"recursive"==this.options.dataType?s=this.tree.parseRecursiveToTree(e):"listed"==this.options.dataType&&(s=this.tree.parseListToTree(e)),this.tree.appendXML(s,t),0==t?(o.hasChild(),this.redraw()):o.childNodes.length>0&&(o.childNodes[0].rendered=!1,this.toggleChild(null,o.index,!0))}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.spanAll=function(t){try{if(1==this.options.accordion)return void $l("treeview의 accordion 모드에서는 spanAll API를 지원하지 않습니다.["+this.id+"]");var e=this.tree.size();if(1==t)for(var i=0;i<e;i++)this._expandNode(this.tree.hash_index_node[i]);else if(0==t)for(i=e-1;i>=0;i--)this.tree.hash_index_node[i].expandedNodes=[];this.redraw(!0)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.spanNode=function(t,e,i){try{return null==t&&null==e&&null==i?void 0:null==e&&null==i&&"object"===(0,o.Z)(t)?this._spanNode(t):null==i&&"object"===(0,o.Z)(t)&&"boolean"==typeof e?this._spanNode(t,e):this._spanNode({index:t,applyChildNodes:i},e)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype._spanNode=function(t,e){try{if(1==this.options.accordion)return void $l("treeview의 accordion 모드에서는 spanNode API를 지원하지 않습니다.["+this.id+"]");var i=t.index,o=t.depth,s=t.applyChildNodes;if(0==i||i){var r=(h=this.findNodeByIndex(i)).childNodes;if(1==e){if(1==s)for(var a=0;a<r.length;a++)r[a].childNodes.length>0&&this.spanNode(r[a].index,e,s)}else if(0==e&&1==s)for(a=r.length-1;a>=0;a--)r[a].childNodes.length>0&&this.spanNode(r[a].index,e,s);this.toggleChild(null,i,e)}else if(0==o||o)for(var n=0,l=this.tree.nodeCount;n<l;n++){var h;if((h=this.tree.hash_index_node[n]).depth===o){if("boolean"==typeof s)for(var u=h.childNodes,c=(a=0,u.length);a<c;a++)u[a].childNodes.length>0&&this.spanNode(u[a].index,e,s);this.toggleChild(null,h.index,e)}}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.selectNode=function(t,e,i,o){try{i=void 0===i||i;var s=r.D.getBoolean(this.options.useHirarchySelect),a=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,n=null
;if(null!=t?n=this.tree.findNodeByValue(t):null!=e&&(n=this.tree.findNodeByIndex(e)),this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor,""!=this.selectedInfo.node.image)){var l=this.selectedInfo.node,h=document.getElementById(this.id+"_icon_"+l.index),c=l.isExpanded()?l.expandedImage:l.image;h&&(h.style="background-image:url("+c+")")}if(s&&this.selectedInfoStack.length>0){for(var p=0;p<this.selectedInfoStack.length;p++){var g=this.selectedInfoStack[p];g.dom&&(this.removeClass(g.dom,this.options.labelonClickClass),g.dom.style.backgroundColor=g.org.background,g.dom.style.color=g.org.color)}this.selectedInfoStack=[]}if(null!=a&&null!=n?a.index!=n.index&&u.B.fireEvent(this,"onchange",a,n):(null==a&&null!=n||null!=a&&null==n)&&u.B.fireEvent(this,"onchange",a,n),this.selectedInfo.node=n,null!=this.selectedInfo.node&&i){for(var m=this.selectedInfo.node.parentNode,f=[];m;){e=m.index;f.push(e),m=m.parentNode}for(var p in f.reverse(),f)this._expandNode(this.findNodeByIndex(f[p]));this.redraw(!0)}if(this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.selectedInfo.groupDom=document.getElementById(this.id+"_node_"+this.selectedInfo.node.index),this.addClass(this.selectedInfo.dom,this.options.labelonClickClass),""!=this.selectedInfo.node.image&&""!=this.selectedInfo.node.selectedImage){h=document.getElementById(this.id+"_icon_"+this.selectedInfo.node.index);this.originalIconImage=h.style,h.style="background-image:url("+this.selectedInfo.node.selectedImage+")"}if(this.selectedInfo.dom){if(this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color,s){for(m=this.selectedInfo.node;m;){var b=document.getElementById(this.id+"_label_"+m.index);this.selectedInfoStack.push({node:m,groupDom:document.getElementById(this.id+"_node_"+m.index),dom:b,org:{background:b?b.style.backgroundColor:null,color:b?b.style.color:null}}),this.selectedInfoStack[this.selectedInfoStack.length-1].dom&&(this.addClass(this.selectedInfoStack[this.selectedInfoStack.length-1].dom,this.options.labelonClickClass),this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.backgroundColor="",this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.color=""),m=m.parentNode}this.selectedInfoStack.reverse()}this.selectedInfo.dom.style.backgroundColor="",this.selectedInfo.dom.style.color=""}if(!0!==o&&(this.options.scrollFix?this.render.focus():this.selectedInfo.groupDom&&(this.selectedInfo.groupDom.setAttribute("tabindex",0),this.selectedInfo.groupDom.focus(),this.selectedInfo.groupDom.setAttribute("tabindex",-1)),this.useDataCollection&&this.successBinding)){var y=this.modelControl.getDataComp();if(null!=this.selectedInfo.node){for(var v in y.refCompHash){var w=y.refCompHash[v];null!=w&&WebSquare.idCache[w.uuid]&&"input"==w.options.pluginName&&w.setValue(w.getValue())}y.setRowPosition(this.selectedInfo.node.index-1)}else y.setRowPosition(null)}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.selectNode1=function(t,e,i,o){try{if(null!=this.selectedInfo.node){var s=this.tree.getCloneNode(this.selectedInfo.node),r=s.index;if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node)if(r!=this.selectedInfo.node.index){var a={oldNode:s,newNode:this.tree.getCloneNode(this.selectedInfo.node)};u.B.fireEvent(this,"onviewchange",a)}}else if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node){a={oldNode:{},newNode:this.tree.getCloneNode(this.selectedInfo.node)};u.B.fireEvent(this,"onviewchange",a)}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.isOpen=function(t){try{if(t>=this.tree.size()||t<1)return;return this.findNodeByIndex(t).isExpanded()}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getSelectedNode=function(){try{return this.selectedInfo?this.selectedInfo.node:null
}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getSelectedDom=function(){try{return this.selectedInfo?this.selectedInfo.dom:null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getSelectedLabel=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.label:""}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getSelectedValue=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.value:""}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getSelectedIndex=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.index:""}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getSelectedElement=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.element:null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.setLabelStyle=function(t,e,i,s){var r;"object"===(0,o.Z)(t)&&"number"==typeof t.index?r=t:"number"==typeof t?r=this.tree.findNodeByIndex(t):"string"==typeof t&&(r=this.tree.findNodeByValue(t)),this._setLabelStyle(r,e,i,s)},p.prototype._setLabelStyle=function(t,e,i,o){if(null!=t){for(e in null==t.labelStyle&&(t.labelStyle={}),t.labelStyleStr="",t.labelStyle[e]=i,this.originalBackgroundColor=t.labelStyle["background-color"]||this.originalBackgroundColor,this.originalColor=t.labelStyle.color||this.originalColor,t.labelStyle)t.labelStyleStr+=e+":"+t.labelStyle[e]+";";if(t.rendered){var s=document.getElementById(this.id+"_label_"+t.index);if(s){for(var r="",a=0,n=e.length;a<n;a++)"-"===e.charAt(a)?(r+=e.charAt(a+1).capitalize(),a++):r+=e.charAt(a);s.style[r]=i}}if(!0===o)for(a=0,n=t.childNodes.length;a<n;a++){var l=t.childNodes[a];this._setLabelStyle(l,e,i,o)}}},p.prototype.disableCheckboxByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);o&&this.disableCheckbox(o,e,i)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.setLabelByIndex=function(t,e,i){this.setLabel(this.tree.findNodeByIndex(t),e,i)},p.prototype.setLabelByValue=function(t,e,i){this.setLabel(this.tree.findNodeByValue(t),e,i)},p.prototype.setLabel=function(t,e,i){try{if(t){var o=this.refreshStop;if(this.refreshStop=!0,this.useDataCollection||(this.modelControl.useItemset&&WebSquare.ModelUtil.setInstanceValue(t.xpath+"/"+this.tree.xpath.label,e),WebSquare.xml.setValue(t.element,"label",e)),"function"==typeof this.tree.customFormatter){var s=this.tree.getCloneNode(t);e=this.tree.customFormatter.call(this,e,e,s)}if(t.label=e,t.orgLabel=e,t.rendered){var r=document.getElementById(this.id+"_label_"+t.index);r&&(r.innerHTML=e)}if(this.refreshStop=o,this.useDataCollection){var a=this.modelControl.getDataComp();null!=a&&a.setCellData(t.index-1,this.tree.dataPath.label,e,null,i)}}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.checkNode=function(t,e,i,o,s){try{var r=this.tree.findNodeByIndex(t);if(r.checked=e,1==this.options.refreshCheckboxModel){if(this.stopRefresh(!0),this.useDataCollection&&this.tree.checkbox.colID){var a=this.modelControl.getDataComp(),n=e?this.options.trueValue:this.options.falseValue;null!=a&&a.setCellData(t-1,this.tree.checkbox.colID,n,null,s)}else 1==e?r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.trueValue):r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.falseValue);this.stopRefresh(!1)}if(!1!==i&&(1==i||1==this.options.hierarchy||1==this.options.checkAllChildNodes))for(var l=0,h=r.childNodes.length;l<h;l++){var u=r.childNodes[l];this.checkNode(u.index,e,!0,!1)}if(1==this.options.hierarchy&&this.partialSelection(r),!1!==o&&r.parentNode.parentNode&&1==this.options.hierarchy){var c=!0;for(l=0,h=r.parentNode.childNodes.length;l<h;l++){if(1!=(u=r.parentNode.childNodes[l]).checked){c=!1;break}}1==c?this.checkNode(r.parentNode.index,!0,!1):this.checkNode(r.parentNode.index,!1,!1)}
this.redraw(!1)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.checkByIndex=function(t,e,i){try{var o=this.tree.findNodeByIndex(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.checkByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getCheckedNodeByType=function(t,e){try{"object"===(0,o.Z)(t)&&null!=t||(t={});for(var i=[],s=this.tree.getNodeIterator({type:"bfs"});s.next();){var r=s.getNode();(1==r.checked||t.hierarchy&&1==r.partial&&!r.isRoot())&&(t.excludeRoot&&!r.isRoot()||!t.excludeRoot)&&i.push(r[e])}return i}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getCheckedValues=function(t){return this.getCheckedNodeByType(t,"value")},p.prototype.getCheckedLabels=function(t){return this.getCheckedNodeByType(t,"label")},p.prototype.getCheckedIndexes=function(t){return this.getCheckedNodeByType(t,"index")},p.prototype.getCheckedNodes=function(t){return this.getCheckedNodeByType(t,"element")},p.prototype.disableCheckbox=function(t,e,i){try{if(e=r.D.getBoolean(e),t.checkboxDisabled=e,1==this.options.refreshCheckboxDisableModel&&(this.stopRefresh(!0),1==e?null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledTrueValue):null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledFalseValue),this.stopRefresh(!1)),!0===i||!1===i)for(var o=0,s=t.childNodes.length;o<s;o++){var a=t.childNodes[o];this.disableCheckbox(a,e,i)}this.redraw(!1)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.partialSelection=function(t){try{var e=0,i=!1;if(0==t.childNodes.length)return;for(var o=0,s=t.childNodes.length;o<s;o++){var r=t.childNodes[o];1==r.checked?e++:1==r.partial&&(i=!0)}1==i||0<e&&e<t.childNodes.length?(t.partial=!0,this.addClass(t.checkboxDom,"treeview_partialselect")):(t.partial=!1,this.removeClass(t.checkboxDom,"treeview_partialselect"))}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getParentValue=function(t){try{var e="",i=this.tree.findNodeByValue(t);return i&&i.parentNode&&(e=i.parentNode.value),e}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getChildData=function(t){try{for(var e=this.tree.findNodeByValue(t),i=[],o=0,s=e.childNodes.length;o<s;o++)1==this.options.dynamicAppend||this.useDataCollection?i.push(e.childNodes[o].element):i.push(WebSquare.ModelUtil.findInstanceNode(e.childNodes[o].xpath));return i}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.setCustomFormatter=function(t){if("function"==typeof t){for(var e=this.tree.getNodeIterator();e.next();){var i=e.getNode();if(!i.isRoot()){var o=this.tree.getCloneNode(i),s=t.call(this,i.orgLabel,i.label,o)||i.label;if(i.label=s,i.rendered){var r=document.getElementById(this.id+"_label_"+i.index);r&&(r.firstChild.nodeValue=i.label)}}}e=null,this.tree.customFormatter=t}},p.prototype.appendNode=function(t,e){try{if(0==this.options.dynamicAppend&&$l("treeview를 동적으로 처리하는 경우에는  dynamicAppend='true'로 설정하는 것을 권장합니다.["+this.id+"]"),1==this.options.dynamicAppend){var i=t.childNodes?t.childNodes.length:0,o=e.parentNode,s=this.tree.parseNodeByNode(e,t.depth+1,i,t);t.appendChild(s),o.removeChild(e);for(var r=0,a=o.expandedNodes.length;r<a;r++){var n=o.expandedNodes[r];if(e.index===n.index){o.expandedNodes.splice(r,1);break}}for(r=0,a=t.childNodes.length;r<a;r++)this.tree.setRender(t.childNodes[r],!1);t.childNodes.length>0&&(t.childNodes[0].rendered=!1,t.expandedNodes.push(s),this.toggleChild(null,t.index,!0))}else t.appendChild(e),t.expandedNodes.push(e),this.toggleChild(null,t.index,!0)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.removeNode=function(t){try{if(!t)return;var e=t.parentNode;e&&(t.isExpanded()&&this._collapseNode(t),e.removeChild(t),this.redraw(!0))}catch(t){
d.w.printStackTrace(t,null,this)}},p.prototype.removeNodeList=function(t){try{for(var e=0;e<t.length;e++)if(t[e]){var i=t[e].parentNode;i&&i.removeChild(t[e])}this.drawContents()}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.moveNode=function(t,e,i){try{if(!this.useDataCollection)return!1;if(t==e)return!1;if(t<e&&this.getLastChildIndex(t)>=e)return a.k.printLog("treeview moveNode : Invalid argument. [destIndex] must not be child of [srcIndex].["+this.id+"]"),!1;for(var o=this.modelControl.getDataComp(),s=t-1,r=e-1,n=this.findNodeByIndex(t),l=this.findNodeByIndex(e),h=this.getLastChildIndex(s+1)-1,u=[],c=this.tree.dataPath.depth,p=0,g=s;g<=h;g++){var m=o.getRowJSON(g);m[c]=i?Number(m[c])+(l.depth-n.depth+1):Number(m[c])+(l.depth-n.depth),"number"!==o.getColumnInfo(c).dataType&&(m[c]=m[c]+""),u.push(m),p++}this.stopRefresh(!0),o.removeRange(s,h),s<r&&(r+=s-h-1);var f=0;if(!i){var b=this.getLastChildIndex(e);f=b-e,e<=s&&b>=h&&(f-=p)}return o.insertJSON(r+1+f,u),this.stopRefresh(!1),this.refreshItemset(),this.selectNode(null,r+2+f),!0}catch(t){return d.w.printStackTrace(t,null,this),!1}},p.prototype.getLastChildIndex=function(t){try{var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.tree.nodeCount-1;for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.activateDrag=function(t){try{u.B.stopEvent(t),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll();var e=this,i=this.event.getTargetIterator(t,this.render);if(i.element.id===this.id)return;for(var o=!1;i.next();)if((i.match("treeview_icon_open")||i.match("treeview_icon_close"))&&!0,i.match("treeview_virtual_label")&&!0,(i.match("treeview_icon_navi")||i.match("w2treeview_icon_navi_img"))&&(o=!0),i.match("treeview_virtual_node")){var s=i.getElement().getAttribute("index");if(null==s){i.stop();break}if("onmousedown"==this.options.toggleButtonEvent){var a=this.tree.findNodeByIndex(s);if(o&&!a.isLeaf()){this.toggleChild(null,s);var n=!!(a.childNodes&&a.childNodes[0]&&a.childNodes[0].rendered);this.inlineElement?u.B.fireEvent(this,"ontoggleclick",null,s,n):u.B.fireEvent(this,"ontoggleclick",a.element,s,n)}}if(1==this.options.useDrag){var l=this.tree.hash_index_node[s].label;WebSquare.dragdrop.gDragManager.activate(t,i.getElement(),{id:this.id+"_drag",className:"w2treeview_drag",contents:l,delay:15,dropClass:"treeview_virtual_node",dragoverClass:"treeview_label",applyMousePosition:!0,onDrop:function(t,i,o,s,a,n,l){if(t){var h=null,d={},c=null,p=null,g=null;for(d=i?new WebSquare.targetIterator(i,e.render):e.event.getTargetIterator(l);d.next();){if(d.match("w2treeview_virtual")){var m=d.getElement().id;r.D.getComponentById(m)&&(h=r.D.getComponentById(m)),d.stop()}if(d.match("w2grid")&&(c=d.getElement().id,d.stop()),!p&&d.match(null,null,"td")){var f=d.getElement();p=parseInt(f.getAttribute("tdIndex"),10)}}if(d=null,h&&!i&&(i=document.getElementById(h.id+"_node_0")),t&&i&&h){var b=t.getAttribute("index"),y=i.getAttribute("index"),v=e.tree.findNodeByIndex(b),w=h.tree.findNodeByIndex(y);u.B.fireEvent(h,"ondrop",v,w,e,h,l)}if(null!=c&&(g=(c=r.D.getComponentById(c)).getDataLength(),null!=p&&(g=c.rowIndex+parseInt(p/(c.oneRowDataLength+c.defaultColCnt)))),t&&c){b=parseInt(t.getAttribute("index"),10)-1;if(e.useDataCollection)var S=e.modelControl.getDataComp();v=e.tree.findNodeByIndex(b+1);u.B.fireEvent(c,"ondropfromtree",{dataListId:S.id,fromRowIndex:b,toRowIndex:g,dragNode:v})}}},onDragover:function(t,i,o,s,a,n,l){if(t)if(i){for(var h=null,d=new WebSquare.targetIterator(i,e.render);d.next();)if(d.match("w2treeview")){var c=d.getElement().id;r.D.getComponentById(c)&&(h=r.D.getComponentById(c)),d.stop()}if(d=null,h){
var p=t.getAttribute("index"),g=i.getAttribute("id"),m=g.substring(g.lastIndexOf("_")+1,g.length),f=e.tree.findNodeByIndex(p),b=h.tree.findNodeByIndex(m);u.B.fireEvent(h,"ondragover",f,b,e,h,l)}}else u.B.fireEvent(e,"ondragleave",l)}})}i.stop()}i=null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getNextNode=function(t){for(var e=null,i=t.index,o=0,s=this._items.length;o<s;o++)if(this._items[o].index==i){e=this._items[o+1];break}return e},p.prototype.getPreviousNode=function(t){for(var e=null,i=t.index,o=0,s=this._items.length;o<s;o++)if(this._items[o].index==i){e=this._items[o-1];break}return e},p.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null),this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2treeview_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),this.options.escape&&(i=WebSquare.xml._encode(i)),this.tooltip.render.innerHTML=i})),1e3*this.options.tooltipTime)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":this.options.disabled=e,e?this.addClass(this.render,"w2treeview_disabled"):this.removeClass(this.render,"w2treeview_disabled")}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.setDisabled=function(t){t=r.D.getBoolean(t);var e=c.s.prototype.setDisabled.call(this,t);return this.disableCheckbox(this.tree.rootNode,t,!0),e},p.prototype.setEditMode=function(t,e){if(this.useDataCollection){var i=document.getElementById(this.id+"_label_"+t);if(null==this.editModeComp||null==this.editModeComp.render){if(!e){this.editModeComp=new WebSquare.uiplugin.input(this.id+"_input"),i.textContent="",this.editModeComp.writeTo(i),this.editModeComp.activate();var o=this.uuid;this.editModeComp.bind("onclick",(function(t){u.B.stopPropagation(t)})),this.editModeComp.bind("onblur",(function(){var t=WebSquare.idCache[o],e=t.modelControl.getDataComp(),i=this._oldValue,s=this.getValue();e.setCellData(this._index-1,t.tree.dataPath.label,s),t.appendChild(this),this.hide(),this.setValueNM(""),u.B.fireEvent(t,"oneditend",{oldValue:i,newValue:s,index:this._index})})),this.editModeComp.bind("onkeydown",(function(t){u.B.stopPropagation(t)}))}}else i.textContent="",this.editModeComp.show(),i.appendChild(this.editModeComp.render);this.editModeComp._index=t,this.editModeComp.setVerticalAlign=function(){};var s=this.findNodeByIndex(t);s&&""!=s.label&&(this.editModeComp.setValueNM(s.label),this.editModeComp._oldValue=s.label),this.editModeComp.focus()}},p.prototype.handleClickEvent=function(t){try{for(var e=!1,i=!1,o=!1,s=this.event.getTargetIterator(t,this.render);s.next();)if((s.match("treeview_icon_open")||s.match("treeview_icon_close"))&&(e=!0),s.match("treeview_checkbox")&&(o=!0),s.match("treeview_label")&&(i=!0),s.match("treeview_virtual_node")){var a=s.getElement().getAttribute("index"),n=s.getElement().getAttribute("value"),l=this.tree.findNodeByIndex(a);if(e&&"onmousedown"!==this.options.toggleButtonEvent){this.toggleChild(null,a);var c=l.childNodes&&l.childNodes[0]&&l.childNodes[0].rendered;this.inlineElement?u.B.fireEvent(this,"ontoggleclick",null,a,c):u.B.fireEvent(this,"ontoggleclick",l.element,a,c)}if(o&&!l.checkboxDisabled){var p=!l.checked;this.checkNode(a,p),
this.inlineElement?u.B.fireEvent(this,"oncheckboxclick",n,null,a):1==this.options.dynamicAppend||this.useDataCollection?u.B.fireEvent(this,"oncheckboxclick",n,l.element,a):u.B.fireEvent(this,"oncheckboxclick",n,WebSquare.ModelUtil.findInstanceNode(l.xpath),a)}i&&("onclick"===this.options.toggleEvent&&this.toggleChild(null,a),this.inlineElement?u.B.fireEvent(this,"onlabelclick",n,null,a):u.B.fireEvent(this,"onlabelclick",n,l.element,a));var g=h.v.getConfiguration("/WebSquare/treeview/useClickEventToggleButton/@value"),m=r.D.getBoolean(this.options.noFocusOnIconLabelClick||h.v.getConfiguration("/WebSquare/treeview/noFocusOnIconLabelClick/@value"));(i||o||e&&"false"!=g)&&(this.selectNode1(null,a,!1,m),u.B.fireEvent(this,"onclick")),s.stop()}s=null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.handleToggleEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("treeview_label")&&(e=!0),e&&i.match("treeview_virtual_node")){var o=i.getElement().getAttribute("index");this.toggleChild(null,o),i.stop()}i=null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.handleScrollXEvent=function(t){var e=this.dom[this.id+"_scrollX_div"].scrollLeft,i=e-this.oldScrollLeft;this.dom[this.id+"_main_div"].scrollLeft+=i,this.oldScrollLeft=e,u.B.stopEvent(t)},p.prototype.handleScrollYEvent=function(t){var e=this,i=function(){if(e._arrowDownPressed){var t=e.getNextNode(e.selectedInfo.node);t||(t=e.selectedInfo.node),e.selectNode1(null,t.index,!1,!1),e._arrowDownPressed=!1,e=null}else if(e._arrowUpPressed){var i=e.getPreviousNode(e.selectedInfo.node);i||(i=e.selectedInfo.node),e.selectNode1(null,i.index,!1,!1),e._arrowUpPressed=!1,e=null}else if(e.selectedInfo.node){for(var o=0;o<e._items.length;o++)if(e._items[o]==e.selectedInfo.node){e.selectNode1(null,e.selectedInfo.node.index,!1,!1);break}e=null}};this.options.redrawInterval>0?(h.v.clearTimer(this.id+"_redraw"),h.v.setTimer((function(){e.redraw(!1,i)}),{key:this.id+"_redraw",caller:this,delay:this.options.redrawInterval})):(0==this.options.redrawInterval||this._forceRedraw)&&(this.redraw(!1,i),this._forceRedraw=!1),u.B.stopEvent(t)},p.prototype.handleMouseWheelEvent=function(t){var e,i=t||window.event,o=i.detail,s=i.wheelDelta,r=1;o=(o=o?s&&(r=s/o)?o/r:-o/1.35:s/120)<1?o<-1?(-Math.pow(o,2)-224)/225:o:(Math.pow(o,2)+224)/225,e=t.deltaY?t.deltaY:-180*Math.min(Math.max(o/2,-1),1),this.dom[this.id+"_scrollY_div"].scrollTop+=e,u.B.stopEvent(t)},p.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=0;this.selectedInfo.node?(this.selectedInfo.groupDom,i=this.selectedInfo.node.index):i=(t.srcElement||t.target).getAttribute("index");var o=this.tree.findNodeByIndex(i);if(37===e||39===e||13===e){var s=37!==e;13===e?this.toggleChild(null,i,null):this.toggleChild(null,i,s);var r=this;this.redraw(!1,(function(){r.selectNode1(null,r.selectedInfo.node.index,!1,!1)}));var a=!!(o.childNodes&&o.childNodes[0]&&o.childNodes[0].rendered);this.inlineElement?u.B.fireEvent(this,"ontoggleclick",null,i,a):u.B.fireEvent(this,"ontoggleclick",o.element,i,a),u.B.stopEvent(t)}else if(38===e){if(this.options.scrollFix)return void(this.dom[this.id+"_scrollY_div"].scrollTop-=1.5*this.options.rowHeight);var n=null;0==i?(i=1,n=this.tree.findNodeByIndex(i)):n=this.getPreviousNode(o),n?n.index&&this.selectNode1(null,n.index,!1):(this.dom[this.id+"_scrollY_div"].scrollTop-=2*this.options.rowHeight,this._arrowUpPressed=!0),u.B.stopEvent(t)}else if(40===e){if(this.options.scrollFix)return void(this.dom[this.id+"_scrollY_div"].scrollTop+=1.5*this.options.rowHeight);n=null;0==i?(i=1,n=this.tree.findNodeByIndex(i)):n=this.getNextNode(o),n?n.index&&this.selectNode1(null,n.index,!1):(this.dom[this.id+"_scrollY_div"].scrollTop+=2*this.options.rowHeight,this._arrowDownPressed=!0),u.B.stopEvent(t)}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.handleDblclickEvent=function(t){try{
for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("treeview_label")&&(e=!0),e&&i.match("treeview_virtual_node")){var o=i.getElement().getAttribute("index");e&&("ondblclick"!==this.options.toggleEvent&&""!==this.options.toggleEvent||this.toggleChild(null,o)),u.B.fireEvent(this,"ondblclick"),i.stop()}i=null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.handleMouseoverEvent=function(t){try{u.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("treeview_label")&&(this.addClass(e.getElement(),"treeview_over"),this.options.tooltipDisplay||this.options.tooltipShowAlways)){var i=e.getElement(),o=WebSquare.style.getAbsoluteLeft(i),s=WebSquare.style.getAbsoluteTop(i),a=i.firstChild.nodeValue,n=WebSquare.style.getAbsoluteLeft(this.render),l=!1;if(this.options.tooltipDisplay)if(o+i.offsetWidth>n+this.render.clientWidth+this.render.scrollLeft)l=!0;else if(r.D.isIEAllVersion()&&!r.D.isIE(6)&&!r.D.isIE(7)){var h=i.style.display;i.style.display="block",i.clientWidth<i.scrollWidth&&(l=!0),i.style.display=h}if(l||this.options.tooltipShowAlways){if(this.tooltipFormatter&&"function"==typeof this.tooltipFormatter){for(var c=new WebSquare.targetIterator(i,this.render),p=-1;c.next();)c.match("treeview_virtual_node")&&(p=c.getElement().getAttribute("index"),c.stop());c=null;try{var g=!!l||i.offsetWidth<i.scrollWidth;a=this.tooltipFormatter(a,p,g)}catch(t){d.w.printStackTrace(t,null,this)}}""!=a&&this.showTooltip(o,s,a)}}e=null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.handleMouseoutEvent=function(t){try{u.B.stopEvent(t),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("treeview_label")&&this.removeClass(e.getElement(),"treeview_over");e=null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.handleContextmenuEvent=function(t){try{u.B.stopEvent(t);for(var e=!1,i=!1,o=!1,s=!1,r=this.event.getTargetIterator(t,this.render);r.next();){if(r.match("treeview_label")&&(s=!0),r.match("treeview_icon_navi")&&(e=!0),r.match("treeview_icon_label")&&(i=!0),r.match("treeview_checkbox")&&(o=!0),r.match("treeview_virtual_node")){var a=r.getElement().getAttribute("index");if(e&&this.toggleChild(null,a),o){var n=document.getElementById(this.id+"_checkbox_"+a).checked;this.checkNode(a,n)}(s||o||i)&&(this.selectNode1(null,a),u.B.fireEvent(this,"onrightbuttonclick",this.findNodeByIndex(a),u.B.getMouseX(t),u.B.getMouseY(t))),r.stop()}r.match("w2treeview_virtual")&&0===this.tree.nodeCount&&(u.B.fireEvent(this,"onrightbuttonclick",null,u.B.getMouseX(t),u.B.getMouseY(t)),r.stop())}r=null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.nodeToHTML=function(t){if(!t)return"";t.rendered=!0;var e=[],i="",o="",s="",r="",a="",n="",l="",h=this.options.escape?WebSquare.xml._encode(t.label):t.label,d=this.options.escape?WebSquare.xml._encode(t.value):t.value;if(t.hasChild()){var u=t.isExpanded();i=u?"opened":"closed",o=u?"treeview_icon_close":"treeview_icon_open",s=u?"background: url("+this.options.folderCloseToggleImage+") no-repeat center center":"background: url("+this.options.folderOpenToggleImage+") no-repeat center center";var c=t.parentNode.childNodes;c&&c[c.length-1]==t&&(i+=" lastParentSibling")}else i="leaf",o=this.options.lineShow?t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?"treeview_root_single_leaf":"treeview_root_multi_leaf":t.isLastChild()?"treeview_last_sibling":"treeview_leaf":"";i+=" w2tree_depth_"+t.depth,e.push("<div id='"+this.id+"_node_"+t.index+"' tabindex='-1' class='treeview_virtual_node "+i+"' index='"+t.index+"' value='"+d+"' depth='"+t.depth+"' style='height:"+this.options.rowHeight+"px;'>");var p=!1,g=[];if(this.options.lineShow)if(t._ancestor){a="treeview_guideline",n="width: 16px;";var m=this.tree.hash_index_node[t._ancestor],f=t;for(p=!0,m.isLastChild()&&g.push(!1);f!=m;)g[f.depth-1]=!f.isLastChild(),f=f.parentNode
}else a="treeview_no_guideline",n="width:"+16*(t.depth-1)+"px;";else a="treeview_no_guideline",n="width:"+16*(t.depth-1)+"px;";if(p)for(var b=0;b<t.depth-1;b++)a=0==g[b]?"treeview_no_guideline":"treeview_guideline",e.push("<span class='"+a+"' style='"+n+"'> </span>");else e.push("<span class='"+a+"' style='"+n+"'> </span>");if(e.push("<span class='treeview_icon_navi "+o+"' style='"+s+"'></span>"),""!=t.image){var y=t.isExpanded()?t.expandedImage:t.image,v=t.imageTitle?"title='"+t.imageTitle+"'":"";e.push("<span id='"+this.id+"_icon_"+t.index+"' class='treeview_icon_label'"+v+" style='background-image:url("+y+")'></span>")}if(1==this.options.showCheckbox){var w=t.checked||t.partial?"checked='true' ":"",S=t.checkboxDisabled?"disabled='true' ":"",C=t.partial?"treeview_partialselect":"";!0===this.options.labelForCheckbox&&(l="for='"+this.id+"_checkbox_"+t.index+"'"),e.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' "+w+S+" id='"+this.id+"_checkbox_"+t.index+"' class='treeview_checkbox "+C+"' />")}return t.labelStyleStr&&(r=t.labelStyleStr),e.push("<label "+l+" class='treeview_label "+this.options.labelclass+"' tabindex='-1' style='"+r+"' id='"+this.id+"_label_"+t.index+"'>"+h+"</label>"),e.push("</div>"),e.join("")},p.prototype.isLeaf=function(){try{return!this.selectedInfo||!this.selectedInfo.node||!this.selectedInfo.node.hasChild()}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype._getDataObj=function(t){if(t){var e=WebSquare.WebSquareparser.parseItemset(t);this.modelControl.setItemset(e.nodeset,e.label,e.value),0==this.options.modelBinding&&(this.options.refreshCheckboxModel=!1,this.options.refreshCheckboxDisableModel=!1);var i={type:"",data:null},o=null,s=WebSquare.Elem.api.getElementsByTagName(t,"itemset",h.v._XML_NAMESPACE.W2)[0];if(s){var r=WebSquare.Elem.api.getValue(s,"@nodeset");this.useDataCollection=r.match("data:");var a=r.replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);a&&(a=a[0]);var n=WebSquare.Elem.api.getElementsByTagName(s,"label",h.v._XML_NAMESPACE.W2)[0],l=WebSquare.Elem.api.getElementsByTagName(s,"value",h.v._XML_NAMESPACE.W2)[0],d=WebSquare.Elem.api.getElementsByTagName(s,"depth",h.v._XML_NAMESPACE.W2)[0],u=WebSquare.Elem.api.getElementsByTagName(s,"folder",h.v._XML_NAMESPACE.W2)[0],c=null==n?"":n.getAttribute("ref"),p=null==l?"":l.getAttribute("ref"),g=null==d?"":d.getAttribute("ref"),m=null==u?"":u.getAttribute("ref"),f={image:"image",iconImage:"iconImage",selectedImage:"selectedImage",expandedImage:"expandedImage",leafImage:"leafImage",checkboxDisabled:"checkboxDisabled",imageTitle:"imageTitle",checkbox:"checkbox"};for(var b in f){var y=WebSquare.Elem.api.getElementsByTagName(s,""+b,h.v._XML_NAMESPACE.W2)[0];f[b]=null==y?"":y.getAttribute("ref")}var v=f.checkbox;this.useDataCollection&&this.tree.setDataPath(c,p,g,a,m,v);var w=f.image,S=f.iconImage,C=f.selectedImage,x=f.expandedImage,_=f.leafImage,I=f.checkboxDisabled,T=f.imageTitle;v=f.checkbox;if(w=""!=this.options.defaultImage?this.options.defaultImage:w,S=""!=this.options.iconImage?this.options.iconImage:S,C=""!=this.options.selectedImage?this.options.selectedImage:C,x=""!=this.options.expandedImage?this.options.expandedImage:x,_=""!=this.options.leafImage?this.options.leafImage:_,I=""!=this.options.checkboxDisabled?this.options.checkboxDisabled:I,this.tree.setXPath(r,c,p,g,a,m),this.tree.setCheckbox(v,this.options.trueValue,this.options.falseValue,I,this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy,f.checkbox),this.tree.setImage(w,S,_,C,x,T),this.useDataCollection)this.modelControl.getDataCollectionItemsetData(this.modelControl.id),null!=(o=this.modelControl.getDataComp())&&(i.type="dataList",i.data=o.id,this.successBinding=!0);else{var k=WebSquare.ModelUtil.findInstanceNodes(r,null,this.scope_id),D=null
;null!=k&&("recursive"==this.options.dataType?D=this.tree.parseRecursiveToTree(k):"listed"==this.options.dataType&&(D=this.tree.parseListToTreeInstance(k))),i.type="xmlInstance",i.data=D,this.tree.isInstance=!0}}else{this.inlineElement=!0;w="w2:image",S="w2:iconImage",C="w2:selectedImage",x="w2:expandedImage",_="w2:leafImage";w=""!=this.options.defaultImage?this.options.defaultImage:w,S=""!=this.options.iconImage?this.options.iconImage:S,C=""!=this.options.selectedImage?this.options.selectedImage:C,x=""!=this.options.expandedImage?this.options.expandedImage:x,_=""!=this.options.leafImage?this.options.leafImage:_,this.tree.setImage(w,S,_,C,x,"w2:imageTitle"),this.tree.setCheckbox("w2:checkbox",this.options.trueValue,this.options.falseValue,"w2:checkboxDisabled",this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy),i.type="inlineXML",i.data=t}return i}},p.prototype.refreshItemset=function(t){try{if(this.modelControl.isItemsetBinded()&&!this.refreshStop){this.refreshStop=!0,this._expandedNodes=[];var e=this.tree.getNodeset(),i=!1;if(this.useDataCollection){var o;if(null!=(o=this.modelControl.getDataComp())){if(!this.successBinding){var s=(e=o.options.baseNode+"/"+o.options.repeatNode).replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);s&&(s=s[0]),this.tree.valueAttribute=o.options.valueAttribute?o.options.valueAttribute:"";var r=this.tree.dataPath.label,a=this.tree.dataPath.value,n=this.tree.dataPath.depth,l=this.tree.dataPath.folder,h=this.tree.dataPath.checkbox;this.tree.setDataPath(r,a,n,s,l,h),this.successBinding=!0,i=!0}this.tree.setData({type:"dataList",data:o.id})}}else{var u=WebSquare.ModelUtil.findInstanceNodes(e,null,this.scope_id),c=null;null!=u&&("recursive"==this.options.dataType?c=this.tree.parseRecursiveToTree(u):"listed"==this.options.dataType&&(c=1==this.tree.isInstance?this.tree.parseListToTreeInstance(u):this.tree.parseListToTree(u))),this.tree.setData({type:"xmlInstance",data:c})}if(this._expandedNodes.push(this.tree.rootNode),this._setExpandedLevel(),i)if(t&&!0===t.setNodeSet){if(this.redraw(!0),this.useDataCollection)(o=this.modelControl.getDataComp()).bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck))}else this.setAction(),this.refreshStop=!0;else this.redraw(!0);if(this.useDataCollection)null!=(o=this.modelControl.getDataComp())&&o.getRowPosition();this.refreshStop=!1}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.refreshItemArr=function(){},p.prototype.setNodeSet=function(t,e){try{var i=e||{},o=t;if(t.indexOf("data:")>=0&&(o=t.replaceAll("data:","")),this.modelControl.getDataComp(o)){for(var s in this.useDataCollection=t.match("data:"),this.modelControl.unbindItemset(),this.modelControl.setItemset("data:"+o,i.label,i.value),this.modelControl.dataCollectionBindItemset(),this.modelControl.getDataCollectionItemsetData(this.modelControl.id),e)this.tree.dataPath[s]=e[s],"checkbox"===s&&(this.tree.checkbox.colID=e[s]);this.successBinding=!1,this.refreshItemset({setNodeSet:!0})}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.stopRefresh=function(t){try{this.refreshStop=r.D.getBoolean(t)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.notifyValidCheck=function(t){try{if(t.colID===this.tree.dataPath.depth){var e=this.findNodeByIndex(t.rowIndex+1);if(t.newValue<1)throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be greater than 0."};if(t.oldValue&&t.newValue>t.oldValue&&e.isFirstChild())throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be less than "+(t.oldValue+1)}}return!0}catch(t){return d.w.printStackTrace(t,null,this),!1}},p.prototype.notifyInvalid=function(){},p.prototype.notifySetCellData=function(t,e,i,o){try{if(this.refreshStop||parseInt(o,10)===parseInt(i,10))return
;if(e===this.tree.dataPath.label)this.setLabelByIndex(t+1,i,!0);else if(e===this.tree.dataPath.checkbox)i==this.options.trueValue?this.checkNode(t+1,!0):i==this.options.falseValue&&this.checkNode(t+1,!1);else if(e===this.tree.dataPath.depth){if(Math.abs(i-o)>1)return void this.refreshItemset();this.stopRefresh(!0),this.notifyDepthChanged(t+1,i,o),this.stopRefresh(!1);var s=this.findNodeByIndex(t+1);s.parentNode===this.tree.rootNode?this.redraw():this.toggleChild(null,s.parentNode.index,!0)}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.notifyDepthChanged=function(t,e,i){try{var o=this.findNodeByIndex(t),s=this.modelControl.getDataComp();if(e>i){var r=(h=o.parentNode).childNodes[o.depthIndex-2],a=o.childNodes.splice(0,o.childNodes.length);h.childNodes.splice(o.depthIndex-1,1),o.parentNode=r,r.childNodes.push(o),o.depthIndex=r.childNodes.length,r.rendered=!1,o.rendered=!1;for(var n=0;n<a.length;n++)a[n].parentNode=r,r.childNodes.push(a[n]),a[n].depthIndex=r.childNodes.length,a[n].rendered=!1;h.childNodes[0].rendered=!1}else{if(o.hasChild())for(n=o.childNodes.length-1;n>=0;n--){var l=o.childNodes[n];s.setCellData(l.index-1,this.tree.dataPath.depth,l.depth-1),this.notifyDepthChanged(l.index,l.depth-1,l.depth)}var h,u=(h=o.parentNode).parentNode;if(o.depthIndex<h.childNodes.length){var c=h.childNodes.splice(o.depthIndex,h.childNodes.length-o.depthIndex);for(n=0;n<c.length;n++)c[n].parentNode=o,o.childNodes.push(c[n]),c[n].depthIndex=o.childNodes.length,c[n].rendered=!1}h.childNodes.splice(h.childNodes.length-1,1),o.parentNode=u,u.childNodes.splice(h.depthIndex,0,o);for(n=h.depthIndex;n<u.childNodes.length;n++)u.childNodes[n].depthIndex=n+1;u.childNodes[0].rendered=!1}o.depth=e,o.element.setAttribute(s.options.valueAttribute,e)}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.notifyInsertRow=function(t){try{if(this.refreshStop)return;var e=this.modelControl.getDataComp(),i=this.findNodeByIndex(t),o=new n;o.index=t+1,o.depthIndex=1,o.depth=i.depth+1,o.rendered=!1,o.parentNode=i;for(var s=e.getRowCount();s>=t+2;s--)this.tree.changeNodeIndex(s-1,s);this.tree.hash_index_node[t+1]=o,e.setCellData(t,this.tree.dataPath.depth,i.depth+1,null,!0);var r=e.getRowJSON(t),a={T:1,N:"data",A:{index:""+t},E:[]};for(var l in r){var h={T:1,N:l,parent:a};""!=r[l]&&(h.E=[],h.E.push({T:3,text:""+r[l]})),a.E.push(h)}o.element=new WebSquare.Elem(a),i.childNodes.unshift(o);for(s=0;s<i.childNodes.length;s++)i.childNodes[s].depthIndex=s+1;this.toggleChild(null,t,!0),this.tree.nodeCount=e.getRowCount()+1}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.notifyBeforeSetRowData=function(t,e){try{if(this.refreshStop)return;var i=this.modelControl.getDataComp();this.beforeSetRowData=e?{depth:i.getCellData(t,this.tree.dataPath.depth),label:i.getCellData(t,this.tree.dataPath.label),checkbox:i.getCellData(t,this.tree.dataPath.checkbox),overwrite:e}:{depth:Number(i.getCellData(t-1,this.tree.dataPath.depth))+1,label:"",checkbox:"",overwrite:e}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.notifySetRowData=function(t){try{if(this.refreshStop)return;var e,i=(e=this.modelControl.getDataComp()).getCellData(t,this.tree.dataPath.depth),o=e.getCellData(t,this.tree.dataPath.label),s=e.getCellData(t,this.tree.dataPath.checkbox);if(i!=this.beforeSetRowData.depth)if(this.notifyValidCheck({colID:this.tree.dataPath.depth,oldValue:this.beforeSetRowData.depth,newValue:i}))this.notifySetCellData(t,this.tree.dataPath.depth,i,this.beforeSetRowData.depth);else(e=this.modelControl.getDataComp()).setCellData(t,this.tree.dataPath.depth,this.beforeSetRowData.depth);o!=this.beforeSetRowData.label&&this.notifySetCellData(t,this.tree.dataPath.label,o,this.beforeSetRowData.label),s!=this.beforeSetRowData.checkbox&&this.notifySetCellData(t,this.tree.dataPath.checkbox,s,this.beforeSetRowData.checkbox),this.beforeSetRowData={},this.tree.nodeCount=e.getRowCount()+1}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.notifyRemoveRow=function(t){try{
if(this.refreshStop)return;var e=this.findNodeByIndex(t+1),i=e.parentNode,o=document.getElementById(this.id+"_group_"+e.index);if(o&&WebSquare.removeNode(o),this.stopRefresh(!0),this.notifyRemoveRow_allChildren(t),this.stopRefresh(!1),0==i.index)i._hasChild=i.folder?null:0!=i.childNodes.length,this.redraw();else{var s=this.findNodeByIndex(t);if(s&&!s.isRoot()){if(s.isLastChild()){var r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,"w2treeview_last_sibling"),this.removeClass(r,"w2treeview_first_sibling"),s.isLeaf()&&this.addClass(r,"w2treeview_last_leaf")}else if(s.isFirstChild()){r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,"w2treeview_first_sibling")}if(s.parentNode.isLastChild()){var a=document.getElementById(this.id+"_guideline_"+s.parentNode.index);this.removeClass(a,"w2treeview_guideline"),this.addClass(a,"w2treeview_noguideline")}}}var n=this.modelControl.getDataComp();this.tree.nodeCount=n.getRowCount()+1}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.notifyRemoveRow_allChildren=function(t){try{var e=this.findNodeByIndex(t+1),i=e.parentNode,o=this.modelControl.getDataComp(),s=t,r=o.getRowCount()+1,a=1;if(e.hasChild()){s=r-1;for(var n=e;!n.isRoot()&&n.depthIndex==n.parentNode.childNodes.length;)n=n.parentNode;n.isRoot()||n.depthIndex==n.parentNode.childNodes.length||(s=n.parentNode.childNodes[n.depthIndex].index-2);for(var l=[],h=t;h<s;h++)l.push(h),this.tree.clearNode(this.tree.findNodeByIndex(h+2)),a++;o.removeRows(l)}i.childNodes.splice(e.depthIndex-1,1);for(h=e.depthIndex-1;h<i.childNodes.length;h++)i.childNodes[h].depthIndex=h+1;this.tree.clearNode(e);for(h=s+2;h<=r;h++)this.tree.changeNodeIndex(h,h-a);this.tree.nodeCount=o.getRowCount()+1}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.notifyDataChanged=function(t){try{this.stopRefresh(!1),this.refreshItemset()}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.getDataListInfo=function(){try{if(this.modelControl.isDataCollectionItemsetBinded){var t={};return t.id=this.modelControl.dataCollectionItemsetInfo.dataComp.id,t.nodeset=this.modelControl.itemsetObj.nodeset,t.label=this.modelControl.itemsetObj.label,t.value=this.modelControl.itemsetObj.value,t}return null}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.deselectNode=function(){try{if(this.selectedInfo&&this.selectedInfo.node){var t=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,e=r.D.getBoolean(this.options.useHirarchySelect);if(this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor),e&&this.selectedInfoStack.length>0){for(var i=0;i<this.selectedInfoStack.length;i++){var o=this.selectedInfoStack[i];o.dom&&(this.removeClass(o.dom,this.options.labelonClickClass),o.dom.style.backgroundColor=o.org.background,o.dom.style.color=o.org.color)}this.selectedInfoStack=[]}u.B.fireEvent(this,"onchange",t,null),this.selectedInfo={groupDom:null,dom:null,node:null}}}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.setShowCheckBox=function(t){try{this.options.showCheckbox!=t&&(this.options.showCheckbox=t,this.redraw(!0))}catch(t){d.w.printStackTrace(t,null,this)}},p.prototype.checkResize=function(){try{if(this.render){var t=this.render.offsetWidth,e=this.render.offsetHeight;if(this.resizeObj&&t>0&&e>0)if(0==this.resizeObj.width&&0==this.resizeObj.height)this.refreshItemset();else{var i=t-this.resizeObj.width,o=e-this.resizeObj.height;0==i&&0==o||this.redraw(!0)}this.resizeObj={width:t,height:e}}}catch(t){d.w.printStackTrace(t,null,this)}}},2105:function(t,e,i){"use strict";i.r(e),i.d(e,{trigger:function(){return l}});var o=i(1974),s=i(5948),r=i(1454),a=i(8683),n=i(1),l=function(t,e,i){n.s.call(this,t,e,i)};o.x.extend(l.prototype,n.s.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.trigger",pluginName:"trigger",
userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onfocus","onblur","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove","onkeydown","onkeypress","onkeyup"],useConfig:!0,type:"button",leftOnImageClass:"w2trigger_left",centerOnImageClass:"w2trigger_center",rightOnImageClass:"w2trigger_right",leftOffImageClass:"w2trigger_left",centerOffImageClass:"w2trigger_center",rightOffImageClass:"w2trigger_right",singleClassMode:!1,localeRef:"",useLocale:!1,title:"",anchorWithGroupClass:!0,initStyle:!1,target:"",name:""},l.prototype.initialize=function(t){try{if(this.evented=!1,t){var e=WebSquare.WebSquareparser.parseLabel(t);e&&(this.options.value=e.value)}if(this.options.useLocale&&this.options.localeRef){var i=this.getLocaleValue(this.options.localeRef);i&&(this.options.value=i)}"w2trigger_left"!=this.options.leftOnImageClass&&"w2trigger_center"==this.options.centerOnImageClass&&"w2trigger_right"==this.options.rightOnImageClass&&(this.options.singleClassMode=!0);var o=this.options.initStyle;this.options=WebSquare.cssManager.styleToClass(this.id,this.options),this.options.initStyle=o||""}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{var t=[],e=""==this.options.value.wq_replaceAll("'","&#39;")?"":"value ='"+this.options.value.wq_replaceAll("'","&#39;")+"'",i=""==this.options.title?"":"title='"+this.options.title.wq_replaceAll("'","&#39;")+"'",o=""==this.options.style?"":"style='"+this.options.style+"'",r=""==this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'";if("button"==this.options.type.toLowerCase())t.push("<input type='button' "+r+" id='"+this.id+"' "+o+" class='w2trigger "+this.options.className+"' "+e+" "+i+"/>");else if("image"==this.options.type.toLowerCase())t.push("<table "+r+" role='button' id='"+this.id+"' "+o+" class='w2trigger w2trigger_table "+this.options.className+"' "+i+" onkeydown='if( event.keyCode == 32 || event.keyCode == 13 ) click();'>"),t.push("<tbody>"),t.push("<tr id='"+this.id+"_row'>"),1==this.options.singleClassMode?(t.push("<td id='"+this.id+"_left' class='w2trigger_col_left "+this.options.leftOffImageClass+"'></td>"),t.push("<td id='"+this.id+"_center' class='w2trigger_col_center w2trigger_label '>"+this.options.value+"</td>"),t.push("<td id='"+this.id+"_right' class='w2trigger_col_right '></td>")):(t.push("<td id='"+this.id+"_left' class='w2trigger_col_left "+this.options.leftOffImageClass+"'></td>"),t.push("<td id='"+this.id+"_center' class='w2trigger_col_center "+this.options.centerOffImageClass+" w2trigger_label '>"+this.options.value+"</td>"),t.push("<td id='"+this.id+"_right' class='w2trigger_col_right "+this.options.rightOffImageClass+"'></td>")),t.push("</tr>"),t.push("</tbody>"),t.push("</table>");else if("anchor"==this.options.type.toLowerCase()){var a=1==this.options.anchorWithGroupClass?"w2group":"",n=this.options.href?this.options.href:"javascript:void(null);",l=this.options.target?" target='"+this.options.target+"'":"",h=this.options.name?" name='"+this.options.name+"'":"";t.push("<a id='"+this.id+"' style='"+this.options.style+"' class='"+a+" w2trigger_anchor "+this.options.className+"' href='"+n+"' "+r+l+h+i+" >"),t.push("<span id='"+this.id+"_span' class='w2textbox '>"+this.options.value+"</span>"),t.push("</a>")}return t.join("")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if("image"==this.options.type.toLowerCase())this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent));else if("anchor"==this.options.type.toLowerCase()){this.dom.input=document.getElementById(this.id),
document.getElementById(this.id+"_span").style.setProperty("line-height",this.dom.input.clientHeight+"px"),a.D.isIEAllVersion("6 7 8 9 10")&&this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,(function(t){this.options.href&&""!==this.options.href.wq_trim()||r.B.stopEvent(t)})))}else this.dom.input=document.getElementById(this.id);this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setLabel=function(t){try{if(!this.options.disabled)if(this.options.value=t,this.options.useLocale&&(t=this.getLocaleValue()),"button"==this.options.type.toLowerCase())this.dom.input.value=t;else if("anchor"==this.options.type.toLowerCase())this.dom.input.childNodes[0].innerHTML=t;else{this.getElementById(this.id+"_center").innerHTML=t}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{this.setLabel(t)}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getLabel=function(){try{return this.options.value}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getValue=function(){try{return this.options.value}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.setBackgroundImage=function(t){try{"button"==this.options.type&&((t=t.wq_trim()).startsWith("url")?this.render.style.backgroundImage=this.getURL(t):this.render.style.backgroundImage="url("+this.getURL(t)+")")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getBackgroundImage=function(){try{return"button"==this.options.type?this.getStyle("background-image"):""}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.getType=function(){try{return this.options.type}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.onPropertyChange=function(t,e){try{var i="image"==this.options.type?this.getElementById(this.id+"_row"):this.render;switch(t){case"disabled":if(1==e||"disabled"==e)WebSquare.getBody().hideToolTip();"image"==this.options.type?1==e?(this.removeClass(i,"w2trigger_over"),this.addClass(i,"w2trigger_disabled")):this.removeClass(i,"w2trigger_disabled"):"anchor"==this.options.type.toLowerCase()?(i=this.getElementById(this.id+"_span"),1==e?(i.style.setProperty("color","#848684"),this.addClass(i,"w2trigger_disabled")):this.removeClass(i,"w2trigger_disabled")):1==e?this.addClass(i,"w2trigger_disabled"):this.removeClass(i,"w2trigger_disabled");break;case"readOnly":1==e?this.addClass(i,"w2trigger_readOnly"):this.removeClass(i,"w2trigger_readOnly")}}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=a.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){s.w.printStackTrace(t)}},l.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=a.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){s.w.printStackTrace(t)}},l.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){s.w.printStackTrace(t)}},l.prototype.setNextTabID=function(t,e){try{null!=t&&a.D.setNextTabID(this.id,t,e)}catch(t){s.w.printStackTrace(t)}},l.prototype.handleMouseoverEvent=function(){try{if(1==this.options.disabled)return;var t=this.getElementById(this.id+"_row");this.addClass(t,"w2trigger_over"),"image"==this.options.type&&(0==this.evented&&(this.evented=!0,this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent))),
this.changeClass(this.getElementById(this.id+"_left"),this.options.leftOffImageClass,this.options.leftOnImageClass),0==this.options.singleClassMode&&(this.changeClass(this.getElementById(this.id+"_center"),this.options.centerOffImageClass,this.options.centerOnImageClass),this.changeClass(this.getElementById(this.id+"_right"),this.options.rightOffImageClass,this.options.rightOnImageClass)))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMouseoutEvent=function(){try{if(1==this.options.disabled)return;var t=this.getElementById(this.id+"_row");this.removeClass(t,"w2trigger_over"),this.removeClass(t,"w2trigger_press"),"image"==this.options.type&&(this.changeClass(this.getElementById(this.id+"_left"),this.options.leftOnImageClass,this.options.leftOffImageClass),0==this.options.singleClassMode&&(this.changeClass(this.getElementById(this.id+"_center"),this.options.centerOnImageClass,this.options.centerOffImageClass),this.changeClass(this.getElementById(this.id+"_right"),this.options.rightOnImageClass,this.options.rightOffImageClass)))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMousedownEvent=function(){try{var t=this.getElementById(this.id+"_row");this.addClass(t,"w2trigger_press")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleMouseupEvent=function(){try{var t=this.getElementById(this.id+"_row");this.removeClass(t,"w2trigger_press")}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{9==(t.charCode?t.charCode:t.keyCode)&&(this.tabOrderMoveStart=!1,t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.B.preventDefault(t)))}catch(t){s.w.printStackTrace(t,null,this)}},l.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=a.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=a.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus())}catch(t){s.w.printStackTrace(t,null,this)}}},9954:function(t,e,i){"use strict";i.r(e),i.d(e,{upload:function(){return h}});var o=i(1974),s=i(5052),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=function(t,e,i){l.s.call(this,t,e,i)};o.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={useConfig:!0,userEvents:["ondone","onInputValueChange"],pluginType:"uiplugin.upload",pluginName:"upload",className:"",imageStyle:"",inputStyle:"",imageClass:"",inputClass:"",type:"",action:"",imagewidth:"",imageheight:"",empty:6,subDir:"",subSize:"",title:"",accept:"",targetFrame:"body",useXHR:!1},h.prototype.initialize=function(t){try{var e=s.v.getConfiguration("/WebSquare/upload/type/@value");""==this.options.type&&""!=e?this.options.type=e:""==this.options.type&&(this.options.type="image"),this.type=this.options.type,this.style=this.options.style,this.className=this.options.className,this.imageStyle=this.options.imageStyle,this.imageClassName=this.options.imageClass,this.inputStyle=this.options.inputStyle,this.inputClassName=this.options.inputClass,this.imagewidth=this.options.imagewidth,this.imageheight=this.options.imageheight,this.empty=this.options.empty,this.inputClassName=this.options.inputClass,this.options.action?this.action=this.options.action:this.action=WebSquare.baseServletURI+"upload.wq?callbackFunction="+this.id+".callback",t&&(this.xmlEvents=WebSquare.Parser.parseEvent(t)),this.disabled=this.options.disabled,this._targetFrameId=""}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{
var t=[],e=""==this.options.title?"":"title='"+this.options.title.wq_replaceAll("'","&#39;")+"'",i=this.options.style,o=this.options.tabIndex?"tabIndex='"+this.options.tabIndex+"'":"";""!=i&&(i.indexOf("position")<0?i="position:relative;"+i:i.indexOf("position:static")>0&&(i=i.replace("position:static","position:relative"))),i=""==i?"":"style='"+i+"'";var s=""==this.action?"":"action='"+this.action+"'",a=""==this.inputStyle?"":"style='"+this.inputStyle+"'",n="style='"+(""==this.imagewidth?"":"width:"+this.imagewidth+"px;")+(""==this.imageheight?"":"height:"+this.imagewidth+"px;")+this.imageStyle+"'",l=""==this.options.accept?"":"accept='"+this.options.accept+"'";return t.push("<div id='"+this.id+"' "+i+" class='w2upload "+this.options.className+"' "+o+">"),t.push("<form id='"+this.id+"_form' "+s+" enctype='multipart/form-data' name='form1_upload1' method='post' target='__targetFrame__"+this.id+"'><fieldset>"),"image"==this.options.type?(t.push("<input  name='tempFlie' readonly='readonly' id='"+this.id+"_inputFile' class='w2upload_input "+this.options.inputClass+"' "+a+" type='text'/>"),t.push("<span id='"+this.id+"_span' class='w2upload_image "+this.options.imageClass+"' "+n+">"),t.push("<input  class='w2upload_fakeInput' style='margin: 0pt; padding: 0pt; width: "+this.imagewidth+"px; height:"+this.imageheight+"px; opacity: 0.01; filter : alpha(opacity=1);' name='upload' id='"+this.id+"_fakeinput' type='file' "+e+l+"/>"),t.push("</span>")):t.push("<INPUT  id='"+this.id+"_inputFile' name='upload' type='file' _objId='2' class='w2upload_input_type' "+a+" "+e+l+"/>"),t.push("</fieldset><input type='submit' class='w2upload_submit'/></form>"),t.push("</div>"),t.join("")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{if(this.dom.input=document.getElementById(this.id+"_inputFile"),this.dom.span=document.getElementById(this.id+"_span"),this.dom.form=document.getElementById(this.id+"_form"),this.dom.fakeinput=document.getElementById(this.id+"_fakeinput"),this.styleObj={paddingTop:parseInt(n.D.getStyleProperty(this.dom.input,"padding-top"))||0,paddingBottom:parseInt(n.D.getStyleProperty(this.dom.input,"padding-bottom"))||0,paddingLeft:parseInt(n.D.getStyleProperty(this.dom.input,"padding-left"))||0,paddingRight:parseInt(n.D.getStyleProperty(this.dom.input,"padding-right"))||0,borderTopWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-top-width"))||0,borderBottomWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-bottom-width"))||0,borderLeftWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-left-width"))||0,borderRightWidth:parseInt(n.D.getStyleProperty(this.dom.input,"border-right-width"))||0,height:parseInt(n.D.getStyleProperty(this.dom.input,"height"))||0},"image"==this.options.type){var t=this.dom.span.offsetWidth||parseInt(n.D.getStyleProperty(this.dom.span,"width"))+WebSquare.style.getSize(this.dom.span,"outerMarginWidth");if(!this.dom.input.style.width&&this.render.style.width){var e=parseInt(this.render.style.width)-parseInt(t)-(this.styleObj.borderLeftWidth+this.styleObj.borderRightWidth+this.styleObj.paddingLeft+this.styleObj.paddingRight);this.dom.input.style.width=e-this.empty+6+"px"}if(!this.dom.input.style.height&&0==this.styleObj.height){var i=parseInt(this.render.style.height)-(this.styleObj.borderBottomWidth+this.styleObj.borderTopWidth+this.styleObj.paddingBottom+this.styleObj.paddingTop);this.dom.input.style.height=i+"px"}this.dom.fakeinput.style.width=0==t?t+100+"px":t+"px"}var o=document.createElement("div"),s=this.id+"__targetFrame";o.style.width="0",o.style.height="0",o.style.visibility="hidden",o.setAttribute("id",s),this._targetFrameId=s,"body"==this.options.targetFrame?document.body.appendChild(o):"self"==this.options.targetFrame&&this.render.appendChild(o);var l=WebSquare.net.getSSLBlankPage(),h=WebSquare.language.getMessage("Upload_msg1")||"파일 업로드를 위한 임시 프레임"
;if(o.innerHTML="<iframe frameborder='0' name='__targetFrame__"+this.id+"' scrolling='no' style='width:0; height:0' "+l+" title='"+h+"'></iframe>","image"==this.options.type&&null!=this.dom.fakeinput){var d=this;this.dom.fakeinput.onchange=function(){d.dom.input.value=d.dom.fakeinput.value,a.B.fireEvent(d,"onInputValueChange",d.dom.input.value)},this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent))}else{d=this;this.dom.input.onchange=function(){a.B.fireEvent(d,"onInputValueChange",d.dom.input.value)}}this.options.subDir&&this.addParam("subDir",this.options.subDir),this.options.subSize&&this.addParam("subSize",this.options.subSize),this.event.addListener(this.dom.form,"onsubmit",this.event.bindAsEventListener(this,this.onSubmitForm))}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.onSubmitForm=function(t){try{a.B.stopEvent(t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.onInputValueChange=function(t){try{"image"==this.options.type&&null!=this.dom.fakeinput&&(this.dom.input.value=this.dom.fakeinput.value),a.B.fireEvent(this,"onInputValueChange",this.dom.input.value)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOverEvent=function(t){try{a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2upload_image")){this.addClass(this.dom.span,"w2upload_image_over");break}e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOutEvent=function(t){try{a.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2upload_image")){this.removeClass(this.dom.span,"w2upload_image_over");break}e=null}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setCallback=function(t){try{"function"==typeof t&&(this.callbackFunction=t)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.isEmpty=function(){try{var t=this.getValue();return void 0===t||""==t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getByte=function(){try{var t=WebSquare.language.getMessage("Upload_warning1")||"보안상의 문제로 사용할 수 없는 기능입니다.";alert(t);var e=document.getElementById(this.id+"_inputFile");if(e)return new ActiveXObject("Scripting.FileSystemObject").GetFile(e.value).size;$l("input form is not exist")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getValue=function(){try{var t=document.getElementById(this.id+"_inputFile");if(t)return t.value;$l("input form is not exist")}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.reset=function(){try{this.dom.form.reset(),"image"==this.options.type?(this.dom.fakeinput.value="",this.dom.input.value=""):this.dom.input.value="";for(var t=this.dom.form.getElementsByTagName("input"),e=0;e<t.length;e++)"hidden"==t[e].type&&t[e].removeAttribute("value");if(this.options.subDir)for(var i=this.dom.form.firstChild;i;){if("subDir"==i.id){i.value=this.options.subDir;break}i=i.nextSibling}if(this.options.subSize)for(var o=this.dom.form.firstChild;o;){if("subSize"==o.id)return void(o.value=this.options.subSize);o=i.nextSibling}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setSubDir=function(t){try{if(this.options.subDir)for(var e=this.dom.form.firstChild;e;){if("subDir"==e.id)return void(e.value=t);e=e.nextSibling}else this.addParam("subDir",t);this.options.subDir=t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getSubDir=function(){try{for(var t="",e=this.dom.form.firstChild;e;){if("subDir"==e.id){t=e.value;break}e=e.nextSibling}return t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.submit=function(){try{if(WebSquare.domain){var t=this.dom.form.action;t.indexOf("?")>-1?t+="&":t+="?",t+="domain="+WebSquare.text.URLEncoder(WebSquare.domain),this.dom.form.action=t}if(WebSquare.hybridApp||1==this.options.useXHR&&"undefined"!=typeof FormData){var e=document.getElementById(this.dom.input.id)
;null==e.files&&(e=this.dom.fakeinput);var i=e.files[0],o=new FormData;o.append("upload",i);for(var a=this.dom.form.getElementsByTagName("input"),l=0;l<a.length;l++)"hidden"==a[l].type&&o.append(a[l].id,a[l].value);var h=new XMLHttpRequest,d=this.uuid;h.onreadystatechange=function(){if(4==h.readyState&&200==h.status){var t=WebSquare.idCache[d],e=h.responseText;t.callback(e.substring(e.indexOf("<ret>"),e.indexOf("</ret>")+6))}},h.open("POST",this.dom.form.action,!0);var u=encodeURIComponent(i.name);h.setRequestHeader("X-File-Name",u);var c=s.v.getConfiguration("/WebSquare/handler/requestHeaderFunction/@value");if(""!=c){var p=n.D.getGlobalFunction(c);p&&p(h,"upload")}h.send(o)}else this.dom.form.submit()}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getFileInputObject=function(){try{return this.dom.input}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setFAction=function(t){try{this.dom.form.action=t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.changeFormAction=function(t){try{this.dom.form.action=t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.addParam=function(t,e){try{for(var i=!1,o=this.dom.form.firstChild;o;){if(o.id==t){i=!0;break}o=o.nextSibling}if(i)this.dom.form[t].value=e;else{var s=document.createElement("input");s.type="hidden",s.value=e,s.id=t,s.name=t,this.dom.form.appendChild(s)}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getDefaultStyle=function(){try{return" border:0px solid blue "}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.callback=function(t){try{this.callbackFunction?this.callbackFunction.apply(this,new Array(WebSquare.xml.parse(t))):a.B.fireEvent(this,"ondone",WebSquare.xml.parse(t))}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getActionUrl=function(){try{return this.options.action?this.options.action:this.action}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getAccessibiltyId=function(){try{return"image"==this.options.type?this.id+"_fakeinput":this.id+"_inputFile"}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":e?this.addClass(this.render,"w2upload_disabled"):this.removeClass(this.render,"w2upload_disabled")}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setDisabled=function(t){try{var e;t=n.D.getBoolean(t);var i=this.render.getElementsByTagName("fieldset")[0];e="image"==this.options.type?document.getElementById(this.id+"_fakeinput"):document.getElementById(this.id+"_inputFile"),t?(e.setAttribute("disabled","disabled"),i.setAttribute("disabled","disabled")):(e.removeAttribute("disabled"),i.removeAttribute("disabled")),l.s.prototype.setDisabled.call(this,t)}catch(t){r.w.printStackTrace(t)}return t},h.prototype.finalize=function(){try{l.s.prototype.finalize.call(this),s.v.setTimer((function(t){if(t){var e=document.getElementById(t);e&&e.parentNode&&(e.parentNode.removeChild(e),e=null)}}),{key:this.id+"_removeTargetFrame",delay:6e4,args:[this._targetFrameId]})}catch(t){r.w.printStackTrace(t)}}},7632:function(t,e,i){"use strict";i.r(e),i.d(e,{wframe:function(){return g}});var o=i(484),s=i(2137),r=i(7757),a=i.n(r),n=i(1974),l=i(5052),h=i(5948),d=i(1454),u=i(8683),c=i(9075),p=i(1),g=function(t,e,i){p.s.call(this,t,e,i)};n.x.extend(g.prototype,p.s.prototype),g.prototype.defaultOptions={pluginType:"uiplugin.wframe",pluginName:"wframe",userEvents:["onload","onwframeload","onwframeunload"],useConfig:!0,src:"",tagname:"div",mode:"async",scope:!1,initScript:"",postScript:"",scopeVariable:"",cloneVariable:"",scopeFunction:"$w",scopeExternal:!1,scopeValue:"",isWidget:!1,params:"",popupParam:"",initStyle:!1,preload:!1,strictFrame:!1,processMsgFrame:!1,frameModal:!1,udc2Name:"",popupAutoClose:!1,msaName:""},g.prototype.initialize=function(t){this.options.mode="async",this.createFlag=!1,(t&&"w2:wframe"===t.getTagName()||!0===this.options.preload)&&(this.createFlag=!0),this.frameDoc=null,this.wframeScript=[],this.lazyImportsArr=[],this.childAllControlList=[],
this.userComponentList=[],this.userPluginList=[],this.scope={},this.scopeLazyList=[],this.scopeVariable={},"true"===this.options.initScript&&"true"===l.v.getConfiguration("/WebSquare/wframe/initScript/@value")&&(this.options.initScript=l.v.getConfigurationJSON("/WebSquare/wframe/initScript",{type:"json"}),this.options.initScript["#cdata"]&&(this.options.initScript=this.options.initScript["#cdata"],"function"==typeof this.options.initScript&&(this.options.initScript="("+this.options.initScript.toString()+")()"))),"true"===this.options.postScript&&"true"===l.v.getConfiguration("/WebSquare/wframe/postScript/@value")&&(this.options.postScript=l.v.getConfigurationJSON("/WebSquare/wframe/postScript",{type:"json"}),this.options.postScript["#cdata"]&&(this.options.postScript=this.options.postScript["#cdata"],"function"==typeof this.options.postScript&&(this.options.postScript="("+this.options.postScript.toString()+")()"))),this.options.scope&&(""==this.options.scopeVariable&&(this.options.scopeVariable=l.v.getConfiguration("/WebSquare/spa/variable/@value")||""),""==this.options.cloneVariable&&(this.options.cloneVariable=l.v.getConfiguration("/WebSquare/spa/variable/@clone")||""),this.options.initScript&&(this.options.initScript=u.D.scopingFuncBody(this.options.initScript,this.id,!0)),this.options.postScript&&(this.options.postScript=u.D.scopingFuncBody(this.options.postScript,this.id,!0))),this.makeScopeVariable(),this.options.params&&this.parseParameter(),this.options.dataObject&&this.setDataObject(this.options.dataObject),this._isWframePopup=!1,this._scriptLazy=!1,this._clearExecuteStatus(),this._processMsgComp=null,this._processMsgModal=null,this._processMsgQueue=[],this._wframePopupModal=null,this._wframeModelStack=[],this._processMsgAjaxCnt=0,this.udc2Parent=null,this._isUDC2=!1,this._bSkipAsync=!1},g.prototype.toHTML=function(){try{var t={footer:"div",header:"div",nav:"div",section:"div"},e=[],i=this.options.tagname,o=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";if(l.v.browserCheck.ie){var r=l.v.browserVersion();"6"!=r&&"7"!=r&&"8"!=r||t[i]&&(i=t[i])}if(e.push("<"+i+" id='"+this.id+"' "+o+" class='w2wframe "+this.options.className+"' "+s+">"),this.createFlag)for(var a=this.getChildren(),n=0;n<a.length;n++)e.push(a[n].toHTML());return e.push("</"+i+">"),e.join("")}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.setChildAction=function(t){try{var e=this.childControlList[0];if(!e)return;!0!==(t&&!0===t.skipPreActivate)&&"stop"===e.activeStatus&&e.preActivate();var i=[];for(var o in WebSquare.DataCollection.activated=!0,WebSquare.DataCollection.comp){var s=WebSquare.DataCollection.comp[o];s&&s.parentFrame===this.uuid&&(s.activate(),i.push(s.uuid))}WebSquare.uiplugin.wframe._increasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePreorder(this.uuid),e.activate(),WebSquare.uiplugin.wframe._decreasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePostorder(this.uuid),e.render=null,e.onComplete();for(var r=0;r<i.length;r++)WebSquare.idCache[i[r]].completed||WebSquare.idCache[i[r]].onComplete();var a=this.getSrc(),n=!0===this._scriptLazy&&!0!==l.v.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;if("executed"===WebSquare.scriptSectionExcuteFlag||n){if(!0===l.v.scriptPrecedence)WebSquare.uiplugin.wframe._execute("script"),WebSquare.uiplugin.wframe._execute("onpageload"),WebSquare.uiplugin.wframe._execute("postscript",{order:"postorder"}),WebSquare.uiplugin.wframe._execute("onwframeload");else{var u=t&&!0===t.preExecuted,c=!0===this._scriptLazy&&this.parentControl&&this.parentControl.parentControl&&this.parentControl.parentControl.options&&"wframe"===this.parentControl.parentControl.options.pluginName,p={order:"postorder",reverse:!0};if(n&&(p.preExecuted=!0),c||!0===this.options.preload||!0===u)WebSquare.uiplugin.wframe._execute("script",p),WebSquare.uiplugin.wframe._execute("onpageload",{order:"postorder"});else{
if(this.frameDoc&&"string"==typeof this.frameDoc.scriptSection&&this.frameDoc.scriptSection){var g=WebSquare.scriptIdentifier+this.getURL(this.getSrc())+'";';g+=this.frameDoc.scriptSection,WebSquare.BootLoader.globalEval(g),this.frameDoc.scriptSection=""}for(r=0;r<this.childControlList.length;r++)d.B.fireEvent(this.childControlList[r],"onpageload",a);this._executeStatus.onpageload=!0}}WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending()}else if(!0!==l.v.scriptPrecedence){var m=t&&!0===t.preExecuted&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;m&&WebSquare.uiplugin.wframe._execute("script",{order:"postorder",reverse:!0,preExecuted:!0});for(r=0;r<this.childControlList.length;r++)d.B.fireEvent(this.childControlList[r],"onpageload",a);m&&(WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending())}d.B.fireEvent(e,"onwframeload",a),d.B.fireEvent(e,"oncreated",e.options),d.B.fireEvent(this,"onload",a),!0!==l.v.scriptPrecedence&&d.B.fireEvent(this,"onwframeload",a)}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.setAction=function(){try{if(this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.options.isWidget)return;if(this.createFlag){if(("preExecuted"===WebSquare.scriptSectionExcuteFlag||"executed"===WebSquare.scriptSectionExcuteFlag)&&WebSquare.externalScriptArr&&WebSquare.externalScriptArr.length>0){for(var i=0;i<WebSquare.externalScriptArr.length;i++)WebSquare.BootLoader.globalEval(l.v.load(WebSquare.externalScriptArr[i]));WebSquare.externalScriptArr=[]}this.setChildAction()}else{var o;this._dataObject&&(o={dataObject:this._dataObject}),this.setSrc(this.options.src,o)}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.setSrc=function(){var t=(0,s.Z)(a().mark((function t(e,i){var s,r,n,c,p,g;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=i||{},s=this.getSrc(),e&&""!=e){t.next=6;break}return t.abrupt("return",!1);case 6:return this.options.src=e,e=this.getSrc(),this._bSkipAsync=!0,t.next=11,WebSquare.jsLoader._loadObj(this.getURL(e,i),{msaName:this._getMsaName()});case 11:if(!(r=t.sent)){t.next=36;break}for(n=0;n<this.childControlList.length;n++)d.B.fireEvent(this.childControlList[n],"onwframeunload",s);return u.D.emptySelection(),i.removeAll&&(i.appendModel="replace"),"replace"==i.appendModel?this.removeFrame_old():((""==s||!s||s===e&&!0===i.reload)&&(i.reload=!1,c={keepDataObject:!0}),this.finalize(s,c)),"object"===(0,o.Z)(i.dataObject)&&this.setDataObject(i.dataObject),this.makeScopeVariable(),p=WebSquare.jsLoader.getPageType(e),this.frameDoc=WebSquare.jsLoader.getPageInfo(r,p),this.frameDoc.renderStartTime=new Date,this.makeParameter(),t.next=25,this.frameDoc.parsingWFrame(!0,this);case 25:return null==i.appendModel&&(this.options.scope?i.appendModel="scope":i.appendModel=!0),this.appendModels(this.frameDoc.models,null,i),g=WebSquare.uiplugin.wframe._clearPending({keepStatus:!0}),t.next=30,this.renderBody(!0);case 30:return"executed"===WebSquare.scriptSectionExcuteFlag||!0!==l.v.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag||(g.pendingWframePreOrderList=g.pendingWframePreOrderList.concat(WebSquare.uiplugin.wframe.__pendingWframePreOrderList),g.pendingWframePostOrderList=WebSquare.uiplugin.wframe.__pendingWframePostOrderList.concat(g.pendingWframePostOrderList)),WebSquare.uiplugin.wframe._setPending(g),t.abrupt("return",!0);case 36:return t.abrupt("return",!1);case 37:t.next=43;break;case 39:return t.prev=39,t.t0=t.catch(1),h.w.printStackTrace(t.t0,null,this),t.abrupt("return",!1);case 43:case"end":return t.stop()}}),t,this,[[1,39]])})));return function(e,i){return t.apply(this,arguments)}}(),g.prototype.msaLoad=function(){var t=(0,s.Z)(a().mark((function t(e,i,o,s){var r
;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,r=this._getMsaSrc(i),o.skipFullUrl=!0,t.next=6,this.setSrc(r,o);case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(1),h.w.printStackTrace(t.t0,null,this),t.abrupt("return",!1);case 13:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),g.prototype.makeFrame=function(){var t=(0,s.Z)(a().mark((function t(e,i){var o,s,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,!i||null==l.v.udcObj[i]){t.next=6;break}o=l.v.udcObj[i],t.next=11;break;case 6:if(!(s=this.getSrc())){t.next=11;break}return t.next=10,WebSquare.jsLoader._loadObj(this.getURL(s),{msaName:this._getMsaName()});case 10:o=t.sent;case 11:if(!o){t.next=21;break}return s&&(r=WebSquare.jsLoader.getPageType(s)),this.frameDoc=WebSquare.jsLoader.getPageInfo(o,r),this.frameDoc.renderStartTime=new Date,this.makeParameter(),t.next=18,this.frameDoc.parsingWFrame(!0,this);case 18:return this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),t.next=21,this.renderBody(e);case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(1),h.w.printStackTrace(t.t0,null,this);case 26:case"end":return t.stop()}}),t,this,[[1,23]])})));return function(e,i){return t.apply(this,arguments)}}(),g.prototype.initAsync=(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0===this._bSkipAsync){t.next=4;break}return t.next=3,this.makeFrame();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),g.prototype.makeFrameUDC2=function(){var t=(0,s.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,this.udc2Parent=e,t.next=5,this.makeFrame(null,this.options.udc2Name);case 5:this._udc2Mapping(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),h.w.printStackTrace(t.t0,null,this);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),g.prototype.makeFrameSync=function(t,e){try{var i,o;if(e&&null!=l.v.udcObj[e])i=l.v.udcObj[e];else{var s=this.getSrc();s&&(i=WebSquare.jsLoader._loadObj(this.getURL(s),{msaName:this._getMsaName()}))}if(i)s&&(o=WebSquare.jsLoader.getPageType(s)),this.frameDoc=WebSquare.jsLoader.getPageInfo(i,o),this.frameDoc.renderStartTime=new Date,this.makeParameter(),this.frameDoc.parsingWFrame(!0,this),this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),this.renderBody(t)}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.makeFrameUDC2Sync=function(t){try{this.udc2Parent=t,this.makeFrameSync(null,this.options.udc2Name),this._udc2Mapping()}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.getSrc=function(){try{return this._getMsaSrc()}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._getMsaSrc=function(t){try{var e=this.options.src;return""==e?"":l.v.getPageURL(e,{skipURL:!0,skipUri:!0,msaName:t||this._getMsaName()})}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._getMsaName=function(){try{if(this.options.msaName)return this.options.msaName;if(this.scope_obj)return this.scope_obj._getMsaName()}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.appendModels=function(t,e,i){try{if("replace"==(i=i||{}).appendModel)return void this.replaceModels(t);if("scope"==i.appendModel)return void this.scopeModels(t,e,i);var o=WebSquare.ModelUtil.getModelByID(e);if(o)for(var s=0;s<t.length;s++){if(i.appendModel)for(var r=o.instances[0].document,a=t[s].instances[0].document.childNodes,n=0;n<a.length;n++)r.appendChild(a[n].cloneNode(!0));o.binds=o.binds.concat(t[s].binds);for(var l=0;l<t[s].submissions.length;l++){var d=t[s].submissions[l];d.parentElement=o.element,o.submissions.push(d)}for(var u=0;u<t[s].workflows.length;u++){var c=t[s].workflows[u];c.parentElement=o.element,o.workflows.push(c)}}}catch(t){h.w.printStackTrace(t,null,this)}},
g.prototype.replaceModels=function(t){try{WebSquare.WebSquaredoc.models.splice(0,WebSquare.WebSquaredoc.models.length),WebSquare.WebSquaredoc.models=WebSquare.WebSquaredoc.models.concat(t)}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.scopeModels=function(t,e,i){try{var o=WebSquare.ModelUtil.getModelByID(e);if(o&&"scope"==i.appendModel)for(var s=0;s<t.length;s++){for(var r=o.instances[0].xmlNode.parentNode,a=t[s].instances,n=0,l=a.length;n<l;n++){for(var d=a[n].xmlNode.cloneNode(!0),u=d.firstChild;null!=u&&1!=u.nodeType;u=u.nextSibling);var c=new WebSquare.Model.Instance(d,u,null);c.scope_id=this.id;var p=c.xmlNode;p.setAttribute("scopeId",this.id),o.instances.push(c),r.appendChild(p)}o.binds=o.binds.concat(t[s].binds);for(var g=0;g<t[s].submissions.length;g++){var m=t[s].submissions[g];m.parentElement=o.element,o.submissions.push(m)}for(var f=0;f<t[s].workflows.length;f++){var b=t[s].workflows[f];b.parentElement=o.element,o.workflows.push(b)}}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.remove=function(){try{if(this.options.strictFrame){for(var t in window[this.id]&&(window[this.id]=null),this)delete this[t];return}for(var e in this.finalize(),this.activeStatus="finalize",null!=this.render&&WebSquare.removeNode(this.render),this.parentControl&&this.parentControl.removeControl(this),WebSquare.getBody().childControlList)WebSquare.getBody().childControlList[e]==this&&WebSquare.getBody().childControlList.splice(e,1);this.destroy(),u.D.emptySelection()}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.finalize=function(t,e){try{var i=new Date;if(!0!==l.v.scriptPrecedence)for(var o=0;o<this.childControlList.length;o++)d.B.fireEvent(this.childControlList[o],"onpageunload");if(this.popupList){o=0;for(var s=this.popupList.length;o<s;o++){var r=this.popupList[o];if(r){var a=WebSquare.getBody();if(this._parentFrameUUID)a=WebSquare.idCache[this._parentFrameUUID];var n=r.id;if(null!=a.stackComponents)for(var p in a.stackComponents){var g=a.stackComponents[p];if(n)for(var m=a.stackComponents[p].length-1;m>=0;m--)if(g[m].id===n){g.splice(m,1),a.modalStack.pop();break}}a.modalStack.pop(),r.close(),WebSquare.uiplugin.popup.removeFromPopupList(n)}}}null!=this._processMsgComp&&(this._processMsgComp.remove(),this._processMsgComp=null),null!=this._processMsgModal&&(this._processMsgModal.remove(),this._processMsgModal=null),null!=this._wframePopupModal&&(this._wframePopupModal.remove(),this._wframePopupModal=null);for(var f=[];this.childAllControlList.length>0;){var b;if(b=!0===l.v.scriptPrecedence?this.childAllControlList.shift():this.childAllControlList.pop(),(I=WebSquare.idCache[b])&&(!0!==I._isWframePopup||!0===this.options.popupAutoClose||this.options.frameModal))if(null==WebSquare.DataCollection.comp[I.id]){WebSquare.isPrintLog=!1,"function"==typeof I.finalize&&I.finalize(),WebSquare.isPrintLog=!0,"function"==typeof I.unbind&&I.unbind(),I.event&&I.event.clearCache(),I.modelControl&&(I.modelControl.unbindRef(),I.modelControl.unbindItemset()),WebSquare.getBody().getLayerListener().remove(I.id),I.childControlList=[];if(I.options){for(var y={secret:"input",selectbox:"select1",radio:"select1",multiselect:"select",checkbox:"select",checkcombobox:"select",switch:"Switch"}[I.options.pluginName]||I.options.pluginName,v=WebSquare.componentsCache[y]||WebSquare.componentsCache[I._wTagName]||[],w=v.length-1;w>=0;w--)v[w]===I.uuid&&v.splice(w,1);l.v.memoryLeakComponent[y]&&(l.v.memoryLeakComponentCount+=l.v.memoryLeakComponent[y])}if(window[WebSquare.noConflict].comp[I.id]=null,delete window[WebSquare.noConflict].comp[I.id],window[WebSquare.noConflict].data[I.id]=null,delete window[WebSquare.noConflict].data[I.id],window[I.id]&&(window[I.id]=null),null!=I.render){if(I._closed&&I.frame&&I._isWframePopup){var S=I.frame.paramObj.popupID;S&&WebSquare.uiplugin.popup.removeFromPopupList(S);var C=I._targetFrameObjUUID,x=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";if(I.options.frameModal&&C&&C!==x){
var _=WebSquare.idCache[C];_&&_.hideFrameModal(S)}}WebSquare.removeNode(I.render)}for(var p in WebSquare.idToUUID[I.id]=null,delete WebSquare.idToUUID[I.id],I)try{"function"==typeof I[p]?I[p]=function(){}:delete I[p]}catch(t){delete I[p]}I._removed=!0,I=null,WebSquare.idCache[b]=null,delete WebSquare.idCache[b]}else f.push(b)}for(o=f.length-1;o>=0;o--){var I;null!=(I=WebSquare.idCache[f[o]])&&WebSquare.DataCollection.api.remove(I.id,{uuid:I.uuid})}this.childAllControlList=[];for(o=0;o<this.childControlList.length;o++){var T=this.childControlList[o];for(!0===l.v.scriptPrecedence&&d.B.fireEvent(T,"onpageunload");T.childControlList&&T.childControlList.length>0;){var k=T.childControlList.pop();null!=k.uuid&&k.remove()}T.render=null,T.remove()}for(var D in this.childControlList=[],this.scopeVariable)if(null!=window[this.id+"_"+D]){for(var p in window[this.id+"_"+D])delete window[this.id+"_"+D][p];window[this.id+"_"+D]=null,!u.D.isIE()||parseInt(l.v.browserVersion(),10)>8?delete window[this.id+"_"+D]:window[this.id+"_"+D]=null}this.scope={},this.scopeVariable={},this.scopeLazyList=[];for(o=0;o<this.userComponentList.length;o++)u.D.loadedUserComponent[this.userComponentList[o]]=null,delete u.D.loadedUserComponent[this.userComponentList[o]];this.userComponentList=[];for(o=0;o<this.userPluginList.length;o++)u.D.loadedUserComponentPluginName[this.userPluginList[o]]=null,delete u.D.loadedUserComponentPluginName[this.userPluginList[o]];this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(e);var L=new Date;c.k.printLog("Wframe unloading["+this.id+"]. Time:"+(L-i)+"ms"),null==t?d.B.fireEvent(this,"onwframeunload",this.getSrc()):""!=t&&d.B.fireEvent(this,"onwframeunload",t),WebSquare.uiplugin.dateHelper&&null!=WebSquare.uiplugin.dateHelper._currentDate&&delete WebSquare.uiplugin.dateHelper._currentDate[this.id],this.wframeSubPopup&&(this.wframeSubPopup=[]),this.stackComponents={},this.modalStack=[]}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.removeFrame=function(){try{this.finalize()}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.removeFrame_old=function(){try{c.k.printLog("Wframe unloading start.["+this.id+"]");for(var t=0;t<this.childControlList.length;t++)d.B.fireEvent(this.childControlList[t],"onpageunload");WebSquare.DataCollection.stopBroadCast=!0,WebSquare.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50};var e=WebSquare.getBody();for(var i in WebSquare.idCache){var o=WebSquare.idCache[i];o!==e&&o!==this&&("function"!=typeof o.remove||o.remove==p.s.prototype.remove||o.options&&("wframe"==o.options.pluginName||"pageInherit"==o.options.pluginName)?(WebSquare.isPrintLog=!1,"function"==typeof o.finalize&&o.finalize(),WebSquare.isPrintLog=!0,"function"==typeof o.unbind&&o.unbind(),o.event&&o.event.clearCache(),WebSquare.useVisibleHelper&&o.render&&o.render.parentNode&&o!=WebSquare.body&&o.render.parentNode.removeChild(o.render),o.childControlList=[],window[o.id]&&(window[o.id]=null)):o.remove())}e.getLayerListener().removeAll(),WebSquare.idCache={},WebSquare.idCache[e.uuid]=e,WebSquare.idCache[this.uuid]=this,window[WebSquare.noConflict].comp={},window[WebSquare.noConflict].comp[this.id]=this,WebSquare.idToUUID={},WebSquare.idToUUID[e.id]=e.uuid,WebSquare.idToUUID[this.id]=this.uuid,WebSquare.WebSquaredoc.itemsetElement=[],WebSquare.WebSquaredoc.refElement=[],WebSquare.componentsCache={},WebSquare.componentsCache[e.options.pluginName]=[e.uuid],WebSquare.componentsCache[this.options.pluginName]=[this.uuid],this.childAllControlList=[],this.childControlList=[],this.scope={},this.scopeVariable={},this.userComponentList=[],this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(),l.v.clearCommon(),WebSquare&&WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.remove(),WebSquare.strictModeFrame=null),c.k.printLog("Wframe unloading finished.["+this.id+"]")}catch(t){h.w.printStackTrace(t,null,this)}},
g.prototype.removeCommon=function(t){try{if(void 0!==t&&null!=t||(t={}),this.wframeScript=[],null!=this.frameDoc){for(var e=document.getElementsByTagName("head")[0],i=0;i<this.frameDoc.cssList.length;i++){var o=this.frameDoc.cssList[i]&&this.frameDoc.cssList[i].href&&this.frameDoc.cssList[i].href.toString();for(var s in o=o||"",WebSquare.skin.skinTag)if(u.D._getAbsolutePath(o)==WebSquare.skin.skinTag[s]){WebSquare.skin.skinTag.splice(s,1);break}e.removeChild(this.frameDoc.cssList[i]),this.frameDoc.cssList[i]=null}e=null;var r=this.frameDoc.models[0].submissions,a=WebSquare.WebSquaredoc.models[0].submissions;for(i=0;i<r.length;i++){for(var n=0;n<WebSquare.layer.submissionIDQueue.length;n++)WebSquare.layer.submissionIDQueue[n]==r[i].id&&(WebSquare.layer.submissionIDQueue.splice(n,1),WebSquare.layer.submissionMessageQueue.splice(n,1));for(var d=0;d<a.length;d++)if(r[i].id===a[d].id&&r[i].ref===a[d].ref){a[d].dead=!0,l.v.useSubmissionGlobal&&(window[a[d].id]=null),a[d].parentElement=null,a.splice(d,1);break}}var c=this.frameDoc.models[0].workflows;for(a=WebSquare.WebSquaredoc.models[0].workflows,i=0;i<c.length;i++)for(d=0;d<a.length;d++)if(c[i].id===a[d].id&&c[i].ref===a[d].ref){a[d].promiseStatus="REJECT",l.v.useWorkflowGlobal&&(window[a[d].id]=null),a[d].parentElement=null,a.splice(d,1);break}for(var p in this.frameDoc)this.frameDoc[p]=null,delete this.frameDoc[p]}!0!==t.keepDataObject&&this._removeDataObject(),this.frameDoc=null}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":for(var i=0;i<this.childControlList.length;i++){var o={componentId:this.childControlList[i].id,disabled:e};u.D.setDisabled(o)}}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.onComplete=function(){try{if(null!=this.frame_dc_list){for(var t=0;t<this.frame_dc_list.length;t++)WebSquare.idCache[this.frame_dc_list[t]].completed||WebSquare.idCache[this.frame_dc_list[t]].onComplete();delete this.frame_dc_list}p.s.prototype.onComplete.call(this)}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.getObj=function(t){try{return this.scope[t]}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.getObjList=function(){try{var t=[];for(var e in this.scope)t.push(e);return t}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.getWindow=function(){try{return this.options.scope?this.scope:window}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.makeScopeVariable=function(){try{var t=0;if(this.options.scope&&this.options.scopeVariable)for(var e=this.options.scopeVariable.split(","),i=0;i<e.length;i++){var o=e[i].wq_trim(),s=t>0?String(t):"";t++,this._makeScopeVariable(o,WebSquare.noConflictFunction+s)}if(this.options.scope&&this.options.cloneVariable)for(e=this.options.cloneVariable.split(","),i=0;i<e.length;i++){var r=e[i].wq_trim();s=t>0?String(t):"";t++,this._makeScopeVariable(r,WebSquare.noConflictFunction+s,!0)}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._makeScopeVariable=function(t,e,i){try{if(this.scopeVariable[t]={},i&&"object"===(0,o.Z)(window[t])&&null!=window[t]){({})[WebSquare.noConflict]=!0,this.scopeVariable[t]=l.v._copyCommon(t,this)}if(this.scope[t]=this.scopeVariable[t],window[this.id+"_"+t]=this.scopeVariable[t],this.options.scopeFunction){this.scopeVariable[t][this.options.scopeFunction]=new WebSquare.uiplugin.wframe.scope(this.uuid);var s=this.scopeVariable[t][this.options.scopeFunction];for(var r in WebSquare.api)"data"!==r&&"comp"!==r&&null==s[r]&&(s[r]=WebSquare.api[r]);for(var a in s.data=new WebSquare.uiplugin.wframe.scope.data(this.id),s.model=new WebSquare.uiplugin.wframe.scope.model(this.id),s.bigDecimal=new WebSquare.uiplugin.wframe.scope.bigDecimal(this.id),s.bigDecimal._scopeId=this.id,s.id=this.id+"_",WebSquare.api.data)null==s.data[a]&&"function"==typeof WebSquare.api.data&&(s.data[a]=WebSquare.api.data[a])
;this.options.scopeFunction!==WebSquare.noConflict&&null!=window[t]&&null==window[t][this.options.scopeFunction]&&n.x.extend(window[t][this.options.scopeFunction],WebSquare.api),e&&(this.scope[e]=this.scopeVariable[t][this.options.scopeFunction])}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.makeLazyScopeVariable=function(){try{if(this.options.scope&&this.options.scopeVariable){var t=this.options.scopeVariable;this.options.cloneVariable&&(t+=","+this.options.cloneVariable);for(var e=t.split(","),i=0;i<e.length;i++)for(var o=e[i].wq_trim(),s=i>0?String(i):"",r=WebSquare.noConflictFunction+s,a=0;a<this.scopeLazyList.length;a++)WebSquare.idCache[this.scopeLazyList[a]].scope[o]=this.scopeVariable[o],WebSquare.idCache[this.scopeLazyList[a]].scope[r]=this.scopeVariable[o][this.options.scopeFunction]}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._addScopeVariable=function(t){try{if(this.options.scope&&this.options.scopeVariable){var e=this.options.scopeVariable;this.options.cloneVariable&&(e+=","+this.options.cloneVariable);for(var i=e.split(","),o=0;o<i.length;o++){var s=i[o].wq_trim(),r=o>0?String(o):"",a=WebSquare.noConflictFunction+r;WebSquare.idCache[t].scope[s]=this.scopeVariable[s],WebSquare.idCache[t].scope[a]=this.scopeVariable[s][this.options.scopeFunction]}}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._udc2Mapping=function(){try{var t=this.udc2Parent;if(!t)return;var e={};for(var i in t._reservedName)for(var o=0;o<t._reservedName[i].length;o++)e[t._reservedName[i][o]]=!0;var s=this.options.cloneVariable.split(","),r={};for(o=0;o<s.length;o++)r[s[o]]=!0;var a,n=WebSquare.Elem.api.getElementsByTagName(this.frameDoc.getPageInfo(),"publicInfo",l.v._XML_NAMESPACE.W2)[0];if(n){var d=WebSquare.Parser.parseAttribute(n);for(var i in a={method:{},submission:{},component:{}},d){var u=d[i].split(",");for(o=0;o<u.length;o++)a[i][u[o].wq_trim()]=!0}}for(var i in this.scopeVariable)if(!0!==r[i]){var c=this.scopeVariable[i];for(var p in c)p!==this.options.scopeFunction&&!0!==e[p]&&(a&&!0!==a.method[i+"."+p]||(t[p]=c[p]))}for(var i in this.scope){var g=this.scope[i];null!=g&&(a?(!0===a.component[i]&&g.uuid&&WebSquare.idCache[g.uuid]===g&&g.id!==g.uuid&&g.org_id!==g.uuid||!0===a.submission[i]&&"submission"===g._pluginName)&&(t[i]=g):t[i]=g)}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.setMode=function(t){try{this.options.mode=t}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.start=function(t){},g.prototype.renderBody=function(){var t=(0,s.Z)(a().mark((function t(e){var i,o,s,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=[],"json"===(o=this.frameDoc.getType())?(i=WebSquare.jsonUtil.getNodesByTagName(this.frameDoc.getPageInfo(),"body"),s=WebSquare.jsonUtil.getAttribute(i[0],"class")):(i=WebSquare.xml.getElementsByTagName(this.frameDoc.getPageInfo(),"body",l.v._XML_NAMESPACE.XHTML),s=i[0].getAttribute("class")),s&&this.addClass(s),WebSquare.cssManager.startCache(),r="json"===o?WebSquare.controlFactory.createByJSON(null,null,i[0],this.options.scope?this:null,this.uuid):WebSquare.controlFactory.create(null,null,i[0],this.options.scope?this:null,this.uuid),WebSquare.cssManager.endCache(),t.next=10,WebSquare.controlFactory.initAsync();case 10:return this.childControlList.push(r),this.render&&(r.domStatus="new"),r&&(r.parentControl=this,r.options&&r.options.firstTabID&&!this.options.firstTabID&&(this.options.firstTabID=r.options.firstTabID)),this.options.scope&&(this.makeScope(this),this.makeLazyScopeVariable()),r&&e?this._lazyActivation():!0===WebSquare._async&&l.v.executePointScript(4),t.abrupt("return",!!r);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),g.prototype.lazyActivation=function(){try{if(!this.render)return;var t=this.childControlList[0];this.render.innerHTML=t.toHTML(),"sync"===this.options.mode?this.setChildAction({preExecuted:!0}):(t.preActivate(),u.D.setTimeout(this.setChildAction,{
key:this.id+"_setChildAction",caller:this,delay:1,args:[{preExecuted:!0,skipPreActivate:!0}]}))}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._lazyActivation=function(){try{if(l.v.executePointScript(4),WebSquare.externalScriptArr.length>0)if("sync"!==this.options.mode){var t=this.uuid;WebSquare.externalScriptArr.push((function(){try{WebSquare.idCache[t].lazyActivation()}catch(t){h.w.printStackTrace(t)}})),u.D.js.apply(null,WebSquare.externalScriptArr)}else{for(var e=0;e<WebSquare.externalScriptArr.length;e++)WebSquare.BootLoader.globalEval(l.v.load(WebSquare.externalScriptArr[e]));this.lazyActivation()}else this.lazyActivation();WebSquare.externalScriptArr=[]}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.parseParameter=function(){try{if(!this.options.params||"string"!=typeof this.options.params)return;for(var t in this.paramObj=JSON.parse(this.options.params),this.paramObj){var e=this.paramObj[t].charAt(0),i=this.paramObj[t].slice(1);switch(e){case"j":this.paramObj[t]=JSON.parse(i);break;case"x":this.paramObj[t]=WebSquare.xml.parse(i);break;case"a":this.paramObj[t]=JSON.parse(i);break;default:this.paramObj[t]=i}}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.makeParameter=function(){try{if("object"!==(0,o.Z)(this.paramObj)&&(this.paramObj={}),this.options.isWidget){var t=this.parentControl.getParams();"object"===(0,o.Z)(t)&&(this.paramObj.params=t)}var e=this.getSrc();if(!e)return;for(var i=e.substring(e.indexOf("?")+1).split("&"),s=0;s<i.length;s++){2==(r=i[s].split("=")).length&&(this.paramObj[r[0].wq_trim()]=r[1].wq_trim())}if(location.hash.length>0)for(i=e.substring(e.indexOf("#")+1).split(/[\&\?\#]/),s=0;s<i.length;s++){var r;2==(r=i[s].split("=")).length&&(this.paramObj[r[0].wq_trim()]=r[1].wq_trim())}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.setDataObject=function(t){try{if("string"==typeof t&&(t=JSON.parse(t)),null==t||"string"!=typeof t.name||0===t.name.length)return;var e=t.type||"string";e=e.toLowerCase();var i,o=t.data,s=t.name;switch(e){case"string":i=o;break;case"json":i="string"==typeof o?JSON.parse(o):u.D.cloneObject(o,{scope:this.scope_id,skipFunction:!0});break;case"xml":i="string"==typeof o?WebSquare.xml.parse(o):WebSquare.xml.parse(WebSquare.xml.serialize(o));break;case"array":i="string"==typeof o?JSON.parse(o):o.slice(0)}this._dataObject={type:e,name:s,data:i}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._getDataObject=function(t){try{var e;return this._dataObject&&"string"==typeof this._dataObject.name&&this._dataObject.name.length>0&&this._dataObject.data&&(e=null==t?this._dataObject:this._dataObject[t]),e}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._removeDataObject=function(){try{this._dataObject&&(delete this._dataObject.data,this._dataObject=null,delete this._dataObject)}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.setFirstTabID=function(t){try{if(null!=t&&t!==this.options.firstTabID&&null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var e=WebSquare.tabOrder[this.id].preTabID,i=WebSquare.tabOrder[e].nextTabID,o=u.D.getComponentById(t,this.id).id,s=WebSquare.tabOrder[e].nextTabID;WebSquare.tabOrder[e].nextTabID=o,WebSquare.tabOrder[o]={},WebSquare.tabOrder[o].preTabID=e,s!==this.id&&delete WebSquare.tabOrder[i],this.options.firstTabID=t}}catch(t){h.w.printStackTrace(t)}},g.prototype.getParentFrame=function(){try{return this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._getRenderedParentFrame=function(){try{return this.scope_obj&&WebSquare.strictModeFrame.id!==this.scope_obj.id&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.reload=function(t){try{var e;if(this.options.strictFrame)u.D.reinitialize(t);else this._dataObject&&(e={dataObject:this._dataObject,reload:!0}),this.setSrc(this.getSrc(),e)}catch(t){
h.w.printStackTrace(t,null,this)}},g.prototype._clearExecuteStatus=function(){try{this._executeStatus={script:!1,onpageload:!1,postscript:!1,lazyscript:!1,onwframeload:!1}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._getVersion=function(){try{var t=l.v.getConfiguration("/WebSquare/wframe/version/@value");return t||(t=WebSquare.strictMode?3:"sync"===this.options.mode?2:1),Number(t)}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.getURL=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"string"!=typeof t||t.indexOf("://")>-1||!0===e.skipFullUrl)return t;if(e.msaName||(e.msaName=this._getMsaName()),e.msaName)return l.v.getURL(t,e);var i="",o=this.getParentFrame();if(o){var s,r=o.getSrc(),a=r.indexOf("://");if(a>=0)i=(s=t.startsWith("/")||t.startsWith("\\")?r.indexOf("/",a+3):r.lastIndexOf("/"))>0?r.slice(0,s)+"/":r.slice(0)+"/"}return i?i+t:l.v.getURL(t,{tempHome:this.getUdcRoot()})}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.showProcessMessage=function(t,e){try{if("$blank"==t||!t)return;var i=l.v.getConfiguration("processMsgFrameURL");if(i||(i=n.x._resourceURI+"message/processMsg.js"),null==this._processMsgComp){var o=WebSquare.controlFactory.create(this.id+"_wq_processMsgComp",{src:i,className:"w2_proc",scope:!0,pluginName:"wframe",mode:"sync",preload:!0},null,this,this,!0);this._processMsgComp=o,o.writeTo(this),o.activate(),this.addControl(o)}this._processMsgComp.show();var s=this._processMsgComp.getObj("btn_hide");s&&s.hide();var r=this._processMsgComp.getObj("btn_cancel");r&&r.hide();var a=this._processMsgComp.getObj("text_msg");a&&a.setValue(t);var d=WebSquare.style.getStyle(this.render,"position"),u=0,c=0;"relative"!==d&&(u=this.render.offsetLeft,c=this.render.offsetTop);var p=u+this.render.scrollLeft+(this.getSize("outerWidth")-this._processMsgComp.getSize("outerWidth"))/2,g=c+this.render.scrollTop+(this.getSize("outerheight")-this._processMsgComp.getSize("outerheight"))/2;if(this._processMsgComp.setPosition(p,g),this.bind("onkeydown",this._handleProcessEvent),null==this._processMsgModal){var m=WebSquare.controlFactory.create(this.id+"_wq_proessMsgModal",{className:"w2_proc_modal",pluginName:"group",parseChild:!1},null,this,this,!0);m.writeTo(this),m.activate(),this.addControl(m),this._processMsgModal=m}var f=0,b=0;"relative"!==(d=WebSquare.style.getStyle(this.render,"position"))&&(b=this.render.offsetTop,f=this.render.offsetLeft);var y,v;p=f+this.render.scrollLeft,g=b+this.render.scrollTop;if(this._processMsgModal.setPosition(p,g),this._processMsgModal.show(),e&&e.submissionId)"string"==typeof e.submissionId?(y=e.submissionId,v=WebSquare.ModelUtil.getSubmission(y)):y=(v=e.submissionId).id,v.abortTrigger&&r&&r.show(),v.hideTrigger&&s&&s.show(),!1!==v.hideProcessMsg&&this._processMsgQueue.push({scope_id:v.scope_id,org_id:v.org_id,id:y,msg:t});e&&!0===e.ajax&&this._processMsgAjaxCnt++}catch(t){h.w.printStackTrace(t,null,this),this.hideProcessMessage()}},g.prototype.hideProcessMessage=function(){try{null!=this._processMsgComp&&(this._processMsgComp.hide(),this.unbind("onkeydown",this._handleProcessEvent)),null!=this._processMsgModal&&this._processMsgModal.hide(),this._processMsgQueue=[],this._processMsgAjaxCnt=0}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype._handleProcessEvent=function(t){try{d.B.stopEvent(t)}catch(t){h.w.printStackTrace(t,null,this),this.hideProcessMessage()}},g.prototype.addSubmissionMessage=function(t,e){try{this.showProcessMessage(e,{submissionId:t})}catch(t){h.w.printStackTrace(t,null,this),this.hideProcessMessage()}},g.prototype.deleteSubmissionMessage=function(t){try{for(var e=this._processMsgQueue.length-1;e>=0;e--)if(this._processMsgQueue[e].id==t){if(null!=this._processMsgComp&&e>0){var i=this._processMsgComp.getObj("text_msg");i&&i.setValue(this._processMsgQueue[e-1].msg)}this._processMsgQueue.splice(e,1)}if(t){var o=WebSquare.ModelUtil.getSubmission(t)
;if(0===this._processMsgQueue.length&&!1!==o.hideProcessMsg)if(this.parentFrame&&!0===u.D.getBoolean(this.options.delegateProcessMsg)){for(var s=this.getParentFrame();s&&s.parentFrame&&!0===u.D.getBoolean(s.options.delegateProcessMsg);){var r=s._getRenderedParentFrame();if(!r)break;s=r}null!=s?s.hideProcessMessage():this.hideProcessMessage()}else this.hideProcessMessage()}}catch(t){h.w.printStackTrace(t,null,this),this.hideProcessMessage()}},g.prototype.deleteAjaxMessage=function(){try{this._processMsgAjaxCnt--,this._processMsgAjaxCnt<=0&&this.hideProcessMessage()}catch(t){h.w.printStackTrace(t,null,this),this.hideProcessMessage()}},g.prototype.showFrameModal=function(t){try{var e=t.className||"",i=(t.popupComponents,t.stackComponents||void 0),o=t.popupModal||!1;if(null==this.modalStack&&(this.modalStack=[]),null==this._wframePopupModal){var s=WebSquare.controlFactory.create(this.id+"_wq_frameModal",{className:"w2_wframe_modal",pluginName:"group",parseChild:!1},null,this,this,!0);s.writeTo(this),s.activate(),s.render.style.width="100%",s.render.style.height="100%",this.addControl(s),this._wframePopupModal=s}else this._wframePopupModal.render.style.height=this.render.scrollHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px";if(e?(this.modalStack[this.modalStack.length]=e,!0===o&&(this._wframePopupModal.className=e)):(this.modalStack[this.modalStack.length]="w2modal",!0===o&&(this._wframePopupModal.className="w2modal")),i)for(var r in null==this.stackComponents&&(this.stackComponents={}),i)if(null==this.stackComponents[r])this.stackComponents[r]=[i[r]];else{var a=this.stackComponents[r].length-1;if(a>=0)for(var n=a;n>=0;n--){var l=WebSquare.idCache[this.stackComponents[r][n].id];if(!l&&this.stackComponents[r][n].id){var d=u.D.getPopup(this.stackComponents[r][n].id);d&&(l=d.popupWin)}if(l&&l.render&&!0===o){var c=parseInt(l.getStyleProperty("z-index"),10),p=parseInt(u.D.getStyleProperty(this._wframePopupModal.render,"z-index"),10)-1;if(c==p)break;l.zIndex=c,l.setStyle("z-index",p)}}this.stackComponents[r].push(i[r])}!0===o&&this._wframePopupModal.show()}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.hideFrameModal=function(t){try{if(null!=this._wframePopupModal){var e=!1,i=!1;if(null!=this.stackComponents)for(var o in this.stackComponents){var s=this.stackComponents[o];if(t){for(var r=this.stackComponents[o].length-1;r>=0;r--)if(s[r].id===t){s.splice(r,1),i=!0;break}}else s.pop(),i=!0;for(r=s.length-1;r>=0;r--){0!=r||0!==s.length&&!1!==s[r].modal||(e=!0);var a=WebSquare.idCache[s[r].id];if(a||(a=u.D.getComponentById(s[r].id)),a&&a.render){var n=a.zIndex;isNaN(n)&&(n=""),a.zIndex=void 0;var l=WebSquare.getBody();l.modal&&"block"===l.modal.style.display?(a.zIndex=u.D.getStyleProperty(l.modal,"z-index")-2,a.setStyle("z-index",a.zIndex)):a.setStyle("z-index",n)}if("popup"!=o||!0===s[r].modal)break}}if(i&&this.modalStack.pop(),0==this.modalStack.length)this._modal=!1,null!=this._wframePopupModal&&(this._wframePopupModal.remove(),this._wframePopupModal=null);else if(!0===e)this._modal=!1,this._wframePopupModal.hide();else{var d=this.modalStack[this.modalStack.length-1];this._wframePopupModal.className=d}}}catch(t){h.w.printStackTrace(t,null,this)}},g.prototype.modalEvent=function(t){try{this._wframePopupModal&&t&&(d.B.addListener(this._wframePopupModal.render,"onclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()})),d.B.addListener(this._wframePopupModal.render,"ondblclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()})))}catch(t){h.w.printStackTrace(t,null,this)}},g._increasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount<0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0),WebSquare.uiplugin.wframe.__pendingWframeCount++}catch(t){h.w.printStackTrace(t,null,this)}},g._decreasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount--,
WebSquare.uiplugin.wframe.__pendingWframeCount<=0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0)}catch(t){h.w.printStackTrace(t,null,this)}},g._isPending=function(){return WebSquare.uiplugin.wframe.__pendingWframeCount>0},g._addWframePreorder=function(t){try{WebSquare.uiplugin.wframe.__pendingWframePreOrderList.push(t)}catch(t){h.w.printStackTrace(t,null,this)}},g._addWframePostorder=function(t){try{WebSquare.uiplugin.wframe.__pendingWframePostOrderList.push(t)}catch(t){h.w.printStackTrace(t,null,this)}},g._execute=function(t,e){try{if(void 0!==e&&null!=e||(e={}),WebSquare.uiplugin.wframe._isPending())return;var i="postorder"===e.order?WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0):WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0);if(i.length<=0)return;switch(!0===e.reverse&&i.reverse(),t){case"script":for(var o="",s=0;s<i.length;s++){!0!==(n=WebSquare.idCache[i[s]])._executeStatus.script&&(n._executeStatus.script=!0,n.frameDoc&&"string"==typeof n.frameDoc.scriptSection&&n.frameDoc.scriptSection&&(o+=WebSquare.scriptIdentifier+n.getURL(n.getSrc())+'";',o+=n.frameDoc.scriptSection))}"executed"===WebSquare.scriptSectionExcuteFlag||!0===e.preExecuted?WebSquare.BootLoader.globalEval(o):WebSquare.scriptSection+=o;break;case"onpageload":for(s=0;s<i.length;s++){if(!0!==(n=WebSquare.idCache[i[s]])._executeStatus.onpageload){n._executeStatus.onpageload=!0;for(var r=0;r<n.childControlList.length;r++)d.B.fireEvent(n.childControlList[r],"onpageload",n.getSrc())}}break;case"postscript":for(o="",s=0;s<i.length;s++){!0!==(n=WebSquare.idCache[i[s]])._executeStatus.postscript&&(n._executeStatus.postscript=!0,n.frameDoc&&"string"==typeof n.options.postScript&&n.options.postScript&&(o+=WebSquare.scriptIdentifier+n.getURL(n.getSrc())+'";',o+=n.options.postScript))}WebSquare.BootLoader.globalEval(o);break;case"lazyscript":var a=[];for(s=0;s<i.length;s++){!0!==(n=WebSquare.idCache[i[s]])._executeStatus.lazyscript&&(n._executeStatus.lazyscript=!0,n.frameDoc&&n.lazyImportsArr&&n.lazyImportsArr.length>0&&(a=a.concat(n.lazyImportsArr),n.lazyImportsArr=[]))}a.length>0&&"executed"===WebSquare.scriptSectionExcuteFlag&&u.D.js.apply(null,a);break;case"onwframeload":for(s=0;s<i.length;s++){var n;!0!==(n=WebSquare.idCache[i[s]])._executeStatus.onwframeload&&(n._executeStatus.onwframeload=!0,d.B.fireEvent(n,"onwframeload",n.getSrc()))}}}catch(t){h.w.printStackTrace(t,null,this)}},g._clearPending=function(t){try{void 0!==t&&null!=t||(t={});for(var e={pendingWframeCount:WebSquare.uiplugin.wframe.__pendingWframeCount,pendingWframePreOrderList:WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0),pendingWframePostOrderList:WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0)};WebSquare.uiplugin.wframe.__pendingWframePreOrderList.length>0;){(i=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePreOrderList.pop()])&&!0!==t.keepStatus&&i._clearExecuteStatus()}for(;WebSquare.uiplugin.wframe.__pendingWframePostOrderList.length>0;){var i;(i=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePostOrderList.pop()])&&!0!==t.keepStatus&&i._clearExecuteStatus()}return WebSquare.uiplugin.wframe.__pendingWframeCount=0,e}catch(t){h.w.printStackTrace(t,null,this)}},g._setPending=function(t){try{WebSquare.uiplugin.wframe.__pendingWframeCount=t.pendingWframeCount,WebSquare.uiplugin.wframe.__pendingWframePreOrderList=t.pendingWframePreOrderList.slice(0),WebSquare.uiplugin.wframe.__pendingWframePostOrderList=t.pendingWframePostOrderList.slice(0)}catch(t){h.w.printStackTrace(t,null,this)}},g.__pendingWframeCount=0,g.__pendingWframePreOrderList=[],g.__pendingWframePostOrderList=[],g.scope=function(t){this._parent_uuid=t,this._identifier="wframe_scope"},g.scope.prototype.getRuntimeId=function(t,e){try{for(var i=this._parent_uuid,o="",s=WebSquare.idCache[this._parent_uuid].options.scopeVariable.split(","),r={},a=0;a<s.length;a++)r[s[a].wq_trim()]=!0;if("string"==typeof e){var n=e.split("parent").length-1
;for(a=0;a<n&&null!=i&&null!=WebSquare.idCache[i];a++)i=WebSquare.idCache[i].parentFrame}return!0===r[t]?o=null!=i?WebSquare.idCache[i].id+"_"+t:t:null!=i&&null!=WebSquare.idCache[i].scope[t]?o=WebSquare.idCache[i].scope[t].id||"":WebSquare.idToUUID[t]&&WebSquare.idCache[WebSquare.idToUUID[t]]&&(o=WebSquare.strictMode&&null!=WebSquare.idCache[i]&&WebSquare.idCache[WebSquare.idToUUID[t]].scope_id!==WebSquare.idCache[i].id?"":t),o}catch(t){return h.w.printStackTrace(t,null,this),""}},g.scope.prototype.getSubmission=function(t,e){try{for(var i=WebSquare.ModelUtil.getModelByID(e),o=null,s=WebSquare.idCache[this._parent_uuid].id,r=WebSquare.idCache[this._parent_uuid].scope[t],a=0;a<i.submissions.length;a++){var n=i.submissions[a];if(r===n||n.scope_id===s&&n.id===t){o=n;break}}return o}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.executeSubmission=function(t,e,i,o,s){try{var r;if("string"==typeof t)r=this.getSubmission(t);else if(r=t,WebSquare.strictMode&&r.scope_id!==WebSquare.idCache[this._parent_uuid].id)return;return WebSquare.ModelUtil.executeSubmission(r,e,i,o,s)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.createSubmission=function(t,e){try{var i,o=t.id,s=this.getFrame(),r=s.id,a=r+"_";return t.id=a+o,t.scope_id=r,i=WebSquare.ModelUtil.createSubmission(t,e),s.scope[o]=WebSquare.ModelUtil.getSubmission(t.id,null,{scope_id:r}),null!=s.frameDoc&&s.frameDoc.models[0].submissions.push(s.scope[o]),i}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.deleteSubmission=function(t,e){try{var i=this.getSubmission(t),o=WebSquare.ModelUtil.deleteSubmission(i.id,e,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[t],o}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.createWorkflow=function(t,e){try{var i,o=t.id,s=this.getFrame(),r=s.id,a=r+"_";return t.id=a+o,t.scope_id=r,i=WebSquare.ModelUtil.createWorkflow(t,e),s.scope[o]=WebSquare.ModelUtil.getWorkflow(t.id,null,{scope_id:r}),i}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.deleteWorkflow=function(t,e){try{var i=this.getWorkflow(t),o=WebSquare.ModelUtil.deleteWorkflow(i.id,e,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[t],o}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getWorkflow=function(t,e){try{for(var i=WebSquare.ModelUtil.getModelByID(e),o=null,s=WebSquare.idCache[this._parent_uuid].id,r=WebSquare.idCache[this._parent_uuid].scope[t],a=0;a<i.workflows.length;a++){var n=i.workflows[a];if(r===n||n.scope_id===s&&n.id===t){o=n;break}}return o}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getRunningWorkflow=function(t,e){try{var i=null;if(t)null!=(a=this.getWorkflow(t,e))&&a.promiseStatus&&""!=a.promiseStatus&&(i=a);else for(var o=WebSquare.idCache[this._parent_uuid].id,s=WebSquare.ModelUtil.getModelByID(e),r=0;r<s.workflows.length;r++){var a;if((a=s.workflows[r]).scope_id===o&&a.promiseStatus&&""!=a.promiseStatus){i=a;break}}return i}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.isRunningWorkflow=function(t,e){try{return null!=this.getRunningWorkflow(t,e)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getRunningWorkflowID=function(t){try{var e=this.getRunningWorkflow(null,t),i=null;return null!=e&&(i=e.id),i}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.rejectWorkflow=function(t,e,i){try{var o=this.getRunningWorkflow(e,i),s=null;return null!=o&&(o.promiseStatus="REJECT",o.promiseValue=t||"REJECT",s=o),s}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.executeWorkflow=function(t){try{return WebSquare.ModelUtil.executeWorkflow(t,{scope_function:this})}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.executeSerial=function(t,e,i,o,s){try{return WebSquare.ModelUtil.executeSerial(t,e,i,o,s,{scope_function:this})}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.ajax=function(t){try{if(t){var e=this.getFrame();e&&(t.scope=e.id),WebSquare.net.ajax(t)}}catch(t){h.w.printStackTrace(t),this.hideProcessMessage()}},
g.scope.prototype.dynamicCreate=function(t,e,i,o,s,r){try{return u.D.dynamicCreate(t,e,i,o,s,r,this.getFrame())}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getFrameId=function(){try{return WebSquare.idCache[this._parent_uuid].id||null}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getFrame=function(){try{return WebSquare.idCache[this._parent_uuid]}catch(t){h.w.printStackTrace(t)}},g.scope.prototype._getProcessMsgTargetFrame=function(){try{for(var t=WebSquare.idCache[this._parent_uuid].parentControl;t&&t.parentFrame&&"true"===u.D.getBoolean(t.options.delegateProcessMsg);){var e=t._getRenderedParentFrame();if(!e)break;t=e}return t}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getParentWindow=function(){try{var t=WebSquare.idCache[this._parent_uuid].getParentFrame();return null==t?this.getFrame().options.strictFrame?u.D.getParentWindow():window:t.scope}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getTopWindow=function(){try{return top}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.top=function(){try{return u.D.getTopWindow()}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.parent=function(){try{return this.getParentWindow()}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.main=function(){try{return u.D.getMainFrame()}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.self=function(){try{return this.getFrame().scope}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getComponentById=function(t){try{return u.D.getComponentById(t,this.getFrameId())}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getPopupParam=function(t){try{void 0!==t&&null!=t||(t={});var e="",i=WebSquare.idCache[this._parent_uuid],o=null!=i._dataObject&&""!=i.options.popupParam&&i._dataObject.name===i.options.popupParam.slice(1);o=o||!0===t.dataObject;var s=null!=i.paramObj&&""!=i.options.popupParam;if(o||s){var r=o?i._dataObject.type.charAt(0):i.options.popupParam.charAt(0),a=o?i._dataObject.data:i.paramObj[i.options.popupParam.slice(1)];switch(r){case"j":e=JSON.stringify(a);break;case"x":e=WebSquare.xml.serialize(a);break;case"a":e=u.D.parseArray(a);break;default:e=a}}return e}catch(t){return h.w.printStackTrace(t),""}},g.scope.prototype.getParameter=function(t){try{var e,i=this.getFrame();if(i._dataObject&&i._dataObject.name===t)e=i._dataObject.data;else{var o=WebSquare.idCache[this._parent_uuid].paramObj;null!=o&&(e=o[t]),WebSquare.strictMode&&!this.getFrame().options.strictFrame||null!=e||(e=WebSquare.net.getParameter(t))}return e}catch(t){return h.w.printStackTrace(t),""}},g.scope.prototype.getAllParameter=function(){try{var t=JSON.parse(WebSquare.idCache[this._parent_uuid].options.params||null);for(var e in t)t[e]=t[e].slice(1);var i=this.getFrame(),o=i._getDataObject();return null!=o&&(null==t&&(t={}),i._getVersion()>=3?t[o.name]=o.data:t[o.name]=this.getPopupParam({dataObject:!0})),t}catch(t){return h.w.printStackTrace(t),null}},g.scope.prototype.getOptions=function(t){try{var e,i=this.getFrame(),o=l.v._getParentObj();if(i.options.strictFrame){if(WebSquare.isWebSquarePopup&&null!=o&&null!=o.WebSquare){var s=WebSquare.net.getParameter("popupID");e=o.WebSquare.dataObject[s].data}}else e=i._getDataObject("data");return n.x.extend(t||{},e)||{}}catch(t){return h.w.printStackTrace(t),""}},g.scope.prototype.setPopupParam=function(t,e){},g.scope.prototype.getPopupUrl=function(){try{var t=null;if(this.isWFramePopup()||this.getFrame()._getVersion()<3){var e=WebSquare.idCache[this._parent_uuid].getSrc();t=WebSquare.idCache[this._parent_uuid].getURL(e)}return t}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getPopupId=function(){try{var t=null;return this.isWFramePopup()&&(t=WebSquare.idCache[this._parent_uuid].paramObj.popupID),t}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.isWFramePopup=function(t,e){try{if(!t)return WebSquare.idCache[this._parent_uuid]._isWframePopup;for(var i=WebSquare.idCache[this._parent_uuid];i;){if(i.options.strictFrame)return!!e&&u.D.isPopup();if(i._isWframePopup)return i._isWframePopup
;i=i.getParentFrame()}}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.isPopup=function(t){try{return this.getFrame().options.strictFrame?u.D.isPopup():this.isWFramePopup(t,!0)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getPopup=function(t){try{return u.D.getPopup(t,this._parent_uuid)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getPopupList=function(t){try{return u.D.getPopupList(t,this._parent_uuid)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getPopupWindow=function(t){try{return u.D.getPopupWindow(t,this._parent_uuid)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getPopupWindowList=function(t){try{return u.D.getPopupWindowList(t,this._parent_uuid)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.openPopup=function(t,e,i,o){try{void 0!==e&&null!=e||(e={}),e.scope_uuid||(e.scope_uuid=this._parent_uuid),u.D.openPopup(t,e,i,o)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.closePopup=function(t,e){try{var i=t;void 0===t&&(i=this.getParameter("popupID"));var o=this.getPopup(i);if(o){var s=o.id;o.close(i,e),WebSquare.uiplugin.popup.startChkModalClosed(),!0===o.useWindowPopup()&&WebSquare.uiplugin.popup.removeFromPopupList(s)}else this.getFrame().options.strictFrame&&u.D.closePopup(i,e)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.reinitialize=function(t){try{this.getFrame().reload(t)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.getMetaValue=function(t){try{if(this.getFrame().options.strictFrame)return u.D.getMetaValue(t);var e="",i=WebSquare.Elem.api.getElementsByTagName(this.getFrame().frameDoc.getPageInfo(),"head")[0];return i&&(e=WebSquare.Elem.api.getAttribute(i,t)),e}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.multipleExcelUpload=function(t){try{t.scopeId=this.id,u.D.multipleExcelUpload(t)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.multipleExcelDownload=function(t){try{t.scopeId=this.id,u.D.multipleExcelDownload(t)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.$=function(t){try{for(var e,i=t.split("#"),o=0;o<i.length;o++){var s=i[o].search(/[\W]/);if(0!==s){var r,a="";s<0?r=i[o]:(r=i[o].slice(0,s),a=i[o].slice(s));var n=this.getComponentById(r);null!=n&&(i[o]=n.id+a)}}e=i.join("#");var l="";return this.getFrame().options.strictFrame||(l="#"+this.getFrameId()+" "),u.D.jQuerySelector(l+e)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.watermark=function(t,e){try{void 0!==e&&null!=e||(e={});var i=this.getFrame(),o=i.id;e.canvasId||(e.canvasId=o+"_watermarkCanvas"),e.target||(e.target=i),u.D.watermark(t,e)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.emit=function(t){try{var e=[].slice.apply(arguments,[0]);return e.shift(),this.getFrame().trigger(t,e)}catch(t){h.w.printStackTrace(t)}},g.scope.prototype.updateSuffix=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getFrame().id;t.scopeId=e,u.D.updateSuffix(t)}catch(t){h.w.printStackTrace(t)}},g.scope.bigDecimal=function(t){try{var e=function(t){return WebSquare.bigDecimal(t)};return e.calc=(i=t,function(t,e){return WebSquare.bigDecimal.calc(t,e,i)}),e}catch(t){h.w.printStackTrace(t)}var i},g.scope.data=function(t){this._parent_id=t,this._identifier="wframe_scope_data"},g.scope.data.prototype.get=function(t,e,i){try{return i||(i={}),i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.get(t,e,i)}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.set=function(t,e,i,o){try{return o||(o={}),o.scope_obj||(o.scope_obj=this._parent_id),WebSquare.DataCollection.api.set(t,e,i,o)}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.create=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.create(t,e)}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.remove=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.remove(t,e)}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.bindPath=function(t){try{
var e=t.split("."),i={};return i.collectionId=e[0].replace(/^data:/,""),e>1&&(i.columnId=e[1]),i}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.getAllDataCollection=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.getAllDataCollection(t,e)}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.getBroadcast=function(t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.getBroadcast(t)}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.getInfo=function(t,e,i,o){try{return void 0!==o&&null!=o||(o={}),o.scope_obj||(o.scope_obj=this._parent_id),WebSquare.DataCollection.api.getInfo(t,e,i,o)}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.getOption=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.getOption(t,e)}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.setBroadcast=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.setBroadcast(t,e)}catch(t){h.w.printStackTrace(t)}},g.scope.data.prototype.setOption=function(t,e,i){try{return void 0!==i&&null!=i||(i={}),i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.setOption(t,e,i)}catch(t){h.w.printStackTrace(t)}},g.scope.model=function(t){this.scope_id=t},g.scope.model.prototype.setInstanceValue=function(t,e,i){return WebSquare.ModelUtil.setInstanceValue(t,e,i,this.scope_id)},g.scope.model.prototype.getInstanceValue=function(t,e){return WebSquare.ModelUtil.getInstanceValue(t,e,this.scope_id)},g.scope.model.prototype.findInstanceNode=function(t,e){return WebSquare.ModelUtil.findInstanceNode(t,e,this.scope_id)},g.scope.model.prototype.findInstanceNodes=function(t,e){return WebSquare.ModelUtil.findInstanceNodes(t,e,this.scope_id)},g.scope.model.prototype.findSerializedNode=function(t,e){return WebSquare.ModelUtil.findSerializedNode(t,e,this.scope_id)},g.scope.model.prototype.removeInstanceNode=function(t){return WebSquare.ModelUtil.removeInstanceNode(t,this.scope_id)},g.scope.model.prototype.removeInstanceNodes=function(t){return WebSquare.ModelUtil.removeInstanceNodes(t,this.scope_id)},g.scope.model.prototype.removeChildNodes=function(t){return WebSquare.ModelUtil.removeChildNodes(t,this.scope_id)},g.scope.model.prototype.copyNode=function(t,e,i,o){return WebSquare.ModelUtil.copyNode(t,e,i,o,this.scope_id)},g.scope.prototype.updateSuffix=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getFrame().id;t.scopeId=e,u.D.updateSuffix(t)}catch(t){h.w.printStackTrace(t)}}},6280:function(t,e,i){"use strict";i.r(e),i.d(e,{widgetContainer:function(){return h},widget:function(){return d}});var o=i(484),s=i(1974),r=i(5948),a=i(1454),n=i(8683),l=i(1),h=function(t,e,i){WebSquare.uiplugin.widgetContainer.isImported||(WebSquare.uiplugin.widgetContainer.isImported=!0),l.s.call(this,t,e,i)};s.x.extend(h.prototype,l.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.widgetContainer",pluginName:"widgetContainer",useConfig:!0,userEvents:["onload","onwidgetload","onwidgetmove","onwidgetresize","onwidgetopen","onwidgetfix","onwidgetmaximize","onwidgetminimize","onbeforewidgetclose","onafterwidgetclose","onwidgetrestore","onclickcustombtn"],mode:"pushpull",threshold:null,cols:1,unitHeightPixel:25,verticalMargin:0,horizontalMargin:0,minUnitWidth:1,minUnitHeight:1,maxUnitWidth:null,maxUnitHeight:null,widgetMove:!0,widgetResize:!0,forceMinMax:!1,popupEvent:"",async:!1,preventMaximizeByTitle:!1},h.prototype.initialize=function(t){this.widgetIdCount=0,this.widgetLoadedCount=0,this.widgets=[],this.dirtyArr=[],this.changingWidget=null,this.oneColumn=!1,this.widgetMove=this.options.widgetMove,this.widgetResize=this.options.widgetResize,this.preventMaximizeByTitle=this.options.preventMaximizeByTitle},h.prototype.toHTML=function(){
var t=[],e=""===this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2widgetContainer "+this.options.className+"'>"),t.push("<div id='"+this.id+"_content'  class='w2widgetContainer_content'>"),t.push("</div>"),t.push("</div>"),t.join("")},h.prototype.setAction=function(){this.unitWidth=100/this.options.cols,this.unitHeightPixel=this.options.unitHeightPixel,this.contentRender=this.getElementById(this.id+"_content"),this.redraw(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.handleResizeEvent)),this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onMSPointerDown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent))},h.prototype.checkResize=function(t){this.handleResizeEvent()},h.prototype.handleResizeEvent=function(){this.redraw()},h.prototype._changeWidget=function(t,e,i,o,s,r){return r||(r={}),!(t.isFixed()&&!r.force)&&(!0===t.dirty?(a="number"==typeof e?e:t.x,n="number"==typeof i?i:t.y,l="number"==typeof o?o:t.unitWidth,h="number"==typeof s?s:t.unitHeight):(a="number"==typeof e?e:t.oriX,n="number"==typeof i?i:t.oriY,l="number"==typeof o?o:t.oriUnitWidth,h="number"==typeof s?s:t.oriUnitHeight,t.dirty=!0,this.dirtyArr.push(t)),!!this.isValidPos(a,n,l,h)&&(t.x=a,t.y=n,t.unitWidth=l,t.unitHeight=h,!0));var a,n,l,h},h.prototype._commit=function(){for(var t,e=0;e<this.dirtyArr.length;e++)(t=this.dirtyArr[e])&&(t.oriX=t.x,t.oriY=t.y,t.oriUnitWidth=t.unitWidth,t.oriUnitHeight=t.unitHeight,t.dirty=!1);this.dirtyArr.splice(0,this.dirtyArr.length)},h.prototype._rollback=function(){for(var t,e=0;e<this.dirtyArr.length;e++)(t=this.dirtyArr[e])&&(t.x=t.oriX,t.y=t.oriY,t.unitWidth=t.oriUnitWidth,t.unitHeight=t.oriUnitHeight,t.dirty=!1);this.dirtyArr.splice(0,this.dirtyArr.length)},h.prototype._getMaxRect=function(t){var e=t.getMaximizeConfig(),i=t.getRect(),o=e.left<0?0:i.x-e.left,s=e.right<0?this.options.cols-i.x:i.unitWidth+e.right;o<=0?(s=s+i.x-o,o=0):s+=e.left,o+s>this.options.cols&&(o<s-this.options.cols?(o=0,s=this.options.cols):o=this.options.cols-s);var r=e.top<0?0:i.y-e.top,a=i.unitHeight+e.bottom;return r<=0?(a=a+i.y-r,r=0):a+=e.top,e.bottom<0&&(a=1/0),{x:o,y:r,unitWidth:s,unitHeight:a}},h.prototype._getMarginedWidth=function(t){return"number"==typeof t?t-this.verticalMargin:parseInt(t,10)-this.verticalMargin},h.prototype._getMarginedHeight=function(t){return"number"==typeof t?t-this.horizontalMargin:parseInt(t,10)-this.horizontalMargin},h.prototype._getMarginedLeft=function(t){return"number"==typeof t?t+this.verticalMargin/2:parseInt(t,10)+this.verticalMargin/2},h.prototype._getMarginedTop=function(t){return"number"==typeof t?t+this.horizontalMargin/2:parseInt(t,10)+this.horizontalMargin/2},h.prototype._recalcSize=function(){if(this.render){this.fullWidth=Math.max(this.render.scrollWidth,this.render.clientWidth),this.fullWidth<=0&&(this.fullWidth=parseInt(this.render.style.width,10)),this.verticalMargin=this.options.verticalMargin/this.fullWidth*100,this.horizontalMargin=this.options.horizontalMargin;for(var t=0,e=0;e<this.widgets.length;e++){var i=this.widgets[e],o=i.isMaximized()?this._getMaxRect(i):i.getRect();o&&o.unitHeight!==1/0&&t<o.y+o.unitHeight&&(t=o.y+o.unitHeight)}var s=t*this.unitHeightPixel;this.fullHeight=Math.max(this.render.scrollHeight,this.render.clientHeight,s),WebSquare.BootLoader.fullViewRatio&&(this.zoomLevel=WebSquare.BootLoader.fullViewRatio),this.options.threshold&&this.options.threshold>this.fullWidth?(this.oneColumn=!0,this.widgetMove=!1,this.widgetResize=!1):(this.oneColumn=!1,this.widgetMove=this.options.widgetMove,this.widgetResize=this.options.widgetResize)}},h.prototype._renderWithRect=function(t,e,i){if(null!=i){if(t||"object"!==(0,o.Z)(i)||i.appendTo(this),
!i.parentControl)return void(i.render=void 0);t=i.render}"number"==typeof e.unitWidth?t.style.width=this._getMarginedWidth(e.unitWidth*this.unitWidth)+"%":t.style.width=this._getMarginedWidth(e.unitWidth)+"%","number"==typeof e.unitHeight?t.style.height=this._getMarginedHeight(e.unitHeight*this.unitHeightPixel)+"px":t.style.height=this._getMarginedHeight(e.unitHeight)+"px","number"==typeof e.x?t.style.left=this._getMarginedLeft(e.x*this.unitWidth)+"%":t.style.left=this._getMarginedLeft(e.x)+"%","number"==typeof e.y?t.style.top=this._getMarginedTop(e.y*this.unitHeightPixel)+"px":t.style.top=this._getMarginedTop(e.y)+"px"},h.prototype.redraw=function(){if(this._recalcSize(),this.oneColumn){var t=0;this.widgets.sort((function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y}))}for(var e=0;e<this.widgets.length;e++){var i=this.widgets[e],o=i.getRect();if(this.oneColumn){if(o.x=0,o.unitWidth=this.options.cols,o.y=t,t+=o.unitHeight,this.options.forceMinMax){if(i.isMaximized()){(s=this._getMaxRect(i)).x=o.x,s.unitWidth=o.unitWidth,s.unitHeight=s.unitHeight===1/0?this.fullHeight+"px":s.unitHeight,this._renderWithRect(i.render,s,i);continue}if(i.isMinimized()){r=this.getElementById(i.id+"_title"),a=parseInt(r.offsetHeight||WebSquare.style.getStyle(r,"height"),10);o.unitHeight=a+this.horizontalMargin+"px",this._renderWithRect(i.render,o,i)}}}else{if(i.isMaximized()){var s;(s=this._getMaxRect(i)).unitHeight=s.unitHeight===1/0?this.fullHeight+"px":s.unitHeight,this._renderWithRect(i.render,s,i);continue}if(i.isMinimized()){var r=this.getElementById(i.id+"_title"),a=parseInt(r.offsetHeight||WebSquare.style.getStyle(r,"height"),10);o.unitHeight=a+this.horizontalMargin+"px",this._renderWithRect(i.render,o,i)}}this.ghost&&i.id===this.dragDropElem.id?this._renderWithRect(this.ghost,o,null):(this._renderWithRect(i.render,o,i),i._setTitleEllipsis())}},h.prototype.setCols=function(t){var e=this.unitWidth,i=this.options.cols,o=!0;this.unitWidth=100/t,this.options.cols=t;for(var s=0;s<this.widgets.length;s++)if(!this.isValidPos(this.widgets[s].x,this.widgets[s].y,this.widgets[s].unitWidth,this.widgets[s].unitHeight)){o=!1;break}o?this.redraw():(this.unitWidth=e,this.options.cols=i,$l(WebSquare.language.getMessage("WidgetContainer_setCols_warning")))},h.prototype.isValidPos=function(t,e,i,o){if(t!==parseInt(t,10)||e!==parseInt(e,10)||i!==parseInt(i,10)||o!==parseInt(o,10))return!1;var s=t>=0&&t+i<=this.options.cols,r=e>=0,a=i>=(this.options.minUnitWidth||1),n=o>=(this.options.minUnitHeight||1);return s&&r&&a&&n},h.prototype._checkInclusion=function(t,e){return t.x<=e.x&&t.y<=e.y&&t.x+t.unitWidth>=e.x+e.unitWidth&&t.y+t.unitHeight>=e.y+e.unitHeight},h.prototype._checkCollision=function(t,e){return t.x+t.unitWidth>e.x&&t.x<e.x+e.unitWidth&&t.y+t.unitHeight>e.y&&t.y<e.y+e.unitHeight},h.prototype._checkSwitchable=function(t,e){var i=t._getOriRect();if(!this._checkInclusion(i,e)||this._checkCollision(t,e))return!1;for(var o=0;o<this.widgets.length;o++){var s=this.widgets[o],r=s._getOriRect();if(s.id!==t.id&&s.id!==e.id&&this._checkCollision(e,r))return!1}return!0},h.prototype._getColArr=function(t){for(var e=[],i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o&&o.id!==t.id){var s=this._getMaxRect(o);if(o.isMaximized()&&(!s||this._checkCollision(t,s)))return!1;if(this._checkCollision(t,o)){if(o.isFixed()&&this.changingWidget===t)return!1;e.push(o)}}}return e},h.prototype._pushWidgets=function(t){var e=[],i=this._getColArr(t);if(!1===i)return!1;i.sort((function(t,e){return e.y-t.y}));for(var o=0;o<i.length;o++){var s=i[o];if(s&&s.id!==t.id)if(s.isFixed())e.push(s);else if(this._changeWidget(s,null,t.y+t.unitHeight,null,null),!this._pushWidgets(s))return!1}for(var r=0;r<e.length;r++)this._pushWidgets(e[r]);return!0},h.prototype._pullWidgets=function(){if("pushpull"===this.options.mode){this.widgets.sort((function(t,e){return t.y-e.y}));for(var t=0;t<this.widgets.length;t++){var e=0,i=this.widgets[t];if(!i.isFixed()){for(var o=0;o<t;o++){var s=this.widgets[o]
;if(i.x+i.unitWidth>s.x&&i.x<s.x+s.unitWidth){if(s.isFixed()&&e+i.unitHeight<=s.y){var r=this.widgets.splice(t,1)[0];this.widgets.splice(o,0,r);break}s.y+s.unitHeight>e&&(e=s.y+s.unitHeight)}}i.y!==e&&this._changeWidget(i,null,e,null,null)}}}},h.prototype._calcSwitchPos=function(t,e,i,o,s){var r,a,n=t._getOriRect();if(this._checkCollision(t,n)){var l=0,h=0;t.oriX>t.x&&t.x+t.unitWidth>t.oriX&&(l=t.x+t.unitWidth-t.oriX),t.oriY>t.y&&t.y+t.unitHeight>t.oriY&&(h=t.y+t.unitHeight-t.oriY);for(var d=i[0],u=i[0],c=1;c<i.length;c++)d=o(d,i[c]),u=s(u,i[c]);d=d.oriX,u=u.oriY,r=t.oriX+l+(e.oriX-d),a=t.oriY+h+(e.oriY-u)}else r=t.oriX+(e.oriX-t.x),a=t.oriY+(e.oriY-t.y);return{newX:r,newY:a}},h.prototype._resolveCollision=function(t){try{if("pushpull"===this.options.mode){if(!1===this._pushWidgets(t))return!1;this._pullWidgets()}else{if("switch"!==this.options.mode)return!1;var e=this._getColArr(t);if(!1===e)return!1;for(var i=function(t,e){return t.oriX<=e.oriX?t:e},o=function(t,e){return t.oriY<=e.oriY?t:e},s=0;s<e.length;s++){var a=e[s];if(!a||a.isFixed())return!1;var n=this._calcSwitchPos(t,a,e,i,o),l=n.newX,h=n.newY;if(!this.isValidPos(l,h,a.unitWidth,a.unitHeight))return!1;if(this._changeWidget(a,l,h,null,null),!this._checkSwitchable(t,a))return!1}}return!0}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.getWidgetById=function(t){for(var e=0;e<this.widgets.length;e++){var i=this.widgets[e];if(i.id===t||i.id===this.id+"_"+t)return i}return null},h.prototype.getWidgetByTitle=function(t){for(var e=0;e<this.widgets.length;e++){var i=this.widgets[e];if(i.title===t)return i}return null},h.prototype.importWidgets=function(t,e){try{return e&&this._removeWidgets(this.widgets),this.addWidgets(t||[])}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.importWidget=function(t,e){try{for(var i=0;i<this.widgets.length;i++){var o=this.widgets[i];if((o.id===t||o.id===this.id+"_"+t)&&(e.id=t,this.removeWidgets([o.id])&&this.addWidgets(e)))return!0}return!1}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.exportWidgets=function(){try{for(var t=[],e=0;e<this.widgets.length;e++){var i=this.widgets[e];t.push(i.getWidgetInfo())}return t}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.setTitleClass=function(t,e){try{for(var i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o.id===t||o.id===this.id+"_"+t){var s=this.getElementById(o.id+"_title");o.titleClass=e,this.addClass(s,e)}}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.removeTitleClass=function(t,e){try{for(var i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o.id===t||o.id===this.id+"_"+t){var s=this.getElementById(o.id+"_title");this.removeClass(s,e)}}}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.exportWidget=function(t){try{for(var e=null,i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o.id===t||o.id===this.id+"_"+t){e=o.getWidgetInfo();break}}return e}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.addWidgets=function(t){try{n.D.isArray(t)||(t=[t]);for(var e=null,i=[],o=!0,s=0;s<t.length;s++){if((e=t[s]).x=parseInt(e.x,10)||0,e.y=parseInt(e.y,10)||0,e.unitWidth=parseInt(e.unitWidth,10),e.unitHeight=parseInt(e.unitHeight,10),!this.isValidPos(e.x,e.y,e.unitWidth,e.unitHeight)){o=!1;break}if(e.id){if(null!==this.getWidgetById(e.id))return void $l("["+this.id+"] 중복된 widget id를 사용했습니다.");e.org_id=e.id,e.id=this.id+"_"+e.id}else{for(var l="widget"+this.widgetIdCount++;null!==this.getWidgetById(l);)l="widget"+this.widgetIdCount++;e.id=this.id+"_"+l,e.org_id=l}var h=new WebSquare.uiplugin.widget(e.id,e);if(h.appendTo(this),this.widgets.push(h),i.push(h),!this._resolveCollision(h)){o=!1;break}}if(o){for(var d=0;d<i.length;d++){i[d].activate()}this._commit()}else $l("["+this.id+"] 해당 위치에 widget을 추가할 수 없습니다."),this.widgetIdCount--,this._rollback(),this._removeWidgets(i),i=null;return this.redraw(),a.B.fireEvent(this,"onload"),i}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.removeWidgets=function(t){try{
n.D.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var s=t[i];"object"===(0,o.Z)(s)&&null!==s&&(s=s.id);var a=this.getWidgetById(s);if(!a)return null;e.push(a)}return this._removeWidgets(e)}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype._removeWidgets=function(t){try{n.D.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++)e.push(t[i].id);for(i=0;i<e.length;i++)for(var o=0;o<this.widgets.length;o++)if(this.widgets[o].id===e[i]){this.widgets.splice(o,1)[0].remove();break}return this._commit(),this._pullWidgets(),this.redraw(),e}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.removeWidgetsAll=function(){try{for(var t=this.widgets.length,e=0;e<t;e++)this.widgets[e].remove();return void(this.widgets=[])}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.moveWidget=function(t,e,i){try{if(!this.widgetMove)return!1;var o=this.getWidgetById(t);if(o.isFixed())return!1;if(this.changingWidget=o,this._rollback(),!this._changeWidget(o,e,i,null,null))return!1;var s=this._resolveCollision(o);if(s){var n=o._getOriRect();this._commit(),a.B.fireEvent(this,"onwidgetmove",t,o.getRect(),n)}else this._rollback();return this.redraw(),this.changingWidget=null,s}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype._moveWidget=function(t,e,i){try{if(!this.widgetMove)return!1;var o=this.getWidgetById(t);if(o.isFixed())return!1;if(this.changingWidget=o,this._rollback(),!this._changeWidget(o,e,i,null,null))return!1;var s=this._resolveCollision(o);return s||this._rollback(),this.redraw(),this.changingWidget=null,s}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype.resizeWidget=function(t,e,i,o){try{if(o||(o={}),!this.widgetResize&&!o.force)return!1;var s=this.getWidgetById(t);if(s.isFixed()&&!s.options.minimizeonfixed)return!1;if(this.changingWidget=s,this._rollback(),!this._changeWidget(s,null,null,e,i,o))return!1;var n=this._resolveCollision(s);if(n){var l=s._getOriRect();this._commit(),a.B.fireEvent(this,"onwidgetresize",t,s.getRect(),l)}else this._rollback();return this.redraw(),this.changingWidget=null,n}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype._resizeWidget=function(t,e,i){try{if(!this.widgetResize)return!1;var o=this.getWidgetById(t);if(o.isFixed()||o.isMinimized())return!1;if(this.changingWidget=o,this._rollback(),!this._changeWidget(o,null,null,e,i))return!1;var s=this._resolveCollision(o);return s||this._rollback(),this.redraw(),this.changingWidget=null,s}catch(t){r.w.printStackTrace(t,null,this)}},h.prototype._getClickPos=function(t){var e,i;return t.touches&&1==t.touches.length?(e=t.touches[0].pageX,i=t.touches[0].pageY):window.navigator.msPointerEnabled&&"touch"==t.pointerType?(e=t.pageX,i=t.pageY):(e=a.B.getMouseX(t),i=a.B.getMouseY(t)),this.zoomLevel&&(e/=this.zoomLevel,i/=this.zoomLevel),{posX:e,posY:i}},h.prototype._makeGhost=function(t){this.ghost=document.createElement("div"),this.contentRender.appendChild(this.ghost),this.ghost.style.left=this.dragDropElem.style.left,this.ghost.style.top=this.dragDropElem.style.top,this.ghost.style.width=this.dragDropElem.style.width,this.ghost.style.height=this.dragDropElem.style.height,this.ghost.className="w2widget_ghost";var e=this._getClickPos(t);this.ghost.oriX=e.posX-this.dragDropElem.offsetLeft,this.ghost.oriY=e.posY-this.dragDropElem.offsetTop},h.prototype.enableWidgetTitle=function(t){if("boolean"==typeof t)for(var e=0,i=this.widgets.length;e<i;e++)this.widgets[e].showTitle(t)},h.prototype.enableWidgetMove=function(t){"boolean"==typeof t&&(this.options.widgetMove=t,this.widgetMove=t)},h.prototype.enableWidgetResize=function(t){if("boolean"==typeof t){this.options.widgetResize=t,this.widgetResize=t;for(var e=0,i=this.widgets.length;e<i;e++)this.widgets[e].setResizable(t)}},h.prototype.handleMousedownEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2widget_title_buttons")&&(this.dragDropElem=null,e.stop()),
e.match("w2widget_btnResize"))this.options.widgetResize?(this.dragDropElem=e.getElement().parentNode,this.isResizing=!0):(this.dragDropElem=null,this.isResizing=!1),e.stop();else if(e.match("w2widget_title"))this.options.widgetMove?(this.dragDropElem=e.getElement().parentNode,this.isMoving=!0):(this.dragDropElem=null,this.isMoving=!1),e.stop();else if(e.match("w2widget_btnMinimize")){e.element.className.indexOf("w2widget_btnMinimizeOn")>-1?WebSquare.style.removeClass(e.element,"w2widget_btnMinimizeOn"):WebSquare.style.addClass(e.element,"w2widget_btnMinimizeOn")}else if(e.match("w2widget_btnMaximize")){e.element.className.indexOf("w2widget_btnMaximizeOn")>-1?WebSquare.style.removeClass(e.element,"w2widget_btnMaximizeOn"):WebSquare.style.addClass(e.element,"w2widget_btnMaximizeOn")}e=null;var i=function(){var t=this;t.dragDropElem=null,t.isResizing=!1,t.isMoving=!1};if(this.dragDropElem){a.B.stopEvent(t);var o=this.getWidgetById(this.dragDropElem.id);(this.isResizing||this.isMoving)&&(!this.isResizing||this.widgetResize&&o.isResizable())&&(!this.isMoving||this.widgetMove&&o.isMovable())?(o.addClass("w2widget_changing"),t.touches&&1==t.touches.length?(this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleMouseupEvent))):window.PointerEvent?(this.event.addListener(this.render,"onpointermove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onpointerup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.event.addListener(this.render,"onpointerleave",this.event.bindAsEventListener(this,this.handleMouseupEvent))):window.navigator.msPointerEnabled&&"touch"==t.pointerType?(this.event.addListener(this.render,"onMSPointerMove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onMSPointerUp",this.event.bindAsEventListener(this,this.handleMouseupEvent))):(this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseupEvent)))):i.call(this)}else i.call(this)},h.prototype.handleMousemoveEvent=function(t){if(this.dragDropElem){this.ghost||this._makeGhost(t);var e=this._getClickPos(t),i=e.posX,o=e.posY;if(!0===this.isResizing){this.getWidgetById(this.dragDropElem.id)._setTitleEllipsis(),i-=WebSquare.style.getAbsoluteLeft(this.contentRender),o-=WebSquare.style.getAbsoluteTop(this.contentRender);var s=parseFloat(this.ghost.style.left),r=100*(i/this.fullWidth-s/100)+this.verticalMargin,n=o-parseInt(this.ghost.style.top,10)+this.horizontalMargin;r=(r=r<this.unitWidth?this.unitWidth:r)+s>100?100-s:r,n=n<this.unitHeightPixel?this.unitHeightPixel:n,this.dragDropElem.style.width=r-this.verticalMargin+"%",this.dragDropElem.style.height=n-this.horizontalMargin+"px",r=Math.round(r/this.unitWidth),n=Math.round(n/this.unitHeightPixel),this.ghost.oldWidth===r&&this.ghost.oldHeight===n||(this.ghost.oldWidth=r,this.ghost.oldHeight=n,this.relocResult=this._resizeWidget(this.dragDropElem.id,r,n))}else if(!0===this.isMoving){i-=this.ghost.oriX,o-=this.ghost.oriY,this.dragDropElem.style.left=i+"px",this.dragDropElem.style.top=o+"px";var l=Math.round((i/this.fullWidth*100-this.verticalMargin/2)/this.unitWidth),h=Math.round((o-this.horizontalMargin/2)/this.unitHeightPixel),d=Math.round(parseFloat(this.ghost.style.width)/this.unitWidth);l=(l=l<0?0:l)+d>this.options.cols?this.options.cols-d:l,h=h<0?0:h,this.ghost.oldX===l&&this.ghost.oldY===h||(this.ghost.oldX=l,this.ghost.oldY=h,this.relocResult=this._moveWidget(this.dragDropElem.id,l,h))}a.B.preventDefault(t)}},h.prototype.handleMouseupEvent=function(){if(this.dragDropElem){
this.ghost&&(this.dragDropElem.parentNode.removeChild(this.ghost),this.ghost=null);var t=this.getWidgetById(this.dragDropElem.id);if(t.removeClass("w2widget_changing"),this.dragDropElem=null,this.relocResult){var e=t._getOriRect();this._commit(),this.isMoving?a.B.fireEvent(this,"onwidgetmove",t.id,t.getRect(),e):this.isResizing&&a.B.fireEvent(this,"onwidgetresize",t.id,t.getRect(),e)}this.isResizing=!1,this.isMoving=!1,this.redraw()}},h.prototype.refreshAdaptive=function(){try{this.redraw();for(var t=0;t<this.childControlList.length;t++)this.childControlList[t].refreshAdaptive&&this.childControlList[t].refreshAdaptive()}catch(t){r.w.printStackTrace(t)}};var d=function(t,e,i){l.s.call(this,t,e,i)};s.x.extend(d.prototype,l.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.widget",pluginName:"widget",title:"",titleClass:"",hasTitleBar:!0,src:"",x:0,y:0,unitWidth:1,unitHeight:1,scope:!1,params:void 0,fixed:!1,minimizeonfixed:!1,maximizeonfixed:!1,oriFixed:!1,minimized:!1,maximized:!1,resized:!1,maxConfig:{left:-1,right:-1,top:-1,bottom:-1},buttons:[{useAPI:"toggleFixed",id:"btnFix",className:"w2widget_btnFix",isCustom:!1},{useAPI:"toggleMinimized",id:"btnMinimize",className:"w2widget_btnMinimize",isCustom:!1},{useAPI:"toggleMaximized",id:"btnMaximize",className:"w2widget_btnMaximize",isCustom:!1},{useAPI:"closeWidget",id:"btnClose",className:"w2widget_btnClose",isCustom:!1}],maximizeFormatter:null,buttonFormatter:null},d.prototype.initialize=function(t){this.src=this.options.src,this.scope=this.options.scope,this.params=this.options.params,this.minimized=this.options.minimized,this.maximized=this.options.maximized,this.x=this.options.x,this.y=this.options.y,this.unitWidth=this.options.unitWidth,this.unitHeight=this.options.unitHeight,this.fixed=this.options.fixed,this.oriFixed=this.options.oriFixed,this.oriX=this.x,this.oriY=this.y,this.oriUnitWidth=this.unitWidth,this.oriUnitHeight=this.unitHeight,this.dirty=!1,this.title=this.options.title,this.resized=this.options.resized,this.savedUnitHeight=null,this.buttons=this.options.buttons,this.maxConfig=this.options.maxConfig,this.maximizeFormatter=this.options.maximizeFormatter,this.buttonFormatter=this.options.buttonFormatter,this.titleClass=this.options.titleClass,this.maximizeFormatter&&this.setMaximizeFormatter(this.maximizeFormatter),this.buttonFormatter&&this.setButtonFormatter(this.buttonFormatter)},d.prototype.toHTML=function(){var t=[],e=""===this.options.style?"":"style='"+this.options.style+"'";if(t.push("<div id='"+this.id+"' "+e+" class='w2widget "+this.options.className+"'>"),this.options.hasTitleBar){t.push("<div id='"+this.id+"_title' class='w2widget_title "+this.options.titleClass+"'>"),t.push("<div id='"+this.id+"_title_icon' class='w2widget_icon'></div>"),t.push("<span id='"+this.id+"_title_text' class='w2widget_title_text'>"+this.options.title+"</span>"),t.push("<div id='"+this.id+"_title_buttons' class='w2widget_title_buttons'>");for(var i=0;i<this.buttons.length;i++){var o=this.buttons[i];t.push("<div id='"+this.id+"_title_"+o.id+"' class='"+o.className+"'></div>")}t.push("</div>"),t.push("</div>")}return t.push("<div id='"+this.id+"_btnResize' class='w2widget_btnResize'></div>"),t.push("</div>"),t.join("")},d.prototype.setAction=function(){var t=this.parentControl.options&&this.parentControl.options.async,e=new WebSquare.uiplugin.wframe(this.id+"_content",{className:this.options.hasTitleBar?"w2widget_content":"w2widget_content_notitlebar",src:this.options.src,scope:this.options.scope,mode:t?"async":"sync",isWidget:!0});try{var i=this.options.org_id,o=this.parentControl.id,s=this.parentControl.uuid;if(e.options.scope&&e.options.scopeFunction)for(var l in e.scopeVariable)e.scopeVariable[l][e.options.scopeFunction].widget={},e.scopeVariable[l][e.options.scopeFunction].widget.getWidgetId=function(){return i},e.scopeVariable[l][e.options.scopeFunction].widget.getWidgetContainerId=function(){return o},
e.scopeVariable[l][e.options.scopeFunction].widget.getWidgetContainer=function(){return WebSquare.idCache[s]}}catch(t){r.w.printStackTrace(t,null,this)}e.appendTo(this),e.makeFrame(!0),e.activeStatus="active",a.B.fireEvent(this.parentControl,"onwidgetload",this.options.id,this.options.org_id),this.resized=this.parentControl.widgetResize,this.isResizable()&&!1!==this.parentControl.widgetResize||this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTitleClick)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),!1===t&&n.D.isIEAllVersion("6 7")&&this.parentControl.redraw()},d.prototype.handleTitleClick=function(t){if(this.parentControl&&void 0!==WebSquare.idCache[this.parentControl.uuid]){for(var e=this.event.getTargetIterator(t,this.render);e.next();)for(var i=0;i<this.buttons.length;i++){var o=this.buttons[i];if(e.match(null,this.id+"_title_"+o.id)||e.match(null,o.id)){o.isCustom&&a.B.fireEvent(this.parentControl,"onclickcustombtn",this.id,o.id),o.useAPI&&"function"==typeof this[o.useAPI]&&this[o.useAPI](),e.stop();break}}e=null}},d.prototype.handleDblClickEvent=function(t){for(var e=this.parentControl.options.preventMaximizeByTitle,i=this.event.getTargetIterator(t,this.render);i.next();)i.match("w2widget_title")&&!e&&this.toggleMaximized();i=null},d.prototype.isFixed=function(){return this.fixed},d.prototype.toggleFixed=function(){this.isFixed()?this.unsetFixed():this.setFixed()},d.prototype.setFixed=function(){return!this.isFixed()&&(this.fixed=!0,this.addClass("w2widget_fixed"),this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),a.B.fireEvent(this.parentControl,"onwidgetfix",this.id),!0)},d.prototype.unsetFixed=function(){return!(!this.isFixed()||this.isMaximized())&&(this.fixed=!1,this.removeClass("w2widget_fixed"),this.isResizable()&&this.removeClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),!0)},d.prototype.isMaximized=function(){return this.maximized},d.prototype.setMaximized=function(){return!(this.isMaximized()||this.isFixed()&&!this.options.maximizeonfixed)&&(this.maximized=!0,this.addClass("w2widget_maximized"),this.isFixed()?this.oriFixed=!0:this.setFixed(),a.B.fireEvent(this.parentControl,"onwidgetmaximize",this.id),this.parentControl.redraw(),!0)},d.prototype.unsetMaximized=function(){return!!this.isMaximized()&&(this.maximized=!1,this.removeClass("w2widget_maximized"),this.oriFixed?this.oriFixed=!1:this.unsetFixed(),a.B.fireEvent(this.parentControl,"onwidgetrestore",this.id),this.parentControl.redraw(),!0)},d.prototype.toggleMaximized=function(){return this.isMaximized()?this.unsetMaximized():this.setMaximized()},d.prototype.isMinimized=function(){return this.minimized},d.prototype._calcMinimizedUnitHeight=function(){for(var t=this.getElementById(this.id+"_title"),e=parseInt(WebSquare.style.getStyle(t,"height"),10),i=0,o=this.parentControl.unitHeightPixel,s=this.parentControl._getMarginedHeight;s.call(this.parentControl,i*o)<e;)i+=1;return i},d.prototype.setMinimized=function(){if(this.isMinimized()||this.isFixed()&&!this.options.minimizeonfixed)return!1;this.savedUnitHeight=this.unitHeight;var t=this.parentControl.resizeWidget(this.id,this.width,this._calcMinimizedUnitHeight(),{force:this.parentControl.oneColumn&&this.parentControl.options.forceMinMax||this.options.minimizeonfixed});return t?(this.minimized=!0,this.addClass("w2widget_minimized"),this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),a.B.fireEvent(this.parentControl,"onwidgetminimize",this.id)):this.savedUnitHeight=null,t},d.prototype.unsetMinimized=function(){if(!this.isMinimized()||this.isFixed()&&!this.options.minimizeonfixed)return!1
;var t=this.parentControl.resizeWidget(this.id,this.width,this.savedUnitHeight,{force:this.parentControl.oneColumn&&this.parentControl.options.forceMinMax||this.options.minimizeonfixed});return t&&(this.savedUnitHeight=null,this.minimized=!1,this.removeClass("w2widget_minimized"),this.removeClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),a.B.fireEvent(this.parentControl,"onwidgetrestore",this.id)),t},d.prototype.toggleMinimized=function(){var t=!1;return(t=this.isMinimized()?this.unsetMinimized():this.setMinimized())&&this.parentControl.redraw(),t},d.prototype.isMovable=function(){return!this.isFixed()},d.prototype.isResizable=function(){return!this.isFixed()&&!this.isMinimized()&&(!this.parentControl||!1!==this.parentControl.widgetResize)&&this.resized},d.prototype.setTitle=function(t){var e=this.getElementById(this.id+"_title_text");return!!e&&(e["textContent"in e?"textContent":"innerText"]=t+"",this.title=t+"",!0)},d.prototype.getTitle=function(){var t=this.getElementById(this.id+"_title_text");return!!t&&t["textContent"in t?"textContent":"innerText"]},d.prototype.setParams=function(t){var e=this.getChild(this.id+"_content");return this.params=t,"object"!==(0,o.Z)(e.paramObj)&&(e.paramObj={}),e.paramObj.params=this.params,!0},d.prototype.getParams=function(){return this.params},d.prototype.closeWidget=function(){var t=this.parentControl,e=this.id;if(!1===a.B.fireEvent(t,"onbeforewidgetclose",e))return!1;var i=this.parentControl._removeWidgets(this);return a.B.fireEvent(t,"onafterwidgetclose",e),i},d.prototype.getWidgetInfo=function(){var t=this.parentControl.id,e={};return e.id=this.id.slice(t.length+1),e.src=this.src,e.scope=this.options.scope,e.minimized=this.minimized,e.maximized=this.maximized,e.x=this.x,e.y=this.y,e.unitWidth=this.unitWidth,e.unitHeight=this.unitHeight,e.fixed=this.fixed,e.oriFixed=this.oriFixed,e.title=this.title,e.className=this.render.className.replace("w2widget ",""),e.maximizeFormatter=this.maximizeFormatter,e.buttonFormatter=this.buttonFormatter,e.params=this.params,e.titleClass=this.titleClass,e.onWidgetLoad=this.onWidgetLoad,e},d.prototype.setSrc=function(t){return!!this.getChild(this.id+"_content").setSrc(t)&&(this.src=t,!0)},d.prototype.getSrc=function(){return this.getChild(this.id+"_content").getSrc()},d.prototype.getObj=function(t){return this.getChild(this.id+"_content").getObj(t)},d.prototype.getObjList=function(){return this.getChild(this.id+"_content").getObjList()},d.prototype.refresh=function(){if(!this.getChild(this.id+"_content").setSrc(this.src))return!1},d.prototype.getRect=function(){return{x:this.x,y:this.y,unitWidth:this.unitWidth,unitHeight:this.unitHeight}},d.prototype._getOriRect=function(){return{x:this.oriX,y:this.oriY,unitWidth:this.oriUnitWidth,unitHeight:this.oriUnitHeight}},d.prototype.getRectByPx=function(){return{x:this.render.offsetLeft,y:this.render.offsetTop,width:this.render.clientWidth,height:this.render.clientHeight}},d.prototype.setButtonFormatter=function(t){var e=n.D.getGlobalFunction(t,this.scope_id);if("function"!=typeof e)return!1;for(var i=this.defaultOptions.buttons,o=e(this.id),s=0;s<o.length;s++){var r=o[s];if(r.useDefault)switch(r.useDefault){case"fix":o[s]=i[0];break;case"minimize":o[s]=i[1];break;case"maximize":o[s]=i[2];break;case"close":o[s]=i[3];break;default:return!1}}return this.buttons=o,!0},d.prototype.setMaximizeFormatter=function(t){var e=n.D.getGlobalFunction(t,this.scope_id);if("function"!=typeof e)return!1;var i=e(this.id);if(!i)return!1;for(var o=["left","right","top","bottom"],s=0;s<o.length;s++){var r=o[s];i[r]!==parseInt(i[r],10)&&(i[r]=0)}return this.maxConfig=i,!0},d.prototype.getMaximizeConfig=function(){return this.maxConfig},d.prototype.showTitle=function(t){var e=document.getElementById(this.id+"_title"),i=document.getElementById(this.id+"_content");if(!e){if(!t)return;var o=document.getElementById(this.id+"_btnResize"),s=document.createElement("div"),r=[]
;r.push("<div id='"+this.id+"_title' class='w2widget_title "+this.options.titleClass+"'>"),r.push("<div id='"+this.id+"_title_icon' class='w2widget_icon'></div>"),r.push("<span id='"+this.id+"_title_text' class='w2widget_title_text'>"+this.options.title+"</span>"),r.push("<div id='"+this.id+"_title_buttons' class='w2widget_title_buttons'>");for(var a=0;a<this.buttons.length;a++){var n=this.buttons[a];r.push("<div id='"+this.id+"_title_"+n.id+"' class='"+n.className+"'></div>")}r.push("</div>"),r.push("</div>"),s.innerHTML=r.join("");var l=s.firstChild;this.render.insertBefore(l,o),e=document.getElementById(this.id+"_title");var h=document.getElementById(this.id+"_title_text");if(!h.style.width){var d=document.getElementById(this.id+"_title_icon"),u=document.getElementById(this.id+"_title_buttons");h.style.width=e.clientWidth-15-d.clientWidth-u.clientWidth+"px"}}t?(e.style.display="block",i.style.top=e.clientHeight+"px",this.addClass(i,"w2widget_content"),this.removeClass(i,"w2widget_content_notitlebar"),this.options.hasTitleBar=!0):(e.style.display="none",i.style.top="0px",this.addClass(i,"w2widget_content_notitlebar"),this.removeClass(i,"w2widget_content"),this.options.hasTitleBar=!1)},d.prototype.setResizable=function(t){if("boolean"==typeof t){var e=document.getElementById(this.id+"_btnResize"),i=t&&0!=this.parentControl.widgetResize;i?this.removeClass(e,"w2widget_btnResize_halt"):this.addClass(e,"w2widget_btnResize_halt"),this.resized=i}},d.prototype._setTitleEllipsis=function(){try{var t=document.getElementById(this.id+"_title");if(!t)return;var e=document.getElementById(this.id+"_title_icon"),i=document.getElementById(this.id+"_title_text"),o=document.getElementById(this.id+"_title_buttons");i.style.width=t.clientWidth-15-e.clientWidth-o.clientWidth+"px"}catch(t){r.w.printStackTrace(t,null,this)}},d.prototype.getWindow=function(){try{var t,e=this.getChild(this.id+"_content");return e&&(t=e.getWindow()),t}catch(t){r.w.printStackTrace(t,null,this)}}},6093:function(t,e,i){"use strict";i.r(e),i.d(e,{wq_window:function(){return c}});var o=i(484),s=i(1974),r=i(5052),a=i(5948),n=i(1454),l=i(8683),h=i(9075),d=i(1),u=i(3252),c=function(t,e,i){d.s.call(this,t,e,i)};s.x.extend(c.prototype,d.s.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.window",pluginName:"window",parseChild:!0,userEvents:["onclose","onminimize","onmaximize","onrestore","ondragstart","ondragend","onwindowkeyup","onwindowmousedown","onpopup","ondrawcomplete","onwindowload","onwindowunload"],defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",windowTitle:"",windowHeaderHTML:"",nameLayerHTML:"",statusMsg:"",customMsg:"",src:"",wmode:!1,useStatusMsg:!0,useCustomMsg:!1,windowTooltipDisplay:!0,title:"",dragResizable:!0,dragResizableHeader:!1,displayParentWindowScroll:!1,disableCloseButton:!1,spa:!1,noAttatchedEvent:!1,params:"",popupParam:"",spaReplaceHistory:!1,buttonFormatter:"",foldOnMinimized:!1,useATagBtn:!1,windowDragMove:!1,windowMoveType:"restrict",frameModal:"",processMsgFrame:!1},c.prototype.initialize=function(t){try{if(this.frame=null,this.modal=null,this.windowInfo={status:this.options.parent?"maximized":"restored",drag:!this.options.parent,top:this.options.defaultTop,left:this.options.defaultLeft,defaultWidth:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",defaultHeight:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",width:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",
height:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",minWidth:parseInt(this.options.minimumWidth,10)<150?"150px":this.options.minimumWidth,minHeight:parseInt(this.options.minimumHeight,10)<150?"150px":this.options.minimumHeight,minimized:this.options.minimized||!1,setInfo:function(t){this.top=t.style.top,this.left=t.style.left,this.width=t.style.width,this.height=t.style.height},getInfo:function(t,e){t.style.top=this.top,t.style.left=this.left,t.style.width="restored"===e?this.defaultWidth:this.width,t.style.height="restored"===e?this.defaultHeight:this.height}},"iframe"==this.options.frameMode||this.options.frameMode,"true"===r.v.getConfiguration("/WebSquare/spa/@value")&&(this.options.spa=!0),this.options.parent&&this.options.parent.options.hideTitleOnMaximize&&(this.hideTitleOnMaximize=!0),this.options.parent&&this.options.parent.options.usePopup&&(this.usePopup=!0),this._multiViewUUID="",this._direction=0,this.buttons=[],this.buttonInfo={},this.hasButtons=!1,this.options.buttonFormatter){var e=l.D.getGlobalFunction(this.options.buttonFormatter,this.scope_id);"function"==typeof e&&(this.hasButtons=!0,this.buttonInfo={},this.buttonInfo.buttons=e(),this.buttonInfo.alignment="right",this.buttonInfo.useButtonFormatter=!0)}this.popupIdx=0,this._isWframePopup=!1,this.options.windowDragMove||"true"!==r.v.getConfiguration("/WebSquare/window/windowDragMove/@value")||(this.options.windowDragMove=!0)}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=""==this.options.disabled?"":"disabled='true'",e=[],i="",o="",s=""==this.options.style?"":"style='"+this.options.style+"'",r="restored"===this.windowInfo.status?"w2window_restored":"w2window_maximized",n="overflow"===this.options.windowMoveType?" w2window_window_move_type":"";this.options.windowTooltipDisplay&&(o="title='"+this.options.windowTitle+"'"),e.push("<div "+t+" id='"+this.id+"' "+s+" class='w2window "+r+" "+this.options.className+n+"' tabindex='0' role='application' >"),1==this.options.wmode&&(i=WebSquare.net.getSSLBlankPage(),e.push("<iframe frameBorder='no' title='"+this.options.title+"' class='w2window_wmode' "+i+"></iframe>"));var h="w2window_header",d="w2window_body";if(1==this.hideTitleOnMaximize&&"maximized"==this.windowInfo.status&&(h+=" w2window_header_extend",d+=" w2window_body_extend"),""==this.options.windowHeaderHTML){if(e.push("<div id='"+this.id+"_header' class='"+h+"'"+o+">"),e.push("<div id='"+this.id+"_header_icon' class='w2window_header_icon'></div>"),!0===this.options.useATagTitle?e.push("<a id='"+this.id+"_header_title' class='w2window_header_title' href='javascript:void(null);' title='"+this.options.windowTitle+"' style='text-decoration:none;'>"+this.options.windowTitle+"</a>"):e.push("<div id='"+this.id+"_header_title' class='w2window_header_title'>"+this.options.windowTitle+"</div>"),this.hasButtons){e.push("<div id='"+this.id+"_header_buttonArea' class='w2window_header_buttonArea'>");for(var u=0;u<this.buttonInfo.buttons.length;u++){var c=this.buttonInfo.buttons[u].title||"";if(this.buttonInfo.useButtonFormatter){var p=this.buttonInfo.buttons[u].className||"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_custom_button "+p+"' btn_index='"+u+"' title='"+c+"' ></div>")}else{var g=this.buttonInfo.buttons[u].value?"<span id='"+this.id+"_header_button_"+u+"_value' class='w2window_header_button_value' title='"+c+"' btn_index='"+u+"' > "+this.buttonInfo.buttons[u].value+" </span>":"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_button w2window_header_button_"+u+"' btn_index='"+u+"' >"),e.push("<div id='"+this.id+"_header_button_"+u+"_content' class='w2window_header_button_content w2window_header_button_content_"+u+"' btn_index='"+u+"' >"),e.push(g),e.push("</div>"),e.push("</div>")}}e.push("</div>")}
var m=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+m+"'>"),e.push("<div id='"+this.id+"_minimize' class='w2window_minimize' title='"+WebSquare.language.getMessage("Window_minimize")+"'></div>"),e.push("<div id='"+this.id+"_restore' class='w2window_restore' title='"+WebSquare.language.getMessage("Window_restore")+"' ></div>");var f=this.options.disableCloseButton?" w2window_close_disabled":"";this.options.useATagBtn?l.D.isMobile()?e.push("<a id='"+this.id+"_close' role='button' class='w2window_close w2window_close_atag"+f+"' href='javascript:void(null);' >"+WebSquare.language.getMessage("Window_close")+"' </a></div>"):e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+f+"' href='javascript:void(null);' title='"+WebSquare.language.getMessage("Window_close")+"'>"+WebSquare.language.getMessage("Window_close")+"</a></div>"):e.push("<div id='"+this.id+"_close' class='w2window_close"+f+"' title='"+WebSquare.language.getMessage("Window_close")+"' ></div>"),1==this.usePopup&&e.push("<div id='"+this.id+"_popup' class='w2window_popup' title='"+WebSquare.language.getMessage("Window_popup")+"' ></div>"),e.push("</div>"),e.push("</div>")}else e.push("<div id='"+this.id+"_header' class='"+h+"'>"+this.options.windowHeaderHTML+"</div>");return this.options.useStatusMsg?e.push("<div id='"+this.id+"_body' class='"+d+"'>"):e.push("<div id='"+this.id+"_body' class='"+d+" w2window_no_status'>"),l.D.isMobile()&&this.options.useATagBtn&&e.push("<button id='"+this.id+"_start' name='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2window_popup_start'>"+WebSquare.language.getMessage("Window_popup_start")+"</button>"),e.push("<div id='"+this.id+"_content' class='w2window_content'>"),e.push("</div>"),(this.options.useStatusMsg||this.options.useCustomMsg)&&(e.push("<div id='"+this.id+"_status' class='w2window_status'>"),this.options.useStatusMsg&&e.push("<div id='"+this.id+"_msg' class='w2window_msg'>"+this.options.statusMsg+"</div>"),this.options.useCustomMsg&&e.push("<div id='"+this.id+"_custom_msg' class='w2window_custom_msg'>"+this.options.customMsg+"</div>"),e.push("</div>")),e.push("</div>"),this.options.dragResizable&&(e.push("<div id='"+this.id+"_resize1' class='w2window_resize_right'></div>"),e.push("<div id='"+this.id+"_resize2' class='w2window_resize'></div>"),e.push("<div id='"+this.id+"_resize3' class='w2window_resize_bottom'></div>"),e.push("<div id='"+this.id+"_resize4' class='w2window_resize_bottomLeft'></div>"),e.push("<div id='"+this.id+"_resize5' class='w2window_resize_left'></div>"),this.options.dragResizableHeader&&(e.push("<div id='"+this.id+"_resize6' class='w2window_resize_upLeft'></div>"),e.push("<div id='"+this.id+"_resize7' class='w2window_resize_up'></div>"),e.push("<div id='"+this.id+"_resize8' class='w2window_resize_upRight'></div>"))),e.push("</div>"),e.join("")}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.dom.header=document.getElementById(this.id+"_header"),this.dom.statusMsg=document.getElementById(this.id+"_msg"),this.dom.customMsg=document.getElementById(this.id+"_custom_msg"),this.dom.body=document.getElementById(this.id+"_body"),void 0!==this.options.useMaximize&&this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStartEvent)),l.D.isMobile()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleClickEvent)),
this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),l.D.getBoolean(r.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)))):(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent))),this.drawFrame(this.options.src),this.hasButtons){for(var t=0;t<this.buttonInfo.buttons.length;t++){if(!this.buttonInfo.useButtonFormatter){var e=document.getElementById(this.id+"_header_button_"+t+"_content");e.style.marginTop=-e.offsetHeight/2+"px",e.style.marginLeft=-e.offsetWidth/2+"px"}if(this.buttonInfo.buttons[t].value){var i=document.getElementById(this.id+"_header_button_"+t+"_value");i.style.marginTop=-i.offsetHeight/2+"px",i.style.marginLeft=-i.offsetWidth/2+"px"}this.buttons.push({btn_index:t,disable:!1,hidden:!1,contentDom:e,valueDom:i})}if("right"==this.buttonInfo.alignment){var o=document.getElementById(this.id+"_header_control"),s=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(s,"float","right"),WebSquare.style.setStyle(s,"left","-"+o.offsetWidth+"px")}if(1==this.buttonInfo.useButtonFormatter){s=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(s,"height",s.offsetHeight-5+"px"),WebSquare.style.setStyle(s,"padding-top","5px")}}}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.drawFrame=function(t,e){try{if(this.frame&&(this.removeControl(this.frame),this.frame.remove(),this.frame=null),this.options.src=t||"","iframe"==this.options.frameMode){if(!WebSquare.uiplugin.iframe)return void(o=requires("uiplugin.iframe")).then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));this.frame=new WebSquare.uiplugin.iframe(this.id+"_iframe",{className:"w2window_iframe",src:this.options.src||"",spa:this.options.spa,title:this.options.title,params:this.options.params,popupParam:this.options.popupParam,spaReplaceHistory:this.options.spaReplaceHistory})}else if("wframe"==this.options.frameMode){var i=this.org_id||this.id;this.frame=u.D.create(i+"_wframe",{className:"w2window_wframe",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"wframe",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;var o=u.D.initAsync(),s=this.uuid;o.then((function(t,e){WebSquare.idCache[s]._activateFrame()}))}e&&e.dataObject?this.setDataObject(e.dataObject):this._dataObject&&this.setDataObject(this._dataObject);var r=this.uuid;this.frame.bind("onload",(function(){n.B.fireEvent(WebSquare.idCache[r],"ondrawcomplete")}));var a="on"+this.frame.options.pluginName+"load";this.frame.bind(a,(function(){n.B.fireEvent(WebSquare.idCache[r],"onwindowload")}));var d="on"+this.frame.options.pluginName+"unload";if(this.frame.bind(d,(function(){null!=WebSquare.idCache[r]&&n.B.fireEvent(WebSquare.idCache[r],"onwindowunload")})),"iframe"==this.options.frameMode){this._activateFrame();try{if(1!=this.options.noAttatchedEvent){s=this.uuid;this.temp_cnt=0,l.D.setInterval((function(t){try{var e=WebSquare.idCache[s];if(!e)return void l.D.clearInterval(t);e.temp_cnt++,"about:blank"!==e.frame.render.contentWindow.location.href&&e.frame.render.contentWindow.location.href!==WebSquare.net.getSSLBlankPage(!0)?(document.addEventListener&&!l.D.isIE()?(e.frame.render.contentWindow.document.addEventListener("mousedown",(function(){self.WebSquare.idCache[s].handleFrameMouseDownEvent({})})),
e.frame.render.contentWindow.document.addEventListener("keyup",(function(t){self.WebSquare.idCache[s].handleFrameKeyupEvent({keyCode:t.charCode?t.charCode:t.keyCode})}))):document.attachEvent&&(e.frame.render.contentWindow.document.attachEvent("onmousedown",(function(){self.WebSquare.idCache[s].handleFrameMouseDownEvent({})})),e.frame.render.contentWindow.document.attachEvent("onkeyup",(function(t){self.WebSquare.idCache[s].handleFrameKeyupEvent({keyCode:t.charCode?t.charCode:t.keyCode})}))),l.D.clearInterval(e.id+"_drawframe")):e.temp_cnt>1200&&(l.D.clearInterval(e.id+"_drawframe"),h.k.printLog("["+e.id+"] addListener fail 1"))}catch(t){e&&e.temp_cnt>750&&l.D.clearInterval(e.id+"_drawframe")}}),{key:this.id+"_drawframe",delay:80,args:[this.id+"_drawframe"]})}}catch(t){h.k.printLog("["+this.id+"] addListener fail 3")}}else"wframe"==this.options.frameMode&&(this.frame.popupParam=this.popupParam,this.frame.popupId=this.popupId)}catch(t){h.k.printLog("error : window.drawFrame["+this.id+"]")}},c.prototype._activateFrame=function(){try{var t=this.getElementById(this.id+"_content");this.frame.writeTo(t),this.frame.activate(),this.addControl(this.frame)}catch(t){h.k.printLog("error : window.drawFrame["+this.id+"]")}},c.prototype.resizeForIE6=function(t,e,i){try{if(l.D.isIE(6)){i||(i="windowContainer"),t=parseInt(t,10),e=parseInt(e,10);var o=this.options.useStatusMsg?0:20;"windowContainer"==i&&this.setSize(t-3,e-2),this.dom.windowBody=document.getElementById(this.id+"_body"),this.dom.windowContent=document.getElementById(this.id+"_content"),this.dom.windowStatus=document.getElementById(this.id+"_status"),this.dom.header.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("height",e-27+"px"),this.dom.windowContent.style.setAttribute("width",t-11+"px"),"popup"==i?this.dom.windowContent.style.setAttribute("height",e-31+o+"px"):this.dom.windowContent.style.setAttribute("height",e-50+o+"px"),"popup"==i?this.frame.setSize(t-11,e-31+o):this.frame.setSize(t-11,e-50+o),this.options.useStatusMsg&&this.dom.windowStatus.style.setAttribute("width",t-11+"px")}}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.resizeParentGroup=function(){try{if(this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))return{width:WebSquare.style.getSize(this.parentControl.parentControl.render,"width"),height:this.parentControl.parentControl.options.nameLayerMenu?WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(document.getElementById(this.parentControl.parentControl.id+"_nameContainer"),"height"):WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(this.parentControl.parentControl.dom.toolBar,"height")}}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.close=function(t){try{if(!0===this._closed)return;this._closed=!0;try{WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){a.w.printStackTrace(t,null,this)}if(t&&"object"===(0,o.Z)(t)||(t={}),this.options.closeAction){var e=l.D.getGlobalFunction(this.options.closeAction,this.scope_id);if("function"==typeof e)if(!0!==e.call(this,this.options.title,t))return this._closed=!1,!1}return!0===t.sync?this._close(!0===t.skipRemove):l.D.setTimeout(this._close,{key:this.id+"_onwindowclosed",caller:this,delay:100,args:[{skipRemove:!0===t.skipRemove}]}),!0}catch(t){a.w.printStackTrace(t,null,this),this._closed=!1}},c.prototype.forceClose=function(){try{var t=this;setTimeout((function(){"iframe"==t.options.frameMode&&t.frame.setSrc("about:blank");var e={src:t.options.src,title:t.options.windowTitle};n.B.fireEvent(t,"onclose",e),t.remove()}),100)}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.toggleMinimize=function(){if(!0===this.options.foldOnMinimized){var t=this.windowInfo.status
;if(!this.windowInfo.minimized)switch(t){case"restored":this.windowInfo.setInfo(this.render);break;case"maximized":this.restore(!0),this.windowInfo.setInfo(this.render)}this.fold()}else this.minimize()},c.prototype.minimize=function(t,e){try{!0===t||0==this.windowInfo.minimized&&!1!==t?(this.setStyle("display","none"),this.windowInfo.minimized=!0):(this.setStyle("display","block"),this.windowInfo.minimized=!1),e||n.B.fireEvent(this,"onminimize")}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.fold=function(){try{if(0==this.windowInfo.minimized){var t=this.options.foldSize&&this.options.foldSize.width?this.options.foldSize.width:this.dom.clientWidth;this.setStyle("height",this.dom.header.clientHeight+"px"),this.dom.body.style.display="none",this.setStyle("width",t+"px"),this.windowInfo.minimized=!0}else{var e=this.render.offsetLeft,i=this.render.offsetTop,o=this.render.clientWidth,s=this.render.clientHeight,r=this.getMaxSize(),l=r.width,h=r.height,d=parseInt(this.windowInfo.width,10)-o,u=parseInt(this.windowInfo.height,10)-s,c=e,p=i,g=0,m=0;if(this.parentControl&&(g=document.documentElement.scrollTop||document.body.scrollTop,m=document.documentElement.scrollLeft||document.body.scrollLeft),e+d<0&&(c=0),e+d>l+m?c=o<=l?l-(o+d)+m:0:m>c&&(c=m),i+u<0&&(p=0),i+u>h){if(s<=h){if((p=h-(s+u))<g)return p=g,this.setStyle("height",h-g+"px"),this.setPosition(c,p),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else if(p=0+g,s>h)return h-=g,this.setStyle("height",h+"px"),this.setPosition(c,p),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else g>p&&(p=g);this.setPosition(c,p),this.setStyle("width",this.windowInfo.width),this.setStyle("height",this.windowInfo.height),this.dom.body.style.display="block",this.windowInfo.minimized=!1}n.B.fireEvent(this,"onminimize")}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.popup=function(){try{n.B.fireEvent(this,"onpopup")}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.maximize=function(){try{if(this.removeClass(this.render,"w2window_restored"),this.addClass(this.render,"w2window_maximized"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header w2window_header_extend";var t="w2window_body w2window_body_extend";this.options.useStatusMsg||(t+=" w2window_no_status"),this.dom.body.className=t}this.dom.body.style.display="block",this.windowInfo.status="maximized",this.windowInfo.drag=!1,this.windowInfo.minimized||this.windowInfo.setInfo(this.render),this.windowInfo.minimized=!1;var e=this.getMaxSize();if(this.parentControl){var i=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft;this.render.style.left=o+"px",this.render.style.top=i+"px",this.render.style.height=e.height-i+"px",this.render.style.width=o>0?e.width+"px":""}else this.render.style.left="0px",this.render.style.top="0px",this.render.style.width="",this.render.style.height="";n.B.fireEvent(this,"onmaximize")}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.restore=function(t){try{if(this.removeClass(this.render,"w2window_maximized"),this.addClass(this.render,"w2window_restored"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header";var e="w2window_body";this.options.useStatusMsg||(e+=" w2window_no_status"),this.dom.body.className=e}"none"==this.getStyle("display")&&this.setStyle("display","block"),this.dom.body.style.display="block",this.windowInfo.status="restored",this.windowInfo.drag=!0,this.windowInfo.minimized=!1,this.options.useRestoreDefaultSize?this.windowInfo.getInfo(this.render,"restored"):this.windowInfo.getInfo(this.render),t||n.B.fireEvent(this,"onrestore")}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.toggleResize=function(){try{"restored"==this.windowInfo.status?this.maximize():this.restore()}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.setStatusMsg=function(t){try{this.options.useStatusMsg&&(this.dom.statusMsg.innerHTML=t)}catch(t){
a.w.printStackTrace(t,null,this)}},c.prototype.setCustomMsg=function(t){try{this.options.useCustomMsg&&(this.dom.customMsg.innerHTML=t)}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.setSrc=function(t,e){try{if(null!=this.frame)if("iframe"==this.options.frameMode)requires("uiplugin.iframe").then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));else"wframe"==this.options.frameMode&&this.frame.setSrc(t,e)}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.movable=function(t){try{t=l.D.getBoolean(t),this.windowInfo.drag=t}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.showModal=function(t){try{if(n.B.fireEvent(this,"ondragstart"),!this.modal){if(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",l.D.isIE(6)){this.resizeParentGroup();var e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}t&&!0===t.transparent&&(this.modal.style.backgroundColor="transparent"),this.render.appendChild(this.modal),WebSquare.style.setOpacity(this.modal,.3)}if(this.modal){if(this.modal.style.display="block",l.D.isIE(6)){this.resizeParentGroup();e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}!l.D.isMobile()&&this.options.frameModal&&this.addClass(document.documentElement,"w2modalopened_ghost")}}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.hideModal=function(){try{n.B.fireEvent(this,"ondragend"),this.modal&&(this.modal.style.display="none",!l.D.isMobile()&&this.options.frameModal&&this.removeClass(document.documentElement,"w2modalopened_ghost"))}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.setFocus=function(){try{l.D.isMobile()&&this.options.useAtagButton?document.getElementById(this.id+"_start").focus():"iframe"==this.options.frameMode?this.frame.render.contentWindow&&this.frame.render.contentWindow.focus():"wframe"==this.options.frameMode&&this.frame.focus()}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype._focus=function(){try{l.D.isMobile()&&this.options.useATagBtn?document.getElementById(this.id+"_start").focus():(this.render.setAttribute("tabindex",0),this.render.focus())}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.getMaxSize=function(){var t,e;(this.parentControl?(t=WebSquare.style.getSize(this.parentControl.render,"width"),e=WebSquare.style.getSize(this.parentControl.render,"height")+(document.documentElement.scrollTop||document.body.scrollTop)):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(l.D.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(l.D.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(l.D.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(l.D.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(l.D.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(l.D.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(l.D.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(l.D.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},c.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(l.D.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(l.D.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(l.D.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(l.D.getStyleProperty(t,"padding-right"),10)||0),
i=i-(parseInt(l.D.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(l.D.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(l.D.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(l.D.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},c.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2window_close")&&!0!==this.options.disableCloseButton&&(l.D.getBoolean(r.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&n.B.stopEvent(t),this.close({isCloseButtonClick:!0}),this.options&&this.options.frameModal&&n.B.stopPropagation(t)),e.match("w2window_minimize")&&(n.B.stopEvent(t),this.toggleMinimize(),this.options.frameModal&&n.B.stopPropagation(t)),e.match("w2window_restore")&&(l.D.getBoolean(r.v.getConfiguration("/WebSquare/bindMobileMouseEvent/@value"))&&n.B.stopEvent(t),this.toggleResize(),this.options.frameModal&&n.B.stopPropagation(t)),e.match("w2window_popup")&&(n.B.stopEvent(t),this.popup());e=null}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.handleFrameMouseDownEvent=function(t){try{n.B.fireEvent(this,"onwindowmousedown",t)}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.handleDblclickEvent=function(t){try{if(n.B.stopEvent(t),!1===this.options.useMaximize)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header_button"))return;e.match("w2window_header")&&this.toggleResize()}e=null}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{n.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2window_minimize")&&this.addClass(e.getElement(),"w2window_minimize_on"),e.match("w2window_restore")&&this.addClass(e.getElement(),"w2window_restore_on"),e.match("w2window_close")&&this.addClass(e.getElement(),"w2window_close_on"),e.match("w2window_popup")&&this.addClass(e.getElement(),"w2window_popup_on"),e.match("w2window_header_button_content")){var i=e.getElement();this.buttons[Number(i.getAttribute("btn_index"))].disable||this.addClass(i,"w2window_header_button_content_on")}e=null}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{n.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2window_minimize")&&this.removeClass(e.getElement(),"w2window_minimize_on"),e.match("w2window_restore")&&this.removeClass(e.getElement(),"w2window_restore_on"),e.match("w2window_close")&&this.removeClass(e.getElement(),"w2window_close_on"),e.match("w2window_popup")&&this.removeClass(e.getElement(),"w2window_popup_on"),e.match("w2window_header_button_content")){var i=e.getElement();this.buttons[Number(i.getAttribute("btn_index"))].disable||this.removeClass(i,"w2window_header_button_content_on")}e=null}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.handleMousedownEvent=function(t){try{this.resizeParentGroup();for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header")&&(!0!==this.options.enableHeaderSelect&&n.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){var i=n.B.getTarget(t);if(!i||i.id==this.id+"_minimize"||i.id==this.id+"_restore"||i.id==this.id+"_close"||i.id==this.id+"_popup")return;var s=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:5,mode:"move",makeGhostLayer:!0===this.options.windowDragMove?null:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(l.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.show(),t.setSize(r,a),t.setPosition(e,i),
t.hide(),t},handleStart:function(){!0===s.options.windowDragMove?(s.showModal.call(s,{transparent:!0}),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()):(s.showModal.call(s),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll())},handleUpdate:function(t,e,i,o,r){if(!0!==s.options.windowDragMove){if(1==s.options.displayParentWindowScroll&&!s.options.frameModal)try{var a=l.D.getStyleProperty(document.documentElement,"overflow");if(("auto"==a||"scroll"==a)&&!s.modal)return}catch(r){}s.render.offsetLeft;var n,h,d=s.render.offsetTop,u=(s.render.clientWidth,s.render.clientHeight,(w=s.getMaxSize()).width),c=w.height,p=(S=0,0);s.parentControl&&(S=document.documentElement.scrollTop||document.body.scrollTop,p=document.documentElement.scrollLeft||document.body.scrollLeft,n=WebSquare.style.getAbsoluteLeft(s.parentControl.render),h=WebSquare.style.getAbsoluteTop(s.parentControl.render),s.frame&&"wframe"===s.frame.getPluginName()&&(n-=p,h-=S)),s.frame&&"iframe"===s.frame.getPluginName()?(r.clientX<n+40||r.clientX>u+n-40||d+o+1-S<0||r.clientY+20+S>h+c-20)&&WebSquare.dragdrop.gDragManager.finish(r):"overflow"===s.options.windowMoveType?(r.clientX<n+20&&i<0||r.clientX>u+n-20&&i>0||r.clientY+1<h||r.clientY>h+c-20&&o>0)&&WebSquare.dragdrop.gDragManager.finish(r):(r.clientX<n+20||r.clientX>u+n-20||r.clientY+1<h||r.clientY>h+c-20)&&WebSquare.dragdrop.gDragManager.finish(r)}else{var g=0,m=0;try{g=WebSquare.style.getAbsoluteLeft(s.render.parentNode),m=WebSquare.style.getAbsoluteTop(s.render.parentNode)}catch(r){}var f=Math.max(t+i-g,0),b=Math.max(e+o-m,0),y=0,v=0;if(null!=s._windowId){var w=s.getMaxSize(),S=s.parentControl?document.documentElement.scrollTop||document.body.scrollTop:0,C=w.width-s.render.offsetWidth,x=w.height-s.render.offsetHeight-S;f=Math.min(f,C),b=Math.min(b,x)}else!s.parentControl.parentControl||"tabControl"!=s.parentControl.parentControl.options.pluginName&&"tabControl"!=s.parentControl.parentControl.options.inheritFrom||(y=s.parentControl?s.parentControl.render.scrollLeft:0,v=s.parentControl?s.parentControl.render.scrollTop:0);s.setPosition(f+y,b+v)}},handleFinish:function(t,e,i,o){if(s.hideModal.call(s),!0!==s.options.windowDragMove){var r=s.render.offsetLeft,a=s.render.offsetTop,n=s.render.clientWidth,h=s.render.clientHeight,d=s.getMaxSize(),u=d.width,c=d.height,p=r+i,g=a+o,m=0,f=0,b=0,y=0,v=0,w=0;if(s.parentControl&&(m=document.documentElement.scrollTop||document.body.scrollTop,f=document.documentElement.scrollLeft||document.body.scrollLeft,s.options.frameModal&&(v=parseInt(s.parentControl.getStyle("border-top-width"))||0,w=parseInt(s.parentControl.getStyle("border-left-width"))||0,u=s.parentControl.render.offsetWidth-w,c=s.parentControl.render.offsetHeight-v,n=s.render.offsetWidth,h=s.render.offsetHeight,s.render.offsetParent!==s.parentControl.render&&(a-=b=s.parentControl.render.offsetTop,r-=y=s.parentControl.render.offsetLeft))),1==s.options.displayParentWindowScroll&&!s.options.frameModal||"overflow"===s.options.windowMoveType)try{var S=l.D.getStyleProperty(document.documentElement,"overflow");"auto"!=S&&"scroll"!=S&&"overflow"!==s.options.windowMoveType||(u=Math.max(u,n,r+n+i),c=Math.max(c,h,a+h+o))}catch(t){}"overflow"!==s.options.windowMoveType&&r+i<0&&(p=y+w),r+n+i>u+f?p=n<=u?u-n+f+y:y:"overflow"!==s.options.windowMoveType&&f>p&&(p=f),a+o<0&&(g=b+v),a+h+o>c?h<=c?(g=c-h+b)<m&&(g=m,s.render.style.height=c-m+"px"):(g=0+m,h>c&&(c-=m,s.render.style.height=c+"px")):m>g&&(g=m),s.setPosition(p,g)}}})}if(e.match("w2window_header_button")){n.B.stopEvent(t);var r=e.getElement().getAttribute("btn_index");if(!(u=this.buttons[Number(r)]).disable)try{var h=this.buttonInfo.buttons[r].clickAction;switch((0,o.Z)(h)){case"function":h.apply(this,this);break;case"string":default:var d=l.D.getGlobalFunction(h,this.scope_id);"function"==typeof d&&d(this)}}catch(t){a.w.printStackTrace(t,null,this)}return}
if(e.match("w2window_header_custom_button")){n.B.stopEvent(t);r=e.getElement().getAttribute("btn_index");var u=this.buttons[parseInt(r,10)],c={uniqueId:this.id,btnId:this.id+"_header_button_"+u.btn_index,btnIdx:u.btn_index,disable:u.disable,hidden:u.hidden};return void(u.disable||this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom)&&n.B.fireEvent(this.parentControl.parentControl,"onclickcustombtn",c))}var p=e.match("w2window_resize"),g=e.match("w2window_resize_bottomLeft");if((p||g)&&(n.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){s=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:p?"resize":"resize_bottomLeft",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(l.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,i),t},handleStart:function(){s.showModal.call(s)},handleFinish:function(t,e,i,o,r){s.hideModal.call(s);var a="resize"===this.mode?1:-1,n=parseInt(s.getStyle("width"),10),l=parseInt(s.getStyle("height"),10),h=s.render.offsetTop,d=s.render.offsetLeft,u=n+i*a,c=l+o;u<parseInt(s.windowInfo.minWidth,10)&&(u=parseInt(s.windowInfo.minWidth,10),1===a?i+=n-u:i=n-u),c<parseInt(s.windowInfo.minHeight,10)&&(c=parseInt(s.windowInfo.minHeight,10));var p,g=s.getMaxSize(),m=g.height-h;if((p=1===a?g.width-d:Math.min(d+n,g.width))<s.render.clientWidth+i*a&&(u=p),m<s.render.clientHeight+o&&(c=m),s.setSize(u,c),-1===a){var f=Math.max(d+i,0);s.setPosition(f,null)}}})}var m=e.match("w2window_resize_right"),f=e.match("w2window_resize_left");if((m||f)&&(n.B.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1!==this._direction))){s=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:m?"resize_right":"resize_left",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(l.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[s._multiViewUUID]||s.showModal.call(s)},handleFinish:function(t,e,i,o,r){var a="resize_right"===this.mode?1:-1;s.hideModal.call(s);var n=parseInt(s.getStyle("width"),10),l=parseInt(s.getStyle("height"),10),h=n+i*a;h<parseInt(s.windowInfo.minWidth,10)&&(h=parseInt(s.windowInfo.minWidth,10),1===a?i+=n-h:i=n-h);var d=s.getMaxSize().width;if("resize_right"===this.mode&&(d-=s.render.offsetLeft),d<s.render.clientWidth+i*a&&(h=d),WebSquare.idCache[s._multiViewUUID]&&1!==s._direction){var u=WebSquare.idCache[s._multiViewUUID],c=parseInt(u.windowInfo.minWidth,10);h>d-c&&(h=d-c),u.setSize(parseInt(u.getStyle("width"),10)-h+n,null),u.setPosition(u.getPosition("left")+h-n,null)}if(s.setSize(h,l),s.frame&&s.frame._processMsgModal&&"block"===s.frame._processMsgModal.render.style.display&&s.frame._processMsgModal.setSize(h,l),-1===a){var p=s.getPosition("left")+i;p+h>d&&(p=d-h),p=Math.max(p,0),s.setPosition(p,null)}}})}
var b=e.match("w2window_resize_bottom"),y=e.match("w2window_resize_up");if((b||y&&this.options.dragResizableHeader)&&(n.B.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1===this._direction))){s=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:b?"resize_bottom":"resize_up",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(l.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[s._multiViewUUID]||s.showModal.call(s)},handleFinish:function(t,e,i,o,r){var a="resize_bottom"===this.mode?1:-1;s.hideModal.call(s);var n=parseInt(s.getStyle("width"),10),l=parseInt(s.getStyle("height"),10),h=parseInt(s.getStyle("left"),10),d=parseInt(s.getStyle("top"),10),u=l+o*a;u<parseInt(s.windowInfo.minHeight,10)&&(u=parseInt(s.windowInfo.minHeight,10));var c=s.getMaxSize(),p=c.height;a||(p=d+l),1==a?p-=s.render.offsetTop:p=Math.min(d+l,c.height);var g=s.render.clientHeight+o*a;if(p<u&&(u=p,1===a&&(o+=g-u)),WebSquare.idCache[s._multiViewUUID]&&1===s._direction){var m=WebSquare.idCache[s._multiViewUUID],f=parseInt(m.windowInfo.minHeight,10);u>p-f&&(u=p-f),m.setSize(null,parseInt(m.getStyle("height"),10)-u+l),m.setPosition(null,m.getPosition("top")+u-l)}else if("resize_up"===this.mode){var b=d-o*a;b<0&&(b=0),b+u>p&&(b=p-u),s.setPosition(h,b)}s.setSize(n,u)}})}if(this.options.dragResizableHeader){var v=e.match("w2window_resize_upRight"),w=e.match("w2window_resize_upLeft");if((v||w)&&(n.B.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){s=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:v?"resize_upRight":"resize_upLeft",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),r=o.width,a=o.height;return r=r-(parseInt(l.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,i),t},handleStart:function(){s.showModal.call(s)},handleFinish:function(t,e,i,o,r){s.hideModal.call(s);var a="resize_upRight"===this.mode?1:-1,n=parseInt(s.getStyle("width"),10),l=parseInt(s.getStyle("height"),10),h=s.render.offsetTop,d=s.render.offsetLeft,u=n+i*a,c=l-o;u<parseInt(s.windowInfo.minWidth,10)&&(u=parseInt(s.windowInfo.minWidth,10),1===a?i+=n-u:i=n-u),c<parseInt(s.windowInfo.minHeight,10)&&(o=l-(c=parseInt(s.windowInfo.minHeight,10)));var p,g,m=s.getMaxSize();1===a?(p=m.width-d,g=h+l):(p=Math.min(d+n,m.width),g=Math.min(h+l,m.height));var f=l-o;p<n+i*a&&(u=p),g<f&&(c=g,1===a&&(o+=f-c)),s.setSize(u,c);var b=h+o,y=d;-1===a&&(b=Math.max(b,0),y=Math.max(d+i,0)),b+c>=m.height&&(b=m.height-c),s.setPosition(y,b)}})}}}e=null}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.handleMouseupEvent=function(t){try{n.B.stopEvent(t)}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.handleFrameKeyupEvent=function(t){try{n.B.fireEvent(this,"onwindowkeyup",t)}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.checkLoadEvent=function(){try{if(this.frame&&this.frame.render){var t=this.frame.render.contentWindow
;t.WebSquare&&t.WebSquare.scriptSectionExcuteFlag&&"executed"===t.WebSquare.scriptSectionExcuteFlag&&(l.D.clearInterval(this.id+"_checkLoadEvent"),l.D.fullViewed&&l.D.zoomed(t.document.body,"1"))}}catch(t){}},c.prototype.handleSelectStartEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)(!0!==this.options.enableHeaderSelect&&e.match("w2window_header")||e.match("w2window_status"))&&n.B.preventDefault(t);e=null}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.setWindowTitle=function(t){try{var e=document.getElementById(this.id+"_header_title");if(e){if(e.innerHTML=t,this.options.windowTitle=t,this.options.windowTooltipDisplay&&this.render)document.getElementById(this.id+"_header").setAttribute("title",t);!0===this.options.useATagTitle&&e.setAttribute("title",t)}}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.setWindowHeaderHTML=function(t){try{if(t){try{var e=l.D.getGlobalFunction(t,this.scope_id);"function"==typeof e?e():e}catch(e){t}var i=this.getElementById(this.id+"_header");i&&(i.innerHTML=t,this.options.windowHeaderHTML=t)}}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.setButtonCondition=function(t,e,i){try{var o=this.buttons[Number(e)];if(o){var s=o.contentDom;i=l.D.getBoolean(i);switch(t){case"hidden":o.visisble=i,s.parentNode.style.display=i?"none":"inline-block";break;case"disabled":o.disable=i,i?this.addClass(s,"w2window_header_button_disabled"):this.removeClass(s,"w2window_header_button_disabled")}}}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.setCloseButtonStatus=function(t){try{this.options.disableCloseButton=!l.D.getBoolean(t);var e=document.getElementById(this.id+"_close");this.options.disableCloseButton?this.addClass(e,"w2window_close_disabled"):this.removeClass(e,"w2window_close_disabled")}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.setDataObject=function(t){try{this.frame?(this.frame.setDataObject(t),this._dataObject&&delete this._dataObject):this._dataObject=t}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype._getDataObject=function(){try{return this.frame?this.frame._getDataObject():this._dataObject}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype.finalize=function(){try{d.s.prototype.finalize.call(this),!0!==this._closed&&this.close({sync:!0,skipRemove:!0})}catch(t){a.w.printStackTrace(t,null,this)}},c.prototype._close=function(t){try{if(!this.options)return;var e={src:this.options.src,title:this.options.windowTitle,id:this.id};n.B.fireEvent(this,"onbeforeclose",e);var i=this.options.parent&&this.options.parent.options.spaIframeMaxSize>this.options.parent.storedFrame.length;if("iframe"==this.options.frameMode)if(i)this.frame.setSrc(WebSquare.net.getBlankXML());else{try{var o=r.v.getConfiguration("/WebSquare/clearMemory/@value");l.D.isIEAllVersion()&&"true"==o||this.frame.getWindow().WebSquare&&this.frame.getWindow().WebSquare.clearMemory()}catch(t){}this.frame.setSrc("about:blank")}if(n.B.fireEvent(this,"onclose",e),i){this.render&&(this.render.style.display="none");for(var s=!1,h=0;h<this.options.parent.storedFrame.length;h++)if(this.options.parent.storedFrame[h]==this.id){s=!0;break}s||this.options.parent.storedFrame.push(this.id)}else this.remove&&!0!==t&&("wframe"===this.options.frameMode&&n.B.fireEvent(this,"onwindowunload"),this.remove())}catch(t){a.w.printStackTrace(t,null,this),this._closed=!1}}},7565:function(t,e,i){"use strict";i.r(e),i.d(e,{windowContainer:function(){return u}});var o=i(484),s=i(1974),r=i(5052),a=i(5948),n=i(1454),l=i(8683),h=i(9075),d=i(1),u=function(t,e,i){d.s.call(this,t,e,i)};s.x.extend(u.prototype,d.s.prototype),u.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.windowContainer",pluginName:"windowContainer",userEvents:["onCloseWindow","onwindowkeyup","onwindowchange","onwindowtabclick","onbeforecloseall","onbeforenamelayermove","onafternamelayermove","onmenuclick","onwindowload","onwindowunload","oncustomcontrolclick"],useConfirmMessage:!0,
confirmTrueAction:"existWindow",confirmFalseAction:"newWindow",windowMaxNum:5,confirmMessage:"#title 화면이 존재합니다. 기존의 창을 사용하시려면 '확인'을 새로운 창을 사용하시려면 '취소'를 선택하세요",lineBreakNum:4,useNameScroll:!1,useCloseButton:!1,useFixButton:!1,useNameContainer:!1,controlIconPosition:"left",fixArrangeFullScreen:!1,verticalArrangeNum:2,horizontalArrangeNum:2,sequentialArrangeRowNum:2,sequentialArrangeColNum:2,windowAutoResize:!1,toolbarWidth:0,toolbarPosition:"bottom",positionX:"none",positionY:"none",windowMaximizeAll:!1,stopMinimizeOnNameLayer:!1,stopToggleOnLast:!1,defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",hideTitleOnMaximize:!1,usePopup:!1,closeWindowOnPopup:!1,tooltipDisplay:!0,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,windowTooltipDisplay:!0,useLocale:!1,confirmMessageLocaleRef:"",wmode:!1,selectedIndex:-1,useStatusMsg:!0,useCustomMsg:!1,statusMsg:"",customMsg:"",nameScrollMode:"",useControlIconTitle:!1,spa:!1,spaIframeMaxSize:0,spaIframeMinSize:0,spaInitCount:0,spaReplaceHistory:!1,nameLayerMenu:!1,windowHeaderHTML:"",enableHeaderSelect:!1,useDrag:!1,skipZIndex:!1,noAttatchedEvent:!1,closeType:"all",nameLayerMove:!1,nameLayerMoveGap:110,keepSelectedWindow:!1,controlIcons:[{id:"vertical",className:"w2windowContainer_controlIcon_vertical",useTitle:!1,isCustom:!1},{id:"horizontal",className:"w2windowContainer_controlIcon_horizontal",useTitle:!1,isCustom:!1},{id:"cascade",className:"w2windowContainer_controlIcon_cascade",useTitle:!1,isCustom:!1},{id:"sequential",className:"w2windowContainer_controlIcon_sequential",useTitle:!1,isCustom:!1},{id:"closeAll",className:"w2windowContainer_controlIcon_closeAll",useTitle:!1,isCustom:!1}],buttonFormatter:"",controlIconFormatter:null,restoreWinSize:!1,spaAuto:!1,spaAutoDelay:3e3,windowDragMove:!1,windowMoveType:"restrict",frameModal:!1,useWindowId:!1,processMsgFrame:!1,useWindowScrollButton:!1,windowScrollVisibleRowNum:5,autoArrange:!1,nameLayerRearrange:!1},u.prototype.initialize=function(t){try{this.windows=[],this.fixedWindowArr=[],this.beforeWindow=null,this.nowWindow=null,this.selectedWindowHistory=[],this.selectedIndex=-1,this.windowIdx=0,this.maxZIndex=0,this.currentWindowNum=0,this.tooltip=null,this.timeShowTooltip=null,this.useControlIconFormatter=!1,this.options.useLocale&&null!=this.options.confirmMessageLocaleRef&&""!=this.options.confirmMessageLocaleRef&&(this.options.confirmMessage=this.getLocaleValue(this.options.confirmMessageLocaleRef));var e="w2windowContainer_window";"top"==this.options.toolbarPosition&&(e+="_top");var i=new WebSquare.uiplugin.group(this.id+"_window",{className:e,style:"background-color : transparent"});this.addControl(i),this.options=WebSquare.cssManager.styleToClass(this.id,this.options),t&&"$blank"==t.getAttribute("statusMsg")?this.defaultStatusMsg="":this.defaultStatusMsg=this.options.statusMsg||WebSquare.language.getMessage("Window_statusMsg"),this.options.spaIframeMinSize>this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize),this.options.spaInitCount>0&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount),("true"==r.v.getConfiguration("/WebSquare/spa/@value")||this.options.spaIframeMaxSize>0)&&(this.options.spa=!0),this.options.spaAuto&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!0),this.storedFrame=[],this.options.nameLayerMenu&&(this.options.useNameContainer=!0),this.windowHeaderHTML="",this.nameLayerHTML="",this.multiViewIdArr=[],this.options.useDrag,"wframe"===this.options.frameMode&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!1),this.zIndexFlagInfo={},this.options.useNameContainer||(this.options.controlIconPosition="left")}catch(t){
a.w.printStackTrace(t,null,this)}},u.prototype.toHTML=function(){try{var t=function(t){return" title='"+t+"'"},e=[],i={vertical:"",horizontal:"",cascade:"",sequential:"",closeAll:"",maximize:"",closeOthers:""},o=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";this.options.useControlIconTitle&&(i.maximize=t(WebSquare.language.getMessage("WindowContainer_controlIcon_maximize")),i.vertical=t(WebSquare.language.getMessage("WindowContainer_controlIcon_vertical")),i.horizontal=t(WebSquare.language.getMessage("WindowContainer_controlIcon_horizontal")),i.cascade=t(WebSquare.language.getMessage("WindowContainer_controlIcon_cascade")),i.sequential=t(WebSquare.language.getMessage("WindowContainer_controlIcon_sequential")),i.closeAll=t(WebSquare.language.getMessage("WindowContainer_controlIcon_closeAll")));var r="w2windowContainer_windowToolbar";"top"==this.options.toolbarPosition&&(r+="_top");var n="",l="";!this.options.useNameContainer||"right"!=this.options.controlIconPosition&&"allright"!=this.options.controlIconPosition||(n=" w2windowContainer_controlIconLayer_right",l=this.options.hideTitleOnMaximize?" w2windowContainer_nameContainer_right_maximizeBtn":" w2windowContainer_nameContainer_right");var h="w2windowContainer_controlIconLayer",d="w2windowContainer_scrollLeftBtn";return this.options.hideTitleOnMaximize&&(h+=" w2windowContainer_controlIconLayer_extend",d+=" w2windowContainer_scrollLeftBtn_extend"),e.push("<div id='"+this.id+"' "+o+" class='w2windowContainer "+this.options.className+"' "+s+">"),e.push(this.getChild(this.id+"_window").toHTML()),this.options.nameLayerMenu||(e.push("<div id='"+this.id+"_toolbar' class='"+r+"'>"),e.push("<div id='"+this.id+"_controlIcon' class='"+h+n+"'>"),"allright"==this.options.controlIconPosition&&(e.push("<div id='"+this.id+"_controlBtnDiv'>"),e.push("<div id='"+this.id+"_left' style='display:none;' class='"+d+"'></div>"),e.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'></div>"),e.push("</div>"),e.push("<div id='"+this.id+"_controlIconDiv'>")),e.push("<span id='"+this.id+"_vertical' class='w2windowContainer_controlIcon_vertical'"+i.vertical+"></span>"),e.push("<span id='"+this.id+"_horizontal' class='w2windowContainer_controlIcon_horizontal'"+i.horizontal+"></span>"),e.push("<span id='"+this.id+"_cascade' class='w2windowContainer_controlIcon_cascade'"+i.cascade+"></span>"),e.push("<span id='"+this.id+"_sequential' class='w2windowContainer_controlIcon_sequential'"+i.sequential+"></span>"),e.push("<span id='"+this.id+"_closeAll' class='w2windowContainer_controlIcon_closeAll'"+i.closeAll+"></span>"),this.options.useWindowScrollButton&&(this.options.useControlIconTitle&&(i.windowList=t(WebSquare.language.getMessage("WindowContainer_controlIcon_windowList"))),e.push("<span id='"+this.id+"_windowList' class='w2windowContainer_controlIcon_windowList'></span>")),this.options.hideTitleOnMaximize&&e.push("<span id='"+this.id+"_maximize' class='w2windowContainer_controlIcon_maximize'"+i.maximize+"></span>"),"allright"==this.options.controlIconPosition&&e.push("</div>"),e.push("</div>")),this.options.useNameContainer&&e.push("<div id='"+this.id+"_nameContainer' class='w2windowContainer_nameContainer"+(this.options.nameLayerMenu?" w2windowContainer_nameLayerMenu":"")+l+"'>"),"allright"!==this.options.controlIconPosition&&e.push("<div id='"+this.id+"_left' style='display:none;' class='"+d+"'></div>"),e.push("<div id='"+this.id+"_name' class='w2windowContainer_name'></div>"),"allright"!==this.options.controlIconPosition&&e.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'></div>"),this.options.useNameContainer&&e.push("</div>"),e.push("</div>"),e.push("</div>"),e.join("")}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setPreAction=function(){try{this.dom.toolBar=this.getElementById(this.id+"_toolbar"),
this.dom.nameBar=this.getElementById(this.id+"_name"),this.dom.window=this.getElementById(this.id+"_window"),this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.nameContainer=this.getElementById(this.id+"_nameContainer"),this.dom.leftScrollBtn=this.getElementById(this.id+"_left"),this.dom.rightScrollBtn=this.getElementById(this.id+"_right"),this.options.nameLayerMenu?this.createMenu():(this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.toolBar=this.getElementById(this.id+"_toolbar"),this.dom.iconVertical=this.getElementById(this.id+"_vertical"),this.dom.iconHorizontal=this.getElementById(this.id+"_horizontal"),this.dom.iconCascade=this.getElementById(this.id+"_cascade"),this.dom.iconSequential=this.getElementById(this.id+"_sequential"),this.dom.iconCloseAll=this.getElementById(this.id+"_closeAll"),this.dom.iconWindowList=this.getElementById(this.id+"_windowList")),this.options.hideTitleOnMaximize&&(this.dom.iconMaximize=this.getElementById(this.id+"_maximize")),this.dom.nameScrollLeft=this.getElementById(this.id+"_left"),this.dom.nameScrollRight=this.getElementById(this.id+"_right")}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),l.D.isMobile()?this.event.addListener(this.dom.nameBar,"ontouchstart",this.event.bindAsEventListener(this,this.handleNameLayerMove)):this.event.addListener(this.dom.nameBar,"onmousedown",this.event.bindAsEventListener(this,this.handleNameLayerMove)),d.s.addCheckResize(this.uuid,"checkResize"),!this.options.nameLayerMenu&&this.options.useWindowScrollButton){var t=this.dom.toolBar.offsetWidth,e=this.dom.control.offsetWidth;WebSquare.style.setStyle(this.dom.iconWindowList,"left",e+"px"),e+=this.dom.iconWindowList.offsetWidth,WebSquare.style.setStyle(this.dom.control,"width",e+"px"),this.options.useNameContainer?("right"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"right",e+"px"):WebSquare.style.setStyle(this.dom.nameContainer,"width",t-e+"px"),"left"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"left",e+"px"):"allright"===this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","-50px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"right",this.dom.control.offsetWidth+"px"))):WebSquare.style.setStyle(this.dom.leftScrollBtn,"left",e+"px")}else"allright"==this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.control,"width","180px"),WebSquare.style.setStyle(this.dom.nameContainer,"right","180px"),WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","0px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right","130px"),WebSquare.style.setStyle(this.dom.iconVertical,"left","50px"),WebSquare.style.setStyle(this.dom.iconHorizontal,"left","75px"),WebSquare.style.setStyle(this.dom.iconCascade,"left","100px"),WebSquare.style.setStyle(this.dom.iconSequential,"left","125px"),WebSquare.style.setStyle(this.dom.iconCloseAll,"left","150px"))}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.onComplete=function(){try{this.setControlIconFormatter(),r.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:10}),this.options.spaAuto&&r.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]}),d.s.prototype.onComplete.call(this)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.makeIframe=function(){if("iframe"===this.options.frameMode){var t=this.storedFrame.length
;if(this.options.spaIframeMinSize>t+this.windows.length){var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id),r.v.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:50})}}},u.prototype.createFrame=function(t){try{if("iframe"!==this.options.frameMode)return;if(this.options.windowMaxNum<=this.windows.length+this.storedFrame.length)return void h.k.printLog("["+this.id+"] createFrame error : frames are full ("+this.options.windowMaxNum+")");if(void 0!==t&&null!=t||(t={}),isNaN(t.maxFrame)||t.maxFrame>this.storedFrame.length){var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.createWindow=function(t){try{return 1===arguments.length&&"object"===(0,o.Z)(arguments[0])?this.__createWindowByObj(arguments[0]):this.__createWindow(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12])}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.__createWindow=function(t,e,i,o,s,r,n,h,d,u,c,p,g){try{if(""===this.windowHeaderHTML&&""!==this.options.windowHeaderHTML){var m="";try{m=l.D.getGlobalFunction(this.options.windowHeaderHTML,this.scope_id);this.windowHeaderHTML="function"==typeof m?m():m}catch(t){this.windowHeaderHTML=this.options.windowHeaderHTML}}o=WebSquare.xml.encode(o||t),s=s||t;for(var f=null,b=u||{},y=0;y<this.windows.length;y++){var v=this.windows[y];s==v.windowId&&(f=v)}if(null!=f)if(null!=r&&""!=r)this.performAction(r,f,t,e,i,o,s,h,d,n,b,c,p,g);else{for(var w=this.options.confirmMessage;-1!=w.indexOf("#title");)w=w.replace("#title",t);var S=!0;1==this.options.useConfirmMessage&&(S=confirm(w)),S?this.performAction(this.options.confirmTrueAction,f,t,e,i,o,s,h,d,n,b,c,p,g):this.performAction(this.options.confirmFalseAction,f,t,e,i,o,s,h,d,n,b,c,p,g)}else this._createWindow(t,e,i,o,s,n,h,d,b,c,p,g)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.__createWindowByObj=function(t){try{if(!(t&&t.title&&t.src))return void $l("["+this.id+" : createWindow ] 인자를 확인해주세요.");var e=t.title||"",i=t.iconUrl||null,o=t.src||"",s=t.windowTitle||null,r=t.windowId||null,n=t.openAction||null,l=t.closeAction||null,h=t.windowTooltip||null,d=t.windowHeaderHTML||null,u=t.useNameLayer||!0,c=t.nameLayerHTML||null,p={fixed:t.fixed||!1,useNameLayer:u,defaultWidth:t.defaultWidth||"",defaultHeight:t.defaultHeight||"",defaultTop:t.defaultTop||"",defaultLeft:t.defaulLeft||"",useRestoreDefaultSize:t.useRestoreDefaultSize||!1},g=t.frameMode||this.options.frameMode;return this.__createWindow(e,i,o,s,r,n,l,h,d,p,g,t.dataObject,c)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.performAction=function(t,e,i,o,s,r,n,l,h,d,u,c,p,g){try{if("selectWindow"==t)this.selectNameLayer(e.id),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id);else if("existWindow"==t){if(e.isFix){e.isFix=!1;for(var m=0;m<this.fixedWindowArr.length;m++)if(this.fixedWindowArr[m].id==e.id){this.fixedWindowArr.splice(m,1);break}}var f;this.selectNameLayer(e.id),e.window.setStatusMsg(this.defaultStatusMsg),p&&(f={dataObject:p}),e.window.setSrc(s,f),e.window.options.closeAction=d,e.window.options.title=i;l=l||r;this.setWindowLabel(n,"toolbar",i),this.setWindowLabel(n,"window",r),this.setWindowLabel(n,"tooltip",l),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id)}else"newWindow"==t&&this._createWindow(i,o,s,r,n,d,l,h,u,c,p,g)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._createWindow=function(t,e,i,o,s,h,d,u,c,p,g,m){try{var f=o.wq_replaceAll("&nbsp;","");c=c||{};if(-1!=this.options.windowMaxNum&&this.currentWindowNum>this.options.windowMaxNum-1)return void alert(WebSquare.language.getMessage("WindowContainer_maxNum_warning",this.options.windowMaxNum))
;var b,y=null,v=this.storedFrame.length>0&&(!p||"iframe"===p);if(v)(y=l.D.getComponentById(this.storedFrame.shift()))._closed=!1,y.options.closeAction=h,y.options.title=t,u?y.setWindowHeaderHTML(u):y.setWindowTitle(o),g&&(b={dataObject:g}),y.frame.setSrc(i,b),y.render&&(y.render.style.display="");else y=this._createSubWindow(t,e,i,f,s,h,d,u,p,g,!0,m,c);var w=y.id;this.currentWindowNum++;var S={};if(S.id=w,S.window=y,S.title=t,S.iconUrl=e,S.src=i,S.windowTitle=o,S.windowId=s,S.closeAction=h,S.tooltip=d||o,S.windowHeaderHTML=u,S.buttonFormatter=this.options.buttonFormatter,S.isFix=c.fixed||!1,S.nameLayerHTML=m,S.useNameLayer=!c.useNameLayer||l.D.getBoolean(c.useNameLayer),0==S.useNameLayer?this.windows.splice(0,0,S):this.windows.push(S),this.createNameLayer(),this.beforeWindow=this.nowWindow,this.nowWindow=w,this.selectWindow(),v||(y.activate(),y.onComplete()),this.options.restoreWinSize&&this.restoreWindowSize(s),this.beforeWindow!=this.nowWindow){var C=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,x=this.getWinInfoObj(this.nowWindow).windowId;n.B.fireEvent(this,"onwindowchange",C,x)}this.options.spaAuto&&r.v.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]})}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._createSubWindow=function(t,e,i,o,s,h,d,u,c,p,g,m,f){f=f||{};var b=this.org_id||this.id,y=b+"_subWindow"+this.windowIdx++;this.options.useWindowId&&(y=b+"_subWindow_"+s+"_"+this.windowIdx++);c=c||this.options.frameMode;var v=f.defaultWidth||this.options.defaultWidth,w=f.defaultHeight||this.options.defaultHeight,S=f.defaultTop||this.options.defaultTop,C=f.defaultLeft||this.options.defaultLeft,x=f.useRestoreDefaultSize||this.options.useRestoreDefaultSize,_=WebSquare.controlFactory.create(y,{pluginName:"window",parseChild:!1,windowTitle:o,windowHeaderHTML:u||this.windowHeaderHTML,nameLayerHTML:m||this.nameLayerHTML,enableHeaderSelect:this.options.enableHeaderSelect,src:i,useStatusMsg:this.options.useStatusMsg,useCustomMsg:this.options.useCustomMsg,statusMsg:""==this.defaultStatusMsg?"":this.defaultStatusMsg,customMsg:this.options.customMsg,defaultTop:S,defaultLeft:C,defaultWidth:v,defaultHeight:w,useRestoreDefaultSize:x,minimumWidth:this.options.minimumWidth,minimumHeight:this.options.minimumHeight,frameMode:c,wmode:this.options.wmode,width:this.render.offsetWidth,height:this.render.offsetHeight-25,closeAction:h,title:t,parent:this,windowTooltipDisplay:this.options.windowTooltipDisplay,noAttatchedEvent:this.options.noAttatchedEvent,spa:this.options.spa,spaReplaceHistory:this.options.spaReplaceHistory,buttonFormatter:this.options.buttonFormatter,windowDragMove:this.options.windowDragMove,frameModal:this.options.frameModal,windowMoveType:this.options.windowMoveType,processMsgFrame:this.options.processMsgFrame,dragResizableHeader:this.options.dragResizableHeader,delegateProcessMsg:l.D.getBoolean(this.options.delegateProcessMsg)},null,this.scope_obj,this.parentFrame,!0);p&&_.setDataObject(p),_._windowId=s;var I=this,T=!0===r.v.scriptPrecedence?"onwindowload":"ondrawcomplete";return _.options.xmlEvents=[{name:"onclose",action:"script",param:{handler:function(t){try{n.B.fireEvent(I,"onCloseWindow",t),I.removeNameLayer(this.id);for(var e=0;e<I.fixedWindowArr.length;e++)if(I.fixedWindowArr[e].id==this.id){I.fixedWindowArr.splice(e,1);break}I.createNameLayer(),I.selectWindow();var i=I.nowWindow?I.getWinInfoObj(I.nowWindow).windowId:null;if(n.B.fireEvent(I,"onwindowchange",I.closedWindowId,i),I.setFocus(I.getSelectedIndex()),I.options.autoArrange)if(I.options.useFixButton){var o=I.options.verticalArrangeNum,s=I.options.horizontalArrangeNum;"vertical"==I.arrangeHistory&&I.windows.length<o?I.options.verticalArrangeNum=I.windows.length:"horizontal"==I.arrangeHistory&&I.windows.length<s&&(I.options.horizontalArrangeNum=I.windows.length),
"sequential"==I.arrangeHistory&&I.windows.length<=I.options.sequentialArrangeColNum?(I.options.verticalArrangeNum=I.windows.length,I.setArrangeWindows("vertical"),I.arrangeHistory="sequential"):I.setArrangeWindows(I.arrangeHistory),I.options.verticalArrangeNum=o,I.options.horizontalArrangeNum=s}else I.setArrangeWindows(I.arrangeHistory);0==I.windows.length&&(I.options.spaAuto?"wframe"===I.options.frameMode&&(I.windowIdx=0):I.windowIdx=I.options.spaInitCount)}catch(t){a.w.printStackTrace(t,null,I)}}}},{name:"onwindowkeyup",action:"script",param:{handler:function(t){try{n.B.fireEvent(I,"onwindowkeyup",t)}catch(t){a.w.printStackTrace(t,null,I)}}}},{name:"onwindowmousedown",action:"script",param:{handler:function(t){try{I.selectNameLayer(this.id)}catch(t){a.w.printStackTrace(t,null,I)}}}},{name:"onminimize",action:"script",param:{handler:function(t){I._onminimize(this.id)}}},{name:"onmaximize",action:"script",param:{handler:function(t){I._onmaximize(this.id)}}},{name:"ondragstart",action:"script",param:{handler:function(t){I.selectNameLayer(this.id),I.handleDragStartEvent()}}},{name:"ondragend",action:"script",param:{handler:function(t){I.handleDragEndEvent()}}},{name:"onpopup",action:"script",param:{handler:function(t){I._onpopup(this.id)}}},{name:T,action:"script",param:{handler:function(t){n.B.fireEvent(I,"onwindowload",this._windowId)}}},{name:"onwindowunload",action:"script",param:{handler:function(){n.B.fireEvent(I,"onwindowunload",this._windowId)}}}],this.options.nameLayerMenu&&_.options.xmlEvents.push({name:"onwindowmousedown",action:"script",param:{handler:function(t){try{I.hideContextMenu()}catch(t){a.w.printStackTrace(t,null,I)}}}}),this.options.controlIconFormatter&&_.options.xmlEvents.push({name:"onwindowmousedown",action:"script",param:{handler:function(t){try{I.hideWindowList()}catch(t){a.w.printStackTrace(t,null,I)}}}}),_.writeTo(this.getChild(this.id+"_window")),!0!==g&&(_.activate(),_.onComplete()),_},u.prototype.setWindowLabel=function(t,e,i){try{if(!t||!e||!i)return;for(var o,s=this.windows.length-1;s>=0;s--)if(this.windows[s].windowId===t){o=this.windows[s];break}if(!o)return;var r="all"===(e=e.toLowerCase());if("window"===e||r){if(o.windowTitle=i,o.window.options.windowTitle=i,this.options.windowTooltipDisplay){var n=document.getElementById(o.id);n&&n.setAttribute("title",i)}var l=document.getElementById(o.id+"_header_title");l&&(l.innerHTML=i)}if(("tooltip"===e||r)&&(o.tooltip=i),"toolbar"===e||r)document.getElementById(this.id+"_nameLayer_"+o.id).setAttribute("windowTitle",i),o.title=i,this.createNameLayer(),this.selectWindow()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getWindowLabel=function(t,e){try{if(!t||!e)return;for(var i,o=this.windows.length-1;o>=0;o--)if(this.windows[o].windowId===t){i=this.windows[o];break}if(!i)return;if("toolbar"===(e=e.toLowerCase()))return i.title;if("window"===e)return i.windowTitle;if("tooltip"===e)return i.tooltip}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.createNameLayer=function(){try{var t=[];this.dom.nameBar.innerHTML="";var e="w2windowContainer_nameLayer";this.options.useFixButton&&(e+=" w2windowContainer_nameLayer_fix");for(var i=0;i<this.windows.length;i++){if((n=this.windows[i]).useNameLayer)if(n.nameLayerHTML)this._setNameLayerHTML(n.id,t);else{if(t.push("<div id='"+this.id+"_nameLayer_"+n.id+"' class='"+e+"' refId='"+n.id+"' windowTitle='"+n.title+"'>"),this.options.useFixButton){var o="w2windowContainer_nameLayer_fixOff";n.isFix&&(o+=" w2windowContainer_nameLayer_fixOn"),t.push("<div class='"+o+"' refId='"+n.id+"'>"),t.push("</div>")}t.push(n.title),this.options.useCloseButton&&(t.push("<div class='w2windowContainer_nameLayer_close' refId='"+n.id+"'>"),t.push("</div>")),this.options.nameLayerMenu&&(t.push("<div class='w2windowContainer_nameLayer_menu' refId='"+n.id+"'>"),t.push("</div>")),t.push("</div>")}}if(this.dom.nameBar.innerHTML=t.join(""),this.dom.nameBar.style.width="auto",this.windows.length>0){for(var s=0,r=(i=0,
0);i<this.windows.length;i++){var n;if((n=this.windows[i]).useNameLayer){var l=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[r],"margin-left"))||0,h=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[r],"margin-right"))||0;s+=this.dom.nameBar.childNodes[r].offsetWidth+l+h,r++}}this.dom.nameBar.style.width=s+2+"px"}else this.dom.nameBar.style.width="0px";var d=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2,u=this.render.offsetWidth,c=0;if(!this.options.nameLayerMenu&&this.options.toolbarWidth)this.dom.toolBar.style.width=this.options.toolbarWidth+"px",u=this.options.toolbarWidth;else if(!this.options.nameLayerMenu){c=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left"));var p=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(c)||(u-=c),isNaN(p)||(u-=p)}u<this.dom.nameBar.scrollWidth+d?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.display="",this.dom.leftScrollBtn.style.display=""):(this.options.useNameScroll=!1,this.options.useNameContainer||this.options.nameLayerMenu?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=d+"px",this.useControlIconFormatter&&(this.options.useNameContainer&&"right"==this.options.controlIconPosition&&!this.options.nameLayerMenu?document.getElementById(this.id+"_nameContainer").style.right=d+"px":this.options.useNameContainer&&"left"==this.options.controlIconPosition&&!this.options.namelayerMenu&&(document.getElementById(this.id+"_nameContainer").style.left=d+"px")),this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none"),1==this.options.useNameScroll&&(this.options.useWindowScrollButton&&"allright"===this.options.controlIconPosition||(this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px"),this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block")}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._setNameLayerHTML=function(t,e){try{if(!t||!e)return;for(var i,o=this.windows.length-1;o>=0;o--)if(this.windows[o].id===t){i=this.windows[o];break}if(!i)return;var s=i.title,r="",n="",h="",d=e;if(this.options.useFixButton){var u="w2windowContainer_nameLayer_fixOff_custom";i.isFix&&(u+=" w2windowContainer_nameLayer_fixOn"),r="<div class='"+u+"' refId='"+i.id+"'></div>"}this.options.useCloseButton&&(n="<div class='w2windowContainer_nameLayer_close_custom' refId='"+i.id+"'></div>"),this.options.nameLayerMenu&&(h="<div class='w2windowContainer_nameLayer_menu' refId='"+i.id+"'></div>"),e.push("<div id='"+this.id+"_nameLayer_"+i.id+"' class='w2windowContainer_nameLayer' refId='"+i.id+"' windowTitle='"+i.title+"'>");try{var c=l.D.getGlobalFunction(i.nameLayerHTML,this.scope_id);d="function"==typeof c?c(s,r,n,h):c}catch(t){d=i.nameLayerHTML}e.push(d),e.push("</div>")}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.removeNameLayer=function(t){try{var e=this.getWinInfoObj(t);if(null==e)return;this.closedWindowId=e.windowId;for(var i=0;i<this.windows.length;i++){this.windows[i].id==t&&this.windows.splice(i,1)}this.addHistory(t),this.closedWindow=this.selectedWindowHistory.pop(),this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-2]||null,this.nowWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1]||null,this.currentWindowNum--}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.clickNameLayer=function(t,e,i){try{var o=t,s=(e=l.D.getBoolean(e),l.D.getBoolean(i.stopToggleOnLast));if(this.nowWindow==o){var r=this.getWinInfoObj(this.nowWindow).windowId;if(n.B.fireEvent(this,"onwindowtabclick",r,r),1==s&&1==this.windows.length)return;if(1==e||this.options.nameLayerMenu)return;this.minimizeWindow(o)}else{this.beforeWindow=this.nowWindow,this.nowWindow=o,this.selectWindow();var h=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,d=this.getWinInfoObj(this.nowWindow).windowId;n.B.fireEvent(this,"onwindowchange",h,d),n.B.fireEvent(this,"onwindowtabclick",h,d)}
}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getWinInfoObj=function(t,e){try{null==e&&(e="id");for(var i=0;i<this.windows.length;i++)if(this.windows[i][e]==t)return this.windows[i]}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.fixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;if(e.isFix=!0,this.fixedWindowArr.push(e),this.options.useFixButton)for(var i=document.getElementById(this.id+"_nameLayer_"+e.id),o=0;o<i.childNodes.length;o++){var s=i.childNodes[o];if(1===s.nodeType&&s.getAttribute("refId")===e.id)return s.className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn",!0}return!0}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.unfixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;e.isFix=!1;for(var i=0;i<this.fixedWindowArr.length;i++)this.fixedWindowArr[i].id==e.id&&this.fixedWindowArr.splice(i,1);if(this.options.useFixButton){var o=document.getElementById(this.id+"_nameLayer_"+e.id);for(i=0;i<o.childNodes.length;i++){var s=o.childNodes[i];if(1===s.nodeType&&s.getAttribute("refId")===e.id)return s.className="w2windowContainer_nameLayer_fixOff",!0}}return!0}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.minimizeWindow=function(t){try{this.getWinInfoObj(t).window.minimize()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._onminimize=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.nowWindow==e)this.minimizedWindow=this.selectedWindowHistory.pop(),this.nowWindow=this.selectedWindowHistory.pop()||null,this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1];else for(var i=0;i<this.selectedWindowHistory.length;i++)if(e==this.selectedWindowHistory[i]){this.selectedWindowHistory.splice(i,1);break}if(this.selectWindow(),this.prevWindow==e){var o=this.getWinInfoObj(this.minimizedWindow).windowId,s=this.nowWindow?this.getWinInfoObj(this.nowWindow).windowId:null;n.B.fireEvent(this,"onwindowchange",o,s)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.maximizeWindow=function(t){try{this.getWinInfoObj(t).window.maximize()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._onmaximize=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e&&(this.nowWindow=e,this.selectWindow(),this.prevWindow)){var i=this.getWinInfoObj(this.prevWindow).windowId,o=this.getWinInfoObj(e).windowId;n.B.fireEvent(this,"onwindowchange",i,o)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._onpopup=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e){this.nowWindow=e,this.selectWindow();var i=this.getWinInfoObj(this.prevWindow).windowId,o=this.getWinInfoObj(e).windowId;n.B.fireEvent(this,"onwindowchange",i,o)}var s=this.getSelectedIndex();if(s>-1&&s<this.windows.length){var r=this.windows[s],h=(window.screen.availHeight-this.getSize("height"))/2,d=(window.screen.availWidth-this.getSize("width"))/2,u={id:r.id,type:"window",width:this.getSize("width")+"px",height:this.getSize("height")+"px",top:h+"px",left:d+"px",popupName:r.title,modal:!1,useIFrame:!1,style:"",resizable:!0,status:!1,menubar:!1,scrollbars:!0,title:!1,srcData:"",destData:""};l.D.openPopup(r.window.options.src,u),this.options.closeWindowOnPopup&&r.window.forceClose()}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.selectWindow=function(){try{for(var t=0;t<this.windows.length;t++){var e=this.windows[t].id,i=document.getElementById(this.id+"_nameLayer_"+e),o=document.getElementById(e+"_header"),s=document.getElementById(e);this.removeClass(i,"w2windowContainer_selectedNameLayer"),this.removeClass(o,"w2window_selected_header"),this.removeClass(s,"w2window_selected")}if(null!=this.nowWindow){var n=this.getWinInfoObj(this.nowWindow);if(n.window.windowInfo.minimized=!1,this.options.skipZIndex)this.zIndexFlagInfo[n.id]?(n.window.setStyle("display","block"),this.increaseZIndex(n.window)):(n.window.setStyle("display","none"),
n.window.setStyle("zIndex",0));else n.window.setStyle("display","block"),this.increaseZIndex(n.window),l.D.getBoolean(r.v.getConfiguration("/WebSquare/windowContainer/displayOnlyTopWindow/@value"))&&this.displayOnlyTopWindow();i=document.getElementById(this.id+"_nameLayer_"+this.nowWindow),o=document.getElementById(this.nowWindow+"_header"),s=document.getElementById(this.nowWindow);if(this.addClass(i,"w2windowContainer_selectedNameLayer"),this.addClass(o,"w2window_selected_header"),this.addClass(s,"w2window_selected"),"hide"==this.options.nameScrollMode){var h=0,d=this.dom.nameBar.offsetWidth,u=this.selectedIndex;if(this.addHistory(this.nowWindow),this.refreshSelectedIndex(),u>this.selectedIndex)for(t=u;t>=0;t--){var c=this.windows[t].id;"block"!=(p=document.getElementById(this.id+"_nameLayer_"+c)).style.display&&(p.style.display="block")}for(t=this.selectedIndex;t>=0;t--){var p;c=this.windows[t].id;if("none"!=(p=document.getElementById(this.id+"_nameLayer_"+c)).style.display){var g=WebSquare.style.getStyle(p,"margin-left");g="auto"===g?"0":g;var m=WebSquare.style.getStyle(p,"margin-right");m="auto"===m?"0":m;var f=p.offsetWidth+parseInt(g,10)+parseInt(m,10);h+f>=d?p.style.display="none":h+=f}}}else if(this.options.useNameScroll){if("allright"==this.options.controlIconPosition)var b=this.dom.nameContainer.offsetLeft,y=this.dom.control.offsetLeft,v=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,w=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;else b=this.dom.leftScrollBtn.offsetLeft+this.dom.leftScrollBtn.offsetWidth,y=this.dom.rightScrollBtn.offsetLeft,v=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,w=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;if(v>y||w>y)this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-(w-y)+"px";else if(v<b||w<b){var S=this.options.nameLayerMenu||this.options.useNameContainer&&"right"==this.options.controlIconPosition?0:this.dom.control.offsetWidth;"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft-i.offsetLeft+"px":this.dom.nameBar.style.left=S+this.dom.leftScrollBtn.offsetWidth-i.offsetLeft+"px"}this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.selectedIndex=-1}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.addHistory=function(t){try{for(var e=null,i=0;i<this.selectedWindowHistory.length;i++)this.selectedWindowHistory[i]==t&&(e=i);null!=e&&this.selectedWindowHistory.splice(e,1),this.selectedWindowHistory.push(t)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.increaseZIndex=function(t){try{this.maxZIndex+=2,t.setStyle("zIndex",this.maxZIndex),this.windowList&&(this.windowList.render.style.zIndex=this.maxZIndex+2),this.options.nameLayerMenu?this.getElementById(this.id+"_nameContainer").style.zIndex=this.maxZIndex:this.dom.toolBar.style.zIndex=this.maxZIndex}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.displayOnlyTopWindow=function(){try{for(var t=this.windows.length,e=this.nowWindow,i=0;i<t;i++){var o=this.windows[i].id,s=this.getWinInfoObj(o);o!=e&&"maximized"==s.window.windowInfo.status&&s.window.setStyle("display","none")}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setZIndex=function(t){try{var e=this.windows[t];e&&(e.window.setStyle("display","block"),this.increaseZIndex(e.window),this.zIndexFlagInfo[e.id]=!0)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.selectNameLayer=function(t){try{for(var e=0;e<this.selectedWindowHistory.length;e++)if(this.selectedWindowHistory[e]==t){this.prevWindow=this.nowWindow;var i=t;if(i!=this.nowWindow&&(this.beforeWindow=this.nowWindow,this.nowWindow=i),this.selectWindow(),this.prevWindow!=i){var o=null;this.prevWindow&&(o=this.getWinInfoObj(this.prevWindow).windowId);var s=this.getWinInfoObj(i).windowId;n.B.fireEvent(this,"onwindowchange",o,s)}}}catch(t){a.w.printStackTrace(t,null,this)}},
u.prototype.doVerticalArrange=function(t){try{var e=0,i=2,o=[],s=[];if(t){for(var r=0;r<t.length;r++)for(var n=0;n<this.windows.length;n++){if((l=this.windows[n]).windowId==t[r]){o.push(l);break}}for(r=0;r<this.windows.length;r++){var l=this.windows[r],h=!0;for(n=0;n<t.length;n++)if(l.windowId==t[n]){h=!1;break}h&&s.push(l)}}else for(r=0;r<this.windows.length;r++){0==(l=this.windows[r]).window.windowInfo.minimized&&o.push(l)}var d=o.length;d<this.options.lineBreakNum?(i=1,e=d):(i=2,e=Math.ceil(d/i));var u,c,p="",g=0,m=0;for(r=0;r<s.length;r++)s[r].window.minimize(!0);for(r=0;r<d;r++){var f=o[r],b=f.window,y=b.resizeParentGroup();u=parseInt(y.width/e,10),c=parseInt(y.height/i,10),b.restore(),b.setSize(u-(b.getSize("outerMarginWidth")-b.getSize("width")),c-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(g*u,m*c),++g==e&&(g=0,m++),p=f.id,this.addHistory(p)}!1===this.options.keepSelectedWindow&&this.selectNameLayer(p),this.arrangeHistory="vertical"}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.doVerticalFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(g=this.windows[o]).isFix||(g.window.windowInfo.minimized?e(g.id):i[g.id]=g)}var s=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var r=s[o];void 0!==i[r]&&e(i[r].id)}for(o=0;o<this.fixedWindowArr.length;o++){if(e((g=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var n=0;n<this.dom.nameBar.childNodes.length;n++)if(this.dom.nameBar.childNodes[n].getAttribute("refId")===this.fixedWindowArr[o].id){0!=n&&this.moveNameLayer(n,0);break}}var l=this.options.verticalArrangeNum,h=this.windows.length;this.options.fixArrangeFullScreen&&(l=l>h?h:l);var d=0,u=0,c=0;if("none"==this.options.positionX)for(o=this.selectedWindowHistory.length;o>0;o--){var p=(m=(g=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();u=parseInt(p.width/l,10),c=parseInt(p.height/1,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),c-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(d*u,0*c),++d==l&&(d=0)}else if("left"==this.options.positionX)for(o=this.selectedWindowHistory.length;o>0;o--){p=(m=(g=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();u=parseInt(p.width/l,10),c=parseInt(p.height/1,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),c-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(d*u,0*c),++d==l&&(d=1)}else if("right"==this.options.positionX){d=l-1;for(o=this.selectedWindowHistory.length;o>0;o--){var g,m;p=(m=(g=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();u=parseInt(p.width/l,10),c=parseInt(p.height/1,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),c-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(d*u,0*c),++d==l&&(d=0),d==l-1&&(d=0)}}this.selectNameLayer(this.selectedWindowHistory[h-1]),this.arrangeHistory="vertical"}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.doHorizontalArrange=function(t){try{var e=2,i=0,o=[],s=[];if(t){for(var r=0;r<t.length;r++)for(var n=0;n<this.windows.length;n++){if((h=this.windows[n]).windowId==t[r]){o.push(h);break}}for(r=0;r<this.windows.length;r++){var l=!0,h=this.windows[r];for(n=0;n<t.length;n++)if(h.windowId==t[n]){l=!1;break}l&&s.push(h)}}else for(r=0;r<this.windows.length;r++){0==(h=this.windows[r]).window.windowInfo.minimized&&o.push(h)}var d=o.length;d<this.options.lineBreakNum?(i=d,e=1):(i=Math.ceil(d/e),e=2);var u,c,p="",g=0,m=0;for(r=0;r<s.length;r++)s[r].window.minimize(!0);for(r=0;r<d;r++){var f=o[r],b=f.window,y=b.resizeParentGroup();u=parseInt(y.width/e,10),c=parseInt(y.height/i,10),b.restore(),
b.setSize(u-(b.getSize("outerMarginWidth")-b.getSize("width")),c-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(g*u,m*c),++g==e&&(g=0,m++),p=f.id,this.addHistory(p)}!1===this.options.keepSelectedWindow&&this.selectNameLayer(p),this.arrangeHistory="horizontal"}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.doHorizontalFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(g=this.windows[o]).isFix||(g.window.windowInfo.minimized?e(g.id):i[g.id]=g)}var s=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var r=s[o];void 0!==i[r]&&e(i[r].id)}for(o=0;o<this.fixedWindowArr.length;o++){if(e((g=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var n=0;n<this.dom.nameBar.childNodes.length;n++)if(this.dom.nameBar.childNodes[n].getAttribute("refId")===this.fixedWindowArr[o].id){0!=n&&this.moveNameLayer(n,0);break}}var l=this.options.horizontalArrangeNum,h=this.windows.length;this.options.fixArrangeFullScreen&&(l=l>h?h:l);var d=0,u=0,c=0;if("none"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){var p=(m=(g=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();u=parseInt(p.width/1,10),c=parseInt(p.height/l,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),c-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*u,d*c),++d==l&&(d=0)}else if("top"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){p=(m=(g=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();u=parseInt(p.width/1,10),c=parseInt(p.height/l,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),c-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*u,d*c),++d==l&&(d=1)}else if("bottom"==this.options.positionY){d=l-1;for(o=this.selectedWindowHistory.length;o>0;o--){var g,m;p=(m=(g=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();u=parseInt(p.width/1,10),c=parseInt(p.height/l,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),c-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*u,d*c),++d==l&&(d=0),d==l-1&&(d=0)}}this.selectNameLayer(this.selectedWindowHistory[h-1]),this.arrangeHistory="horizontal"}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.doCascadeArrange=function(){try{for(var t,e,i="",o=[],s=0;s<this.windows.length;s++){var r=this.windows[s];0==r.window.windowInfo.minimized&&o.push(r)}var n=o.length;for(s=0;s<n;s++){var l=o[s],h=l.window;if(0==s){var d=h.resizeParentGroup();t=parseInt(d.width-200,10),e=parseInt(d.height-200,10)}h.restore(),h.setSize(t-(h.getSize("outerMarginWidth")-h.getSize("width")),e-(h.getSize("outerMarginHeight")-h.getSize("height"))),h.setPosition(s%10*20,s%10*20),i=l.id}this.selectNameLayer(i),this.arrangeHistory="cascade"}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.doCascadeFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(u=this.windows[o]).isFix||(u.window.windowInfo.minimized?e(u.id):i[u.id]=u)}var s=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var r=s[o];void 0!==i[r]&&e(i[r].id)}for(o=0;o<this.fixedWindowArr.length;o++){if(e((u=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var n=0;n<this.dom.nameBar.childNodes.length;n++)if(this.dom.nameBar.childNodes[n].getAttribute("refId")===this.fixedWindowArr[o].id){0!=n&&this.moveNameLayer(n,0);break}}var l=this.windows.length,h=0,d=0;for(o=this.selectedWindowHistory.length;o>0;o--){var u,c=(u=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window;if(o==this.selectedWindowHistory.length){
var p=c.resizeParentGroup();h=parseInt(p.width-200,10),d=parseInt(p.height-200,10)}c.restore(),c.setSize(h-(c.getSize("outerMarginWidth")-c.getSize("width")),d-(c.getSize("outerMarginHeight")-c.getSize("height"))),c.setPosition((o-1)%10*20,(o-1)%10*20)}this.selectNameLayer(this.selectedWindowHistory[l-1]),this.arrangeHistory="cascade"}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.doSequentialArrange=function(){try{for(var t=1,e=1,i=!0,o=[],s=0;s<this.windows.length;s++){var r=this.windows[s];0==r.window.windowInfo.minimized&&o.push(r)}for(var n,l,h=o.length;i;)t*e<h?t==e?t++:e++:i=!1;var d="",u=0,c=0;for(s=0;s<h;s++){var p=o[s],g=p.window;if(0==s){var m=g.resizeParentGroup();n=parseInt(m.width/t,10),l=parseInt(m.height/e,10)}g.restore(),g.setSize(n-(g.getSize("outerMarginWidth")-g.getSize("width")),l-(g.getSize("outerMarginHeight")-g.getSize("height"))),g.setPosition(u*n,c*l),++u==t&&(u=0,c++),d=p.id}!1===this.options.keepSelectedWindow&&this.selectNameLayer(d),this.arrangeHistory="sequential"}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.doSequentialFixArrange=function(){try{for(var t=this,e=function(e){t.prevWindow=t.nowWindow;var i=e;i!=t.nowWindow&&(t.beforeWindow=t.nowWindow,t.nowWindow=i),t.selectWindow()},i={},o=0;o<this.windows.length;o++){(f=this.windows[o]).isFix||(f.window.windowInfo.minimized?e(f.id):i[f.id]=f)}var s=this.selectedWindowHistory.slice();for(o=0;o<this.selectedWindowHistory.length;o++){var r=s[o];void 0!==i[r]&&e(i[r].id)}for(o=0;o<this.fixedWindowArr.length;o++){if(e((f=this.fixedWindowArr[o]).id),this.options.nameLayerRearrange)for(var n=0;n<this.dom.nameBar.childNodes.length;n++)if(this.dom.nameBar.childNodes[n].getAttribute("refId")===this.fixedWindowArr[o].id){0!=n&&this.moveNameLayer(n,0);break}}var l=this.options.sequentialArrangeRowNum,h=this.options.sequentialArrangeColNum,d=this.windows.length;this.options.fixArrangeFullScreen&&(l=(h=h>d?d:h)>d?1:l);var u=0,c=0,p=0,g=0;if("none"==this.options.positionX&&"none"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){var m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/h,10),g=parseInt(m.height/l,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*p,c*g),++u==h&&(u=0,++c==l&&(c=0))}else if("left"==this.options.positionX&&"top"==this.options.positionY)for(o=this.selectedWindowHistory.length;o>0;o--){m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/h,10),g=parseInt(m.height/l,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*p,c*g),++u==h&&(u=0,++c==l&&(u=1,c=0))}else if("right"==this.options.positionX&&"top"==this.options.positionY){u=h-1;for(o=this.selectedWindowHistory.length;o>0;o--){m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/h,10),g=parseInt(m.height/l,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*p,c*g),u++,0==c&&u==h-1&&(c++,u=0),u==h&&(u=0,0!=c&&++c==l&&(c=0))}}else if("left"==this.options.positionX&&"bottom"==this.options.positionY){c=l-1;for(o=this.selectedWindowHistory.length;o>0;o--){m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/h,10),g=parseInt(m.height/l,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*p,c*g),c==l-1&&0==u?(u=0,c=0):++u==h&&(u=0,++c==l-1?u=1:c==l&&(c=0))}}else if("right"==this.options.positionX&&"bottom"==this.options.positionY){u=h-1,c=l-1;for(o=this.selectedWindowHistory.length;o>0;o--){var f,b
;m=(b=(f=this.getWinInfoObj(this.selectedWindowHistory[o-1])).window).resizeParentGroup();p=parseInt(m.width/h,10),g=parseInt(m.height/l,10),b.restore(),b.setSize(p-(b.getSize("outerMarginWidth")-b.getSize("width")),g-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*p,c*g),u++,c!=l-1||u!=h-1&&u!=h||(u=0,c=0),u==h&&(u=0,c++)}}this.selectNameLayer(this.selectedWindowHistory[d-1]),this.arrangeHistory="sequential"}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.doCloseAll=function(){if(!1!==n.B.fireEvent(this,"onbeforecloseall")){for(var t=this.windows.length-1;t>=0;t--)this.options.useFixButton?("fixedWindow"==this.options.closeType&&!0===this.windows[t].isFix||"noneFixedWindow"==this.options.closeType&&!1===this.windows[t].isFix||"all"==this.options.closeType)&&(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close()):(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close());this.selectedIndex=-1}},u.prototype.doMaximizeAll=function(){for(var t=[],e=0;e<this.selectedWindowHistory.length;e++)for(var i=0;i<this.selectedWindowHistory.length;i++)if(this.selectedWindowHistory[e]==this.windows[i].id){t.push(this.windows[i]);break}for(e=0;e<t.length;e++)"maximized"!==t[e].window.windowInfo.status&&t[e].window.maximize()},u.prototype.isExistWindow=function(t){try{for(var e=0;e<this.windows.length;e++){if(t==this.windows[e].title)return!0}return!1}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setSize=function(t,e){try{parseInt(t)<450&&(t=450),parseInt(e)<150&&(e=150);var i=this.getSize("width"),o=this.getSize("height"),s=t/i,r=e/o;this.setStyle("width",t+"px"),this.setStyle("height",e+"px");for(var n=0;n<this.windows.length;n++){var l=this.windows[n];if(l.window.resizeParentGroup(),this.options.windowAutoResize&&"maximized"!=l.window.windowInfo.status){var h=l.window,d=h.getSize("width"),u=h.getSize("height"),c=parseInt(h.getStyle("left"),10),p=parseInt(h.getStyle("top"),10),g=Math.ceil(d*s),m=Math.ceil(u*r),f=Math.ceil(c*s),b=Math.ceil(p*r);l.window.setSize(g,m),l.window.setStyle("left",f+"px"),l.window.setStyle("top",b+"px")}this.options.useNameScroll&&(this.dom.rightScrollBtn.style.left=parseInt(this.render.offsetWidth)-20+"px")}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.checkResize=function(){try{var t=this.render?this.render.offsetWidth:null;null!=this.bWidth&&t!=this.bWidth&&this.nameLayerResize(),this.bWidth=t}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.nameLayerResize=function(t){try{var e=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2;if(!this.options.toolbarWidth){var i=this.render.offsetWidth,o=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left")),s=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(o)||(i-=o),isNaN(s)||(i-=s),i<this.dom.nameBar.scrollWidth+e?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px",this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block","allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.control.offsetLeft-this.dom.nameBar.offsetWidth+"px":this.dom.nameBar.style.left=this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth+"px"):(this.options.useNameScroll=!1,this.options.useNameContainer?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=e+"px",this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none")}if("hide"==this.options.nameScrollMode)for(var r=0;r<this.windows.length;r++){var n=this.windows[r].id,l=document.getElementById(this.id+"_nameLayer_"+n);"none"==l.style.display&&(l.style.display="block")}this.selectWindow()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setWindowMaxNum=function(t){try{if(!t||"number"!=typeof t)return!1;this.options.windowMaxNum=t}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.createWindowList=function(t){if(!this.windowList){var e=""
;e+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' class='w2windowContainer_window_list' labelCheck='true' visibleRowNum='"+this.options.windowScrollVisibleRowNum+"' useCloseButton='"+this.options.useWindowScrollButton+"'>",e+="    <w2:listRow tagName='div' style='' class='w2windowContainer_window_list_listRow' >",e+="        <w2:listColumn id='title' inputType='text' style='' class='w2windowContainer_window_list_listColumn_text'/>",e+="    </w2:listRow>",e+="</w2:list>";var i=WebSquare.xml.parse(e,!0).documentElement;this.windowList=new WebSquare.uiplugin.list(this.id+"_windows_list","",i);var o=this,s=function(t){n.B.stopPropagation(t);var e,i=n.B.getTarget(t);if(i.className.match("w2list_listColumn_close")){e=i.parentElement.getAttribute("unique_id");for(var s="",r=0;r<o.windows.length;r++)if(o.windows[r].unique_id===e){s=o.windows[r].windowId,o.windowList.removeRow(r);break}s&&(o.windows.length<2?o.hideWindowList():o.showWindowList(!0),o.closeWindow(s))}else{if(i.className.match("w2windowContainer_window_list_listColumn_text"));else if(!i.className.match("w2windowContainer_window_list_listRow"))return void(o.dom.iconWindowList!==i&&this.render!==i&&o.hideWindowList());e=i.parentElement.getAttribute("unique_id");for(s="",r=0;r<o.windows.length;r++)if(o.windows[r].unique_id===e){s=o.windows[r].id;break}if(!s)return void o.hideWindowList();o.listToggle=!1;var a={};a.stopToggleOnLast=o.options.stopToggleOnLast,o.clickNameLayer(s,o.options.stopMinimizeOnNameLayer,a),o.hideWindowList()}};this.windowList.bind("onclick",s),this.windowList.writeTo(WebSquare.getBody()),this.windowList.activate(),WebSquare.getBody().getLayerListener().addListener({component:this.windowList,fnShow:this.windowList.show,fnHide:this.windowList.hide,otherClick:s,event:{}}),this.windowList.setJSON(this.windows)}},u.prototype.showWindowList=function(t){try{this.windowList||t||this.createWindowList(),t||(this.windowList.setJSON(this.windows),WebSquare.style.show(this.windowList.render)),this.windowList.render.style.zIndex=this.maxZIndex+2,this.windowList.options.rowHeight=this.windowList.render.firstChild.offsetHeight,this.windowList.adjustRender();var e=this.dom.iconWindowList,i=WebSquare.style.getRelativeTop(this.dom.toolBar,this.render.offsetParent),o=WebSquare.style.getAbsoluteLeft(e,this.render),s="top"===this.options.toolbarPosition?i+this.dom.iconWindowList.clientHeight+4:i-this.windowList.render.clientHeight,r=e.clientWidth+WebSquare.style.getAbsoluteLeft(e)-this.windowList.render.clientWidth,n=!this.options.useNameContainer||"right"!==this.options.controlIconPosition&&"allright"!==this.options.controlIconPosition?o:this.windows.length>this.windowList.options.visibleRowNum?r-18:r;this.windowList.setPosition(n,s),this.windowList.focus(),this.listToggle=!0}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.hideWindowList=function(){try{this.windowList&&this.windowList.id&&(WebSquare.getBody().getLayerListener().hide(this.windowList.id),this.listToggle=!1)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.toggle=function(){try{this.listToggle?this.hideWindowList():this.showWindowList()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.showTooltip=function(t,e){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){if(this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2windowContainer_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),"block"!=this.tooltip.render.style.display){this.tooltip.setStyle("display","block"),this.tooltip.render.innerHTML=e;var i,o=WebSquare.style.getAbsoluteLeft(t)+t.offsetWidth/2
;i="bottom"===this.options.toolbarPosition?WebSquare.style.getAbsoluteTop(t)-this.tooltip.render.offsetHeight:WebSquare.style.getAbsoluteTop(t)+this.tooltip.render.offsetHeight,this.tooltip.setStyle("zIndex",this.maxZIndex),this.tooltip.setStyle("left",o+"px"),this.tooltip.setStyle("top",i+"px")}})),1e3*this.options.tooltipTime)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.hideTooltip=function(){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),this.tooltip&&this.tooltip.setStyle("display","none")}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setWindowSize=function(t,e){try{for(var i=parseInt(t,10)+"px",o=parseInt(e,10)+"px",s=0;s<this.windows.length;s++){var r=this.windows[s],n=r.window;r.id==this.nowWindow&&(n.windowInfo.width=i,n.windowInfo.height=o,n.restore())}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.restoreWindowSize=function(t){try{for(var e=0;e<this.windows.length;e++){var i=this.windows[e],o=i.window;if(i.windowId==t){o.restore();break}}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setWindowPosition=function(t,e){try{for(var i=parseInt(t,10)+"px",o=parseInt(e,10)+"px",s=0;s<this.windows.length;s++){var r=this.windows[s],n=r.window;if(r.id==this.nowWindow){n.windowInfo.left=i,n.windowInfo.top=o,n.windowInfo.status="restored",n.windowInfo.minimized=!1,n.windowInfo.getInfo(n.render);break}}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.closeWindow=function(t){try{var e=this.getWinInfoObj(t,"windowId"),i="";i=null==e?this.nowWindow:e.id;for(var o=0;o<this.windows.length;o++){var s=this.windows[o],r=s.window;if(s.id==i){this.multiViewIdArr.length>0&&this.setSingleView(),r.close();break}}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.closeOthers=function(t){try{var e,i=this.getWinInfoObj(t)||this.getWinInfoObj(t,"windowId");e=null==i?this.nowWindow:i.id;for(var o=0;o<this.windows.length;o++){var s=this.windows[o],r=s.window;s.id!=e&&r.close()}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setWindowStatusMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var o=this.windows[i],s=o.window;if(e){if(o.title==e){s.setStatusMsg(t);break}}else if(o.id==this.nowWindow){s.setStatusMsg(t);break}}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setWindowCustomMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var o=this.windows[i],s=o.window;if(e){if(o.title==e){s.setCustomMsg(t);break}}else if(o.id==this.nowWindow){s.setCustomMsg(t);break}}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setAllWindowStatusMsg=function(t){try{for(var e=0;e<this.windows.length;e++){this.windows[e].window.setStatusMsg(t)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getWindow=function(t){try{var e=r.v.getConfiguration("/WebSquare/windowContainer/getWindow/@searchTarget")||"title",i="title"===e;return this.getWindowByTarget(t,e,{focus:i})}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getFrame=function(t){try{return this.getWindowByTarget(t,"windowId",{focus:!1,frame:!0})}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype._getCurrentFrame=function(){return this.getWindowByTarget(this.getSelectedWindowId(),"windowId",{focus:!1,frame:!0})},u.prototype.getWindowByWindowId=function(t,e){try{return this.getWindowByTarget(t,"windowId",{focus:e})}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getWindowByTarget=function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=l.D.getBoolean(i.focus),s=0;s<this.windows.length;s++){var r=this.windows[s];if(t==r[e]){if(1==o&&(this.beforeWindow=this.nowWindow,this.nowWindow=r.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var h=this.getWinInfoObj(this.beforeWindow).windowId,d=this.getWinInfoObj(this.nowWindow).windowId;n.B.fireEvent(this,"onwindowchange",h,d)}return!0===i.frame?r.window.frame:r.window.frame.getWindow()}}return null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getWindowByUniqueId=function(t,e){
try{e=l.D.getBoolean(e);for(var i=0;i<this.windows.length;i++){var o=this.windows[i];if(t==o.id){if(1==e&&(this.beforeWindow=this.nowWindow,this.nowWindow=o.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var s=this.getWinInfoObj(this.beforeWindow).windowId,r=this.getWinInfoObj(this.nowWindow).windowId;n.B.fireEvent(this,"onwindowchange",s,r)}return o.window.frame.getWindow()}}return null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getUniqueIdByTitle=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var o=this.windows[i];t==o.title&&e.push(o.id)}return e}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getUniqueIdByWindowId=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var o=this.windows[i];t==o.windowId&&e.push(o.id)}return e}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.showModal=function(){try{this.modal||(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",this.render.appendChild(this.modal)),this.modal&&(this.modal.style.display="block",this.modal.style.zIndex=this.maxZIndex-1)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.hideModal=function(){try{this.modal&&(this.modal.style.display="none")}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.moveNameLayerScroll=function(t){try{if("hide"==this.options.nameScrollMode){for(var e=0,i=0;i<this.windows.length;i++){var o=this.windows[i].id,s=document.getElementById(this.id+"_nameLayer_"+o),r=WebSquare.style.getStyle(s,"margin-left");r="auto"===r?"0":r;var n=WebSquare.style.getStyle(s,"margin-right");n="auto"===n?"0":n;var l=s.offsetWidth+parseInt(r,10)+parseInt(n,10);"none"!=s.style.display&&(e+=l)}if("right"==t){if(this.dom.nameBar.offsetWidth>e)return;for(i=0;i<this.windows.length;i++){o=this.windows[i].id;if("none"!=(s=document.getElementById(this.id+"_nameLayer_"+o)).style.display&&i!=this.windows.length-1){s.style.display="none";break}}}else for(i=this.windows.length-1;i>=0;i--){o=this.windows[i].id;if("none"==(s=document.getElementById(this.id+"_nameLayer_"+o)).style.display){s.style.display="block";break}}}else{var h=parseInt(this.options.nameLayerMoveGap,10)||110;if("right"==t){var d="";d="allright"===this.options.controlIconPosition?this.dom.nameContainer.offsetWidth-this.dom.nameBar.offsetWidth:this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth,parseInt(this.dom.nameBar.style.left)-h<d?this.dom.nameBar.style.left=d+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-h+"px"}else if(this.options.useNameContainer)parseInt(this.dom.nameBar.style.left)+h>this.dom.leftScrollBtn.offsetWidth?"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft+"px":this.dom.nameBar.style.left=this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+h+"px";else{var u=this.options.nameLayerMenu?0:this.dom.control.offsetWidth;parseInt(this.dom.nameBar.style.left)+h>u+this.dom.leftScrollBtn.offsetWidth?this.dom.nameBar.style.left=u+this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+h+"px"}}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setFocus=function(t){try{if(!this.windows[t])return;this.windows[t].id!==this.nowWindow&&this.selectNameLayer(this.windows[t].id)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getSelectedIndex=function(){return this.selectedIndex},u.prototype.getSelectedWindowId=function(){return this.windows[this.selectedIndex].windowId},u.prototype.refreshSelectedIndex=function(t){try{for(var e=t||this.nowWindow,i=0;i<this.windows.length;i++){this.windows[i].id==e&&(this.selectedIndex=i)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){
if(e.match("w2windowContainer_controlIcon_customIcon"))return void n.B.fireEvent(this,"oncustomcontrolclick",e.getElement().id);if(e.match("w2windowContainer_controlIcon_vertical")&&(this.options.useFixButton&&this.options.verticalArrangeNum>0?this.doVerticalFixArrange():this.doVerticalArrange(),n.B.fireEvent(this,"onverticalarrange")),e.match("w2windowContainer_controlIcon_horizontal")&&(this.options.useFixButton&&this.options.horizontalArrangeNum>0?this.doHorizontalFixArrange():this.doHorizontalArrange(),n.B.fireEvent(this,"onhorizontalarrange")),e.match("w2windowContainer_controlIcon_cascade")&&(this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),n.B.fireEvent(this,"oncascadearrange")),e.match("w2windowContainer_controlIcon_sequential")&&(this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),n.B.fireEvent(this,"onsequentialarrange")),e.match("w2windowContainer_controlIcon_closeAll")&&this.doCloseAll(),e.match("w2windowContainer_controlIcon_maximize")){var i=this.getSelectedIndex();if(i>-1&&i<this.windows.length){var o=this.windows[i];"maximized"==o.window.windowInfo.status?(o.window.toggleResize(),n.B.fireEvent(this,"onselectedrestore")):(n.B.fireEvent(this,"onselectedmaximize"),1==this.options.windowMaximizeAll?this.doMaximizeAll():o.window.toggleResize())}}if(e.match("w2windowContainer_controlIcon_closeOthers")&&this.closeOthers(),e.match("w2windowContainer_controlIcon_windowList")&&this.windows.length>0&&this.toggle(),e.match("w2windowContainer_nameLayer")){var s=e.getElement().getAttribute("refId"),r={};r.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(s,this.options.stopMinimizeOnNameLayer,r)}if(e.match("w2windowContainer_nameLayer_close")){s=e.getElement().getAttribute("refId");return void(h=this.getWinInfoObj(s)).window.close()}if(e.match("w2windowContainer_nameLayer_close_custom")){s=e.getElement().getAttribute("refId");return void(h=this.getWinInfoObj(s)).window.close()}if(e.match("w2windowContainer_nameLayer_fixOff")){s=e.getElement().getAttribute("refId");if((h=this.getWinInfoObj(s)).isFix=!h.isFix,h.isFix)e.getElement().className="w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn",this.fixedWindowArr.push(h);else{e.getElement().className="w2windowContainer_nameLayer_fixOff";for(var l=0;l<this.fixedWindowArr.length;l++)if(this.fixedWindowArr[l].id==h.id){this.fixedWindowArr.splice(l,1);break}}return}if(e.match("w2windowContainer_nameLayer_fixOff_custom")){var h;s=e.getElement().getAttribute("refId");if((h=this.getWinInfoObj(s)).isFix=!h.isFix,h.isFix)e.getElement().className="w2windowContainer_nameLayer_fixOff_custom w2windowContainer_nameLayer_fixOn",this.fixedWindowArr.push(h);else{e.getElement().className="w2windowContainer_nameLayer_fixOff_custom";for(l=0;l<this.fixedWindowArr.length;l++)if(this.fixedWindowArr[l].id==h.id){this.fixedWindowArr.splice(l,1);break}}return}if(e.match("w2windowContainer_nameLayer_menu"))return;if(e.match("w2windowContainer_nameLayer_menu_custom"))return;e.match("w2window")&&this.selectNameLayer(e.getElement().id),e.match("w2window_restore")&&1==this.options.windowMaximizeAll&&this.doMaximizeAll(),e.match("w2windowContainer_scrollLeftBtn")&&this.moveNameLayerScroll("left"),e.match("w2windowContainer_scrollRightBtn")&&this.moveNameLayerScroll("right")}e=null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleDblClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2window_header")){var i=this.getSelectedIndex();if(i>-1&&i<this.windows.length){var o=this.windows[i];"maximized"==o.window.windowInfo.status?(o.window.toggleResize(),n.B.fireEvent(this,"onselectedrestore")):(n.B.fireEvent(this,"onselectedmaximize"),o.window.toggleResize())}}e=null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleMouseOverEvent=function(t){try{n.B.stopEvent(t)
;for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2windowContainer_nameLayer")){for(var i=e.getElement(),o=e.getElement().getAttribute("refId"),s="",r=0;r<this.windows.length;r++){var l=this.windows[r];if(o==l.id){s=l.tooltip;break}}-1==e.getElement().id.indexOf(this.nowWindow)&&this.addClass(i,"w2windowContainer_selectedNameLayer"),this.options.tooltipDisplay&&this.showTooltip(i,s)}else{if(e.match("w2windowContainer_controlIcon_customIcon"))return void n.B.fireEvent(this,"oncustomcontrolover",e.getElement().id);e.match("w2windowContainer_controlIcon_vertical")?this.addClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):e.match("w2windowContainer_controlIcon_horizontal")?this.addClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):e.match("w2windowContainer_controlIcon_cascade")?this.addClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):e.match("w2windowContainer_controlIcon_sequential")?this.addClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):e.match("w2windowContainer_controlIcon_closeAll")?this.addClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):e.match("w2windowContainer_controlIcon_maximize")?this.addClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):e.match("w2windowContainer_controlIcon_closeOthers")?this.addClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):e.match("w2windowContainer_controlIcon_windowList")?this.addClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):e.match("w2windowContainer_scrollLeftBtn")?this.addClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):e.match("w2windowContainer_scrollRightBtn")&&this.addClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}e=null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleMouseOutEvent=function(t){try{n.B.stopEvent(t),this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2windowContainer_nameLayer"))-1==e.getElement().id.indexOf(this.nowWindow)&&this.removeClass(e.getElement(),"w2windowContainer_selectedNameLayer");else{if(e.match("w2windowContainer_controlIcon_customIcon"))return void n.B.fireEvent(this,"oncustomcontrolout",e.getElement().id);e.match("w2windowContainer_controlIcon_vertical")?this.removeClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):e.match("w2windowContainer_controlIcon_horizontal")?this.removeClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):e.match("w2windowContainer_controlIcon_cascade")?this.removeClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):e.match("w2windowContainer_controlIcon_sequential")?this.removeClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):e.match("w2windowContainer_controlIcon_closeAll")?this.removeClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):e.match("w2windowContainer_controlIcon_showWindows")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_showWindows_over"):e.match("w2windowContainer_controlIcon_windowList")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):e.match("w2windowContainer_controlIcon_maximize")?this.removeClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):e.match("w2windowContainer_controlIcon_closeOthers")?this.removeClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):e.match("w2windowContainer_scrollLeftBtn")?this.removeClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):e.match("w2windowContainer_scrollRightBtn")&&this.removeClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}e=null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleDragStartEvent=function(){try{this.showModal()
}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.handleDragEndEvent=function(){try{this.hideModal()}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.finalize=function(){try{d.s.removeCheckResize(this.uuid);for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove();for(t=this.storedFrame.length-1;t>=0;t--){var e=l.D.getComponentById(this.storedFrame[t]);null!=e&&e.remove()}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.createMenu=function(){try{"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>","    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>","        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>","    </w2:listRow>","</w2:list>";var t=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>    </w2:listRow></w2:list>",!0).documentElement;this.contextMenu=new WebSquare.uiplugin.list(this.id+"_contextMenu_list","",t),this.contextMenu.writeTo(WebSquare.getBody()),this.contextMenu.activate(),WebSquare.getBody().getLayerListener().addListener({component:this.contextMenu,fnShow:this.contextMenu.show,fnHide:this.contextMenu.hide});var e=[];e.push({col1:"화면 닫기"}),e.push({col1:"듀얼 모니터로 보기"}),e.push({col1:"멀티 뷰로 보기"}),e.push({col1:"공유하기"}),this.contextMenu.setJSON(e),WebSquare.getBody().getLayerListener().hide(this.contextMenu.id);var i=this.id;this.contextMenu.bind("onmousedown",(function(t){n.B.stopPropagation(t)})),this.contextMenu.bind("onrowclick",(function(t){var e=l.D.getComponentById(i),o=this.getRowData(t);n.B.fireEvent(e,"onmenuclick",this._refId,o.col1,o),WebSquare.getBody().getLayerListener().hide(this.id),this._refId=""}))}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.toggleContextMenu=function(t,e,i){try{var o=this.getWinInfoObj(t);t="";o&&(t=o.windowId,this.contextMenu._refId=t),n.B.fireEvent(this,"onmenuopen",t),this.contextMenu||this.createMenu(),WebSquare.getBody().getLayerListener().isShow(this.contextMenu.id)?WebSquare.getBody().getLayerListener().hide(this.contextMenu.id):WebSquare.getBody().getLayerListener().show(this.contextMenu.id),this.contextMenu.setPosition(e,i-this.contextMenu.getSize("height"))}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.hideContextMenu=function(){try{WebSquare.getBody().getLayerListener().hide(this.contextMenu.id)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setMenu=function(t,e){try{this.contextMenu||this.createMenu();for(var i=[],o=0;o<t.length;o++)i.push({col1:t[o]});this.contextMenu.setJSON(i),null!=e&&this.contextMenu.setSize("height",e)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setMultiView=function(t,e){try{var i=this.getWinInfoObj(this.nowWindow),o=this.getWinInfoObj(t,"windowId");if(!i||!o||o.windowId===i.windowId)return;var s=Number(e);isNaN(s)&&(e=0);for(var r=0;r<this.windows.length;r++)this.windows[r].windowId!==t&&this.windows[r].id!==this.nowWindow&&(this.windows[r].window.minimize(!0),WebSquare.style.hide(document.getElementById(this.id+"_nameLayer_"+this.windows[r].id)));this.multiViewIdArr=[o.id,this.nowWindow];var n=o.window,l=i.window;if(n._multiViewUUID=l.uuid,l._multiViewUUID=n.uuid,n._direction=e,l._direction=e,1===e){var h=n.resizeParentGroup(),d=parseInt(h.width,10),u=parseInt(h.height/2,10);n.restore(),n.setSize(d-(n.getSize("outerMarginWidth")-n.getSize("width")),u-(n.getSize("outerMarginHeight")-n.getSize("height"))),n.setPosition(0,u);h=l.resizeParentGroup()
;var c=parseInt(h.width,10),p=parseInt(h.height/2,10);l.restore(),l.setSize(c-(l.getSize("outerMarginWidth")-l.getSize("width")),p-(l.getSize("outerMarginHeight")-l.getSize("height"))),l.setPosition(0,0)}else{h=n.resizeParentGroup(),d=parseInt(h.width/2,10),u=parseInt(h.height,10);n.restore(),n.setSize(d-(n.getSize("outerMarginWidth")-n.getSize("width")),u-(n.getSize("outerMarginHeight")-n.getSize("height"))),n.setPosition(d,0);h=l.resizeParentGroup(),c=parseInt(h.width/2,10),p=parseInt(h.height,10);l.restore(),l.setSize(c-(l.getSize("outerMarginWidth")-l.getSize("width")),p-(l.getSize("outerMarginHeight")-l.getSize("height"))),l.setPosition(0,0)}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setSingleView=function(t){try{for(var e=0;e<this.windows.length;e++)WebSquare.style.show(document.getElementById(this.id+"_nameLayer_"+this.windows[e].id));this.multiViewIdArr=[];for(e=0;e<this.windows.length;e++)this.windows[e].window.restore(),this.windows[e].window.maximize(),this.windows[e].window.setPosition(0,0),this.windows[e].window._multiViewUUID="",this.windows[e].window._direction=0;var i=this.getWinInfoObj(t,"windowId");i&&this.selectNameLayer(i.id)}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.isMultiView=function(){return this.multiViewIdArr.length>0},u.prototype.handleNameLayerMove=function(t){try{if(!this.options.nameLayerMove&&!this.options.nameLayerMenu)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(this.options.nameLayerMenu&&e.match("w2windowContainer_nameLayer_menu")){n.B.stopEvent(t);var i=e.getElement(),o=i.getAttribute("refId");this.toggleContextMenu(o,WebSquare.style.getAbsoluteLeft(i.parentNode),WebSquare.style.getAbsoluteTop(i.parentNode)),e.stop()}if(this.options.nameLayerMove&&e.match("w2windowContainer_nameLayer")){var s=-1,r=e.getElement();if(!r)return;for(var l=0;l<this.windows.length;l++)if(this.windows[l].id===r.getAttribute("refId")){s=l;break}if(isNaN(s)||s<0)return;n.B.preventDefault(t);var h=this.uuid;this._zoomLevel=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,WebSquare.dragdrop.gDragManager.activate(t,r,{id:this.id+"_ghostLayer_nameLayerMove",className:"w2windowContainer_drag_nameLayerMove",dragoverClass:"w2windowContainer_nameLayer",dropClass:"w2windowContainer_nameLayer",delay:15,makeGhostLayer:function(t){return t.render.className="",t.render.style.zIndex=-1e3,t.render.style.width="0px",t.render.style.height="0px",t},handleStart:function(t){var e=s,i=WebSquare.idCache[h],o=$(i.dom.nameBar.childNodes[e]);this.nameLayerMove_left=o.css("left"),this.dragOverNameLayer={},this.dropIndex=-1,this.nameLayerMove_zIndex=o.css("zIndex");var r=Number(this.nameLayerMove_zIndex);if(this.nameLayerMove_zIndex_Array=[],isNaN(r)||r<=0)for(var a=0;a<i.dom.nameBar.childNodes.length;a++){var n=$(i.dom.nameBar.childNodes[a]);this.nameLayerMove_zIndex_Array.push(n.css("zIndex")),a===e?n.css("zIndex",4):n.css("zIndex",5)}else o.css("zIndex",r-1)},onDrop:function(t,e,i,o,r,a,n){var l=s,d=WebSquare.idCache[h],u=$(d.dom.nameBar.childNodes[l]);if(u.css("left",this.nameLayerMove_left),this.nameLayerMove_zIndex_Array.length>0)for(var c=0;c<d.dom.nameBar.childNodes.length;c++)$(d.dom.nameBar.childNodes[c]).css("zIndex",this.nameLayerMove_zIndex_Array[c]);else u.css("zIndex",this.nameLayerMove_zIndex);for(var p in this.dragOverNameLayer)$(d.dom.nameBar.childNodes[p]).css("left",this.dragOverNameLayer[p]);d.moveNameLayer(l,this.dropIndex),this.nameLayerMove_left="",this.nameLayerMove_zIndex="",this.dragOverNameLayer={},this.nameLayerMove_zIndex_Array=[]},onDragover:function(t,e,i,o,r,a,n){for(var l=s,d=-1,u=WebSquare.idCache[h],c=0;c<u.dom.nameBar.childNodes.length;c++)if(u.dom.nameBar.childNodes[c]===e){d=c;break}var p=$(u.dom.nameBar.childNodes[l]);if(p.css("left",r/u._zoomLevel),null!=u.dom.nameBar.childNodes[d]&&d!==l){var g=$(u.dom.nameBar.childNodes[d]);null==this.dragOverNameLayer[d]?(this.dragOverNameLayer[d]=g.css("left"),
l>d?g.css("left",p.width()):g.css("left",-1*p.width()),this.dropIndex=d):(g.css("left",this.dragOverNameLayer[d]),this.dragOverNameLayer[d]=null,delete this.dragOverNameLayer[d],this.dropIndex=l>d?d+1:d-1)}}}),e.stop()}}e=null}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.moveNameLayer=function(t,e){try{if(t===e||t<0||e<0)return;var i,o;i=this.getRealWindowPosition(t),o=this.getRealWindowPosition(e);var s=this.windows[i].windowId,r=this.windows[o].windowId;if(!1===n.B.fireEvent(this,"onbeforenamelayermove",{startWindowID:s,startIndex:t,endWindowID:r,endIndex:e}))return;var l=t>e?0:1;e<this.windows.length-1?this.dom.nameBar.insertBefore(this.dom.nameBar.childNodes[t],this.dom.nameBar.childNodes[e+l]):this.dom.nameBar.appendChild(this.dom.nameBar.childNodes[t]);!function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])}(this.windows,i,o);for(var h=0;h<this.windows.length;h++)if(this.nowWindow===this.windows[h].id){this.selectedIndex=h;break}n.B.fireEvent(this,"onafternamelayermove",{startWindowID:s,startIndex:t,endWindowID:r,endIndex:e})}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.setControlIconFormatter=function(){var t=[],e=l.D.getGlobalFunction(this.options.controlIconFormatter,this.scope_id);if(!this.options.nameLayerMenu&&"function"==typeof e){if(this.controlIconFormatter=e,this.useControlIconFormatter=!0,this.controlIcons=this.controlIconFormatter?this.controlIconFormatter.call(this):this.options.controlIcons,this.options.useControlIconTitle)for(var i=0,o=this.controlIcons.length;i<o;i++){this.controlIcons[i].useTitle=!0}for(i=0,o=this.controlIcons.length;i<o;i++){var s=this.controlIcons[i],r=s.isCustom?s.className+" w2windowContainer_controlIcon_customIcon":s.className,a=s.useTitle?"title='"+WebSquare.language.getMessage("WindowContainer_controlIcon_"+s.id)+"'":"";t.push("<span id='"+this.id+"_"+s.id+"' class='"+r+"'"+a+"></span>")}var n,h=this.dom.control;"allright"===this.options.controlIconPosition?(h=this.getElementById(this.id+"_controlIconDiv")).innerHTML=t.join(""):this.dom.control.innerHTML=t.join("");for(i=0,o=this.controlIcons.length;i<o;i++){var d=this.controlIcons[i],u=document.getElementById(this.id+"_"+d.id),c=d.id.substring(0,1).toUpperCase()+d.id.substring(1,d.id.length);!1===d.isCustom&&(this.dom["icon"+c]=u)}if("allright"===this.options.controlIconPosition){n=h.childNodes[h.childNodes.length-1],h.style.width=WebSquare.style.getRelativeLeft(n,h)+n.offsetWidth+"px";for(var p=50,g=0;g<h.childNodes.length;g++)WebSquare.style.setStyle(h.childNodes[g],"left",p+"px"),p+=25;var m=25*h.childNodes.length+55,f=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right",f+"px")}else if("right"===this.options.controlIconPosition){n=h.childNodes[h.childNodes.length-1],h.style.width=WebSquare.style.getRelativeLeft(n,h)+n.offsetWidth+"px";m=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px");for(p=0,g=0;g<h.childNodes.length;g++)WebSquare.style.setStyle(h.childNodes[g],"left",p+"px"),p+=25}else{n=h.childNodes[this.dom.control.childNodes.length-1],this.dom.control.style.width=WebSquare.style.getRelativeLeft(n,this.dom.control)+n.offsetWidth+"px";m=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),WebSquare.style.setStyle(this.dom.nameContainer,"left",m+"px");for(p=0,g=0;g<h.childNodes.length;g++)WebSquare.style.setStyle(h.childNodes[g],"left",p+"px"),p+=25}this.createNameLayer(),this.selectWindow()}},u.prototype.setArrangeWindows=function(t,e){try{switch(t){case"vertical":this.options.useFixButton&&this.options.verticalArrangeNum>0&&!e?this.doVerticalFixArrange():this.doVerticalArrange(e),n.B.fireEvent(this,"onverticalarrange");break;case"horizontal":
this.options.useFixButton&&this.options.horizontalArrangeNum>0&&!e?this.doHorizontalFixArrange():this.doHorizontalArrange(e),n.B.fireEvent(this,"onhorizontalarrange");break;case"cascade":this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),n.B.fireEvent(this,"oncascadearrange");break;case"sequential":this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),n.B.fireEvent(this,"onsequentialarrange")}}catch(t){a.w.printStackTrace(t,null,this)}},u.prototype.getRealWindowPosition=function(t){try{t>=this.dom.nameBar.childNodes.length&&(t=this.dom.nameBar.childNodes.length-1);for(var e=this.dom.nameBar.childNodes[t].getAttribute("windowtitle"),i=0;i<this.windows.length;i++){if(this.windows[i].useNameLayer&&this.windows[i].nameLayerHTML&&e==this.windows[i].title)return i;if(this.dom.nameBar.childNodes[t].innerText.wq_trim()==this.windows[i].title)return i}return}catch(t){a.w.printStackTrace(t,null,this)}}},1974:function(t,e,i){"use strict";i.d(e,{x:function(){return n}});var o=i(2137),s=i(484),r=i(7757),a=i.n(r),n={_xv:"SP5",domain:null,baseURI:"",baseServletURI:"",baseThemeURI:"",sp5ResourcePath:"../websquare/_websquare_",w2xDocumentRoot:"",w2xHome:"/",w2xTheme:"",w2xExtension:"w5",printConsole:!1,remoteConsole:!1,errorConsole:!1,useWeinre:!1,weinreUrl:"http://debug._wg.co.kr/target/target-script-min.js",hybridSubmissionURL:"",isPrintLog:!0,hybridApp:!1,isHoneyComb:!1,userAgentPattern:{serializer:"Android 2.3.5[\\w\\W]+M110|Android 2.3.5[\\w\\W]+M250",XMLParser:"Opera[\\w\\W]+Version[\\w\\W]+1[\\d].[\\d]",URIEncoder:"Chrome[\\w\\W]16[.0-9*]*|Version[\\w\\W]+Safari+",XPathParser:"Edge"},msActiveXFilteringEnabled:!1,externalOption:{},WebSquaredoc:null,UUIDPrefix:"wq_uuid",UUID:0,scriptCachedList:{},moduleList:{},noConflict:"$w",noConflictFunction:"$p",styleSheetEarlyImport:0,styleSheetEarlyImportName:"",styleSheetEarlyImportList:[],_styleSheetEarlyImportListLoaded:!1,externalCSSList:[],externalCSSDOM:[],externalCSSURL:[],externalCSSRemainder:[],pageXMLString:null};if(n.nodeValueDeprecated=document.createAttribute&&null!=document.createAttribute("test").value,n.scriptIdentifier=';\n"wq_Log_$$H',n.targetInfo="",n.skipLog=!1,n.printError=!1,n.pluginCache="default",n.pluginCacheVariable="__WebSquare__pluginCache",n.suffix="",n.spaURLMapping={},n.dataObject={},n.isWebSquarePopup=!1,n.strictMode=!0,n.convertPageXML=!0,n.strictModeFrame=null,n.serverDiff=NaN,n.pageURLPrefix="",n.useLanguagePack=!1,n.nowRendering=!1,n.WebSquareCache=!1,n.WebSquareEngineCache=!1,n.appendChildType=null,n._bEngineReadyBeforeOnload=!1,n._bDocumentReady=!1,n._initImportList=[],n._resourceURI="",n._bInitModule=!1,window.onload=function(){n._bDocumentReady=!0,!0===n._bEngineReadyBeforeOnload&&(n.initialize(n.w2xPath),n._bEngineReadyBeforeOnload=!1)},"sessionStorage"in window){var l=sessionStorage.getItem("wq_spaURLMapping");null!=l&&(n.spaURLMapping=JSON.parse(l))}try{if("undefined"!=typeof externalValue)for(var h in externalValue)void 0!==n[h]&&(n[h]=externalValue[h])}catch(t){alert("External Option Error! : "+t.toString())}null==window.WebSquareExternal&&(window.WebSquareExternal={}),"string"==typeof window.WebSquareExternal.w2xExtension&&(n.w2xExtension=window.WebSquareExternal.w2xExtension||n.w2xExtension),n.configPath="";var d;if((d=location.toString().indexOf("w2Config"))>=0){var u=location.toString().slice(d+"w2Config=".length);n.configPath=u.slice(0,u.indexOf("config.js")+"config.js".length)}"string"==typeof window.WebSquareExternal.w2Config&&(n.configPath=window.WebSquareExternal.w2Config||n.configPath),n.sp5ResourcePath=window.WebSquareExternal.sp5ResourcePath||n.sp5ResourcePath,n.document=document,n.ver="NS4wXzUuNDc1MkEuMjAyMjEwMjcuMTEwOTMxXw==MS44",n.logMsgArray=[],n.remoteLogMsgArray=[],n.logTime=0,n.logTotalTime=0,n.buildDate="N/A",n.buildID="",n.uiplugin={},n.logFileName="",n.docTitle="",n.jsString={},n.jsStringOpt={},
n.jsStringCore="",n.$integiry={flag:!0,passed:[],failed:[]},n.allPlugin="${allPlugin}",n.allPluginArr=[],n.clientLang=window.WebSquareExternal.clientLang||"",n._async=!0,n.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50},n.timerHash={},n.measureHash={},n.userTimerHash={},n.userIntervalHash={},n.userData={},n.logMsgArrayLength=0,n.logMsgCurrentLength=0,n.logMsgLength=0,n.componentsCache={},n.addListenerCnt=0,n.elementObjArr=[],n.selectboxCss=!1,n.triggerCss=!1,n.idCache={},n.idToUUID={},n.importsQueue={},n.controlMatchmarks={},n.lazyImportsArr=[],n.externalScriptArr=[],n.executePointScriptArr={},n.pageInheritScriptArr=[],n.pageInheritSubmissionList=[],n.pageInheritWorkflowList=[],n.configCache=[],n.configCacheObj=[],n.configCacheArray=[],n.uiplugin={},function(){try{var t=function(t,e){var i=t.indexOf(e);return i>-1&&(n.baseURI=t.substring(0,i),!0)};if(window.WebSquareExternal.baseURI)n.baseURI=window.WebSquareExternal.baseURI,window.WebSquareExternal.baseServletURI?n.baseServletURI=window.WebSquareExternal.baseServletURI:n.baseServletURI=n.baseURI;else{for(var e=0;e<document.getElementsByTagName("script").length;e++){var i=document.getElementsByTagName("script")[e].src;if(t(i,"HybridPluginAll"))break;if(t(i,"bootloader.js"))break;if(!window.WebSquareExternal.baseServletURI){if(t(i,"javascript.wq?q=/bootloader"))break;if(t(i,"javascriptPluginAll.wq?q=/bootloader"))break}}var o;if(""==n.baseURI)if("file:"!=location.protocol)(o=location.pathname.lastIndexOf("/"))>-1?(n.baseURI=location.pathname.substring(0,o+1),"/"!=n.baseURI.charAt(0)&&(n.baseURI="/"+n.baseURI)):(o=location.pathname.lastIndexOf("\\"),n.baseURI=o>-1?location.pathname.substring(0,o+1):"./");else(o=location.pathname.lastIndexOf("/"))>-1?n.baseURI=location.pathname.substring(0,o+1):(o=location.pathname.lastIndexOf("\\"),n.baseURI=o>-1?location.pathname.substring(0,o+1):"./"),n.baseURI="file://"+n.baseURI;else if("file:"!=location.protocol){if(location.pathname.indexOf("/")>-1){if((s=n.baseURI.split("/")).length>0&&(".."==s[0]||"."==s[0])){(r=location.pathname.split("/")).pop();for(e=0;e<s.length;e++)if(".."==s[e])r.pop();else if("."!=s[e]){s=s.slice(e);break}n.baseURI=r.join("/")+"/"+s.join("/"),"/"!=n.baseURI.charAt(0)&&(n.baseURI="/"+n.baseURI)}}else if(location.pathname.indexOf("\\")>-1){if((s=n.baseURI.split("\\")).length>0&&(".."==s[0]||"."==s[0])){(r=location.pathname.split("\\")).pop();for(e=0;e<s.length;e++)if(".."==s[e])r.pop();else if("."!=s[e]){s=s.slice(e);break}n.baseURI=r.join("\\")+"\\"+s.join("\\")}}}else if(location.pathname.indexOf("/")>-1){if((s=n.baseURI.split("/")).length>0&&(".."==s[0]||"."==s[0])){(r=location.pathname.split("/")).pop();for(e=0;e<s.length;e++)if(".."==s[e])r.pop();else if("."!=s[e]){s=s.slice(e);break}n.baseURI="file://"+r.join("/")+"/"+s.join("/")}}else if(location.pathname.indexOf("\\")>-1){var s;if((s=n.baseURI.split("\\")).length>0&&(".."==s[0]||"."==s[0])){var r;(r=location.pathname.split("\\")).pop();for(e=0;e<s.length;e++)if(".."==s[e])r.pop();else if("."!=s[e]){s=s.slice(e);break}n.baseURI=r.join("\\")+"\\"+s.join("\\")}}window.WebSquareExternal.baseServletURI?n.baseServletURI=window.WebSquareExternal.baseServletURI:1==n.hybridApp?n.baseServletURI="":n.baseServletURI=n.baseURI}n._resourceURI=n.baseURI+"_websquare_/"}catch(t){}}(),n.loadErrorHandler=function(t){var e=t.code,i=t.msg;switch(e){case"E_initializer_XMLLoadFailError":case"E_initializer_XMLLoadFailError1":var o=n.core.getConfiguration("/WebSquare/loadErrorHandler/@value");if(null!=o&&""!=o){o=o.replace("()","");var s=n.util.getGlobalFunction(o);"function"==typeof s?s(t):alert(i)}else alert(i)}},n.clearMemory=function(){try{var t;try{for(var e=[self],i=[],o=0;o<1e4&&!(e.length<=0);o++)for(var s=e.length,r=0;r<s;r++)try{var a=e.shift();o>0&&i.push(a);for(var l=0;l<a.window.length;l++)try{void 0!==a.frames[l].WebSquare&&!0!==a.frames[l]._wg.remove&&e.push(a.frames[l])}catch(t){}}catch(t){
n.logger.printLog("WebSquare frameClick fail [ "+t.message+" ]")}for(var h=0;h<1e4&&!(i.length<=0);h++)try{(a=i.pop()).WebSquare&&!0!==a._wg.remove&&a._wg.clearMemory()}catch(t){n.logger.printLog("WebSquare frameClick fail [ "+t.message+" ]")}for(r=0;r<e.length;r++)e[r]=null;for(r=0;r<i.length;r++)i[r]=null;e=null,i=null}catch(t){}if(WebSquare&&n.core){n.core.firePageunload||n.core.onurlchange||!n.body||(n.core.firePageunload=!0,n.event.fireEvent(n.getBody(),"onpageunload"));var d=n.core.getConfiguration("/WebSquare/clearMemory/@userAfterFunction");n.core.clearCommon()}try{"onhashchange"in window?window.onhashchange=null:(clearInterval(n.util._hashTestKey),n.util._hiddenFrame&&(n.removeNode(n.util._hiddenFrame),n.util._hiddenFrame=null))}catch(t){n.logger.printLog("error : clear historyFrame exception"),n.exception.printStackTrace(t,null,this)}for(var r in WebSquare&&n.body&&n.getBody().remove(),WebSquare&&n.strictModeFrame&&(n.strictModeFrame.remove(),n.strictModeFrame=null),WebSquare)WebSquare[r]=null,delete WebSquare[r];void 0!==window.imports&&(window.imports=null),void 0!==window.requires&&(window.requires=null),void 0!==$W._a&&($W._a=null),void 0!==_$W._a&&(_$W._a=null),void 0!==window.$W&&(window.$W=null),void 0!==window._$W&&(window._$W=null),WebSquare=null,window._$W=window.$W=window.WebSquare={logger:{printLog:function(){}},exception:{printStackTrace:function(){}},timerHash:{},remove:!0};try{d&&(t=window[d]())}catch(t){}return t}catch(t){}},n.extend=function(t,e){for(var i in e)t[i]=e[i];return t},n.extendKeepingType=function(t,e){for(var i in e){var o=e[i];switch((0,s.Z)(t[i])){case"string":if(""==o)continue;"$blank"==o&&(o="");break;case"number":o=o&&o.toString().indexOf(".")>-1?parseFloat(o):parseInt(o,10);break;case"boolean":o=WebSquare.util.getBoolean(o)}t[i]=o}return t},n.setBody=function(t){n.body=t},n.getBody=function(){return n.body},n._discardElement=function(t){var e=document.getElementById("IELeakGarbageBin");e||((e=document.createElement("DIV")).id="IELeakGarbageBin",e.style.display="none",document.documentElement.appendChild(e)),e.appendChild(t),e.innerHTML=""},n.removeChildren=function(t){if(null==t||!t.childNodes)return-1;for(var e=t.childNodes.length;t.hasChildNodes();)n.removeNode(t.firstChild);return e},n.removeNode=function(t){return n.util.isIE()&&parseInt(n.core.browserVersion(),10)<8?(n._discardElement(t),t):t&&t.parentNode?t.parentNode.removeChild(t):void 0},n.initialize=function(){var t=(0,o.Z)(a().mark((function t(e,i){var o,s,r,l,h,d,u,c,p,g,m;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=9;break}if(!(o=n.util.getUrlHashText())){t.next=7;break}e=o,t.next=9;break;case 7:return"onhashchange"in window&&null==window.onhashchange&&(window.onhashchange=n.util.onhashchange),t.abrupt("return",!0);case 9:return n.core._initDataObject(),t.next=12,n.date._initServerDiff();case 12:if(n.allValue=n.core.getConfiguration("/WebSquare/allValue/@value")||"all",n.tabOrder={},n.initStyle={},n.strictMode&&null==n.strictModeFrame&&(s=n.util.getBoolean(n.core.getConfiguration("/WebSquare/initScript/@value"))&&n.w2xPath!==n.net.getBlankXML(),r=n.util.getBoolean(n.core.getConfiguration("/WebSquare/postScript/@value"))&&n.w2xPath!==n.net.getBlankXML(),l="",h="",d=n.core.getConfiguration("/WebSquare/strictMode/@id"),s&&(l=n.core.getConfigurationJSON("/WebSquare/initScript",{type:"json"}))["#cdata"]&&"function"==typeof(l=l["#cdata"])&&(l="("+l.toString()+")()",l=n.util.scopingFuncBody(l,d,!0)),r&&(h=n.core.getConfigurationJSON("/WebSquare/postScript",{type:"json"}))["#cdata"]&&"function"==typeof(h=h["#cdata"])&&(h="("+h.toString()+")()",h=n.util.scopingFuncBody(h,d,!0)),u=n.UUIDPrefix,c=n.UUID,n.UUIDPrefix="wq_strict",n.strictModeFrame=n.controlFactory.create(d,{pluginName:"wframe",scope:!0,scopeExternal:!0,strictFrame:!0,initScript:l,postScript:h},null,null,null,!0),n.UUIDPrefix=u,n.UUID=c),p="",null!=n.WebSquaredoc){t.next=44;break}if(t.prev=18,!n.pageXMLString){t.next=24;break}
g=n.pageXMLString,n.pageXMLString=null,t.next=30;break;case 24:if(m=n.core.getPageURL(e,{skipURL:!0,skipUri:!0})){t.next=27;break}return t.abrupt("return",!0);case 27:return t.next=29,n.jsLoader._loadObj(m);case 29:g=t.sent;case 30:if(null==g||"loadError"===g){t.next=36;break}return t.next=33,n.jsLoader.start(g,{spa:i});case 33:return t.abrupt("return",!0);case 36:"false"!=(p=n.core.getConfiguration("/WebSquare/pageFaultMsg/@value"))&&n.loadErrorHandler({code:"E_initializer_XMLLoadFailError",msg:n.language.getMessage("E_initializer_XMLLoadFailError",n.jsLoader.getUri(e))});case 38:t.next=44;break;case 40:t.prev=40,t.t0=t.catch(18),"false"!=p&&n.loadErrorHandler({code:"E_initializer_XMLLoadFailError1",msg:n.language.getMessage("E_initializer_XMLLoadFailError1",e)}),n.exception.printStackTrace(t.t0);case 44:return t.abrupt("return",!1);case 45:case"end":return t.stop()}}),t,null,[[18,40]])})));return function(e,i){return t.apply(this,arguments)}}(),n.initializeByJSON=function(){var t=(0,o.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.jsLoader.start(e,{type:"js"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.startPopupApplication=function(){var t=(0,o.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.startApplication(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.startPopupApplication1=function(){var t=(0,o.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.startApplication1(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.startPopupApplication2=function(){var t=(0,o.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.startApplication2(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.startApplication=function(){var t=(0,o.Z)(a().mark((function t(e,i){var o,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.nowRendering=!0,t.next=4,n.BootLoader._initImport();case 4:if("true"==n.core.getConfiguration("/WebSquare/localStorage/@defer")&&n.createLocalStorage(),o=n.core.getConfiguration("/WebSquare/preProcessor/systemPreProcessor/@value"),"function"!=typeof(s=n.util.getGlobalFunction(o))){t.next=11;break}if(0!=s()){t.next=11;break}return t.abrupt("return");case 11:n.setLanguagePack(),n.startApplication1(e,i);case 13:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),n.initializeComponent=function(t,e){if(null==n.WebSquaredoc){n.nowRendering=!0,"true"==n.core.getConfiguration("/WebSquare/localStorage/@defer")&&n.createLocalStorage(window);var i=n.core.getConfiguration("/WebSquare/preProcessor/systemPreProcessor/@value"),o=n.util.getGlobalFunction(i);if("function"==typeof o)if(0==o())return;n.setLanguagePack(),t?(n.targetInfo=e,n.w2xPath=t):""!=n.net.getParameter("w2xPath")&&(n.w2xPath=n.net.getParameter("w2xPath"));n.w2xPath=n.w2xPath.replace(/[\\]/g,"/");var r=n.w2xPath.lastIndexOf("/"),a="",l="";"object"==("undefined"==typeof WebSquareExternal?"undefined":(0,s.Z)(WebSquareExternal))&&null!=WebSquareExternal&&(a=WebSquareExternal.w2xHome||"",l=WebSquareExternal.w2xDocumentRoot||""),""==a&&""==n.net.getParameter("w2xHome")?n.w2xHome=r>-1?n.w2xPath.substring(0,r+1):"/":n.w2xHome=a||n.net.getParameter("w2xHome"),n.logFileName=r>-1?" "+n.w2xPath.substring(r+1):" "+n.w2xPath;var h=n.core.getConfiguration("/WebSquare/DocumentRoot"),d=l||n.net.getParameter("w2xDocumentRoot");n.w2xDocumentRoot="/"==d||"\\"==d?"":""!=d?d:null!=h&&""!=h?h:"",n.logger.printLog("w2xDocumentRoot["+n.w2xDocumentRoot+"]"),n.logger.printLog("w2xHome        ["+n.w2xHome+"]"),
n.logger.printLog("w2xPath        ["+n.w2xPath+"]"),n.logger.printLog("w2xTheme       ["+n.w2xTheme+"]"),n.initialize(n.w2xPath)}else n.initializeComponent_wframe(t,e)},n.initializeComponent_wframe=function(){var t=(0,o.Z)(a().mark((function t(e,i){var o,s,r,l,h,d,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,requires("uiplugin.wframe"),o=new n.uiplugin.wframe(n.UUIDPrefix+"_"+n.UUID++,{src:e}),t.next=6,o.makeFrame();case 6:if(o.createFlag=!0,s=o.frameDoc.scriptSection,o.wframeScript.length>0)for(r=0;r<o.wframeScript.length;r++)s+=o.wframeScript[r];for(n.BootLoader.globalEval(s),o.frameDoc.scriptSection="",o.setAction(),r=0;r<i.length;r++)l=i[r],(h=n.idToUUID[l.component])&&null!=n.idCache[h]&&("string"==typeof(d=l.target)&&(d=document.getElementById(d)),u=n.idCache[h],d.innerHTML=u.toHTML(),u.activate(),u.onComplete());t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),n.exception.printStackTrace(t.t0,null);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,i){return t.apply(this,arguments)}}(),n.startApplication1=function(){var t=(0,o.Z)(a().mark((function t(e,i){var o,r,l,h,d,u,c,p,g,m,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="",e)n.w2xPath=e;else if(""!=(o=n.net.getParameter("w2xPath")))n.w2xPath=o;else if(""!=(o=n.net.getParameter("wq_spaParam")))try{r=parent._wg.idCache[o].render.getAttribute("src").slice(0),(l=r.lastIndexOf("w2xPath"))>=0?(h=(h=r.slice(l)).split(/[\&\?\#]/)[0],2==(d=h.split("=")).length&&(n.w2xPath=d[1].wq_trim())):n.w2xPath=n.core.getConfiguration("/WebSquare/welcome-file")}catch(t){n.w2xPath=n.core.getConfiguration("/WebSquare/welcome-file")}else n._styleSheetEarlyImportListLoaded=!0,n.w2xPath=n.core.getConfiguration("/WebSquare/welcome-file");if(u=/[\\]/g,n.w2xPath=n.w2xPath.replace(u,"/"),c=n.w2xPath.lastIndexOf("/"),p="",g="","object"==("undefined"==typeof WebSquareExternal?"undefined":(0,s.Z)(WebSquareExternal))&&null!=WebSquareExternal&&(p=WebSquareExternal.w2xHome||"",g=WebSquareExternal.w2xDocumentRoot||""),""==p&&""==n.net.getParameter("w2xHome")?n.w2xHome=c>-1?n.w2xPath.substring(0,c+1):"/":n.w2xHome=p||n.net.getParameter("w2xHome"),n.logFileName=c>-1?" "+n.w2xPath.substring(c+1):" "+n.w2xPath,m=n.core.getConfiguration("/WebSquare/DocumentRoot"),f=g||n.net.getParameter("w2xDocumentRoot"),n.w2xDocumentRoot="/"==f||"\\"==f?"":""!=f?f:null!=m&&""!=m?m:"",n.logger.printLog("w2xDocumentRoot["+n.w2xDocumentRoot+"]"),n.logger.printLog("w2xHome        ["+n.w2xHome+"]"),n.logger.printLog("w2xPath        ["+n.w2xPath+"]"),n.logger.printLog("w2xTheme       ["+n.w2xTheme+"]"),n.w2xPath!=n.net.getBlankXML()){t.next=23;break}return"onhashchange"in window||(n.util._hiddenFrame?null==document.getElementById(n.util._hiddenFrame.id)&&document.body.appendChild(n.util._hiddenFrame):n.util._makeFrame(),n.util._iframe_wait=!0,n.util._hiddenFrame.contentWindow.location.search=n.w2xPath),"onhashchange"in window?window.onhashchange=n.util.onhashchange:n.util._wait_for_iframe_reload(),t.abrupt("return");case 23:!0!==i&&(!0===n._bDocumentReady?n.initialize(n.w2xPath):n._bEngineReadyBeforeOnload=!0);case 24:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),n.startOnLoad=function(t){n.jsLoader._startCallback2(t)},n.startApplication2=function(){var t=(0,o.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n.startApplication1(e)}catch(t){n.exception.printStackTrace(t)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.setLanguagePack=function(){if(!n.useUserSystemLang)if(n.useLanguagePack=n.core.getConfiguration("/WebSquare/languagePack/@useLanguagePack"),"true"==n.useLanguagePack){var t=n.BootLoader.getBrowserLanguage();n.loagLanguagePack(t),n.systemLanguage=t}else n.WebSquareLang={}},n.loagLanguagePack=function(t){t=n.cookie.getCookie("system_language")||t||"ko"
;var e=n.core.getConfiguration("/WebSquare/languagePack/url[@lang='"+t+"']/@value");imports(e)},n.addMark=function(t){if(!window._fCoverage)try{parent!=window&&parent._fCoverage?window._fCoverage=parent._fCoverage:void 0!==window.opener&&null!=window.opener&&!window.opener.closed&&window.opener._fCoverage?window._fCoverage=opener._fCoverage:window._fCoverage={}}catch(t){window._fCoverage={}}void 0!==_fCoverage[t]?_fCoverage[t]++:_fCoverage[t]=1},n.ax_logger=function(t){},n._loadCSS=function(){var t=(0,o.Z)(a().mark((function t(e){var i,o,r,l,h,d,u,c,p,g,m,f,b,y,v,w,S,C,x,_,I,T,k,D,L,W,A,E,M,q,R,N,F,O,B,V;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i={},"object"==("undefined"==typeof WebSquareExternal?"undefined":(0,s.Z)(WebSquareExternal))&&null!=WebSquareExternal&&(i=WebSquareExternal),o=n.document.getElementsByTagName("head")[0],r=e&&e.isSPA,l="",h="",!(n.styleSheetEarlyImport>0)){t.next=75;break}if(2==n.styleSheetEarlyImport&&(d=document.createElement("link"),u="",u=1==n.WebSquareEngineCache?n.BootLoader.getEngineCachePostfix(n.styleSheetEarlyImportName):n.BootLoader.getRandomPostfix(n.styleSheetEarlyImportName),c=n.BootLoader.inquiresPath("skin/"),d.href=n.baseThemeURI+c+u,d.type="text/css",d.rel="stylesheet",o.appendChild(d),n.logger.printLog("import core css : "+d.href)),p=n.net.getParameter("adaptive")||"",g=e&&e.w2xPath,""!=(m=g||i.w2xPath||n.net.getParameter("w2xPath")||n.w2xPath||n.core.getConfiguration("/WebSquare/welcome-file"))){t.next=13;break}return t.abrupt("return");case 13:if(f=/[\\]/g,m=m.replace(f,"/"),b="",y=n.core.getPageURL(m,{skipURL:!0,skipUri:!0}),1==n.hybridApp&&y.indexOf("://")<0&&y.startsWith("/")&&(y=n.util.appendingPathComponent(n.w2xDocumentRoot,y)),!0===n._async){t.next=22;break}return t.next=21,n.jsLoader.load(y,{useXML:!0,skipError:!0});case 21:b=t.sent;case 22:if(v=[],!b||"xml"!==n.jsLoader.getPageTypeByString(b)){t.next=74;break}for((w=b.indexOf("<html"))<0&&(w=b.indexOf("<HTML"))<0&&(w=b.indexOf("< html"))<0&&(w=b.indexOf("< HTML")),S="",S=w>=0?b.slice(0,w):b,C=-1;(C=S.indexOf("\x3c!--"))>=0;)x=S.indexOf("--\x3e"),S=x>=0?S.substring(0,C)+S.slice(x+3):S.substring(0,C);(h=i.w2xHome||n.net.getParameter("w2xHome"))||(h=i.w2xPath||n.net.getParameter("w2xPath"),f=/[\\]/g,h=h.replace(f,"/"),_=h.lastIndexOf("/"),h=_>-1?h.substring(0,_+1):"/"),I=n.core.getConfiguration("/WebSquare/DocumentRoot"),T=i.w2xDocumentRoot||n.net.getParameter("w2xDocumentRoot"),l="/"==T||"\\"==T?"":""!=T?T:null!=I&&""!=I?I:"",k=S.split(/xml-stylesheet/i),D=new RegExp("^\\s\\s*"),L=new RegExp("\\s\\s*$"),W=1;case 39:if(!(W<k.length)){t.next=73;break}for((A=k[W].split('"')).pop(),E={},M=0;M<A.length;M+=2)E[A[M].replace(D,"").replace("=","").replace(L,"")]=A[M+1];null==E.type&&(E.type="text/css"),null==E.rel&&(E.rel="stylesheet"),null!=E.href&&("/"!=E.href.substring(0,1)&&"\\"!=E.href.substring(0,1)&&(E.href=h+E.href),""!=l&&".."!=E.href.substring(0,2)&&(E.href=l+E.href)),q=!1,R=n.util.getAbsolutePath(E.href),M=0;case 50:if(!(M<n.styleSheetEarlyImportList.length)){t.next=57;break}if(R!=n.util.getAbsolutePath(n.styleSheetEarlyImportList[M])){t.next=54;break}return q=!0,t.abrupt("break",57);case 54:M++,t.next=50;break;case 57:if(!(n.externalCSSRemainder.length>0)){t.next=69;break}if(N=n.externalCSSRemainder.shift(),R!==n.util._getAbsolutePath(N.href.toString())){t.next=66;break}return q=!0,v.push(R),n.externalCSSDOM.push(N),t.abrupt("break",69);case 66:N.parentNode.removeChild(N);case 67:t.next=57;break;case 69:q||(""!=p&&E.adaptive?p==E.adaptive&&n.externalCSSList.push(E):E.adaptive?n.util.isMobile()&&"mobile"==E.adaptive?n.externalCSSList.push(E):n.util.isMobile()||"pc"!=E.adaptive||n.externalCSSList.push(E):n.externalCSSList.push(E));case 70:W++,t.next=39;break;case 73:for(;n.externalCSSRemainder.length>0;)(N=n.externalCSSRemainder.shift()).parentNode.removeChild(N);case 74:!0!==n._async&&(n.pageXMLString=b||"loadError",b="");case 75:
if(!(r&&n.externalCSSList.length>0||(!r||r&&!1===n._styleSheetEarlyImportListLoaded)&&n.externalCSSList.length+n.styleSheetEarlyImportList.length>0)){t.next=102;break}if(t.prev=76,!r||r&&!1===n._styleSheetEarlyImportListLoaded)for(n._styleSheetEarlyImportListLoaded=!0,W=0;W<n.styleSheetEarlyImportList.length;W++)"/"!=(F=n.styleSheetEarlyImportList[W]).substring(0,1)&&"\\"!=F.substring(0,1)&&(F=h+F),""!=l&&".."!=F.substring(0,2)&&(F=l+F),O=n.BootLoader.getResourcePostfix(F),B=n.util.getAbsolutePath(F),n.styleSheetEarlyImportList[W]=B,(d=document.createElement("link")).href=O,d.type="text/css",d.rel="stylesheet",o.appendChild(d),n.externalCSSURL.push(B),n.logger.printLog("import user css(early_common) : "+F);W=0;case 79:if(!(W<n.externalCSSList.length)){t.next=98;break}if(d=document.createElement("link"),(V=n.externalCSSList[W])&&("string"==typeof V||"object"==(0,s.Z)(V))){t.next=84;break}return t.abrupt("continue",95);case 84:"string"==typeof V&&(V={href:V}),"/"!=V.href.substring(0,1)&&"\\"!=V.href.substring(0,1)&&(V.href=h+V.href),""!=l&&".."!=V.href.substring(0,2)&&(V.href=l+V.href),O=n.BootLoader.getResourcePostfix(V.href),d.href=O,d.type=V.type||"text/css",d.rel=V.rel||"stylesheet",o.appendChild(d),n.externalCSSURL.push(n.util._getAbsolutePath(d.href.toString())),n.externalCSSDOM.push(d),n.logger.printLog("import user css(early_xml) : "+V.href);case 95:W++,t.next=79;break;case 98:t.next=102;break;case 100:t.prev=100,t.t0=t.catch(76);case 102:o=null,n.skin.skinTag=n.externalCSSURL.slice(0).concat(v);case 104:case"end":return t.stop()}}),t,null,[[76,100]])})));return function(e){return t.apply(this,arguments)}}(),n.createLocalStorage=function(){try{null==WebSquare.localStorage&&(WebSquare.localStorage=function(){var t="websquare_localStorage_keyList",e=";";try{if("localStorage"in window&&"unknown"!=typeof window.localStorage&&null!==window.localStorage){var i=window.localStorage;return(l={}).length=i.length,l.key=function(t){t=Number(t);return isNaN(t)||t>=this.length||t<0?null:i.key(t)},l.getItem=function(t){return i.getItem(t)},l.setItem=function(o,s){var r=o.charAt(0);return/[a-zA-Z]/.exec(r)?o===t?($l(t+": This key is reserved.[localStorage]"),null):o.search(e)>=0?($l(";: The key name must not contain colon(;).[localStorage]"),null):(i.setItem(o,s),void(this.length=i.length)):($l("The key name must start with [a-zA-Z][localStorage]"),null)},l.removeItem=function(t){i.removeItem(t),this.length=i.length},l.clear=function(){i.clear(),this.length=i.length},l.getAllItem=function(){var t={};for(var e in i)t[e]=i[e];return t},l}if(n.core.browserCheck.ie&&n.core.browserVersion()<"9"){var o="websquare_localStorage",s="",r={},a=function(){null==document.getElementById(r.id)&&((r=document.createElement("div")).id=o+"_div",r.style.display="none",r.style.position="absolute",r.style.top="-999999px",r.style.behavior='url("#default#userData")',document.body.appendChild(r),r.load(o),s=r.getAttribute(t)||"",l.length=s.split(e).length-1)};return(l={}).length=0,l.key=function(t){a();t=Number(t);return isNaN(t)||t>=this.length||t<0?null:s.split(e)[t]},l.getItem=function(t){return a(),r.getAttribute(t)},l.setItem=function(i,n){a();var l=i.charAt(0);if(!/[a-zA-Z]/.exec(l))return $l("The key name must start with [a-zA-Z]"),null;if(i===t)return $l(t+": This key is reserved.[localStorage]"),null;if(i.search(e)>=0)return $l(";: The key name must not contain colon(;).[localStorage]"),null;r.setAttribute(i,n),s.search(i)<0&&(s+=i+e,this.length++),r.setAttribute(t,s);try{r.save(o)}catch(t){$l(t.name+" : localstorage overflowed[localStorage]")}},l.removeItem=function(i){a(),r.removeAttribute(i);var n=s;s=n.replace(i+e,""),n!==s&&this.length--,r.setAttribute(t,s),r.save(o)},l.clear=function(){a();for(var i=s.split(e),n=0;n<i.length-1;n++)r.removeAttribute(i[n]);r.removeAttribute(t),s="",this.length=0,r.save(o)},l.getAllItem=function(){a();for(var t={},i=s.split(e),o=0;o<i.length-1;o++){var n=i[o];t[n]=r.getAttribute(n)}return t},l}
return $l("localStorage 생성 도중 오류가 발생하여, sessionStorage로 대체합니다."),null===(i=window.sessionStorage)?void $l("_wg.localStorage를 생성할 수 없습니다."):((l={}).length=i.length,l.key=function(t){t=Number(t);return isNaN(t)||t>=this.length||t<0?null:i.key(t)},l.getItem=function(t){return i.getItem(t)},l.setItem=function(o,s){var r=o.charAt(0);return/[a-zA-Z]/.exec(r)?o===t?($l(t+": This key is reserved.[localStorage]"),null):o.search(e)>=0?($l(";: The key name must not contain colon(;).[localStorage]"),null):(i.setItem(o,s),void(this.length=i.length)):($l("The key name must start with [a-zA-Z][localStorage]"),null)},l.removeItem=function(t){i.removeItem(t),this.length=i.length},l.clear=function(){i.clear(),this.length=i.length},l.getAllItem=function(){var t={};for(var e in i)t[e]=i[e];return t},l)}catch(o){var l;return $l("localStorage 생성 도중 오류가 발생하여, sessionStorage로 대체합니다."),null===(i=window.sessionStorage)?void $l("_wg.localStorage를 생성할 수 없습니다."):((l={}).length=i.length,l.key=function(t){t=Number(t);return isNaN(t)||t>=this.length||t<0?null:i.key(t)},l.getItem=function(t){return i.getItem(t)},l.setItem=function(o,s){var r=o.charAt(0);return/[a-zA-Z]/.exec(r)?o===t?($l(t+": This key is reserved.[localStorage]"),null):o.search(e)>=0?($l(";: The key name must not contain colon(;).[localStorage]"),null):(i.setItem(o,s),void(this.length=i.length)):($l("The key name must start with [a-zA-Z][localStorage]"),null)},l.removeItem=function(t){i.removeItem(t),this.length=i.length},l.clear=function(){i.clear(),this.length=i.length},l.getAllItem=function(){var t={};for(var e in i)t[e]=i[e];return t},l)}}()),n.api&&(n.api.local=WebSquare.localStorage)}catch(t){n.exception.printStackTrace(t)}},n._jQuerySupport=(0,o.Z)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,window.jQuery){t.next=14;break}if(""==(e=n.core.getConfiguration("/WebSquare/jquerySupport/@src"))){t.next=12;break}return t.next=6,n.BootLoader.importAsync(e);case 6:if(window.jQuery){t.next=10;break}return t.next=9,inquires("externalJS/jquery/jquery-1.10.2.min.js");case 9:$l("ERROR :  config.xml의 jquerySupport 태그 version 경로를 확인해주세요. 현재 사용하고 있는 버전은 default 버전 "+$.fn.jquery+" 입니다.");case 10:t.next=14;break;case 12:return t.next=14,inquires("externalJS/jquery/jquery-1.10.2.min.js");case 14:window.jQuery&&function(t){t.expr[":"].wq=function(e,i,o){var s=null;return!(!(s="idToUUID"in WebSquare?n.idCache[n.idToUUID[t(e).attr("id")]]:n.componentIdCache[t(e).attr("id")])||s.render!=e)&&(""===o[3]||null==o[3]||"*"==o[3]||s.options.pluginName==o[3].trim())};var e=function t(e){return new t.fn.init(e)},i=function(t,i){var o=this;if(this.length>0&&!this[0].getPluginName&&(o=e(this)),t)for(var s=0;s<o.length;s++){for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);o[s][t].apply(o[s],r)}return o};function o(e,i){var o,r,a,n=e.nodeName.toLowerCase();return"area"===n?(r=(o=e.parentNode).name,!(!e.href||!r||"map"!==o.nodeName.toLowerCase())&&(!!(a=t("img[usemap='#"+r+"']")[0])&&s(a))):(/^(input|select|textarea|button|object)$/.test(n)?!e.disabled:"a"===n&&e.href||i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter((function(){return"hidden"===t.css(this,"visibility")})).length}(e.fn=e.prototype={constructor:e,init:function(e){if(!e[0].getPluginName)for(var i=0;i<e.length;i++){var o=null;(o="idToUUID"in WebSquare?n.idCache[n.idToUUID[t(e[i]).attr("id")]]:n.componentIdCache[t(e[i]).attr("id")])&&o.render==e[i]&&this.push(o)}},selector:"",length:0,size:t.fn.size,toArray:t.fn.toArray,pushStack:t.fn.pushStack,push:[].push,sort:[].sort,splice:[].splice,wq:i,jq:function(e,i){if(this[0].getPluginName){for(var o=[],s=0;s<this.length;s++)o.push(this[s].render);this.splice(0,this.length);for(s=0;s<o.length;s++)this.push(o[s])}if(e){for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);return t(this)[e].apply(t(this),r)}return t(this)},get:function(t,e){
for(var i=[],o=1;o<arguments.length;o++)i.push(arguments[o]);return this[0][t].apply(this[0],i)},each:function(t){if("function"==typeof t)for(var e=0;e<this.length;e++)t.call(this[e],e,this[e])},map:function(t,e){if("function"==typeof e){var i=[];if("[object Array]"===Object.prototype.toString.call(t))for(var o=0;o<t.length;o++)i.push(e.call(t,t[o],o));else for(var o in t)i.push(e.call(t,t[o],o));return i}},animate:function(t){return this.jq("animate",t).wq()}}).init.prototype=e.fn,jQuery.fn.extend({wq:i}),jQuery.fn.extend(t.expr[":"],{focusable:function(e){return o(e,!isNaN(t.attr(e,"tabindex")))},showable:function(t){return s(t)},tabbable:function(e){var i=t.attr(e,"tabindex"),s=isNaN(i);return t(e).hasClass("w2grid")||t(e).hasClass("w2checkbox")||t(e).hasClass("w2anchor")||t(e).hasClass("w2anchor2")||t(e).hasClass("w2radio")||t(e).hasClass("w2radio_input")||t(e).hasClass("w2inputCalendar")||t(e).hasClass("w2inputCalendar_div")||t(e).hasClass("w2searchbox")||t(e).hasClass("w2textarea")||(s||i>=0)&&o(e,!s)}})}(jQuery),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),n.exception.printStackTrace(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])}))),n._XMLSupport=function(){try{n.core.supportDOM&&(n.core.browserCheck.opera||n.document.implementation.hasFeature("XPath","3.0")&&(XMLDocument.prototype.selectNodes=function(t,e){if(t){void 0===e&&(e=this);for(var i=this.createNSResolver(this.documentElement),o=this.evaluate(t,e,i,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),s=[],r=0;r<o.snapshotLength;r++)s[r]=o.snapshotItem(r);return s}},XMLDocument.prototype.selectSingleNode=function(t,e){if(t){void 0===e&&(e=this);var i=this.selectNodes(t,e);return i.length>0?i[0]:null}},Document.prototype.selectNodes=XMLDocument.prototype.selectNodes,Document.prototype.selectSingleNode=XMLDocument.prototype.selectSingleNode,Element.prototype.selectNodes=function(t){if(t){for(var e=this.ownerDocument,i=e.createNSResolver(e.documentElement),o=e.evaluate(t,this,i,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),s=[],r=0;r<o.snapshotLength;r++)s[r]=o.snapshotItem(r);return s}},Element.prototype.selectSingleNode=function(t){if(t){var e=this.selectNodes(t);return e.length>0?e[0]:null}}))}catch(t){n.exception.printStackTrace(t)}},n._initImportFunction=function(){try{window._$W=WebSquare,window.$W=WebSquare,_$W._a=_$W.uiplugin,$W._a=_$W._a,window.WebSquareLang={},window.requires=n.BootLoader.requireAsync,window.imports=n.BootLoader.importAsync,window.inquires=n.BootLoader.inquires,window.$integrity=n.BootLoader.$integrity}catch(t){n.exception.printStackTrace(t)}},n._initWebsquareModule=function(){try{for(var t=0;t<n._initImportList.length;t++){for(var e=n._initImportList[t].split("."),i=n,o=0;o<e.length-1;o++)i=n[e[o]];i[e[e.length-1]]._initImport()}n._initImportList=[]}catch(t){n.exception.printStackTrace(t)}},n._initModule=(0,o.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n._bInitModule=!0,n._XMLSupport(),t.next=4,n._jQuerySupport();case 4:return t.next=6,inquires("externalJS/papaparse.js");case 6:window[n.noConflict]=n.api,window[n.noConflict].comp={},window.$l=n.logger.printLog,n._initWebsquareModule();case 10:case"end":return t.stop()}}),t)}))),n._dynamicImport=function(){var t=(0,o.Z)(a().mark((function t(e,i){var o,s,r,l,h;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.prev=1,!(o=new Function("u","return import(u)"))){t.next=7;break}return t.next=6,o(e);case 6:return t.abrupt("return",t.sent);case 7:t.next=18;break;case 9:return t.prev=9,t.t0=t.catch(1),s=i&&i.altModulePath?i.altModulePath:e,t.next=14,n.BootLoader.loadAsync(s);case 14:return r=t.sent,l="export default ",h=r.slice(r.indexOf(l)+l.length),t.abrupt("return",new Function("return { default : "+h+"}")());case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(0),n.exception.printStackTrace(t.t1);case 23:case"end":return t.stop()}}),t,null,[[0,20],[1,9]])})));return function(e,i){
return t.apply(this,arguments)}}(),n._dynamicImportAMD=function(){var t=(0,o.Z)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,inquires("externalJS/requirejs/require.js");case 3:return t.abrupt("return",new Promise((function(t,i){window.requirejs([e],(function(e){t(e)}),(function(e){n.logger.printLog(e.message),t()}))})).catch((function(t){return n.BootLoader.loadAsync(e).then((function(t,e){var i=t,o="define(",s=i.slice(i.indexOf(o)+o.length).slice(0,-1);return new Function("return { default : "+s+"}")()}))})));case 6:t.prev=6,t.t0=t.catch(0),n.exception.printStackTrace(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),n._loadModuleDynamic=function(t){var e;switch(t){case"uiplugin.balloonTip":e=Promise.resolve().then(i.bind(i,9166)).then((function(t,e){WebSquare.uiplugin.balloonTip=t.balloonTip}));break;case"uiplugin.group":e=Promise.resolve().then(i.bind(i,6249)).then((function(t,e){WebSquare.uiplugin.group=t.group}));break;case"uiplugin.wframe":e=Promise.resolve().then(i.bind(i,7632)).then((function(t,e){WebSquare.uiplugin.wframe=t.wframe}));break;case"uiplugin.textbox":e=Promise.resolve().then(i.bind(i,7107)).then((function(t,e){WebSquare.uiplugin.textbox=t.textbox}));break;case"uiplugin.anchor":e=Promise.resolve().then(i.bind(i,7900)).then((function(t,e){WebSquare.uiplugin.anchor=t.anchor}));break;case"uiplugin.selectbox":e=Promise.resolve().then(i.bind(i,8510)).then((function(t,e){WebSquare.uiplugin.selectbox=t.selectbox,WebSquare.uiplugin.selectbox_native=t.selectbox_native}));break;case"uiplugin.input":e=Promise.resolve().then(i.bind(i,111)).then((function(t,e){WebSquare.uiplugin.input=t.input}));break;case"uiplugin.span":e=Promise.resolve().then(i.bind(i,5004)).then((function(t,e){WebSquare.uiplugin.span=t.span}));break;case"uiplugin.calendar":e=Promise.resolve().then(i.bind(i,5131)).then((function(t,e){WebSquare.uiplugin.calendar=t.calendar}));break;case"uiplugin.inputCalendar":e=Promise.resolve().then(i.bind(i,897)).then((function(t,e){WebSquare.uiplugin.inputCalendar=t.inputCalendar}));break;case"uiplugin.textarea":e=Promise.resolve().then(i.bind(i,7624)).then((function(t,e){WebSquare.uiplugin.textarea=t.textarea}));break;case"uiplugin.checkcombobox":e=Promise.resolve().then(i.bind(i,2036)).then((function(t,e){WebSquare.uiplugin.checkcombobox=t.checkcombobox}));break;case"uiplugin.autoComplete":e=Promise.resolve().then(i.bind(i,4972)).then((function(t,e){WebSquare.uiplugin.autoComplete=t.autoComplete}));break;case"uiplugin.list":e=Promise.resolve().then(i.bind(i,8736)).then((function(t,e){WebSquare.uiplugin.list=t.list}));break;case"uiplugin.floatingLayer":e=Promise.resolve().then(i.bind(i,9473)).then((function(t,e){WebSquare.uiplugin.floatingLayer=t.floatingLayer}));break;case"uiplugin.radio":e=Promise.resolve().then(i.bind(i,463)).then((function(t,e){WebSquare.uiplugin.radio=t.radio}));break;case"uiplugin.spinner":e=Promise.resolve().then(i.bind(i,3921)).then((function(t,e){WebSquare.uiplugin.spinner=t.spinner}));break;case"uiplugin.gridView":e=Promise.resolve().then(i.bind(i,6495)).then((function(t,e){WebSquare.uiplugin.gridView=t.gridView,WebSquare.uiplugin.drilldown=t.drilldown,WebSquare.uiplugin.mappingController=t.mappingController,WebSquare.uiplugin.linkedMappingController=t.linkedMappingController,WebSquare.uiplugin.cellInfo=t.cellInfo,WebSquare.uiplugin.headerInfo=t.headerInfo}));break;case"uiplugin.trigger":e=Promise.resolve().then(i.bind(i,2105)).then((function(t,e){WebSquare.uiplugin.trigger=t.trigger}));break;case"uiplugin.image":e=Promise.resolve().then(i.bind(i,9479)).then((function(t,e){WebSquare.uiplugin.image=t.image}));break;case"uiplugin.pageList":e=Promise.resolve().then(i.bind(i,9488)).then((function(t,e){WebSquare.uiplugin.pageList=t.pageList}));break;case"uiplugin.tabControl":e=Promise.resolve().then(i.bind(i,8491)).then((function(t,e){
WebSquare.uiplugin.tabControl=t.tabControl,WebSquare.uiplugin.content=t.content}));break;case"uiplugin.generator":e=Promise.resolve().then(i.bind(i,4782)).then((function(t,e){WebSquare.uiplugin.generator=t.generator}));break;case"uiplugin.upload":e=Promise.resolve().then(i.bind(i,9954)).then((function(t,e){WebSquare.uiplugin.upload=t.upload}));break;case"uiplugin.treeview":e=Promise.resolve().then(i.bind(i,2006)).then((function(t,e){WebSquare.uiplugin.treeview=t.treeview}));break;case"uiplugin.treeview_virtual":e=Promise.resolve().then(i.bind(i,9461)).then((function(t,e){WebSquare.uiplugin.treeview_virtual=t.treeview_virtual}));break;case"uiplugin.checkbox":e=Promise.resolve().then(i.bind(i,3418)).then((function(t,e){WebSquare.uiplugin.checkbox=t.checkbox}));break;case"uiplugin.output":e=Promise.resolve().then(i.bind(i,690)).then((function(t,e){WebSquare.uiplugin.output=t.output}));break;case"uiplugin.window":e=Promise.resolve().then(i.bind(i,6093)).then((function(t,e){WebSquare.uiplugin.window=t.wq_window}));break;case"uiplugin.windowContainer":e=Promise.resolve().then(i.bind(i,7565)).then((function(t,e){WebSquare.uiplugin.windowContainer=t.windowContainer}));break;case"uiplugin.accordion":e=Promise.resolve().then(i.bind(i,3290)).then((function(t,e){WebSquare.uiplugin.accordion=t.accordion,WebSquare.uiplugin.panels=t.panels}));break;case"uiplugin.widgetContainer":e=Promise.resolve().then(i.bind(i,6280)).then((function(t,e){WebSquare.uiplugin.widgetContainer=t.widgetContainer,WebSquare.uiplugin.widget=t.widget}));break;case"uiplugin.panelContainer":e=Promise.resolve().then(i.bind(i,1451)).then((function(t,e){WebSquare.uiplugin.panelContainer=t.panelContainer,WebSquare.uiplugin.panel=t.panel}));break;case"uiplugin.mapchart":e=i.e(737).then(i.bind(i,2737)).then((function(t,e){WebSquare.uiplugin.mapchart=t.mapchart}));break;case"uiplugin.gridLayout":e=Promise.resolve().then(i.bind(i,4816)).then((function(t,e){WebSquare.uiplugin.gridLayout=t.gridLayout}));break;case"uiplugin.mapchart":e=i.e(737).then(i.bind(i,2737)).then((function(t,e){WebSquare.uiplugin.mapchart=t.mapchart}));break;case"uiplugin.pivot":e=i.e(549).then(i.bind(i,9549)).then((function(t,e){WebSquare.uiplugin.pivot=t.pivot}));break;case"uiplugin.pivotTable":e=i.e(199).then(i.bind(i,4199)).then((function(t,e){WebSquare.uiplugin.pivotTable=t.pivotTable}));break;case"uiplugin.editor":e=i.e(655).then(i.bind(i,7655)).then((function(t,e){WebSquare.uiplugin.editor=t.editor}));break;case"uiplugin.multiupload":e=i.e(182).then(i.bind(i,7182)).then((function(t,e){WebSquare.uiplugin.multiupload=t.multiupload}));break;case"uiplugin.fusionchart":e=i.e(268).then(i.bind(i,1268)).then((function(t,e){WebSquare.uiplugin.fusionchart=t.fusionchart}));break;case"uiplugin.fwFunnelChart":e=i.e(361).then(i.bind(i,7361)).then((function(t,e){WebSquare.uiplugin.fwFunnelChart=t.fwFunnelChart}));break;case"uiplugin.fwPyramidChart":e=i.e(584).then(i.bind(i,1584)).then((function(t,e){WebSquare.uiplugin.fwPyramidChart=t.fwPyramidChart}));break;case"uiplugin.fwSparkChart":e=i.e(977).then(i.bind(i,3977)).then((function(t,e){WebSquare.uiplugin.fwSparkChart=t.fwSparkChart}));break;case"uiplugin.fwGaugeChart":e=i.e(142).then(i.bind(i,1142)).then((function(t,e){WebSquare.uiplugin.fwGaugeChart=t.fwGaugeChart}));break;case"uiplugin.fwGanttChart":e=i.e(672).then(i.bind(i,2672)).then((function(t,e){WebSquare.uiplugin.fwGanttChart=t.fwGanttChart}));break;case"uiplugin.fwRealtimeChart":e=i.e(792).then(i.bind(i,1792)).then((function(t,e){WebSquare.uiplugin.fwRealtimeChart=t.fwRealtimeChart}));break;case"uiplugin.fwBulletChart":e=i.e(763).then(i.bind(i,9763)).then((function(t,e){WebSquare.uiplugin.fwBulletChart=t.fwBulletChart}));break;case"uiplugin.spinPicker":e=i.e(848).then(i.bind(i,848)).then((function(t,e){WebSquare.uiplugin.spinPicker=t.spinPicker}));break;case"uiplugin.datePicker":e=Promise.all([i.e(848),i.e(25)]).then(i.bind(i,8025)).then((function(t,e){WebSquare.uiplugin.datePicker=t.datePicker}));break
;case"uiplugin.slider":e=i.e(697).then(i.bind(i,5697)).then((function(t,e){WebSquare.uiplugin.slider=t.slider,WebSquare.uiplugin.thumb=t.thumb}));break;case"uiplugin.searchbox":e=i.e(318).then(i.bind(i,7318)).then((function(t,e){WebSquare.uiplugin.searchbox=t.searchbox}));break;case"uiplugin.fliptoggle":e=i.e(631).then(i.bind(i,631)).then((function(t,e){WebSquare.uiplugin.fliptoggle=t.fliptoggle}));break;case"uiplugin.pageControl":e=i.e(246).then(i.bind(i,8246)).then((function(t,e){WebSquare.uiplugin.pageControl=t.pageControl}));break;case"uiplugin.repeat":e=i.e(966).then(i.bind(i,8966)).then((function(t,e){WebSquare.uiplugin.repeat=t.repeat,WebSquare.uiplugin.repeatAPI=t.repeatAPI}));break;case"uiplugin.graphicUtil":e=i.e(941).then(i.bind(i,1941)).then((function(t,e){WebSquare.uiplugin.graphicUtil=t.graphicUtil}));break;case"uiplugin.roundRectangle":e=i.e(925).then(i.bind(i,1925)).then((function(t,e){WebSquare.uiplugin.roundRectangle=t.roundRectangle}));break;case"uiplugin.multiselect":e=i.e(192).then(i.bind(i,192)).then((function(t,e){WebSquare.uiplugin.multiselect=t.multiselect}));break;case"uiplugin.Switch":e=i.e(274).then(i.bind(i,9274)).then((function(t,e){WebSquare.uiplugin.Switch=t.Switch}));break;case"uiplugin.slideHide":e=i.e(282).then(i.bind(i,6282)).then((function(t,e){WebSquare.uiplugin.slideHide=t.slideHide}));break;case"uiplugin.iframe":e=i.e(635).then(i.bind(i,8635)).then((function(t,e){WebSquare.uiplugin.iframe=t.iframe}));break;case"uiplugin.layer":e=i.e(734).then(i.bind(i,734)).then((function(t,e){WebSquare.uiplugin.layer=t.layerU}));break;case"uiplugin.grid":e=Promise.resolve().then(i.bind(i,6495)).then((function(t,e){return WebSquare.uiplugin.gridView=t.gridView,WebSquare.uiplugin.drilldown=t.drilldown,WebSquare.uiplugin.mappingController=t.mappingController,WebSquare.uiplugin.linkedMappingController=t.linkedMappingController,WebSquare.uiplugin.cellInfo=t.cellInfo,WebSquare.uiplugin.headerInfo=t.headerInfo,i.e(273).then(i.bind(i,5273)).then((function(t,e){WebSquare.uiplugin.grid=t.grid}))}));break;case"uiplugin.pageInherit":e=i.e(353).then(i.bind(i,2353)).then((function(t,e){WebSquare.uiplugin.pageInherit=t.pageInherit}));break;case"uiplugin.scrollView":e=Promise.resolve().then(i.bind(i,183)).then((function(t,e){WebSquare.uiplugin.scrollView=t.scrollView}));break;case"uiplugin.scheduleCalendar":e=i.e(507).then(i.bind(i,8507)).then((function(t,e){WebSquare.uiplugin.scheduleCalendar=t.scheduleCalendar}));break;case"uiplugin.progressbar":e=i.e(913).then(i.bind(i,7913)).then((function(t,e){WebSquare.uiplugin.progressbar=t.progressbar}));break;case"uiplugin.gridLayout":e=Promise.resolve().then(i.bind(i,4816)).then((function(t,e){WebSquare.uiplugin.gridLayout=t.gridLayout}));break;case"engine.wUnit":e=i.e(700).then(i.bind(i,8700)).then((function(t,e){WebSquare.wUnit=t.wUnit}));break;default:return}return e.then((function(t,e){!0===n._bInitModule&&n._initWebsquareModule()})),e},n._getModuleSrc=function(t){if("string"!=typeof t)return t;var e=t.indexOf("websquare/externalJS");return e>=0&&t.match(/big|bisCommon|bootstrap|ckfinder|editor|fullCalendar|FusionChart|jquery|mapchart|progressbar|underscore|xmlparser|xpath/)&&"_websquare_/externalJS"!==t.slice(e-12,e+10)&&(t=t.replace("externalJS","_websquare_/externalJS")),t}},9030:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{C:function(){return wq_polyfill}});var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(484),leftTrimRegExp,rightTrimRegExp,capitalizeStyleHash;module=__webpack_require__.hmd(module),window.String.prototype.wq_trim=(leftTrimRegExp=new RegExp("^\\s\\s*"),rightTrimRegExp=new RegExp("\\s\\s*$"),function(){return this.replace(leftTrimRegExp,"").replace(rightTrimRegExp,"")}),void 0===window.String.prototype.trim&&(window.String.prototype.trim=window.String.prototype.wq_trim),window.String.prototype.capitalize=function(){
return this.charAt(0).toUpperCase()+this.substr(1)},window.String.prototype.wq_replaceAll=function(t,e){return t=t.replace(/(\W)/g,"\\$1"),this.replace(new RegExp(t,"gi"),e)},void 0===window.String.prototype.replaceAll&&(window.String.prototype.replaceAll=window.String.prototype.wq_replaceAll),window.String.prototype.startsWith=function(t){return this.substring(0,t.length)==t},window.String.prototype.endsWith=function(t){return this.substring(this.length-t.length,this.length)==t},window.String.prototype.capitalizeStyle=(capitalizeStyleHash={},function(){var t=capitalizeStyleHash[this];if(t)return t;if(this.indexOf("-")<0)return this;for(var e=this.split("-");""==e[0];)e.shift();for(var i=e[0].toLowerCase(),o=1,s=e.length;o<s;o++)i+=e[o].toLowerCase().capitalize();return capitalizeStyleHash[this]=i,i}),window.wq_reload=function(t){try{null==this.locationTimerCount&&(this.locationTimerCount=0),this.locationTimerCount++,null==t||location.href===t||this.locationTimerCount>700?(this.locationTimerCount=0,location.reload()):(console&&console.log&&console.log("renewing location href..."),location.replace(t),setTimeout((function(){wq_reload(t)}),5))}catch(t){console&&console.log&&console.log("wq_reload error : "+t.message)}};var wq_polyfill={init:function(global){(function(){function f(t){return t<10?"0"+t:t}var cx,escapable,gap,indent,meta,rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var i,o,s,r,a=gap,n=e[t];switch(n&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(n)&&"function"==typeof n.toJSON&&(n=n.toJSON(t)),"function"==typeof rep&&(n=rep.call(e,t,n)),(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(n)){case"string":return quote(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(n)){s=n.length;for(var l=0;l<s;l+=1)r[l]=str(l,n)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(rep)){s=rep.length;for(l=0;l<s;l+=1)"string"==typeof rep[l]&&(o=str(i=rep[l],n))&&r.push(quote(i)+(gap?": ":":")+o)}else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o=str(i,n))&&r.push(quote(i)+(gap?": ":":")+o);return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}"object"!==(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(window.JSON)&&(window.JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var isIE=null!=navigator.appName.match(/Explorer/i);("function"!=typeof JSON.stringify||isIE)&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,i){if(gap="",indent="","number"==typeof i)for(var o=0;o<i;o+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!==(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(e)||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),("function"!=typeof JSON.parse||isIE)&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){var j;function walk(t,e){
var i,o,s=t[e];if(s&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(s))for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(void 0!==(o=walk(s,i))?s[i]=o:delete s[i]);return reviver.call(t,e,s)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),function(t){var e;e="object"===("undefined"==typeof window?"undefined":(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(window))&&window?window:void 0,module.exports?module.exports=e.Promise?e.Promise:r:e.Promise||(e.Promise=r);var i=e.setImmediate||function(t){setTimeout(t,1)};function o(t,e){return function(){t.apply(e,arguments)}}var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(t){if("object"!==(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(t,o(n,this),o(l,this))}function a(t){var e=this;null!==this._state?i((function(){var i=e._state?t.onFulfilled:t.onRejected;if(null!==i){var o;try{o=i(e._value)}catch(e){return void t.reject(e)}t.resolve(o)}else(e._state?t.resolve:t.reject)(e._value)})):this._deferreds.push(t)}function n(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(t)||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void u(o(e,t),o(n,this),o(l,this))}this._state=!0,this._value=t,h.call(this)}catch(t){l.call(this,t)}}function l(t){this._state=!1,this._value=t,h.call(this)}function h(){for(var t=0,e=this._deferreds.length;t<e;t++)a.call(this,this._deferreds[t]);this._deferreds=null}function d(t,e,i,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=i,this.reject=o}function u(t,e,i){var o=!1;try{t((function(t){o||(o=!0,e(t))}),(function(t){o||(o=!0,i(t))}))}catch(t){if(o)return;o=!0,i(t)}}r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var i=this;return new r((function(o,s){a.call(i,new d(t,e,o,s))}))},r.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new r((function(e,i){if(0===t.length)return e([]);var o=t.length;function s(r,a){try{if(a&&("object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(a)||"function"==typeof a)){var n=a.then;if("function"==typeof n)return void n.call(a,(function(t){s(r,t)}),i)}t[r]=a,0==--o&&e(t)}catch(t){i(t)}}for(var r=0;r<t.length;r++)s(r,t[r])}))},r.resolve=function(t){return t&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(t)&&t.constructor===r?t:new r((function(e){e(t)}))},r.reject=function(t){return new r((function(e,i){i(t)}))},r.race=function(t){return new r((function(e,i){for(var o=0,s=t.length;o<s;o++)t[o].then(e,i)}))}}()}}},5666:function(t){var e=function(t){"use strict";var e,i=Object.prototype,o=i.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",n=s.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function h(t,e,i,o){var s=e&&e.prototype instanceof f?e:f,r=Object.create(s.prototype),a=new D(o||[]);return r._invoke=function(t,e,i){var o=u;return function(s,r){
if(o===p)throw new Error("Generator is already running");if(o===g){if("throw"===s)throw r;return W()}for(i.method=s,i.arg=r;;){var a=i.delegate;if(a){var n=I(a,i);if(n){if(n===m)continue;return n}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===u)throw o=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=p;var l=d(t,e,i);if("normal"===l.type){if(o=i.done?g:c,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(o=g,i.method="throw",i.arg=l.arg)}}}(t,i,a),r}function d(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var u="suspendedStart",c="suspendedYield",p="executing",g="completed",m={};function f(){}function b(){}function y(){}var v={};v[r]=function(){return this};var w=Object.getPrototypeOf,S=w&&w(w(L([])));S&&S!==i&&o.call(S,r)&&(v=S);var C=y.prototype=f.prototype=Object.create(v);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function i(s,r,a,n){var l=d(t[s],t,r);if("throw"!==l.type){var h=l.arg,u=h.value;return u&&"object"==typeof u&&o.call(u,"__await")?e.resolve(u.__await).then((function(t){i("next",t,a,n)}),(function(t){i("throw",t,a,n)})):e.resolve(u).then((function(t){h.value=t,a(h)}),(function(t){return i("throw",t,a,n)}))}n(l.arg)}var s;this._invoke=function(t,o){function r(){return new e((function(e,s){i(t,o,e,s)}))}return s=s?s.then(r,r):r()}}function I(t,i){var o=t.iterator[i.method];if(o===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,I(t,i),"throw"===i.method))return m;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var s=d(o,t.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,m;var r=s.arg;return r?r.done?(i[t.resultName]=r.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,m):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function L(t){if(t){var i=t[r];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,a=function i(){for(;++s<t.length;)if(o.call(t,s))return i.value=t[s],i.done=!1,i;return i.value=e,i.done=!0,i};return a.next=a}}return{next:W}}function W(){return{value:e,done:!0}}return b.prototype=C.constructor=y,y.constructor=b,b.displayName=l(y,n,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,n,"GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},x(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,i,o,s,r){void 0===r&&(r=Promise);var a=new _(h(e,i,o,s),r);return t.isGeneratorFunction(i)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(C),l(C,n,"Generator"),C[r]=function(){return this},C.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var o=e.pop();if(o in t)return i.value=o,i.done=!1,i}return i.done=!0,i}},t.values=L,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion
;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function s(o,s){return n.type="throw",n.arg=t,i.next=o,s&&(i.method="next",i.arg=e),!!s}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],n=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),h=o.call(a,"finallyLoc");if(l&&h){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&o.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),k(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var s=o.arg;k(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,o){return this.delegate={iterator:L(t),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t](i,i.exports,__webpack_require__),i.loaded=!0,i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.f={},__webpack_require__.e=function(t){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(e,i){return __webpack_require__.f[i](t,e),e}),[]))},__webpack_require__.u=function(t){return"wbd_A4752_babel_"+t+".js"},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.hmd=function(t){return(t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},inProgress={},dataWebpackPrefix="webpack_test:",__webpack_require__.l=function(t,e,i,o){if(inProgress[t])inProgress[t].push(e);else{var s,r;if(void 0!==i)for(var a=document.getElementsByTagName("script"),n=0;n<a.length;n++){var l=a[n];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==dataWebpackPrefix+i){s=l;break}}s||(r=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",dataWebpackPrefix+i),s.src=t),inProgress[t]=[e];var h=function(e,i){s.onerror=s.onload=null,clearTimeout(d);var o=inProgress[t];if(delete inProgress[t],
s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(t){return t(i)})),e)return e(i)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),r&&document.head.appendChild(s)}},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var e=__webpack_require__.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t}(),function(){var t={179:0};__webpack_require__.f.j=function(e,i){var o=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==o)if(o)i.push(o[2]);else{var s=new Promise((function(i,s){o=t[e]=[i,s]}));i.push(o[2]=s);var r=__webpack_require__.p+__webpack_require__.u(e),a=new Error;__webpack_require__.l(r,(function(i){if(__webpack_require__.o(t,e)&&(0!==(o=t[e])&&(t[e]=void 0),o)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,o[1](a)}}),"chunk-"+e,e)}};var e=function(e,i){var o,s,r=i[0],a=i[1],n=i[2],l=0;for(o in a)__webpack_require__.o(a,o)&&(__webpack_require__.m[o]=a[o]);if(n)n(__webpack_require__);for(e&&e(i);l<r.length;l++)s=r[l],__webpack_require__.o(t,s)&&t[s]&&t[s][0](),t[r[l]]=0},i=self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var __webpack_exports__={};!function(){"use strict";var t,e,i,o,s,r=__webpack_require__(9030),a=__webpack_require__(1974),n=__webpack_require__(1477),l=__webpack_require__(5052),h=__webpack_require__(5948),d=__webpack_require__(9075),u=__webpack_require__(1721),c={errorStr:"\n",nKey:"",stat:"",_oldMode:!1,_isHead:!0,xml2json:function(t,e){try{if("string"==typeof t){this.nKey=e;var i=u.L.parse(t);return this.convertXMLDocument(i)}return this.convertXMLDocument(t)}catch(t){console.log(t)}},parseError:function(t){console.error(t,this.nKey),this.stat="fail"},serialize:function(t){var e=[];return t.setAttribute("xmlns:xf",t.namespaceURI),this._serialize(t,e),e.join("")},_serialize:function(t,e){if(1==t.nodeType){if(e.push("<"),e.push(t.nodeName),t.attributes.length>0)for(var i=0;i<t.attributes.length;i++){var o=t.attributes.item(i);e.push(" "),e.push(o.name),e.push('="'),e.push(this._encode(o.nodeValue)),e.push('"')}if(t.hasChildNodes()){e.push(">");for(var s=t.childNodes,r=0;r<s.length;r++){var a=s.item(r);this._serialize(a,e)}e.push("</"),e.push(t.nodeName),e.push(">")}else e.push("/>")}else if(3==t.nodeType)e.push(this._encode(t.nodeValue));else if(4==t.nodeType)e.push("<![CDATA["+t.nodeValue+"]]>");else if(7==t.nodeType)e.push("<?"+t.nodeName+" "+t.nodeValue+"?>\n");else if(9==t.nodeType)for(s=t.childNodes,r=0;r<s.length;r++){a=s.item(r);this._serialize(a,e)}},_encode:(t=/&/g,e=/</g,i=/>/g,o=/"/g,s=/'/g,function(r){return r.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(o,"&quot;").replace(s,"&apos;")}),convertXMLDocument:function(t){try{var e,i={},o=[];e=1===t.nodeType?[t]:t.childNodes;for(var s=0;s<e.length;s++){var r;if(7==(r=e.item?e.item(s):e[s]).nodeType)if(r.nodeName&&"xml"==r.nodeName||r.nodeValue.indexOf("version")>=0){for(var a=/([^=\s]+)=["'](\S+)["']/g,n=null,l={};null!==(n=a.exec(r.nodeValue));){var h=n[1];if("string"==typeof h){var d=n[2];d&&(l[h]=d)}}i.declaration={A:l}}else{var u=r.nodeName;u||(u="xml-stylesheet"),o.push({T:7,N:u,instruction:r.nodeValue})}else if(1==r.nodeType){var c=this.convertElementIterative(r);o.push(c.obj)}else if(10==r.nodeType){
var p=r.name+(r.publicId?' PUBLIC "'+r.publicId+'"':"")+(!r.publicId&&r.systemId?" SYSTEM":"")+(r.systemId?' "'+r.systemId+'"':"");o.push({T:10,doctype:p})}}return o.length>0&&(i.E=o),this.stat="success",i}catch(t){console.log(t)}},convertAttributes:function(t){try{for(var e={},i=0;i<t.length;i++){var o=t[i];/(meta_\w*)|(metaev_\w*)/gi.test(o.name)||(e[o.name]=o.nodeValue)}return e}catch(t){console.log(t)}},convertElementIterative:function(t){try{var e={T:1,N:t.nodeName},i=[];t.attributes.length>0&&(e.A=this.convertAttributes(t.attributes));for(var o=[],s=[],r=t.childNodes.length-1;r>=0;r--)o.push(t.childNodes[r]),s.push(e);for(;o.length>0;){var a=o.pop(),n=s.pop();if(1==a.nodeType)if("instance"===a.nodeName.substring(a.nodeName.indexOf(":")+1)){var l=!1;for(r=a.childNodes.length-1;r>=0;r--){if("data"===(d=a.childNodes[r]).nodeName&&1===d.nodeType&&d.childNodes&&d.childNodes.length>0){l=!0;break}"data"!==d.nodeName&&1===d.nodeType&&(l=!0)}if(!l)continue;var h={T:1,N:a.nodeName,_xml:this.serialize(a)};n.E||(n.E=[]),n.E.push(h);for(r=a.childNodes.length-1;r>=0;r--){"data"!==(d=a.childNodes[r]).nodeName&&1===d.nodeType&&(o.push(d),s.push(h))}}else{h={T:1,N:a.nodeName};a.attributes.length>0&&(h.A=this.convertAttributes(a.attributes),h.A.id&&i.push(h.A.id)),n.E||(n.E=[]),n.E.push(h),h.N&&"body"===h.N.toLowerCase()&&!0===this._oldMode&&(h.A||(h.A={}),h.A["ev:onpageload"]="scwin.onpageload");for(r=a.childNodes.length-1;r>=0;r--){var d;3===(d=a.childNodes[r]).nodeType&&""==d.nodeValue.trim()||(o.push(d),s.push(h))}}else if(2==a.nodeType);else if(3==a.nodeType){var u=a.nodeValue.trim();if(""!=u)if(u.startsWith("<![CDATA["))c=(c=u.substring(9,u.length-3)).replace(/\\/gi,"\\$&"),(c=this.cDataToFunc(c,n))&&(n.E||(n.E=[]),n.E.push({T:4,cdata:c}));else n.E||(n.E=[]),n.E.push({T:3,text:a.nodeValue.replace(/\\/gi,"\\$&")})}else if(4==a.nodeType){if(a.nodeValue){n.E||(n.E=[]);var c=a.nodeValue.replace(/\\/gi,"\\$&");c=this.cDataToFunc(c,n),n.E.push({T:4,cdata:c})}}else if(7==a.nodeType){var p=a.nodeName;p||(p="xml-stylesheet"),n.E||(n.E=[]),n.E.push({T:7,N:p,instruction:a.nodeValue.replace(/\\/gi,"\\$&")})}}return{obj:e,id:i}}catch(t){console.log(t)}},cDataToFunc:function(t,e){try{if(!e||"string"!=typeof e.N)return t;var i=t;if("script"===e.N.toLowerCase()){var o="",s=e.A&&e.A["ev:event"],r=s&&s.indexOf("(");r>=0&&(o=","+s.slice(r+1,-1));var a="",n="";!0===this._isHead&&"false"!==e.A.lazy&&(e.A.lazy="false",a="scwin.onpageload = function(){",n="}",this._oldMode=!0),this._isHead=!1;i="function(scopeObj"+o+"){var {"+"#_wq!$!@}=scopeObj;"+a+t+n+"}"}else"w2:env"===e.N.toLowerCase()&&"string"==typeof t&&(i=JSON.parse(t));return i}catch(t){console.log(t)}}};c.json2xml=function(t,e){try{"string"==typeof t&&(t=t.parse(t)),void 0!==e&&null!=e||(e={});for(var i=[t],o=[],s="";i.length>0;){var r=i.pop();if(e.changeKey&&null!=e.changeKey[r.N]&&(r.N=e.changeKey[r.N]),o.length>0&&o[o.length-1].length--,1===r.T){for(var a in s+="<"+r.N,r.A)void 0!==r.A[a]&&(s+=" "+a+'="'+this._encode(r.A[a])+'"');if(r.E){s+=">",o.push({length:r.E.length,name:r.N});for(var n=r.E.length-1;n>=0;n--)i.push(r.E[n])}else s+="/>"}else 3===r.T?s+=r.text:4===r.T&&(s+="<![CDATA["+r.cdata+"]]>");for(;o.length>0&&0===o[o.length-1].length;){s+="</"+o.pop().name+">"}}return s}catch(t){WebSquare.exception.printStackTrace(t,null,this)}};var p=__webpack_require__(2014),g=__webpack_require__(2137),m=__webpack_require__(7757),f=__webpack_require__.n(m),b=__webpack_require__(8683),y=__webpack_require__(2712),v=__webpack_require__(5784),w={XmlEvent:function(t,e,i,o){try{this.name=t,this.action=e,this.param=i,this.disabled=o||!1}catch(t){h.w.printStackTrace(t)}}},S=function(){this.cache=!0,this.convertedCSSText=null,this.controlCSSText=null,this.importedCSSText=null,this.internalCSSText=null,this.externalCSSText=null,this.externalCSSLink=null,this.controlCSSLink=null,this.classStyleCache=[],this.excludeList=[],this.excludeList.trigger="1",this.excludeList.submit="1",
this.excludeList.inputCalendar="1",this.heightPattern=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/gi,this.widthPattern=/(?:^|;)\s*width\s*:\s*(\d*)px\s*(?:$|;)/gi,this.initialize(),this.startCache()};S.prototype.startCache=function(){this.cache=!0},S.prototype.endCache=function(){this.cache=!1},S.prototype.initialize=function(){this.convertedCSSText=[],this.controlCSSText=[],this.internalCSSText=[],this.externalCSSText=[],this.externalCSSLink=[],this.controlCSSLink=[]},S.prototype.addConvertedCSS=function(t,e){""!=e&&(1==this.cache?this.convertedCSSText.push(t+" {"+e+"} \n"):WebSquare.cssStyleSheet.addRule(t,e))},S.prototype.addControlCSS=function(t){this.controlCSSText.push(t+"\n")},S.prototype.addInternalCSS=function(t){this.internalCSSText.push(t+"\n")},S.prototype.addExternalCSS=function(t){this.externalCSSText.push(t+"\n")},S.prototype.linkControlCSS=function(t){this.controlCSSLink.push(t)},S.prototype.linkExternalCSS=function(t){this.externalCSSLink.push(t)},S.prototype.toCSS=function(){var t=[];return this.controlCSSText&&this.controlCSSText.length>0&&(t=(t=(t=t.concat(["/*controlCSSText*/\n"])).concat(this.controlCSSText)).concat(["\n\n"])),this.convertedCSSText&&this.convertedCSSText.length>0&&(t=(t=(t=t.concat(["/*convertedCSSText*/\n"])).concat(this.convertedCSSText)).concat(["\n\n"])),this.externalCSSText&&this.externalCSSText.length>0&&(t=(t=(t=t.concat(["/*externalCSSText*/\n"])).concat(this.externalCSSText)).concat(["\n\n"])),this.internalCSSText&&this.internalCSSText.length>0&&(t=(t=t.concat(["/*internalCSSText*/\n"])).concat(this.internalCSSText)),t.join("")},S.prototype.executeImport=function(t){try{for(var e=WebSquare.net.getParameter("adaptive")||"",i=[],o=document.getElementsByTagName("head")[0],s=0,r=this.controlCSSLink.length;s<r;s++){var a=document.createElement("link");for(var u in this.controlCSSLink[s])a[u]=this.controlCSSLink[s][u];null!=t?o.insertBefore(a,t):o.appendChild(a),i.push(a),d.k.printLog("import core css : "+a.href)}for(s=0,r=this.externalCSSLink.length;s<r;s++){var c=this.externalCSSLink[s];if(!WebSquare.hybridApp)if(""!=e&&c.adaptive){if(e!=c.adaptive)continue}else{if(b.D.isMobile()&&c.adaptive&&"mobile"!=c.adaptive)continue;if(!b.D.isMobile()&&c.adaptive&&"pc"!=c.adaptive)continue}a=document.createElement("link");for(var u in this.externalCSSLink[s])if(""!=u){var p="";"href"==u?(p=n.d.getResourcePostfix(this.externalCSSLink[s][u]),a[u]=p):a[u]=this.externalCSSLink[s][u]}null!=t?(o.insertBefore(a,t),l.v.browserCheck.ie&&o.insertBefore(t,t)):o.appendChild(a),i.push(a),d.k.printLog("import user css : "+a.href)}this.controlCSSLink=[],this.externalCSSLink=[];var g,m=this.toCSS();if(m)if(l.v.browserCheck.ie)(g=document.createElement("style")).setAttribute("type","text/css"),g.styleSheet.cssText=m,null!=t?o.insertBefore(g,t):o.appendChild(g),i.push(g);else(g=document.createElementNS("http://www.w3.org/1999/xhtml","style")).setAttribute("type","text/css"),g.appendChild(document.createTextNode(m)),null!=t?o.insertBefore(g,t):o.appendChild(g),i.push(g);return this.initialize(),this.endCache(),o=null,i}catch(t){h.w.printStackTrace(t)}},S.prototype.resizeStyle=function(t,e){try{var i=e.style;if(i&&""!=i){var o=this.setResizeStyle(i,e);null!=o&&null!=o.newSizeStyle&&(e.style=i+";"+o.newSizeStyle)}return e}catch(t){h.w.printStackTrace(t)}},S.prototype.styleToClass=function(t,e){try{for(var i in e)if(i.indexOf("Style")>-1){var o=e[i];if(""!=o){var s=i+"Class",r="#"+t+" ."+s;WebSquare.cssManager.addConvertedCSS(r,o),e[i]="";var a=i.replace("Style","Class");e[a]||(e[a]=""),""!=e[a]&&(e[a]+=" "),e[a]+=s}}return e}catch(t){h.w.printStackTrace(t)}},S.prototype.setResizeStyle=function(t,e){if(null!=this.excludeList[e.pluginName])return null;var i=null,o=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/i.exec(t);if(o&&2==o.length){var s=parseInt(o[1]);(i=this.getSizeObj(t,e,i)).newSizeStyle=";height:"+(s-(i.paddingTop+i.paddingBottom+i.borderTopWidth+i.borderBottomWidth))+"px"}
var r=/(?:^|;)\s*width\s*:\s*(\d*)px\s*(?:$|;)/i.exec(t);if(r&&2==r.length){var a=parseInt(r[1]);(i=this.getSizeObj(t,e,i)).newSizeStyle+=";width:"+(a-(i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth))+"px"}return i},S.prototype.getSizeObj=function(t,e,i){if(null!=i)return i;var o={paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,borderTopWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderRightWidth:0,newSizeStyle:""},s=new WebSquare.cssManager.sizeObj(t),r=this.getSizeStyleObj("w2"+e.pluginName),a=this.getSizeStyleObj(e.className);return o=this.inherit(o,r),o=this.inherit(o,a),o=this.inherit(o,s)},S.prototype.inherit=function(t,e){return null==e||(null!=e.paddingTop&&(t.paddingTop=e.paddingTop),null!=e.paddingBottom&&(t.paddingBottom=e.paddingBottom),null!=e.paddingLeft&&(t.paddingLeft=e.paddingLeft),null!=e.paddingRight&&(t.paddingRight=e.paddingRight),null!=e.borderTopWidth&&(t.borderTopWidth=e.borderTopWidth),null!=e.borderBottomWidth&&(t.borderBottomWidth=e.borderBottomWidth),null!=e.borderLeftWidth&&(t.borderLeftWidth=e.borderLeftWidth),null!=e.borderRightWidth&&(t.borderRightWidth=e.borderRightWidth)),t},S.prototype.getSizeStyleObj=function(t){if(null==t||""==t)return null;var e=this.classStyleCache[t];if(null==e){var i=this.toCSS(),o=new RegExp("[.]"+t+"[ \t\n\r]*{([^}]*)}"),s=i.match(o),r="";null!=s&&2==s.length&&(r=s[1]),e=new WebSquare.cssManager.sizeObj(r),this.classStyleCache[t]=e}return e},S.prototype.sizeObj=function(t){this.paddingTop=null,this.paddingBottom=null,this.paddingLeft=null,this.paddingRight=null,this.borderTopWidth=null,this.borderBottomWidth=null,this.borderLeftWidth=null,this.borderRightWidth=null;for(var e=t.split(";"),i=0;i<e.length;i++){var o=e[i].toLowerCase();o.indexOf("padding")>=0?this.setPaddingProperty(o):o.indexOf("border")>=0&&this.setBorderProperty(o)}},S.prototype.sizeObj.prototype.toString=function(){this.paddingTop;this.paddingBottom,this.paddingLeft,this.paddingRight,this.borderTopWidth,this.borderBottomWidth,this.borderLeftWidth,this.borderRightWidth},S.prototype.sizeObj.prototype.setPaddingProperty=function(t){var e=t.split(":"),i=e[0].wq_trim(),o=e[1].wq_trim();if(""!=o)if("padding"==i){var s=o.split(" ");1==s.length?(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[0]),this.paddingBottom=parseInt(s[0]),this.paddingLeft=parseInt(s[0])):2==s.length?(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[1]),this.paddingBottom=parseInt(s[0]),this.paddingLeft=parseInt(s[1])):3==s.length?(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[1]),this.paddingBottom=parseInt(s[2]),this.paddingLeft=parseInt(s[1])):4==s.length&&(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[1]),this.paddingBottom=parseInt(s[2]),this.paddingLeft=parseInt(s[3]))}else i.indexOf("padding-left")>=0?this.paddingLeft=parseInt(o):i.indexOf("padding-top")>=0?this.paddingTop=parseInt(o):i.indexOf("padding-right")>=0?this.paddingRight=parseInt(o):i.indexOf("padding-bottom")>=0&&(this.paddingBottom=parseInt(o))},S.prototype.sizeObj.prototype.setBorderProperty=function(t){for(var e=t.split(":"),i=e[0].wq_trim(),o=e[1].wq_trim().split(" "),s=null,r=0;r<o.length;r++)o[r].indexOf("px")>=0&&(s=parseInt(o[r]));null!=s&&("border"==i||"border-width"==i?(this.borderTopWidth=s,this.borderBottomWidth=s,this.borderLeftWidth=s,this.borderRightWidth=s):i.indexOf("border-left")>=0?this.borderLeftWidth=s:i.indexOf("border-top")>=0?this.borderTopWidth=s:i.indexOf("border-right")>=0?this.borderRightWidth=s:i.indexOf("border-bottom")>=0&&(this.borderBottomWidth=s))},S.prototype.sizeObj.prototype.inherit=function(t){null!=t&&(this.paddingTop=null!=t.paddingTop?t.paddingTop:this.paddingTop,this.paddingBottom=null!=t.paddingBottom?t.paddingBottom:this.paddingBottom,this.paddingLeft=null!=t.paddingLeft?t.paddingLeft:this.paddingLeft,this.paddingRight=null!=t.paddingRight?t.paddingRight:this.paddingRight,
this.borderTopWidth=null!=t.borderTopWidth?t.borderTopWidth:this.borderTopWidth,this.borderBottomWidth=null!=t.borderBottomWidth?t.borderBottomWidth:this.borderBottomWidth,this.borderLeftWidth=null!=t.borderLeftWidth?t.borderLeftWidth:this.borderLeftWidth,this.borderRightWidth=null!=t.borderRightWidth?t.borderRightWidth:this.borderRightWidth)},S.prototype.sizeObj.prototype.nullToZero=function(t){this.paddingTop=this.paddingTop||0,this.paddingBottom=this.paddingBottom||0,this.paddingLeft=this.paddingLeft||0,this.paddingRight=this.paddingRight||0,this.borderTopWidth=this.borderTopWidth||0,this.borderBottomWidth=this.borderBottomWidth||0,this.borderLeftWidth=this.borderLeftWidth||0,this.borderRightWidth=this.borderRightWidth||0},S=new S;var C={ClassStyleCache:{},makeTime:0,_initImport:function(){C.skinTag=a.x.externalCSSURL.slice(0)}};a.x._initImportList.push("skin"),C.addImport=function(t,e){try{if("string"==typeof t){var i={};i.href=b.D.getAbsolutePath(l.v.getURL(t)),i.type="text/css",i.rel="stylesheet",t=i}var o=!1;for(var s in C.skinTag)if(t.href==C.skinTag[s]){o=!0;break}if(o);else if(C.skinTag.push(t.href),"link"==l.v.getConfiguration("/WebSquare/stylesheet/@import"))1==e?S.linkExternalCSS(t):S.linkControlCSS(t);else{var r=t.href,a=l.v.load(r);1==e?S.addExternalCSS(a):S.addControlCSS(a)}}catch(t){h.w.printStackTrace(t)}},C.parseCSS=function(t){try{if(l.v.browserCheck.ie){document.createStyleSheet().cssText=t}else{var e=document.createElementNS("http://www.w3.org/1999/xhtml","style");e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head").item(0).appendChild(e)}}catch(t){h.w.printStackTrace(t)}},C.importCSS=function(t){try{for(var e=u.L.getElementsByTagName(t.documentElement,"style",l.v._XML_NAMESPACE.XHTML),i="",o=0;o<e.length;o++){if(1==(n=e[o]).nodeType)for(var s=n.childNodes,r=0;r<s.length;r++){var a=s[r];4!=a.nodeType&&3!=a.nodeType||(i+=a.nodeValue)}}""!=i.wq_trim()&&S.addInternalCSS(i);for(s=t.childNodes,o=0;o<s.length;o++){var n;if(7==(n=s[o]).nodeType&&"xml-stylesheet"===n.nodeName){var d=n.data.wq_replaceAll("=","").split('"');d.pop();var c={};for(r=0;r<d.length;r+=2)c[d[r].wq_trim()]=d[r+1];c.href&&(c.href=b.D.getAbsolutePath(l.v.getURL(c.href))),null==c.type&&(c.type="text/css"),null==c.rel&&(c.rel="stylesheet"),C.addImport(c,!0)}}}catch(t){h.w.printStackTrace(t)}},C.applyClass=function(t,e){try{t.className=e}catch(t){}},C.makeClassStyle=function(t){var e={};if(void 0===t||null==t||""==t)return e;if(void 0!==C.ClassStyleCache[t]&&null!=C.ClassStyleCache[t])return C.ClassStyleCache[t];try{var i=document.styleSheets;if(l.v.browserCheck.ie)for(var o=i.length-1;o>=0;o--)for(var s=i[o],r=0;r<s.rules.length;r++){if(void 0!==(g=s.rules.item(r)).selectorText){if((f=(m=g.selectorText).lastIndexOf("."))>-1){var a=m.indexOf(" ",f);m=a>-1?m.substring(f+1,a):m.substring(f+1)}if(m==t){for(var n=g.style.cssText.split(";"),d=0;d<n.length;d++){if(null!=(b=n[d].split(":"))[1]){if(b[1].indexOf("url")>=0)if(b[1]=b[1].wq_trim(),b[1].startsWith("url"))"("==(y=b[1].substring(3).wq_trim()).charAt(0)&&")"==y.charAt(y.length-1)&&(b[1]="url("+l.v.getImageURL(y.substring(1,y.length-1))+")");e[b[0].wq_trim().capitalizeStyle()]=b[1].wq_trim()}}C.ClassStyleCache[t]=e;break}}}else if(l.v.browserCheck.opera)for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){if(void 0!==(g=s.cssRules[r]).selectorText){if((f=(m=g.selectorText).lastIndexOf("."))>-1){a=m.indexOf(" ",f);m=a>-1?m.substring(f+1,a):m.substring(f+1)}if(m==t){for(n=g.style.cssText.split(";"),d=0;d<n.length;d++){var u=n[d].indexOf(":");if(u>-1){var c=n[d].substring(0,u),p=n[d].substring(u+1);e[c.wq_trim().capitalizeStyle()]=p.wq_trim()}}C.ClassStyleCache[t]=e;break}}}else for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){var g;if(void 0!==(g=s.cssRules[r]).selectorText){var m,f;if((f=(m=g.selectorText).lastIndexOf("."))>-1){a=m.indexOf(" ",f);m=a>-1?m.substring(f+1,a):m.substring(f+1)}if((m=m.toLowerCase())==(t=t.toLowerCase())){
for(n=g.style.cssText.split(";"),d=0;d<n.length;d++){var b;if(null!=(b=n[d].split(":"))[1]){var y;if(b[1].indexOf("url")>=0)if(b[1]=b[1].wq_trim(),b[1].startsWith("url"))if(b[1].indexOf("http")>=0)for(var v=2;null!=b[v];)b[1]=b[1]+":"+b[v],v++;else"("==(y=b[1].substring(3).wq_trim()).charAt(0)&&")"==y.charAt(y.length-1)&&(b[1]="url("+l.v.getImageURL(y.substring(1,y.length-1))+")");e[b[0].wq_trim().capitalizeStyle()]=b[1].wq_trim()}}C.ClassStyleCache[t]=e;break}}}}catch(t){h.w.printStackTrace(t)}return e},C.makeBackgroundImageUrl=function(t){var e="";if(void 0===t||null==t||""==t)return"";try{var i=document.styleSheets;if(l.v.browserCheck.ie)for(var o=i.length-1;o>=0;o--)for(var s=i[o],r=0;r<s.rules.length;r++){if(void 0!==(b=s.rules.item(r)).selectorText){if((v=(y=b.selectorText).lastIndexOf("."))>-1){var n=y.indexOf(" ",v);y=n>-1?y.substring(v+1,n):y.substring(v+1)}if(y==t){for(var d=b.style.cssText.split(";"),u=0;u<d.length;u++){if(null!=(c=d[u].split(":"))[1]&&"BACKGROUND-IMAGE"==c[0].toUpperCase()){if(c[1].indexOf("url")>=0)if(c[1]=c[1].wq_trim(),c[1].startsWith("url"))"("==(w=c[1].substring(3).wq_trim()).charAt(0)&&")"==w.charAt(w.length-1)&&(c[1]=l.v.getImageURL(w.substring(1,w.length-1)));e=c[1].wq_trim()}}break}}}else if(l.v.browserCheck.opera)for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){if(void 0!==(b=s.cssRules[r]).selectorText){if((v=(y=b.selectorText).lastIndexOf("."))>-1){n=y.indexOf(" ",v);y=n>-1?y.substring(v+1,n):y.substring(v+1)}if(y==t){for(d=b.style.cssText.split(";"),u=0;u<d.length;u++){var c=d[u].split(":"),p=d[u].indexOf(":");if(p>-1){var g=d[u].substring(0,p),m=d[u].substring(p+1);if("BACKGROUND-IMAGE"==g.toUpperCase().wq_trim()){if(m.indexOf("url")>=0)if((m=m.wq_trim()).startsWith("url"))if("("==(w=(w=m.substring(3).wq_trim()).replace(/"/g,"")).charAt(0)&&")"==w.charAt(w.length-1)){var f=w.lastIndexOf(a.x.baseURI);f+=a.x.baseURI.length,m=l.v.getImageURL(w.substring(f,w.length-1))}e=m}}}break}}}else for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){var b;if(void 0!==(b=s.cssRules[r]).selectorText){var y,v;if((v=(y=b.selectorText).lastIndexOf("."))>-1){n=y.indexOf(" ",v);y=n>-1?y.substring(v+1,n):y.substring(v+1)}if((y=y.toLowerCase())==(t=t.toLowerCase())){for(d=b.style.cssText.split(";"),u=0;u<d.length;u++){if(null!=(c=d[u].split(":"))[1]&&"BACKGROUND-IMAGE"==c[0].toUpperCase().wq_trim()){var w;if(c[1].indexOf("url")>=0)if(c[1]=c[1].wq_trim(),c[1].startsWith("url"))if(c[1].indexOf("http")>=0)for(var S=2;null!=c[S];)c[1]=c[1]+":"+c[S],S++;else"("==(w=c[1].substring(3).wq_trim()).charAt(0)&&")"==w.charAt(w.length-1)&&(c[1]=l.v.getImageURL(w.substring(1,w.length-1)));e=c[1].wq_trim()}}break}}}}catch(t){h.w.printStackTrace(t)}return e},C.loadCSS=function(t){try{if(!t||""===t)return;var e=l.v.load(t);if(!e)return;if(l.v.browserCheck.ie){document.createStyleSheet().cssText=e}else{var i=document.createElementNS("http://www.w3.org/1999/xhtml","style");i.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(i)}}catch(t){h.w.printStackTrace(t)}};var x={WebSquareParser:function(){}};x.WebSquareParser.prototype.parse=function(){var t=(0,g.Z)(f().mark((function t(e,i,o){var s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,this.preParse(e),this.parseCSS(e,i,o),t.next=6,this.parseUDC2(e);case 6:return o||(this.parseBuildDate(e.documentElement),this.parseTitle(e.documentElement)),this.parseModels(e.documentElement,o),t.next=10,this.parseScript(e.documentElement,o);case 10:return s=t.sent,null!=o?this.parseDataCollections(e.documentElement,o.uuid):this.parseDataCollections(e.documentElement),t.abrupt("return",s);case 15:t.prev=15,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 18:case"end":return t.stop()}}),t,this,[[1,15]])})));return function(e,i,o){return t.apply(this,arguments)}}(),x.WebSquareParser.prototype.parseMeta=function(t){try{
var e=["meta","Meta","META"],i=document.getElementsByTagName("head")[0],o=i.getElementsByTagName("meta"),s=[],r=u.L.getElementsByTagName(t,"screen",l.v._XML_NAMESPACE.W2);if(r&&r.length>0){var a=document.createElement("meta");a.name="viewport",a.content="width=device-width initial-scale=1.0",i.appendChild(a)}for(var n=0;n<o.length;n++){((g=o[n].getAttribute("http-equiv"))||(g=o[n].getAttribute("name")))&&s.push(g)}for(n=0;n<e.length;n++){var d=u.L.getElementsByTagName(t,e[n],l.v._XML_NAMESPACE.XHTML);if(d&&d.length>0)for(var c=0;c<d.length;c++){for(var p=0;p<d[c].attributes.length;p++){var g;if("http-equiv"==d[c].attributes[p].nodeName)g=d[c].attributes[p].nodeValue;else{if("name"!=d[c].attributes[p].nodeName)continue;g=d[c].attributes[p].nodeValue}for(var m=0;m<s.length;m++)if(s[m]==g){for(var f=0;f<o.length;f++)if(o[f].getAttribute("http-equiv")==g||o[f].getAttribute("name")==g){i.removeChild(o[f]);break}break}break}var b=document.createElement("meta");for(p=0;p<d[c].attributes.length;p++)b.setAttribute(d[c].attributes[p].nodeName,d[c].attributes[p].nodeValue);i.appendChild(b)}}}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parsePageInheritBefore=function(t,e,i){try{this.preParse(t),this.parseMeta(t.documentElement),this.parseModels(t.documentElement,i),null!=i?this.parseDataCollections(t.documentElement,i.uuid):this.parseDataCollections(t.documentElement)}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parsePageInheritAfter=function(){var t=(0,g.Z)(f().mark((function t(e,i,o){var s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,this.parseCSS(e,i,o,a.x.WebSquaredoc.cssList[0]),t.next=5,this.parseScript(e.documentElement,o,!0);case 5:return s=t.sent,t.abrupt("return",s);case 9:t.prev=9,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e,i,o){return t.apply(this,arguments)}}(),x.WebSquareParser.prototype.preParse=function(t,e){try{if(l.v.browserCheck.ieAllVersion&&n.d.useActiveXObject){var i=l.v.getNamespaces(t),o="";for(var s in i)""!=s&&(o+="xmlns:"+s+'="'+i[s]+'" ');t.setProperty("SelectionLanguage","XPath"),t.setProperty("SelectionNamespaces",o)}!1!==e&&this.parseConfig(t.documentElement)}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseCSS=function(t,e,i,o){try{var s=l.v.getConfiguration("/WebSquare/stylesheet/@value");if("false"!=l.v.getConfiguration("/WebSquare/stylesheet/@enable")&&!e&&!i&&!a.x.styleSheetEarlyImport){null!=s&&""!=s||(s="link"==l.v.getConfiguration("/WebSquare/stylesheet/@import")?"stylesheet_ext.css":"stylesheet.css");var r=n.d.inquiresPath("skin/");C.addImport(a.x.baseThemeURI+r+s),WebSquare.cssManager.executeImport()}var d="";if(i&&i.options.cssFunction&&!i.options.strictFrame&&(d=b.D.getGlobalFunction(i.options.cssFunction,i.id)),"function"==typeof d&&WebSquare.cssManager.executeImport(o),i&&!i.options.strictFrame){if("function"==typeof d){for(var u=[],c=0;c<WebSquare.cssManager.externalCSSLink.length;c++)u.push(WebSquare.cssManager.externalCSSLink[c].href);if(!0===d(i.id,u)){for(c=0;c<u.length;c++)for(var p in C.skinTag)if(b.D._getAbsolutePath(u[c])==C.skinTag[p]){C.skinTag.splice(p,1);break}WebSquare.cssManager.externalCSSLink=[]}}i.frameDoc.cssList=i.frameDoc.cssList.concat(WebSquare.cssManager.executeImport(o))}else a.x.WebSquaredoc.cssList=a.x.WebSquaredoc.cssList.concat(WebSquare.cssManager.executeImport(o))}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseConfig=function(t){try{var e=u.L.getElementsByTagName(t,"config",l.v._XML_NAMESPACE.W2);if(1==e.length)for(var i=e[0].firstChild;null!=i;i=i.nextSibling)1==i.nodeType&&u.L.matchNode(i,"WebSquare",l.v._XML_NAMESPACE.XHTML)&&a.x.WebSquaredoc.mergeConfig(i)}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseBuildDate=function(t){try{var e=u.L.getElementsByTagName(t,"buildDate",l.v._XML_NAMESPACE.W2)
;1==e.length&&e[0].firstChild?WebSquare.buildDate=e[0].firstChild.nodeValue:WebSquare.buildDate="N/A"}catch(t){WebSquare.buildDate="N/A",h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseTitle=function(t){try{var e=u.L.getElementsByTagName(t,"title",l.v._XML_NAMESPACE.XHTML);1==e.length&&(WebSquare.docTitle=document.title=e[0].firstChild.nodeValue)}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseModels=function(t,e){try{for(var i=u.L.getElementsByTagName(t,"model",l.v._XML_NAMESPACE.XFORMS),o=0;o<i.length;++o)e?e.frameDoc&&!e.options.strictFrame?e.frameDoc.models.push(this.parseModel(i[o],e)):!0===e.options.strictFrame&&a.x.WebSquaredoc.models.push(this.parseModel(i[o],e)):a.x.WebSquaredoc.models.push(this.parseModel(i[o]))}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseDataCollections=function(t,e){try{for(var i=u.L.getElementsByTagName(t,"model",l.v._XML_NAMESPACE.XFORMS),o=0;o<i.length;++o)this.parseDataCollection(i[o],e)}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseModel=function(t,e){try{var i=this.parseInstances(t),o=this.parseBinds(t),s=this.parseSubmissions(t,e),r=this.parseWorkflows(t,e);return new WebSquare.Model(t,i,o,s,r)}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseDataCollection=function(t,e){try{var i=u.L.getElementsByTagName(t,"dataCollection",l.v._XML_NAMESPACE.W2)[0];if(i){this.parseDataCollectionAttribute(i);for(var o=u.L.getElementsByTagName(i,"dataMap",l.v._XML_NAMESPACE.W2),s=0;s<o.length;s++){var r=o[s];new WebSquare.DataCollection.dataMap(null,null,r,"dataMap",e)}var a=u.L.getElementsByTagName(i,"dataList",l.v._XML_NAMESPACE.W2);for(s=0;s<a.length;s++){var n=a[s];new WebSquare.DataCollection.dataList(null,null,n,"dataList",e)}var d=u.L.getElementsByTagName(i,"linkedDataList",l.v._XML_NAMESPACE.W2);for(s=0;s<d.length;s++){var c=d[s];new WebSquare.DataCollection.linkedDataList(null,null,c,"linkedDataList",e)}var p=u.L.getElementsByTagName(i,"aliasDataList",l.v._XML_NAMESPACE.W2);for(s=0;s<p.length;s++){var g=p[s];new WebSquare.DataCollection.aliasDataList(null,null,g,"aliasDataList",e)}var m=u.L.getElementsByTagName(i,"aliasDataMap",l.v._XML_NAMESPACE.W2);for(s=0;s<m.length;s++){var f=m[s];new WebSquare.DataCollection.aliasDataMap(null,null,f,"aliasDataMap",e)}var b=u.L.getElementsByTagName(i,"aliasLinkedDataList",l.v._XML_NAMESPACE.W2);for(s=0;s<b.length;s++){var y=b[s];new WebSquare.DataCollection.aliasLinkedDataList(null,null,y,"aliasLinkedDataList",e)}}}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseDataCollectionAttribute=function(t){try{if(WebSquare.DataCollection.options.useConfig){var e=l.v.getConfig("dataCollection");WebSquare.DataCollection.options=a.x.extendKeepingType(WebSquare.DataCollection.options,e)}for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i];WebSquare.nodeValueDeprecated?WebSquare.DataCollection.api.setOption(o.name,o.value):WebSquare.DataCollection.api.setOption(o.nodeName,o.nodeValue)}}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseInstances=function(t){try{for(var e=u.L.getElementsByTagName(t,"instance",l.v._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;o++)i.push(this.parseInstance(e[o]));return i}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseInstance=function(t){try{if(!t)return;if("string"==typeof t){var e='<xf:model xmlns:xf="'+l.v._XML_NAMESPACE.XFORMS+'" xmlns:w2="'+l.v._XML_NAMESPACE.W2+'" xmlns:ev="'+l.v._XML_NAMESPACE.EVENTS+'">',i=u.L.parse(e+t+"</xf:model>",l.v._XML_NAMESPACE.XFORMS);this.preParse(i,!1),t=i.documentElement.firstChild}var o=t.attributes.getNamedItem("src"),s=null;if(null!=o);else{for(var r=null,a=t.firstChild;null!=a;a=a.nextSibling)1==a.nodeType&&(r=a);if(null==r)s=new WebSquare.Model.Instance(t,null,null);else{var n=[];for(a=r.firstChild;null!=a;a=a.nextSibling)if(null!=a.namespaceURI&&""!=a.namespaceURI){n.push("xmlns:"+a.prefix),n.push(a.namespaceURI);break}
null!=n[0]&&"xmlns:xml"!=n[0]&&(r.attributes.getNamedItem(n[0])||r.setAttribute(n[0],n[1])),s=new WebSquare.Model.Instance(t,r,null)}}return s}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseBinds=function(t){try{for(var e=u.L.getElementsByTagName(t,"bind",l.v._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;++o)i.push(this.parseBind(e[o]));return i}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseBind=function(t){try{var e=t.attributes.getNamedItem("id"),i=t.attributes.getNamedItem("nodeset");return new WebSquare.Model.Bind(t,"nodeset",i.value,null,e.value)}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseSubmissions=function(t,e){try{for(var i=u.L.getElementsByTagName(t,"submission",l.v._XML_NAMESPACE.XFORMS),o=[],s=0;s<i.length;s++)o.push(this.parseSubmission(i[s],t,e));return o}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseSubmission=function(t,e,i){try{var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"method","")||l.v.getConfiguration("/WebSquare/submission/method/@value")||"POST",r=WebSquare.WebSquareparser.getAttribute(t,"action","")||l.v.getConfiguration("/WebSquare/submission/action/@value"),a=WebSquare.WebSquareparser.getAttribute(t,"mode","")||l.v.getConfiguration("/WebSquare/submission/mode/@value")||"asynchronous",n=WebSquare.WebSquareparser.getAttribute(t,"mediatype","")||l.v.getConfiguration("/WebSquare/submission/mediatype/@value"),d=WebSquare.WebSquareparser.getAttribute(t,"accept","")||l.v.getConfiguration("/WebSquare/submission/accept/@value"),u=WebSquare.WebSquareparser.getAttribute(t,"encoding","")||l.v.getConfiguration("/WebSquare/submission/encoding/@value")||"UTF-8",c=WebSquare.WebSquareparser.getAttribute(t,"ref"),p=WebSquare.WebSquareparser.getAttribute(t,"target"),g=WebSquare.WebSquareparser.getAttribute(t,"replace"),m=WebSquare.WebSquareparser.getAttribute(t,"instance"),f=WebSquare.WebSquareparser.getAttribute(t,"preSubmitFunction","")||l.v.getConfiguration("/WebSquare/submission/preSubmitFunction/@value")||"",b=WebSquare.WebSquareparser.getAttribute(t,"customHandler"),y=WebSquare.WebSquareparser.getAttribute(t,"errorHandler");""==y&&(y=l.v.getConfiguration("/WebSquare/submission/errorHandler/@value"));var v=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==v&&(v=l.v.getConfiguration("/WebSquare/submission/processMsg/@value"));var S="true"===this.getAttribute(t,"abortTrigger")||"false"!==this.getAttribute(t,"abortTrigger")&&"true"===l.v.getConfiguration("/WebSquare/submission/abortTrigger/@value"),C=WebSquare.WebSquareparser.getAttribute(t,"soapaction",""),x="true"===WebSquare.WebSquareparser.getAttribute(t,"useModal");""==n&&("post"!=s&&"POST"!=s||(n="application/xml"));var _=this.parseEvent(t,i)||[],I=this.getAttribute(t,"timeout","")||l.v.getConfiguration("/WebSquare/submission/timeout/@value"),T=this.getAttribute(t,"singleMode")||!1,k="false"!==this.getAttribute(t,"hideProcessMsg")&&("true"===this.getAttribute(t,"hideProcessMsg")||"false"!==l.v.getConfiguration("/WebSquare/submission/hideProcessMsg/@value")),D="true"===this.getAttribute(t,"withCredentials"),L=WebSquare.WebSquareparser.getAttribute(t,"webtopRef",""),W=WebSquare.WebSquareparser.getAttribute(t,"userData1",""),A=WebSquare.WebSquareparser.getAttribute(t,"userData2",""),E=o,M=null,q="";i&&i.options&&i.options.scope&&(o=(q=i.id+"_")+E,M=i.id);var R=WebSquare.WebSquareparser.getAttribute(t,"ev:submit"),N=WebSquare.WebSquareparser.getAttribute(t,"ev:submitdone"),F=WebSquare.WebSquareparser.getAttribute(t,"ev:submiterror"),O=WebSquare.WebSquareparser.getAttribute(t,"ev:submittimeout"),B={};R&&(_.push(new w.XmlEvent("xforms-submit","script",{handler:q+R})),B.submitHandler=R),N&&(_.push(new w.XmlEvent("xforms-submit-done","script",{handler:q+N})),B.submitDoneHandler=N),F&&(_.push(new w.XmlEvent("xforms-submit-error","script",{handler:q+F})),B.submitErrorHandler=F),
O&&(_.push(new w.XmlEvent("xforms-submit-timeout","script",{handler:q+O})),B.submitTimeoutHandler=O),B.parentElement=e,B.element=t,B.id=o,B.org_id=E,B.method=s,B.action=r,B.mode=a,B.bind=null,B.mediatype=n,B.accept=d,B.encoding=u,B.ref=c,B.target=p,B.replace=g,B.instance=m,B.customHandler=b,B.errorHandler=y,B.soapaction=C,B.processMsg=v,B.xmlEvents=_,B.timeout=I,B.singleMode=T,B.hideProcessMsg=k,B.abortTrigger=S,B.preSubmitFunction=f,B.scope_id=M,B.withCredentials=D,B.useModal=x,B.webtopRef=L,B.userData1=W,B.userData2=A;var V=new WebSquare.Model.Submission(B);return i&&i.options&&i.options.scope&&(i.scope[E]=V),l.v.useSubmissionGlobal&&(window[V.id]=V),V}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseScript=function(){var t=(0,g.Z)(f().mark((function t(e,i,o,s){var r,a,n,d,c,p,g,m,y,v,w,S,C,x,_,I,T,k,D,L;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,s||(i?i.options&&i.options.strictFrame?WebSquare.scriptSection="":i.frameDoc&&(i.frameDoc.scriptSection=""):WebSquare.scriptSection="",i?i.options&&i.options.initScript&&(r=i.options.initScript.toString(),i.options.strictFrame?WebSquare.scriptSection+=r:"executed"===WebSquare.scriptSectionExcuteFlag&&(i.frameDoc.scriptSection+=r)):"true"==l.v.getConfiguration("/WebSquare/initScript/@value")&&WebSquare.w2xPath!==WebSquare.net.getBlankXML()&&(WebSquare.scriptSection+=l.v.getConfiguration("/WebSquare/initScript"))),a=i&&i.options.src?i.getSrc():WebSquare.w2xPath,1!=(n=u.L.getElementsByTagName(e,"head",l.v._XML_NAMESPACE.XHTML)).length){t.next=60;break}d=i&&i._isUDC2,c=n[0].firstChild;case 8:if(null==c){t.next=57;break}if(1!=c.nodeType||!u.L.matchNode(c,"script",l.v._XML_NAMESPACE.XHTML)){t.next=53;break}if(p=c.getAttribute("src"),g=b.D.getBoolean(c.getAttribute("scopeExternal"))||i&&i.options.scopeExternal,m=c.getAttribute("scopeVariable")||"",null==p||""==p){t.next=20;break}return y=c.getAttribute("cache"),v=c.getAttribute("defer"),t.next=18,WebSquare.Parser.parseExternalScript({uri:p,cache:y,lazy:v,frameObj:i,pageInherit:o,scopeExternal:g,scopeVariable:m});case 18:t.next=51;break;case 20:if(!s){t.next=22;break}return t.abrupt("continue",54);case 22:if(w=c.getAttribute("loadAt"),S="false",C=-1,"string"!=typeof w||""==w){t.next=48;break}w=w.wq_trim().toUpperCase(),t.t0=w,t.next="WEBSQUARE_START"===t.t0||"START"===t.t0?30:"ENGINE_LOAD"===t.t0||"ENGINE"===t.t0?32:"RESOURCE_LOAD"===t.t0||"RESOURCE"===t.t0?34:"CREATE_COMPONENT"===t.t0||"CREATE"===t.t0?36:"RENDER_DOM"===t.t0||"RENDER"===t.t0?38:"ADJUST_COMPONENT"===t.t0||"ADJUST"===t.t0?40:"BIND_EVENT"===t.t0||"EVENT"===t.t0?42:"EXECUTE_SCRIPT"===t.t0||"EXECUTE"===t.t0?44:46;break;case 30:return C=1,t.abrupt("break",48);case 32:return C=2,t.abrupt("break",48);case 34:return C=3,t.abrupt("break",48);case 36:return C=4,t.abrupt("break",48);case 38:return C=5,t.abrupt("break",48);case 40:return C=6,t.abrupt("break",48);case 42:return C=7,t.abrupt("break",48);case 44:case 46:return C=8,t.abrupt("break",48);case 48:for("false"==S||d?(C=3,"executed"===WebSquare.scriptSectionExcuteFlag&&(x=l.v.scriptPrecedence,l.v.scriptPrecedence=b.D.getBoolean(l.v.getConfiguration("/WebSquare/scriptPrecedence/@value")),x!==l.v.scriptPrecedence&&(_=i&&i.options?i.getSrc():WebSquare.w2xPath,WebSquare.logger.printLog('parser : "scriptPrecedence" turned on. ['+_+"]")))):l.v.scriptPrecedence,I=C>2&&C<8,T=c.firstChild;null!=T;T=T.nextSibling)4!=T.nodeType&&3!=T.nodeType||(k=T.nodeValue,i?(i.options&&i.options.initScript&&"executed"!==WebSquare.scriptSectionExcuteFlag&&!i.options.strictFrame&&(I?i.frameDoc.scriptSection+=i.options.initScript:k=i.options.initScript+k),!0!==l.v.scriptPrecedence&&i.options&&i.options.postScript&&!I&&!i.options.strictFrame&&(k+=i.options.postScript),k=i.options&&i.options.scope?b.D.scopingFuncBody(k,i.id,!0):b.D.scopingFuncBody(k,null,!0),I?(null==WebSquare.executePointScriptArr[C]&&(WebSquare.executePointScriptArr[C]=[]),WebSquare.executePointScriptArr[C].push({script:k,path:a,
scope:i&&i.id}),!0===l.v.scriptPrecedence||i.options.strictFrame||(i.frameDoc.scriptSection+=i.options.postScript)):i.options&&i.options.strictFrame?WebSquare.scriptSection+=k:(i.frameDoc.scriptSection+=k,i._scriptLazy=!0)):(k=b.D.scopingFuncBody(k,null,!0),C>2&&C<8?(null==WebSquare.executePointScriptArr[C]&&(WebSquare.executePointScriptArr[C]=[]),WebSquare.executePointScriptArr[C].push({script:k,path:a,scope:i&&i.id})):WebSquare.scriptSection+=k));case 51:t.next=54;break;case 53:if(1==c.nodeType&&u.L.matchNode(c,"env",l.v._XML_NAMESPACE.XHTML))for(T=c.firstChild;null!=T;T=T.nextSibling)if(4==T.nodeType||3==T.nodeType)for(L in"string"==typeof(k=T.nodeValue)&&(k=JSON.parse(k)),D=WebSquare.WebSquareparser.getAttribute(c,"variable")||"env",i.scope)i.scope[L][D]=k;case 54:c=c.nextSibling,t.next=8;break;case 57:s||l.v.executePointScript(3),t.next=62;break;case 60:return alert(WebSquare.language.getMessage("E_Parser_MoreThanOneHeadError",n.length)),t.abrupt("return",!1);case 62:t.next=67;break;case 64:t.prev=64,t.t1=t.catch(1),h.w.printStackTrace(t.t1);case 67:return t.abrupt("return",!0);case 68:case"end":return t.stop()}}),t,null,[[1,64]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),x.WebSquareParser.prototype.parseBody=function(t){try{var e=u.L.getElementsByTagName(t,"body",l.v._XML_NAMESPACE.XHTML);if(1==e.length){var i=e[0].getAttribute("style");null!=i&&(a.x.WebSquaredoc.bodyStyle=i.value),a.x.WebSquaredoc.body=e[0]}else alert(WebSquare.language.getMessage("E_Parser_MoreThanOneBodyError",e.length))}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseActions=function(t){},x.WebSquareParser.prototype.findBindElement=function(t){try{return null==t.attributes?null:null!=t.attributes.getNamedItem("bind")?WebSquare.ModelUtil.getBind(t.attributes.getNamedItem("bind").value):null}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseLabel=function(t){t instanceof v.D&&(t=t._element);var e=u.L.getElementsByTagName(t,"label",l.v._XML_NAMESPACE.XFORMS);if(null==e[0])return null;var i=e[0],o=this.findBindElement(i),s="",r=i.firstChild;if(i.childNodes.length>1)for(var a=0;a<i.childNodes.length;a++)if(""!=i.childNodes[a].nodeValue.wq_trim()){r=i.childNodes[a];break}s=void 0!==r&&null!=r?r.nodeValue:"";var n={};return n.value=null!=o?WebSquare.ModelUtil.getInstanceValue(o.xpath):s,n},x.WebSquareParser.prototype.parseChoices=function(t,e){var i=[];if(e=e||"xf",t){t instanceof v.D&&(t=t._element);try{var o=t.nodeName;o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}var s="xf"==e?l.v._XML_NAMESPACE.XFORMS:l.v._XML_NAMESPACE.W2,r=u.L.findNode(t,".//*['choices'=local-name()]['"+s+"'=namespace-uri()]");if(r){var a=u.L.findNodes(r,".//*['item'=local-name()]['"+s+"'=namespace-uri()]");if(a)for(var n=0;n<a.length;++n){var h=a[n],d="",c=u.L.findNode(h,"./*['label'=local-name()]['"+s+"'=namespace-uri()]");c&&(d=u.L.getValue(c,"text()"));var p="",g=u.L.findNode(h,"./*['value'=local-name()]['"+s+"'=namespace-uri()]");g&&(p=u.L.getValue(g,"text()")),i.push({label:d,value:p})}}}return i},x.WebSquareParser.prototype.parseItemset=function(t,e){var i={nodeset:"",label:"",value:""};try{if(t){t instanceof v.D&&(t=t._element),e=e||"xf";try{var o=t.nodeName;o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}var s,r="xf"==e?l.v._XML_NAMESPACE.XFORMS:l.v._XML_NAMESPACE.W2,a=u.L.findNode(t,"*['choices'=local-name()]['"+r+"'=namespace-uri()]");if(a){if(s=u.L.findNode(a,"*['itemset'=local-name()]['"+r+"'=namespace-uri()]")){var n=u.L.getValue(s,"@nodeset"),d=u.L.findNode(s,"*['label'=local-name()]['"+r+"'=namespace-uri()]"),c=u.L.findNode(s,"*['value'=local-name()]['"+r+"'=namespace-uri()]"),p=u.L.getValue(d,"@ref"),g=u.L.getValue(c,"@ref");i.nodeset=n,i.label=p,i.value=g}}else if(s=u.L.findNode(t,"*['itemset'=local-name()]['"+r+"'=namespace-uri()]")){n=u.L.getValue(s,"@nodeset"),d=u.L.findNode(s,"*['label'=local-name()]['"+r+"'=namespace-uri()]"),c=u.L.findNode(s,"*['value'=local-name()]['"+r+"'=namespace-uri()]"),
p=u.L.getValue(d,"@ref"),g=u.L.getValue(c,"@ref");i.nodeset=n,i.label=p,i.value=g}}}catch(t){h.w.printStackTrace(t)}return i},x.WebSquareParser.prototype.parseAttribute=function(t){try{return WebSquare.Parser.parseAttribute(t)}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseEventAttributes=function(t){for(var e={},i=t.attributes,o=0;o<i.length;o++)if(u.L.matchNode(i[o],"event",l.v._XML_NAMESPACE.EVENTS)){var s=WebSquare.nodeValueDeprecated?i[o].value:i[o].nodeValue;(r=s.indexOf("("))>-1&&(s=s.substring(0,r)),e.eventName=s.toLowerCase()}else{var r;(r=i[o].nodeName.indexOf(":"))>-1?e[i[o].nodeName.substring(r+1)]=WebSquare.nodeValueDeprecated?i[o].value:i[o].nodeValue:e[i[o].nodeName]=WebSquare.nodeValueDeprecated?i[o].value:i[o].nodeValue}for(var a=t.firstChild;null!=a;a=a.nextSibling)if(4==a.nodeType||3==a.nodeType){e._text=a.nodeValue;break}return e},x.WebSquareParser.prototype.getAttribute=function(t,e,i){var o=t.getAttribute(e);return null==o||""==o?void 0!==i?i:"":o},x.WebSquareParser.prototype.attributesItem=function(t){this.name=t.name,this.ref=t.ref,this.value=t.value},x.WebSquareParser.prototype.attributesItem.prototype.setValue=function(t){this.value=t},x.WebSquareParser.prototype.attributesItem.prototype.getValue=function(){return this.value},x.WebSquareParser.prototype.parseWorkflows=function(t,e){try{for(var i=u.L.getElementsByTagName(t,"workflow",l.v._XML_NAMESPACE.W2),o=[],s=0;s<i.length;s++)o.push(this.parseWorkflow(i[s],t,e));return o}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseWorkflow=function(t,e,i){try{var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"resolveCallback",""),r=WebSquare.WebSquareparser.getAttribute(t,"rejectCallback",""),a=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==a&&(a=l.v.getConfiguration("/WebSquare/workflow/processMsg/@value"));for(var n=u.L.getElementsByTagName(t,"step",l.v._XML_NAMESPACE.W2),d=[],c=0;c<n.length;c++){for(var p=n[c],g={},m=0;m<p.attributes.length;m++)WebSquare.nodeValueDeprecated?g[p.attributes[m].name]=p.attributes[m].value:g[p.attributes[m].nodeName]=p.attributes[m].nodeValue;d.push(g)}var f=o,b=null;i&&i.options&&i.options.scope&&(o=i.id+"_"+f,b=i.id);var y=new WebSquare.Model.Workflow(e,t,o,s,r,a,d,b);return i&&i.options&&i.options.scope&&(i.scope[f]=y),l.v.useWorkflowGlobal&&(window[y.id]=y),y}catch(t){h.w.printStackTrace(t)}},x.WebSquareParser.prototype.parseUDC2=function(){var t=(0,g.Z)(f().mark((function t(e){var i,o,s,r,a,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=1,i=u.L.getElementsByTagName(e,"head")[0],o=u.L.getElementsByTagName(i,"require",l.v._XML_NAMESPACE.W2),s=0;case 5:if(!(s<o.length)){t.next=18;break}if(r=o[s],(a=r.getAttribute("as")||r.getAttribute("componentName"))&&"page"===r.getAttribute("type")){t.next=10;break}return t.abrupt("continue",15);case 10:if(null!=l.v.udcObj[a]){t.next=15;break}return n=l.v.getPageURL(r.getAttribute("src")),t.next=14,u.L.load(n);case 14:l.v.udcObj[a]=t.sent;case 15:s++,t.next=5;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})));return function(e){return t.apply(this,arguments)}}(),x.parseExternalScript=function(){var t=(0,g.Z)(f().mark((function t(e){var i,o,s,r,a,d,u,c,p,g;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=e.uri){t.next=5;break}return t.abrupt("return");case 5:if(o=e.cache,s=e.frameObj,r=e.pageInherit,a=e.lazy,d=!1,null!=o&&""!==o||(o=l.v.getConfiguration("/WebSquare/spa/scriptCache/@value")),e.scopeVariable&&s&&s.options.scope&&(s.scope[e.scopeVariable]={},o="false"),u=l.v._getMsaOption(s),c=l.v.getURL(i,u),p=c,e.scopeExternal&&(p+="_scope_"+s.id),
null==o||"false"!=o.toLowerCase()?(void 0!==WebSquare.scriptCachedList[p]&&null!==WebSquare.scriptCachedList[p]||("false"===l.v.getConfiguration("/WebSquare/spa/scriptCache/@value")?WebSquare.scriptCachedList[p]=0:WebSquare.scriptCachedList[p]=1),WebSquare.scriptCachedList[p]>1?(d=!0,WebSquare.scriptCachedList[p]++):"true"==o.toLowerCase()&&WebSquare.scriptCachedList[p]++):WebSquare.scriptCachedList[p]=0,d){t.next=36;break}if(!s){t.next=35;break}if(!e.scopeExternal){t.next=32;break}return t.prev=20,t.next=23,l.v.loadAsync(c);case 23:(g=t.sent)&&(g=s.options.scope?b.D.scopingFuncBody(g,s.id,!0):b.D.scopingFuncBody(g,null,!0),n.d.globalEval(g)),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(20),h.w.printStackTrace(t.t0);case 30:t.next=33;break;case 32:"defer"==a?"executed"==WebSquare.scriptSectionExcuteFlag?s.lazyImportsArr.push(c):WebSquare.lazyImportsArr.push(c):r?WebSquare.pageInheritScriptArr.push(c):WebSquare.externalScriptArr.push(c);case 33:t.next=36;break;case 35:"defer"==a?WebSquare.lazyImportsArr.push(c):r?WebSquare.pageInheritScriptArr.push(c):WebSquare.externalScriptArr.push(c);case 36:t.next=41;break;case 38:t.prev=38,t.t1=t.catch(1),h.w.printStackTrace(t.t1);case 41:case"end":return t.stop()}}),t,null,[[1,38],[20,27]])})));return function(e){return t.apply(this,arguments)}}(),x.parseAttribute=function(t){try{var e,i={};e=t instanceof v.D?t._element:t;var o,s=!1;if(e.T===v.D.type.element&&(s=!0),o=null==e.A?s||e.nodeType!==v.D.type.document?e.attributes:e.documentElement.attributes:s||e.nodeType!==v.D.type.document?e.A:e.documentElement.attributes,s){for(var r in o)if(o.hasOwnProperty(r)){var a=o[r];"class"===r?i.className=a:"string"==typeof a&&""===a.wq_trim()||(i[r]=a)}}else for(var n=0,l=o.length;n<l;n++){var d=o[n],u=d.name;a=d.value;"class"==u?i.className=a:"string"==typeof a&&""===a.wq_trim()||(i[u]=a)}return i}catch(t){h.w.printStackTrace(t)}},x.parseEvent=function(t,e){try{var i,o=[];if(t instanceof v.D?(i=t._elementType,t=t._element):i=l.v.isXML(t)?"xml":"json","json"===i){o=[];var s=y.h.getAttribute(t,"id"),r=t.N,a=null;null==s||""==s?(a="",s=""):(a=s,s+=".");for(var n=y.h.getChildNodes(t),d=0;d<n.length;d++){var c=n[d],p="";if("script"===c.N){var g={};if(!(p=(_=c.A)["ev:event"]))continue;var m=_.disabled,f=0,S=v.D.api.getCDataNodeValue(c),C="( e )";(D=p.indexOf("("))>-1&&(C=p.substring(D),p=p.substring(0,D)),"function"==typeof S?(g.handler=S,g.scope=e&&e.id,g._old=!0):(S=e&&e.options.scope?b.D.scopingFuncBody(S,e.id,!0):b.D.scopingFuncBody(S,null,!0),g.handler="function"+C+'{ try {["'+s+p.toLowerCase()+'"]; function '+a+"_"+f+++"() {}; "+S+' } catch(eee) {eee.componentID =  "'+a+'"; eee.eventName = "'+p.toLowerCase()+'"; eee.componentName = "'+r+'"; exception.printStackTrace(eee);} }'),o.push(new w.XmlEvent(p.toLowerCase(),"script",g,m))}}}else{s=t.getAttribute("id"),r=t.nodeName,a=null;null==s||""==s?(a="",s=""):(a=s,s+=".");for(c=t.firstChild;null!=c;c=c.nextSibling){p="";var x=u.L.nodeInfoObj(c).nodeName;if(1==c.nodeType&&"script"==x){g={};for(var _=c.attributes,I=0;I<_.length;I++){var T=_[I];if(u.L.matchNode(T,"event",l.v._XML_NAMESPACE.EVENTS)){p=WebSquare.nodeValueDeprecated?T.value:T.nodeValue;break}}m=c.getAttribute("disabled"),f=0;for(var k=c.firstChild;null!=k;k=k.nextSibling)if(4==k.nodeType){var D;C="( e )";(D=p.indexOf("("))>-1&&(C=p.substring(D),p=p.substring(0,D)),"function"==typeof(S=k.nodeValue)?(g.handler=S,g.scope=e&&e.id):(S=e&&e.options.scope?b.D.scopingFuncBody(S,e.id,!0):b.D.scopingFuncBody(S,null,!0),g.handler="function"+C+'{ try {["'+s+p.toLowerCase()+'"]; function '+a+"_"+f+++"() {}; "+S+' } catch(eee) {eee.componentID =  "'+a+'"; eee.eventName = "'+p.toLowerCase()+'"; eee.componentName = "'+r+'"; exception.printStackTrace(eee);} }'),o.push(new w.XmlEvent(p.toLowerCase(),"script",g,m));break}}}}return 0==o.length?null:o}catch(t){h.w.printStackTrace(t)}},x.parseAttributesNode=function(t){try{var e;t instanceof v.D?(e=t._elementType,t=t._element):e=l.v.isXML(t)?"xml":"json"
;var i=null,o=[];if("json"===e){for(var s=y.h.getChildNodes(t),r=0;r<s.length;r++)if("w2:attributes"===s[r].N){i=s[r];break}if(i){var a=y.h.getChildNodes(i);for(r=0;r<a.length;r++)if(1===a[r].T){var n={name:d=y.h.dropNS(a[r].N),ref:y.h.getAttribute(a[r],"ref"),value:y.h.getTextNodeValue(a[r])};o.push(n),o[d]=n}}}else{for(r=0;r<t.childNodes.length;r++)if("w2:attributes"==t.childNodes[r].nodeName){i=t.childNodes[r];break}if(i)for(a=i.childNodes,r=0;r<a.length;r++)if(1===a[r].T){var d;n={name:d=u.L.getLocalName(a[r]),ref:a[r].getAttribute("ref"),value:u.L.getTextNodeValue(a[r])};o.push(n),o[d]=n}}return o}catch(t){h.w.printStackTrace(t)}};var _=function(t,e,i,o,s){try{this.xmlNode=t,this.instances=e,this.binds=i,this.submissions=o,this.element=t,this.workflows=s}catch(t){h.w.printStackTrace(t)}};_.prototype.rebuild=function(t,e){try{var i=WebSquare.ModelUtil.getInstanceByXPath(e);if(WebSquare.xml.hasChildElement(i.xmlNode))if("string"==typeof t){var o=WebSquare.xml.getFirstChildElement(i.xmlNode);""==(e=WebSquare.ModelUtil.filterInstanceFunction(e))&&(e=".");var s=(a=WebSquare.xml.createNode(o,e)).ownerDocument.createTextNode(t);WebSquare.xml.appendChild(a,s),WebSquare.WebSquaredoc.unrender(e,null,i.id)}else{var r=t.documentElement.nodeName;o=WebSquare.xml.getFirstChildElement(i.xmlNode);""==(e=WebSquare.ModelUtil.filterInstanceFunction(e))?e=".":r=e+"/"+r;for(var a,n=(a=WebSquare.xml.createNode(o,e)).firstChild;null!=n;n=n.nextSibling)if(n.nodeName==t.documentElement.nodeName){a.removeChild(n);break}WebSquare.xml.appendChild(a,t.documentElement),WebSquare.WebSquaredoc.unrender(r,null,i.id)}else alert(WebSquare.language.getMessage("E_Model_NoChildNodeOfInstance"))}catch(t){h.w.printStackTrace(t)}},_.prototype.refresh=function(t,e){try{for(var i=0;i<WebSquare.WebSquaredoc.boundElement.length;i++){var o=WebSquare.WebSquaredoc.boundElement[i].id,s=WebSquare.core.getComponentById(o);void 0!==s&&(void 0!==s.hasbeenrendered&&null!=s.hasbeenrendered&&0==s.hasbeenrendered&&(!s.modelControl.useRef&&s.modelControl.ref,s.hasbeenrendered=!0,s.refresh()))}for(var r in WebSquare.WebSquaredoc.itemsetElement){var a=WebSquare.WebSquaredoc.itemsetElement[r].id,n=WebSquare.core.getComponentById(a);if(void 0!==n&&(void 0!==n.itemsetrendered&&null!=n.itemsetrendered&&0==n.itemsetrendered)){!n.modelControl.useRef&&n.modelControl.ref;var l=!0;if(e&&n.modelControl.useItemset){var d=n.modelControl.itemsetObj.nodeset;e!==d&&!1===WebSquare.ModelUtil.isPartialMatchedXPath(e,d)&&(l=!1)}!0===l&&(n.itemsetrendered=!0,n.refreshItemset(t))}}for(var u in WebSquare.WebSquaredoc.refElement){var c=WebSquare.WebSquaredoc.refElement[u].id,p=WebSquare.core.getComponentById(c);void 0!==p&&(void 0!==p.hasbeenrendered&&null!=p.hasbeenrendered&&0==p.hasbeenrendered&&(!p.modelControl.useRef&&p.modelControl.ref,p.hasbeenrendered=!0,p.refresh()))}}catch(t){h.w.printStackTrace(t)}},_.Instance=function(t,e,i){try{this.xmlNode=t,this.document=e,this.source=i,this.id=t.getAttribute("id"),this.scope_id=t.getAttribute("scope_id")}catch(t){h.w.printStackTrace(t)}},_.Bind=function(t,e,i,o,s){try{this.xmlNode=t,this.type=e,this.xpath=i,this.properties=null!=o?o:{},this.id=s}catch(t){h.w.printStackTrace(t)}},_.Submission=function(t){try{this.xmlNode=t.element,this._pluginName="submission",this.parentElement=t.parentElement,this.id=t.id,this.org_id=t.org_id,this.bind=t.bind,this.action=t.action,this.mode=t.mode,this.method=t.method,this.mediatype=t.mediatype,this.accept=t.accept,this.encoding=t.encoding,this.ref=t.ref,this.target=t.target,this.replace=t.replace,this.instance=t.instance,this.customHandler=t.customHandler,this.errorHandler=t.errorHandler,this.processMsg=t.processMsg,this.soapaction=t.soapaction,this.startTime=null,this.endTime=null,this.processStatus=0,this.singleMode=t.singleMode,this.hideProcessMsg=t.hideProcessMsg,this.abortTrigger=t.abortTrigger,this.scope_id=t.scope_id,this.withCredentials=t.withCredentials,this.useModal=t.useModal,
this.preSubmitFunction=t.preSubmitFunction,this.linkedObj=[],this.requestHeader={},this.webtopRef=t.webtopRef,this.userData1=t.userData1,this.userData2=t.userData2,t.submitHandler&&(this.submitHandler=t.submitHandler),t.submitDoneHandler&&(this.submitDoneHandler=t.submitDoneHandler),t.submitErrorHandler&&(this.submitErrorHandler=t.submitErrorHandler),t.submitTimeoutHandler&&(this.submitTimeoutHandler=t.submitTimeoutHandler),null!=t.xmlEvents&&t.xmlEvents.length>0&&WebSquare.event.addUserEvents(this,t.xmlEvents),this.timeout=t.timeout,this.setRequestData=function(t){this.requestData=t},this.setRequestHeader=function(t){this.requestHeader=t},this.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return h.w.printStackTrace(t,null,this),null}},this.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return h.w.printStackTrace(t,null,this),window}},WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/notRecommended/warningSync/@value"))&&"synchronous"===this.mode&&alert(WebSquare.language.getMessage("E_deprecated_sync",this.id))}catch(t){h.w.printStackTrace(t)}},_.Workflow=function(t,e,i,o,s,r,a,n){try{this.xmlNode=e,this.parentElement=t,this.id=i,this.scope_id=n,this.resolveCallback=o||null,this.rejectCallback=s||null,this.processMsg=r,this.step=a,this.promiseStatus=null,this.promiseValue=null,this.conditionStatus=!0,this.reject=function(t){this.promiseStatus="REJECT",this.promiseValue=t||"REJECT"},this.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return h.w.printStackTrace(t,null,this),null}},this.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return h.w.printStackTrace(t,null,this),window}}}catch(t){h.w.printStackTrace(t)}};var I=__webpack_require__(7537),T=__webpack_require__(484),k={DefaultXML2JSONString:function(t,e){var i=[];return WebSquare.xml.isDocumentString(t)&&(t=WebSquare.xml.parse(t)),WebSquare.xml.isDocument(t)&&WebSquare.json.XMLparseForJSON(t.documentElement,i,!1),i.join("")},XML2JSONString:function(t,e){var i=WebSquare.core.getConfiguration("/WebSquare/json/xml2jsonFunction/@value");if(i){var o=WebSquare.util.getGlobalFunction(i);"function"==typeof o&&(WebSquare.json.XML2JSONString=o),WebSquare.json.XML2JSONString?WebSquare.logger.printLog("XML2JSON conversion rule exists in config.xml. [/WebSquare/json/@xml2jsonFunction]"):WebSquare.json.XML2JSONString=WebSquare.json.DefaultXML2JSONString}else WebSquare.json.XML2JSONString=WebSquare.json.DefaultXML2JSONString;return WebSquare.json.XML2JSONString(t,e)},parseType:function(t){if(t&&t.childNodes&&t.childNodes.length>0){for(var e={},i=0,o=0;o<t.childNodes.length;o++)if(1==t.childNodes[o].nodeType){if(1==e[t.childNodes[o].nodeName])return"array";e[t.childNodes[o].nodeName]=!0,i++}return 0==i?"string":"object"}return"string"},XMLparseForJSON:function(t,e,i){var o=t.getAttribute("type");if(o||(o=WebSquare.json.parseType(t)),i&&(e.push('"'),e.push(t.nodeName),e.push('" : ')),"object"===o){var s=!0;e.push("{");for(var r=0;r<t.childNodes.length;r++)1==t.childNodes[r].nodeType&&(s?s=!1:e.push(", "),e.push(WebSquare.json.XMLparseForJSON(t.childNodes[r],e,!0)));e.push("}")}else if("array"===o){s=!0;e.push("[");for(r=0;r<t.childNodes.length;r++)1==t.childNodes[r].nodeType&&(s?s=!1:e.push(", "),e.push(WebSquare.json.XMLparseForJSON(t.childNodes[r],e,!1)));e.push("]")}else"number"===o?t.childNodes&&t.childNodes[0].nodeValue&&e.push(t.childNodes[0].nodeValue):"true"===o?e.push("true"):"false"===o?e.push("false"):"null"===o?e.push("null"):(e.push('"'),t.childNodes&&t.childNodes[0]&&e.push(WebSquare.xml.decode(t.childNodes[0].nodeValue).wq_replaceAll("\\","\\\\").wq_replaceAll('"','\\"').wq_replaceAll("\n","\\n")),e.push('"'))},DefaultJSON2XML:function(t,e){var i
;i=t.constructor===String?JSON.parse(t):t;var o=[],s=-1;for(var r in i.constructor===Array?(s=1,o.push('<array type="array">')):"object"==(0,T.Z)(i)&&(s=2,o.push('<object type="object">')),i)WebSquare.json._recursiveJSON2XML(o,i[r],r,s);i.constructor===Array?o.push("</array>"):"object"==(0,T.Z)(i)&&o.push("</object>");var a=o.join("");return WebSquare.xml.parse(a)},DefaultJSON2XMLString:function(t,e){var i;i=t.constructor===String?JSON.parse(t):t;var o=[],s=-1;for(var r in i.constructor===Array?(s=1,o.push('<array type="array">')):"object"==(0,T.Z)(i)&&(s=2,o.push('<object type="object">')),i)WebSquare.json._recursiveJSON2XML(o,i[r],r,s);return i.constructor===Array?o.push("</array>"):"object"==(0,T.Z)(i)&&o.push("</object>"),o.join("")},JSON2XML:function(t,e){var i=WebSquare.core.getConfiguration("/WebSquare/json/json2xmlFunction/@value");if(i){var o=WebSquare.util.getGlobalFunction(i);"function"==typeof o&&(WebSquare.json.JSON2XML=o),WebSquare.json.JSON2XML?WebSquare.logger.printLog("JSON2XML conversion rule exists in config.xml. [/WebSquare/json/@json2xmlFunction]"):WebSquare.json.JSON2XML=WebSquare.json.DefaultJSON2XML}else WebSquare.json.JSON2XML=WebSquare.json.DefaultJSON2XML;return WebSquare.json.JSON2XML(t,e)},JSON2XMLString:function(t,e){var i=WebSquare.core.getConfiguration("/WebSquare/json/json2xmlFunction/@value");if(i){var o=WebSquare.util.getGlobalFunction(i);"function"==typeof o&&(WebSquare.json.JSON2XMLString=o),WebSquare.json.JSON2XMLString?WebSquare.logger.printLog("JSON2XMLString conversion rule exists in config.xml. [/WebSquare/json/@json2xmlFunction]"):WebSquare.json.JSON2XMLString=WebSquare.json.DefaultJSON2XMLString}else WebSquare.json.JSON2XMLString=WebSquare.json.DefaultJSON2XMLString;return WebSquare.json.JSON2XMLString(t,e)},JSONExtend:function(){for(var t={},e=0,i=arguments.length,o=function(e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&("[object Object]"===Object.prototype.toString.call(e[i])?t[i]=WebSquare.json.JSONExtend(t[i],e[i]):t[i]=e[i])};e<i;e++){var s=arguments[e];o(s)}return t},_recursiveJSON2XML:function(t,e,i,o){var s='<object type="object">',r='<array type="array">',a="</object>",n="</array>";if(null==e)t.push("<"+i+' type="'+e+'"/>');else if("string"==typeof e)1==o?t.push("<value>"+WebSquare.xml.encode(e)+"</value>"):2==o&&t.push("<"+i+">"+WebSquare.xml.encode(e)+"</"+i+">");else if("number"==typeof e)1==o?t.push('<value type="number">'+e+"</value>"):2==o&&t.push("<"+i+' type="number">'+e+"</"+i+">");else if("boolean"==typeof e)1==o?t.push('<value type="'+e+'"/>'):2==o&&t.push("<"+i+' type="'+e+'"/>');else if(e.constructor===Array){for(var l in isNaN(parseInt(i))?(o=1,t.push("<"+i+' type="array">')):e.constructor!==Array&&"object"==(0,T.Z)(e)?(o=2,t.push(s)):(o=1,t.push(r)),e)WebSquare.json._recursiveJSON2XML(t,e[l],l,o);isNaN(parseInt(i))?(o=1,t.push("</"+i+">")):e.constructor!==Array&&"object"==(0,T.Z)(e)?t.push(a):t.push(n)}else if("object"==(0,T.Z)(e)){for(var l in e.constructor===Array&&isNaN(parseInt(i))?(o=1,t.push("<"+i+' type="array">')):e.constructor===Array?(o=1,t.push(r)):isNaN(parseInt(i))?(o=2,t.push("<"+i+' type="object">')):(o=2,t.push(s)),e)WebSquare.json._recursiveJSON2XML(t,e[l],l,o);e.constructor===Array&&isNaN(parseInt(i))?t.push("</"+i+">"):e.constructor===Array?t.push(n):isNaN(parseInt(i))?t.push("</"+i+">"):t.push(a)}}},D={api:{},comp:{},attributeMapInfo:{},childToParentRelation:{},parentToChildRelation:{},childToParentRef:{},parentToChildRef:{},options:{useConfig:"true",baseNode:"map",attributeMap:""},activated:!1,stopBroadCast:!1,stopBroadCastComp:[]};D.stopBroadCastComp._wq_add=function(t){for(var e=!1,i=0;i<this.length;i++)if(this[i]===t){e=!0;break}e||this.push(t)},D.api.create=function(t,e){try{var i,o,s;if(void 0!==e&&null!=e||(e={}),"string"==typeof t){if(null==t.match("xmlns:w2=")&&(t=t.replace(">"," xmlns:w2='http://www.inswave.com/websquare'>")),!(t=u.L.parse(t,!0)))return;i=(t=t.documentElement).tagName.replace("w2:","")}else{
var r=l.v.isXML(t);i=r?t.tagName.replace("w2:",""):t.type,t.elementType=r?"XML":"JSON"}if(e.scope_obj){var a=b.D.getComponentById(e.scope_obj);a&&(s=a.uuid)}switch(i){case"dataList":o=new D.dataList(null,null,t,i,s);break;case"dataMap":o=new D.dataMap(null,null,t,i,s);break;case"linkedDataList":o=new D.linkedDataList(null,null,t,i,s);break;case"aliasDataList":o=new D.aliasDataList(null,null,t,i,s);break;case"aliasDataMap":o=new D.aliasDataMap(null,null,t,i,s);break;case"aliasLinkedDataList":o=new D.aliasLinkedDataList(null,null,t,i,s)}if(o){D.api.addChild(o);var n=D.parentToChildRef[o.id];if(n)for(var d in n)if(n[d]){var c=b.D.getComponentById(d);c.modelControl.dataCollectionBinding(c.options.ref)}}}catch(t){h.w.printStackTrace(t)}},D.api.createObjects=function(t){try{for(var e=0;e<t.length;e++)D.api.create(t[e])}catch(t){h.w.printStackTrace(t)}},D.api.remove=function(t,e){try{if(void 0!==e&&null!=e||(e={}),e.scope_obj){var i=b.D.getComponentById(e.scope_obj);if(!i)return void d.k.printLog("[$p.data.remove error] cannot find wframe["+i.id+"]");try{t=i.getObj(t).id}catch(e){return void d.k.printLog("[$p.data.remove error] cannot find ["+t+"] in wframe["+i.id+"]")}}var o;if(null==(o=e.uuid&&a.x.idCache[e.uuid]?a.x.idCache[e.uuid]:D.comp[t])){if(!(t.indexOf("??")>=0&&a.x.idCache[a.x.idToUUID[t]]))return;o=a.x.idCache[a.x.idToUUID[t]]}if("function"==typeof o.finalize)try{o.finalize()}catch(t){d.k.printLog("[ERROR] : dataCollection.api.remove - finalize : "+o.id)}if(o.scope_obj&&o.scope_obj.scope&&o.scope_obj.scope[o.org_id]&&delete o.scope_obj.scope[o.org_id],window[a.x.noConflict].comp[o.id]=null,window[a.x.noConflict].data[o.id]=null,delete window[a.x.noConflict].comp[o.id],delete window[a.x.noConflict].data[o.id],a.x.idToUUID[o.id]=null,delete a.x.idToUUID[o.id],a.x.idCache[o.uuid]=null,delete a.x.idCache[o.uuid],window[o.id]&&(window[o.id]=null),o.options)for(var s=o.getOption("pluginName"),r=a.x.componentsCache[s]||a.x.componentsCache[o._wTagName]||[],n=r.length-1;n>=0;n--)r[n]===o.uuid&&r.splice(n,1);for(var l in o.event&&o.event.clearCache(),o)try{"function"==typeof o[l]?o[l]=function(){}:delete o[l]}catch(t){delete o[l]}o._removed=!0,delete D.comp[t],delete D.parentToChildRelation[t],delete D.parentToChildRef[t]}catch(t){h.w.printStackTrace(t)}},D.api.addChild=function(t){try{D.comp[t.id]=t}catch(t){h.w.printStackTrace(t)}},D.api.addRelation=function(t,e){try{D.childToParentRelation[t]=e,D.parentToChildRelation[e]||(D.parentToChildRelation[e]={}),D.parentToChildRelation[e][t]||(D.parentToChildRelation[e][t]=!0,D.comp[e]&&D.comp[e]._addRelation(t))}catch(t){h.w.printStackTrace(t)}},D.api.addRefRelation=function(t,e){try{D.childToParentRef[t]=e,D.parentToChildRef[e]||(D.parentToChildRef[e]={}),D.parentToChildRef[e][t]||(D.parentToChildRef[e][t]=!0,D.comp[e]&&D.comp[e]._addRefRelation(t))}catch(t){h.w.printStackTrace(t)}},D.api.setRefValue=function(t,e,i){try{var o=D.api.getObj(t.dataComp);if(o)switch(o.initializeType){case"linkedDataList":case"dataList":"number"==typeof o.rowPosition&&o.setCellData(o.rowPosition,t.colID,e,i);break;case"dataMap":!o.firstSetting[t.key]&&o.options.firstSet&&""==o.get(t.key)&&o.setOriginal(t.key,o.get(t.key)),o.set(t.key,e)}}catch(t){h.w.printStackTrace(t)}},D.api.getRefValue=function(t){try{var e=D.api.getObj(t.dataComp);if(e)switch(e.initializeType){case"linkedDataList":case"dataList":return e.getCellData(e.rowPosition,t.colID);case"dataMap":return e.get(t.key)}}catch(t){h.w.printStackTrace(t)}},D.api.get=function(t,e,i){try{if(void 0!==i&&null!=i||(i={}),"string"==typeof e&&e){e=JSON.parse(e);for(var o=0;o<e.length;o++){var s=e[o];s.initializeType&&(e[o]=s.id)}}switch(t.toUpperCase()){case"JSON":return D.api._getJSON(e,i);case"ARRAY":return D.api._getARRAY(e,i);case"XML":return D.api._getXML(e,i)}}catch(t){h.w.printStackTrace(t)}},D.api._getJSON=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.scope_obj||null,o={};if(t&&1==t.length&&e&&e.singleMode){var s=t[0],r={}
;if("string"==typeof s){if(null!=i)null!=(c=b.D.getComponentById(i).scope[s])&&(s=c.id);if(g=D.comp[s]){var n=g.getOption("JSONPath"),l=g.id;switch(null!=i&&(l=g.org_id||g.id),n=n?n+"."+l:l,g.initializeType){case"dataMap":r=g.getRefJSON(e);break;case"dataList":case"linkedDataList":r=g.getRefAllJSON(e);break;case"default":r=D.api.JSONPathEvaluator(r,n)}}}else{if(null!=i)null!=(c=b.D.getComponentById(i).scope[s.id])&&(s.id=c.id);if(g=D.comp[s.id]){var d=a.x.extend({},e);"object"===(0,T.Z)(s.includeColumns)&&null!=s.includeColumns&&s.includeColumns.constructor===Array&&(d.includeColumns=s.includeColumns);n=g.getOption("JSONPath"),l=g.id;switch(null!=i&&(l=g.org_id||g.id),n=n?n+"."+(s.key||l):s.key||l,g.initializeType){case"dataMap":r=D.api._getMapByOption("JSON",s,d);break;case"dataList":case"linkedDataList":r=D.api._getListByOption("JSON",s,d);break;case"default":r=D.api.JSONPathEvaluator(r,n)}}}return r}if(t)for(var u=0;u<t.length;u++){r={};if("string"==typeof(s=t[u])){if(null!=i)null!=(c=b.D.getComponentById(i).scope[s])&&(s=c.id);if(g=D.comp[s]){n=g.getOption("JSONPath"),l=g.id;switch(null!=i&&(l=g.org_id||g.id),n=n?n+"."+l:l,r=D.api.JSONPathEvaluator(r,n),g.initializeType){case"dataMap":y.h.setJSONByPath(r,n,g.getRefJSON(e));break;case"dataList":case"linkedDataList":y.h.setJSONByPath(r,n,g.getRefAllJSON(e))}}}else if("object"==(0,T.Z)(s)){var c;if(null!=i)null!=(c=b.D.getComponentById(i).scope[s.id])&&(s.id=c.id);if(g=D.comp[s.id]){d=a.x.extend({},e);"object"===(0,T.Z)(s.includeColumns)&&null!=s.includeColumns&&s.includeColumns.constructor===Array&&(d.includeColumns=s.includeColumns);n=g.getOption("JSONPath"),l=g.id;switch(null!=i&&(l=g.org_id||g.id),n=n?n+"."+(s.key||l):s.key||l,r=D.api.JSONPathEvaluator(r,n),g.initializeType){case"dataMap":y.h.setJSONByPath(r,n,D.api._getMapByOption("JSON",s,d));break;case"dataList":case"linkedDataList":y.h.setJSONByPath(r,n,D.api._getListByOption("JSON",s,d))}}}o=k.JSONExtend(o,r)}else for(var p in D.comp){var g=D.comp[p];if(null!=i){if(!g.scope_obj)continue;if(g.scope_obj.id!==i)continue}else if(!0===e.skipWFrame&&g.scope_obj&&a.x.idCache[g.scope_obj.uuid]===g.scope_obj)continue;n=g.getOption("JSONPath"),l=g.id;switch(null!=i&&(l=g.org_id||g.id),n=n?n+"."+l:l,o=D.api.JSONPathEvaluator(o,n),g.initializeType){case"dataMap":y.h.setJSONByPath(o,n,g.getRefJSON(e));break;case"dataList":case"linkedDataList":y.h.setJSONByPath(o,n,g.getRefAllJSON(e))}}return o}catch(t){h.w.printStackTrace(t)}},D.api._getARRAY=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.scope_obj||null;if(t&&1==t.length&&e&&e.singleMode){var o=t[0],s=null;if("string"==typeof o){if(null!=i)null!=(d=b.D.getComponentById(i).scope[o])&&(o=d.id);s=D.comp[o]}else{if(null!=i)null!=(d=b.D.getComponentById(i).scope[o.id])&&(o.id=d.id);s=D.comp[o.id],"object"===(0,T.Z)(o.includeColumns)&&null!=o.includeColumns&&o.includeColumns.constructor===Array&&(e.includeColumns=o.includeColumns)}if("dataMap"==s.initializeType)return s.getJSON(e);if("dataList"==s.initializeType||"linkedDataList"==s.initializeType)return s.getAllArray(e)}var r={};if(t)for(var n=0;n<t.length;n++){if("string"==typeof(o=t[n])){if(null!=i)null!=(d=b.D.getComponentById(i).scope[o])&&(o=d.id);if(s=D.comp[o]){var l=s.id;switch(null!=i&&(l=s.org_id||s.id),s.initializeType){case"dataMap":r[l]=s.getJSON(e);break;case"dataList":case"linkedDataList":r[l]=s.getAllArray(e)}}}else if("object"==(0,T.Z)(o)){var d;if(null!=i)null!=(d=b.D.getComponentById(i).scope[o.id])&&(o.id=d.id);s=D.comp[o.id];var u,c=!1;if(s){o.key?"string"==typeof(u=o.key)&&u.indexOf(".")>=0&&(r=D.api.JSONPathEvaluator(r,u),c=!0):(u=s.id,null!=i&&(u=s.org_id||s.id));var p=a.x.extend({},e);switch("object"===(0,T.Z)(o.includeColumns)&&null!=o.includeColumns&&o.includeColumns.constructor===Array&&(p.includeColumns=o.includeColumns),s.initializeType){case"dataMap":c?y.h.setJSONByPath(r,u,D.api._getMapByOption("ARRAY",o,p)):r[u]=D.api._getMapByOption("ARRAY",o,p);break;case"dataList":case"linkedDataList":
c?y.h.setJSONByPath(r,u,D.api._getListByOption("ARRAY",o,p)):r[u]=D.api._getListByOption("ARRAY",o,p)}}}}else for(var g in D.comp){s=D.comp[g];if(null!=i){if(!s.scope_obj)continue;if(s.scope_obj.id!==i)continue}else if(!0===e.skipWFrame&&s.scope_obj&&a.x.idCache[s.scope_obj.uuid]===s.scope_obj)continue;switch(s.initializeType){case"dataMap":r[s.id]=s.getJSON(e);break;case"dataList":case"linkedDataList":r[s.id]=s.getAllArray(e)}}return r}catch(t){h.w.printStackTrace(t)}},D.api._getXML=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.scope_obj||null;if(t&&1==t.length&&e&&e.singleMode){var o=t[0];if(null!=i)null!=(p=b.D.getComponentById(i).scope[o])&&(o=p.id);if("dataMap"==(y=D.comp[o]).initializeType)return y.getXML(e);if("dataList"==y.initializeType||"linkedDataList"==y.initializeType)return y.getAllXML(e)}var s=function(t){for(var e="",i=0;i<t.length;i++)e+="<"+t[i]+">";for(i=t.length-1;i>=0;i--)e+="</"+t[i]+">";return e}(D.options.baseNode.split("/")),r=u.L.parse(s),n=r.documentElement,l=b.D.getComponentById(D.options.attributeMap);if(l)for(var d=0;d<l.getCount();d++)n.setAttribute(l.getKey(d),l.get(d));if(t)for(d=0;d<t.length;d++){var c;if("string"==typeof(o=t[d])){if(null!=i)null!=(p=b.D.getComponentById(i).scope[o])&&(o=p.id);if(y=D.comp[o])switch(c=y.id,null!=i&&(c=y.org_id||y.id),y.initializeType){case"dataMap":f=y.getXML(e);break;case"dataList":case"linkedDataList":f=y.getAllXML(e)}}else if("object"==(0,T.Z)(o)){var p;if(null!=i)null!=(p=b.D.getComponentById(i).scope[o.id])&&(o.id=p.id);if(y=D.comp[o.id]){o.key?c=o.key:(c=y.id,null!=i&&(c=y.org_id||y.id));var g=a.x.extend({},e);switch("object"===(0,T.Z)(o.includeColumns)&&null!=o.includeColumns&&o.includeColumns.constructor===Array&&(g.includeColumns=o.includeColumns),y.initializeType){case"dataMap":f=D.api._getMapByOption("XML",o,g);break;case"dataList":case"linkedDataList":f=D.api._getListByOption("XML",o,g)}}}if(f=f.documentElement?f.documentElement:f,y&&y.getOption("keyNode"))w=(w=y.getOption("keyNode")).wq_replaceAll("${key}",c),f=D.api.makeKeyNodeChildXML(y,w,f,c);u.L.appendChild(n,f)}else for(var m in D.comp){var f,y,v=(y=D.comp[m]).id;if(null!=e.scope_obj){if(!y.scope_obj)continue;if(y.scope_obj.id!==i)continue;v=y.org_id||y.id}else if(!0===e.skipWFrame&&y.scope_obj&&a.x.idCache[y.scope_obj.uuid]===y.scope_obj)continue;switch(e.id=v,y.initializeType){case"dataMap":f=y.getXML(e);break;case"dataList":case"linkedDataList":f=y.getAllXML(e)}if(f=f.documentElement?f.documentElement:f,y.getOption("keyNode")){var w=y.getOption("keyNode"),S=y.id;null!=i&&(S=y.org_id||y.id),w=w.wq_replaceAll("${key}",S),f=D.api.makeKeyNodeChildXML(y,w,f)}u.L.appendChild(n,f)}return r}catch(t){h.w.printStackTrace(t)}},D.api._getListByOption=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o,s=i.scope_obj||null,r=D.comp[e.id];if(r){e.key?o=e.key:(o=r.id,null!=s&&(o=r.org_id||r.id));var a=e.action,n=e.matchedColumn,l=e.matchedData;if("JSON"==t)switch(a){case"all":return r.getRefAllJSON(i);case"modified":return r.getRefModifiedJSON(i);case"inserted":return r.getRefInsertedJSON(i);case"deleted":return r.getRefDeletedJSON(!1,i);case"updated":return r.getRefUpdatedJSON(i);case"matched":if(n&&l)return r.getMatchedJSON(n,l,i);case"unmatched":if(n&&l)return r.getUnmatchedJSON(n,l,i);default:return r.getRefAllJSON(i)}else if("ARRAY"==t)switch(a){case"all":return r.getAllArray(i);case"modified":return r.getModifiedArray(i);case"inserted":return r.getInsertedArray(i);case"deleted":return r.getDeletedArray(!1,i);case"updated":return r.getUpdatedArray(i);case"matched":if(n&&l)return r.getMatchedArray(n,l,i);case"unmatched":if(n&&l)return r.getUnmatchedArray(n,l,i);default:return r.getAllArray(i)}else if("XML"==t)switch(i.id=o,a){case"all":return r.getAllXML(i);case"modified":return r.getModifiedXML(i);case"inserted":return r.getInsertedXML(i);case"deleted":return r.getDeletedXML(!1,i);case"updated":return r.getUpdatedXML(i);case"matched":if(n&&l)return r.getMatchedXML(n,l,!1,!1,!1,i)
;case"unmatched":if(n&&l)return r.getUnmatchedXML(n,l,!1,!1,!1,i);default:return r.getAllXML(i)}}}catch(t){h.w.printStackTrace(t)}},D.api._getMapByOption=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o,s=i.scope_obj||null,r=D.comp[e.id];if(r){if(e.key?o=e.key:(o=r.id,null!=s&&(o=r.org_id||r.id)),"JSON"==t)return r.getRefJSON(i);if("ARRAY"==t)return r.getArray(i);if("XML"==t)return i.id=o,r.getXML(i)}}catch(t){h.w.printStackTrace(t)}},D.api._getArrayEvalString=function(){try{var t="{",e=[],i=0;for(var o in D.comp)e.push(o),"linkedDataList"===D.comp[o].initializeType&&i++;for(var s=0;s<e.length;s++){var r=D.comp[e[s]];switch(r.initializeType){case"dataMap":t+='"'+r.id+'":'+r._dataList.getAllArrayEvalString(),s<e.length-1-i&&(t+=",");break;case"dataList":t+='"'+r.id+'":'+r.getAllArrayEvalString(),s<e.length-1-i&&(t+=",")}}return t+="}"}catch(t){return h.w.printStackTrace(t),{}}},D.api.getOption=function(t){try{var e=t in D.options,i=D.options.attributeMap;if(e)return D.options[t];if(i){var o=b.D.getComponentById(i);if(o.hasKey(t))return o.get(t)}return}catch(t){h.w.printStackTrace(t)}},D.api.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e="");var i=t in D.options,o=D.options.attributeMap;if(i)D.options[t]="baseNode"==t?e||"map":e;else if(o){var s=b.D.getComponentById(o);s.hasKey(t)&&s.set(t,e)}}catch(t){h.w.printStackTrace(t)}},D.api.set=function(t,e,i,o){try{if(void 0!==o&&null!=o||(o={}),"string"==typeof i&&i){i=JSON.parse(i);for(var s=0;s<i.length;s++){var r=i[s];r.initializeType&&(i[s]=r.id)}}switch(t.toUpperCase()){case"JSON":return D.api._setJSON(e,i,o);case"ARRAY":return D.api._setARRAY(e,i,o);case"XML":return D.api._setXML(e,i,o)}}catch(t){h.w.printStackTrace(t)}},D.api._setJSON=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o=i.scope_obj||null;if(e)for(var s=0;s<e.length;s++){var r=e[s];if("string"==typeof r){var a=r;if(null!=o)null!=(d=b.D.getComponentById(o).scope[r])&&(r=d.id,a=d.org_id||a);var n=D.comp[r],l=1==e.length&&i.singleMode?t:t[a];if(n)switch(n.initializeType){case"dataMap":case"dataList":n.setJSON(l)}}else if("object"==(0,T.Z)(r)){var d;if(null!=o)null!=(d=b.D.getComponentById(o).scope[r.id])&&(r.id=d.id);n=D.comp[r.id];r.key?a=r.key:(a=n.id,null!=o&&(a=n.org_id||n.id));t=t;if(1==e.length&&i.singleMode?l=t:a.indexOf(".")>-1?(l=y.h.getJSONByPath(t,a),"dataMap"===n.initializeType&&"object"===(0,T.Z)(l)&&null!=l&&l.constructor===Array&&(l=l[0])):l=t[a],n){var u="append"===r.action;switch(n.initializeType){case"dataMap":case"dataList":n.setJSON(l,u,r.includeColumns)}}}}else for(var c in t){var p=c;if(null!=o&&(p=o+"_"+c),n=D.comp[p])switch(n.initializeType){case"dataMap":case"dataList":n.setJSON(t[c])}}}catch(t){h.w.printStackTrace(t)}},D.api._setARRAY=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o=i.scope_obj||null;if(e)for(var s=0;s<e.length;s++){var r=e[s];if("string"==typeof r){var a=r;if(null!=o)null!=(d=b.D.getComponentById(o).scope[r])&&(r=d.id,a=d.org_id||a);var n=D.comp[r],l=1==e.length&&i.singleMode?t:t[a];if(n)switch(n.initializeType){case"dataMap":case"dataList":n.setArray(l)}}else if("object"==(0,T.Z)(r)){var d;if(null!=o)null!=(d=b.D.getComponentById(o).scope[r.id])&&(r.id=d.id);n=D.comp[r.id];r.key?a=r.key:(a=n.id,null!=o&&(a=n.org_id||n.id));l=1==e.length&&i.singleMode?t:t[a];if(n){var u="append"===r.action;switch(n.initializeType){case"dataMap":case"dataList":n.setArray(l,u,r.includeColumns)}}}}else for(var c in t){var p=c;if(null!=o&&(p=o+"_"+c),n=D.comp[p])switch(n.initializeType){case"dataMap":case"dataList":n.setArray(t[c])}}}catch(t){h.w.printStackTrace(t)}},D.api._setXML=function(t,e,i){try{var o=function(t){return"string"==typeof t?t:t.id};void 0!==i&&null!=i||(i={});var s=i.scope_obj||null;if(t=t.documentElement?t.documentElement:t,e&&1==e.length&&"vector"==t.nodeName){var r=o(e[0]);if(null!=s)null!=(g=b.D.getComponentById(s).scope[r])&&(r=g.id);return void((d=D.comp[r])&&d.setXML(t))}
if(e&&1==e.length&&"hastable"==t.nodeName&&!t.getAttribute("hashKey")){r=o(e[0]);if(null!=s)null!=(g=b.D.getComponentById(s).scope[r])&&(r=g.id);return void((d=D.comp[r])&&d.setXML(t))}if(e&&1==e.length&&i.singleMode){r=o(e[0]);if(null!=s)null!=(g=b.D.getComponentById(s).scope[r])&&(r=g.id);return void((d=D.comp[r])&&d.setXML(t))}if(!e)for(var a in e=[],D.comp){if(null!=i.scope_obj){if(!(d=D.comp[a]).scope_obj)continue;if(d.scope_obj.id!==s)continue}e.push(a)}for(var n=0;n<e.length;n++){var l,d,c=e[n],p=!1;if("string"==typeof c){if(l=c,r=c,null!=s)null!=(g=b.D.getComponentById(s).scope[c])&&(r=g.id);d=D.comp[r],null!=s&&(l=d.org_id||d.id)}else{var g;if(r=c.id,null!=s)null!=(g=b.D.getComponentById(s).scope[c.id])&&(r=g.id);d=D.comp[r],c.key?l=c.key:(l=d.id,null!=s&&(l=d.org_id||d.id)),p="append"==c.action}if(d){var m,f=d.getOption("keyNode");m=f?(f=f.wq_replaceAll("${key}",l))+"/"+d.getOption("baseNode").split("/")[0]:d.getOption("baseNode").split("/")[0];for(var y=u.L.findNodes(t,m),v=d.getOption("idAttribute")?d.getOption("idAttribute"):"id",w=0;w<y.length;w++){var S,C=y[w],x=C.parentNode.nodeName;if("dataMap"===d.initializeType&&(x=C.nodeName),f)(S=C.parentNode.getAttribute(v))&&(x=S);else(S=C.getAttribute(v))&&(x=S);if(x===l){switch(d.initializeType){case"dataMap":case"dataList":d.setXML(C,p,c.includeColumns)}break}}}}}catch(t){h.w.printStackTrace(t)}},D.api._setArrayEvalString=function(t){try{var e=JSON.parse(t);for(var i in e){var o=D.comp[i];switch(o.initializeType){case"dataMap":o.setArray(e[i]);break;case"dataList":o.setData(e[i])}}}catch(t){h.w.printStackTrace(t)}},D.api.syncWithAttributeMap=function(){try{if(D.options.attributeMap){var t=D.comp[this.options.attributeMap];if(t)for(var e=t.getCount(),i=0;i<e;i++){var o=t.getKey(i),s=t.get(i);D.options[o]=s}}}catch(t){h.w.printStackTrace(t)}},D.api.makeKeyNodeChildXML=function(t,e,i,o){try{var s=t.getOption("idAttribute")?t.getOption("idAttribute"):"id",r=function(t,e,i){for(var o="",s=0;s<t.length;s++)o+="<"+t[s]+" "+e+"='"+i+"'>";for(s=t.length-1;s>=0;s--)o+="</"+t[s]+">";return o}(e.split("/"),s,o||t.id),a=u.L.parse(r).documentElement,n=u.L.findNode(a,"/"+e);return u.L.appendChild(n,i),a}catch(t){h.w.printStackTrace(t)}},D.api.broadcast=function(t){try{for(var e in D.comp){var i=D.comp[e];i[t.all[0]].apply(i,t.all[1]||[])}}catch(t){h.w.printStackTrace(t)}},D.api.JSONPathEvaluator=function(t,e){try{for(var i=e.split("."),o=0;o<i.length;o++){var s=i.slice(0,o+1).join("."),r=y.h.getJSONByPath(t,s);"object"!==(0,T.Z)(r)&&y.h.setJSONByPath(t,s,{})}return t}catch(t){h.w.printStackTrace(t)}},D.api.getInfo=function(t,e,i){var o={};if("object"===(0,T.Z)(t)&&null!=t)if(t.constructor===Array)for(var s=0;s<t.length;s++){(a=D.comp[t[s]])&&"function"==typeof a.getInfo&&(o[a.id]=a.getInfo(e,i))}else for(var r in t){(a=D.comp[r])&&"function"==typeof a.getInfo&&(o[a.id]=a.getInfo(e,i))}else for(var r in D.comp){var a;(a=D.comp[r])&&"function"==typeof a.getInfo&&(o[a.id]=a.getInfo(e,i))}return o},D.api.getAllDataCollection=function(t){try{var e=[];for(var i in D.comp)"object"===t?e.push(D.comp[i]):e.push(D.comp[i].id);return e}catch(t){h.w.printStackTrace(t)}},D.api.setBroadcast=function(t){try{var e=!b.D.getBoolean(t);if(!!D.stopBroadCast!==e&&(D.stopBroadCast=e,!1===e)){for(var i=0;i<D.stopBroadCastComp.length;i++){var o=a.x.idCache[D.stopBroadCastComp[i]];o&&o.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged",[{refreshInstance:!0,refreshScroll:!0}]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"})}D.stopBroadCastComp=[],D.stopBroadCastComp._wq_add=function(t){for(var e=!1,i=0;i<this.length;i++)if(this[i]===t){e=!0;break}e||this.push(t)}}}catch(t){h.w.printStackTrace(t)}},D.api.getBroadcast=function(){try{return!D.stopBroadCast}catch(t){h.w.printStackTrace(t)}},
D.api.onComplete=function(){try{for(var t in D.comp){var e=D.comp[t];e&&"function"==typeof e.onComplete&&!e.completed&&e.onComplete()}}catch(t){h.w.printStackTrace(t)}},D.api.isAliasDataCollection=function(t){try{var e=!1;return null!=t&&t.options&&!0==={aliasDataList:!0,aliasDataMap:!0,aliasLinkedDataList:!0}[t.options.pluginName]&&(e=!0),e}catch(t){h.w.printStackTrace(t)}},D.api.getObj=function(t){try{return!0===D.api.isAliasDataCollection(t)?t.getObj():t}catch(t){h.w.printStackTrace(t)}},D.api.bindPath=function(t){try{var e=t.split("."),i={};return i.collectionId=e[0].replace(/^data:/,""),e.length>1&&(i.columnId=e[1]),i}catch(t){h.w.printStackTrace(t)}};var L={paramObj:null,asyncCount:0,showWindowParam:{},showIFrameName:{},getParameter:function(t){var e="",i=t;try{if(WebSquare.util.isEncodeParameter()&&(t=WebSquare.util.encodeParameter(t)),"w2xPath"==i&&WebSquare.util.getEncodeParameterOption("pathName")&&(t=WebSquare.util.getEncodeParameterOption("pathName")),null==WebSquare.net.paramObj){WebSquare.net.paramObj=new Object;for(var o=location.search.slice(1).split("&"),s=0;s<o.length;s++){2==(a=o[s].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}if(location.hash.length>0)for(o=location.hash.substring(1).split(/[\&\?\#]/),s=0;s<o.length;s++){2==(a=o[s].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}}else if("w2xPath"==t){if((r=location.toString().lastIndexOf("w2xPath"))<0)WebSquare.net.paramObj[t]=null;else 2==(a=location.toString().slice(r).split(/[\&\?\#]/)[0].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}else if(WebSquare.util.getEncodeParameterOption("pathName")&&t==WebSquare.util.getEncodeParameterOption("pathName")){var r,a;if((r=location.toString().lastIndexOf(WebSquare.util.getEncodeParameterOption("pathName")))<0)WebSquare.net.paramObj[t]=WebSquare.net.paramObj.w2xPath;else 2==(a=location.toString().slice(r).split(/[\&\?\#]/)[0].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}else if(null!=WebSquare.userData[i])return WebSquare.userData[i];e=WebSquare.net.paramObj[t],WebSquare.util.isEncodeParameter()?!e&&WebSquare.util.getEncodeParameterOption("fallback")?e=WebSquare.net.paramObj[i]:WebSquare.util.getEncodeParameterOption("onlyParam")||(e=WebSquare.util.decodeParameter(e)):!e&&WebSquare.util.getEncodeParameterOption("fallback")&&(e=WebSquare.net.paramObj[i])}catch(t){t.detail="WebSquare.net.getParameter 에러",h.w.printStackTrace(t)}return null!=e&&void 0!==e||(e=""),e="w2xPath"===t?e.replace(/%2F/g,"/"):WebSquare.text.URLDecoder(e)},_setParameter:function(t){try{if(WebSquare.net.paramObj)if(WebSquare.util.isEncodeParameter())if(WebSquare.util.getEncodeParameterOption("onlyParam"))for(var e in t)WebSquare.net.paramObj[WebSquare.util.encodeParameter(e)]=t[e];else for(var e in t)WebSquare.net.paramObj[WebSquare.util.encodeParameter(e)]=WebSquare.util.encodeParameter(t[e]);else for(var e in t)WebSquare.net.paramObj[e]=t[e]}catch(t){t.detail="WebSquare.net._setParameter 에러",h.w.printStackTrace(t)}},getAllParameter:function(){var t={},e={};try{for(var i in WebSquare.net.paramObj)t[i]=WebSquare.text.URLDecoder(WebSquare.net.paramObj[i]),WebSquare.util.isEncodeParameter()&&(WebSquare.util.getEncodeParameterOption("onlyParam")?e[WebSquare.util.decodeParameter(i)]=t[i]:e[WebSquare.util.decodeParameter(i)]=WebSquare.util.decodeParameter(t[i]))}catch(t){h.w.printStackTrace(t)}return WebSquare.util.isEncodeParameter()?t.w2xPath&&t.w2xPath.length>0?t:e:t},getBASE64Parameter:function(t){var e="";try{if(null==WebSquare.net.paramObj){WebSquare.net.paramObj=new Object;for(var i=location.search.substring(1).split("&"),o=0;o<i.length;o++){var s=i[o].split("=");2==s.length&&(WebSquare.net.paramObj[s[0].wq_trim()]=s[1].wq_trim())}}e=WebSquare.net.paramObj[t]}catch(t){t.detail="WebSquare.net.getBASE64Parameter 에러",h.w.printStackTrace(t)}return null!=e&&void 0!==e||(e=""),WebSquare.text.BASE64URLDecoder(e)},
getAllBASE64Parameter:function(){var t={};try{for(var e in WebSquare.net.paramObj)t[e]=WebSquare.text.BASE64URLDecoder(WebSquare.net.paramObj[e])}catch(t){h.w.printStackTrace(t)}return t},showWindow:function(t,e,i,o,s){if(void 0===i||null==i)i="channelmode=no,directories=no,fullscreen=no,top=200,height=350,left=250,width=400,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no'";else{var r=0,a=0,n="false",l=i.split(";");if(l.length>1){i="";for(var h=0;h<l.length;h++){var d=l[h].split(":");2==d.length&&("dialogHeight"==d[0].wq_trim()?(r=parseInt(d[1].wq_trim(),10),i+="height="+d[1]+","):"dialogWidth"==d[0].wq_trim()?(a=parseInt(d[1].wq_trim(),10),i+="width="+d[1]+","):"center"==d[0].wq_trim()?n=d[1].toLowerCase().wq_trim():i+=d[0]+"="+d[1]+",")}}if("true"==n||"yes"==n){if(0!=r)i="top="+(740-r)/2+"px,"+i;if(0!=a)i="left="+(1e3-a)/2+"px,"+i}}var u="idx10_"+(new Date).getTime()+1e4*Math.random();WebSquare.net.showWindowParam[u]=void 0===e?null:e,t=t.indexOf("?")>-1?t+"&modalParamIdx="+u:t+"?modalParamIdx="+u;var c=null;return null==(c=void 0===o?window.open(t,"_blank",i):window.open(t,o,i))&&alert(WebSquare.language.getMessage("E_net_PopupBlocked")),c},getPopupParam:function(){try{var t=WebSquare.net.getParameter("modalParamIdx");return opener.WebSquare.net._getParam(t)}catch(t){return""}},_getParam:function(t){return WebSquare.net.showWindowParam[t]},isPopup:function(){try{return void 0!==window.opener&&!window.opener.closed}catch(t){return!1}},Obj2XML:function(t){var e="<obj>";for(var i in t)e=e+"<"+i+" value='"+WebSquare.xml.encode(t[i])+"'/>";return e+="</obj>"},XML2Obj:function(t){var e=new Object;try{var i=null;if("string"==typeof t)i=WebSquare.xml.parse(t);else{if(!WebSquare.xml.isDocument(t))return"";i=t}var o=i.documentElement;if("vector"==o.nodeName||"hashtable"==o.nodeName)return"";for(var s=o.childNodes,r=0;r<s.length;r++){var a=s.item(r);if(1==a.nodeType){var n=a.nodeName,l=a.getAttribute("value");null==l&&(l=""),e[n]=l}}}catch(t){h.w.printStackTrace(t)}return e},showIFrame:function(t,e,i,o){var s=0,r=0,a=t;if(void 0===i||null==i)i="height=370,width=320";else{var n=i.split(";");if(n.length>1){i="";for(var l=0;l<n.length;l++){var d=n[l].split(":");2==d.length&&("dialogHeight"==d[0].wq_trim()?(s=parseInt(d[1].wq_trim(),10),i+="height="+d[1]+","):"dialogWidth"==d[0].wq_trim()?(r=parseInt(d[1].wq_trim(),10),i+="width="+d[1]+","):"center"==d[0].wq_trim()?d[1].toLowerCase().wq_trim():i+=d[0]+"="+d[1]+",")}}}var u="idx11_"+(new Date).getTime()+1e4*Math.random();if(WebSquare.net.showWindowParam[u]=void 0===e?null:e,a){a=a.indexOf("?")>-1?a+"&modalParamIdx="+u:a+"?modalParamIdx="+u,void 0===o&&(o="___iframeLayer"),WebSquare.net.showIFrameName[u]=o,(isNaN(s)||0==s)&&(s=370),(isNaN(r)||0==r)&&(r=320);try{if(void 0===document.all[o]||null==document.all[o]){var c=document.createElement("div");c.id=o,c.style.position="absolute",c.style.overflow="hidden",c.style.zIndex=1e4,c.style.visibility="visible",c.style.height=s+"px",c.style.width=r+"px",c.style.setExpression("top","document.body.scrollTop+document.body.clientHeight/2-"+s+"/2"),c.style.setExpression("left","document.body.scrollLeft+document.body.clientWidth/2-"+r+"/2"),document.body.appendChild(c),c.innerHTML="<iframe frameborder='0' name='iframe"+o+"' scrolling='no' style='width:100%; height:100%'></iframe>",document.frames["iframe"+o].location.replace(a)}else{var p=document.body.scrollTop+document.body.clientHeight/2-parseInt(document.all[o].style.height)/2,g=document.body.scrollLeft+document.body.clientWidth/2-parseInt(document.all[o].style.width)/2;document.all[o].style.top=p,document.all[o].style.left=g,document.all[o].visibility="visible",document.all[o].style.zIndex=1e4,document.all[o].innerHTML="<iframe frameborder='0' scrolling='no' src='"+a+"' style='width:100%; height:100%;'></iframe>"}}catch(s){
i="channelmode=no,directories=no,fullscreen=no,top=200,height=350,left=250,width=400,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no",WebSquare.net.showWindow(t,e,i,o),h.w.printStackTrace(s)}}},hideIFrame:function(){try{if(parent.WebSquare){var t=WebSquare.net.getParameter("modalParamIdx");parent.WebSquare.net._hideIFrame(t)}}catch(t){h.w.printStackTrace(t)}},_hideIFrame:function(t){var e=WebSquare.net.showIFrameName[t];void 0!==document.all[e]&&null!=document.all[e]&&(document.all[e].innerHTML="",document.all[e].style.zIndex=1,document.all[e].visibility="hidden",document.body.removeChild(document.all[e]))},getIFrameParam:function(){try{if(parent.WebSquare){var t=WebSquare.net.getParameter("modalParamIdx");return parent.WebSquare.net._getParam(t)}return""}catch(t){return h.w.printStackTrace(t),""}},hasParentFrame:function(){try{if(WebSquare.core.browserCheck.ieAllVersion){var t=WebSquare.core.browserVersion();return"5"==t.charAt(0)&&window.parent!=window||(("6"==t||"7"==t)&&window.parent!=window&&window.parent==window.frameElement.ownerDocument.parentWindow||window.parent!=window)}if(WebSquare.core.browserCheck.moz||WebSquare.core.browserCheck.opera)return window.parent!=window}catch(t){h.w.printStackTrace(t)}return!1},openWebsquareUrl:function(t,e,i,o){if(i||(i=window),i&&i.location){if(o=o||"true"==WebSquare.core.getConfiguration("/WebSquare/spa/@value"))return void WebSquare.util.url(t,{spa:!0});(e=a.x.extend(WebSquare.net.getAllParameter(),e)).w2xPath=WebSquare.core.getURL(t),t.startsWith("/")&&(e.w2xHome="");var s,r=[];for(var n in e)r.push(n+"="+e[n]);s="?"+r.join("&"),t=i.location.href.replace(/\?.*/,s),i.location.assign(t)}},openUrl:function(t,e){if(e||(e=window),e&&e.location){var i=e.location.protocol+"//";t.startsWith(i)||(t=i+t),e.location.assign(t)}},getSSLBlankPage:function(t){var e="";return WebSquare.core.browserCheck.ie&&"https:"==location.protocol&&(e=1==t?a.x._resourceURI+"blank.html":"src='"+a.x._resourceURI+"blank.html'"),e},getBlankXML:function(){return a.x._resourceURI+"blank.xml"},isSSLBlankPage:function(t){var e=!1;return t==a.x._resourceURI+"blank.html"&&(e=!0),e},ajax:function(t){try{var e,i;if(WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/notRecommended/warningSync/@value"))&&"synchronous"===t.mode&&alert(WebSquare.language.getMessage("E_deprecated_sync","$p.ajax")),t.beforeAjax&&void 0!==(e=t.beforeAjax(t))&&0==e)return void $l("ajax beforeAjax에서 result가 false이므로 처리를 중단");if(""!=t.processMsg)if(t.scope)WebSquare.layer.showProcessMessage(t.processMsg,{scope:t.scope,ajax:!0});else{var o=document.getElementById("___processbar2"),s=document.getElementById("___processbar2_i");(void 0!==o&&null!=o||void 0!==s&&null!=s)&&("none"!=o.style.display||"none"!=s.style.display)||WebSquare.layer.showProcessMessage(t.processMsg)}var r,a=WebSquare.core.getXMLHTTPObject(),n=WebSquare.util.getSubmissionURL(t.action),l="synchronous"!=t.mode,d=t.mediatype||"application/xml",u=t.accept||d,c=t.method||"post",p=t.timeout;l&&!t.scope&&WebSquare.net.asyncCount++,$l(n),a.open(c,n,l);try{t.withCredentials&&"asynchronous"==t.mode&&(a.withCredentials=t.withCredentials)}catch(t){h.w.printStackTrace(t)}"none"!==u&&a.setRequestHeader("Accept",u),a.setRequestHeader("Content-Type",d);try{if(t.requestHeader)for(var g in t.requestHeader)a.setRequestHeader(g,t.requestHeader[g])}catch(t){h.w.printStackTrace(t)}l&&(p&&(r=window.setTimeout((function(){a.onreadystatechange=function(){},a.abort(),i={errorType:"timeout-error",resourceUri:n,time:p},t.scope||WebSquare.net.asyncCount--,t.scope?WebSquare.layer.hideProcessMessage({scope:t.scope,ajax:!0}):WebSquare.net.asyncCount<=0&&!1!==t.hideProcessMsg&&WebSquare.layer.hideProcessMessage(),$l("ajax timeout"),window.clearTimeout(r),t.error&&t.error(i)}),p)),a.onreadystatechange=function(){WebSquare.net.defaultcallback(a,t,r)});var m=WebSquare.core.getConfiguration("/WebSquare/ajax/externalHandler/@value")||""
;if(void 0!==t.externalHandler&&(m=t.externalHandler),""==m||"default"==m);else if(m)if("function"==typeof m)t.requestData=m(t);else{var f=WebSquare.util.getGlobalFunction(m);"function"==typeof f&&(t.requestData=f(t))}a.send(t.requestData),l||WebSquare.net.commonHandler(a,t)}catch(e){h.w.printStackTrace(e),t&&t.scope?WebSquare.layer.hideProcessMessage({scope:t.scope}):(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0)}},commonHandler:function(t,e){var i,o="synchronous"!=e.mode;o&&!e.scope&&WebSquare.net.asyncCount--;var s=WebSquare.core.getURL(e.action),r=t.getResponseHeader("Content-Type")||"";if(r.indexOf("xml")>-1)i=WebSquare.BootLoader.useWebSquareXMLParser?WebSquare.xml.parse(t.responseText):t.responseXML;else if(r.indexOf("json")>-1)try{i=JSON.parse(t.responseText)}catch(e){i=t.responseText}else i=t.responseText;if(t&&(200>t.status||300<=t.status)){var a={errorType:"resource-error",resourceUri:s,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(t),responseStatusCode:t.status,responseReasonPhrase:t.statusText,requestBody:e.requestData,responseBody:t.responseText};return $l("ajax error(E01). Status["+t.status+"] "),e.scope?WebSquare.layer.hideProcessMessage({scope:e.scope,ajax:!0}):WebSquare.net.asyncCount<=0&&!1!==e.hideProcessMsg&&(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0),e.error&&e.error(a),t.onreadystatechange=function(){},void(t=null)}var n,l={resourceUri:s,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(t),responseStatusCode:t.status,responseReasonPhrase:t.statusText,requestBody:e.requestData,responseText:t.responseText};n=l,r.indexOf("json")>-1?n.responseJSON=i:r.indexOf("xml")>-1&&(n.responseBody=i),$l("ajax complete. Status["+t.status+"] async["+o+"] url["+s+"]"),e.scope?WebSquare.layer.hideProcessMessage({scope:e.scope,ajax:!0}):WebSquare.net.asyncCount<=0&&!1!==e.hideProcessMsg&&(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0),e.success&&e.success(l),t.onreadystatechange=function(){},t=null},defaultcallback:function(t,e,i){try{4==t.readyState&&(i&&(window.clearTimeout(i),i=null),WebSquare.net.commonHandler(t,e))}catch(t){h.w.printStackTrace(t),e&&e.scope?WebSquare.layer.hideProcessMessage({scope:e.scope}):(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0)}},download:function(t,e,i,o){WebSquare.hybridApp&&(t=WebSquare.util.getSubmissionURL(t)),null!=o&&void 0!==o||(o=!1),WebSquare.core.download(t,e,i,o)}},W={sessionData:{}};W.sessionType=new Object,W._handleAttribute=function(t){if(null!=t&&t.mode&&t.key){for(var e=self,i=0;i<1e3;i++)try{if(null==e.opener&&e.parent===e)break;if(null!=e.opener&&e.opener.WebSquare&&e.opener.WebSquare.session)e=e.opener;else{if(e.parent===e||!e.parent.WebSquare||!e.parent.WebSquare.session)break;e=e.parent}}catch(t){break}var o,s=e.WebSquare.session,r=t.key;if("get"===t.mode||"remove"===t.mode){o=s.sessionData[r];var a=s.sessionType[r];void 0===o||null==o?o=null:"xml"===a&&(o=WebSquare.xml.parse(o)),"remove"===t.mode&&(delete s.sessionData[r],delete s.sessionType[r])}else if("set"===t.mode){var n=t.value,l="object";"string"==typeof n?l="string":WebSquare.xml.isDocument(n)?(n=WebSquare.xml.serialize(n),l="xml"):"object"==(0,T.Z)(n)&&("function"==typeof n.serialize&&void 0!==n.classType?(l=n.classType,n=n.serialize()):l="object"),s.sessionData[r]=n,s.sessionType[r]=l}else"removeSession"===t.mode&&(s.sessionData={},s.sessionType={});return o}},W.getAttribute=function(t){return WebSquare.session._handleAttribute({key:t,mode:"get"})},W.removeAttribute=function(t){return WebSquare.session._handleAttribute({key:t,mode:"remove"})},W.removeSession=function(){return WebSquare.session._handleAttribute({key:"_",mode:"removeSession"})},W.setAttribute=function(t,e){return WebSquare.session._handleAttribute({key:t,mode:"set",value:e})},W._getAttributeData=function(t){var e=WebSquare.session.sessionData[t];return void 0===e||null==e?null:e},W._getAttributeType=function(t){var e=WebSquare.session.sessionType[t]
;return void 0===e||null==e?null:e},W._removeAttributeData=function(t){var e=WebSquare.session.sessionData[t];return WebSquare.session.sessionData[t]=null,delete WebSquare.session.sessionData[t],void 0===e||null==e?null:e},W._removeAttributeType=function(t){var e=WebSquare.session.sessionType[t];return WebSquare.session.sessionType[t]=null,delete WebSquare.session.sessionType[t],void 0===e||null==e?null:e},W._removeSession=function(){WebSquare.session.sessionData={},WebSquare.session.sessionType={}},W._setAttribute=function(t,e,i){WebSquare.session.sessionData[t]=e,WebSquare.session.sessionType[t]=i};var A=__webpack_require__(9818),E=__webpack_require__(6046),M={cache:{},processMsg:"",disabledList:[],submissionIDQueue:[],submissionMessageQueue:[],saveLayer:function(t,e){try{var i=document.getElementById(t);void 0!==i&&null!=i&&(WebSquare.layer.cache[t+e]=i.innerHTML)}catch(t){h.w.printStackTrace(t)}},loadLayer:function(t,e){try{if(void 0!==WebSquare.layer.cache[t+e]&&""!=WebSquare.layer.cache[t+e].wq_trim()){var i=document.getElementById(t);return void 0!==i&&null!=i&&(i.innerHTML=WebSquare.layer.cache[t+e],!0)}return!1}catch(t){h.w.printStackTrace(t)}},clearLayer:function(){try{WebSquare.layer.cache=new Object}catch(t){h.w.printStackTrace(t)}},showProcessMessage:function(t,e){try{if("$blank"==t||!t)return;if(e&&e.scope){var i=WebSquare.layer._getMessageFrame(e.scope);if(null!=i)return i.showProcessMessage(t,e)}$l("WebSquare.layer.showProcessMessage ["+t+"]");var o=t.wq_trim(),s=o.match(/^javascript\s*:\s*(.*)/i);null==s||void 0===s||(t=WebSquare.jsonUtil.getJSONByPath(window,s[1]))===window&&(t="");var r=e&&"pasteMsg"==e.type?document.getElementById("___processbar2_paste"):document.getElementById("___processbar2"),n=e&&"pasteMsg"==e.type?document.getElementById("___processbar2_i_paste"):document.getElementById("___processbar2_i"),l=WebSquare.core.getConfiguration("processMsgURL"),d=WebSquare.core.getConfiguration("processMsgHeight"),u=WebSquare.core.getConfiguration("processMsgWidth"),c=WebSquare.core.getConfiguration("processMsgBackground"),p=WebSquare.core.getConfiguration("/WebSquare/processMsgBackground/@backgroundColor"),g=WebSquare.core.getConfiguration("processMsgTitle")||"process Message";if(""==p&&(p="#112233"),""==l&&(l=e&&"pasteMsg"==e.type?a.x.baseURI+WebSquare.BootLoader.inquiresPath("message/pasteMsg.html"):a.x.baseURI+WebSquare.BootLoader.inquiresPath("message/processMsg.html")),l=0==WebSquare.WebSquareCache?WebSquare.BootLoader.getRandomPostfix(l+"?param="+WebSquare.text.URLEncoder(t)):WebSquare.BootLoader.getResourceCachePostfix(l+"?param="+WebSquare.text.URLEncoder(t)),delete WebSquare.layer.hideTrigger,e&&e.hideTrigger&&(WebSquare.layer.hideTrigger="true"),delete WebSquare.layer.abortTrigger,e&&e.abortTrigger&&(WebSquare.layer.abortTrigger="true"),WebSquare.layer.processMsg=t,""!=d&&""!=u||(d="81",u="295"),r)r.tabIndex=1,r.style.zIndex=1e4,r.style.display="block",r.style.top="0px",r.style.left="0px";else{var m=document.createElement("div");m.id=e&&"pasteMsg"==e.type?"___processbar2_paste":"___processbar2",m.className="w2modal",m.style.backgroundColor=p,m.tabIndex=1,m.style.visibility="true"==c?"visible":"hidden",WebSquare.getBody().appendChild(m)}var f=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,b=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,y=document.documentElement.clientHeight||document.body.clientHeight||0,v=document.documentElement.clientWidth||document.body.clientWidth||0;if(n){w=f+y/2-parseInt(d)/2,S=b+v/2-parseInt(u)/2;n.style.top=parseInt(w)+"px",n.style.left=parseInt(S)+"px",n.style.zIndex=10001,null!=frames.__processbarIFrame.onload?frames.__processbarIFrame.onload():null!=frames.__processbarIFrame.init&&frames.__processbarIFrame.init(),n.style.display="block"}else{var w=f+y/2-parseInt(d)/2,S=b+v/2-parseInt(u)/2,C=document.createElement("div");C.id=e&&"pasteMsg"==e.type?"___processbar2_i_paste":"___processbar2_i",
C.style.position="absolute",C.style.top=parseInt(w)+"px",C.style.left=parseInt(S)+"px",C.style.overflow="hidden",C.style.zIndex=10001,C.style.visibility="visible",C.style.height=d+"px",C.style.width=u+"px",WebSquare.getBody().appendChild(C),C.innerHTML="<iframe frameborder='0' scrolling='no' allowtransparency='true' name='__processbarIFrame' style='position:absolute; width:"+u+"px; height:"+d+"px; top:0px; left:0px' src='"+l+"' title='"+g+"'></iframe>"}WebSquare.event.addListener(document.documentElement,"onkeydown",WebSquare.layer.stopEvent)}catch(t){h.w.printStackTrace(t)}},setProcessMsgColor:function(){try{var t=WebSquare.layer.colorArr.shift();WebSquare.layer.colorArr.push(t),document.getElementById("processMsgLayer").style.color=t}catch(t){h.w.printStackTrace(t)}},hideProcessMessage:function(t){try{if(t&&t.scope){var e=WebSquare.layer._getMessageFrame(t.scope);if(null!=e)return!0===t.ajax?e.deleteAjaxMessage():e.hideProcessMessage()}var i=t&&"pasteMsg"==t.type?document.getElementById("___processbar2_paste"):document.getElementById("___processbar2"),o=t&&"pasteMsg"==t.type?document.getElementById("___processbar2_i_paste"):document.getElementById("___processbar2_i");void 0!==i&&null!=i&&(i.style.zIndex=-1,i.style.display="none",i.tabIndex="-1",i.innerHTML=""),void 0!==o&&null!=o&&(o.style.zIndex=-1,o.style.display="none");try{null!=frames.__processbarIFrame&&frames.__processbarIFrame.processKey&&frames.__processbarIFrame.clearInterval(frames.__processbarIFrame.processKey)}catch(t){}WebSquare.event.removeListener(document.documentElement,"onkeydown",WebSquare.layer.stopEvent)}catch(t){h.w.printStackTrace(t);try{WebSquare.event.removeListener(document.documentElement,"onkeydown",WebSquare.layer.stopEvent)}catch(t){}}},_getMessageFrame:function(t){try{for(var e,i=WebSquare.idCache[WebSquare.idToUUID[t]];null!=i&&i!==WebSquare.strictModeFrame;i=WebSquare.idCache[i.parentFrame])if(i.options&&!0===i.options.processMsgFrame){e=i;break}return e}catch(t){h.w.printStackTrace(t)}},addSubmissionMessage:function(t,e){try{var i,o;if("string"==typeof t?(o=t,i=WebSquare.ModelUtil.getSubmission(t)):o=(i=t).id,i&&i.scope_id){for(var s=WebSquare.layer._getMessageFrame(i.scope_id);s&&s.parentFrame&&!0===WebSquare.util.getBoolean(s.options.delegateProcessMsg);){var r=s._getRenderedParentFrame();if(!r)break;s=r}if(null!=s)return s.addSubmissionMessage(i,e)}try{var a;if(1==i.useModal&&WebSquare.layer.showModal(),i.abortTrigger&&(a={abortTrigger:i.abortTrigger}),!1===i.hideProcessMsg)return void WebSquare.layer.showProcessMessage(e,a)}catch(t){}WebSquare.layer.submissionIDQueue.push(o),WebSquare.layer.submissionMessageQueue.push(e),(1==WebSquare.layer.submissionIDQueue.length||WebSquare.layer.submissionMessageQueue[WebSquare.layer.submissionMessageQueue.length-2]!=e)&&WebSquare.layer.showProcessMessage(e,a)}catch(t){WebSquare.layer.hideModal(),h.w.printStackTrace(t)}},deleteSubmissionMessage:function(t){try{var e;try{if((e=WebSquare.ModelUtil.getSubmission(t))&&e.scope_id){for(var i=WebSquare.layer._getMessageFrame(e.scope_id);i&&i.parentFrame&&!0===WebSquare.util.getBoolean(i.options.delegateProcessMsg);){var o=i._getRenderedParentFrame();if(!o)break;i=o}if(null!=i)return i.deleteSubmissionMessage(t)}if(!1===e.hideProcessMsg)return void(1==e.useModal&&WebSquare.layer.hideModal())}catch(t){}for(var s=-1,r=0;r<WebSquare.layer.submissionIDQueue.length;r++)WebSquare.layer.submissionIDQueue[r]==t&&(s=r);if(s>=0){WebSquare.layer.submissionIDQueue.splice(s,1);var a=WebSquare.layer.submissionMessageQueue.splice(s,1)[0];s==WebSquare.layer.submissionIDQueue.length&&a!=WebSquare.layer.submissionMessageQueue[s-1]&&WebSquare.layer.showProcessMessage(WebSquare.layer.submissionMessageQueue[s-1])}var n=!0;t&&(!(e=WebSquare.ModelUtil.getSubmission(t))||!1!==e.hideProcessMsg&&"false"!==e.hideProcessMsg||(n=!1)),0==WebSquare.layer.submissionIDQueue.length&&n&&(e&&1==e.useModal&&WebSquare.layer.hideModal(),WebSquare.layer.hideProcessMessage())}catch(t){
WebSquare.layer.hideModal(),h.w.printStackTrace(t)}},showModal:function(t){try{if(WebSquare.layer.disabledList.length>0)return void $l("[WebSquare.layer.showModal]현재 showModal상태이므로 처리하지 않습니다.");WebSquare.layer.disabledList.push(WebSquare.util.setDisabled({componentId:"",disabled:!0,excludeIdList:t,skipTab:!0})),WebSquare.getBody().showModal(null,t)}catch(t){h.w.printStackTrace(t)}},hideModal:function(){try{if(WebSquare.layer.disabledList.length>0){var t=WebSquare.layer.disabledList.splice(WebSquare.layer.disabledList.length-1,1)[0];WebSquare.util.setDisabled({componentId:"",disabled:!1,excludeIdList:t.skipComponents,skipTab:!0}),WebSquare.getBody().hideModal()}}catch(t){h.w.printStackTrace(t)}},showMessage:function(t){if(requires("uiplugin/floatingLayer/floatingLayer.js"),!t||void 0!==t.id){var e=t.title||"",i=t.messageBoxType||"info",o=t.messageButtonAlign||"center",s=t.message||"",r=t.contentTitle||"",a=t.id,n=WebSquare.util.getComponentById(a);n&&n.remove();var l=t.height||230,h=t.width||530,d=0,u=0,c=document.body.scrollHeight,p=document.body.scrollWidth;(d=p-(h+(p-h)/2))<0&&(d=0),(u=c-(l+(c-l)/2))<0&&(u=0);var g;g="position:absolute;height:"+l+"px;width:"+h+"px;top:"+u+"px;left:"+d+"px";var m=new WebSquare.uiplugin.floatingLayer(a,{userEvents:["onclose","onlayermove"],bodyComplex:!0,dragAlwaysView:!1,title:e,contentTitle:r,titleClass:"",useResizeDrag:!1,modal:!0,useModal:!0,useAnchor:!1,messageBoxType:i,messageButtonAlign:o,message:s,style:g,useMessage:!0}),f=WebSquare.getBody();m.writeTo(f),m.activate(),m.show()}},alert:function(t,e,i){var o={id:"__floatingMsg",title:i||"알림",contentTitle:e||"알림",message:t||"",messageBoxType:"info",messageButtonAlign:"center"};top.WebSquare?top.WebSquare.layer.showMessage(o):WebSquare.layer.showMessage(o)},confirm:function(t,e,i){var o={id:"__floatingMsg",title:i||"확인",contentTitle:e||"확인",message:t||"",messageBoxType:"confirm",messageButtonAlign:"center"};top.WebSquare?top.WebSquare.layer.showMessage(o):WebSquare.layer.showMessage(o)},cancel:function(t,e,i){var o={id:"__floatingMsg",title:i||"확인",contentTitle:e||"확인",message:t||"",messageBoxType:"cancel",messageButtonAlign:"center"};top.WebSquare?top.WebSquare.layer.showMessage(o):WebSquare.layer.showMessage(o)},stopEvent:function(t){WebSquare.event.stopEvent(t)}},q={setCookie:function(t,e,i){var o;o="None"===i?t+"="+escape(e)+";SameSite=None;Secure;path=/":"Strict"===i?t+"="+escape(e)+";SameSite=Strict;path=/":t+"="+escape(e)+";path=/",document.cookie=o},setCookieAsync:function(t,e,i){"None"===i?window.setTimeout("document.cookie = '"+t+"="+escape(e)+";SameSite=None;Secure;path=/';",1):"Strict"===i?window.setTimeout("document.cookie = '"+t+"="+escape(e)+";SameSite=Strict;path=/';",1):window.setTimeout("document.cookie = '"+t+"="+escape(e)+";path=/';",1)},getCookie:function(t){try{for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var o=e[i].split("=");if(t==o[0])return 1==o.length?"":unescape(o[1])}}catch(t){h.w.printStackTrace(t)}return null},delCookie:function(t){try{document.cookie=t+"=abc; expires=Fri, 31 Dec 1970 23:59:59 GMT;path=/"}catch(t){h.w.printStackTrace(t)}}},R={effectManager:function(){this.effects=[],this.timeState="stopped";var t=this;this._mouseMoveEvent=function(){t.onDrag.apply(t,arguments)}}};R.effectManager.prototype={add:function(t,e){t.init(e),this.effects.push(t),"stopped"==this.timeState&&(this.timeState="running",this.startTimeout())},remove:function(t){for(var e=[],i=0;i<this.effects.length;i++)this.effects[i]!=t&&e.push(this.effects[i]);this.effects=e,0==this.effects.length&&this.cancelTimeout()},startTimeout:function(){var t=this;this.interval=setInterval((function(){var e=(new Date).getTime();t.notifyLoop(e)}),10)},cancelTimeout:function(){clearInterval(this.interval),this.timeState="stopped"},notifyLoop:function(){for(var t=[],e=0;e<this.effects.length;e++)"finished"!=this.effects[e].state&&t.push(this.effects[e]);this.effects=t;var i=(new Date).getTime()
;for(e=0;e<this.effects.length;e++)"finished"!=this.effects[e].state&&this.effects[e].loop(i);0==this.effects.length&&this.cancelTimeout()}},R.effectManager=new R.effectManager,R.defaultOptions={transition:function(t){return-Math.cos(t*Math.PI)/2+.5},duration:1,fps:60,from:0,to:1,delay:0},R.resize=function(t,e){try{this.element=t;var i=a.x.extend({width:null,height:null,fromLeft:!0,fromTop:!0,mode:"delta"},e||{});WebSquare.effect.effectManager.add(this,i)}catch(t){h.w.printStackTrace(t)}},R.resize.prototype={position:null,init:function(t){this.options=a.x.extend(a.x.extend({},WebSquare.effect.defaultOptions),t||{}),this.currentFrame=0,this.state="stoped",this.startOn=1e3*this.options.delay,this.finishOn=this.startOn+1e3*this.options.duration;var e=(new Date).getTime();this.startOn+=e,this.finishOn+=e},loop:function(t){if(t>=this.startOn){if(t>=this.finishOn)return this.render(1),this.finish&&this.finish(),void(this.state="finished");var e=(t-this.startOn)/(this.finishOn-this.startOn),i=Math.round(e*this.options.fps*this.options.duration);i>this.currentFrame&&(this.render(e),this.currentFrame=i)}},render:function(t){"stoped"==this.state&&(this.state="running",this.setup&&this.setup()),"running"==this.state&&(this.options.transition&&(t=this.options.transition(t)),t=t*(this.options.to-this.options.from)+this.options.from,this.update&&this.update(t))},setup:function(){var t=WebSquare.style.getStyle(this.element,"left");t="auto"===t?"0":t;var e=WebSquare.style.getStyle(this.element,"top");e="auto"===e?"0":e,this.originalLeft=parseFloat(t||0),this.originalTop=parseFloat(e||0),this.originalWidth=parseFloat(WebSquare.style.getSize(this.element,"width")||0),this.originalHeight=parseFloat(WebSquare.style.getSize(this.element,"height")||0),"absolute"==this.options.mode&&(null!=this.options.width&&(this.options.width=this.options.width-this.originalWidth),null!=this.options.height&&(this.options.height=this.options.height-this.originalHeight))},update:function(t){null!=this.options.width&&(this.element.style.width=this.options.width*t+this.originalWidth+"px",this.options.fromLeft||WebSquare.style.setStyle(this.element,{left:-1*this.options.width*t+this.originalLeft+"px"})),null!=this.options.height&&(this.element.style.height=this.options.height*t+this.originalHeight+"px",this.options.fromTop||WebSquare.style.setStyle(this.element,{top:-1*this.options.height*t+this.originalTop+"px"}))},finish:function(){try{this.options.finish&&this.options.finish.call()}catch(t){h.w.printStackTrace(t)}}};var N=function(){};N.prototype.construct=function(t,e){this.status=0,this.element=t,this._eventBubbling=e},N.prototype.next=function(){if(0==this.status)return this.status=1,!0},N.prototype.stop=function(){this.status=2},N.prototype.match=function(t,e,i,o){if(2==this.status)return!1;var s=!0;return t&&(" "+this.element.className+" ").indexOf(" "+t.wq_trim()+" ")<0&&(s=!1),e&&this.element.id!=e&&(s=!1),i&&this.element.tagName.toUpperCase()!=i.toUpperCase()&&(s=!1),this._eventBubbling&&o&&this.element.id.indexOf(o)<0&&(s=!1),s},N.prototype.matchSvg=function(t,e,i){if(2==this.status)return!1;var o=!1;return this.element.className.baseVal&&(o=!0,t&&(" "+this.element.className.baseVal+" ").indexOf(" "+t.wq_trim()+" ")<0&&(o=!1),e&&this.element.id!=e&&(o=!1),i&&this.element.tagName.toUpperCase()!=i.toUpperCase()&&(o=!1)),o},N.prototype.getElement=function(){return this.element};var F=function(t,e){this.construct(t),this.upperBoundElem=e||document.body};a.x.extend(F.prototype,N.prototype),F.prototype.next=function(){return 0==this.status?(this.status=1,!0):2!=this.status&&((this.element!==document.documentElement||this.upperBoundElem!==document.body)&&(!(this.element==this.upperBoundElem||!this.element.parentNode)&&(this.element=this.element.parentNode,!0)))};var O=__webpack_require__(1454),B=__webpack_require__(3308),V={CSSStyleSheet:function(){this.rules=[],this.ruleIndex=[],this.styleElement=document.createElement("style"),
this.styleElement.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(this.styleElement),this.sheet=this.styleElement.styleSheet?this.styleElement.styleSheet:this.styleElement.sheet}};V.CSSStyleSheet.addRuleRe1=new RegExp("^\\{?([^\\}])"),V.CSSStyleSheet.addRuleRe2=new RegExp("^\\{[^\\}]*\\}$"),V.CSSStyleSheet.prototype.addRule=function(t,e){try{var i;if(this.sheet)if(this.sheet.addRule){e=e.replace(WebSquare.styleSheet.CSSStyleSheet.addRuleRe1,"$1");var o=this.sheet.rules.length;this.sheet.addRule(t,e),i=this.sheet.rules[o],this.ruleIndex[t]=o,this.rules=this.sheet.rules}else if(this.sheet.insertRule){WebSquare.styleSheet.CSSStyleSheet.addRuleRe2.test(e)||(e="{"+e+"}");o=this.sheet.cssRules.length;this.sheet.insertRule(t+" "+e,o),i=this.sheet.cssRules[o],this.ruleIndex[t]=o,0==this.rules.length&&(this.rules=this.sheet.cssRules)}else alert("Cannot create rule");else{e=e.replace(WebSquare.styleSheet.CSSStyleSheet.addRuleRe1,"$1"),this.ruleIndex[t]||(this.ruleIndex[t]=this.rules.length),this.rules[this.ruleIndex[t]]=e;var s="";for(var r in this.ruleIndex)s=r+" {"+this.rules[this.ruleIndex[r]]+"}";this.styleElement.innerHTML=s}return i}catch(t){h.w.printStackTrace(t,null,this)}},V.CSSStyleSheet.prototype.changeRule=function(t,e,i){try{var o=this.ruleIndex[t];if(void 0===o)return void this.addRule(t,e+":"+i);if(this.sheet){if(this.rules[o].style){for(var s=/^([^-]*)-([a-z])(.*)$/.exec(e);s;)e=s[1]+s[2].toUpperCase()+s[3],s=/^([^-]*)-([a-z])(.*)$/.exec(e);var r=this;setTimeout((function(){r.rules[o].style[e]=i}),1)}else if(this.sheet.insertRule){var a=this.rules[o];if(a){d=a.cssText;if(n=new RegExp("^[^\\{]*(\\{.*"+e+"\\s*\\:\\s*)([^};]*)([^}]*})").exec(d))n[4]!=i&&(d=n[1]+i+n[3],this.sheet.deleteRule(o),this.sheet.insertRule(t+" "+d,o));else d="{ "+(n=new RegExp("\\{([^}]*)}").exec(d))[1]+"; "+e+": "+i+" }",this.sheet.deleteRule(o),this.sheet.insertRule(t+" "+d,o)}}}else{if(d=this.rules[o]){var n=new RegExp("^(.*"+e+"\\s*:\\s*)([^;]*)(.*)$").exec(d);for(var l in n?n[4]!=i&&(this.rules[o]=n[1]+i+n[3]):this.rules[o]=d+"; "+e+": "+i+";",d="",this.ruleIndex)d=l+" {"+this.rules[this.ruleIndex[l]]+"}";this.styleElement.innerHTML=d}var d="",d="";for(var l in this.ruleIndex)d=l+" {"+this.rules[this.ruleIndex[l]]+"}"}}catch(t){h.w.printStackTrace(t)}},V.CSSStyleSheet.prototype.getRuleProperty=function(t,e){var i=this.ruleIndex[t];if(void 0!==i)if(this.sheet){if(this.rules[i].style){for(var o=/^([^-]*)-([a-z])(.*)$/.exec(e);o;)e=o[1]+o[2].toUpperCase()+o[3],o=/^([^-]*)-([a-z])(.*)$/.exec(e);return this.rules[i].style[e]}if(this.sheet.insertRule){var s=this.rules[i];if(s)if(a=s.cssText,r=new RegExp("^.*"+e+"\\s*\\:\\s*([^};]*)").exec(a))return r[1]}}else{var r,a=this.rules[i];if(a)if(r=new RegExp("^.*"+e+"s*:s*([^;]*)").exec(a))return r[1]}},V.CSSStyleSheet.prototype.getRule=function(t){var e=this.ruleIndex[t];if(void 0!==e){if(!this.sheet){var i=this.rules[e];return i}if(this.rules[e].style)return this.rules[e].style.cssText;if(this.sheet.insertRule){var o=this.rules[e];if(o)return i=o.cssText}}};var H={styleSheet:null,initialize:function(){null==WebSquare.cssStyleSheet.styleSheet&&(WebSquare.cssStyleSheet.styleSheet=new WebSquare.styleSheet.CSSStyleSheet)},addRule:function(t,e){try{WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.addRule(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},changeRule:function(t,e,i){WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.changeRule(t,e,i)},getRuleProperty:function(t,e){WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.getRuleProperty(t,e)},getRule:function(t){WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.getRule(t)}},P={_initImport:function(){P.gDragManager.init()}};a.x._initImportList.push("dragdrop"),P.gDragManager={},P.gDragManager.init=function(){try{this.dragGhost=null,this.element=null,this.target=null,this.currentFrame=0,this.deltaX=0,this.deltaY=0,this.oldMouseX=-1,
this.oldMouseY=-1,this.status="stop",this.options={id:"w2drag",className:"w2drag",contents:"",direction:"x y",resizeDirection:"width height",frameGap:20,delay:0,mode:"move",applyMousePosition:!1,dropClass:"",onDrop:null,makeGhostLayer:null,useDragLayer:!1,handleStart:null,handleUpdate:null,handleFinish:null,beforeStart:null,afterFinish:null},this.original={position:"",left:0,top:0,width:0,height:0,mouseX:0,mouseY:0},this.event=new WebSquare.eventControl,this.mouseMoveListener=(t=this,function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];t.update.apply(t,i)}),this.mouseUpListener=function(t){return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];t.finish.apply(t,i)}}(this)}catch(t){h.w.printStackTrace(t)}var t},P.gDragManager.activate=function(t,e,i){try{if(1==WebSquare.util.isMobile()){var o={};!1===i.passive&&(o.passive=!1),WebSquare.event.addListener(document.documentElement,"ontouchmove",this.mouseMoveListener,o),WebSquare.event.addListener(document.documentElement,"ontouchend",this.mouseUpListener,o)}else WebSquare.event.addListener(document.documentElement,"onmousemove",this.mouseMoveListener),WebSquare.event.addListener(document.documentElement,"onmouseup",this.mouseUpListener);WebSquare.util.isFF()&&WebSquare.event.preventDefault(t),this.options=a.x.extend(this.options,i||{});var s=WebSquare.style.getAbsoluteLeft(e,!0),r=WebSquare.style.getAbsoluteTop(e,!0),n=this.getDragGhost(),l=WebSquare.style.getAbsoluteTop(n.render,!0),d=WebSquare.style.getAbsoluteLeft(n.render,!0);"none"==n.render.style.display&&(l=0,d=0),null==n.saveOffsetTop&&(n.saveOffsetTop=l),null==n.saveOffsetLeft&&(n.saveOffsetLeft=d),n.saveLeft=s,n.saveTop=r,this.options.makeGhostLayer&&(n=this.options.makeGhostLayer(n,t),"resize"!=this.options.mode&&"resize_right"!=this.options.mode&&"resize_bottom"!=this.options.mode&&"resize_up"!=this.options.mode&&"resize_upRight"!=this.options.mode&&"resize_upLeft"!=this.options.mode&&"resize_bottomLeft"!=this.options.mode&&"resize_left"!=this.options.mode||n.show()),this.options.contents?n.render.innerHTML=this.options.contents:this.options.showNoData&&(n.render.innerHTML="no data"),this.dragGhostOffsetTop=0,this.dragGhostOffsetLeft=0,this.options.ghostRightTop&&(this.dragGhostOffsetTop=-55,this.dragGhostOffsetLeft=20),n&&(this.dragGhost=n,this.element=e,this.target=this.dragGhost.render,this.original={left:this.dragGhost.saveOffsetLeft+s,top:this.dragGhost.saveOffsetTop+r,width:this.target.offsetWidth,height:this.target.offsetHeight,mouseX:WebSquare.event.getMouseX(t),mouseY:WebSquare.event.getMouseY(t)},this.options.showGhostOnActivate&&(this.options.applyMousePosition?this.drawPosition(this.original.mouseX+this.dragGhostOffsetLeft,this.original.mouseY+this.dragGhostOffsetTop):this.drawPosition(this.original.left+this.dragGhostOffsetLeft,this.original.top+this.dragGhostOffsetTop),n.show())),WebSquare.getBody().addClass("w2drag_activate")}catch(t){h.w.printStackTrace(t)}},P.gDragManager.drawSize=function(t,e,i){try{this.target&&(this.options.minWidth&&t<parseInt(this.options.minWidth)-10||this.options.minHeight&&e<=parseInt(this.options.minHeight)-10?this.finish(i):(t>=0&&this.options.resizeDirection.indexOf("width")>-1&&(this.target.style.width=t+"px"),e>=0&&this.options.resizeDirection.indexOf("height")>-1&&(this.target.style.height=e+"px")))}catch(i){h.w.printStackTrace(i)}},P.gDragManager.drawPosition=function(t,e){try{this.target&&(this.options.direction.indexOf("x")>-1&&(this.target.style.left=(t-WebSquare.style.getAbsoluteLeft(document.body,!0))/(WebSquare.BootLoader.fullViewRatio||1)+"px"),this.options.direction.indexOf("y")>-1&&(this.target.style.top=(e-WebSquare.style.getAbsoluteTop(document.body,!0))/(WebSquare.BootLoader.fullViewRatio||1)+"px"))}catch(t){h.w.printStackTrace(t)}},P.gDragManager.start=function(t){try{"stop"==this.status&&(this.status="started",this.options.beforeStart&&this.options.beforeStart(t),
this.options.handleStart&&this.options.handleStart(t),this.dragGhost.show(),this.dragGhost.setPosition(this.dragGhost.saveLeft,this.dragGhost.saveTop))}catch(t){h.w.printStackTrace(t)}},P.gDragManager.update=function(t){try{var e=!1;if(this.target){WebSquare.event.stopEvent(t);var i=WebSquare.event.getMouseX(t),o=WebSquare.event.getMouseY(t);this.oldMouseX==i&&this.oldMouseY==o||(this.oldMouseX=i,this.oldMouseY=o,e=!0),this.deltaX=i-this.original.mouseX,this.deltaY=o-this.original.mouseY}if(e&&this.target&&Math.abs(this.deltaX)+Math.abs(this.deltaY)>this.options.delay&&this.start(t),e&&this.target&&"started"==this.status){if("move"==this.options.mode){if(this.options.applyMousePosition?this.drawPosition(this.original.mouseX+this.deltaX+this.dragGhostOffsetLeft,this.original.mouseY+this.deltaY+this.dragGhostOffsetTop):this.drawPosition(this.original.left+this.deltaX+this.dragGhostOffsetLeft,this.original.top+this.deltaY+this.dragGhostOffsetTop),this.options.component&&"gridView"===this.options.component.options.pluginName){var s=this.options.component,r=s.getElementById(s.id+"_body_tbody"),a=WebSquare.style.getAbsoluteTop(r);if(s.isMobile){var n=s._checkScrollEnd2();r.offsetHeight+a<o&&2!==n?s.moveYScroll(6):a>o&&1!==n&&s.moveYScroll(-6)}else r.offsetHeight+a<o?s.options.dataDragDropOther||(s.getElementById(s.id+"_scrollY_div").scrollTop+=30):a>o&&(s.options.dataDragDropOther||(s.getElementById(s.id+"_scrollY_div").scrollTop-=30))}}else if("resize"==this.options.mode){var l=this.original.width+this.deltaX,d=this.original.height+this.deltaY,u=this.original.left,c=this.original.top;l<0&&(u-=l=Math.abs(l)),d<0&&(c-=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(u,c),this.drawSize(l,d,t)}else if("resize_right"==this.options.mode){l=this.original.width+this.deltaX,d=this.original.height,u=this.original.left,c=this.original.top;l<0&&(u-=l=Math.abs(l)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(u,c),this.drawSize(l,d,t)}else if("resize_upLeft"==this.options.mode){l=this.original.width-this.deltaX,d=this.original.height-this.deltaY,u=this.original.left+this.deltaX,c=this.original.top+this.deltaY;d<0&&(c+=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(u,c),this.drawSize(l,d,t)}else if("resize_upRight"==this.options.mode){l=this.original.width+this.deltaX,d=this.original.height-this.deltaY,u=this.original.left,c=this.original.top+this.deltaY;d<0&&(c+=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(u,c),this.drawSize(l,d,t)}else if("resize_up"==this.options.mode){l=this.original.width,d=this.original.height-this.deltaY,u=this.original.left,c=this.original.top+this.deltaY;d<0&&(c+=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(u,c),this.drawSize(l,d,t)}else if("resize_bottom"==this.options.mode){l=this.original.width,d=this.original.height+this.deltaY,u=this.original.left,c=this.original.top;d<0&&(c-=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(u,c),this.drawSize(l,d,t)}else if("resize_bottomLeft"==this.options.mode){l=this.original.width-this.deltaX,d=this.original.height+this.deltaY,u=this.original.left+this.deltaX,c=this.original.top;l<0&&(u-=l=Math.abs(l)),d<0&&(c-=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(u,c),this.drawSize(l,d,t)}else if("resize_left"==this.options.mode){l=this.original.width-this.deltaX,d=this.original.height,u=this.original.left+this.deltaX,c=this.original.top;l<0&&(u-=l=Math.abs(l)),
this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(u,c),this.drawSize(l,d,t)}if(this.options.handleUpdate&&this.options.handleUpdate(this.original.left,this.original.top,this.deltaX,this.deltaY,t),this.options.onDragover){var p=null;if(""!=this.options.dragoverClass){for(var g=this.event.getTargetIterator(t);g.next();)g.match(this.options.dragoverClass)&&(p=g.getElement(),g.stop());g=null}this.options.onDragover(this.element,p,this.original.left,this.original.top,this.deltaX,this.deltaY,t)}}}catch(t){h.w.printStackTrace(t)}},P.gDragManager.finish=function(t){try{if(this.target){if("started"==this.status||"visible"==this.dragGhost.getStyle("visibility")){if(WebSquare.util.isMobile()?(WebSquare.event.removeListener(document.documentElement,"ontouchmove",this.mouseMoveListener),WebSquare.event.removeListener(document.documentElement,"ontouchend",this.mouseUpListener)):(WebSquare.event.removeListener(document.documentElement,"onmousemove",this.mouseMoveListener),WebSquare.event.removeListener(document.documentElement,"onmouseup",this.mouseUpListener)),this.options.onDrop){var e=null;if(""!=this.options.dropClass){for(var i=this.event.getTargetIterator(t);i.next();)i.match(this.options.dropClass)&&(e=i.getElement(),i.stop());i=null}this.options.onDrop(this.element,e,this.original.left,this.original.top,this.deltaX,this.deltaY,t)}this.options.handleFinish&&this.options.handleFinish(this.original.left,this.original.top,this.deltaX,this.deltaY,t),this.options.afterFinish&&this.options.afterFinish(this.original.left,this.original.top,this.deltaX,this.deltaY,t),this.dragGhost.hide()}this.init(),WebSquare.getBody().removeClass("w2drag_activate")}}catch(t){h.w.printStackTrace(t)}},P.gDragManager.getDragGhost=function(){try{var t=null,e=WebSquare.getBody();return e&&((t=e.getChild(this.options.id))||(requires("uiplugin/group/group.js"),(t=new WebSquare.uiplugin.group(this.options.id,{className:"w2drag "+this.options.className})).writeTo(e,null,this.parentFrame),t.activate(),t.hide())),t}catch(t){h.w.printStackTrace(t)}},P.gDragManager.remove=function(t){try{this.finish({});var e=WebSquare.getBody();if(e){var i=e.getChild(t);i&&i.remove()}}catch(t){h.w.printStackTrace(t)}};var j={styleHash:new Object,zIndexCorrection:{calendar:100,itemTable:200,toolTip:300},camelize:function(t){var e=t.split("-");if(1==e.length)return e[0];for(var i=0==t.indexOf("-")?e[0].charAt(0).toUpperCase()+e[0].substring(1):e[0],o=1,s=e.length;o<s;o++){var r=e[o];i+=r.charAt(0).toUpperCase()+r.substring(1)}return i},setStyle:function(t,e,i){if("object"==(0,T.Z)(e))for(var o in e)t.style[WebSquare.style.camelize(o)]=e[o];else if("string"==typeof e){if("opacity"==(o=e.capitalizeStyle())){if(void 0===t.style.opacity){var s=parseFloat(i,10);o="filter",i="alpha(opacity="+100*(s=isNaN(s)?1:s)+")"}}else"float"==o&&(void 0!==t.style.cssFloat?t.style.cssFloat=i:void 0!==t.style.styleFloat&&(t.style.styleFloat=i));t.style[o]=i}}};document.documentElement.currentStyle?j.getStyleProperty=function(t,e){e=e.wq_trim().capitalizeStyle();var i=t.currentStyle[e];return e.toLowerCase().indexOf("color")>-1?b.D.toHexColor(i):i}:window.getComputedStyle?j.getStyleProperty=function(t,e){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e);return e.toLowerCase().indexOf("color")>-1?b.D.toHexColor(i):i}:j.getStyleProperty=function(t,e){var i=t.style[e];return e.toLowerCase().indexOf("color")>-1?b.D.toHexColor(i):i},j.getStyle=function(t,e){var i=WebSquare.style.getStyleProperty(t,e);if(!i)if("opacity"==e){var o=(WebSquare.style.getStyleProperty(t,"filter").match(/alpha\(.*\)/gi)||[""])[0].match(/opacity=\d+/gi)||[""];i=parseInt(o[0].substr(8)||"100",10)/100+""}else"float"==e&&(i=WebSquare.style.getStyleProperty(t,"styleFloat"));return i},j.OpacRe1=new RegExp("Gecko"),j.OpacRe2=new RegExp("Konqueror|Safari|KHTML"),j.OpacRe3=new RegExp("MSIE"),j.OpacRe4=new RegExp("alpha\\([^\\)]*\\)","gi"),j.setOpacity=function(t,e){
1==e?(WebSquare.style.setStyle(t,{opacity:WebSquare.style.OpacRe1.test(navigator.userAgent)&&!WebSquare.style.OpacRe2.test(navigator.userAgent)?.999999:null}),WebSquare.style.OpacRe3.test(navigator.userAgent)&&WebSquare.style.setStyle(t,{filter:WebSquare.style.getStyle(t,"filter").replace(WebSquare.style.OpacRe4,"")})):(e<1e-5&&(e=0),WebSquare.style.setStyle(t,{opacity:e}),WebSquare.style.OpacRe3.test(navigator.userAgent)&&WebSquare.style.setStyle(t,{filter:WebSquare.style.getStyle(t,"filter").replace(WebSquare.style.OpacRe4,"")+"alpha(opacity="+100*e+")"}))},j.extendStyle=function(t,e){var i=new Object;for(var o in t)i[WebSquare.style.camelize(o)]=t[o];for(var o in e){i[WebSquare.style.camelize(o)]=e[o]}return i},j.setSize=function(t,e,i){try{if(!t)return;e=parseInt(e),i=parseInt(i),null!=e&&!isNaN(e)&&e>=0&&(t.style.width=e+"px"),null!=i&&!isNaN(i)&&i>=0&&(t.style.height=i+"px")}catch(t){h.w.printStackTrace(t)}},j.getSize=function(t,e){try{if(!t)return;if("height"==(e=e.toLowerCase()))return t.clientHeight;if("width"==e)return t.clientWidth;if("innerheight"==e){var i=parseInt(WebSquare.style.getStyleProperty(t,"padding-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"padding-bottom"))||0;return t.clientHeight+i+o}if("innerwidth"==e){var s=parseInt(WebSquare.style.getStyleProperty(t,"padding-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"padding-right"))||0;return t.clientWidth+s+r}if("outerheight"==e){var a=parseInt(WebSquare.style.getStyleProperty(t,"border-top-width"))||0,n=parseInt(WebSquare.style.getStyleProperty(t,"border-bottom-width"))||0;i=parseInt(WebSquare.style.getStyleProperty(t,"padding-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"padding-bottom"))||0;return t.clientHeight+a+n+i+o}if("outerwidth"==e){var l=parseInt(WebSquare.style.getStyleProperty(t,"border-left-width"))||0,u=parseInt(WebSquare.style.getStyleProperty(t,"border-right-width"))||0;s=parseInt(WebSquare.style.getStyleProperty(t,"padding-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"padding-right"))||0;return t.clientWidth+l+u+s+r}if("outermarginheight"==e){a=parseInt(WebSquare.style.getStyleProperty(t,"border-top-width"))||0,n=parseInt(WebSquare.style.getStyleProperty(t,"border-bottom-width"))||0,i=parseInt(WebSquare.style.getStyleProperty(t,"padding-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"padding-bottom"))||0;var c=parseInt(WebSquare.style.getStyleProperty(t,"margin-top"))||0,p=parseInt(WebSquare.style.getStyleProperty(t,"margin-bottom"))||0;return t.clientHeight+a+n+i+o+c+p}if("outermarginwidth"==e){l=parseInt(WebSquare.style.getStyleProperty(t,"border-left-width"))||0,u=parseInt(WebSquare.style.getStyleProperty(t,"border-right-width"))||0,s=parseInt(WebSquare.style.getStyleProperty(t,"padding-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"padding-right"))||0;var g=parseInt(WebSquare.style.getStyleProperty(t,"margin-left"))||0,m=parseInt(WebSquare.style.getStyleProperty(t,"margin-right"))||0;return t.clientWidth+l+u+s+r+g+m}return void d.k.printLog("getSize : wrong sizeName["+e+"]")}catch(t){h.w.printStackTrace(t)}},j._getSize=function(t,e){try{if(!t)return;if("height"==(e=e.toLowerCase()))return t.clientHeight;if("width"==e)return t.clientWidth;if("innerheight"==e)return t.clientHeight;if("innerwidth"==e)return t.clientWidth;if("outerheight"==e)return t.offsetHeight;if("outerwidth"==e)return t.offsetWidth;if("outermarginheight"==e){var i=parseInt(WebSquare.style.getStyleProperty(t,"margin-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"margin-bottom"))||0;return t.offsetHeight+i+o}if("outermarginwidth"==e){var s=parseInt(WebSquare.style.getStyleProperty(t,"margin-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"margin-right"))||0;return t.offsetWidth+s+r}return void d.k.printLog("getSize : wrong sizeName["+e+"]")}catch(t){h.w.printStackTrace(t)}},j.animate=function(t,e,i){if((i=i||{duration:500}).easing=i.easing||"ease",i.startTime=new Date,
i.key=i.key||"WebSquare.style.animate_"+Math.random(),i.delay=15,"object"==(0,T.Z)(e)){t&&t.render&&(t=t.render);for(var o=b.D.isArray(t)?t:[t],s=[],r=[],a=0;a<o.length;a++){var n=o[a],h={},d=e;for(var u in d)if(h[u]=WebSquare.style.getStyle(n,u),"string"==typeof h[u]){var c=(d[u]+"").wq_trim();c.startsWith("+=")?d[u]=parseFloat(h[u])+parseFloat(c.substr(2)):c.startsWith("-=")&&(d[u]=parseFloat(h[u])-parseFloat(c.substr(2)))}s.push(h),r.push(d)}e=function(t){for(var e=0;e<o.length;e++){var i=o[e],a=s[e],n=r[e];for(var l in n){var h=parseFloat(a[l]),d=a[l].substr((h+"").length),u=h+t*(n[l]-h);WebSquare.style.setStyle(i,l,u+d)}}}}else!i.caller&&t&&(i.caller=t);return l.v.setTimer((function t(){var o=(new Date-i.startTime)/i.duration;o>1&&(o=1);var s=WebSquare.style.cubicBezierAtTime(o,i.easing,i.duration);e.call(i.caller,s),s<1?l.v.setTimer(t,i):i.complete&&i.complete.call(i.caller)}),i),i.key},j.cubicBezierAtTime=function(t,e,i){if("string"==typeof e)switch(e){case"ease":e=[.25,.1,.25,1];break;case"linear":e=[0,0,1,1];break;case"ease-in":e=[.42,0,1,1];break;case"ease-out":e=[0,0,.58,1];break;case"ease-in-out":e=[.42,0,.58,1];break;case"deceleration":e=[0,0,0,1];break;case"acceleration":e=[1,0,1,1];break;case"default":default:e=[.25,.1,.25,1]}var o,s,r=e[0],a=e[1],n=e[2],l=e[3],h=0,d=0,u=0,c=0,p=0,g=0;function m(t){return((h*t+d)*t+u)*t}function f(t){return(3*h*t+2*d)*t+u}return h=1-(u=3*r)-(d=3*(n-r)-u),c=1-(g=3*a)-(p=3*(l-a)-g),o=t,s=function(t){return 1/(200*t)}(i),function(t){return((c*t+p)*t+g)*t}(function(t,e){var i,o,s,r,a,n;function l(t){return t>=0?t:0-t}for(s=t,n=0;n<8;n++){if(l(r=m(s)-t)<e)return s;if(l(a=f(s))<1e-6)break;s-=r/a}if(o=1,(s=t)<(i=0))return i;if(s>o)return o;for(;i<o;){if(l((r=m(s))-t)<e)return s;t>r?i=s:o=s,s=.5*(o-i)+i}return s}(o,s))},j.addClass=function(t,e){try{if(!t||!e)return;for(var i=t.className.wq_trim(),o=i.split(" "),s=0;s<o.length;s++){if((" "+o[s].wq_trim()+" ").indexOf(" "+e+" ")>-1&&s==o.length-1)return}o.length>=1&&(i+=" "),i+=e.wq_trim(),t.className=i}catch(t){h.w.printStackTrace(t)}},j.removeClass=function(t,e){try{if(!t||!e)return;for(var i=t.className.split(" "),o=[],s=0;s<i.length;s++){var r=i[s].wq_trim();(" "+r+" ").indexOf(" "+e+" ")>-1||r.length>0&&o.push(r)}t.className=o.join(" ")}catch(t){h.w.printStackTrace(t)}},j.show=function(t,e){try{if(!t)return;void 0===e&&(e="block"),t.style.display=e,t.style.visibility="visible",b.D.isIE(6)&&WebSquare.style.addClass(t," "),t.setAttribute("aria-hidden","false"),WebSquare.layer.disabledList.length>0&&WebSquare.style.addClass(t,"w2modal_popupLayer")}catch(t){h.w.printStackTrace(t)}},j.hide=function(t){try{if(!t)return;t.style.display="none",t.style.visibility="hidden",t.setAttribute("aria-hidden","true"),WebSquare.style.removeClass(t,"w2modal_popupLayer")}catch(t){h.w.printStackTrace(t)}},j.getAbsoluteTop=function(t,e){var i=0;try{if(!t)return 0;if(null!=t.getBoundingClientRect){var o=t.getBoundingClientRect().top,s=t.ownerDocument,r=s.documentElement,a=s.body,n=s.window===s?s:9===s.nodeType?s.defaultView||s.parentWindow:null,l=r.clientTop||a.clientTop||0,h=n.pageYOffset||r.scrollTop;(b.D.isIE(9)||b.D.isIE(10))&&(h=r.scrollTop);var d=a.getBoundingClientRect();i=(o+h-l)/(b.D.isIE("6")||b.D.isIE("7")?(d.bottom-d.top)/a.offsetHeight:1),e||(i/=WebSquare.style.getScale())}else{for(var u=t,c=t,p=0;"BODY"!=c.tagName;){var g=b.D.parseFloat(b.D.getStyleProperty(c,"border-top-width"),0);b.D.isOpera()&&(g=0);o=c.offsetTop;if("fixed"==b.D.getStyleProperty(c,"position")){if(o=b.D.parseFloat(b.D.getStyleProperty(c,"top"),0),!b.D.isIE("6")){p+=o+g-c.scrollTop+g+(window.scrollY||document.documentElement.scrollTop);break}}else"static"!=b.D.getStyleProperty(c,"position")||u==c?p+=o+g-c.scrollTop:p-=c.scrollTop;c=c.parentNode}i=p}}catch(t){}return i},j.getAbsoluteLeft=function(t,e){var i=0;try{if(!t)return 0;if(null!=t.getBoundingClientRect){
var o=t.getBoundingClientRect().left,s=t.ownerDocument,r=s.documentElement,a=s.body,n=s.window===s?s:9===s.nodeType?s.defaultView||s.parentWindow:null,l=r.clientLeft||a.clientLeft||0,h=n.pageXOffset||r.scrollLeft;(b.D.isIE(9)||b.D.isIE(10))&&(h=r.scrollLeft);var d=a.getBoundingClientRect();i=(o+h-l)/(b.D.isIE("6")||b.D.isIE("7")?(d.right-d.left)/a.offsetWidth:1),e||(i/=WebSquare.style.getScale())}else{for(var u=0,c=t,p=t;"BODY"!=c.tagName;){var g=b.D.parseFloat(b.D.getStyleProperty(c,"border-left-width"),0);b.D.isOpera()&&(g=0);o=c.offsetLeft;if("fixed"==b.D.getStyleProperty(c,"position")){if("number"==typeof b.D.getStyleProperty(c,"left")&&(o=b.D.parseFloat(b.D.getStyleProperty(c,"left"),0)),!b.D.isIE("6")){u+=o+g-c.scrollLeft+(window.scrollX||document.documentElement.scrollLeft);break}}else"static"!=b.D.getStyleProperty(c,"position")||p==c?u+=o+g-c.scrollLeft:u-=c.scrollLeft;c=c.parentNode}i=u}}catch(t){}return i},j.getRelativeTop=function(t,e){var i=0;try{i=WebSquare.style.getAbsoluteTop(t)-WebSquare.style.getAbsoluteTop(e)}catch(t){}return i},j.getRelativeLeft=function(t,e){var i=0;try{i=WebSquare.style.getAbsoluteLeft(t)-WebSquare.style.getAbsoluteLeft(e)}catch(t){}return i},j.adjustZIndex=function(t,e,i){try{for(var o=WebSquare.idCache[t],s=WebSquare.idCache[e],r=$(s.render).css("zIndex"),a=$(s.render).css("zIndex"),n=o.render;n&&n!==document.documentElement;n=n.parentNode){var l=$(n).css("zIndex");!isNaN(l)&&a<l&&(a=parseInt(l,10)+this.zIndexCorrection[i])}r!=a&&$(s.render).css("zIndex",a)}catch(t){h.w.printStackTrace(t,null,this)}},j.getComputedStyle=function(t,e){var i=window.getComputedStyle,o=i?i(t):t.currentStyle,s=e?e.replace(/-(\w)/gi,(function(t,e){return e.toUpperCase()})):"";return o&&!s?o:o&&(o[s]||window.getPropertyValue&&window.getPropertyValue(s))||""},j.toJSON=function(t){var e=document.createElement("a");e.style.cssText=t;var i=a.x.extend({},e.style);return e=null,i},j.getScale=function(){try{var t=1;if(b.D.isIE("6 7 8"))t=1;else if(null!=WebSquare.BootLoader.fullViewRatio)t=WebSquare.BootLoader.fullViewRatio;else if(document.body.style.transform)try{t=document.body.style.transform.split("scale")[1].slice(1,-1)}catch(e){t=1}else if(document.body.style.msTransform)try{t=document.body.style.msTransform.split("scale")[1].slice(1,-1)}catch(e){t=1}else if(b.D.isIE(9))for(var e=self,i=0;i<1e3;i++)try{if(e.parent===e)break;(0,T.Z)(e.parent.WebSquare),(e=e.parent).document.body.style.msTransform&&(t=e.document.body.style.msTransform.split("scale")[1].slice(1,-1))}catch(e){t=1;break}return parseFloat(t)}catch(t){return h.w.printStackTrace(t,null,this),1}};var z=__webpack_require__(2117),G=function(){};G.prototype.parse=function(){var t=(0,g.Z)(f().mark((function t(e,i,o){var s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,this.parseConfig(e),this.parseCSS(e,i,o),t.next=6,this.parseUDC2(e);case 6:return o||(this.parseBuildDate(e),this.parseTitle(e)),this.parseMeta(e),this.parseModels(e,o),t.next=11,this.parseScript(e,o);case 11:return s=t.sent,null!=o?this.parseDataCollections(e,o):this.parseDataCollections(e),this.parseMSA(e,o),t.abrupt("return",s);case 17:t.prev=17,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 20:case"end":return t.stop()}}),t,this,[[1,17]])})));return function(e,i,o){return t.apply(this,arguments)}}(),G.prototype.parseDataCollection=function(t,e,i){try{var o={id:WebSquare.jsonUtil.getAttribute(t,"id"),elementType:"JSON",type:e,option:{}},s=WebSquare.jsonUtil.getAttributesObject(t);for(var r in s)s.hasOwnProperty(r)&&(o.option[r]=s[r]);var a="";switch(e){case"dataList":a="column";break;case"dataMap":a="key"}if("dataList"===e||"dataMap"===e){o[a+"Info"]=[];for(var n=WebSquare.jsonUtil.getNodesByTagName(t,a+"Info",WebSquare.core._XML_NAMESPACE.W2),l=0;l<n.length;l++)for(var d=n[l],u=WebSquare.jsonUtil.getNodesByTagName(d,a,WebSquare.core._XML_NAMESPACE.W2),c=0;c<u.length;c++){var p=u[c];o[a+"Info"].push(this.parseDataCollectionInfo(p))}
var g=WebSquare.jsonUtil.getNodesByTagName(t,"data",WebSquare.core._XML_NAMESPACE.W2);for(l=0;l<g.length;l++){var m=g[l];if(WebSquare.util.getBoolean(WebSquare.jsonUtil.getAttribute(m,"use"))){if("dataList"===e){S=[];var f=WebSquare.jsonUtil.getNodesByTagName(m,"row",WebSquare.core._XML_NAMESPACE.W2);for(c=0;c<f.length;c++){for(var b=f[c],y={},v=WebSquare.jsonUtil.getChildNodes(b),w=0;w<v.length;w++)null==v[w].E?y[v[w].N]="":y[v[w].N]=null!=v[w].E[0].cdata?v[w].E[0].cdata:v[w].E[0].text.wq_trim();S.push(y)}}else{var S={};for(v=WebSquare.jsonUtil.getChildNodes(m),w=0;w<v.length;w++)null==v[w].E?S[v[w].N]="":S[v[w].N]=null!=v[w].E[0].cdata?v[w].E[0].cdata:v[w].E[0].text.wq_trim()}o.option.useData=!0,o.data=S}}}else if("linkedDataList"===e){var C=WebSquare.jsonUtil.getNodesByTagName(t,"condition",WebSquare.core._XML_NAMESPACE.W2);for(l=0;l<C.length;l++){d=C[l];var x=WebSquare.jsonUtil.getAttribute(d,"type"),_=WebSquare.jsonUtil.getChildNodes(d);if(_.length>0){var I="string"==typeof _[0].cdata?_[0].cdata.wq_trim():"";I&&"filter"===x?o.option.filterCondition=I:I&&"sort"===x&&(o.option.sortCondition=I)}}}new WebSquare.DataCollection[e](null,null,o,e,i)}catch(t){h.w.printStackTrace(t)}},G.prototype.parseDataCollectionInfo=function(t){try{var e={},i=WebSquare.jsonUtil.getAttributesObject(t);for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e}catch(t){h.w.printStackTrace(t)}},G.prototype.parseMeta=function(t){var e=["meta","Meta","META"],i=document.getElementsByTagName("head")[0],o=i.getElementsByTagName("meta"),s=[],r=WebSquare.jsonUtil.getNodesByTagName(t,"screen",WebSquare.core._XML_NAMESPACE.W2);if(r&&r.length>0){var a=document.createElement("meta");a.name="viewport",a.content="width=device-width initial-scale=1.0",i.appendChild(a)}for(var n=0;n<o.length;n++){((c=o[n].getAttribute("http-equiv"))||(c=o[n].getAttribute("name")))&&s.push(c)}for(n=0;n<e.length;n++){var l=WebSquare.jsonUtil.getNodesByTagName(t,e[n],WebSquare.core._XML_NAMESPACE.XHTML);if(null!=l)for(var h=0;h<l.length;h++){for(var d=WebSquare.jsonUtil.getAttributes(l[h]),u=0;u<d.length;u++){var c;if("http-equiv"===d[u])c=WebSquare.jsonUtil.getAttribute(l[h],d[u]);else{if("name"!==d[u])continue;c=WebSquare.jsonUtil.getAttribute(l[h],d[u])}for(var p=0;p<s.length;p++)if(s[p]===c){for(var g=0;g<o.length;g++)if(o[g].getAttribute("http-equiv")==c||o[g].getAttribute("name")==c){i.removeChild(o[g]);break}break}break}for(var m=document.createElement("meta"),f=0;f<d.length;f++)m.setAttribute(d[f],WebSquare.jsonUtil.getAttribute(l[h],d[f]));i.appendChild(m)}}},G.prototype.parsePageInheritBefore=function(t,e,i){try{this.preParse(t),this.parseMeta(t),this.parseModels(t,i),null!=i?this.parseDataCollections(t,i):this.parseDataCollections(t)}catch(t){h.w.printStackTrace(t)}},G.prototype.parsePageInheritAfter=function(){var t=(0,g.Z)(f().mark((function t(e,i,o){var s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,this.parseCSS(e,i,o,WebSquare.WebSquaredoc.cssList[0]),t.next=5,this.parseScript(e,o,!0);case 5:return s=t.sent,t.abrupt("return",s);case 9:t.prev=9,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e,i,o){return t.apply(this,arguments)}}(),G.prototype.preParse=function(t,e){try{if(WebSquare.core.browserCheck.ieAllVersion&&WebSquare.BootLoader.useActiveXObject){var i=WebSquare.core.getNamespaces(t),o="";for(var s in i)""!=s&&(o+="xmlns:"+s+'="'+i[s]+'" ');t.setProperty("SelectionLanguage","XPath"),t.setProperty("SelectionNamespaces",o)}!1!==e&&this.parseConfig(t)}catch(t){h.w.printStackTrace(t)}},G.prototype.parseCSS=function(t,e,i,o){try{var s=WebSquare.core.getConfiguration("/WebSquare/stylesheet/@value");if("false"!=WebSquare.core.getConfiguration("/WebSquare/stylesheet/@enable")&&!e&&!i&&!WebSquare.styleSheetEarlyImport){null!=s&&""!=s||(s="link"==WebSquare.core.getConfiguration("/WebSquare/stylesheet/@import")?"stylesheet_ext.css":"stylesheet.css")
;var r=WebSquare.BootLoader.inquiresPath("skin/");WebSquare.skin.addImport(WebSquare.baseThemeURI+r+s),WebSquare.cssManager.executeImport()}this.importCSS(t,i);var a="";if(i&&i.options.cssFunction&&!i.options.strictFrame&&(a=WebSquare.util.getGlobalFunction(i.options.cssFunction,i.id)),i&&!i.options.strictFrame){if("function"==typeof a){for(var n=[],l=0;l<WebSquare.cssManager.externalCSSLink.length;l++)n.push(WebSquare.cssManager.externalCSSLink[l].href);if(!0===a(i.id,n)){for(l=0;l<n.length;l++)for(var d in WebSquare.skin.skinTag)if(WebSquare.util._getAbsolutePath(n[l])==WebSquare.skin.skinTag[d]){WebSquare.skin.skinTag.splice(d,1);break}WebSquare.cssManager.externalCSSLink=[]}}i.frameDoc.cssList=i.frameDoc.cssList.concat(WebSquare.cssManager.executeImport(o))}else WebSquare.WebSquaredoc.cssList=WebSquare.WebSquaredoc.cssList.concat(WebSquare.cssManager.executeImport(o))}catch(t){h.w.printStackTrace(t)}},G.prototype.importCSS=function(t,e){try{for(var i=WebSquare.jsonUtil.getNodesByTagName(t,"style",WebSquare.core._XML_NAMESPACE.XHTML),o="",s=0;s<i.length;s++){var r=i[s];if(WebSquare.jsonUtil.matchType(r,WebSquare.Elem.type.element))for(var a=WebSquare.jsonUtil.getChildNodes(r),n=0;n<a.length;n++){var l=a[n];(WebSquare.jsonUtil.matchType(l,WebSquare.Elem.type.text)||WebSquare.jsonUtil.matchType(l,WebSquare.Elem.type.cdata))&&(o+=l.text||l.cdata)}}""!=o.wq_trim()&&WebSquare.cssManager.addInternalCSS(o);for(a=WebSquare.jsonUtil.getChildNodes(t),s=0;s<a.length;s++){r=a[s];if(WebSquare.jsonUtil.matchType(r,WebSquare.Elem.type.instruction)&&"xml-stylesheet"===r.N){var d=r.instruction.wq_replaceAll("=","").split('"');d.pop();var u={};for(n=0;n<d.length;n+=2)u[d[n].wq_trim()]=d[n+1];if(u.href){var c=WebSquare.core._getMsaOption(e),p=WebSquare.core.getURL(u.href,c);u.href=WebSquare.util.getAbsolutePath(p)}null==u.type&&(u.type="text/css"),null==u.rel&&(u.rel="stylesheet"),WebSquare.skin.addImport(u,!0)}}}catch(t){h.w.printStackTrace(t)}},G.prototype.parseConfig=function(t){try{var e=WebSquare.Elem.api.getElementsByTagName(t,"config",WebSquare.core._XML_NAMESPACE.W2);1===e.length&&WebSquare.WebSquaredoc.mergeConfig(e[0])}catch(t){h.w.printStackTrace(t)}},G.prototype.parseBuildDate=function(t){try{var e=WebSquare.jsonUtil.getNodesByTagName(t,"buildDate",WebSquare.core._XML_NAMESPACE.W2);if(1===e.length){var i=WebSquare.jsonUtil.getChildNodes(e[0]);i.length>0&&(WebSquare.buildDate=i[0].text)}else WebSquare.buildDate="N/A"}catch(t){WebSquare.buildDate="N/A",h.w.printStackTrace(t)}},G.prototype.parseTitle=function(t){try{var e=WebSquare.jsonUtil.getNodesByTagName(t,"title",WebSquare.core._XML_NAMESPACE.XHTML);if(1===e.length){var i=WebSquare.jsonUtil.getChildNodes(e[0]);WebSquare.docTitle=document.title=i[0].text}}catch(t){h.w.printStackTrace(t)}},G.prototype.parseModels=function(t,e){try{for(var i=WebSquare.jsonUtil.getNodesByTagName(t,"model",WebSquare.core._XML_NAMESPACE.XFORMS),o=0;o<i.length;++o)e?e.frameDoc&&!e.options.strictFrame?e.frameDoc.models.push(this.parseModel(i[o],e)):!0===e.options.strictFrame&&WebSquare.WebSquaredoc.models.push(this.parseModel(i[o],e)):WebSquare.WebSquaredoc.models.push(this.parseModel(i[o]))}catch(t){h.w.printStackTrace(t)}},G.prototype.parseDataCollections=function(t,e){var i=WebSquare.jsonUtil.getNodesByTagName(t,"dataCollection",WebSquare.core._XML_NAMESPACE.W2)[0];if(i){this.parseDataCollectionAttribute(i);for(var o=e?e.uuid:null,s=WebSquare.jsonUtil.getChildNodes(i),r=0;r<s.length;r++){var a=s[r];a.T==WebSquare.Elem.type.element&&this.parseDataCollection(a,WebSquare.jsonUtil.dropNS(a.N),o)}}},G.prototype.parseModel=function(t,e){try{var i=this.parseInstances(t),o=this.parseBinds(t),s=this.parseSubmissions(t,e),r=this.parseWorkflows(t,e);return new WebSquare.Model(t,i,o,s,r)}catch(t){h.w.printStackTrace(t)}},G.prototype.parseDataCollectionAttribute=function(t){try{if(WebSquare.DataCollection.options.useConfig){var e=WebSquare.core.getConfig("dataCollection")
;WebSquare.DataCollection.options=a.x.extendKeepingType(WebSquare.DataCollection.options,e)}var i=WebSquare.jsonUtil.getAttributesObject(t);for(var o in i)i.hasOwnProperty(o)&&(WebSquare.nodeValueDeprecated,WebSquare.DataCollection.api.setOption(o,i[o]))}catch(t){h.w.printStackTrace(t)}},G.prototype.parseInstances=function(t){try{for(var e=WebSquare.Elem.api.getElementsByTagName(t,"instance",WebSquare.core._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;o++)i.push(this.parseInstance(e[o]._element._xml));if(0===i.length){i.push(this.parseInstance('<xf:instance xmlns:xf="http://www.w3.org/2002/xforms"><data xmlns=""/></xf:instance>'))}return i}catch(t){h.w.printStackTrace(t)}},G.prototype.parseInstance=function(t){try{return WebSquare.Parser.WebSquareParser.prototype.parseInstance.call(this,t)}catch(t){h.w.printStackTrace(t)}},G.prototype.parseBinds=function(t){try{for(var e=WebSquare.Elem.api.getElementsByTagName(t,"bind",WebSquare.core._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;++o)i.push(this.parseBind(e[o]));return i}catch(t){h.w.printStackTrace(t)}},G.prototype.parseBind=function(t){try{return new WebSquare.Model.Bind(t,"nodeset",t.getAttribute("nodeset"),null,t.getAttribute("id"))}catch(t){h.w.printStackTrace(t)}},G.prototype.parseSubmissions=function(t,e){try{for(var i=WebSquare.Elem.api.getElementsByTagName(t,"submission",WebSquare.core._XML_NAMESPACE.XFORMS),o=[],s=0;s<i.length;s++)o.push(this.parseSubmission(i[s],t,e));return o}catch(t){h.w.printStackTrace(t)}},G.prototype.parseSubmission=function(t,e,i){try{var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"method","")||WebSquare.core.getConfiguration("/WebSquare/submission/method/@value")||"POST",r=WebSquare.WebSquareparser.getAttribute(t,"action","")||WebSquare.core.getConfiguration("/WebSquare/submission/action/@value"),a=WebSquare.WebSquareparser.getAttribute(t,"mode","")||WebSquare.core.getConfiguration("/WebSquare/submission/mode/@value")||"asynchronous",n=WebSquare.WebSquareparser.getAttribute(t,"mediatype","")||WebSquare.core.getConfiguration("/WebSquare/submission/mediatype/@value"),l=WebSquare.WebSquareparser.getAttribute(t,"encoding","")||WebSquare.core.getConfiguration("/WebSquare/submission/encoding/@value")||"UTF-8",d=WebSquare.WebSquareparser.getAttribute(t,"ref"),u=WebSquare.WebSquareparser.getAttribute(t,"target"),c=WebSquare.WebSquareparser.getAttribute(t,"replace"),p=WebSquare.WebSquareparser.getAttribute(t,"instance"),g=WebSquare.WebSquareparser.getAttribute(t,"preSubmitFunction","")||WebSquare.core.getConfiguration("/WebSquare/submission/preSubmitFunction/@value")||"",m=WebSquare.WebSquareparser.getAttribute(t,"customHandler"),f=WebSquare.WebSquareparser.getAttribute(t,"errorHandler");""==f&&(f=WebSquare.core.getConfiguration("/WebSquare/submission/errorHandler/@value"));var b=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==b&&(b=WebSquare.core.getConfiguration("/WebSquare/submission/processMsg/@value"));var y="true"===this.getAttribute(t,"abortTrigger")||"false"!==this.getAttribute(t,"abortTrigger")&&"true"===WebSquare.core.getConfiguration("/WebSquare/submission/abortTrigger/@value"),v=WebSquare.WebSquareparser.getAttribute(t,"soapaction",""),w="true"===WebSquare.WebSquareparser.getAttribute(t,"useModal");""==n&&("post"!=s&&"POST"!=s||(n="application/xml"));var S=WebSquare.Parser.parseEvent(t,i)||[],C=this.getAttribute(t,"timeout","")||WebSquare.core.getConfiguration("/WebSquare/submission/timeout/@value"),x=this.getAttribute(t,"singleMode")||!1,_="false"!==this.getAttribute(t,"hideProcessMsg")&&("true"===this.getAttribute(t,"hideProcessMsg")||"false"!==WebSquare.core.getConfiguration("/WebSquare/submission/hideProcessMsg/@value")),I="true"===this.getAttribute(t,"withCredentials"),T=WebSquare.WebSquareparser.getAttribute(t,"webtopRef",""),k=WebSquare.WebSquareparser.getAttribute(t,"userData1",""),D=WebSquare.WebSquareparser.getAttribute(t,"userData2",""),L=o,W=null,A=""
;i&&i.options&&i.options.scope&&(o=(A=i.id+"_")+L,W=i.id);var E=WebSquare.WebSquareparser.getAttribute(t,"ev:submit"),M=WebSquare.WebSquareparser.getAttribute(t,"ev:submitdone"),q=WebSquare.WebSquareparser.getAttribute(t,"ev:submiterror"),R=WebSquare.WebSquareparser.getAttribute(t,"ev:submittimeout"),N={};E&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit","script",{handler:A+E})),N.submitHandler=E),M&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit-done","script",{handler:A+M})),N.submitDoneHandler=M),q&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit-error","script",{handler:A+q})),N.submitErrorHandler=q),R&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit-timeout","script",{handler:A+R})),N.submitTimeoutHandler=R),N.parentElement=e,N.element=t,N.id=o,N.method=s,N.action=r,N.mode=a,N.bind=null,N.mediatype=n,N.encoding=l,N.ref=d,N.target=u,N.replace=c,N.instance=p,N.customHandler=m,N.errorHandler=f,N.soapaction=v,N.processMsg=b,N.xmlEvents=S,N.timeout=C,N.singleMode=x,N.hideProcessMsg=_,N.abortTrigger=y,N.preSubmitFunction=g,N.scope_id=W,N.withCredentials=I,N.useModal=w,N.webtopRef=T,N.userData1=k,N.userData2=D;var F=new WebSquare.Model.Submission(N);return i&&i.options&&i.options.scope&&(i.scope[L]=F),WebSquare.core.useSubmissionGlobal&&(window[F.id]=F),F}catch(t){h.w.printStackTrace(t)}},G.prototype.parseScript=function(){var t=(0,g.Z)(f().mark((function t(e,i,o,s){var r,a,n,l,d,u,c,p,g,m,b,y,v,w,S,C,x,_,I,T,k,D,L,W;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,s||(i?i.options&&i.options.strictFrame?WebSquare.scriptSection="":i.frameDoc&&(i.frameDoc.scriptSection=""):WebSquare.scriptSection="",i?i.options&&i.options.initScript&&(r=i.options.initScript.toString(),i.options.strictFrame?WebSquare.scriptSection+=r:"executed"===WebSquare.scriptSectionExcuteFlag&&(i.frameDoc.scriptSection+=r)):"true"==WebSquare.core.getConfiguration("/WebSquare/initScript/@value")&&WebSquare.w2xPath!==WebSquare.net.getBlankXML()&&(WebSquare.scriptSection+=WebSquare.core.getConfiguration("/WebSquare/initScript"))),a=i&&i.options.src?i.getSrc():WebSquare.w2xPath,1!==(n=WebSquare.jsonUtil.getNodesByTagName(e,"head",WebSquare.core._XML_NAMESPACE.XHTML)).length){t.next=63;break}l=n[0],d=i&&i._isUDC2,u=0;case 9:if(!(u<l.E.length)){t.next=60;break}if(c=l.E[u],!WebSquare.jsonUtil.matchTagName(c,"script",WebSquare.core._XML_NAMESPACE.XHTML)){t.next=56;break}if(p=WebSquare.jsonUtil.getAttribute(c,"src"),g=WebSquare.util.getBoolean(WebSquare.jsonUtil.getAttribute(c,"scopeExternal"))||i&&i.options.scopeExternal,m=WebSquare.jsonUtil.getAttribute(c,"scopeVariable")||"",null==p||""==p){t.next=22;break}return b=WebSquare.jsonUtil.getAttribute(c,"cache"),y=WebSquare.jsonUtil.getAttribute(c,"defer"),t.next=20,WebSquare.Parser.parseExternalScript({uri:p,cache:b,lazy:y,frameObj:i,pageInherit:o,scopeExternal:g,scopeVariable:m});case 20:t.next=54;break;case 22:if(!s){t.next=24;break}return t.abrupt("continue",57);case 24:if(v=WebSquare.jsonUtil.getAttribute(c,"loadAt"),w="false",S=-1,"string"!=typeof v||""==v){t.next=50;break}v=v.wq_trim().toUpperCase(),t.t0=v,t.next="WEBSQUARE_START"===t.t0||"START"===t.t0?32:"ENGINE_LOAD"===t.t0||"ENGINE"===t.t0?34:"RESOURCE_LOAD"===t.t0||"RESOURCE"===t.t0?36:"CREATE_COMPONENT"===t.t0||"CREATE"===t.t0?38:"RENDER_DOM"===t.t0||"RENDER"===t.t0?40:"ADJUST_COMPONENT"===t.t0||"ADJUST"===t.t0?42:"BIND_EVENT"===t.t0||"EVENT"===t.t0?44:"EXECUTE_SCRIPT"===t.t0||"EXECUTE"===t.t0?46:48;break;case 32:return S=1,t.abrupt("break",50);case 34:return S=2,t.abrupt("break",50);case 36:return S=3,t.abrupt("break",50);case 38:return S=4,t.abrupt("break",50);case 40:return S=5,t.abrupt("break",50);case 42:return S=6,t.abrupt("break",50);case 44:return S=7,t.abrupt("break",50);case 46:case 48:return S=8,t.abrupt("break",50);case 50:for("false"==w||d?(S=!0===WebSquare._async?4:3,"executed"===WebSquare.scriptSectionExcuteFlag&&(C=WebSquare.core.scriptPrecedence,
WebSquare.core.scriptPrecedence=WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/scriptPrecedence/@value")),C!==WebSquare.core.scriptPrecedence&&(x=i&&i.options?i.getSrc():WebSquare.w2xPath,WebSquare.logger.printLog('parser : "scriptPrecedence" turned on. ['+x+"]")))):WebSquare.core.scriptPrecedence,_=S>2&&S<8,I=WebSquare.jsonUtil.getChildNodes(c),T=0;T<I.length;T++)(k=I[T]).T!==WebSquare.Elem.type.text&&k.T!==WebSquare.Elem.type.cdata||(D=k.text||k.cdata,i?(i.options&&i.options.initScript&&"executed"!==WebSquare.scriptSectionExcuteFlag&&!i.options.strictFrame&&(_?i.frameDoc.scriptSection+=i.options.initScript:D=i.options.initScript+D),!0!==WebSquare.core.scriptPrecedence&&i.options&&i.options.postScript&&!_&&!i.options.strictFrame&&(D+=i.options.postScript),D=i.options&&i.options.scope?WebSquare.util.scopingFuncBody(D,i.id,!0):WebSquare.util.scopingFuncBody(D,null,!0),_?(null==WebSquare.executePointScriptArr[S]&&(WebSquare.executePointScriptArr[S]=[]),WebSquare.executePointScriptArr[S].push({script:D,path:a,scope:i&&i.id}),!0===WebSquare.core.scriptPrecedence||i.options.strictFrame||(i.frameDoc.scriptSection+=i.options.postScript)):i.options&&i.options.strictFrame?WebSquare.scriptSection+=D:(i.frameDoc.scriptSection+=D,i._scriptLazy=!0)):(D=WebSquare.util.scopingFuncBody(D,null,!0),S>2&&S<8?(null==WebSquare.executePointScriptArr[S]&&(WebSquare.executePointScriptArr[S]=[]),WebSquare.executePointScriptArr[S].push({script:D,path:a,scope:i&&i.id})):WebSquare.scriptSection+=D));case 54:t.next=57;break;case 56:if(i&&i.scope&&WebSquare.jsonUtil.matchTagName(c,"env",WebSquare.core._XML_NAMESPACE.W2))for(I=WebSquare.jsonUtil.getChildNodes(c),T=0;T<I.length;T++)if((k=I[T]).T===WebSquare.Elem.type.text||k.T===WebSquare.Elem.type.cdata)for(W in"string"==typeof(D=k.text||k.cdata)&&(D=JSON.parse(D)),L=WebSquare.jsonUtil.getAttribute(c,"variable")||"env",i.scope)i.scope[W][L]=D;case 57:u++,t.next=9;break;case 60:s||WebSquare.core.executePointScript(3),t.next=65;break;case 63:return alert(WebSquare.language.getMessage("E_Parser_MoreThanOneHeadError",n.length)),t.abrupt("return",!1);case 65:t.next=70;break;case 67:t.prev=67,t.t1=t.catch(1),h.w.printStackTrace(t.t1);case 70:return t.abrupt("return",!0);case 71:case"end":return t.stop()}}),t,null,[[1,67]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),G.prototype.findBindElement=function(t){try{return null==t.attributes?null:null!=t.attributes.getNamedItem("bind")?WebSquare.ModelUtil.getBind(t.attributes.getNamedItem("bind").value):null}catch(t){h.w.printStackTrace(t)}},G.prototype.parseLabel=function(t){var e=WebSquare.Elem.api.getElementsByTagName(t,"label",WebSquare.core._XML_NAMESPACE.XFORMS);if(null==e[0])return null;for(var i=e[0].getChildNodes(0),o="",s=0;s<i.length;s++)if(3===i[s].nodeType||4===i[s].nodeType){o=i[s].getNodeValue();break}return{value:o}},G.prototype.parseChoices=function(t,e){var i=[];if(e=e||"xf",t){var o="xf"==(e=t.getNamespace())?WebSquare.core._XML_NAMESPACE.XFORMS:WebSquare.core._XML_NAMESPACE.W2,s=WebSquare.Elem.api.getElementsByTagName(t,"choices",o)[0];if(s){var r=WebSquare.Elem.api.getElementsByTagName(s,"item",o);if(r)for(var a=0;a<r.length;++a){var n=r[a],l="",h=WebSquare.Elem.api.getElementsByTagName(n,"label",o)[0];h&&(l=WebSquare.Elem.api.getValue(h,"@ref")||WebSquare.Elem.api.getCDataNodeValue(h)||WebSquare.Elem.api.getTextNodeValue(h));var d="",u=WebSquare.Elem.api.getElementsByTagName(n,"value",o)[0];u&&(d=WebSquare.Elem.api.getValue(u,"@ref")||WebSquare.Elem.api.getCDataNodeValue(u)||WebSquare.Elem.api.getTextNodeValue(u)),i.push({label:l,value:d})}}}return i},G.prototype.parseItemset=function(t,e){var i={nodeset:"",label:"",value:""};try{if(t){e=e||"xf";try{var o=t.getTagName();o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}var s,r="xf"==e?WebSquare.core._XML_NAMESPACE.XFORMS:WebSquare.core._XML_NAMESPACE.W2,a=WebSquare.Elem.api.getElementsByTagName(t,"choices",r)[0];if(a){
if(s=WebSquare.Elem.api.getElementsByTagName(a,"itemset",r)[0]){var n=WebSquare.Elem.api.getValue(s,"@nodeset"),l=WebSquare.Elem.api.getElementsByTagName(s,"label",r)[0],d=WebSquare.Elem.api.getElementsByTagName(s,"value",r)[0],u=WebSquare.Elem.api.getValue(l,"@ref"),c=WebSquare.Elem.api.getValue(d,"@ref");i.nodeset=n,i.label=u,i.value=c}}else if(s=WebSquare.Elem.api.getElementsByTagName(t,"itemset",r)[0]){n=WebSquare.Elem.api.getValue(s,"@nodeset"),l=WebSquare.Elem.api.getElementsByTagName(s,"label",r)[0],d=WebSquare.Elem.api.getElementsByTagName(s,"value",r)[0],u=WebSquare.Elem.api.getValue(l,"@ref"),c=WebSquare.Elem.api.getValue(d,"@ref");i.nodeset=n,i.label=u,i.value=c}}}catch(t){h.w.printStackTrace(t)}return i},G.prototype.parseAttribute=function(t){try{return WebSquare.Parser.parseAttribute(t)}catch(t){h.w.printStackTrace(t)}},G.prototype.getAttribute=function(t,e,i){var o=t.getAttribute(e);return null==o||""==o?void 0!==i?i:"":o},G.prototype.attributesItem=function(t){this.name=t.name,this.ref=t.ref,this.value=t.value},G.prototype.attributesItem.prototype.setValue=function(t){this.value=t},G.prototype.attributesItem.prototype.getValue=function(){return this.value},G.prototype.parseWorkflows=function(t,e){try{for(var i=WebSquare.Elem.api.getElementsByTagName(t,"workflow",WebSquare.core._XML_NAMESPACE.W2),o=[],s=0;s<i.length;s++)o.push(this.parseWorkflow(i[s],t,e));return o}catch(t){h.w.printStackTrace(t)}},G.prototype.parseWorkflow=function(t,e,i){try{var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"resolveCallback",""),r=WebSquare.WebSquareparser.getAttribute(t,"rejectCallback",""),a=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==a&&(a=WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"));for(var n=WebSquare.Elem.api.getElementsByTagName(t,"step",WebSquare.core._XML_NAMESPACE.W2),l=[],d=0;d<n.length;d++){var u=n[d],c=WebSquare.Parser.parseAttribute(u);l.push(c)}var p=o,g=null;i&&i.options&&i.options.scope&&(o=i.id+"_"+p,g=i.id);var m=new WebSquare.Model.Workflow(e,t,o,s,r,a,l,g);return i&&i.options&&i.options.scope&&(i.scope[p]=m),WebSquare.core.useWorkflowGlobal&&(window[m.id]=m),m}catch(t){h.w.printStackTrace(t)}},G.prototype.parseUDC2=function(){var t=(0,g.Z)(f().mark((function t(e){var i,o,s,r,a,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=1,i=WebSquare.Elem.api.getElementsByTagName(e,"head")[0],o=WebSquare.Elem.api.getElementsByTagName(i,"require",WebSquare.core._XML_NAMESPACE.W2),s=0;case 5:if(!(s<o.length)){t.next=18;break}if(r=o[s],(a=r.getAttribute("as")||r.getAttribute("componentName"))&&"page"===r.getAttribute("type")){t.next=10;break}return t.abrupt("continue",15);case 10:if(null!=WebSquare.core.udcObj[a]){t.next=15;break}return n=WebSquare.core.getPageURL(r.getAttribute("src")),t.next=14,WebSquare.jsLoader._loadObj(n);case 14:WebSquare.core.udcObj[a]=t.sent;case 15:s++,t.next=5;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})));return function(e){return t.apply(this,arguments)}}(),G.prototype.parseMSA=function(t,e){var i=WebSquare.jsonUtil.getNodesByTagName(t,"MSA",WebSquare.core._XML_NAMESPACE.W2);(i=i[0])&&(WebSquare.msgBroker||(WebSquare.msgBroker=new WebSquare.MessageBroker),WebSquare.msgBroker.initialize(i,e))};var U=function(t){try{this.data=t,this.data._initParent=!1,this.models=[],this.cssList=[],this.idCollisionList={},this.type="json",this.boundElement=[],this.refElement=[],this.instanceRefElement=[],this.itemsetElement=[],this.boundElementCache={}}catch(t){h.w.printStackTrace(t)}};U.prototype.parsing=function(t){try{if(null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),!WebSquare.WebSquareparser.parse(this.data,t,WebSquare.strictModeFrame))return!1;if(this.parsingUDC(t,WebSquare.strictModeFrame),t?(WebSquare.BootLoader.performanceCheck.mid2=new Date,
WebSquare.BootLoader.printLog("[SPA3][RESOURCE] New resource(XML, Skin, CSS) Load Complete. Time:"+(WebSquare.BootLoader.performanceCheck.mid2.getTime()-WebSquare.BootLoader.performanceCheck.mid1.getTime())+"ms")):(WebSquare.BootLoader.performanceCheck.mid2=new Date,WebSquare.BootLoader.printLog("[STEP3][RESOURCE] Resource(XML, Skin, CSS) Load Complete. Time:"+(WebSquare.BootLoader.performanceCheck.mid2.getTime()-WebSquare.BootLoader.performanceCheck.mid1.getTime())+"ms")),WebSquare.util._stopProcess(t))return;return!!this.renderBody(t)}catch(t){h.w.printStackTrace(t)}},U.prototype.renderBody=function(t){var e=this.data.html.body;if(e.length>1)return alert(WebSquare.language.getMessage("E_pageInfo_MoreThanOneBodyError",e.length)),!1;var i=e["-style"];null!=i&&(this.bodyStyle=i),this.body=e,(new WebSquare.controlManager).run2(e,t)},U.prototype.parsingWFrame=function(){var t=(0,g.Z)(f().mark((function t(e,i){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),t.next=5,WebSquare.WebSquareparser.parse(this.data,e,i);case 5:if(t.sent){t.next=7;break}return t.abrupt("return",!1);case 7:return t.next=9,this.parsingUDC(e,i);case 9:return t.abrupt("return",!0);case 12:t.prev=12,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 15:case"end":return t.stop()}}),t,this,[[1,12]])})));return function(e,i){return t.apply(this,arguments)}}(),U.prototype.parsingPageInheritBefore=function(){var t=(0,g.Z)(f().mark((function t(e,i){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),WebSquare.WebSquareparser.parsePageInheritBefore(this.data,e,i),t.next=6,this.parsingUDC(e,i);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e,i){return t.apply(this,arguments)}}(),U.prototype.parsingPageInheritAfter=function(){var t=(0,g.Z)(f().mark((function t(e,i){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),t.next=5,WebSquare.WebSquareparser.parsePageInheritAfter(this.data,e,i);case 5:return t.abrupt("return",t.sent);case 8:t.prev=8,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e,i){return t.apply(this,arguments)}}(),U.prototype.parsingUDC=function(){var t=(0,g.Z)(f().mark((function t(e,i){var o,s,r,a,n,l,d,u;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=1,o=WebSquare.Elem.api.getElementsByTagName(this.data,"head")[0],s=WebSquare.Elem.api.getElementsByTagName(o,"require",WebSquare.core._XML_NAMESPACE.W2),r=0;case 5:if(!(r<s.length)){t.next=17;break}if("page"!==s[r].getAttribute("type")){t.next=8;break}return t.abrupt("continue",14);case 8:return a=WebSquare.core.getPageURL(s[r].getAttribute("src")),n=s[r].getAttribute("id"),l=s[r].getAttribute("pluginName"),d=s[r].getAttribute("cache"),t.next=14,WebSquare.util.loadUserComponent(a,n,l,i,d);case 14:r++,t.next=5;break;case 17:u=WebSquare.Elem.api.getElementsByTagName(o,"inherit",WebSquare.core._XML_NAMESPACE.W2),r=0;case 19:if(!(r<u.length)){t.next=26;break}return a=WebSquare.core.getPageURL(u[r].getAttribute("src")),t.next=23,WebSquare.util.loadInheritComponent(a);case 23:r++,t.next=19;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 31:case"end":return t.stop()}}),t,this,[[1,28]])})));return function(e,i){return t.apply(this,arguments)}}(),U.prototype.getPageInfo=function(){try{return this.data}catch(t){h.w.printStackTrace(t)}},U.prototype.getType=function(){try{return this.type}catch(t){h.w.printStackTrace(t)}},U.prototype.unrender=function(t,e,i){try{for(var o=0;o<this.boundElement.length;o++){var s=this.boundElement[o]
;s&&void 0!==s.filteredNodeset&&void 0!==s.instance&&(0==s.filteredNodeset.indexOf(t)&&s.instance.id==i&&(void 0!==e&&null!=e&&e==s.id||(WebSquare.util.getComponentById(s.id).hasbeenrendered=!1)))}for(var r in this.refElement){var a=this.refElement[r];a&&void 0!==a.filteredNodeset&&void 0!==a.instance&&(0==a.filteredNodeset.indexOf(t)&&a.instance.id==i&&(void 0!==e&&null!=e&&e==s.id||(WebSquare.util.getComponentById(a.id).hasbeenrendered=!1)))}for(var n in this.itemsetElement){var l=this.itemsetElement[n];if(void 0!==l.filteredNodeset)if((0==t.indexOf(l.filteredNodeset)||0==l.filteredNodeset.indexOf(t))&&-1==l.filteredNodeset.substr(t.length).search(/^\w/)&&l.instance.id==i)if(l.id!=e)try{WebSquare.util.getComponentById(l.id).itemsetrendered=!1}catch(t){}}}catch(t){h.w.printStackTrace(t)}},U.prototype.detectChange=function(t,e,i,o){try{o=o||{};var s=WebSquare.ModelUtil.getModelByID(i),r=!(!o||!o.scope_id),a=s.instances[0].id;if(r)for(var n=0,l=s.instances.length;n<l;n++){var d=s.instances[n];if(d.scope_id===o.scope_id){a=d.id;break}}if(null!=a&&(t=WebSquare.ModelUtil.concatInstanceFunction(t,a)),void 0!==this.boundElementCache[t]&&null!=this.boundElementCache[t])for(var n in this.boundElementCache[t]){var u=n;if(u!=e){var c=WebSquare.util.getComponentById(u);c.modelControl.ref&&c.modelControl.useRef,c.refresh()}}for(var p in WebSquare.WebSquaredoc.itemsetElement){var g=WebSquare.WebSquaredoc.itemsetElement[p];if(void 0!==g.filteredNodeset&&(0==t.indexOf(g.filteredNodeset)||0==g.filteredNodeset.indexOf(t))){var m=g.id;if(m!=e){var f=WebSquare.util.getComponentById(m);f.modelControl.ref&&f.modelControl.useRef,f.refreshItemset()}}}if(!o.gridNoRefresh||o.gridNoRefresh&&1!=o.gridNoRefresh)for(var b=0;b<WebSquare.WebSquaredoc.instanceRefElement.length;b++){var y=WebSquare.WebSquaredoc.instanceRefElement[b];if((!y.scopeId||o.scope_id===y.scopeId)&&(void 0!==y.xpath&&o&&(y.xpath==o.xpath||("copyLastNodeChildrenNodes"==o.op||"setInstanceLastNodeChildNodes"==o.op||"removeInstanceNodeAll"==o.op)&&WebSquare.ModelUtil.isPartialMatchedXPath(y.xpath,o.xpath)||"setInstanceValue"==o.op&&o.xpath.length>y.xpath.length&&WebSquare.ModelUtil.isPartialMatchedXPath(y.xpath,o.xpath)||y.xpath==o.replacexpath&&"replace"==o.type&&"setInstanceNode"==o.op))){var v=y.id;if(v!=e){var w=WebSquare.util.getComponentById(v);"grid"==w.initializeType&&w.refreshGrid(o)}}}}catch(t){h.w.printStackTrace(t)}},U.prototype.mergeConfig=function(t){try{var e=WebSquare.Elem.api.getElementsByTagName(t,"WebSquare")[0];if(!e)return;for(var i={},o=[e._element],s=[i];o.length>0;){var r,a=o.shift(),n=s.shift(),l=a.N;if(l)if(n[l]){if(n[l].constructor===Array)n[l].push({});else{var d=n[l];n[l]=[d],n[l].push({})}r=n[l][n[l].length-1]}else n[l]={},r=n[l];if(a.A&&r)for(var u in a.A)r["@"+u]=a.A[u];for(var c=0;a.E&&c<a.E.length;c++)o.push(a.E[c]),s.push(r||n)}WebSquare.BootLoader.mergeJSON(WebSquare.BootLoader.configurationJSON[0],i),WebSquare.BootLoader.initJSONConfig()}catch(t){h.w.printStackTrace(t)}},U.prototype.initParent=function(){try{if(!1===this.data._initParent){this.data._initParent=!0;for(var t=[this.data];t.length>0;)for(var e=t.pop(),i=0;e.E&&i<e.E.length;i++)e.E[i].parent=e,t.push(e.E[i])}}catch(t){h.w.printStackTrace(t)}};var X=__webpack_require__(3252),K={loadWPackModule:function(t,e){return new Function("return "+t.replace("export default",""))(e)},getPageType:function(t){try{var e=t.slice(t.lastIndexOf(".")),i="js";return".xml"===e&&(i=!0===a.x.convertPageXML?"xmljs":"xml"),i}catch(t){h.w.printStackTrace(t)}},getPageTypeByString:function(t){try{return"/"===t.charAt(0)&&"*"===t.charAt(1)||t.indexOf("export default")>=0?"json":"xml"}catch(t){h.w.printStackTrace(t)}},getPageInfo:function(t,e){try{return new U(t)}catch(t){h.w.printStackTrace(t)}},getUri:function(t,e){try{if("string"!=typeof t)return t;if(!b.D.getBoolean(l.v.getConfiguration("/WebSquare/wpack/@use")))return t;var i=l.v.getConfiguration("/WebSquare/wpack/urlFunction/@value");if(i){
var o=b.D.getGlobalFunction(i);if("function"==typeof o)return o(t)}if(t.slice(0,a.x._resourceURI.length)===a.x._resourceURI&&-1===t.slice(a.x._resourceURI.length).indexOf("../"))return t;void 0!==e&&null!=e||(e={});var s=t,r=l.v.getConfiguration("/WebSquare/wpack/contextRoot/@value")||"/";if("/"!==s.charAt(0)&&-1===s.indexOf("://")){s=b.D.getAbsolutePath(s);var n="/"===r.charAt(0)?"":"/";r=location.origin+n+r}"/"===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1));var d,u=!1;if(e.msaName){var c=l.v._msaServerHash[e.msaName];c&&(r=c.baseURI+r)}if(""===r&&(d=s.indexOf("w2xPath="))>=0)r="w2xPath=",u="/"!==s.charAt(d+r.length);else if((d=s.indexOf(r))<0){if((d=s.indexOf(encodeURIComponent(r)))<0)return s;u=!0}var p,g=l.v.getConfiguration("/WebSquare/wpack/destRoot/@value")||"_wpack_",m=r+"/"+g;if(u?"w2xPath="===r?(m=r+encodeURIComponent("/"+g),p=r.length):(m=encodeURIComponent(m),p=encodeURIComponent(r).length):p=r.length,s.indexOf(m)>=0)return t;var f=s.slice(0,d)+m+s.slice(d+p),y=f.lastIndexOf(".");if(y<0)return t;var v=l.v.getConfiguration("/WebSquare/wpack/srcExtension/@value")||"xml";if(f.slice(y+1)!==v)return t;var w=l.v.getConfiguration("/WebSquare/wpack/destExtension/@value")||"js";return f.slice(0,y+1)+w}catch(e){return h.w.printStackTrace(e),t}}};K.load=function(){var t=(0,g.Z)(f().mark((function t(e,i){var o,s,r,d,p,g;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,void 0!==i&&null!=i||(i={}),o=K.getUri(e,i),s=K.getPageType(o),o=n.d.getResourcePostfix(o),d=l.v.getConfiguration("/WebSquare/wpack/moduleLoader/@value")||"amd",!0!==i.parse){t.next=29;break}if(p=!0,"js"!==s){t.next=22;break}t.t0=d,t.next="amd"===t.t0||"requirejs"===t.t0?13:("import"===t.t0||t.t0,17);break;case 13:return t.next=15,a.x._dynamicImportAMD(o);case 15:return r=t.sent,t.abrupt("break",21);case 17:return t.next=19,a.x._dynamicImport(o);case 19:g=t.sent,r=g.default;case 21:p=!1;case 22:if(!0!==p){t.next=27;break}return t.next=25,u.L.load(o,i.cache,i.progID,i.isNative);case 25:r=t.sent,!0===a.x.convertPageXML&&(r=c.xml2json(r));case 27:t.next=32;break;case 29:return t.next=31,l.v.loadAsync(o,i);case 31:r=t.sent;case 32:return t.abrupt("return",r);case 35:t.prev=35,t.t1=t.catch(1),h.w.printStackTrace(t.t1);case 38:case"end":return t.stop()}}),t,null,[[1,35]])})));return function(e,i){return t.apply(this,arguments)}}(),K._loadObj=function(){var t=(0,g.Z)(f().mark((function t(e,i){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,void 0!==i&&null!=i||(i={}),i.parse=!0,t.next=6,K.load(e,i);case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,i){return t.apply(this,arguments)}}(),K.start=function(){var t=(0,g.Z)(f().mark((function t(e,i){var o,s,r,d,p,g;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,void 0!==i&&null!=i||(i={}),"string"==typeof e&&("json"===K.getPageTypeByString(e)?(e=K.loadWPackModule(e),o="js"):(e=u.L.parse(e),o="xml")),!0===a.x.convertPageXML&&l.v.isXML(e)&&(e=c.xml2json(e),o="xmljs"),a.x.WebSquaredoc=K.getPageInfo(e,o),a.x.WebSquaredoc.cssList=a.x.externalCSSDOM.slice(0),t.next=9,l.v._loadProjectCommon();case 9:return t.next=11,l.v._loadMsaCommon();case 11:return t.next=13,a.x.WebSquaredoc.parsingUDC(s,a.x.strictModeFrame);case 13:return null==a.x.WebSquareParser&&("json"===a.x.WebSquaredoc.getType()?a.x.WebSquareparser=new G:a.x.WebSquareparser=new x.WebSquareParser),t.next=16,a.x.WebSquareparser.parse(a.x.WebSquaredoc.getPageInfo(),s,a.x.strictModeFrame);case 16:if(t.sent){t.next=18;break}return t.abrupt("return");case 18:if((s=!0===i.spa)?(n.d.performanceCheck.mid2=new Date,n.d.printLog("[SPA3][RESOURCE] New resource(XML, Skin, CSS) Load Complete. Time:"+(n.d.performanceCheck.mid2.getTime()-n.d.performanceCheck.mid1.getTime())+"ms")):(n.d.performanceCheck.mid2=new Date,
n.d.printLog("[STEP3][RESOURCE] Resource(XML, Skin, CSS) Load Complete. Time:"+(n.d.performanceCheck.mid2.getTime()-n.d.performanceCheck.mid1.getTime())+"ms")),!b.D._stopProcess(s)){t.next=22;break}return t.abrupt("return");case 22:if(r=[],d=a.x.WebSquaredoc.getType(),r="json"===d?y.h.getNodesByTagName(a.x.WebSquaredoc.getPageInfo(),"body"):u.L.getElementsByTagName(a.x.WebSquaredoc.getPageInfo(),"body",l.v._XML_NAMESPACE.XHTML),"json"===d||1!==r.length){t.next=31;break}null!=(p=r[0].getAttribute("style"))&&(a.x.WebSquaredoc.bodyStyle=p),a.x.WebSquaredoc.body=r[0],t.next=34;break;case 31:if(!("json"!==d||r.length>1)){t.next=34;break}return alert(B.d.getMessage("E_WebSquareDocument_MoreThanOneBodyError",r.length)),t.abrupt("return");case 34:return S.startCache(),g="json"===d?X.D.createByJSON(null,null,r[0],a.x.strictModeFrame,a.x.strictModeFrame?a.x.strictModeFrame.uuid:void 0):X.D.create(null,null,r[0],a.x.strictModeFrame,a.x.strictModeFrame?a.x.strictModeFrame.uuid:void 0),t.next=38,X.D.initAsync();case 38:S.endCache(),s?(n.d.performanceCheck.mid3=new Date,n.d.printLog("[SPA4][CREATE] WebSquare Object Creation & JS Load Complete. Time:"+(n.d.performanceCheck.mid3.getTime()-n.d.performanceCheck.mid2.getTime())+"ms")):(n.d.performanceCheck.mid3=new Date,n.d.printLog("[STEP4][CREATE] WebSquare Object Creation & JS Load Complete. Time:"+(n.d.performanceCheck.mid3.getTime()-n.d.performanceCheck.mid2.getTime())+"ms")),a.x.setBody(g),l.v._controlInvoker("pageInherit","appendModel",[a.x.pageInheritSubmissionList,"submissions"]),l.v._controlInvoker("pageInherit","appendModel",[a.x.pageInheritWorkflowList,"workflows"]),l.v.executePointScript(4),a.x.pageInheritScriptArr&&(a.x.externalScriptArr=a.x.pageInheritScriptArr.concat(a.x.externalScriptArr),a.x.pageInheritScriptArr=[]),a.x.externalScriptArr.length>0?(a.x.externalScriptArr.push(new Function("WebSquare.jsLoader._startCallback("+s+");")),b.D.js.apply(null,a.x.externalScriptArr),a.x.externalScriptArr=[]):K._startCallback(s),t.next=51;break;case 48:t.prev=48,t.t0=t.catch(1),h.w.printStackTrace(t.t0);case 51:case"end":return t.stop()}}),t,null,[[1,48]])})));return function(e,i){return t.apply(this,arguments)}}(),K._startCallback=function(t){try{var e=a.x.body;a.x.WebSquaredoc.cssList=a.x.WebSquaredoc.cssList.concat(S.executeImport());var i=l.v.getConfiguration("/WebSquare/visibleHelper/targetHandler/@value"),o=null,s=!1;if("undefined"!=typeof WebSquareExternal&&WebSquareExternal&&(s=WebSquareExternal.skipRender),s||a.x.targetInfo&&a.x.targetInfo.constructor==Array);else{var r=new Date;o=e.toHTML();var d=new Date;n.d.printLog("html string generation. Time :"+(d-r)+"ms")}if(s);else if(null!=i&&""!=i){var c=b.D.getGlobalFunction(i);"function"==typeof c&&(p=c(o)),null!=p&&("string"==typeof p&&(p=document.getElementById(p)),p.style.cssText=e.options.style),a.x.useVisibleHelper=!0}else if(a.x.targetInfo){var p;if("string"==typeof a.x.targetInfo)(p=document.getElementById(a.x.targetInfo))&&(p.innerHTML=o),p.style.cssText=e.options.style;else if(a.x.targetInfo.constructor==Array){r=new Date;for(var g=0;g<a.x.targetInfo.length;g++){var m=a.x.targetInfo[g],f=a.x.idToUUID[m.component];if(f&&null!=a.x.idCache[f]){var y=m.target;"string"==typeof y&&(y=document.getElementById(y)),y.innerHTML=a.x.idCache[f].toHTML()}}d=new Date;n.d.printLog(" html string generation. Time :"+(d-r)+"ms")}else"object"==(0,T.Z)(a.x.targetInfo)&&(a.x.targetInfo.innerHTML=o);a.x.targetInfo=""}else document.body.innerHTML=o,document.body.style.cssText=e.options.style,n.d.fullViewed&&n.d.zoomed(document.body,a.x.style.getScale());!("onhashchange"in window)&&(t||location.hash.lastIndexOf("w2xPath")>=0)&&(b.D._hiddenFrame?null==document.getElementById(b.D._hiddenFrame.id)&&document.body.appendChild(b.D._hiddenFrame):b.D._makeFrame(),b.D._iframe_wait=!0,b.D._hiddenFrame.contentWindow.location.search=a.x.w2xPath),"true"==l.v.getConfiguration("/WebSquare/mobile/hideAddressBar/@value")&&b.D.isMobile()&&(document.body.scrollTop=1)
;try{var v;if("undefined"!=typeof WebSquareExternal)if(WebSquareExternal.xmlInstance&&(WebSquareExternal.xmlInstance=u.L.parse(WebSquareExternal.xmlInstance)),WebSquareExternal.targetInstance)WebSquareExternal.xmlInstance?v=WebSquareExternal.xmlInstance:WebSquareExternal.jsonInstance&&(v=k.JSON2XML(WebSquareExternal.jsonInstance)),v&&(a.x.WebSquaredoc.models[0].rebuild(v,WebSquareExternal.targetInstance),a.x.WebSquaredoc.models[0].refresh())}catch(t){h.w.printStackTrace(t)}if(t?(n.d.performanceCheck.mid4=new Date,n.d.printLog("[SPA5][RENDER] HTML Rendering Complete. Time:"+(n.d.performanceCheck.mid4.getTime()-n.d.performanceCheck.mid3.getTime())+"ms"),e.preActivate(),n.d.performanceCheck.mid5=new Date,n.d.printLog("[SPA6][ADJUST] Pre Event Activation. Time:"+(n.d.performanceCheck.mid5.getTime()-n.d.performanceCheck.mid4.getTime())+"ms")):(n.d.performanceCheck.mid4=new Date,n.d.printLog("[STEP5][RENDER] HTML Rendering Complete. Time:"+(n.d.performanceCheck.mid4.getTime()-n.d.performanceCheck.mid3.getTime())+"ms"),l.v.executePointScript(5),e.preActivate(),n.d.performanceCheck.mid5=new Date,n.d.printLog("[STEP6][ADJUST] Pre Event Activation. Time:"+(n.d.performanceCheck.mid5.getTime()-n.d.performanceCheck.mid4.getTime())+"ms"),l.v.executePointScript(6)),l.v._businessPreProcessor(),a.x.isWebSquarePopup&&l.v._initPopupParameter(),"synchronous"===(l.v.getConfiguration("/WebSquare/postDrawMode/@value")||"asynchronous")){if(n.d.printLog("[_wg.actionHelper.execute]postDrawMode : synchronous"),b.D._stopProcess(t))return;for(var w in D.activated=!0,D.comp)D.comp[w].activate();if(e.activate(),t?(n.d.performanceCheck.mid6=new Date,n.d.printLog("[SPA7][EVENT] Event Activation. Time:"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"ms")):(n.d.performanceCheck.mid6=new Date,n.d.printLog("[STEP7][EVENT] Event Activation. Time:"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"ms"),l.v.executePointScript(7)),b.D._stopProcess(t))return;if(K._startCallback2(t),b.D._stopProcess(t))return;"onhashchange"in window?window.onhashchange=b.D.onhashchange:b.D._wait_for_iframe_reload(t),e.onComplete(),D.api.onComplete()}else n.d.printLog("[_wg.actionHelper.execute]postDrawMode : asynchronous"),l.v.setTimer((function(t){var e=a.x.body;if(!b.D._stopProcess(t)){for(var i in D.activated=!0,D.comp)D.comp[i].activate();e.activate(),t?(n.d.performanceCheck.mid6=new Date,n.d.printLog("[SPA7][EVENT] Event Activation. Time:"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"ms")):(n.d.performanceCheck.mid6=new Date,n.d.printLog("[STEP7][EVENT] Event Activation. Time:"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"ms"),l.v.executePointScript(7)),b.D._stopProcess(t)||(K._startCallback2(t),b.D._stopProcess(t)||("onhashchange"in window?window.onhashchange=b.D.onhashchange:b.D._wait_for_iframe_reload(t),e.onComplete(),D.api.onComplete()))}}),{key:"WebSquare_startOnload",caller:this,delay:1,args:[t]})}catch(t){h.w.printStackTrace(t)}},K._startCallback2=function(t){try{"true"==l.v.getConfiguration("/WebSquare/clearMemory/@value")&&(window.onbeforeunload=function(){if(a.x.clearMemory){var t,e=!1;try{b.D.isSPA()&&b.D.isIE()&&l.v.browserVersion()<=10&&(l.v.clearJQuery(),e=!0)}catch(t){}if(e||(t=a.x.clearMemory()),!1===t)return t}}),a.x.nowRendering=!1,"function"==typeof a.x.onload&&a.x.onload(),!0!==l.v.scriptPrecedence&&a.x.event.fireEvent(a.x.getBody(),"onpageload");var e=!0,i=WebSquare.core.getConfiguration("/WebSquare/eval/@value")||WebSquare.core.getConfiguration("/WebSquare/executeScript/@value")||"internal";if(a.x.pageInheritScript&&a.x.pageInheritScript.length>0){if(n.d.traceWframe)for(var o=0;o<a.x.pageInheritScript.length;o++)n.d.globalEval(a.x.pageInheritScript[o],i);else a.x.scriptSection=a.x.pageInheritScript.join("")+a.x.scriptSection;a.x.pageInheritScript=[],e=!1}
a.x.wframeScript&&a.x.wframeScript.length>0&&(n.d.traceWframe||(a.x.scriptSection+=a.x.wframeScript.reverse().join(""),a.x.wframeScript=[]),e=!1),(e=e&&l.v._isSinglePage())||(a.x.scriptSection=a.x.scriptIdentifier+a.x.w2xPath+'";'+a.x.scriptSection),l.v._businessPreProcessor(),l.v._controlInvoker("pageInherit","_execute",["script",{order:"postorder"}]),!0===l.v.scriptPrecedence?l.v._controlInvoker("wframe","_execute",["script"]):l.v._controlInvoker("wframe","_execute",["script",{order:"postorder",reverse:!0}]);var s=b.D.getBoolean(l.v.getConfiguration("/WebSquare/postScript/@value"))&&a.x.w2xPath!==a.x.net.getBlankXML();if(s&&!0!==l.v.scriptPrecedence&&!a.x.strictModeFrame&&(a.x.scriptSection+=l.v.getConfiguration("/WebSquare/postScript")),a.x.scriptSectionExcuteFlag="preExecuted",n.d.globalEval(a.x.scriptSection,i),a.x.scriptSection="",n.d.traceWframe&&a.x.wframeScript&&a.x.wframeScript.length>0){for(o=a.x.wframeScript.length-1;o>=0;o--)n.d.globalEval(a.x.wframeScript[o],i);a.x.wframeScript=[]}a.x.scriptSectionExcuteFlag="executed";try{var r=t?"SPA":"STEP";if(n.d.performanceCheck.mid7=new Date,n.d.printLog("["+r+"8][EXECUTE] JS load and Global Script Execution Completed. Time:"+(n.d.performanceCheck.mid7.getTime()-n.d.performanceCheck.mid6.getTime())+"ms"),t||l.v.executePointScript(8),!0===l.v.scriptPrecedence){for(var d in l.v._projectCommonHash){(u=a.x.idCache[l.v._projectCommonHash[d]])&&a.x.event.fireEvent(u._wqContent.childControlList[0],"onpageload")}for(var d in l.v._msaHash){var u;(u=a.x.idCache[l.v._msaHash[d]])&&a.x.event.fireEvent(u._wqContent.childControlList[0],"onpageload")}a.x.event.fireEvent(a.x.getBody(),"onpageload"),l.v._controlInvoker("pageInherit","_execute",["onpageload",{order:"postorder"}]),l.v._controlInvoker("wframe","_execute",["onpageload"]),n.d.performanceCheck.mid8=new Date,n.d.printLog("["+r+"9][ONPAGELOAD] onpageload Completed. Time:"+(n.d.performanceCheck.mid8.getTime()-n.d.performanceCheck.mid7.getTime())+"ms"),l.v._controlInvoker("pageInherit","_execute",["postscript",{order:"postorder"}]);var c="";s&&(a.x.strictModeFrame?c+=a.x.strictModeFrame.options.postScript.toString():c+=l.v.getConfiguration("/WebSquare/postScript")),l.v._controlInvoker("wframe","_execute",["postscript",{order:"postorder"}]),c&&n.d.globalEval(c,i),l.v._controlInvoker("wframe","_execute",["onwframeload"]),n.d.performanceCheck.mid9=new Date,n.d.printLog("["+r+"10][POSTSCRIPT] postscript Completed. Time:"+(n.d.performanceCheck.mid9.getTime()-n.d.performanceCheck.mid8.getTime())+"ms")}}catch(t){h.w.printStackTrace(t)}n.d.performanceCheck.end=new Date;var p="["+r+" SUMMARY] Initial procedures completed. Duration : "+(n.d.performanceCheck.end.getTime()-n.d.performanceCheck.start.getTime())+" 시간 요약 :\t"+(n.d.performanceCheck.mid1.getTime()-n.d.performanceCheck.start.getTime())+"\t"+(n.d.performanceCheck.mid2.getTime()-n.d.performanceCheck.mid1.getTime())+"\t"+(n.d.performanceCheck.mid3.getTime()-n.d.performanceCheck.mid2.getTime())+"\t"+(n.d.performanceCheck.mid4.getTime()-n.d.performanceCheck.mid3.getTime())+"\t"+(n.d.performanceCheck.mid5.getTime()-n.d.performanceCheck.mid4.getTime())+"\t"+(n.d.performanceCheck.mid6.getTime()-n.d.performanceCheck.mid5.getTime())+"\t"+(n.d.performanceCheck.mid7.getTime()-n.d.performanceCheck.mid6.getTime())+"\t";!0===l.v.scriptPrecedence&&(p+=n.d.performanceCheck.mid8.getTime()-n.d.performanceCheck.mid7.getTime()+"\t"+(n.d.performanceCheck.mid9.getTime()-n.d.performanceCheck.mid8.getTime())+"\t"),p+=n.d.performanceCheck.end.getTime()-n.d.performanceCheck.start.getTime(),n.d.printLog(p);try{a.x.lazyImportsArr.length>0&&(a.x.lazyImportsArr.push((function(){n.d.printLog("defer JavaScript loaded.")})),n.d.printLog("defer JavaScript loading."),b.D.js.apply(null,a.x.lazyImportsArr),a.x.lazyImportsArr=[])}catch(t){h.w.printStackTrace(t)}try{window.$integrity&&window.$integrity()}catch(t){h.w.printStackTrace(t)}l.v._fireParentOnload(),l.v._controlInvoker("wframe","_clearPending"),
l.v._controlInvoker("pageInherit","_clearPending")}catch(t){h.w.printStackTrace(t)}};var Y={createFormatter:function(t,e,i,o,s,r,a,n){try{var l=null;if(i)return(l=new WebSquare.format.formatterAdapter(t,e,i,o)).scope_id=a,l.callerId=n,l;if(""!=t)switch(t){case"text":l=new WebSquare.format.textFormatter(t,e,i,o);break;case"bigDecimal":case"number":l=""==e?new WebSquare.format.emptyFormatter(t,e,i,o):new WebSquare.format.numberFormatter(t,e,i,o,s,r);break;case"float":l=new WebSquare.format.floatFormatter(t,e,i,o,s,r);break;case"euro":l=new WebSquare.format.euroFormatter(t,e,i,o,s,r);break;case"rupee":l=new WebSquare.format.rupeeFormatter(t,e,i,o,s,r);break;case"tenge":l=new WebSquare.format.tengeFormatter(t,e,i,o,s,r);break;case"date":l=new WebSquare.format.dateFormatter(t,e,i,o);break;case"time":l=new WebSquare.format.timeFormatter(t,e,i,o);break;case"textMask":l=new WebSquare.format.textMaskFormatter(t,e,i,o);break;case"numberMask":l=new WebSquare.format.numberMaskFormatter(t,e,i,o,s,r);break;case"reverseTextMask":l=new WebSquare.format.reverseTextMaskFormatter(t,e,i,o);break;case"reverseNumberMask":l=new WebSquare.format.reverseNumberMaskFormatter(t,e,i,o,s,r);break;default:l=new WebSquare.format.emptyFormatter(t,e,i,o)}else l=new WebSquare.format.emptyFormatter(t,e,i,o);return l.scope_id=a,l.callerId=n,l}catch(t){h.w.printStackTrace(t)}},formatter:function(t,e,i,o){try{this.type=t||"text",this.masking=e||"",this.userFunc=i||null,this.ioFormat=o||null,this.callerId="",this.count=0,this.hash_format_to_original={}}catch(t){h.w.printStackTrace(t)}}};Y.formatter.prototype.setMasking=function(t){this.masking=t},Y.formatter.prototype.format=function(t,e){try{if(WebSquare.util.isNull(t))return"";t=t.toString();var i=this.executeFormat(t,e);return this.count>100&&(this.hash_format_to_original={},this.count=0),this.hash_format_to_original[i]=t,this.count++,i}catch(t){h.w.printStackTrace(t)}},Y.formatter.prototype.unformat=function(t){try{return null!=this.hash_format_to_original[t]?this.hash_format_to_original[t]:t}catch(t){h.w.printStackTrace(t)}},Y.formatter.prototype.executeFormat=function(t){alert("you should override 'executeFormat'")},Y.emptyFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(Y.emptyFormatter.prototype,Y.formatter.prototype),Y.emptyFormatter.prototype.executeFormat=function(t){return t},Y.textFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(Y.textFormatter.prototype,Y.formatter.prototype),Y.textFormatter.prototype.executeFormat=function(t){try{return t=WebSquare.text.formatText(t,this.masking,this.ioFormat)}catch(t){h.w.printStackTrace(t)}},Y.numberFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.x.extend(Y.numberFormatter.prototype,Y.formatter.prototype),Y.numberFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.w.printStackTrace(t)}},Y.floatFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s||",",this.decimalDelimiter=r||"."},a.x.extend(Y.floatFormatter.prototype,Y.formatter.prototype),Y.floatFormatter.prototype.executeFormat=function(t,e){try{var i="";t.length>0&&("-"==t[0]||"+"==t[0])&&(i=t[0],t=t.substring(1));var o=t.split(this.decimalDelimiter),s=o[0].split(this.delimiter).join(""),r=o[1]||"";if(1==this.masking.split(this.decimalDelimiter).length)s=WebSquare.text.formatCurrency(s,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter);else{var a=WebSquare.text.unformatCurrency(this.masking,t);s=(o=WebSquare.text.formatCurrency(a,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter).split(this.decimalDelimiter))[0]||"",r=o[1]||""}return 2===o.length?i+s+"."+r:i+s}catch(t){h.w.printStackTrace(t)}},Y.euroFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),
this.delimiter=s,this.decimalDelimiter=r},a.x.extend(Y.euroFormatter.prototype,Y.formatter.prototype),Y.euroFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatEuroCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.w.printStackTrace(t)}},Y.rupeeFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.x.extend(Y.rupeeFormatter.prototype,Y.formatter.prototype),Y.rupeeFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatRupeeCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.w.printStackTrace(t)}},Y.tengeFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.x.extend(Y.tengeFormatter.prototype,Y.formatter.prototype),Y.tengeFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatTengeCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.w.printStackTrace(t)}},Y.dateFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(Y.dateFormatter.prototype,Y.formatter.prototype),Y.dateFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatDate(t,this.masking,this.ioFormat,e)}catch(t){h.w.printStackTrace(t)}},Y.timeFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(Y.timeFormatter.prototype,Y.formatter.prototype),Y.timeFormatter.prototype.executeFormat=function(t){try{return t=WebSquare.text.formatTime(t,this.masking,this.ioFormat)}catch(t){h.w.printStackTrace(t)}},Y.formatterAdapter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o),this.userFunc=i},a.x.extend(Y.formatterAdapter.prototype,Y.formatter.prototype),Y.formatterAdapter.prototype.executeFormat=function(t){try{if("function"!=typeof this.userFunc)try{var e=WebSquare.util.getGlobalFunction(this.userFunc,this.scope_id);"function"==typeof e&&(this.userFunc=e)}catch(t){}return"function"==typeof this.userFunc&&(t=this.userFunc(t)),t}catch(t){h.w.printStackTrace(t)}},Y.textMaskFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(Y.textMaskFormatter.prototype,Y.formatter.prototype),Y.textMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatTextMask(t,this.masking,this.allowChar)}catch(t){h.w.printStackTrace(t)}},Y.textMaskFormatter.prototype.setAllowChar=function(t){try{this.allowChar=t}catch(t){h.w.printStackTrace(t)}},Y.reverseTextMaskFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(Y.reverseTextMaskFormatter.prototype,Y.formatter.prototype),Y.reverseTextMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatReverseTextMask(t,this.masking,this.allowChar)}catch(t){h.w.printStackTrace(t)}},Y.reverseTextMaskFormatter.prototype.setAllowChar=function(t){try{this.allowChar=t}catch(t){h.w.printStackTrace(t)}},Y.numberMaskFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.x.extend(Y.numberMaskFormatter.prototype,Y.formatter.prototype),Y.numberMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatNumberMask(t,this.masking,this.delimiter)}catch(t){h.w.printStackTrace(t)}},Y.reverseNumberMaskFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.x.extend(Y.reverseNumberMaskFormatter.prototype,Y.formatter.prototype),Y.reverseNumberMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatReverseNumberMask(t,this.masking)}catch(t){h.w.printStackTrace(t)}};var Z=function(t){function e(t,e){t[t.length]=e}function i(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function o(t){return!s(t)&&"("!=t&&")"!=t}function s(t){return"+"==t||"-"==t||"*"==t||"/"==t||"^"==t||"%"==t}
function r(t){return t[t.length-1]}function a(t){return 0==t.length}function n(t){return"^"==t?5:"*"==t||"/"==t||"%"==t?4:"+"==t||"-"==t?3:"("==t?2:")"==t?1:void 0}function l(t,l,h){l=new Array;var d=new Array,u=0;t=function(t){for(var e=t.split(""),i=new String(""),r=new Array,a=0,n=0;n<e.length;n++)o(e[n])&&null==e[n].match(/\s/)&&(i+=e[n]),(s(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(r[a]=i,a++),i="",r[a]=e[n],a++),n==e.length-1&&""!=i&&(r[a]=i);return r}(t);for(var c=0;c<t.length;c++){if(o(t[c])&&(l[u]=t[c],u++),s(t[c])){if("^"!=t[c])for(;!a(d)&&n(t[c])<=n(r(d));)l[u]=r(d),i(d),u++;else for(;!a(d)&&n(t[c])<n(r(d));)l[u]=r(d),i(d),u++;e(d,t[c])}if("("==t[c]&&e(d,t[c]),")"==t[c]){for(;"("!=r(d);)l[u]=i(d),u++;i(d)}}for(;!a(d);)"("==r(d)?i(d):l[l.length]=i(d);var p="";for(c=0;c<l.length;c++)p+=l[c];return 0==h?p:l}function d(t,e,i){var o;try{return"+"==i&&(o=t.plus(e)),"-"==i&&(o=t.minus(e)),"*"==i&&(o=t.times(e)),"/"==i&&(o=t.divide(e)),"^"==i&&(o=t.pow(e)),"%"==i&&(o=t.mod(e)),o}catch(t){h.w.printStackTrace(t)}}var u=function(t){return new WebSquare.bigDecimalObj(t)};return u.calc=function(t,s,a){var n=l(t);return WebSquare.bigDecimal(function(t,s,a){for(var n,l,h=new Array,u=0;u<t.length;u++)if(o(t[u]))e(h,t[u]);else{var c;if(s&&s[r(h)])n=s[r(h)];else if((c=r(h)).constructor===WebSquare.bigDecimalObj)n=c;else if("string"==typeof c){var p=WebSquare.util.scopingFuncBody(c,a);n=Function(p).call(this)}else n=new Function("return "+c)();n.constructor!=WebSquare.bigDecimalObj&&(n=WebSquare.bigDecimal(n)),i(h),s&&s[r(h)]?l=s[r(h)]:"string"==typeof(c=r(h))?(p=WebSquare.util.scopingFuncBody(c,a),l=Function(p).call(this)):l=new Function("return "+c)(),l.constructor!=WebSquare.bigDecimalObj&&(l=WebSquare.bigDecimal(l));var g=d(l,n,t[u]);i(h),e(h,g)}return r(h)}(n,s,a))},u}(window),J=function(t){try{""===t?(t="0",this.emptyStr=!0):this.emptyStr=!1,this.big=window.Big(t)}catch(t){this.big=NaN}};J.prototype.plus=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"plus")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.minus=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"minus")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.divide=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"div")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.times=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"times")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.pow=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"pow")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.mod=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"mod")}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.toString=function(){if(isNaN(this.big))return NaN;var t=this.big.toFixed();return!this.emptyStr||"0"!==t&&0!==t||(t=""),t},J.prototype.compare=function(t,e){try{if(e)var i=1==this.big.lt(t)?this:t;else i=1==this.big.gt(t)?this:t;return i}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.handleZero=function(t,e,i){try{var o="";e.emptyStr&&""===e.toString()?o=t.big[i](0):("pow"===i&&(e=parseInt(e.toString(),10)),o=t.big[i](e));var s=WebSquare.bigDecimal(o);return"0"===s.toString()&&t.emptyStr&&e.emptyStr&&(s=""),s}catch(t){return h.w.printStackTrace(t),WebSquare.bigDecimal(NaN)}};var Q={getSubmission:I.z.getSubmission,createSubmission:I.z.createSubmission,deleteSubmission:I.z.deleteSubmission,executeSubmission:I.z.executeSubmission,getStringByteSize:b.D.getStringByteSize,getRefToReqData:b.D.getRefToReqData,dynamicCreate:b.D.dynamicCreate,createWorkflow:I.z.createWorkflow,deleteWorkflow:I.z.deleteWorkflow,getWorkflow:I.z.getWorkflow,getRunningWorkflow:I.z.getRunningWorkflow,isRunningWorkflow:I.z.isRunningWorkflow,getRunningWorkflowID:I.z.getRunningWorkflowID,rejectWorkflow:I.z.rejectWorkflow,
executeWorkflow:I.z.executeWorkflow,executeSerial:I.z.executeSerial,executeParallel:I.z.executeParallel,executeWhilst:I.z.executeWhilst,openPopup:b.D.openPopup,getPopupParam:b.D.getPopupParam,closePopup:b.D.closePopup,getPopup:b.D.getPopup,getPopupList:b.D.getPopupList,getPopupWindow:b.D.getPopupWindow,getPopupWindowList:b.D.getPopupWindowList,isPopup:b.D.isPopup,setDocumentLang:b.D.setDocumentLang,setDisabled:b.D.setDisabled,setDomain:b.D.setDomain,url:b.D.url,js:b.D.js,reinitialize:b.D.reinitialize,clearPage:b.D.clearPage,setTimeout:b.D.setTimeout,clearTimeout:b.D.clearTimeout,setInterval:b.D.setInterval,clearInterval:b.D.clearInterval,getTimeoutKeys:b.D.getTimeoutKeys,getIntervalKeys:b.D.getIntervalKeys,getIntervalKeyList:b.D.getIntervalKeyList,getTimeoutKeyList:b.D.getTimeoutKeyList,toTimestampString:A.h.toTimestampString,dateDiff:A.h.dateDiff,dateAdd:A.h.dateAdd,getFormattedDate:A.h.getFormattedDate,getCurrentServerDate:A.h.getCurrentServerDate,updateServerTime:A.h.updateServerTime,getMaxMinYear:A.h.getMaxMinYear,parseDate:A.h.parseDate,showModal:M.showModal,hideModal:M.hideModal,log:d.k.printLog,enableLog:d.k.enableLog,disableLog:d.k.disableLog,getParameter:L.getParameter,getAllParameter:L.getAllParameter,getBASE64Parameter:L.getBASE64Parameter,getAllBASE64Parameter:L.getAllBASE64Parameter,URLEncoder:E.f.URLEncoder,ajax:L.ajax,download:L.download,data:D.api,setFullView:b.D.setFullView,mirrorView:b.D.mirrorView,watermark:b.D.watermark,createProgressbar:b.D.createProgressBar,getRuntimeId:b.D.getRuntimeId,isWFramePopup:b.D.isWFramePopup,getPopupUrl:b.D.getPopupUrl,getPopupId:b.D.getPopupId,getFrameId:b.D.getFrameId,getFrame:b.D.getFrame,getParentWindow:b.D.getParentWindow,getComponentById:b.D.getComponentById,getEventTarget:b.D.getEventTarget,parent:b.D.getParentWindow,top:b.D.getTopWindow,main:b.D.getMainFrame,debug:d.f,bigDecimal:Z,getMetaValue:b.D.getMetaValue,encodeParameter:b.D.encodeParameter,multipleExcelUpload:b.D.multipleExcelUpload,multipleExcelDownload:b.D.multipleExcelDownload,getMediaInfo:b.D.getMediaInfo,updateSuffix:b.D.updateSuffix,$:b.D.jQuerySelector},tt=function(){this.font_cho=new Array("ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"),this.font_jung=new Array("ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"),this.font_jong=new Array("","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ")};tt.prototype={getCho:function(t){return this.font_cho[parseInt((t-44032)/588)]},getJung:function(t){return this.font_jung[parseInt((t-44032)%588/28)]},getJong:function(t){return this.font_jong[parseInt((t-44032)%588%28)]},getChoArr:function(t){for(var e=[],i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o);s-44032>=0?e.push(this.getCho(s)):e.push(t.charAt(o))}return e},getJungArr:function(t){for(var e=[],i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o);s-44032>=0?e.push(this.getJung(s)):e.push("")}return e},getJongArr:function(t){for(var e=[],i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o);s-44032>=0?e.push(this.getJong(s)):e.push("")}return e},matchArr:function(t,e,i){var o=!0;if(t.length!=e.length)o=!1;else for(var s=t.length,r=0;r<s;r++)if((i||""!=e[r])&&t[r]!=e[r]){o=!1;break}return o},containArr:function(t,e,i,o,s){var r=t.length,a=!1,n=function t(e,i,o,s){i.length-1>s&&(0===i[s+1]?a=!0:e[o+1]==i[s+1]?t(e,i,o+1,s+1):a=!1)};if(i.length>0){for(var l=[],h=0;h<i.length;h++){if(1==e.length&&""==e[0])return{result:a=!0,matchedArr:i};var d=i[h];if(t[d]==e[0]&&(l.push(d),a=!0,n(t,e,d,0),1==a))break}i=l}else{for(var u=0;u<r;u++){if(1==e.length&&""==e[0])return{result:a=!0,matchedArr:i};t[u]==e[0]&&(a=!0,n(t,e,u,0),1==a&&i.push(u))}i.length>0&&(a=!0)}return{result:a,matchedArr:i,first:undefined}},matchStr:function(t,e,i){return!!(this.matchArr(this.getChoArr(t),this.getChoArr(e),i)&&this.matchArr(this.getJungArr(t),this.getJungArr(e),i)&&this.matchArr(this.getJongArr(t),this.getJongArr(e),i))},
containStr:function(t,e,i){var o=this.containArr(this.getChoArr(t),this.getChoArr(e),[],!0,!1),s=this.containArr(this.getJungArr(t),this.getJungArr(e),o.matchedArr,!1),r=this.containArr(this.getJongArr(t),this.getJongArr(e),s.matchedArr,!1,!0);return!!(o.result&&s.result&&r.result)},startWith:function(t,e){return!(e.length>t.length)&&this.matchStr(t.substr(0,e.length),e)},containWith:function(t,e){return!(e.length>t.length)&&this.containStr(t,e)}};var et=function(){};et.prototype.initialize=function(t,e){if(WebSquare.BootLoader.configurationJSON[0].WebSquare.projectCommon){var i=WebSquare.msgBroker;i.channels||(i.channels={}),i.subscribers||(i.subscribers={}),i.publishers||(i.publishers={});try{var o=WebSquare.jsonUtil.getNodesByTagName(t,"channels",WebSquare.core._XML_NAMESPACE.W2)[0];if(o&&(o=o.E),o){var s=WebSquare.BootLoader.configurationJSON[0].WebSquare.projectCommon.module;if(!s)return;s.constructor!==Array&&(s=[s]);for(var r="",a=0;a<s.length;a++){var n=s[a];n["@src"]==e.getSrc()&&(r=n["@name"])}for(a=0;a<o.length;a++)if(o[a].A&&o[a].A.id){var l=r?r+"."+o[a].A.id:o[a].A.id;i.channels[l]||(i.channels[l]={})}else WebSquare.exception.printStackTrace(new Error("channelId is not defined"))}var h=WebSquare.jsonUtil.getNodesByTagName(t,"subscribers",WebSquare.core._XML_NAMESPACE.W2)[0];if(h&&(h=h.E),h)for(a=0;a<h.length;a++){var d=h[a];if(d.A&&d.A.id&&d.A.channelId&&d.A.onmessage){var u=d.A.id,c={channelId:g=d.A.channelId,handler:d.A.onmessage,scope_obj:e,org_id:u,url:e.getSrc()};new et.Subscriber(c)}else WebSquare.exception.printStackTrace(new Error("Required property is not defined"))}var p=WebSquare.jsonUtil.getNodesByTagName(t,"publishers",WebSquare.core._XML_NAMESPACE.W2)[0];if(p&&(p=p.E),p)for(a=0;a<p.length;a++){u=p[a].A.id;var g=p[a].A.channelId;new et.Publisher({channelId:g,scope_obj:e,org_id:u})}}catch(t){WebSquare.exception.printStackTrace(t)}}},et.Publisher=function(t){try{if(null!=t.id&&(this.id=t.id,null!=window[WebSquare.noConflict].comp[this.id]))return;this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,this.scope_obj=t.scope_obj,this.channelId=t.channelId,this.org_id=t.org_id,this.scope_obj&&null==this.scope_obj.scope[this.org_id]&&(this.scope_obj.scope[this.org_id]=this),WebSquare.msgBroker.publishers[this.id]=this}catch(t){WebSquare.exception.printStackTrace(t)}},et.prototype.getSubscribers=function(t){for(var e=this._getSubscribers(t),i=[],o=0;o<e.length;o++)i.push(WebSquare.idCache[e[o]]);return i},et.prototype.remove=function(t){if(t instanceof et.Subscriber){var e=t.channelId,i=t.org_id,o=t.uuid,s=t.id;try{if(e.constructor==Array)for(var r=0;r<e.length;r++)e[r],delete WebSquare.msgBroker.channels[e[r]][s];else"string"==typeof e&&delete WebSquare.msgBroker.channels[e][s];delete t.scope_obj.scope[i],delete WebSquare.msgBroker.subscribers[s],delete WebSquare.idToUUID[s],delete WebSquare.idCache[o]}catch(t){WebSquare.exception.printStackTrace(t)}}else if(t instanceof et.Publisher){e=t.channelId,i=t.org_id,o=t.uuid,s=t.id;try{delete WebSquare.msgBroker.publishers[s].scope_obj.scope[i],delete WebSquare.msgBroker.publishers[s],delete WebSquare.idCache[o],delete WebSquare.idToUUID[s]}catch(t){WebSquare.exception.printStackTrace(t)}}},et.prototype.removeAllSubscribers=function(){for(var t in WebSquare.msgBroker.subscribers)this.remove(WebSquare.msgBroker.subscribers[t])},et.prototype.removeAllPublishers=function(){for(var t in WebSquare.msgBroker.publishers)this.remove(WebSquare.msgBroker.publishers[t])},et.prototype.getAllSubscribers=function(){var t=[],e=WebSquare.msgBroker.subscribers;for(var i in e)t.push(WebSquare.msgBroker.subscribers[i]);return t},et.prototype.getAllPublishers=function(t){var e=[],i=WebSquare.msgBroker.publishers;for(var o in i)e.push(WebSquare.msgBroker.publishers[o]);return e},et.prototype._getSubscribers=function(t){return WebSquare.msgBroker.channels[t]},
et.Publisher.prototype.postMessage=function(t){if("string"==typeof t)try{var e=WebSquare.msgBroker.channels[this.channelId];for(var i in e){var o=e[i].handler,s="";e[i].scope_obj&&(s=e[i].scope_obj.id),WebSquare.util.getGlobalFunction(o,s).call(e[i],t)}}catch(t){WebSquare.exception.printStackTrace(t)}},(et.Subscriber=function(t){try{if(null!=t.id&&(this.id=t.id,null!=window[WebSquare.noConflict].comp[this.id]))return;if(this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,this.org_id=t.org_id,this.scope_obj=t.scope_obj,!this.scope_obj)throw"scope_obs is not defined";this.channelId=t.channelId,this.handler=t.handler,null==this.scope_obj.scope[this.org_id]&&(this.scope_obj.scope[this.org_id]=this),this.src=this.scope_obj.getSrc(),WebSquare.msgBroker.channels[this.channelId]||(WebSquare.msgBroker.channels[this.channelId]={}),WebSquare.msgBroker.channels[this.channelId][this.id]=this,WebSquare.msgBroker.subscribers[this.id]=this}catch(t){WebSquare.exception.printStackTrace(t)}}).prototype.subscribe=function(t){if("string"==typeof this.channelId)this.channelId=[this.channelId],this.channelId.push(t);else{if(this.channelId.constructor!=Array)return;this.channelId.push(t)}WebSquare.msgBroker.channels[t]&&(WebSquare.msgBroker.channels[t][this.id]=this)},et.Subscriber.prototype.unsubscribe=function(t){if(WebSquare.msgBroker.channels[t]&&this.channelId.constructor==Array){var e=this.channelId.indexOf(t);e>-1&&(this.channelId.splice(e,1),delete WebSquare.msgBroker.channels[t][this.id])}};var it=__webpack_require__(5118),ot=__webpack_require__(4748),st=function(t,e,i,o,s){try{this.id=t,this.model=e,this.ref=i,this.bind=o,this.itemsetObj=null,this.useRef=!1,this.useBind=!1,this.useItemset=!1,this.isDataCollectionRefBinded=!1,this.isDataCollectionItemsetBinded=!1,this.dataCollectionRefInfo={},this.dataCollectionItemsetInfo={},this.scope_uuid=s}catch(t){h.w.printStackTrace(t)}};st.prototype.setItemset=function(t,e,i){try{this.itemsetObj={nodeset:t||"",label:e||"",value:i||""}}catch(t){h.w.printStackTrace(t)}},st.prototype.binding=function(){try{this.isDataCollectionItemsetBinded||this.ref&&this.ref.indexOf("data:")>-1?this.dataCollectionBinding(this.ref):(this.bindRef(),this.bindItemset())}catch(t){h.w.printStackTrace(t)}},st.prototype.checkRef=function(){try{var t=this.ref;if(-1!=t.lastIndexOf("/@")&&t.lastIndexOf("/")==t.lastIndexOf("/@"));else{var e=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id,i=I.z.findInstanceNode(t,null,e);if(i&&i.childNodes.length>1)return!1}return!0}catch(t){h.w.printStackTrace(t)}},st.prototype.bindRef=function(){try{this.ref&&""!=this.ref&&this.checkRef()&&(WebSquare.WebSquaredoc.refElement.push(new I.z.createRefElement(this.ref,this.id)),I.z.setBindElement(this.ref,this.id),this.useRef=!0)}catch(t){h.w.printStackTrace(t)}},st.prototype.bindItemset=function(){try{this.itemsetObj&&""!=this.itemsetObj.nodeset&&(WebSquare.WebSquaredoc.itemsetElement.push(new I.z.createItemsetElement(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value,this.id)),this.useItemset=!0)}catch(t){h.w.printStackTrace(t)}},st.prototype.unbindRef=function(){try{if(this.isDataCollectionRefBinded)this.useRef=!1,this.isDataCollectionRefBinded=!1,this.dataCollectionRefInfo.dataComp&&(this.dataCollectionRefInfo.dataComp.removeChild(this.dataCollectionRefInfo.childComp.id),this.dataCollectionRefInfo.dataComp.removeRefComp(this.dataCollectionRefInfo.childComp.id)),this.dataCollectionRefInfo={};else if(WebSquare.WebSquaredoc)for(var t in WebSquare.WebSquaredoc.refElement){WebSquare.WebSquaredoc.refElement[t].id==this.id&&(WebSquare.WebSquaredoc.refElement.splice(t,1),this.useRef=!1)}}catch(t){h.w.printStackTrace(t)}},st.prototype.unbindItemset=function(){try{if(this.isDataCollectionItemsetBinded)this.useItemset=!1,this.isDataCollectionItemsetBinded=!1,
this.dataCollectionItemsetInfo.dataComp&&(this.dataCollectionItemsetInfo.dataComp.removeChild(this.dataCollectionItemsetInfo.childComp.id),this.dataCollectionItemsetInfo.dataComp.removeRefComp(this.dataCollectionItemsetInfo.childComp.id)),this.dataCollectionItemsetInfo={};else if(WebSquare.WebSquaredoc)for(var t in WebSquare.WebSquaredoc.itemsetElement){var e=WebSquare.WebSquaredoc.itemsetElement[t].id;try{e==this.id&&(WebSquare.WebSquaredoc.itemsetElement.splice(t,1),this.useItemset=!1)}catch(t){}}}catch(t){h.w.printStackTrace(t)}},st.prototype.unbinding=function(){},st.prototype.isBinded=function(){return this.useRef},st.prototype.isItemsetBinded=function(){return this.useItemset},st.prototype.setRef=function(t){try{var e=t||"";this.useRef&&"string"==typeof e&&e.length>0&&(this.ref=e,this.binding())}catch(t){h.w.printStackTrace(t)}},st.prototype.setData=function(t,e,i){try{if(1==this.useRef){void 0!==i&&null!=i||(i={});var o=this.getData();if(o!=t||(0===o&&""===t||""===o&&0===t)||i.orgValue&&o!=i.orgValue)if(this.isDataCollectionRefBinded)e=e||"column",WebSquare.DataCollection.api.setRefValue(this.dataCollectionRefInfo,t,e);else{var s=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id;I.z.setInstanceValue(this.ref,t,this.model,s)}return!0}return!1}catch(t){h.w.printStackTrace(t)}},st.prototype.getData=function(){try{if(""!=this.ref){if(this.isDataCollectionRefBinded)return WebSquare.DataCollection.api.getRefValue(this.dataCollectionRefInfo);var t=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id;return I.z.getInstanceValue(this.ref,this.model,t)}return""}catch(t){h.w.printStackTrace(t)}},st.prototype.setItemsetData=function(t){},st.prototype.getItemsetData=function(){try{var t=[];if(""!=this.itemsetObj.nodeset){for(var e=this.itemsetObj.label,i=this.itemsetObj.value;;){var o=e.lastIndexOf("/");if(o<0)break;e=e.substring(0,o)}for(;;){var s=i.lastIndexOf("/");if(s<0)break;i=i.substring(0,s)}var r=this.itemsetObj.nodeset,a=this.itemsetObj.label,n=this.itemsetObj.value;if(i==e&&""!=i){var l=a.lastIndexOf("/"),d=n.lastIndexOf("/");l>0&&d>0&&(r+="/"+e,a=a.replace(e+"/",""),n=n.replace(i+"/",""))}r.lastIndexOf("/")==r.length-1&&(r=r.substring(0,r.lastIndexOf("/"))),0==a.indexOf("/")&&(a=a.substring(1)),0==n.indexOf("/")&&(n=n.substring(1));var c=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id,p=I.z.findInstanceNodes(r,null,c);if(p)for(var g=0;g<p.length;++g){var m=p[g];e=u.L.getValue(m,a),i=u.L.getValue(m,n);t.push({label:e,value:i,xml:m})}}return t}catch(t){h.w.printStackTrace(t)}},st.prototype.getDataCollectionItemsetData=function(t,e){try{var i,o,s=this.getDataComp(null,{type:"aliasDataCollection"});if(s)i=s.id;else if(i=this.itemsetObj.nodeset.replace(/^data:/,""),WebSquare.strictMode){var r=WebSquare.idCache[this.scope_uuid]?WebSquare.idCache[this.scope_uuid].id:"";i=(r?r+"_":"")+i}if(t&&(o=l.v.getComponentById(t)),this.isDataCollectionItemsetBinded=!0,o&&WebSquare.DataCollection.api.addRelation(o.id,i),s&&WebSquare.idCache[s.uuid])switch(o?(s.addChild(o),this.dataCollectionItemsetInfo.childComp=o):this.dataCollectionItemsetInfo.childComp={},this.dataCollectionItemsetInfo.dataComp=s,(s=WebSquare.DataCollection.api.getObj(s)).initializeType){case"linkedDataList":case"dataList":var a=[],n={},d=function(t,e,i,o,s){if(!o||!s)return!1;var r=!1,a=t.bodyIdColIndexMap[o];if(!isNaN(a)){var n;n=!0===i?"dataList"===t.initializeType?t.dataArr[e*t.cellIdList.length+a]:t._dataList.dataArr[t.initialRowIndexArr[e]*t.cellIdList.length+a]:t.getCellData(e,o);for(var l=s.split(","),h=0;h<l.length;h++)if('"'+l[h]+'"'=='"'+n+'"'){r=!0;break}}return r};if(!e||!0!==e.allData&&!0!==e.allColumn)for(u=s.getDataLength(),c=0;c<u;c++){b=s.getCellData(c,this.itemsetObj.label),y=s.getCellData(c,this.itemsetObj.value);if(n[b]!=y){n[b]=y;S={label:b+"",value:y+""};!0===d(s,c,!1,e&&e.visibleColumn,e&&e.visibleColumnFalseValue)&&(S._hidden=!0),
!0===d(s,c,!1,e&&e.enableColumn,e&&e.enableColumnFalseValue)&&(S._disabled=!0),a.push(S)}}else for(var u=s.getTotalRow(),c=0;c<u;c++){var p=s.bodyIdColIndexMap[this.itemsetObj.label],g=s.bodyIdColIndexMap[this.itemsetObj.value],m=s.cellInfoHash[this.itemsetObj.label],f=s.cellInfoHash[this.itemsetObj.value],b="",y="";if(b=m&&"expression"==m.options.inputType?m.getExpressionValue(c):"dataList"===s.initializeType?s.dataArr[c*s.cellIdList.length+p]:s._dataList.dataArr[s.initialRowIndexArr[c]*s.cellIdList.length+p],y=f&&"expression"==f.options.inputType?f.getExpressionValue(c):"dataList"===s.initializeType?s.dataArr[c*s.cellIdList.length+g]:s._dataList.dataArr[s.initialRowIndexArr[c]*s.cellIdList.length+g],n[b]!=y)if(n[b]=y,!0===e.allColumn)for(var v=s.getRowData(c),w=0;w<v.length;w++)a.push(v[w]);else{var S={label:b+"",value:y+""};!0===d(s,c,!0,e&&e.visibleColumn,e&&e.visibleColumnFalseValue)&&(S._hidden=!0),!0===d(s,c,!0,e&&e.enableColumn,e&&e.enableColumnFalseValue)&&(S._disabled=!0),a.push(S)}}return a;case"dataMap":for(a=[],n={},c=0;c<s.getCount();c++){b=s.get(this.itemsetObj.label),y=s.get(this.itemsetObj.value);n[b]!=y&&(n[b]=y,a.push({label:b+"",value:y+""}))}return a}}catch(t){h.w.printStackTrace(t)}},st.prototype.dataCollectionBinding=function(t){try{this.dataCollectionBindRef(t),this.dataCollectionBindItemset(t)}catch(t){h.w.printStackTrace(t)}},st.prototype.dataCollectionBindRef=function(t){try{if(this.ref&&""!=this.ref){this.isDataCollectionRefBinded=!0;var e=t.split("."),i=this.getDataComp(e[0].replace(/^data:/,""),{type:"aliasDataCollection"}),o=l.v.getComponentById(this.id);if(i){switch(i.addRefComp(o),this.dataCollectionRefInfo.dataComp=i,this.dataCollectionRefInfo.childComp=o,i.initializeType){case"linkedDataList":case"dataList":this.dataCollectionRefInfo.colID=e[1];break;case"dataMap":this.dataCollectionRefInfo.key=e[1]}WebSquare.DataCollection.api.addRefRelation(o.id,i.id)}else WebSquare.DataCollection.api.addRefRelation(o.id,e[0].replace(/^data:/,""));this.useRef=!0}}catch(t){h.w.printStackTrace(t)}},st.prototype.dataCollectionBindItemset=function(){try{this.itemsetObj&&""!=this.itemsetObj.nodeset&&(this.useItemset=!0)}catch(t){h.w.printStackTrace(t)}},st.prototype.getDataComp=function(t,e){try{void 0!==e&&null!=e||(e={});var i=t||this.itemsetObj.nodeset.replace(/^data:/,""),o=null;if(this.scope_uuid&&null!=WebSquare.idCache[this.scope_uuid]){for(var s=WebSquare.idCache[this.scope_uuid];null!=s&&null!=s.scope;s=s.scope_obj){if(null!=s.scope[i]){o=s.scope[i];break}if(s.scope_obj===s||s.options.inheritedCompName){if(!s.parentFrame||void 0===WebSquare.idCache[s.parentFrame])break;if(null!=(s=WebSquare.idCache[s.parentFrame]).scope[i]){o=s.scope[i];break}}if(WebSquare.strictMode)break}null==o&&null!=(o=WebSquare.DataCollection.comp[WebSquare.idCache[this.scope_uuid].id+"_"+i]||null)&&(WebSquare.idCache[this.scope_uuid].scope[i]=o)}return null==o&&(o=WebSquare.DataCollection.comp[i]),"aliasDataCollection"!==e.type&&!0===WebSquare.DataCollection.api.isAliasDataCollection(o)&&(o=o.getObj()),o}catch(t){h.w.printStackTrace(t)}};var rt=__webpack_require__(1),at=function(){this.maxSize=50,this.historyArr=[],this.setKeyEvent()};at.prototype.set=function(t,e,i,o){this.historyArr.length>=this.maxSize&&this.historyArr.shift(),this.historyArr.push([t,e,i||{},o||{}])},at.prototype.get=function(t,e){for(var i={},o=this.historyArr.length-1;o>=0;o--){var s=this.historyArr[o];if(s[0]==t&&s[1]==e){i=s[2];break}}return i},at.prototype.clear=function(){for(var t=0;t<this.historyArr.length;t++)this.historyArr[t]=null;this.historyArr=[]},at.prototype.setKeyEvent=function(t){O.B.addListener(document.documentElement,"keydown",O.B.bindAsEventListener(this,this.handlerKeydownEvent))},at.prototype.handlerKeydownEvent=function(t){switch(t.charCode?t.charCode:t.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 27:break;case 90:if(t.ctrlKey&&this.historyArr.length>0){var e=this.historyArr.pop();!0===e[3].stopEvent&&O.B.stopEvent(t),
e[3].onRestore&&e[3].onRestore.call(this,e[2])}break;case 68:if(t.ctrlKey)"false"===(l.v.getConfiguration("/WebSquare/enableKey/useCtrlD/@value")||"false")&&O.B.stopEvent(t);break;case 75:if(t.ctrlKey){var i=l.v.getConfiguration("/WebSquare/cloneTab/@value"),o=i;""===i&&(o=l.v.getConfiguration("/WebSquare/enableKey/useCtrlK/@value")||"false"),"false"==o&&O.B.stopEvent(t)}}},at=new at;var nt=__webpack_require__(5373),lt=function(){};lt.prototype.getRealRowIndex=function(t){return this.filteredRowIndexArr[t]},lt.prototype.getFilteredRowIndex=function(t){if(this.filteredRowIndexArr[this.filteredRowIndexMap[t]]!==t){this.filteredRowIndexMap={};for(var e=0;e<this.filteredRowIndexArr.length;e++)this.filteredRowIndexMap[this.filteredRowIndexArr[e]]=e}return this.filteredRowIndexMap[t]},lt.prototype.getTotalRow=function(){try{return this.dataArr.length/this.oneRowDataLength}catch(t){h.w.printStackTrace(t)}},lt.prototype.getTotalCol=function(){try{return this.oneRowDataLength}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRowCount=function(){try{return this.getDataLength()}catch(t){h.w.printStackTrace(t)}},lt.prototype._getData=function(t,e){try{e=this.getColumnIndex(e);var i=this.dataArr[t*this.getColumnCount()+e];return null==i&&(i=""),i}catch(t){h.w.printStackTrace(t)}},lt.prototype._getCellData=function(t,e,i){try{var o,s;"number"==typeof e?(o=e,s=this.cellIdList[o]):(o=this.bodyIdColIndexMap[e],s=e);i=this.options.depthColumn&&!1!==i||!0===i?t:this.filteredRowIndexArr[t];var r=this.cellInfoHash[s];if(r){if("expression"==r.options.inputType)return r.getExpressionValue(i);var a=this.dataArr[i*this.cellIdList.length+o];return null==a&&(a=""),a}}catch(t){h.w.printStackTrace(t)}},lt.prototype.getCellData=function(t,e){try{return this._getCellData(t,e)}catch(t){h.w.printStackTrace(t)}},lt.prototype.getCellAllData=function(t,e){try{return this._getCellData(t,e,!0)}catch(t){h.w.printStackTrace(t)}},lt.prototype.getOriginalCellData=function(t,e){try{var i;i="number"==typeof e?e:this.bodyIdColIndexMap[e];var o=this.options.depthColumn?t:this.filteredRowIndexArr[t],s=this.originalDataArr[o*this.cellIdList.length+i];return null==s&&(s=""),s}catch(t){h.w.printStackTrace(t)}},lt.prototype._getOriginalCellData=function(t,e){try{var i;i="number"==typeof e?e:this.bodyIdColIndexMap[e];var o=this.originalDataArr[t*this.cellIdList.length+i];return null==o&&(o=""),o}catch(t){h.w.printStackTrace(t)}},lt.prototype.getDataLength=function(){return this.filteredRowIndexArr.length},lt.prototype.getColCnt=function(){try{return this.getTotalCol()}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.getDepth=function(t){var e=-1;return this.options.depthColumn&&(e=parseInt(this._getData(t,this.getColumnID(this.options.depthColumn)))),e},lt.prototype.hasChild=function(t){var e=t+1,i=this.getColumnID(this.options.depthColumn);"dataList"==this.options.dataColumn&&(i=this.getColumnID(this.options.depthColumn));var o=parseInt(this._getData(t,i)),s=parseInt(this._getData(e,i));return o<(s=isNaN(s)?0:s)},lt.prototype.getColSum=function(t){try{var e=this.getColData(t);return b.D.sum(e)}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.getColAvg=function(t){try{var e="",i=this.getColData(t);if(i.length>0){for(var o=0;o<i.length;o++)"string"==typeof i[o]&&""==i[o].replace(/^\s+|\s+$/g,"")&&(i[o]="0");e=b.D.sum(i)}return""==e?"":e/i.length}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.getColMax=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e<s)&&(e=s)}return e=null==e?"":e,e=b.D.setPrecision(e)}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.getColMin=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e>s)&&(e=s)}return e=null==e?"":e,e=b.D.setPrecision(e)}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.getRealRowIndexArr=function(){return this.filteredRowIndexArr.slice(0)},
lt.prototype.getColData=function(t,e){try{var i=[],o=this.getColumnIndex(t),s=this.getTotalRow();if("object"===(0,T.Z)(e)&&null!=e&&e.length<=s)for(var r=e.length,a=0;a<r;a++)i.push(this._getData(e[a],o));else for(a=0;a<s;a++)i.push(this._getData(a,o));return i}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRowData=function(t,e){try{void 0!==e&&null!=e||(e={});var i=[],o=this.options.depthColumn||e.realRowIndex?t:this.filteredRowIndexArr[t],s=this.cellIdList.length;if("object"===(0,T.Z)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array)for(var r=e.includeColumns.length,a=0;a<r;a++){var n=e.includeColumns[a];if(d=this.cellInfoHash[n])if("expression"==d.options.inputType)u=d.getExpressionValue(o);else{var l=this.bodyIdColIndexMap[n];null==(u=this.dataArr[o*s+l])&&(u="")}i.push(u)}else for(l=0;l<s;l++){var d,u;n=this.cellIdList[l];(d=this.cellInfoHash[n])&&("expression"==d.options.inputType?u=d.getExpressionValue(o):null==(u=this.dataArr[o*s+l])&&(u="")),i.push(u)}return i}catch(t){h.w.printStackTrace(t)}},lt.prototype._getRowData=function(t){try{for(var e=[],i=0;i<this.getColumnCount();i++)e.push(this._getData(t,i));return e}catch(t){h.w.printStackTrace(t)}},lt.prototype.getOriginalRowData=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getOriginalRowData(e)}catch(t){h.w.printStackTrace(t)}},lt.prototype._getOriginalRowData=function(t){try{for(var e=[],i=0;i<this.getColumnCount();i++)e.push(this._getOriginalCellData(t,i));return e}catch(t){h.w.printStackTrace(t)}},lt.prototype.getDataRow=function(t){try{for(var e=[],i=0;i<this.getColumnCount();i++){e[this.getColumnID(i)]=this.getCellData(t,i)}return e}catch(t){$l("dataController.getDataRow :"+t.message),h.w.printStackTrace(t,null,this)}},lt.prototype.getMatchedData=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={}),this.broadcast({gridView:["_endEdit"]});var a=[],n=this.getMatchedIndex(t,e,i,o,s);this.options.getMatchedFromAllData&&(r.realRowIndex=!0);for(var l=0;l<n.length;l++)a.push(this.getRowData(n[l],r));return a}catch(t){h.w.printStackTrace(t)}},lt.prototype.getUnmatchedData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,i,o,s),l=0;l<n.length;l++)a.push(this.getRowData(n[l],r));return a}catch(t){h.w.printStackTrace(t)}},lt.prototype.getMatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});var a,n=[],l=this.getMatchedIndex(t,e,o,s,r);this.options.getMatchedFromAllData&&(a=!0);for(var d=0;d<l.length;d++)n.push(this._getCellData(l[d],i,a));return n}catch(t){h.w.printStackTrace(t)}},lt.prototype.getUnmatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,o,s,r),l=0;l<n.length;l++)a.push(this.getCellData(n[l],i));return a}catch(t){h.w.printStackTrace(t)}},lt.prototype.getFilteredColData=function(t){var e=[];t=this.getColumnIndex(t);for(var i=this.getColumnID(t),o=0;o<this.getDataLength();o++){var s=o;this.options.depthColumn&&(s=this.filteredRowIndexArr[o]),e.push(this.getCellData(s,i))}return e},lt.prototype.getMatchedIndex=function(t,e,i,o,s){try{i=void 0===i||null==i||i,0!=(i=b.D.getBoolean(i))&&(i=!0);var r=this.getColumnIndex(t);if(this.options.depthColumn||this.options.getMatchedFromAllData)var a=this.getColData(r);else a=this.getFilteredColData(r);var n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l];if(1==i)(d===e||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase()===e.toLowerCase())&&n.push(l);else{if(d===e){n.push(l);continue}"number"==typeof d&&(d+=""),("string"==typeof d&&d.indexOf(e)>-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(l)}}return n}catch(t){h.w.printStackTrace(t)}},lt.prototype.getUnmatchedIndex=function(t,e,i,o,s){try{0!=i&&(i=!0)
;var r=this.getColumnIndex(t);if(this.options.depthColumn)var a=this.getColData(r);else a=this.getFilteredColData(r);var n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l];1==i?d!==e&&(this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d?d.toLowerCase()!==e.toLowerCase()&&n.push(l):n.push(l)):(d.indexOf(e)<=-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())<=-1)&&n.push(l)}return n}catch(t){h.w.printStackTrace(t)}},lt.prototype.toArray=function(t,e){try{if("string"!=typeof t)return null===t?d.k.printLog("[WebSquare.DataCollection.dataController.toArray] parameter is null.["+this.id+"]"):d.k.printLog("[WebSquare.DataCollection.dataController.toArray] parameter isn't string. ["+(0,T.Z)(t)+"]["+this.id+"]"),[];e=null==e?'","':'"'+e+'"';if(null!=t.match(/^\[\s*\]$/g))return new Array;var i=t.split(e);return i[0]=i[0].substr(2),i[i.length-1]=i[i.length-1].substr(0,i[i.length-1].length-2),i}catch(t){h.w.printStackTrace(t)}},lt.prototype.getMappingData=function(t,e,i){try{for(var o,s={},r=0,a=this.cellIdList.length,n=e.length,l=t.length/n,u=0;u<n;u++){o=!1;for(var c=0;c<a;c++)if(e[u]===this.cellIdList[c]){o=!0,s[c]=u;break}o||r++}if(r===n)return d.k.printLog("[WebSquare.DataCollection.dataController.setData] not exist all target column in ["+this.id+"]"),[];for(var p,g,m=new Array(l*a),f=0;f<l;f++)for(var b=0;b<a;b++)void 0!==(g=s[b])?(p=t[g+f*n],m[f*a+b]=p):m[f*a+b]="";return t=null,m}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRangeData=function(t,e,i,o){try{var s,r=[];if(s=this.options.depthColumn?this.getTotalRow()-1:this.getDataLength()-1,t>e){var a=e;e=t,t=a}t<0&&(t=0),e>s&&(e=s);for(var n=t;n<=e;n++)for(var l=this.getRowData(n,o),d=0;d<l.length;d++)r.push(l[d]);return r}catch(t){h.w.printStackTrace(t)}},lt.prototype.getAllData=function(t){try{if(this.broadcast({gridView:["_endEdit"]}),this.getTotalRow()!=this.getDataLength()){for(var e=[],i=this.getTotalRow(),o=0;o<i;o++)for(var s=this._getRowData(o,t),r=0;r<s.length;r++)e.push(s[r]);return e}e=[];var a=this.getDataLength();for(o=0;o<a;o++)for(s=this.getRowData(o,t),r=0;r<s.length;r++)e.push(s[r]);return e}catch(t){h.w.printStackTrace(t)}},lt.prototype.getAllArrayEvalString=function(){try{return this.broadcast({gridView:["_endEdit"]}),b.D.parseArray(this.dataArr)}catch(t){h.w.printStackTrace(t)}},lt.prototype.getColumnDistinctDataArray=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=[],o={};"string"==typeof t&&(t=this.bodyIdColIndexMap[t]);for(var s=this.getCellInfo(t),r=this.getColData(t),a=0;a<r.length;a++){o[r[a]]=1}for(var n in o)i.push(n);return e&&0==e.sort||("text"==s.options.dataType?i.sort():i.sort(this.comparator)),i}catch(t){h.w.printStackTrace(t)}},lt.prototype.getAllFilteredData=function(t){this.broadcast({gridView:["_endEdit"]});for(var e=[],i=0;i<this.getDataLength();i++)for(var o=this.getRowData(i,t),s=0;s<o.length;s++)e.push(o[s]);return e},lt.prototype.getChildrenRowArr=function(t){var e=[];if(this.options.depthColumn){var i=this.getTotalRow(),o=this.options.depthColumn,s=this.getColumnID(o),r=t+1,a=parseInt(this._getData(t,s),10);if(r<i&&this._getData(r,s)>a){e.push(r);var n=parseInt(this._getData(r,s),10),l=!0}if(l)for(r=t+2;r<i&&!(this._getData(r,s)<a+1);r++)this._getData(r,s)<n+1&&(e.push(r),n=parseInt(this._getData(r,s),10))}return e},lt.prototype.getRecursiveRowIndex=function(t){try{for(var e=[],i=this.getChildrenRowArr(t),o=0;o<i.length;o++){var s=i[o];e.push(s);for(var r=this.getRecursiveRowIndex(s),a=0;a<r.length;a++)e.push(r[a])}return e}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.getParentRowIndex=function(t){try{if(this.options.depthColumn)for(var e=this.options.depthColumn,i=this.getColumnID(e),o=parseInt(this._getData(t,i)),s=t-1;s>=0;s--)if(this._getData(s,i)<o)return s;return-1}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.getRangeXML=function(t,e,i){
try{var o;if(i=i||{},o=this.options.depthColumn?this.getTotalRow()-1:this.getDataLength()-1,t>e){var s=e;e=t,t=s}t<0&&(t=0),e>o&&(e=o);for(var r=[],a=b.D.getBoolean(l.v.getConfiguration("/WebSquare/dataList/decreaseGetRangeXML/@value")),n=t;n<e;n++)r.push(n);return a&&!i.useGetRowXML||r.push(e),this.getArrXML(r,i)}catch(t){h.w.printStackTrace(t)}},lt.prototype.getMatchedXML=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={}),this.broadcast({gridView:["_endEdit"]});var a=this.getMatchedIndex(t,e,i,o,s);return this.options.getMatchedFromAllData&&(r.realRowIndex=!0),this.getArrXML(a,r)}catch(t){h.w.printStackTrace(t)}},lt.prototype.getUnmatchedXML=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});var a=this.getUnmatchedIndex(t,e,i,o,s);return this.getArrXML(a,r)}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRowXML=function(t,e){try{(e=e||{}).useGetRowXML=!0;var i,o=this.getRangeXML(t,t,e);return i="dataMap"==this.initializeType?this.options.baseNode+"/"+this.options.repeatNode.split("/")[0]:this.options.baseNode+"/"+this.options.repeatNode,o=WebSquare.xml.findNode(o,i),o=WebSquare.xml.parse(WebSquare.xml.serialize(o))}catch(t){h.w.printStackTrace(t)}},lt.prototype.getAllXML=function(t){try{return this.broadcast({gridView:["_endEdit"]}),this.getTotalRow()==this.getDataLength()?this.getAllFilteredXML(t):this.getAllArrXML(t)}catch(t){h.w.printStackTrace(t)}},lt.prototype.getAllFilteredXML=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=this.getDataLength(),i=[],o=0;o<e;o++)i.push(o);return this.getArrXML(i,t)}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRowJSON=function(t,e){try{void 0!==e&&null!=e||(e={});var i={},o=this.options.depthColumn||e.realRowIndex?t:this.filteredRowIndexArr[t],s=this.cellIdList.length;if("object"===(0,T.Z)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array)for(var r=e.includeColumns.length,a=0;a<r;a++){var n=e.includeColumns[a];if(d=this.cellInfoHash[n])if("expression"==d.options.inputType)i[n]=d.getExpressionValue(o);else{var l=this.bodyIdColIndexMap[n];i[n]=this.dataArr[o*s+l],null==i[n]&&(i[n]="")}}else for(l=0;l<s;l++){var d;n=this.cellIdList[l];(d=this.cellInfoHash[n])&&("expression"==d.options.inputType?i[n]=d.getExpressionValue(o):(i[n]=this.dataArr[o*s+l],null==i[n]&&(i[n]="")))}var u=this.options.rowStatusNodeName,c=0!=e.rowStatusData||e.rowStatusData;return e.rowStatusNodeName&&(u=e.rowStatusNodeName),"dataList"!=this.initializeType&&"removeManager"!=this.initializeType||(c&&(i[u]=this.rowStatusArr[o]),this.options.rowNumData&&(i.rowNum=t+1)),i}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRefRowJSON=function(t,e){try{void 0!==e&&null!=e||(e={});var i,o={},s=this.options.depthColumn||e.realRowIndex?t:this.filteredRowIndexArr[t],r=this.cellIdList.length,a=l.v.getConfiguration("/WebSquare/submission/exceptEmptyValue/@value");if("object"===(0,T.Z)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array)for(var n=e.includeColumns.length,d=0;d<n;d++){var u=e.includeColumns[d];if(p=this.cellInfoHash[u]){if("expression"==p.options.inputType)i=p.getExpressionValue(s);else{var c=this.bodyIdColIndexMap[u];null==(i=this.dataArr[s*r+c])&&(i="")}"true"==a?(""!=i||"bigDecimal"!=p.options.dataType&&"number"!=p.options.dataType)&&(o[u]=i):o[u]=i}}else for(c=0;c<r;c++){var p;u=this.cellIdList[c];(p=this.cellInfoHash[u])&&("expression"==p.options.inputType?i=p.getExpressionValue(s):null==(i=this.dataArr[s*r+c])&&(i=""),"true"==a?(""!=i||"bigDecimal"!=p.options.dataType&&"number"!=p.options.dataType)&&(o[u]=i):o[u]=i)}var g=this.options.rowStatusNodeName,m=0!=e.rowStatusData||e.rowStatusData;return e.rowStatusNodeName&&(g=e.rowStatusNodeName),"dataList"!=this.initializeType&&"removeManager"!=this.initializeType||(m&&(o[g]=this.rowStatusArr[s]),this.options.rowNumData&&(o.rowNum=t+1)),o}catch(t){h.w.printStackTrace(t)}},lt.prototype.getVirtualRowJSON=function(t,e,i){try{var o={};e=this.getColumnID(e)
;for(var s=0;s<this.getColumnCount();s++){var r=this.getColumnID(s);o[r]=r==e?i:this.getCellData(t,r)}return o}catch(t){h.w.printStackTrace(t)}},lt.prototype.getAllJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=[],i=this.getTotalRow(),o=this.getDataLength();if(i!=o){void 0===t||null==t?t={realRowIndex:!0}:t.realRowIndex=!0;for(var s=0;s<i;s++)e.push(this.getRowJSON(s,t))}else for(s=0;s<o;s++)e.push(this.getRowJSON(s,t));if(null!=this.options.customFormatter){var r=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(e=r(this,e))}return e}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRefAllJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=[],i=this.getTotalRow(),o=this.getDataLength();if(i!=o){void 0===t||null==t?t={realRowIndex:!0}:t.realRowIndex=!0;for(var s=0;s<i;s++)e.push(this.getRefRowJSON(s,t))}else for(s=0;s<o;s++)e.push(this.getRefRowJSON(s,t));if(null!=this.options.customFormatter){var r=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=r&&(e=r(this,e))}return e}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRangeJSON=function(t,e,i){try{var o,s=[];if(o=this.options.depthColumn?this.getTotalRow()-1:this.getDataLength()-1,t>e){var r=e;e=t,t=r}t<0&&(t=0),e>o&&(e=o);for(var a=t;a<=e;a++)s.push(this.getRowJSON(a,i));if(null!=this.options.customFormatter){var n=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof n&&(s=n(this,s))}return s}catch(t){h.w.printStackTrace(t)}},lt.prototype.getMatchedJSON=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});var a=[],n=this.getMatchedIndex(t,e,i,o,s,r);void 0!==r&&null!=r||(r={}),this.options.getMatchedFromAllData&&(r.realRowIndex=!0);for(var l=0;l<n.length;l++)a.push(this.getRowJSON(n[l],r));if(null!=this.options.customFormatter){var d=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof d&&(a=d(this,a))}return a}catch(t){h.w.printStackTrace(t)}},lt.prototype.getUnmatchedJSON=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,i,o,s,r),l=0;l<n.length;l++)a.push(this.getRowJSON(n[l],r));if(null!=this.options.customFormatter){var d=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof d&&(a=d(this,a))}return a}catch(t){h.w.printStackTrace(t)}},lt.prototype.getAllFilteredJSON=function(t){this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getDataLength(),o=0;o<i;o++)e.push(this.getRowJSON(o,t));return e},lt.prototype.getFusionChartData=function(t,e,i){try{var o,s={},r=this.getAllArray();if(e||(e=r.columnInfo[0]),i)o=i.wq_replaceAll("'",'"'),o=JSON.parse(o),i=o[0];else{for(var a=new Array,n=1;n<=r.columnInfo.length;n++)"number"==this.getCellInfo(n).options.dataType&&a.push(r.columnInfo[n]);"msstackedcolumn2d"==t.toLowerCase()?((o=[])[0]=new Array(a[0]),o[1]=new Array(a[1])):"msstackedcolumn2dlinedy"==t.toLowerCase()?((o=[])[0]=new Array(a[0]),o[1]=new Array(a[1]),o[2]=new Array(a[2])):i=a}switch(this._singleSerises=function(){for(var t=[],o=this.getAllJSON(),r=0;r<o.length;r++){var a={label:o[r][e],value:o[r][i[0]]};t.push(a)}return s.data=t,s},this._multiSerises=function(){(s=this._getFusionChartCategory()).dataset=[];for(var t=0;t<i.length;t++){var e=this._getFusionChartSeriesDate(t);e.data.length>0&&s.dataset.push(e)}return 0==s.dataset.length&&(s={}),s},this._msStacked=function(){(s=this._getFusionChartCategory()).dataset=[];for(var t=0;t<o.length;t++){i=o[t];for(var e={dataset:[]},r=0;r<i.length;r++){var a=this._getFusionChartSeriesDate(r);e.dataset.push(a)}s.dataset.push(e)}return s},this._msStackedColumn2DLineDY=function(){(s=this._getFusionChartCategory()).dataset=[];for(var t=0;t<o.length-1;t++){i=o[t];for(var e={dataset:[]},r=0;r<i.length;r++){var a=this._getFusionChartSeriesDate(r);e.dataset.push(a)}s.dataset.push(e)}s.lineset=[];var n=o.length-1;i=o[n];for(t=0;t<i.length;t++){
a=this._getFusionChartSeriesDate(t);s.lineset.push(a)}return s},this._scatter=function(){s.dataset=[];for(var o=this._getUniqueArr(this.getColData(e)),r=0;r<o.length;r++){for(var a={data:[]},n=0;n<this.getRowCount();n++)if(o[r]==this.getCellData(n,e)){var l={};"scatter"==t.toLowerCase()?l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1])}:"bubble"==t.toLowerCase()&&(l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1]),z:this.getCellData(n,i[2])}),a.data.push(l)}a.seriesname=o[r],s.dataset.push(a)}return s},this._zoomLine=function(){if(1==this.getRowCount()){(s={categories:[{category:this.getCellData(0,e)}]}).dataset=[];for(var t=0;t<i.length;t++){var o={};o.seriesname=this.getColumnName(i[t]),o.data=this.getCellData(0,i[t]),s.dataset.push(o)}return s}return this._multiSerises()},this._getFusionChartCategory=function(){for(var t=[],i=this.getColData(e),o=0;o<i.length;o++){var s={label:i[o]};t.push(s)}return{categories:[{category:t}]}},this._getFusionChartSeriesDate=function(t){var e,o={};o.data=[];var s=[];if("string"!=typeof i[t]){for(var r in e=i[t].id,o.seriesname=this.getColumnName(e),i[t])if(i[t].hasOwnProperty(r))if(this.hasColumn(i[t][r])&&"id"!=r.toLowerCase()){var a={};a[r]=i[t][r],s.push(a)}else o[r]=i[t][r]}else e=i[t],o.seriesname=this.getColumnName(e);for(var n=0;n<this.getRowCount();n++){for(var l={value:this.getCellData(n,e)},h=0;h<s.length;h++)for(var d in s[h])l[d]=this.getCellData(n,s[h][d]);o.data.push(l)}return o},this._getUniqueArr=function(t){for(var e={},i=[],o=0;o<t.length;o++)void 0===e[t[o]]&&(e[t[o]]=1);for(var o in e)i.push(o);return i},t.toLowerCase()){case"column2d":case"column3d":case"bar2d":case"bar3d":case"pie2d":case"pie3d":case"doughnut2d":case"doughnut3d":case"pareto2d":case"pareto3d":case"line":case"area2d":case"ssgrid":case"funnel":case"pyramid":case"sparkline":case"sparkcolumn":case"sparkwinloss":return this._singleSerises();case"mscolumn2d":case"mscolumn3d":case"msline":case"msarea":case"msbar2d":case"msbar3d":case"marimekko":case"stackedcolumn2d":case"stackedcolumn3d":case"stackedarea2d":case"stackedbar2d":case"stackedbar3d":case"mscombi3d":case"mscombi2d":case"mscolumnline3d":case"stackedcolumn2dline":case"stackedcolumn3dline":case"mscombidy2d":case"mscolumn3dlinedy":case"scrollcolumn2d":case"scrollline2d":case"scrollArea2d":case"scrollstackedcolumn2d":case"scrollcombi2d":case"scrollcombidy2d":case"stackedcolumn3dlinedy":case"overlappedcolumn2d":case"overlappedbar2d":return this._multiSerises();case"scatter":case"bubble":return this._scatter();case"zoomline":return this._zoomLine();case"msstackedcolumn2d":return this._msStacked();case"msstackedcolumn2dlinedy":return this._msStackedColumn2DLineDY()}}catch(t){h.w.printStackTrace(t)}},lt.prototype.getfwGanttChartData=function(t){try{var e={chart:{},categories:[],processes:{}};e.processes.process=[],e.datatable={},e.datatable.datacolumn=[],e.tasks={},e.tasks.task=[],e.legend={},e.legend.item=[];var i=t.monthNames.split(","),o=t.quarterNames.split(","),s=t.dataColumns.split(","),r=this.getColumnDistinctDataArray(t.processNode,{sort:!1}),a=[];if(""!=s)for(var n=0;n<s.length;n++)a[n]=this.getColumnDistinctDataArray(s[n],{sort:!1});var l=this.getColumnDistinctDataArray(t.taskNode,{sort:!1}),d=[];d.push(t.startDateNode),d.push(t.endDateNode);var u,c=[],p={};if(t.processIdNode&&t.taskIdNode){u=this.getColumnDistinctDataArray(t.processIdNode,{sort:!1});for(n=0;n<u.length;n++)p[r[n]]=u[n]}this._getGanttTaskData=function(e,i,o,s,r,a){for(var n=this.getRowCount(),l=this.getMatchedIndex(t.taskNode,e,!0,0,n),h=[],d=0;d<l.length;d++){var u,c={};this.options.getMatchedFromAllData&&(u=!0);var p=this.getCellData(l[d],t.processNode);if(c.label=this.getCellData(l[d],t.taskNode),c.processid=i[p],c.color=a[p],t.taskIdNode?c.id=this._getCellData(l[d],t.taskIdNode,u):c.id=c.processid+"_"+d,b.D.getBoolean(t.multiTasks)){var g=o.length,m=100/g/2/2,f=100/g,y=100/g/2,v=l[d]%g;c.toppadding=f*v+m+"%",c.height=y+"%"}if("object"==(0,
T.Z)(s)&&("yyyyMMdd"==t.dateformat?(c.start=WebSquare.text.formatDate(this.getCellData(l[d],s[0]),"yyyy/MM/dd","yyyyMMdd"),c.end=WebSquare.text.formatDate(this.getCellData(l[d],s[1]),"yyyy/MM/dd","yyyyMMdd")):(c.start=this.getCellData(l[d],s[0]),c.end=this.getCellData(l[d],s[1]))),h.push(c),"dd/mm/yyyy"==t.dateformat||"dd-mm-yyyy"==t.dateformat){if(-1!=t.dateformat.indexOf("/")){var w="$2/$1/$3";b.D.isFF()&&(w="$3/$2/$1"),r.push(new Date(c.start.replace(/(\d{2})\/(\d{2})\/(\d{4})/,w))),r.push(new Date(c.end.replace(/(\d{2})\/(\d{2})\/(\d{4})/,w)))}else if(-1!=t.dateformat.indexOf("-")){w="$2-$1-$3";b.D.isFF()&&(w="$3-$2-$1"),b.D.isSafari()?(r.push(new Date(c.start.replace(/(\d{2})-(\d{2})-(\d{4})/,w).wq_replaceAll("-","/"))),r.push(new Date(c.end.replace(/(\d{2})-(\d{2})-(\d{4})/,w).wq_replaceAll("-","/")))):(r.push(new Date(c.start.replace(/(\d{2})-(\d{2})-(\d{4})/,w))),r.push(new Date(c.end.replace(/(\d{2})-(\d{2})-(\d{4})/,w))))}}else r.push(new Date(c.start)),r.push(new Date(c.end))}return h};var g=[],m={},f={},y=0,v=t.plotColor.split(",");for(n=0;n<r.length;n++,y++){var w={};t.processIdNode&&t.taskIdNode?w.id=p[r[n]]:w.id="process_"+n,w.name=r[n],m[r[n]]=w.id,v.length>y||(y=0),f[r[n]]=v[y],g.push(w)}e.processes.process=g;var S=[];if(""!=s)for(n=0;n<a.length;n++){for(y=0;y<a[n].length;y++){(w={}).label=a[n][y],S.push(w)}e.datatable.datacolumn.push({text:S}),S=[]}var C=[];for(n=0;n<l.length;n++){var x=this._getGanttTaskData(l[n],m,l,d,c,f);C=C.concat(x)}if(e.tasks.task=C,e.tasks.showlabels="1",b.D.getBoolean(t.autoCategory)||"3.11"==t.version){c.sort((function(t,e){return t-e}));var _=c[0],I=c[c.length-1];if(this._getMonthOfFirstDay=function(t){return new Date(t.getFullYear(),t.getMonth()+1,1).getDate()},this._getMonthOfLastDay=function(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},"date"==t.timeBase.toLowerCase()){var k=this._getMonthOfFirstDay(_),D=this._getMonthOfLastDay(I),L=_.getFullYear()+"/"+(_.getMonth()+1)+"/"+k,W=I.getFullYear()+"/"+(I.getMonth()+1)+"/"+D,A=new Date(L),E=new Date(W),M=[],q=new Date(A.getTime());for(M.push(new Date(A.getTime()));q.getTime()<E.getTime();)M.push(new Date(q.setDate(this._getMonthOfLastDay(q)))),q=new Date(q.setDate(this._getMonthOfFirstDay(q))),q=new Date(q.setMonth(q.getMonth()+1>12?0:q.getMonth()+1)),M.push(q);var R="dd/mm/yyyy"==t.dateformat||"dd-mm-yyyy"==t.dateformat||"mm/dd/yyyy"==t.dateformat||"mm-dd-yyyy"==t.dateformat||"yyyy-mm-dd"==t.dateformat||"yyyy/mm/dd"==t.dateformat?t.dateformat.wq_replaceAll("mm","MM"):t.dateformat;if("yyyyMMdd"==R&&(R="yyyy/MM/dd"),2==t.categoryDepth){for(var N={category:[]},F={quater1_start:"/01/01",quater1_end:"/03/31",quater2_start:"/04/01",quater2_end:"/06/30",quater3_start:"/07/01",quater3_end:"/09/30",quater4_start:"/10/01",quater4_end:"/12/31"},O=new Date(A.getTime());O.getTime()<E.getTime();){var B={};O.getMonth()+1<=3?(B.start=WebSquare.date.getFormattedDate(O,R),B.end=WebSquare.date.getFormattedDate(new Date(O.getFullYear()+F.quater1_end),R),B.label=o[0],N.category.push(B),O=new Date(O.getFullYear()+F.quater2_start)):O.getMonth()+1<=6?(B.start=WebSquare.date.getFormattedDate(O,R),B.end=WebSquare.date.getFormattedDate(new Date(O.getFullYear()+F.quater2_end),R),B.label=o[1],N.category.push(B),O=new Date(E.getFullYear()+F.quater3_start)):O.getMonth()+1<=9?(B.start=WebSquare.date.getFormattedDate(O,R),B.end=WebSquare.date.getFormattedDate(new Date(O.getFullYear()+F.quater3_end),R),B.label=o[2],N.category.push(B),O=new Date(O.getFullYear()+F.quater4_start)):(B.start=WebSquare.date.getFormattedDate(O,R),B.end=WebSquare.date.getFormattedDate(new Date(O.getFullYear()+F.quater4_end),R),B.label=o[3],N.category.push(B),O<E&&(O=new Date(O.getFullYear()+1+F.quater1_start)))}t.resizeLastMonth&&(N.category[N.category.length-1].end=WebSquare.date.getFormattedDate(E,R)),e.categories.push(N)}var V={category:[]};for(n=0;n<M.length;n+=2){(B={}).start=WebSquare.date.getFormattedDate(M[n],R),B.end=WebSquare.date.getFormattedDate(M[n+1],R),
B.label=i[M[n].getMonth()],B.start&&B.end&&V.category.push(B)}e.categories.push(V)}else if("time"==t.timeBase.toLowerCase())if("12"==t.timeGap){M=["00:00:00","11:59:59","12:00:00","23:59:59"];var H=WebSquareLang.fwGanttChart_ampm.split(",");for(V={category:[]},n=0;n<M.length;n+=2){switch((B={}).start=M[n],B.end=M[n+1],n){case 0:B.label=H[0];break;case 2:B.label=H[1]}V.category.push(B)}e.chart.outputdateformat="hh:mn ampm",e.categories.push(V)}else if("6"==t.timeGap){for(M=["00:00:00","05:59:59","06:00:00","11:59:59","12:00:00","17:59:59","18:00:00","23:59:59"],H=WebSquareLang.fwGanttChart_timeGap6Label.split(","),V={category:[]},n=0;n<M.length;n+=2){switch((B={}).start=M[n],B.end=M[n+1],n){case 0:B.label=H[0];break;case 2:B.label=H[1];break;case 4:B.label=H[2];break;case 6:B.label=H[3]}V.category.push(B)}e.chart.outputdateformat="hh:mn ampm",e.categories.push(V)}else{for(M=["00:00:00","02:59:59","03:00:00","05:59:59","06:00:00","08:59:59","09:00:00","11:59:59","12:00:00","14:59:59","15:00:00","17:59:59","18:00:00","20:59:59","21:00:00","23:59:59"],H=WebSquareLang.fwGanttChart_timeGap3Label.split(","),V={category:[]},n=0;n<M.length;n+=2){switch((B={}).start=M[n],B.end=M[n+1],n){case 0:B.label=H[0];break;case 2:B.label=H[1];break;case 4:B.label=H[2];break;case 6:B.label=H[3];break;case 8:B.label=H[4];break;case 10:B.label=H[5];break;case 12:B.label=H[6];break;case 14:B.label=H[7]}V.category.push(B)}e.chart.outputdateformat="hh:mn ampm",e.categories.push(V)}else if("datetime"==t.timeBase.toLowerCase())if("12"==t.timeGap){L=_.getMonth()+1+"/"+_.getDate()+"/"+_.getFullYear()+" 00:00:00",W=I.getMonth()+1+"/"+I.getDate()+"/"+I.getFullYear()+" 23:59:59",A=new Date(L),E=new Date(W),M=[],q=new Date(A.getTime());for(M.push(q);q<E;)"0"==q.getSeconds()?(q=new Date(q.getTime()+43199e3),M.push(q)):(q=q.getTime()+1e3,q=new Date(q),M.push(q));V={category:[]};if(2==t.categoryDepth){for(N={category:[]},n=0;n<M.length;n+=4){(B={}).start=M[n],B.end=M[n+3],B.label=WebSquare.date.getFormattedDate(M[n],"yyyy/MM/dd"),N.category.push(B)}e.categories.push(N)}for(H=WebSquareLang.fwGanttChart_ampm.split(","),n=0;n<M.length;n+=2){(B={}).start=M[n],B.end=M[n+1],1*M[n+1].getHours()>12?B.label=H[1]:B.label=H[0],V.category.push(B)}e.categories.push(V)}else if("24"==t.timeGap.toLowerCase()){L=_.getMonth()+1+"/"+_.getDate()+"/"+_.getFullYear()+" 00:00:00",W=I.getMonth()+1+"/"+I.getDate()+"/"+I.getFullYear()+" 23:59:59",A=new Date(L),E=new Date(W),M=[],q=new Date(A.getTime());for(M.push(q);q<E;)"0"==q.getSeconds()?(q=new Date(q.getTime()+86399e3),M.push(q)):(q=q.getTime()+1e3,q=new Date(q),M.push(q));if(2==t.categoryDepth){N={category:[]},k=this._getMonthOfFirstDay(_),D=this._getMonthOfLastDay(I),L=_.getFullYear()+"/"+(_.getMonth()+1)+"/"+k,W=I.getFullYear()+"/"+(I.getMonth()+1)+"/"+D,A=new Date(L),E=new Date(W);var P=[];q=new Date(A.getTime());for(P.push(new Date(A.getTime()));q.getTime()<E.getTime();)P.push(new Date(q.setDate(this._getMonthOfLastDay(q)))),q=new Date(q.setDate(this._getMonthOfFirstDay(q))),q=new Date(q.setMonth(q.getMonth()+1>12?0:q.getMonth()+1)),P.push(q);for(n=0;n<P.length;n+=2){(B={}).start=WebSquare.date.getFormattedDate(P[n],t.dateformat),B.end=WebSquare.date.getFormattedDate(P[n+1],t.dateformat),B.label=i[P[n].getMonth()],B.start&&B.end&&N.category.push(B)}e.categories.push(N)}for(V={category:[]},n=0;n<M.length;n+=2){(B={}).start=M[n],B.end=M[n+1],B.label=2==t.categoryDepth?WebSquare.date.getFormattedDate(M[n],"dd")+WebSquareLang.fwGanttChart_dateSuffix:WebSquare.date.getFormattedDate(M[n],"yyyy/MM/dd"),V.category.push(B)}e.chart.outputdateformat="dd/mm/yyyy hh:mn:ss ampm",e.categories.push(V)}}return e}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRealtimeData=function(t,e,i,o){var s={},r=this.getAllArray();if(t||(t=r.columnInfo[0]),e||(e=r.columnInfo[1]),!i){for(var a=new Array,n=0;n<r.columnInfo.length;n++)"number"==this.getCellInfo(n).options.dataType&&a.push(r.columnInfo[n]);i=a[0]}return this._multiSerises=function(){
(s={}).categories=[{category:[]}],s.dataset=[];for(var t=o.plotColor.split(","),i=this.getColumnDistinctDataArray(e,{sort:!1}),r=0;r<i.length;r++){var a=this._getfwRealtimeChartSeriesDate(i[r]);a.color=t[r],s.dataset.push(a)}return s},this._getfwRealtimeChartSeriesDate=function(t){var e={};return e.seriesname=t,e},this._multiSerises()},lt.prototype.getFusionChartSimpleData=function(t,e,i,o,s){try{var r={},a=this.getAllArray();if(e||(e=a.columnInfo[0]),i||(i=a.columnInfo[1]),!o){for(var n=new Array,l=0;l<a.columnInfo.length;l++)"number"==this.getCellInfo(l).options.dataType&&n.push(a.columnInfo[l]);o=n[0]}switch(this._singleSerises=function(){for(var t=[],i=this.getAllJSON(),a=0;a<i.length;a++){var n={label:i[a][e],value:i[a][o],color:i[a][s]};t.push(n)}return r.data=t,r},this._multiSerises=function(){(r=this._getFusionChartCategory()).dataset=[];for(var t=this.getColumnDistinctDataArray(i,{sort:!1}),e=0;e<t.length;e++){var o=this._getFusionChartSeriesDate(t[e]);r.dataset.push(o)}return 0==r.dataset.length&&(r={}),r},this._combiSerises=function(){return!1},this._msStacked=function(){return!1},this._msStackedColumn2DLineDY=function(){return!1},this._scatter=function(){return!1},this._zoomLine=function(){return 1!=this.getRowCount()&&this._multiSerises()},this._getFusionChartCategory=function(){for(var t=[],i=this.getColumnDistinctDataArray(e,{sort:!1}),o=0;o<i.length;o++){var s={label:i[o]};t.push(s)}return{categories:[{category:t}]}},this._getFusionChartSeriesDate=function(t){var r={data:[]};r.seriesname=t;var a,n=this.getColumnDistinctDataArray(e,{sort:!1}),l=this.getRowCount(),h=this.getMatchedIndex(i,t,!0,0,l);this.options.getMatchedFromAllData&&(a=!0);for(var d=0;d<n.length;d++){for(var u={value:0},c=0;c<h.length;c++)if(n[d]==this._getCellData(h[c],e,a)){var p=this._getCellData(h[c],s,a);u=p?{value:this._getCellData(h[c],o,a),color:p}:{value:this._getCellData(h[c],o,a)}}r.data.push(u)}return r},t.toLowerCase()){case"column2d":case"column3d":case"bar2d":case"bar3d":case"pie2d":case"pie3d":case"doughnut2d":case"doughnut3d":case"pareto2d":case"pareto3d":case"line":case"area2d":case"ssgrid":case"funnel":case"pyramid":case"sparkline":case"sparkcolumn":case"sparkwinloss":return this._singleSerises();case"mscolumn2d":case"mscolumn3d":case"msline":case"msarea":case"msbar2d":case"msbar3d":case"marimekko":case"stackedcolumn2d":case"stackedcolumn3d":case"stackedarea2d":case"stackedbar2d":case"stackedbar3d":return this._multiSerises();case"mscombi3d":case"mscombi2d":case"mscolumnline3d":case"stackedcolumn2dline":case"stackedcolumn3dline":case"mscombidy2d":case"mscolumn3dlinedy":case"stackedcolumn3dlinedy":return this._combiSerises();case"scrollcolumn2d":case"scrollline2d":case"scrollArea2d":case"overlappedcolumn2d":case"overlappedbar2d":case"scrollstackedcolumn2d":return this._multiSerises();case"scrollcombi2d":case"scrollcombidy2d":return this._combiSerises();case"scatter":case"bubble":return this._scatter();case"zoomline":return this._zoomLine();case"msstackedcolumn2d":return this._msStacked();case"msstackedcolumn2dlinedy":return this._msStackedColumn2DLineDY()}}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRowArray=function(t){try{var e={};return e.columnInfo=this.cellIdList,e.data=this.getRowData(t),e}catch(t){h.w.printStackTrace(t)}},lt.prototype.getAllArray=function(t){try{var e={};return void 0!==t&&null!=t||(t={}),"object"===(0,T.Z)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,e.data=this.getAllData(t),e}catch(t){h.w.printStackTrace(t)}},lt.prototype.getRangeArray=function(t,e,i){try{var o={};return o.columnInfo=this.cellIdList,o.data=this.getRangeData(t,e,i),o}catch(t){h.w.printStackTrace(t)}},lt.prototype.getMatchedArray=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={});var a={};"object"===(0,
T.Z)(r.includeColumns)&&null!=r.includeColumns&&r.includeColumns.constructor===Array?a.columnInfo=r.includeColumns:a.columnInfo=this.cellIdList;var n=this.getMatchedIndex(t,e,i,o,s),l=[];this.options.getMatchedFromAllData&&(r.realRowIndex=!0);for(var d=0;d<n.length;d++)for(var u=this.getRowData(n[d],r),c=0;c<u.length;c++)l.push(u[c]);return a.data=l,a}catch(t){h.w.printStackTrace(t)}},lt.prototype.getUnmatchedArray=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={});var a={};"object"===(0,T.Z)(r.includeColumns)&&null!=r.includeColumns&&r.includeColumns.constructor===Array?a.columnInfo=r.includeColumns:a.columnInfo=this.cellIdList;for(var n=this.getUnmatchedIndex(t,e,i,o,s),l=[],d=0;d<n.length;d++)for(var u=this.getRowData(n[d],r),c=0;c<u.length;c++)l.push(u[c]);return a.data=l,a}catch(t){h.w.printStackTrace(t)}},lt.prototype.setCellData=function(t,e,i,o,s){try{"object"==(0,T.Z)(t)&&null!=t&&"number"==typeof t.realRowIndex&&(t.filteredRowIndex=t.realRowIndex,t.realRowIndex=!0),this._setCellData.call(this,t,e,i,o,s)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setCellAllData=function(t,e,i,o,s){try{"object"==(0,T.Z)(t)&&null!=t?(t.realRowIndex=!0,this._setCellData.call(this,t)):this._setCellData.call(this,{filteredRowIndex:t,colID:e,value:i,direction:o,skipBroadCast:s,realRowIndex:!0});var r=this.getRowCount();this.filterManager.executeAllFilter(this.dataArr,this.getTotalRow(),this.getTotalCol()),r!==this.getRowCount()&&this.broadcast({gridView:["notifySettedFilter"],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},lt.prototype._setCellData=function(t,e,i,o,s,r,a,n){try{var l,d,u=this.options.depthColumn||!1;if("object"==(0,T.Z)(t)&&null!=t){e=t.colID,i=t.value,t.direction,s=t.skipBroadCast,r=t.noEvent,a=t.excludeId,d=t.notifyRowIndex,u=this.options.depthColumn&&!1!==t.realRowIndex||!0===t.realRowIndex;var c=t.filteredRowIndex;n=t.skipInstance,l=t.undoRedo||"",t=null,t=c}!1!==s&&(s=s||r||WebSquare.DataCollection.stopBroadCast),null==i&&(i=""),this.broadcast({gridView:["notifyBeforeSettedCellData"]}),e=this.getColumnID(e);var p=this.getColumnIndex(e),g=this.getTotalRow(),m=this.getTotalCol(),f=u?t:this.filteredRowIndexArr[t],y=this.cellIdList.length;if(t>=0&&f<g&&p>=0&&p<m){var v=this.cellInfoHash[e],w="";if(v&&("expression"==v.options.inputType?w=v.getExpressionValue(f):null==(w=this.dataArr[f*y+p])&&(w="")),"bigDecimal"==v.options.dataType&&"string"==typeof i)if(""===i)i="";else{var S=(C=i.split("."))[1]?C[1].length:0;try{i=Big(i).toFixed(S)}catch(t){i=NaN}}else if("bigDecimal"==v.options.dataType)if($l("If dataType is bigDecimal, value must be entered to String.["+this.id+"]"),""===(i+=""))i="";else{var C;S=(C=i.split("."))[1]?C[1].length:0;try{i=Big(i).toFixed(S)}catch(t){i=NaN}}else this.options.keepDataType&&"number"==v.options.dataType&&!isNaN(parseFloat(i))&&isFinite(i)&&(i=Number(i));var x=i.toString().replace(/\r(\n)?/,"\n"),_=w.toString().replace(/\r(\n)?/,"\n");if("dataMap"==this.initializeType&&i.constructor===Array&&0===i.length&&(x=i),x!==_){if("dataList"==this.initializeType&&!r)if(!1===O.B.fireEvent(this,"onbeforecelldatachange",{rowIndex:t,colID:e,oldValue:w,newValue:i}))return void this.broadcast({gridView:["notifyCellChanged",[t,e]],fusionchart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifyInvalid"],generalComp:["rollback"]});this.dataArr[f*y+p]=i,"grid"==this.initializeType&&this.options.ref&&!0!==n&&this._setInstanceValue(f,e,i,!0);var I=!0;if("undo"!=l&&"redo"!=l||(I=!1),I&&this.options.maxHistoryCount>0&&("undo"!=this.undoRedo&&"redo"!=this.undoRedo||this.commandList.splice(this.commandPosition,this.commandList.length-this.commandPosition+1),this.commandList.length>=this.options.maxHistoryCount&&this.commandList.shift(),this.commandList.push({row:t,col:e,oldValue:w,value:i}),this.commandPosition=this.commandList.length-1,this.undoRedo=""),!v.options.ignoreStatus){var k=!1,D=this.originalDataArr[f*y+p]
;if(b.D.isNull(D)&&(D=""),D===i){for(var L=[],W=0;W<y;W++)!0!==this.ignoreStatusColArr[W]&&L.push(this.originalDataArr[f*y+W]);var A=[];for(W=0;W<y;W++)if(!0!==this.ignoreStatusColArr[W]){var E="";"expression"==v.options.inputType?E=v.getExpressionValue(f):null==(E=this.dataArr[f*y+W])&&(E=""),A.push(E)}for(var M=!1,q=0;q<L.length;q++)if(L[q]!=A[q]){M=!0;break}M||(k=!0)}k?"U"==this.rowStatusArr[f]&&this.modifyRowStatus(t,"R"):this._updateRowStatus(f)}if("dataList"==this.initializeType&&(this.fireOnModelChangeEvent({type:"cell",rowIndex:t,colID:e,oldValue:w,newValue:i}),r||O.B.fireEvent(this,"oncelldatachange",{rowIndex:t,colID:e,oldValue:w,newValue:i})),!s){var R=this.getFilteredRowIndex(f);null==R&&(R=t),"number"!=typeof d&&(d=R),this.broadcast({colID:e,gridView:["notifySettedCellData",[d,e,i]],linkedDataList:["notifyCellChanged",[f,e,i]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"cell",refresh:!0,rowIndex:f,colID:e,newValue:i,oldValue:w}]],treeview:["notifySetCellData",[R,e,i,w]],generalComp:"both",excludeId:a,type:"setCellData"})}}}}catch(t){h.w.printStackTrace(t)}},lt.prototype._setData=function(t,e,i){try{e=this.getColumnIndex(e);this.dataArr[t*this.getColumnCount()+e]=i}catch(t){h.w.printStackTrace(t)}},lt.prototype.setOriginalCellData=function(t,e,i){try{var o=this.getColumnIndex(e),s=this.options.depthColumn?t:this.getRealRowIndex(t);this._setOriginalCellData.call(this,s,o,i)}catch(t){h.w.printStackTrace(t)}},lt.prototype._setOriginalCellData=function(t,e,i){try{var o=this.getColumnIndex(e);null==i&&(i="");var s=this.getTotalRow(),r=this.getTotalCol(),a="";if(t>=0&&t<s&&o>=0&&o<r&&(a=this.getOriginalCellData(t,o)),t>=0&&t<s&&o>=0&&o<r)i.toString().replace(/\r(\n)?/,"\n")!==a.toString().replace(/\r(\n)?/,"\n")&&(this.originalDataArr[t*this.getColumnCount()+o]=i)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setColumnDefaultValue=function(t,e){try{t=this.getColumnID(t);this.getCellInfo(t).options.defaultValue=e,this.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifySetColumnDefaultValue",[t,e]],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.setRowData=function(t,e,i,o,s){try{if(null==e)return void $l("data is null");this.broadcast({treeview:["notifyBeforeSetRowData",[t,i]]}),i||(t=this.insertRow(t));var r=this.getColumnCount(),a=!1,n={};if("object"===(0,T.Z)(o)&&null!=o&&o.constructor===Array){a=!0;for(var l=0;l<o.length;l++)n[o[l]]=!0}for(var d=0;d<r;d++){var u=this.cellIdList[d],c=this.cellInfoHash[u];if(!a||n[u]){var p=e[d];null==p&&(p=c.options.defaultValue),this._setCellData({filteredRowIndex:t,colID:d,value:p,noEvent:!0})}else"dataMap"!==this.initializeType||s||this._setCellData({filteredRowIndex:t,colID:u,value:c.options.defaultValue,noEvent:!0})}var g=this.filteredRowIndexArr[t];this.broadcast({gridView:["notifyRowModified",[t]],linkedDataList:["notifyRowChanged",[g]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifySetRowData",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},lt.prototype.setOriginalDataArr=function(t){try{this.originalDataArr=t}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.resetOriginalDataArr=function(){try{this.originalDataArr=this.dataArr.slice()}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.setDataFile=function(t,e,i,o,s,r){try{s=null==s?1:parseInt(s,10),"string"==typeof t&&(t=r?this.toArray(t,r):this.toArray(t));var a,n=[],d=parseInt(i.length,10),u=l.v.getComponentById(o),c=[];if(u._excelUploadInfo){var p=JSON.parse(u._excelUploadInfo);p.convertIndexArr&&(c=p.convertIndexArr)}for(var g=0;g<d;g++){"expression"==(b=l.v.getComponentById(o).getCellInfo(i[g])).options.inputType&&n.push(g)}a=t.length/d;for(g=0;g<n.length;g++)for(var m=parseInt(n[g],10),f=0;f<a;f++){t[M=f*d+m]=""}for(g=0;g<d;g++){
var b,y=(b=l.v.getComponentById(o).getCellInfo(i[g])).options.dataType;if(b.itemsetObj&&""!=b.itemsetObj.nodeset&&b.itemsetObj.nodeset.wq_replaceAll(" ","").indexOf("data:")>=0&&0==this._isInitialzedItemArr(b)){b.itemArr=[];var v=b.itemsetObj.nodeset.replace("data:",""),w=WebSquare.DataCollection.comp[v];if(null==w&&b.scope_id&&(w=WebSquare.DataCollection.comp[b.scope_id+"_"+v]||null),w&&WebSquare.idCache[w.uuid])switch(w.initializeType){case"linkedDataList":"select"!==b.options.inputType&&"checkcombobox"!==b.options.inputType&&"autoComplete"!==b.options.inputType||w&&"linkedDataList"===w.initializeType&&null!=w.conditionInfo&&w.conditionInfo.filterInfo.useRef&&(w=w._dataList);case"dataList":for(var S=[],C={},x=0;x<w.getDataLength();x++){var _=w.getCellData(x,b.itemsetObj.label),I=w.getCellData(x,b.itemsetObj.value);C[_]!=I&&(C[_]=I,S.push({label:_,value:I}))}b.itemArr=S;break;case"dataMap":for(S=[],C={},x=0;x<w.getCount();x++){_=w.get(b.itemsetObj.label),I=w.get(b.itemsetObj.value);C[_]!=I&&(C[_]=I,S.push({label:_,value:I}))}b.itemArr=S}}if("select"==b.options.inputType){var T=[];for(f=0;f<b.itemArr.length;f++){var k=b.itemArr[f];if(2!=s){var D=!1;for(x=0;x<c.length;x++)if(c[x]==g.toString()){D=!0;break}if(D)T[k.value]=k.value;else{T[k.label]=k.value;var L=b.getItemText(f);k.label!==L&&(T[L]=k.value)}}else T[k.value]=k.value}for(f=0;f<a;f++){var W=T[t[M=f*d+g]];(!1!==b.options.selectedData||W)&&(t[M]=W)}}else if("checkcombobox"==b.options.inputType){for(T=[],f=0;f<b.itemArr.length;f++){for(D=!1,x=0;x<c.length;x++)if(c[x]==g.toString()){D=!0;break}k=b.itemArr[f];if(D)T[k.value]=k.value;else{T[k.label]=k.value;L=b.getItemText(f);k.label!==L&&(T[L]=k.value)}}for(f=0;f<a;f++){var A=[],E=t[M=f*d+g].split(b.separator);for(x=0;x<E.length;x++)A.push(T[E[x]]);t[M]=A.join(b.separator)}}else if("autoComplete"==b.options.inputType){for(T=[],f=0;f<b.itemArr.length;f++){for(D=!1,x=0;x<c.length;x++)if(c[x]==g.toString()){D=!0;break}k=b.itemArr[f];D?T[k.value]=k.value:T[k.label]=k.value}for(f=0;f<a;f++){W=T[t[M=f*d+g]];(!1!==b.options.selectedData||W)&&(t[M]=W)}}if(""!=b.options.displayFormat)for(f=0;f<a;f++){var M,q,R=t[M=f*d+g],N=b.options.displayFormat;if("number"==y||"bigDecimal"==y||"float"==y)q=WebSquare.text.unformatCurrency(N,R);else if("date"==y)b.options.useMonthYearFormat?(R=R.replace(/\{|\}|\[|\]|\/|\?|\.|\,|\;|\:|\)|\*|\~|\`|\!|\^|\-|\_|\+|\<|\>|\@|\#|\$|\%|\&|\\|\=|\(|\'|\"|\s/g,""),q=WebSquare.date.getIOUnFormatDate(R,b.options.ioFormat,b.options.calendarValueType)):q=WebSquare.text.unformatDate(N,R);else if("time"==y)q=WebSquare.text.unformatTime(N,R);else if("euro"==y&&b.options.customModelFormatter){var F=new RegExp("["+b.options.delimiter+"]","g"),O=new RegExp("["+b.options.decimalDelimiter+"]","g");q=(R=R.replace(F,"")).replace(O,".")}else q=WebSquare.text.unformatText(N,R);t[M]=q}}this.setData(t,e,i)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setData=function(t,e,i,o,s){try{if("string"==typeof t&&(t=s?this.toArray(t,s):this.toArray(t)),i){if(i instanceof Array||"string"!=typeof i||(i=this.toArray(i)),!b.D.isInteger(t.length/i.length))return void d.k.printLog("[WebSquare.DataCollection.dataController.setData] Inconsistent array. Array length["+t.length+"] is not a multiple of column length["+i.length+"].["+this.id+"]");t=this.getMappingData(t,i,e)}if(!b.D.isInteger(t.length/this.oneRowDataLength))return void d.k.printLog("[WebSquare.DataCollection.dataController.setData] Inconsistent array. Array length["+t.length+"] is not a multiple of column length["+this.oneRowDataLength+"].["+this.id+"]");for(var r=[],a=0;a<this.cellIdList.length;a++)r[a]=this.getCellInfo(this.cellIdList[a]);for(var n=t.length/this.oneRowDataLength,l=0;l<r.length;l++)if(r[l].options.setFormatter)for(var u=b.D.getGlobalFunction(r[l].options.setFormatter,this.scope_id),c=0;c<n;c++){for(var p=[],g=0;g<this.oneRowDataLength;g++)p.push(t[c*this.oneRowDataLength+g])
;"function"==typeof u&&(t[c*this.oneRowDataLength+l]=u.call(this,p,c,this.cellIdList[l]))}if(null!=o&&o.length>0&&t.length/this.oneRowDataLength===o.length){var m=!!e;this.setGridData(t,e,m),this.setAllRowStatus(o,e)}else this.setGridData(t,e)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setGridData=function(t,e,i){try{this.options.keepFilter&&this.broadcast({gridView:["notifyBeforeKeepFilter"]}),this.broadcast({gridView:["notifySettedData",[e]]}),this.filterManager.clear(),this.filteredRowIndexArr=[];for(var o=this.getTotalRow(),s=0;s<o;s++)this.filteredRowIndexArr.push(s);this.options.keepFilter||this.broadcast({gridView:["clearHeaderSort"]});var r=t.length/this.oneRowDataLength;if(this.options.keepDataType){var a=this.getTotalCol();for(s=0;s<a;s++){if("number"==this.getCellInfo(s).options.dataType)for(var n=0;n<r;n++){var l=t[n*this.oneRowDataLength+s];!isNaN(parseFloat(l))&&isFinite(l)&&(t[n*this.oneRowDataLength+s]=Number(l))}}}e=e||!1;var d=this.getTotalRow();if(e)for(s=0;s<t.length;s++)this.dataArr.push(t[s]),this.originalDataArr.push(t[s]);else d=0,this.dataArr=t,this.filteredRowIndexArr=[],this.originalDataArr=[],this.originalDataArr=this.dataArr.slice(0),this.commandList=[],this.commandPosition=-1,this.commandListMulti=[],this.commandPositionMulti=-1,this.undoRedo="","dataList"!=this.initializeType&&"grid"!=this.initializeType||this.removeManager.removeAll();for(s=0;s<r;s++)this.filteredRowIndexArr.push(s+d);if(i||this._initRowStatus(d),this.options.keepRowPosition&&e&&this.options.keepRowPosition||(this.rowPosition=null),!e&&null!=this.options.initRowPosition){var u=parseInt(this.options.initRowPosition,10);this.setRowPosition(u)}var c={linkedDataList:["notifyDataChanged"],gridView:["notifySettedGridData",[t,e,d]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"};"string"==typeof this.options.refreshMode&&""!=this.options.refreshMode&&(c.refreshMode=this.options.refreshMode),this.broadcast(c),O.B.fireEvent(this,"ondataload"),this.options.keepFilter&&!this.flag_preventLoop&&(this.flag_preventLoop=!0,this.broadcast({gridView:["notifyAfterKeepFilter"]}),this.flag_preventLoop=!1)}catch(t){h.w.printStackTrace(t)}},lt.prototype.insertData=function(t,e){try{return this._insertData(t,e)}catch(t){h.w.printStackTrace(t)}},lt.prototype._insertData=function(t,e,i){try{if(null==e)return void $l("data is null");var o=this.getColumnCount(),s=e.length/this.getColumnCount();if(e){if(!(e instanceof Array))return;if(!b.D.isInteger(s))return void d.k.printLog("[WebSquare.DataCollection.dataController.getMappingData] Inconsistent array. Array length["+e.length+"] is not a multiple of column length["+o+"].["+this.id+"]")}var r={},a=[],n=s,l=0,u=1;i<0&&(n=1,l=s+1,u=-1);for(var c=this.filteredRowIndexArr[t],p=n;p*u>l*u;p-=u){var g=t+p-1;r[g]=[],a.push(g),this.insertRow(t,{noEvent:!0});for(var m=0;m<o;m++){var f=e[o*(p-1)+m];this._setCellData({filteredRowIndex:t,colID:m,value:f,noEvent:!0}),r[g].push(f)}}this.broadcast({gridView:["notifyDataChanged",[{refreshScroll:!0}]],linkedDataList:["notifyRowInserted",[c,a]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"}),O.B.fireEvent(this,"oninsertrow",{insertedDataObj:r})}catch(t){h.w.printStackTrace(t)}},lt.prototype.setRowXML=function(t,e,i,o,s){try{if(null==e)return void $l("data is null");var r;this.broadcast({treeview:["notifyBeforeSetRowData",[t,i]]}),i||(t=this.insertRow(t)),r=void 0===e.documentElement?e:e.documentElement;var a=[],n={},l=this.getColumnCount(),d=!1,u={};if("object"===(0,T.Z)(o)&&null!=o&&o.constructor===Array){d=!0;for(var c=0;c<o.length;c++)u[o[c]]=!0}for(var p=0;p<l;p++){var g=this.cellIdList[p],m=null,f=this.cellInfoHash[g],y=null
;if(!d||u[g])if(f.options.importFormatter)a.push(g);else{if(null!=(y=r.selectSingleNode(g)))if(""==this.options.valueNode||this.allowTextNode){if(this.allowTextNode)m=null==(v=WebSquare.xml.getCDataNodeValue(y))?this.getTextNodeValue(y):v;else m=this.getTextNodeValue(y);!m&&this.allowTextNode&&(m=""==this.options.valueNode?null:y.getAttribute(this.options.valueNode))}else m=y.getAttribute(this.options.valueNode);else if(null!=(y=WebSquare.xml.getElementsByTagName(r,g)[0]))if(""==this.options.valueNode||this.allowTextNode){var v;if(this.allowTextNode)m=null==(v=WebSquare.xml.getCDataNodeValue(y))?this.getTextNodeValue(y):v;else m=this.getTextNodeValue(y);!m&&this.allowTextNode&&(m=""==this.options.valueNode?null:y?y.getAttribute(this.options.valueNode):null)}else m=y?y.getAttribute(this.options.valueNode):null;null==m&&(m="number"==f.options.dataType&&f.options.defaultValue&&!isNaN(f.options.defaultValue)?parseInt(f.options.defaultValue,10):f.options.defaultValue),this._setCellData({filteredRowIndex:t,colID:p,value:m,noEvent:!0}),n[g]=m}else"dataMap"!==this.initializeType||s||this._setCellData({filteredRowIndex:t,colID:g,value:f.options.defaultValue,noEvent:!0})}for(var w=0;w<a.length;w++){f=this.cellInfoHash[a[w]];try{var S=t,C=b.D.getGlobalFunction(f.options.importFormatter,this.scope_id);"function"==typeof C&&(m=C.call(this,n,S,a[w]))}catch(t){m=f.options.defaultValue,h.w.printStackTrace(t,null,this)}this._setCellData({filteredRowIndex:t,colID:a[w],value:m,noEvent:!0})}var x=this.filteredRowIndexArr[t];this.broadcast({gridView:["notifyRowModified",[t]],linkedDataList:["notifyRowChanged",[x]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifySetRowData",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},lt.prototype.setXML=function(t,e,i,o){try{if(null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.setXML] XML is null["+this.id+"]");var s=this.xmlData2ArrData(t,i);if(void 0===s.dataArr)return void d.k.printLog("[WebSquare.DataCollection.dataController.setXML] DataArray which converted from XML is undefined.["+this.id+"]");var r=b.D.getBoolean(o)?s.rowStatusArr:[];this.setData(s.dataArr,e,null,r)}catch(t){h.w.printStackTrace(t)}},lt.prototype.insertXML=function(t,e){try{if(null==e)return void $l("data is null");var i;i=void 0===e.documentElement?e:e.documentElement;var o=this.xmlData2ArrData(i);this.insertData(t,o.dataArr)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setJSON=function(t,e,i,o){try{if(null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.setJSON] data is null["+this.id+"]");if(null!=this.options.customUnformatter){var s=b.D.getGlobalFunction(this.options.customUnformatter);"function"==typeof s&&(t=s(this,t))}var r=this.jsonData2ArrData(t,i);if(void 0===r.dataArr)return void d.k.printLog("[WebSquare.DataCollection.dataController.setJSON] DataArray which converted from JSON is undefined.["+this.id+"]");var a=b.D.getBoolean(o)?r.rowStatusArr:[];this.setData(r.dataArr,e,null,a)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setRowJSON=function(t,e,i,o,s){try{if(null==e)return void $l("data is null");this.broadcast({treeview:["notifyBeforeSetRowData",[t,i]]}),i||(t=this.insertRow(t));var r=e,a=!1,n={};if("object"===(0,T.Z)(o)&&null!=o&&o.constructor===Array){a=!0;for(var l=0;l<o.length;l++)n[o[l]]=!0}for(var d in e)if(!a||n[d]){g=this.getCellInfo(d);var u=null;if(g.options.importFormatter)try{var c=this.getColumnIndex(d),p=b.D.getGlobalFunction(g.options.importFormatter,this.scope_id);"function"==typeof p&&(u=p.call(this,r,c,d))}catch(t){u=g.options.defaultValue,h.w.printStackTrace(t,null,this)}else u=e[d];null==u&&(u=g.options.defaultValue),this._setCellData({filteredRowIndex:t,colID:d,value:u,noEvent:!0})}else if("dataMap"===this.initializeType&&!s){var g=this.getCellInfo(d);this._setCellData({filteredRowIndex:t,colID:d,value:g.options.defaultValue,noEvent:!0})}
var m=this.filteredRowIndexArr[t];this.broadcast({gridView:["notifyRowModified",[t]],linkedDataList:["notifyRowChanged",[m]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifySetRowData",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},lt.prototype.insertJSON=function(t,e){try{if(null==e)return void d.k.printLog("[WebSquare.DataCollection.dataController.insertJSON] data is null["+this.id+"]");if(null!=this.options.customUnformatter){var i=b.D.getGlobalFunction(this.options.customUnformatter);"function"==typeof i&&(e=i(this,e))}var o=this.jsonData2ArrData(e);if(void 0===o.dataArr)return void d.k.printLog("[WebSquare.DataCollection.dataController.insertJSON] DataArray which converted from JSON is undefined.["+this.id+"]");this.insertData(t,o.dataArr)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setArray=function(t,e,i,o,s){try{if(null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.setArray] data is null["+this.id+"]");var r=t.data,a=[];if(a="object"===(0,T.Z)(i)&&null!=i&&i.constructor===Array?i:t.columnInfo,void 0===r)return void d.k.printLog("[WebSquare.DataCollection.dataController.setArray] DataArray which converted from jsonArray is undefined.["+this.id+"]");var n=b.D.getBoolean(o)?t.rowStatus:[];this.setData(r,e,a,n,s)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setArrayFile=function(t,e,i,o,s){try{if(null==o&&(o=1),null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.setArrayFile] data is null["+this.id+"]");var r=t.data,a=t.columnInfo;if(void 0===r)return void d.k.printLog("[WebSquare.DataCollection.dataController.setArrayFile] DataArray which converted from jsonArray is undefined.["+this.id+"]");this.setDataFile(r,e,a,i,o,s)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setRowArray=function(t,e,i){try{if(null==e)return void d.k.printLog("[WebSquare.DataCollection.dataController.setRowArray] data is null["+this.id+"]");var o;if(0==(o=this.getMappingData(e.data,e.columnInfo)).length)return void d.k.printLog("[WebSquare.DataCollection.dataController.setRowArray] DataArray which converted from jsonArray is undefined.["+this.id+"]");this.setRowData(t,o,i)}catch(t){h.w.printStackTrace(t)}},lt.prototype.rowMoveUp=function(t){try{if((l=this.options.depthColumn?t:this.getRealRowIndex(t))>=this.getRowCount()&&(l=this.getRowCount()-1),l<=0)return;for(var e,i=l-1,o=l,s=this.oneRowDataLength,r=0;r<s;r++)e=this.dataArr[s*i+r],this.dataArr[s*i+r]=this.dataArr[s*o+r],this.dataArr[s*o+r]=e,e=this.originalDataArr[s*i+r],this.originalDataArr[s*i+r]=this.originalDataArr[s*o+r],this.originalDataArr[s*o+r]=e;var a=this.getRowStatus(t-1),n=this.getRowStatus(t);this._setRowStatus(i,n),this._setRowStatus(o,a);var l=this.filteredRowIndexArr[t];this.broadcast({linkedDataList:["notifyRowMoveUp",[l]],gridView:["notifyRowMoveUp",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.rowMoveDown=function(t){try{if((l=this.options.depthColumn?t:this.getRealRowIndex(t))<0&&(l=0),l>=this.getRowCount()-1)return;for(var e,i=l+1,o=l,s=this.oneRowDataLength,r=0;r<s;r++)e=this.dataArr[s*i+r],this.dataArr[s*i+r]=this.dataArr[s*o+r],this.dataArr[s*o+r]=e,e=this.originalDataArr[s*i+r],this.originalDataArr[s*i+r]=this.originalDataArr[s*o+r],this.originalDataArr[s*o+r]=e;var a=this.getRowStatus(t+1),n=this.getRowStatus(t);this._setRowStatus(i,n),this._setRowStatus(o,a);var l=this.filteredRowIndexArr[t];this.broadcast({linkedDataList:["notifyRowMoveDown",[l]],gridView:["notifyRowMoveDown",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.insertRow=function(t,e){try{e=e||{};var i=this.getDataLength(),o=this.getTotalRow();"string"!=typeof t&&null!=t||(t=parseInt(t,10)),isNaN(t)&&(t=i);var s=t;this.filterManager.useFilter()?"true"==e.insertIntoSortedRow&&this.filterManager.onlySortFilter()||(s=o):s>o&&(s=o),
!this.options.depthColumn&&t>this.getDataLength()&&(t=this.getDataLength()),this.broadcast({gridView:["notifyBeforeInsertedRow",[t]]});for(var r=this.getTotalCol(),a=[s*r,0],n=[],l=0;l<r;l++){var d=this.getCellInfo(l);if(e.insertData&&e.insertData[l])var u=e.insertData[l];else if("number"==d.options.dataType&&d.options.defaultValue&&!isNaN(d.options.defaultValue))u=parseInt(d.options.defaultValue,10);else u=d.options.defaultValue;a.push(u),n.push(u)}[].splice.apply(this.dataArr,a),[].splice.apply(this.originalDataArr,a),this._createRowStatus(s);var c=this.filteredRowIndexArr.length;if(this.options.depthColumn)for(l=0;l<this.filteredRowIndexArr.length;l++)if(1==this.filteredRowIndexArr.length)c=this.filteredRowIndexArr[l]==s?l:l+1;else{if(this.filteredRowIndexArr[l]<=s&&s<this.filteredRowIndexArr[l+1]){c=l;break}if(s==this.filteredRowIndexArr[l+1]){c=l+1;break}}else c=t;for(l=0;l<this.filteredRowIndexArr.length;l++)this.filteredRowIndexArr[l]>=s&&this.filteredRowIndexArr[l]++;this.filteredRowIndexArr.splice(c,0,s);s=this.filteredRowIndexArr[t];if(e.noEvent)this.broadcast({gridView:["notifyAfterInsertedRow",[c,!0]],_bForceBroadcast:!0});else{this.broadcast({linkedDataList:["notifyRowInserted",[s]],treeview:["notifyInsertRow",[c]],generalComp:"both",type:"insertRow"}),this.broadcast({gridView:["notifyAfterInsertedRow",[c,!this._getBroadcastAll()]],_bForceBroadcast:!0});var p={};p[c]=n,O.B.fireEvent(this,"oninsertrow",{insertedDataObj:p})}return t}catch(t){h.w.printStackTrace(t)}},lt.prototype.removeRow=function(t,e){try{e=e||{},null==t&&(t=this.getTotalRow()-1),t=parseInt(t,10);var i=this.options.depthColumn?t:this.getRealRowIndex(t),o=this.getTotalCol();if(null==i||i>=this.getTotalRow())return;if(this.options.depthColumn&&!1!==e.removeChildren&&this.hasChild(i)){var s=this.getRecursiveRowIndex(i);return s.push(i),e.noEvent=!0,e.removeChildren=!1,this.removeRows(s,e)}this.broadcast({gridView:["notifyBeforeRemovedRow",[t]]});var r=this.dataArr.splice(i*o,o),a=this.removeRowStatus(t);this.originalDataArr.splice(i*o,o);var n=this.getFilteredRowIndex(i);n>-1&&this.filteredRowIndexArr.splice(n,1);for(var l=0;l<this.filteredRowIndexArr.length;l++)this.filteredRowIndexArr[l]>=i&&this.filteredRowIndexArr[l]--;"dataList"!=this.initializeType&&"grid"!=this.initializeType||this.options.removeDummyRowStatus&&(!this.options.removeDummyRowStatus||"C"==a)||(this.options.removeDummyRowStatus&&"V"==a?this.options.saveRemovedDataDeletedInsertedRow&&this.saveRemovedRow(i,r):this.saveRemovedRow(i,r));var d=r.slice(0);if(e.noEvent)this.broadcast({gridView:["notifyAfterRemovedRow",[n,!0,i,d.join(",")]],_bForceBroadcast:!0});else{this.broadcast({linkedDataList:["notifyRowRemoved",[i]],treeview:["notifyRemoveRow",[t]],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"}),this.broadcast({gridView:["notifyAfterRemovedRow",[n,!this._getBroadcastAll(),i,d.join(",")]],_bForceBroadcast:!0});var u={};u[n]=d,O.B.fireEvent(this,"onremoverow",{removedDataObj:u})}return r}catch(t){h.w.printStackTrace(t)}},lt.prototype.removeRows=function(t,e){try{if(null==t)return void d.k.printLog("[WebSquare.DataCollection.dataController.removeRows] rowIndexArr is undefined.["+this.id+"]");if(0==t.length)return void d.k.printLog("[WebSquare.DataCollection.dataController.removeRows] rowIndexArr is empty.["+this.id+"]");e=e||{noEvent:!0},t.sort((function(t,e){return parseInt(t)<parseInt(e)?1:-1}));for(var i=[],o={},s=0;s<t.length;s++){var r=this.removeRow(t[s],e);o[t[s]]=r.slice(0),i.push(r)}return this.rowPosition=null,this.columnPosition=null,e.skipNotify||(this.broadcast({linkedDataList:["notifyRowRemoved"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"}),this.broadcast({gridView:["notifyRemovedRows",[t.join(","),!this._getBroadcastAll()]],_bForceBroadcast:!0})),O.B.fireEvent(this,"onremoverow",{removedDataObj:o}),i}catch(t){h.w.printStackTrace(t)}},
lt.prototype.removeAll=function(t){try{if(null!=t&&"true"==t.skipSavingRemovedData||"dataList"==this.initializeType&&this.removeManager.setData(this.getAllData(),!0),!this.dataArr)return;var e=this.dataArr.slice(0);this.dataArr=[],this.originalDataArr=[],this.filteredRowIndexArr=[],this._initRowStatus(0),this.broadcast({linkedDataList:["notifyRemoveAll"],gridView:["notifyRemovedAll",[null==t||!1!==t.clearHistory]],generalComp:"both",pivot:["refreshItemset",[{type:"render",refresh:!0}]]});var i=t&&!0===t.skipEvent,o=!1;if("dataList"==this.initializeType&&this.userEventList&&!i){for(var s=this.userEventList.length-1;s>=0;s--)if("onremoverow"==this.userEventList[s].name){o=!0;break}if(o){var r=e.slice(0),a={},n=r.length/this.oneRowDataLength;for(s=0;s<n;s++)a[s]=r.slice(s*this.oneRowDataLength,(s+1)*this.oneRowDataLength);O.B.fireEvent(this,"onremoverow",{removedDataObj:a})}}return e}catch(t){h.w.printStackTrace(t)}},lt.prototype._removeAll_keepFilter=function(t){try{return void 0!==t&&null!=t||(t={}),t.clearHistory=!1,this.removeAll(t)}catch(t){h.w.printStackTrace(t)}},lt.prototype.removeRange=function(t,e){try{for(var i=[],o=e;o>=t;o--)i.push(o);return this.removeRows(i)}catch(t){h.w.printStackTrace(t)}},lt.prototype.reform=function(){try{this._initRowStatus(),this.originalDataArr=this.dataArr.slice(0),"dataList"==this.initializeType&&this.removeManager.removeAll(),this.broadcast({linkedDataList:["notifyReformed"],gridView:["notifyReformed"],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},lt.prototype.undoRow=function(t){try{if(this.options.depthColumn&&this.hasChild(t)&&this.options.undoRecursiveRow){var e=this.getChildrenRowArr(t);this.undoRows(e)}this._undoRow(t);var i=this.filteredRowIndexArr[t];this.broadcast({linkedDataList:["notifyRowChanged",[i]],gridView:["notifyRowModified",[t]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},lt.prototype.undoRows=function(t){try{t.sort((function(t,e){return parseInt(t)<parseInt(e)?1:-1}));for(var e=[],i=0;i<t.length;i++){var o=this.undoRow(t[i]);e.push(o)}return e}catch(t){h.w.printStackTrace(t)}},lt.prototype._undoRow=function(t){try{for(var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=0;i<this.oneRowDataLength;i++){var o=this.originalDataArr[e*this.oneRowDataLength+i];this._setData(e,i,o)}this._updateRowStatus(e),this._undeleteRowStatus(e)}catch(t){h.w.printStackTrace(t)}},lt.prototype.undoAll=function(){try{for(var t=this.getRowIndexByStatus("UDV"),e=0;e<t.length;e++){var i=t[e];this._undoRow(i)}this.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged",[{refreshScroll:!0}]],generalComp:"both"})}catch(t){h.w.printStackTrace(t)}},lt.prototype.restore=function(){try{if("undo"==this.undoRedo&&this.commandPosition--,this.commandPosition<0)return void(this.commandPosition=0);var t=this.commandList[this.commandPosition];this._setCellData({filteredRowIndex:t.row,colID:t.col,value:t.oldValue,noEvent:!1,undoRedo:"undo"}),this.undoRedo="undo"}catch(t){h.w.printStackTrace(t)}},lt.prototype.redo=function(){try{if("redo"==this.undoRedo&&this.commandPosition++,this.commandList.length-1<this.commandPosition)return void(this.commandPosition=this.commandList.length-1);var t=this.commandList[this.commandPosition];this._setCellData({filteredRowIndex:t.row,colID:t.col,value:t.value,noEvent:!1,undoRedo:"redo"}),this.undoRedo="redo"}catch(t){h.w.printStackTrace(t)}},lt.prototype._undoRedoHistoryClear=function(){try{this.commandList=[],this.commandPosition=-1,this.undoRedo=""}catch(t){h.w.printStackTrace(t)}},lt.prototype.undoRedoSave=function(t){try{for("undo"!=this.undoRedoMulti&&"redo"!=this.undoRedoMulti||this.commandListMulti.splice(this.commandPositionMulti,this.commandListMulti.length-this.commandPositionMulti+1),this.commandListMulti.push(t);this.commandListMulti.length>500;)this.commandListMulti.shift();this.commandPositionMulti=this.commandListMulti.length-1,this.undoRedoMulti=""}catch(t){h.w.printStackTrace(t)}},
lt.prototype._undoRedoMultiHistoryClear=function(){try{this.commandListMulti=[],this.commandPositionMulti=-1,this.undoRedoMulti="",this._undoRedoHistoryClear()}catch(t){h.w.printStackTrace(t)}},lt.prototype._clearHistory=function(){try{this._undoRedoMultiHistoryClear()}catch(t){h.w.printStackTrace(t,null,this)}},lt.prototype.restoreMulti=function(){try{if("undo"==this.undoRedoMulti&&this.commandPositionMulti--,this.commandPositionMulti<0)return void(this.commandPositionMulti=0);for(var t=this.commandListMulti[this.commandPositionMulti].length;t>0;t--)this.restore();this.undoRedoMulti="undo"}catch(t){h.w.printStackTrace(t)}},lt.prototype.redoMulti=function(){try{if("redo"==this.undoRedoMulti&&this.commandPositionMulti++,this.commandListMulti.length-1<this.commandPositionMulti)return this.commandPositionMulti=this.commandListMulti.length-1,void(this.undoRedoMulti="");for(var t=this.commandListMulti[this.commandPositionMulti],e=0;e<t.length;e++)this.redo();this.undoRedoMulti="redo"}catch(t){h.w.printStackTrace(t)}},lt.prototype.insertColumn=function(t,e){try{if(void 0!==this.bodyIdColIndexMap[t])return void d.k.printLog("[WebSquare.DataCollection.dataController.insertColumn] already exist column in ["+this.id+"]");for(var i=this.getTotalRow(),o=this.getTotalCol(),s=e||{},r=null==s.colIndex?o:parseInt(s.colIndex),n=null==s.defaultValue?"":s.defaultValue,l=[],u=[],c=0;c<i;c++)for(var p=0,g=0;g<o+1;g++)g===r?(l.push(n),u.push(n)):(l.push(this.dataArr[c*o+p]),u.push(this.originalDataArr[c*o+p]),p++);this.dataArr=l,this.originalDataArr=u,this.bodyIdColIndexMap[t]=this.oneRowDataLength;var m=new WebSquare.DataCollection.dataListCellInfo(null,this,this.oneRowDataLength);m.id=t,m.name=s.name||"name"+(this.oneRowDataLength+1),a.x.extendKeepingType(m.options,s),m.options.col_id=t,m.options.id=t,m.options.name=m.name,this.cellInfoHash[t]=m,this.oneRowDataLength++,this.cellIdList.splice(r,0,t);var f=a.x.extend({},m.options);this.structure.rowArr[0].splice(r,0,f),"dataList"===this.initializeType&&this.removeManager.insertColumn(t,e)}catch(t){h.w.printStackTrace(t)}},lt.prototype.removeColumn=function(t,e){try{var i=this.getTotalRow(),o=this.getTotalCol(),s=this.getColumnID(t);if(null==s)return!1;for(var r=this.getColumnIndex(s),a=[],n=[],l=0;l<i;l++)for(var d=0;d<o;d++)d!==r&&(a.push(this.dataArr[l*o+d]),n.push(this.originalDataArr[l*o+d]));this.dataArr=a,this.originalDataArr=n,delete this.bodyIdColIndexMap[s],delete this.cellInfoHash[s],this.oneRowDataLength--;var u=-1,c=0;for(l=0;l<this.cellIdList.length;l++)this.cellIdList[l]===s?u=l:(this.bodyIdColIndexMap[this.cellIdList[l]]=c,c++);this.cellIdList.splice(u,1);var p=this.structure.rowArr;for(l=0;l<p.length;l++){var g=p[l];for(d=0;d<g.length;d++)if(g[d].id===s){g.splice(d,1);break}}"dataList"===this.initializeType&&this.removeManager.removeColumn(t,e)}catch(t){h.w.printStackTrace(t)}},lt.prototype.setMatchIgnoreCase=function(t){try{this.options.matchIgnoreCase=b.D.getBoolean(t)}catch(t){h.w.printStackTrace(t)}},lt.prototype._setInstanceValue=function(t,e,i,o){try{return!("grid"!=this.initializeType||!this.options.ref)&&(WebSquare.ModelUtil._setInstanceValue({xpath:this._getXPath({rowIndex:t,colID:e}),value:i,gridNoRefresh:o,scopeId:this.options.aliasDataCollection||void 0}),!0)}catch(t){h.w.printStackTrace(t)}},lt.prototype._getXPath=function(t){try{var e="";if("grid"==this.initializeType&&this.options.ref&&null!=t){var i=t.rowIndex,o=this.getColumnID(t.colID);e=this.options.ref;for(var s=0;s<this.repeatNodeTagName.length;s++)0==s?null==i||isNaN(i)?e+="/"+this.repeatNodeTagName[0]:e+="/"+this.repeatNodeTagName[0]+"["+(i+1)+"]":e+="/"+this.repeatNodeTagName[s];this.options.valueNode&&!0!==t.skipValueNode?e+="/"+o+"/@value":e+="/"+o}return e}catch(t){h.w.printStackTrace(t)}},lt.prototype._isInitialzedItemArr=function(t){try{if(void 0===t.itemArr)return!1;if("select"==t.options.inputType||"checkcombobox"==t.options.inputType||"autoComplete"==t.options.inputType){var e=0
;if(1==t.options.chooseOption&&e++,1==t.options.allOption&&e++,t.itemArr.length<e+1)return!1}return!0}catch(t){h.w.printStackTrace(t)}};var ht=function(){};ht.prototype.getRowStatusValue=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getRowStatusValue(e)}catch(t){h.w.printStackTrace(t,null,this)}},ht.prototype._getRowStatusValue=function(t){try{switch(this.rowStatusArr[t]){case"R":return 0;case"U":return 1;case"C":return 2;case"D":return 3;case"V":return 4;case"E":return 5}}catch(t){h.w.printStackTrace(t,null,this)}},ht.prototype.getRowStatus=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getRowStatus(e)}catch(t){h.w.printStackTrace(t,null,this)}},ht.prototype._getRowStatus=function(t){try{return this.rowStatusArr[t]}catch(t){h.w.printStackTrace(t,null,this)}},ht.prototype.getRowIndexByStatus=function(t){try{for(var e=[],i=0;i<this.getTotalRow();i++){var o=this.options.depthColumn?i:this.getRealRowIndex(i);t.indexOf(this.rowStatusArr[o])>-1&&e.push(i)}return e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getInsertedIndex=function(){try{return this.getRowIndexByStatus("C")}catch(t){h.w.printStackTrace(t)}},ht.prototype.getUpdatedIndex=function(){try{return this.getRowIndexByStatus("U")}catch(t){h.w.printStackTrace(t)}},ht.prototype.getDeletedIndex=function(){try{return this.getRowIndexByStatus("DV")}catch(t){h.w.printStackTrace(t)}},ht.prototype.getVoidIndex=function(){try{return this.getRowIndexByStatus("V")}catch(t){h.w.printStackTrace(t)}},ht.prototype.getOnlyDeletedIndex=function(){try{return this.getRowIndexByStatus("D")}catch(t){h.w.printStackTrace(t)}},ht.prototype.getModifiedIndex=function(){try{return this.getRowIndexByStatus("CUD")}catch(t){h.w.printStackTrace(t)}},ht.prototype.getInsertedData=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getInsertedIndex(),o=0;o<i.length;o++)e.push(this.getRowData(i[o],t));return e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getInsertedXML=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=this.getInsertedIndex();return this.getArrXML(e,t)}catch(t){h.w.printStackTrace(t)}},ht.prototype.getInsertedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getInsertedIndex(),o=0;o<i.length;o++)e.push(this.getRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof s&&(e=s(this,e))}return e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getRefInsertedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getInsertedIndex(),o=0;o<i.length;o++)e.push(this.getRefRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=s&&(e=s(this,e))}return e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getInsertedArray=function(t){try{void 0!==t&&null!=t||(t={});var e={};"object"===(0,T.Z)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getInsertedIndex(),s=0;s<o.length;s++)i=i.concat(this.getRowData(o[s],t));return e.data=i,e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getDeletedData=function(t,e){try{void 0!==e&&null!=e||(e={}),!0!==e.noRefresh&&this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowData(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowData(s,e));if(null!=this.options.customFormatter){var r=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(i=r(this,i))}return i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getDeletedXML=function(t,e){try{this.broadcast({gridView:["_endEdit"]})
;var i=this.getDeletedIndex(),o=this.getArrXML(i,e);if(!t&&"dataList"==this.initializeType)if(this.options.removedDataMatch)for(var s=WebSquare.xml.findNode(o,this.options.baseNode),r=0;r<this.removeManager.getDataLength();r++){for(var a=s,n=this.options.repeatNode.split("/"),d=0;d<n.length-1;d++){var u=n[d],c=u.indexOf(":");if(c>=0)try{var p=u.substring(0,c),g=l.v.getNamespaces(s);g[p]&&(u=u+" xmlns:"+p+'="'+g[p]+'"')}catch(t){}a=a.appendChild(WebSquare.xml.parse("<"+u+"/>").documentElement)}a.appendChild(this.removeManager.getRowXML(r,e).documentElement)}else{var m=WebSquare.xml.findNode(o,this.options.baseNode);for(r=0;r<this.removeManager.getDataLength();r++)m.appendChild(this.removeManager.getRowXML(r,e).documentElement)}return o}catch(t){h.w.printStackTrace(t)}},ht.prototype.getDeletedJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowJSON(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowJSON(s,e));return i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getRefDeletedJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRefRowJSON(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRefRowJSON(s,e));return i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getDeletedArray=function(t,e){try{void 0!==e&&null!=e||(e={});var i={};"object"===(0,T.Z)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array?i.columnInfo=e.includeColumns:i.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var o=[],s=this.getDeletedIndex(),r=0;r<s.length;r++)o=o.concat(this.getRowData(s[r],e));if(!t&&"dataList"==this.initializeType)for(r=0;r<this.removeManager.getDataLength();r++)o=o.concat(this.removeManager.getRowData(r,e));return i.data=o,i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getVoidData=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getVoidIndex(),s=0;s<o.length;s++)i.push(this.getRowData(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowData(s));return i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getVoidXML=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=this.getVoidIndex(),o=this.getArrXML(i,e);if(!t&&"dataList"==this.initializeType)if(this.options.removedDataMatch)for(var s=WebSquare.xml.findNode(o,this.options.baseNode),r=0;r<this.removeManager.getDataLength();r++){for(var a=s,n=this.options.repeatNode.split("/"),d=0;d<n.length-1;d++){var u=n[d],c=u.indexOf(":");if(c>=0)try{var p=u.substring(0,c),g=l.v.getNamespaces(s);g[p]&&(u=u+" xmlns:"+p+'="'+g[p]+'"')}catch(t){}a=a.appendChild(WebSquare.xml.parse("<"+u+"/>").documentElement)}a.appendChild(this.removeManager.getRowXML(r,e).documentElement)}else{var m=WebSquare.xml.findNode(o,this.options.baseNode);for(r=0;r<this.removeManager.getDataLength();r++)m.appendChild(this.removeManager.getRowXML(r,e).documentElement)}return o}catch(t){h.w.printStackTrace(t)}},ht.prototype.getVoidJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getVoidIndex(),s=0;s<o.length;s++)i.push(this.getRowJSON(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowJSON(s));if(null!=this.options.customFormatter){var r=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(i=r(this,i))}return i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getVoidArray=function(t,e){try{var i={};i.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var o=[],s=this.getVoidIndex(),r=0;r<s.length;r++)o=o.concat(this.getRowData(s[r]))
;if(!t&&"dataList"==this.initializeType)for(r=0;r<this.removeManager.getDataLength();r++)o=o.concat(this.removeManager.getRowData(r));return i.data=o,i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getOnlyDeletedData=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getOnlyDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowData(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowData(s));return i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getOnlyDeletedXML=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=this.getOnlyDeletedIndex(),o=this.getArrXML(i,e);if(!t&&"dataList"==this.initializeType)if(this.options.removedDataMatch)for(var s=WebSquare.xml.findNode(o,this.options.baseNode),r=0;r<this.removeManager.getDataLength();r++){for(var a=s,n=this.options.repeatNode.split("/"),d=0;d<n.length-1;d++){var u=n[d],c=u.indexOf(":");if(c>=0)try{var p=u.substring(0,c),g=l.v.getNamespaces(s);g[p]&&(u=u+" xmlns:"+p+'="'+g[p]+'"')}catch(t){}a=a.appendChild(WebSquare.xml.parse("<"+u+"/>").documentElement)}a.appendChild(this.removeManager.getRowXML(r,e).documentElement)}else{var m=WebSquare.xml.findNode(o,this.options.baseNode);for(r=0;r<this.removeManager.getDataLength();r++)m.appendChild(this.removeManager.getRowXML(r,e).documentElement)}return o}catch(t){h.w.printStackTrace(t)}},ht.prototype.getOnlyDeletedJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getOnlyDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowJSON(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowJSON(s));if(null!=this.options.customFormatter){var r=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(i=r(this,i))}return i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getOnlyDeletedArray=function(t,e){try{var i={};i.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var o=[],s=this.getOnlyDeletedIndex(),r=0;r<s.length;r++)o=o.concat(this.getRowData(s[r]));if(!t&&"dataList"==this.initializeType)for(r=0;r<this.removeManager.getDataLength();r++)o=o.concat(this.removeManager.getRowData(r));return i.data=o,i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getUpdatedData=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getUpdatedIndex(),o=0;o<i.length;o++)e.push(this.getRowData(i[o],t));return e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getUpdatedXML=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=this.getUpdatedIndex();return this.getArrXML(e,t)}catch(t){h.w.printStackTrace(t)}},ht.prototype.getUpdatedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getUpdatedIndex(),o=0;o<i.length;o++)e.push(this.getRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof s&&(e=s(this,e))}return e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getRefUpdatedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getUpdatedIndex(),o=0;o<i.length;o++)e.push(this.getRefRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=s&&(e=s(this,e))}return e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getUpdatedArray=function(t){try{void 0!==t&&null!=t||(t={});var e={};"object"===(0,T.Z)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getUpdatedIndex(),s=0;s<o.length;s++)i=i.concat(this.getRowData(o[s]));return e.data=i,e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getRemovedData=function(t){try{return this.removeManager.getAllData(t)}catch(t){h.w.printStackTrace(t)}},
ht.prototype.getRemovedXML=function(t){try{return void 0!==t&&null!=t||(t={}),t.id=this.id,this.removeManager.getAllXML(t)}catch(t){h.w.printStackTrace(t)}},ht.prototype.getRemovedJSON=function(t){try{return this.removeManager.getAllJSON(t)}catch(t){h.w.printStackTrace(t)}},ht.prototype.getRemovedArray=function(t){try{return this.removeManager.getAllArray(t)}catch(t){h.w.printStackTrace(t)}},ht.prototype.getModifiedData=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getModifiedIndex(),o=0;o<i.length;o++)e.push(this.getRowData(i[o],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(o=0;o<this.removeManager.getDataLength();o++)e.push(this.removeManager.getRowData(o,t));return e}catch(t){h.w.printStackTrace(t)}},ht.prototype.getModifiedXML=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});var e=this.getModifiedIndex(),i=this.getArrXML(e,t);if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))if(this.options.removedDataMatch)for(var o=WebSquare.xml.findNode(i,this.options.baseNode),s=0;s<this.removeManager.getDataLength();s++){for(var r=o,a=this.options.repeatNode.split("/"),n=0;n<a.length-1;n++){var d=a[n],u=d.indexOf(":");if(u>=0)try{var c=d.substring(0,u),p=l.v.getNamespaces(o);p[c]&&(d=d+" xmlns:"+c+'="'+p[c]+'"')}catch(t){}r=r.appendChild(WebSquare.xml.parse("<"+d+"/>").documentElement)}r.appendChild(this.removeManager.getRowXML(s,t).documentElement)}else{var g=WebSquare.xml.findNode(i,this.options.baseNode);for(s=0;s<this.removeManager.getDataLength();s++)g.appendChild(this.removeManager.getRowXML(s,t).documentElement)}return i}catch(t){h.w.printStackTrace(t)}},ht.prototype.getModifiedJSON=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});for(var e=[],i=[],o=[],s=this.getModifiedIndex(),r=0;r<s.length;r++)e.push(this.getRowJSON(s[r],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(r=0;r<this.removeManager.getDataLength();r++)i.push(this.removeManager.getRowJSON(r,t));if(o=t&&t.DB?(o=o.concat(i)).concat(e):t&&t.excludeRemovedData?o.concat(e):(o=o.concat(e)).concat(i),null!=this.options.customFormatter){var a=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof a&&(o=a(this,o))}return o}catch(t){h.w.printStackTrace(t)}},ht.prototype.getRefModifiedJSON=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});for(var e=[],i=[],o=[],s=this.getModifiedIndex(),r=0;r<s.length;r++)e.push(this.getRefRowJSON(s[r],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(r=0;r<this.removeManager.getDataLength();r++)i.push(this.removeManager.getRefRowJSON(r,t));if(o=t&&t.DB?(o=o.concat(i)).concat(e):t&&t.excludeRemovedData?o.concat(e):(o=o.concat(e)).concat(i),null!=this.options.customFormatter){var a=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=a&&(o=a(this,o))}return o}catch(t){h.w.printStackTrace(t)}},ht.prototype.getModifiedArray=function(t){try{void 0!==t&&null!=t||(t={});var e={};"object"===(0,T.Z)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getModifiedIndex(),s=0;s<o.length;s++)i=i.concat(this.getRowData(o[s],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(s=0;s<this.removeManager.getDataLength();s++)i=i.concat(this.removeManager.getRowData(s,t));return e.data=i,e}catch(t){h.w.printStackTrace(t)}},ht.prototype._setRowStatus=function(t,e){try{var i=this.rowStatusArr[t];return e!=i&&(this.rowStatusArr[t]=e),i}catch(t){h.w.printStackTrace(t)}},ht.prototype.setAllRowStatus=function(t,e){try{e=e||!1,
this.rowStatusArr=e?this.rowStatusArr.concat(t):t}catch(t){h.w.printStackTrace(t)}},ht.prototype._initRowStatus=function(t){try{null!=t&&void 0!==t||(t=0),0==t&&(this.rowStatusArr=[]);for(var e=this.getTotalRow(),i=t;i<e;i++)switch(this.initializeType){case"removeManager":this.rowStatusArr.push("E");break;default:this.rowStatusArr.push("R")}}catch(t){h.w.printStackTrace(t)}},ht.prototype.initRowStatus=function(){try{this._initRowStatus(0),this.broadcast({gridView:["notifyReformed"]})}catch(t){h.w.printStackTrace(t)}},ht.prototype._createRowStatus=function(t){try{this.rowStatusArr=this.rowStatusArr.slice(0,t).concat(["C"]).concat(this.rowStatusArr.slice(t)),this.broadcast({gridView:["notifyCreatedRowStatus",[t]],_bForceBroadcast:!0})}catch(t){h.w.printStackTrace(t)}},ht.prototype._updateRowStatus=function(t){try{var e=this.rowStatusArr[t],i=e;if("C"==e||"D"==e)return;for(var o=!1,s=this.getTotalCol(),r=0;r<s;r++){var a=this.cellInfoHash[this.cellIdList[r]],n=a.options.inputType,l=this._getOriginalCellData(t,a.id),d=this._getData(t,r);if("expression"==n||1==this.ignoreStatusColArr[r]||0!==l&&0!==d){if("expression"!=n&&1!=this.ignoreStatusColArr[r]&&l!=d&&(null!==l||""!==d)){o=!0;break}}else if(0===l&&0!==d&&"0"!==d||0===d&&0!==l&&"0"!==l){o=!0;break}}"R"==e?1==o&&(e="U"):"U"==e&&0==o&&(e="R"),this._setRowStatus(t,e);var u=this.getFilteredRowIndex(t);e!=i&&O.B.fireEvent(this,"onrowstatuschange",[{rowIndex:u,newRowStatus:e,oldRowStatus:i}]),this.broadcast({gridView:["notifyStatusChanged",[{rowIndex:[u]}]]})}catch(t){h.w.printStackTrace(t)}},ht.prototype.removeRowStatus=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=this.rowStatusArr[e];return this.rowStatusArr.splice(e,1),this.broadcast({gridView:["notifyRemovedRowStatus",[e]],_bForceBroadcast:!0}),i}catch(t){h.w.printStackTrace(t)}},ht.prototype.deleteRow=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=this.getFilteredRowIndex(e);if(this.options.depthColumn&&this.hasChild(e)){var o=this.getChildrenRowArr(e);this.deleteRows(o)}this._deleteRowStatus(e),this.broadcast({linkedDataList:["notifyDeleteRow",[e]],gridView:["notifyDeleteRow",[i]]})}catch(t){h.w.printStackTrace(t)}},ht.prototype.deleteRows=function(t){try{t.sort((function(t,e){return parseInt(t)<parseInt(e)?1:-1}));for(var e=0;e<t.length;e++)this.deleteRow(t[e]);return this.getDeletedData(!0,{noRefresh:!0})}catch(t){h.w.printStackTrace(t)}},ht.prototype.undeleteRows=function(t){try{t.sort((function(t,e){return parseInt(t)<parseInt(e)?1:-1}));for(var e=[],i=0;i<t.length;i++){var o=this.undeleteRow(t[i]);e.push(o)}return e}catch(t){h.w.printStackTrace(t)}},ht.prototype._deleteRowStatus=function(t){try{var e=this.rowStatusArr[t],i="";if(!0===this.options.keepInsertedRowDeleteStatus){if("D"==e||"V"==e)return}else if("D"==i||"V"==i)return;i="C"==e?"V":"D",this._setRowStatus(t,i);var o=this.getFilteredRowIndex(t);i!=e&&O.B.fireEvent(this,"onrowstatuschange",[{rowIndex:o,newRowStatus:i,oldRowStatus:e}]),o>-1&&this.broadcast({gridView:["notifyStatusChanged",[o]]})}catch(t){h.w.printStackTrace(t)}},ht.prototype.undeleteRow=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);if(this.options.depthColumn&&this.hasChild(e)){var i=this.getChildrenRowArr(e);this.undeleteRows(i)}this._undeleteRowStatus(e),this.broadcast({gridView:["notifyUndeleteRow",[t]]})}catch(t){h.w.printStackTrace(t)}},ht.prototype._undeleteRowStatus=function(t){try{var e=this.rowStatusArr[t],i=e;if("D"!=e&&"V"!=e)return;if("V"==e)e="C";else{for(var o=!1,s=this.getTotalCol(),r=0;r<s;r++){var a=this.getCellInfo(r);if("expression"!=a.options.inputType&&1!=this.ignoreStatusColArr[r]&&this._getOriginalCellData(t,a.id)!=this._getData(t,r)){o=!0;break}}e=o?"U":"R"}this._setRowStatus(t,e);var n=this.getFilteredRowIndex(t);e!=i&&O.B.fireEvent(this,"onrowstatuschange",[{rowIndex:n,newRowStatus:e,oldRowStatus:i}]),this.broadcast({gridView:["notifyStatusChanged",[{rowIndex:[n]}]]})}catch(t){
h.w.printStackTrace(t)}},ht.prototype.modifyAllStatus=function(t){try{for(var e=[],i=0;i<this.rowStatusArr.length;i++){var o=this._setRowStatus(i,t);t!=o&&e.push({rowIndex:i,newRowStatus:t,oldRowStatus:o})}O.B.fireEvent(this,"onrowstatuschange",e),this.broadcast({gridView:["notifyModifyAllStatus",[t]]})}catch(t){h.w.printStackTrace(t)}},ht.prototype.modifyRangeStatus=function(t,e,i){try{var o,s=[];if(o=this.options.depthColumn?this.getTotalRow():this.getDataLength(),0<=t&&e<=o)for(var r=t;r<=e;r++){var a=this.options.depthColumn?r:this.getRealRowIndex(r),n=this._setRowStatus(a,i);i!=n&&s.push({rowIndex:r,newRowStatus:i,oldRowStatus:n})}O.B.fireEvent(this,"onrowstatuschange",s),this.broadcast({gridView:["notifyModifyRangeStatus",[t,e,i]]})}catch(t){h.w.printStackTrace(t)}},ht.prototype.modifyMatchedStatus=function(t,e,i){try{var o,s=[];o=this.options.depthColumn?this.getTotalRow():this.getDataLength();for(var r=0;r<o;r++){var a=this.getColumnID(t);if(this.getCellData(r,a)+""==e+""){var n=this.options.depthColumn?r:this.getRealRowIndex(r),l=this._setRowStatus(n,i);i!=l&&s.push({rowIndex:r,newRowStatus:i,oldRowStatus:l})}}O.B.fireEvent(this,"onrowstatuschange",s),this.broadcast({gridView:["notifyModifyMatchedStatus",[t,e,i]]})}catch(t){h.w.printStackTrace(t)}},ht.prototype.modifyRowStatus=function(t,e){try{var i;if(i=this.options.depthColumn?this.getTotalRow():this.getDataLength(),t>-1&&t<i){var o=this.options.depthColumn?t:this.getRealRowIndex(t),s=this._setRowStatus(o,e);e!=s&&O.B.fireEvent(this,"onrowstatuschange",[{rowIndex:t,newRowStatus:e,oldRowStatus:s}]),this.options.depthColumn&&(t=this.getFilteredRowIndex(o)),this.broadcast({gridView:["notifyModifyRowStatus",[t,e]]})}}catch(t){h.w.printStackTrace(t)}},ht.prototype.getRowPosition=function(){try{return"number"==typeof this.rowPosition?this.rowPosition:null}catch(t){h.w.printStackTrace(t,null,this)}},ht.prototype.setRowPosition=function(t,e){try{t=parseInt(t,10),isNaN(t)&&(t=null);var i=this.rowPosition;if(i!=t){if(!e)if(!1===O.B.fireEvent(this,"onbeforerowpositionchange",{oldRowIndex:i,newRowIndex:t}))return!1;return this.rowPosition=t,e||O.B.fireEvent(this,"onrowpositionchange",{oldRowIndex:i,newRowIndex:t}),this.broadcast({linkedDataList:["notifyRowPositionChanged"],generalComp:"refresh",restartFilter:!1}),!0}}catch(t){h.w.printStackTrace(t)}},ht.prototype.getColumnPosition=function(){try{return this.getColumnID(this.columnPosition)||""}catch(t){h.w.printStackTrace(t,null,this)}},ht.prototype.setColumnPosition=function(t,e){try{var i=this.getColumnIndex(t);if(this.columnPosition!=i){var o=this.getColumnID(this.columnPosition),s=this.getColumnID(t);return!1!==O.B.fireEvent(this,"onbeforecolumnchange",{oldColumnID:o,newColumnID:s})&&(this.columnPosition=i,O.B.fireEvent(this,"oncolumnchange",{oldColumnID:o,newColumnID:s}),!0)}}catch(t){h.w.printStackTrace(t)}},ht.prototype.saveRemovedRow=function(t,e){try{this.removeManager.setRowData(this.removeManager.getDataLength(),e),this.removeManager.modifyAllStatus("E")}catch(t){h.w.printStackTrace(t,null,this)}};var dt=function(t){this.parent=t,this.filterArr=[],this.allRowIndexArr=[],this.firstFiltering=!0};dt.prototype.useFilter=function(){return 0!=this.filterArr.length},dt.prototype.onlySortFilter=function(){for(var t=0;t<this.filterArr.length;t++)if(-1==this.filterArr[t].id.indexOf("sort^@"))return!1;return!0},dt.prototype.clear=function(){this.filterArr=[],this.firstFiltering=!0},dt.prototype._setAllRowIndexArr=function(t){if(this.allRowIndexArr.length!=t){this.allRowIndexArr=[];for(var e=0;e<t;e++)this.allRowIndexArr.push(e)}},dt.prototype.executeAllFilter=function(t,e,i){this._setAllRowIndexArr(e),this.firstFiltering=!0;for(var o=0;o<this.filterArr.length;o++)this.executeFilter(this.filterArr[o],t,e,i);if(0==this.filterArr.length)for(o=0;o<this.parent.getDataLength();o++)this.parent.filteredRowIndexArr[o]=o},dt.prototype.executeFilter=function(t,e,i,o){try{
if("and"==t.options.condition)this.firstFiltering?(this.parent.filteredRowIndexArr=this.allRowIndexArr.slice(0),this.parent.filteredRowIndexArr=t.execute(e,i,o,this.allRowIndexArr)):this.parent.filteredRowIndexArr=t.execute(e,i,o,this.parent.filteredRowIndexArr);else if("or"==t.options.condition){var s=t.execute(e,i,o,this.allRowIndexArr);this.firstFiltering?this.parent.filteredRowIndexArr=this.mergeArray(this.allRowIndexArr,s):this.parent.filteredRowIndexArr=this.mergeArray(this.parent.filteredRowIndexArr,s)}else if(">"==t.options.condition||">="==t.options.condition||"<"==t.options.condition||"<="==t.options.condition){if("number"!=t.options.columnDataType)return this.parent.filteredRowIndexArr=this.allRowIndexArr,void(this.firstFiltering=!1);this.firstFiltering?this.parent.filteredRowIndexArr=t.executeCondition(e,i,o,this.allRowIndexArr):this.parent.filteredRowIndexArr=t.executeCondition(e,i,o,this.parent.filteredRowIndexArr)}this.firstFiltering=!1}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.addFilter=function(t,e,i,o){try{var s=o.fakeExpressionArr?o.fakeExpressionArr:this.parent.dataArr;if(o.sortIndexArr){for(var r=[],a=0;a<o.sortIdArr.length;a++){var n=this.parent.getColumnIndex(o.sortIdArr[a]);o.isExpression?r.push(o.sortIndexArr[a]):r.push(n)}o.sortIndexArr=r}this._setAllRowIndexArr(e);var l=null;if("row"==o.type)l=new WebSquare.DataCollection.dataList.filter.rowFilter(t,o);else if("user"==o.type)l=new WebSquare.DataCollection.dataList.filter.userFilter(t,o);else if("cell"==o.type)l=new WebSquare.DataCollection.dataList.filter.cellFilter(t,o);else if("sort"==o.type){if("string"==typeof(d=o.sortIndex))var d=o.sortIndex.split(" ");if(o.isExpression){var u=this.parent.getColCnt(),c=this.parent.getColumnIndex(o.cellInfo.options.id);o.colIndex=u,o.fakeExpressionArr&&(u++,i++,c=this.parent.getColCnt());for(a=0;a<d.length;a++)for(var p=0;p<e;p++){var g=o.cellInfo.getDisplayData(null,p,!0);s[c+u*p]=g}}l=new WebSquare.DataCollection.dataList.filter.sortFilter(t,o),this.deleteFilterById("sort^@",!1)}else"func"==o.type?l=new WebSquare.DataCollection.dataList.filter.funcFilter(t,o):"regExp"==o.type?l=new WebSquare.DataCollection.dataList.filter.regExpFilter(t,o):"direct"===o.type&&(l=new WebSquare.DataCollection.dataList.filter.directFilter(t,o));this.executeFilter(l,s,e,i),this.filterArr.push(l)}catch(t){h.w.printStackTrace(t,null,this)}},dt.prototype.deleteFilter=function(t,e,i,o,s,r){void 0===r&&(r=!0);for(var a=!1,n=[],l=0;l<this.filterArr.length;l++)-1==this.filterArr[l].id.indexOf(t)?n.push(this.filterArr[l]):a=!0;if(this.filterArr=n,1==r){this.firstFiltering=!0,this._setAllRowIndexArr(i);for(l=0;l<this.filterArr.length;l++)this.executeFilter(this.filterArr[l],e,i,o);if(0==this.filterArr.length){i=this.parent.getTotalRow();this.parent.filteredRowIndexArr=[];for(l=0;l<i;l++)this.parent.filteredRowIndexArr.push(l)}}return a},dt.prototype.mergeArray=function(t,e){for(var i=[],o=[],s=0;s<t.length;s++)i[t[s]]=1;for(s=0;s<e.length;s++)i[e[s]]=1;for(s=0;s<i.length;s++)1==i[s]&&o.push(s);return o},dt.prototype.deleteFilterById=function(t,e){void 0===e&&(e=!0);for(var i=[],o=0;o<this.filterArr.length;o++)-1==this.filterArr[o].id.indexOf(t)&&i.push(this.filterArr[o]);this.filterArr=i,1==e||0==this.filterArr.length&&(this.firstFiltering=!0)},dt.prototype.getOriginalRowIndex=function(t){return this.filteredRowIndexArr[t]},dt.prototype.getDisplayRowIndex=function(t){if(0!=this.parent._dataList.filteredRowIndexArr.length)for(var e=0;e<this.parent._dataList.filteredRowIndexArr.length;e++)if(t==this.parent._dataList.filteredRowIndexArr[e])return e;return t};var ut={rowFilter:function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and",exactMatch:!1},e||{})}};ut.rowFilter.prototype.execute=function(t,e,i,o){for(var s=[],r=0;r<o.length;r++){var a=o[r],n=b.D.getComponentById(this.options.dataList),l="@rowStatus"==this.options.colIndex?n.rowStatusArr[a]:t[a*i+this.options.colIndex];null==l&&(l=""),
this.options.exactMatch?l==this.options.key&&s.push(a):l.indexOf(this.options.key)>-1&&s.push(a)}return s},ut.rowFilter.prototype.executeCondition=function(t,e,i,o){for(var s=[],r=0;r<o.length;r++){var a,n,l=o[r];"number"==this.options.columnDataType&&(a=parseFloat(t[l*i+this.options.colIndex])||0,n=parseFloat(this.options.key)),">"==this.options.condition?a>n&&s.push(l):">="==this.options.condition?a>=n&&s.push(l):"<"==this.options.condition?a<n&&s.push(l):"<="==this.options.condition&&a<=n&&s.push(l)}return s},ut.userFilter=function(t,e){this.id=t,this.options=a.x.extend({key:"",condition:"and"},e||{})},ut.userFilter.prototype.getColumnData=function(t,e,i,o,s){return"string"==typeof s&&(s=this.options.bodyIdColIndexMap[s]),t[o*i+s]},ut.userFilter.prototype.execute=function(t,e,i,o){for(var s=this.options.key.replace(/col[\s]*\(/g,"_this.getColumnData(dataArr, totalRow, totalCol, row, "),r=[],a=0;a<o.length;a++){var n=o[a];new Function("_this","dataArr","totalRow","totalCol","row","return "+s)(this,t,e,i,n)&&r.push(n)}return r},ut.cellFilter=function(t,e){this.id=t,this.options=a.x.extend({key:""},e||{})},ut.cellFilter.prototype.execute=function(t,e,i,o){for(var s=[],r=0;r<o.length;r++)for(var a=o[r],n=0;n<i;n++){var l=t[a*i+n];null==l&&(l=""),l.indexOf(this.options.key)>-1&&s.push(a)}return s},ut.sortFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:"",sortIndex:"",sortOrder:"",dataType:"",sortIndexArr:[],sortOrderArr:[],dataTypeArr:[],sortFuncArr:[],sortIdArr:[]},e||{})},ut.sortFilter.prototype.execute=function(t,e,i,o){for(var s=o.slice(0).sort((function(t,e){return t-e})),r=this.options,a=[],n=0;n<s.length;n++)a[n]=s[n]*i;var l,h,d=[];for(n=0;n<r.sortIndexArr.length;n++)if(d[n]={},r.sortFuncArr[n])for(var u=0;u<a.length;u++)d[n][s[u]]=t[a[u]+r.sortIndexArr[n]];else if("number"==r.dataTypeArr[n])for(u=0;u<a.length;u++){var c=t[a[u]+r.sortIndexArr[n]];1==r.numberExtractionValueArr[n]&&(c=(c+="").replace(/[^\+\-\.0-9]/g,"")),d[n][s[u]]=""===c?"":Number(c)}else if("float"==r.dataTypeArr[n])for(u=0;u<a.length;u++){c=t[a[u]+r.sortIndexArr[n]];1==r.numberExtractionValueArr[n]&&(c=(c+="").replace(/[^\+\-\.0-9]/g,"")),d[n][s[u]]=""===c?"":parseFloat(c)}else if("bigDecimal"===r.dataTypeArr[n])for(u=0;u<a.length;u++){c=t[a[u]+r.sortIndexArr[n]];1==r.numberExtractionValueArr[n]&&(c=(c+="").replace(/[^\+\-\.0-9]/g,"")),isNaN(WebSquare.bigDecimal("").big)?($l("[sort filter] big.min.js를 로딩해주십시오."),d[n][s[u]]=""===c?"":Number(c)):d[n][s[u]]=""===c?"":WebSquare.bigDecimal(c)}else for(u=0;u<a.length;u++)d[n][s[u]]=t[a[u]+r.sortIndexArr[n]]||"";if(r.sortLabel)for(n=0;n<r.sortIndexArr.length;n++)if(!0===r.sortLabel[n])for(u=0;u<a.length;u++)d[n][u]=this.changeValueToLabel(d[n][u],n,r.isCustomCol[n],u);if(1==d.length)if(r.sortFuncArr[0]){var p=r.sortFuncArr[0];m=d[0];s.sort((function(t,e){return p(m[t],m[e])}))}else{var g=r.sortOrderArr[0],m=d[0];"bigDecimal"!==r.dataType||isNaN(WebSquare.bigDecimal("").big)?"true"==r.ignoreEmptyStringOnSort?s.sort((function(t,e){return m[t]===m[e]?0:""===m[t]?1:""===m[e]?-1:m[t]>m[e]?g:-g})):"true"==r.setEmptyStringFirstOnSort?s.sort((function(t,e){return m[t]==m[e]?0===m[t]&&""===m[e]?g:""===m[t]&&0===m[e]?-g:0:""===m[t]?-g:""===m[e]||m[t]>m[e]?g:-g})):"true"==r.setEmptyStringSortableOnSort?s.sort((function(t,e){return m[t]===m[e]?0:""===m[t]?-g:""===m[e]||m[t]>m[e]?g:-g})):s.sort((function(t,e){return m[t]==m[e]?0:m[t]>m[e]?g:-g})):"true"==r.ignoreEmptyStringOnSort?s.sort((function(t,e){l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?0:""===m[t]?1:""===m[e]?-1:"0"!==i.compare("0")?g:-g})):"true"==r.setEmptyStringFirstOnSort?s.sort((function(t,e){l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?"0"===l.toString()&&""===m[e]?g:""===m[t]&&"0"===h.toString()?-g:0:""===m[t]?-g:""===m[e]||"0"!==i.compare("0")?g:-g
})):"true"==r.setEmptyStringSortableOnSort?s.sort((function(t,e){l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?0:""===m[t]?-g:""===m[e]||"0"!==i.compare("0")?g:-g})):s.sort((function(t,e){if(""===m[t]&&""===m[e])return 0;l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?0:"0"!==i.compare("0")?g:-g}))}else s.sort((function(t,e){for(var i=0;i<d.length;i++){var o;if(r.sortFuncArr[i])o=r.sortFuncArr[i](d[i][t],d[i][e]);else if("bigDecimal"===r.dataTypeArr[i]){var s=d[i][t].minus(d[i][e]);o="0"===s.toString()?0:"0"!==s.compare("0")?r.sortOrderArr[i]:-r.sortOrderArr[i]}else o=d[i][t]==d[i][e]?0:d[i][t]<d[i][e]?-r.sortOrderArr[i]:r.sortOrderArr[i];if(0!=o)return o}return 0}));return s},ut.sortFilter.prototype.changeValueToLabel=function(t,e,i,o){var s,r,a=this.options.sortItemArr,n=this.options.sortItemsetIdObj;if(i){var l=this.options.customCellDataListInfo[o];if(l){a=this.options.customDataListInfoHash[l];var h=this.options.customSortItemsetIdObj;s=h[o].label||"label",r=h[o].value||"value";for(var d=0;d<a.length;d++)if(t==a[d][r])return a[d][s]}}else if(s=n.label||"label",r=n.value||"value",a[e]&&a[e].length>0)for(d=0;d<a[e].length;d++)if(t==a[e][d][r])return a[e][d][s];return t},ut.funcFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{})},ut.funcFilter.prototype.execute=function(t,e,i,o){if("function"!=typeof this.options.key)throw new Error("This key is not a Function.[key:"+this.options.key+"]");for(var s=[],r=0;r<o.length;r++){var a=o[r],n=t[a*i+this.options.colIndex];"number"===this.options.columnDataType&&""!==n&&(n=n.toString().indexOf(".")>-1?parseFloat(n):parseInt(n,10)),this.options.key(n,this.options.param,a)&&s.push(a)}return s},ut.regExpFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{}),this.regExp=this.options.key},ut.regExpFilter.prototype.execute=function(t,e,i,o){if(!b.D.isRegExp(this.regExp))throw new Error("This key is not a regular expression.[key:"+this.regExp+"]");if(b.D.isNullReg(this.regExp))return[];for(var s=[],r=0;r<o.length;r++){var a=o[r];(t[a*i+this.options.colIndex]+"").match(this.regExp)&&s.push(a)}return s},ut.directFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{})},ut.directFilter.prototype.execute=function(){return this.options.key};var ct=function(){};ct.prototype.getCellInfo=function(t){var e="";return"string"==typeof t?e=t:"number"==typeof t&&(e=this.cellIdList[t]),this.cellInfoHash[e]||{options:{}}},ct.prototype.getColumnCount=function(){return this.cellIdList.length},ct.prototype.getColumnID=function(t){if("string"==typeof t)return this.cellInfoHash[t]?t:null;var e=this.cellIdList[t];return e||null},ct.prototype.getColumnIndex=function(t){return"number"==typeof t?t:this.bodyIdColIndexMap[t]},ct.prototype.hasColumn=function(t){try{"number"==typeof t&&(t=this.getColumnID(t));var e=!1;return"number"==typeof this.bodyIdColIndexMap[t]&&(e=!0),e}catch(t){h.w.printStackTrace(t,null,this)}},ct.prototype.getColumnName=function(t){"number"==typeof t&&(t=this.getColumnID(t));var e=this.getCellInfo(t);return e?e.name:""},ct.prototype.setColumnName=function(t,e){"number"==typeof t&&(t=this.getColumnID(t));var i=this.getCellInfo(t);i&&i.name&&(i.name=e),this.broadcast({fusionChart:["refresh"]})};var pt=function(t,e,i){this.options={name:"",id:"",col_id:"",colIndex:"",defaultValue:"",value:"",useFilter:!1,dataType:"text",valueType:"binary",trueValue:null,falseValue:null,ignoreStatus:!1,keepEmptyString:!1},this.mainDataList=e,t&&this.setOptions(t),""!=this.options.value&&""==this.options.defaultValue&&(this.options.defaultValue=this.options.value),""==this.options.value&&""!=this.options.defaultValue&&(this.options.value=this.options.defaultValue),this.id=this.options.col_id,this.options.id=this.options.col_id,
this.name=this.options.name||"",this.mainDataList.ignoreStatusColArr[i]=this.options.ignoreStatus};pt.prototype.setOptions=function(t){if("grid"==this.mainDataList.initializeType){var e=t.inputType||"text";this.configOptions=l.v.getConfig("grid/column[@inputType='"+e+"']"),this.options=a.x.extendKeepingType(this.options,this.configOptions)}for(var i in t)if("class"===i)this.options.className=t[i];else{var o=t[i];switch((0,T.Z)(this.options[i])){case"string":if(""==o)continue;"$blank"==o&&(o="");break;case"number":o=o&&o.toString().indexOf(".")>-1?parseFloat(o):parseInt(o,10);break;case"boolean":o=b.D.getBoolean(o)}this.options[i]=o}this.options.col_id=t.id,this.element=t},pt.prototype.getExpressionValue=function(t){this.rowIndex=t;var e=this.options.expression;return null==this.expressionStr&&(""!=e&&null!=e&&(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[sS][uU][mM][\s]*[(]/g,"_this.colsum(")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.colavg(")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.colmax(")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.colmin(")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"_this.colcalc(")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"_this.display(")).replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"_this.getRowIndex(")).replace(/rowStatus[\s]*[(]/gi,"_this.rowStatus(")),this.expressionStr=e),new Function("_this","return "+this.expressionStr)(this)},pt.prototype.rowStatus=function(){switch(this.mainDataList.getRowStatusValue(this.rowIndex)){case 0:return"R";case 1:return"U";case 2:return"C";case 3:return"D";case 4:return"V"}},pt.prototype.colsum=function(){for(var t=0,e=0;e<arguments.length;e++){var i=this.mainDataList.getColumnIndex(arguments[e]),o=this.mainDataList.getColumnOption(this.options.col_id,"dataType");"bigDecimal"===o?t=WebSquare.bigDecimal(t).plus(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,i)))||0:t+=parseFloat(this.mainDataList._getData(this.rowIndex,i))||0}return t},pt.prototype.colavg=function(){for(var t=0,e=this.mainDataList.getColumnOption(this.options.col_id,"dataType"),i=0;i<arguments.length;i++){var o=this.mainDataList.getColumnIndex(arguments[i]);"bigDecimal"===e?t=WebSquare.bigDecimal(t).plus(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)))||0:t+=parseFloat(this.mainDataList._getData(this.rowIndex,o))||0}return"bigDecimal"===e?t=WebSquare.bigDecimal(t).divide(WebSquare.bigDecimal(arguments.length)).toString():t/=arguments.length,t},pt.prototype.colmax=function(){for(var t=0,e=this.mainDataList.getColumnOption(this.options.col_id,"dataType"),i=0;i<arguments.length;i++){var o=this.mainDataList.getColumnIndex(arguments[i]);if("bigDecimal"===e)t=WebSquare.bigDecimal(t).compare(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)))||0;else{var s=parseFloat(this.mainDataList._getData(this.rowIndex,o))||0;(0==i||s>t)&&(t=s)}}return t},pt.prototype.colmin=function(){for(var t=0,e=this.mainDataList.getColumnOption(this.options.col_id,"dataType"),i=0;i<arguments.length;i++){var o=this.mainDataList.getColumnIndex(arguments[i]);if("bigDecimal"===e)t="0"===WebSquare.bigDecimal(t).toString()?WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)):WebSquare.bigDecimal(t),t=WebSquare.bigDecimal(t).compare(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)),!0)||0;else{var s=parseFloat(this.mainDataList._getData(this.rowIndex,o))||0;(0==i||s<t)&&(t=s)}}return t},pt.prototype.colcalc=function(t){function e(t,e){t[t.length]=e}function i(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function o(t){return!s(t)&&"("!=t&&")"!=t}function s(t){return"+"==t||"-"==t||"*"==t||"/"==t||"^"==t||"%"==t}function r(t){return t[t.length-1]}function a(t){return 0==t.length}function n(t){return"^"==t?5:"*"==t||"/"==t||"%"==t?4:"+"==t||"-"==t?3:"("==t?2:")"==t?1:void 0}function l(t,e,i){var o;try{return"+"==i&&(o=t.plus(e)),"-"==i&&(o=t.minus(e)),"*"==i&&(o=t.times(e)),"/"==i&&(o=t.divide(e)),"^"==i&&(o=t.pow(e)),"%"==i&&(o=t.mod(e)),o}catch(t){
h.w.printStackTrace(t)}}var d=function(t,l,h){l=new Array;var d=new Array,u=0;t=function(t){for(var e=t.split(""),i=new String(""),r=new Array,a=0,n=0;n<e.length;n++)o(e[n])&&null==e[n].match(/\s/)&&(i+=e[n]),(s(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(r[a]=i,a++),i="",r[a]=e[n],a++),n==e.length-1&&""!=i&&(r[a]=i);return r}(t);for(var c=0;c<t.length;c++){if(o(t[c])&&(l[u]=t[c],u++),s(t[c])){if("^"!=t[c])for(;!a(d)&&n(t[c])<=n(r(d));)l[u]=r(d),i(d),u++;else for(;!a(d)&&n(t[c])<n(r(d));)l[u]=r(d),i(d),u++;e(d,t[c])}if("("==t[c]&&e(d,t[c]),")"==t[c]){for(;"("!=r(d);)l[u]=i(d),u++;i(d)}}for(;!a(d);)"("==r(d)?i(d):l[l.length]=i(d);var p="";for(c=0;c<l.length;c++)p+=l[c];return 0==h?p:l}(t);for(var u in d){var c=this.mainDataList.getColumnIndex(d[u]);d[u]=null!=c?WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,c)):d[u]}return function(t){for(var s,a,n=new Array,h=0;h<t.length;h++)if(o(t[h]))e(n,t[h]);else{(s=new Function("return "+r(n))()).constructor!=WebSquare.bigDecimalObj&&(s=WebSquare.bigDecimal(s)),i(n),(a=new Function("return "+r(n))()).constructor!=WebSquare.bigDecimalObj&&(a=WebSquare.bigDecimal(a));var d=l(a,s,t[h]);i(n),e(n,d)}return r(n)}(d)},pt.prototype.display=function(){var t=this.mainDataList.getColumnIndex(arguments[0]),e=this.mainDataList.getCellData(this.rowIndex,t);return e},pt.prototype.getRowIndex=function(){return this.mainDataList.getDisplayRowIndex(this.rowIndex)};var gt=function(t){};gt.prototype.getBroadcast=function(){return!1!==this._broadCastFlag},gt.prototype._getBroadcastAll=function(){return!0===this.getBroadcast()&&!0===WebSquare.DataCollection.api.getBroadcast()},gt.prototype.setBroadcast=function(t,e,i){if(!1===t)this._broadCastFlag=t;else if(this._broadCastFlag=!0,!0===e){var o={gridView:[{refreshInstance:!0,refreshScroll:!0}],pivot:[{type:"render",refresh:!0}]};if("object"===(0,T.Z)(i))for(var s in i)"object"===(0,T.Z)(i[s])&&i[s].constructor===Array&&(o[s]=i[s].slice(0));var r={linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset"],generalComp:"both"};for(var s in o)r[s].push(o[s]);this.broadcast(r)}},gt.prototype.broadcast=function(t){try{if(WebSquare.DataCollection.stopBroadCast&&WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid),!t)return;if(!0!==t._bForceBroadcast&&(WebSquare.DataCollection.stopBroadCast||!this.getBroadcast()))return;for(var e in this.childCompHash){if(null!=(o=this.childCompHash[e])&&WebSquare.idCache[o.uuid]&&(void 0===o.render||null!=o.render))"linkedDataList"===(o.options.pluginName||o.initializeType)&&t.linkedDataList&&t.linkedDataList&&("notifyCellChanged"===t.linkedDataList[0]?o.restartFilterByCellChanged.apply(o,t.linkedDataList[1]||[]):void 0===t.restartFilter&&o.restartFilter.apply(o,t.linkedDataList[1]||[]))}for(var e in this.childCompHash){var i=null;if(t.excludeId&&t.excludeId[e]){if(!t.gridView||"notifySettedCellData"!==t.gridView[0])continue;(i=t.gridView[1].slice(0))[3]=!0}if(null!=(o=this.childCompHash[e])&&WebSquare.idCache[o.uuid]&&(void 0===o.render||null!=o.render))switch("stop"==o.activeStatus&&"function"==typeof o.preActivate&&o.preActivate(),o.options.pluginName||o.initializeType){case"linkedDataList":t.linkedDataList&&o[t.linkedDataList[0]].apply(o,t.linkedDataList[1]||[]);break;case"grid":case"gridView":t.gridView&&o[t.gridView[0]].apply(o,i||t.gridView[1]||[]);break;case"fusionchart":t.fusionChart&&o[t.fusionChart[0]].apply(o,t.fusionChart[1]||[]);break;case"mapchart":"refreshItemset"!=t.generalComp&&"both"!=t.generalComp&&"refreshItemArr"!=t.generalComp||o.refreshDataLists(this.id);break;case"pivot":t.pivot&&o[t.pivot[0]].apply(o,t.pivot[1]||[]);break;case"treeview":if(t.treeview){o[t.treeview[0]].apply(o,t.treeview[1]||[]);break}default:
"refreshItemset"==t.generalComp||"both"==t.generalComp?o.modelControl.useItemset&&o.refreshItemset(t.refreshMode,t.type):"rollback"==t.generalComp&&o.rollback()}}for(var e in this.refCompHash){var o;if(!t.excludeId||!t.excludeId[e])if(null!=(o=this.refCompHash[e])&&WebSquare.idCache[o.uuid]){if((!o.options.pluginName||o.options.pluginName.indexOf("fw")<0&&"fusionchart"!==o.options.pluginName)&&t.colID&&o.modelControl&&o.modelControl.dataCollectionRefInfo&&o.modelControl.dataCollectionRefInfo.colID!=t.colID)continue;switch("stop"==o.activeStatus&&"function"==typeof o.preActivate&&o.preActivate(),o.options.pluginName){case"fusionchart":t.fusionChart&&o[t.fusionChart[0]].apply(o,t.fusionChart[1]||[]);break;case"fwFunnelChart":t.fwFunnelChart&&o[t.fwFunnelChart[0]].apply(o,t.fwFunnelChart[1]||[]);break;case"fwGanttChart":t.fwGanttChart&&o[t.fwGanttChart[0]].apply(o,t.fwGanttChart[1]||[]);break;case"fwPyramidChart":t.fwPyramidChart&&o[t.fwPyramidChart[0]].apply(o,t.fwPyramidChart[1]||[]);break;case"fwSparkChart":t.fwSparkChart&&o[t.fwSparkChart[0]].apply(o,t.fwSparkChart[1]||[]);break;case"fwRealtimeChart":t.fwRealtimeChart&&o[t.fwRealtimeChart[0]].apply(o,t.fwRealtimeChart[1]||[]);break;case"linkedDataList":t.linkedDataList&&o.refresh();break;default:"refresh"==t.generalComp||"both"==t.generalComp?o.modelControl.useRef&&o.refresh():"binding"==t.generalComp?o.modelControl.binding():"rollback"==t.generalComp&&o.rollback()}}}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.synchronize=function(){try{var t=WebSquare.DataCollection.parentToChildRelation[this.id];if(t)for(var e in t)t[e]&&(this.childCompHash[e]=b.D.getComponentById(e));this.broadcast({gridView:["setDataList"],linkedDataList:["setDataList"],generalComp:["refreshItemArr"],restartFilter:!1})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.synchronizeRef=function(){try{var t=WebSquare.DataCollection.parentToChildRef[this.id];if(t)for(var e in t)t[e]&&(this.refCompHash[e]=b.D.getComponentById(e));this.broadcast({gridView:["drawData",[0,0]],generalComp:["refresh"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype._addRelation=function(t){try{if(!this.childCompHash)return;var e=b.D.getComponentById(t);if(!e)return;if(this.childCompHash[t]===e)return;switch(this.childCompHash[t]=e,"stop"!=e.activeStatus||"function"!=typeof e.preActivate||e.skipPreActivate||e.preActivate(),e.options.pluginName||e.initializeType){case"linkedDataList":case"grid":case"gridView":e.setDataList()}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype._addRefRelation=function(t){try{if(!this.refCompHash)return;var e=b.D.getComponentById(t);if(!e)return;switch(this.refCompHash[t]=e,"stop"==e.activeStatus&&"function"==typeof e.preActivate&&e.preActivate(),e.options.pluginName||e.initializeType){case"grid":case"gridView":e.drawData(0,0);break;default:e.modelControl.useRef&&e.refresh()}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.addChild=function(t){try{this.childCompHash&&(this.childCompHash[t.id]=t)}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.removeChild=function(t){try{this.childCompHash&&delete this.childCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.addRefComp=function(t){try{this.refCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.removeRefComp=function(t){try{this.refCompHash&&delete this.refCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getConfiguredOptions=function(){try{var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions={},this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.x.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],xmlEvents:null,value:"",model:"",bind:"",style:"",useConfig:!1},this.defaultOptions);if(s.useConfig||b.D.getBoolean(l.v.getConfiguration("/WebSquare/"+i+"/useConfig/@value"))){var r=l.v.getConfig(i);s=a.x.extendKeepingType(s,r)}for(var n in t=[],e=[],
s)t.push(n),e.push(s[n]);this.configuredOptions[i]={keys:t,values:e}}for(var d=0;d<t.length;d++)o[t[d]]=e[d];return o}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getStructure=function(){try{switch(this.elementType){case"XML":return this.xml2JSON(this.element);case"JSON":return this.json2Structure()}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.json2Structure=function(){try{var t=this.element,e={attr:{id:this.id},rowArr:[[]]};if(e.attr=a.x.extendKeepingType(e.attr,t.options),t.columnInfo)for(var i=0;i<t.columnInfo.length;i++){var o=t.columnInfo[i];e.rowArr[0].push(o)}return e}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getInitializeType=function(){try{return this.getObjectType()}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setColumnFilter=function(t,e,i,o){try{var s=this.getColumnIndex(t);this.broadcast({gridView:["notifyBeforeSettedColumnFilter"]});var r=!1;if("object"!==(0,T.Z)(t)||b.D.isString(t))O.B.fireEvent(this,"onbeforecolumnfilterchange"),this.setFilter({type:"row",colIndex:s,key:e,condition:i,exactMatch:o});else{if("row"!==t.type&&"func"!==t.type&&"regExp"!==t.type)throw new Error("type does not support.[type:"+t.type+"]");r=t.noRefreshAfter,!1!==t.columnfilterchangeFire&&O.B.fireEvent(this,"onbeforecolumnfilterchange"),this.setFilter({type:t.type,colIndex:"string"==typeof t.colIndex&&"rowstatus()"==t.colIndex.toLowerCase()?"@rowStatus":t.colIndex,key:t.key,condition:t.condition,param:t.param,exactMatch:t.exactMatch,noRefresh:t.noRefresh,keepTop:t.keepTop,internal:t.internal})}!0!==r&&this.broadcast({gridView:["notifyAfterSettedColumnFilter"]}),("object"!==(0,T.Z)(t)||b.D.isString(t)||!1!==t.columnfilterchangeFire)&&O.B.fireEvent(this,"onaftercolumnfilterchange")}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.removeColumnFilter=function(t,e){try{var i=this.getColumnID(t);this.broadcast({gridView:["notifyBeforeRemovedColumnFilter"]}),this.removeFilter({type:"row",colIndex:"rowstatus()"==t.toLowerCase()?"@rowStatus":i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"func",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"regExp",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!0),e&&!0===e.noRefreshAfter||this.broadcast({gridView:["notifyAfterRemovedColumnFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.clearSortFilter=function(){try{this.filterManager.deleteFilterById("sort^@",!1),this.filterManager.executeAllFilter(this.dataArr,this.getTotalRow(),this.getColumnCount()),this.sortStatusInfo={},this.sortStatusArr=[],this.broadcast({gridView:["notifyClearSortFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.removeColumnFilterAll=function(){try{this.clearFilter()}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.removeFilter=function(t,e){try{t=a.x.extend({type:"",colIndex:-1,key:"",condition:"and",internal:!1,filterId:""},t||{}),e=void 0===e||e,"@rowStatus"!=t.colIndex&&"string"==typeof t.colIndex&&(t.colIndex=this.getColumnIndex(t.colIndex));var i=JSON.stringify(this.filteredRowIndexArr),o=t.filterId||t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.deleteFilter(o,this.dataArr,this.getTotalRow(),this.getTotalCol(),t,e),!0!==t.noRefresh&&(this.broadcast({gridView:["notifyRemovedFilter",["sort"===t.type]],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:i,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]}))}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.clearFilter=function(t){try{this.filterManager.clear(),this.filteredRowIndexArr=[];for(var e=this.getTotalRow(),i=0;i<e;i++)this.filteredRowIndexArr.push(i);t||this.broadcast({gridView:["notifyClearFilter"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.sort=function(t,e){try{
switch(e){case 0:this.setFilter({type:"sort",sortIndex:t,sortOrder:"1",dataType:"text",internal:!0});break;case 1:this.setFilter({type:"sort",sortIndex:t,sortOrder:"-1",dataType:"text",internal:!0});break;case 2:this.clearSortFilter()}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.clearSort=function(){try{this.broadcast({gridView:["notifyBeforeClearSort"]}),this.clearSortFilter(),this.broadcast({gridView:["notifySetFocusedCell"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.multisort=function(t){try{var e,i;void 0!==t&&null!=t||(t={}),t.type="sort",t.sortOrder=t.sortOrder||[];var o=(0,T.Z)(t.sortIndex),s=(0,T.Z)(t.sortOrder);"object"==o?e=t.sortIndex:"string"==o&&(e=t.sortIndex.split(" ")),"object"==s?i=t.sortOrder:"string"==s&&(i=t.sortOrder.split(" "));for(var r=0;r<e.length-i.length;r++)i.push(1);var a=[];for(r=0;r<e.length;r++){var n="number"==this.getCellInfo(this.getColumnID(e[r])).options.dataType?"number":"text";a.push(n)}t.dataType=a.join(" "),t.internal=!0,this.setFilter(t),!0!==t.noRefresh&&this.broadcast({gridView:["notifyMultisort"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setFilter=function(t){try{t&&t.noRefresh||this.broadcast({gridView:["notifySaveFocusedCell"]}),t=a.x.extend({type:"",colIndex:-1,key:"",condition:"and",bodyIdColIndexMap:this.bodyIdColIndexMap,dataList:this.id,internal:!1,filterId:""},t||{});var e="";if("@rowStatus"!=t.colIndex){"string"==typeof t.colIndex&&(t.colIndex=this.bodyIdColIndexMap[t.colIndex]),e=(u=this.getCellInfo(t.colIndex)).options.col_id;var i=u.options.dataType;t.columnDataType=i}var o=!1;if(t.sortIndex){this.sortStatusInfo={},this.sortStatusArr=[];var s=[],r=[],n=[];s="string"==typeof t.sortIndex?t.sortIndex.wq_trim().split(" "):t.sortIndex,t.sortOrder&&"string"==typeof t.sortOrder?r=t.sortOrder.wq_trim().split(" "):"object"==(0,T.Z)(t.sortOrder)&&(r=t.sortOrder),t.dataType&&(n=t.dataType.wq_trim().split(" ")),t.sortIndexArr=[],t.sortOrderArr=[],t.dataTypeArr=[],t.sortIdArr=[],t.numberExtractionValueArr=[];for(var l=0;l<s.length;l++){isNaN(s[l])?t.isExpression&&t.fakeExpressionArr?t.sortIndexArr.push(this.getColCnt()):t.sortIndexArr.push(this.bodyIdColIndexMap[s[l]]):t.sortIndexArr.push(parseInt(s[l],10));var d=parseInt(r[l]);isNaN(d)&&(d=1),t.sortOrderArr.push(d),t.dataTypeArr.push(n[l]||"text"),t.isExpression&&t.fakeExpressionArr?t.sortIdArr.push(s[l]):t.sortIdArr.push(this.getColumnID(t.sortIndexArr[l]));var u,c={},p="true"==(u=this.getCellInfo(t.sortIdArr[l])).options.numberExtraction;t.numberExtractionValueArr.push(p);var g="number"==u.options.dataType||"bigDecimal"===u.options.dataType||"float"==u.options.dataType?u.options.dataType:"text";"number"===this.options.sortType||"bigDecimal"===this.options.sortType||"text"===this.options.sortType||"float"===this.options.sortType?(g=this.options.sortType,t.dataType=g,t.dataTypeArr[l]=g):t.dataType!=g&&("numberFirst"===this.options.sortType?"number"===g||"bigDecimal"===g||"float"===g?(t.dataType=g,t.dataTypeArr[l]=g):"number"!==t.dataType&&"bigDecimal"!==t.dataType&&"float"!==t.dataType||(g=t.dataType):(t.dataType=g,t.dataTypeArr[l]=g)),c.colID=t.sortIdArr[l],c.sortOrder=t.sortOrderArr[l],c.dataType=g,this.sortStatusInfo[c.colID]=c,this.sortStatusArr.push(c),this.sortStatusArr[c.colID]=c}o=!0,e=""}t.numberExtraction=this.options.numberExtraction;var m=JSON.stringify(this.filteredRowIndexArr),f=t.filterId||t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.addFilter(f,this.getTotalRow(),this.getTotalCol(),t),t.noRefresh||(this.broadcast({gridView:["notifySettedFilter",[{isSort:o,keepTop:t.keepTop,fiteredColID:e}]],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:m,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]}))}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getFilterList=function(){try{
for(var t=[],e=0;e<this.filterManager.filterArr.length;e++)t.push(this.filterManager.filterArr[e].options);return t}catch(t){h.w.printStackTrace(t)}},gt.prototype.setXMLLayout=function(t,e,i){try{"undefined"!=t&&null!=t&&""!=t?t.endsWith("/")?this.options.baseNode=t.substring(0,t.length-1):this.options.baseNode=t:this.options.baseNode="","undefined"!=e&&null!=e&&(e.startsWith("/")&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),this.options.repeatNode=e),this.options.valueNode="undefined"!=i&&null!=i?i:""}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.xmlData2ArrData=function(t,e){try{if(null==t)return;if(9==t.nodeType)var i=t.selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode);else{if((o=this.options.baseNode).startsWith(t.tagName)){var o=o.replace(t.tagName,".");i=t.selectNodes(o+"/"+this.options.repeatNode)}if(0==i.length)i=(t=WebSquare.xml.parse(WebSquare.xml.serialize(t))).selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode)}for(var s=[],r=[],a={},n=this.options.valueNode,l=null==n||""==n,d=b.D.getTextNodeValue,u=i.length,c=this.cellIdList.length,p=[],g=0;g<c;g++)p[g]=this.getCellInfo(this.cellIdList[g]);var m={},f=!1;if("object"===(0,T.Z)(e)&&null!=e&&e.constructor===Array){f=!0;for(var y=0;y<e.length;y++)m[e[y]]=!0}for(g=0;g<u;g++){var v=g,w=(i[g],s.length),S={},C=[],x=i[g].selectSingleNode("rowStatus");null!=x&&r.push(d(x));for(var _=0;_<c;_++){var I=this.cellIdList[_];if(!f||m[I]){if(p[_].options.importExp)try{s[w+_]=new Function("return "+p[_].options.importExp)()}catch(t){s[w+_]=p[_].options.defaultValue,h.w.printStackTrace(t,null,this)}else{if(p[_].options.importFormatter&&!p[_].options.setFormatter){C.push(_);continue}var k=i[g].selectSingleNode(I);s[w+_]=null!=k?l?d(k):k.getAttribute(n):p[_].options.defaultValue}this.options.xmlEncode&&null!=s[w+_]&&(s[w+_]=WebSquare.xml.decode(s[w+_])),S[I]=s[w+_]}else s[w+_]=p[_].options.defaultValue,this.options.xmlEncode&&null!=s[w+_]&&(s[w+_]=WebSquare.xml.decode(s[w+_])),S[I]=s[w+_]}for(var D=0;D<C.length;D++)try{var L=b.D.getGlobalFunction(p[C[D]].options.importFormatter,this.scope_id);"function"==typeof L&&(s[w+C[D]]=L.call(this,S,v,C[D]))}catch(t){s[w+C[D]]=p[C[D]].options.defaultValue,h.w.printStackTrace(t,null,this)}}return a.dataArr=s,a.rowStatusArr=r,a}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.jsonData2ArrData=function(t,e){try{if(null==t)return;for(var i=[],o=[],s={},r=t.length,a=this.cellIdList.length,n=[],l=0;l<a;l++)n[l]=this.getCellInfo(this.cellIdList[l]);var d={},u=!1;if("object"===(0,T.Z)(e)&&null!=e&&e.constructor===Array){u=!0;for(var c=0;c<e.length;c++)d[e[c]]=!0}for(l=0;l<r;l++){var p=l,g=t[l],m=i.length;null!=t[l].rowStatus&&o.push(t[l].rowStatus);for(var f=0;f<a;f++){var y=this.cellIdList[f];if(!u||d[y])if(n[f].options.importExp)try{i[m+f]=new Function("return "+n[f].options.importExp)()}catch(t){i[m+f]=n[f].options.defaultValue,h.w.printStackTrace(t,null,this)}else if(n[f].options.importFormatter&&!n[f].options.setFormatter)try{var v=b.D.getGlobalFunction(n[f].options.importFormatter,this.scope_id);"function"==typeof v&&(i[m+f]=v.call(this,g,p,y))}catch(t){i[m+f]=n[f].options.defaultValue,h.w.printStackTrace(t,null,this)}else{var w=t[l][y];null!=w?i[m+f]=w:"number"==n[f].options.dataType&&n[f].options.defaultValue&&!isNaN(n[f].options.defaultValue)?i[m+f]=parseInt(n[f].options.defaultValue,10):i[m+f]=n[f].options.defaultValue}else i[m+f]=n[f].options.defaultValue}}return s.dataArr=i,s.rowStatusArr=o,s}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.columnValue=function(t,e){if(void 0!==t[e])return t[e];if(void 0!==t.selectSingleNode){var i=t.selectSingleNode(e);if(null!=i){var o=this.options.valueNode;return null==o||""==o?this.getTextNodeValue(i):i.getAttribute(o)}}var s=this.getCellInfo(e);return s&&s.options?s.options.defaultValue:""},gt.prototype.xpathValue=function(t,e){try{var i=WebSquare.xml.findNode(t,e);if(null==i)return"";if(1!=i.nodeType)return i.nodeValue
;for(var o=i.firstChild;null!=o;o=o.nextSibling)if(3==o.nodeType)return o.nodeValue}catch(t){$l("xpath exeption"),h.w.printStackTrace(t,null,this)}return""},gt.prototype.rowIndexValue=function(t){return t},gt.prototype.getArrXML=function(t,e){try{var i;switch(void 0!==e&&null!=e||(e={}),this.initializeType){case"grid":for(var o in this.childCompHash)return this.childCompHash[o].getArrXML(t);case"gridView":case"dataList":i=this.id;break;case"dataMap":case"removeManager":case"linkedDataList":i=this.parent.id}e.id?i=e.id:(i=this.id,this.scope_obj&&(i=this.org_id||this.id));var s=e.initializeType?e.initializeType:this.initializeType,r=e.rowStatusNodeName?e.rowStatusNodeName:this.options.rowStatusNodeName,a=e.baseNode||""==e.baseNode?e.baseNode:this.options.baseNode,n=e.repeatNode||""==e.repeatNode?e.repeatNode:this.options.repeatNode,l=e.idAttribute||""==e.idAttribute?e.idAttribute:this.options.idAttribute,d=e.valueAttribute||""==e.valueAttribute?e.valueAttribute:this.options.valueAttribute;if(t instanceof Array){var u=!1;this.tagNmArr=a.replace(/\[[^\]]+\]/g,"").split("/"),l=""==l?"id":l;for(var c=0;c<this.tagNmArr.length;c++)if(null!=this.tagNmArr[c]&&""!=this.tagNmArr[c].wq_trim())if(u){var p=m.createElement(this.tagNmArr[c]);p.setAttribute(l,i),g.push(p),g[c-1].appendChild(g[c])}else{var g=[],m=WebSquare.xml.parse("<"+this.tagNmArr[c]+"/>");m.documentElement.setAttribute(l,i),g.push(m.documentElement),u=!0}switch(this.initializeType){case"dataList":if(this.options.attributeMap)if(x=b.D.getComponentById(this.options.attributeMap))for(c=0;c<g.length;c++)for(var f=0;f<x.getCount();f++)g[c].setAttribute(x.getKey(f),x.get(f))}var y=n.replace(/\[[^\]]+\]/g,"").split("/"),v=null;for(c=0;c<t.length;c++){var w=t[c];v=[];var S=null;for(f=0;f<y.length;f++)if(""!=y[f]){var C=m.createElement(y[f]);v.push(C),0==f?g[g.length-1].appendChild(C):v[f-1].appendChild(v[f])}switch(S=v[y.length-1],this.initializeType){case"dataList":S.setAttribute("index",w);break;case"removeManager":S.setAttribute("index","removed");break;case"dataMap":if(this.parent.options.attributeMap){var x=b.D.getComponentById(this.parent.options.attributeMap);for(c=0;c<v.length;c++)if(v[c].setAttribute(l,this.parent.id),x)for(f=0;f<x.getCount();f++)v[c].setAttribute(x.getKey(f),x.get(f))}else for(c=0;c<v.length;c++)v[c].setAttribute(l,this.parent.id)}var _=this.getColumnCount()+1;_="object"===(0,T.Z)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array?e.includeColumns.length+1:this.getColumnCount()+1;for(var I=new Array(_),k=0;k<_;k++)if(k==_-1){if("dataList"!=s&&"removeManager"!=s&&"linkedDataList"!=s)continue;var D="";if(null==(D=this.getRowStatus(w))&&(D=""),this.options.xmlEncode&&(D=WebSquare.xml.encode(D)),I[k]=m.createElement(r),""==d){var L=m.createTextNode(D);I[k].appendChild(L)}else I[k].setAttribute(d,D);if(I[k].setAttribute("statusValue",this.getRowStatusValue(w)),S.appendChild(I[k]),this.options.rowNumData){var W=m.createTextNode(w+1);I[k+1]=m.createElement("rowNum"),I[k+1].appendChild(W),S.appendChild(I[k+1])}}else{var A="";A="object"===(0,T.Z)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array?e.includeColumns[k]:this.cellIdList[k];var E=this.bodyIdColIndexMap[A],M=this.cellInfoHash[A],q=(D="",this.options.depthColumn||e.realRowIndex?w:this.filteredRowIndexArr[w]);if(M&&(D="expression"==M.options.inputType?M.getExpressionValue(q):this.dataArr[q*this.cellIdList.length+E]),null==D&&(D=""),this.options.xmlEncode&&(D=WebSquare.xml.encode(D)),I[k]=m.createElement(A),""==d){L=m.createTextNode(D);I[k].appendChild(L)}else I[k].setAttribute(d,D);S.appendChild(I[k])}}return m}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getAllArrXML=function(t){try{var e;switch(void 0!==t&&null!=t||(t={}),this.initializeType){case"grid":for(var i in this.childCompHash)return this.childCompHash[i].getAllArrXML();case"dataList":case"gridView":e=this.id;break;case"dataMap":case"removeManager":case"linkedDataList":
e=this.parent.id}t.id?e=t.id:(e=this.id,this.scope_obj&&(e=this.org_id||this.id));var o=t.initializeType?t.initializeType:this.initializeType,s=t.rowStatusNodeName?t.rowStatusNodeName:this.options.rowStatusNodeName,r=t.baseNode||""==t.baseNode?t.baseNode:this.options.baseNode,a=t.repeatNode||""==t.repeatNode?t.repeatNode:this.options.repeatNode,n=t.idAttribute||""==t.idAttribute?t.idAttribute:this.options.idAttribute,l=t.valueAttribute||""==t.valueAttribute?t.valueAttribute:this.options.valueAttribute,d=!1;this.tagNmArr=r.replace(/\[[^\]]+\]/g,"").split("/");n=""==n?"id":n;for(var u=0;u<this.tagNmArr.length;u++)if(null!=this.tagNmArr[u]&&""!=this.tagNmArr[u].wq_trim())if(d){var c=g.createElement(this.tagNmArr[u]);c.setAttribute(n,e),p.push(c),p[u-1].appendChild(p[u])}else{var p=[],g=WebSquare.xml.parse("<"+this.tagNmArr[u]+"/>");g.documentElement.setAttribute(n,e),p.push(g.documentElement),d=!0}switch(this.initializeType){case"dataList":if(this.options.attributeMap)if(C=b.D.getComponentById(this.options.attributeMap))for(u=0;u<p.length;u++)for(var m=0;m<C.getCount();m++)p[u].setAttribute(C.getKey(m),C.get(m))}var f=a.replace(/\[[^\]]+\]/g,"").split("/"),y=null;for(u=0;u<this.getTotalRow();u++){var v=u;y=[];var w=null;for(m=0;m<f.length;m++)if(""!=f[m]){var S=g.createElement(f[m]);y.push(S),0==m?p[p.length-1].appendChild(S):y[m-1].appendChild(y[m])}switch(w=y[f.length-1],this.initializeType){case"dataList":w.setAttribute("index",v);break;case"removeManager":w.setAttribute("index","removed");break;case"dataMap":if(this.parent.options.attributeMap){var C=b.D.getComponentById(this.parent.options.attributeMap);for(u=0;u<y.length;u++)if(y[u].setAttribute(n,this.parent.id),C)for(m=0;m<C.getCount();m++)y[u].setAttribute(C.getKey(m),C.get(m))}else for(u=0;u<y.length;u++)y[u].setAttribute(n,this.parent.id)}var x=0;x="object"===(0,T.Z)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?t.includeColumns.length+1:this.getColumnCount()+1;for(var _=new Array(x),I=0;I<x;I++)if(I==x-1){if("dataList"!=o&&"removeManager"!=o&&"linkedDataList"!=o)continue;var k="";if(null==(k=this._getRowStatus(v))&&(k=""),this.options.xmlEncode&&(k=WebSquare.xml.encode(k)),_[I]=g.createElement(s),""==l){var D=g.createTextNode(k);_[I].appendChild(D)}else _[I].setAttribute(l,k);_[I].setAttribute("statusValue",this._getRowStatusValue(v)),w.appendChild(_[I])}else{var L="";L="object"===(0,T.Z)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?t.includeColumns[I]:this.cellIdList[I];var W=this.bodyIdColIndexMap[L];k="";if(k=this._getData(v,W),this.options.xmlEncode&&(k=WebSquare.xml.encode(k)),_[I]=g.createElement(L),""==l){D=g.createTextNode(k);_[I].appendChild(D)}else _[I].setAttribute(l,k);w.appendChild(_[I])}}return g}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.xml2JSON=function(t){for(var e,i,o={attr:{},rowArr:[]},s=0;s<t.attributes.length;s++)WebSquare.nodeValueDeprecated?o.attr[t.attributes[s].name]=t.attributes[s].value:o.attr[t.attributes[s].nodeName]=t.attributes[s].nodeValue;var r=this.initializeType;switch(this.parent&&"grid"==this.parent.initializeType&&(r="grid"),r){case"removeManager":case"dataList":e="columnInfo",i="column";break;case"dataMap":e="keyInfo",i="key";break;case"grid":e="row",i="column"}var a=WebSquare.xml.getElementsByTagName(t,e,l.v._XML_NAMESPACE.W2);for(s=0;s<a.length;s++){for(var n=WebSquare.xml.getElementsByTagName(a[s],i,l.v._XML_NAMESPACE.W2),h=[],d=0;d<n.length;d++){for(var u=n[d],c={},p=0;p<u.attributes.length;p++)WebSquare.nodeValueDeprecated?c[u.attributes[p].name]=u.attributes[p].value:c[u.attributes[p].nodeName]=u.attributes[p].nodeValue;h.push(c)}o.rowArr.push(h)}return 0===a.length&&o.rowArr.push([]),o},gt.prototype.getTextNodeValue=function(t){for(var e=null,i=t.firstChild;null!=i;i=i.nextSibling)"3"==i.nodeType&&(e=i.nodeValue);return e},gt.prototype.getID=function(){try{return this.id}catch(t){h.w.printStackTrace(t)}},gt.prototype.getOption=function(t){
try{var e=t in this.options,i=this.options.attributeMap;if(e)return this.options[t];if(i){var o=b.D.getComponentById(i);if(o&&o.hasKey(t))return o.get(t)}return}catch(t){h.w.printStackTrace(t)}},gt.prototype.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e=""),t in this.options&&(this.options[t]=e);var i=this.options.attributeMap;if(i){var o=b.D.getComponentById(i);o&&o.hasKey(t)&&o.set(t,e)}}catch(t){h.w.printStackTrace(t)}},gt.prototype.syncWithAttributeMap=function(t,e){try{if(this.options.attributeMap){var i=b.D.getComponentById(this.options.attributeMap);if(i)for(var o=i.getCount(),s=0;s<o;s++){t=i.getKey(s),e=i.get(s);this.options[t]=e}}}catch(t){h.w.printStackTrace(t)}},gt.prototype.getObjectType=function(){try{var t=this.initializeType;if("dataList"==t)return t}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.reset=function(){try{if("dataList"==this.initializeType){if(this.removeAll(),"XML"==this.elementType){var t=WebSquare.xml.getElementsByTagName(this.element,"data",l.v._XML_NAMESPACE.W2)[0];if(t&&this.useData){this.allowTextNode=!0;for(var e=WebSquare.xml.getElementsByTagName(t,"row",l.v._XML_NAMESPACE.W2),i=0;i<e.length;i++)this.setRowXML(i,e[i]);this.modifyAllStatus("R"),this.allowTextNode=!1}}else"JSON"==this.elementType&&this.useData&&this.element.data&&(this.setJSON(this.element.data),this.modifyAllStatus("R"));this.reform()}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.initDataList=function(){try{this.broadcast({gridView:["notifyBeforeInitDataList"]});var t=this.dataList.removeAll();return this.clearFilter(),this.broadcast({gridView:["notifyAfterInitDataList"]}),t}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getColumnOption=function(t,e){try{return this.getCellInfo(t).options[e]}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setColumnOption=function(t,e,i){try{this.getCellInfo(t).options[e]=i}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setRowNumData=function(t){try{b.D.getBoolean(t)?this.options.rowNumData=!0:this.options.rowNumData=!1}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getColumnInfo=function(t,e){try{var i=-1;if("number"==typeof t?(this.cellIdList[t],i=t):(t,i=this.bodyIdColIndexMap[t]),"number"!=typeof e&&(e=0),i>-1&&i<this.structure.rowArr[e].length){var o={};for(var s in this.structure.rowArr[e][i])"@xml"!==s&&(o[s]=this.structure.rowArr[e][i][s]);return o}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getInfo=function(t,e){try{var i={};if("string"!=typeof t&&(t="dataList"===this.initializeType?"dataListInfo":"dataMap"===this.initializeType?"dataMapInfo":"attr"),"string"!=typeof e&&(e="dataList"===this.initializeType?"columnInfo":"dataMap"===this.initializeType?"keyInfo":"col"),i[t]=a.x.extend({},this.structure.attr),i[e]={},this.structure.rowArr.length>1)for(var o=0;o<this.structure.rowArr.length;o++){var s=e+o;i[e][s]={};for(var r=0;r<this.structure.rowArr[o].length;r++)i[e][s][this.cellIdList[r]]=this.getColumnInfo(r,o)}else if(1===this.structure.rowArr.length)for(o=0;o<this.structure.rowArr[0].length;o++)i[e][this.cellIdList[o]]=this.getColumnInfo(o);return i}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.fireOnModelChangeEvent=function(t){try{if(t){var e={type:t.type,rowIndex:t.rowIndex,colID:t.colID,oldValue:t.oldValue,newValue:t.newValue};O.B.fireEvent(this,"onmodelchange",e)}}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.fireOnBeforeColumnChangeEvent=function(t){try{if(t)return O.B.fireEvent(this,"onbeforecolumnchange",{oldColID:t.oldColumnID,newColID:t.newColumnID})
}catch(t){h.w.printStackTrace(t,null,this)}},gt.prototype.fireOnColumnChangeEvent=function(t){try{if(t)return O.B.fireEvent(this,"oncolumnchange",{oldColID:t.oldColumnID,newColID:t.newColumnID})}catch(t){h.w.printStackTrace(t,null,this)}};var mt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};a.x.extend(mt.prototype,lt.prototype),a.x.extend(mt.prototype,ht.prototype),a.x.extend(mt.prototype,ct.prototype),a.x.extend(mt.prototype,gt.prototype),mt.filter=ut,mt.prototype.defaultOptions={useConfig:!0,pluginType:"DataCollection.dataList",pluginName:"dataList",userEvents:["onbeforerowpositionchange","onrowpositionchange","oncelldatachange","onbeforecelldatachange","oninsertrow","onremoverow","ondataload","onmodelchange","onbeforecolumnchange","oncolumnchange","onbeforecolumnfilterchange","onaftercolumnfilterchange"],baseNode:"list",repeatNode:"map",valueNode:"",valueAttribute:"",idAttribute:"",rowStatusNodeName:"rowStatus",initRowPosition:null,importFormatter:"",setFormatter:"",JSONPath:"",rowNumData:!1,saveRemovedData:!0,keepInsertedRowDeleteStatus:!1,saveRemovedDataDeletedInsertedRow:!0,removeDummyRowStatus:!1,removedDataMatch:!1,validateAllItemsetData:!1,getMatchedFromAllData:!1,keepRowPosition:!0,syncFilterWithLinkedDataList:!0,keepFilter:!1,undoRecursiveRow:!1,maxHistoryCount:10,sortType:"numberFirst"},mt.prototype.initialize=function(t,e,i,o,s){try{if(this.elementType=i.elementType?i.elementType:"XML",this.initializeType=o||"dataList",this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.options=this.getConfiguredOptions(),this._broadCastFlag=!0,this.scope_id=null,i)switch(this.elementType){case"XML":this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),"dataList"==this.initializeType&&(this.options.xmlEvents=WebSquare.Parser.parseEvent(i));break;case"JSON":this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id}var r;if(e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,u=r.id;t=(u?u+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var c=WebSquare.componentsCache,p=c.dataList;p||(p=c.dataList=[]),p.push(this.uuid)}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var g=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"dataList")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 dataList를 삭제하고 새로 생성합니다.";d.k.printLog(g);var m=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=m}catch(t){m=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,"dataList"==this.initializeType&&(window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this)),this.event=new it.U,this.initializeDataList(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},"dataList"==this.initializeType&&this.options.xmlEvents&&(this.options.xmlEvents=this.event.addUserEvents(this,this.options.xmlEvents,this.options.userEvents),this.options.xmlEvents.length>0&&this.event.addEvents(this,this.options.xmlEvents)),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid)),O.B.fireEvent(this,"onload",null)}catch(t){
h.w.printStackTrace(t,null,this)}},mt.prototype.initializeDataList=function(t){try{switch(this.childCompHash={},this.refCompHash={},this.activated=!1,this.initializeType){case"dataList":this.options.attributeMap&&(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]||(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]=[]),WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap].push(this.id),this.syncWithAttributeMap())}if(this.filterManager=new WebSquare.DataCollection.filterController(this),"dataList"==this.initializeType||"grid"==this.initializeType)"JSON"==this.elementType?this.removeManager=new WebSquare.DataCollection.dataList(this.id+"??removeManager",this.options,this.element,"removeManager"):this.removeManager=new WebSquare.DataCollection.dataList(this.id+"??removeManager",this.options,this.element.cloneNode(!0),"removeManager"),this.removeManager.parent=this;else{var e=this.id.split("??");this.parent=b.D.getComponentById(e[0])}this.columnPosition=null,this.rowPosition=null,this.dataArr=[],this.originalDataArr=[],this.filteredRowIndexArr=[],this.filteredRowIndexMap={},this.oneRowDataLength=0,this.bodyIdColIndexMap={},this.cellInfoHash={},this.cellIdList=[],this.rowStatusArr=[],this.ignoreStatusColArr=[],this.commandList=[],this.commandPosition=-1,this.commandListMulti=[],this.commandPositionMulti=-1,this.undoRedo="",this.undoRedo="",this.structure=this.getStructure(),"$none"==this.options.valueAttribute.wq_trim()&&(this.options.valueAttribute="");var i=""==this.options.valueNode?this.options.valueAttribute:this.options.valueNode;i=""==this.options.valueAttribute?this.options.valueNode:this.options.valueAttribute,this.options.valueNode=i,this.options.valueAttribute=i;for(var o=0,s=this.structure.rowArr,r=0;r<s.length;r++){this.oneRowDataLength+=s[r].length;for(var a=0;a<s[r].length;a++){var n=s[r][a],d=new WebSquare.DataCollection.dataListCellInfo(n,this,o);this.cellIdList.push(n.id),this.bodyIdColIndexMap[d.id]=o,this.cellInfoHash[d.id]=d,o++}}if("dataList"==this.initializeType)if(WebSquare.DataCollection.api.addChild(this),this.synchronize(),this.synchronizeRef(),"XML"==this.elementType){var u=WebSquare.xml.getElementsByTagName(t,"data",l.v._XML_NAMESPACE.W2)[0];if(u&&(this.useData=b.D.getBoolean(u.getAttribute("use")),this.useData)){this.allowTextNode=!0;var c=WebSquare.xml.getElementsByTagName(u,"row",l.v._XML_NAMESPACE.W2),p=WebSquare.DataCollection.stopBroadCast;WebSquare.DataCollection.stopBroadCast=!0;for(r=0;r<c.length;r++)this.setRowXML(r,c[r]);WebSquare.DataCollection.stopBroadCast=p,this.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifySettedGridData",[void 0,void 0,void 0,void 0,void 0,!0]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"}),this.originalDataArr=this.dataArr.slice(0),this.modifyAllStatus("R"),this.allowTextNode=!1}}else"JSON"==this.elementType&&(this.useData=b.D.getBoolean(this.element.option.useData),this.useData&&this.element.data&&(this.setJSON(this.element.data),this.modifyAllStatus("R")))}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.finalize=function(){try{for(var t in this.removeAll({skipSavingRemovedData:"true"}),this.childCompHash){var e=this.childCompHash[t];e?e.constructor==WebSquare.DataCollection.linkedDataList||e.constructor==WebSquare.DataCollection.dataMap||e.constructor==WebSquare.DataCollection.dataList?(WebSquare.DataCollection.stopBroadCast||e.refresh(),WebSquare.DataCollection.api.remove(t)):e.successBinding=!1:delete this.childCompHash[t]}this.activated=!1,this.removeManager&&this.removeManager.id&&WebSquare.DataCollection.api.remove(this.removeManager.id)}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.activate=function(){try{if(!this.activated){for(var t in this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i])
;this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}if(null!=this.options.initRowPosition){var o=parseInt(this.options.initRowPosition,10);this.setRowPosition(o)}this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),this.event.addUserEvents(this,[o],this.options.userEvents)}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.bind=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),this.addEvent(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.trigger=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t);var i=!1;if(null!=this.options.userEvents)for(var o=0;o<this.options.userEvents.length;o++)if(this.options.userEvents[o]===t){i=!0;break}if(!i&&O.B.isEventSupported(this.render,t))e&&e.constructor==Array?O.B.fireSystemEvent(this,t,e[0]):O.B.fireSystemEvent(this,t);else{var s=[this,t];s=s.concat(e),O.B.fireEvent.apply(O.B.fireEvent,s),s[0]=null}}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t&&"function"==typeof e)for(var i=0;i<this.userEventList.length;i++)t===this.userEventList[i].name&&e===this.userEventList[i].param.handler&&(this.userEventList.splice(i,1),"object"===(0,T.Z)(this.systemEventList[t])&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(i=this.userEventList.length-1;i>=0;i--)t===this.userEventList[i].name&&this.userEventList.splice(i,1);"object"===(0,T.Z)(this.systemEventList[t])&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var o in this.systemEventList)this.event.removeListener(this.render,o,this.systemEventList[o].handler);this.userEventList=[],this.systemEventList={}}this.options.xmlEvents=this.userEventList.slice()}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},mt.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},mt.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){h.w.printStackTrace(t,null,this)}},mt.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){h.w.printStackTrace(t,null,this)}};var ft=function(){};ft.prototype.getBroadcast=function(){return!1!==this._broadCastFlag},ft.prototype.setBroadcast=function(t){this._broadCastFlag=!1!==t||t},ft.prototype.broadcast=function(t){try{if(WebSquare.DataCollection.stopBroadCast&&WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid),WebSquare.DataCollection.stopBroadCast||!this.getBroadcast())return;for(var e in this.childCompHash){if(null!=(i=this.childCompHash[e])&&WebSquare.idCache[i.uuid]&&(void 0===i.render||null!=i.render))switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.initializeType){case"linkedDataList":if(t.linkedDataList){i[t.linkedDataList[0]](t.linkedDataList[1]);break}default:"refreshItemset"==t.generalComp||"both"==t.generalComp?i.modelControl.useItemset&&i.refreshItemset():"rollback"==t.generalComp&&i.rollback()}}for(var e in this.refCompHash){var i;if(null!=(i=this.refCompHash[e])&&WebSquare.idCache[i.uuid]){var o=i.modelControl?i.modelControl.dataCollectionRefInfo:null
;if("searchbox"==i.options.pluginName&&(o=i.input&&i.input.modelControl?i.input.modelControl.dataCollectionRefInfo:null),t.key&&i.modelControl&&o&&o.key!=t.key)continue;switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.initializeType){case"linkedDataList":if(t.linkedDataList){i.refresh();break}default:"refresh"==t.generalComp||"both"==t.generalComp?(i.modelControl.useRef||"searchbox"==i.options.pluginName&&i.input.modelControl.useRef)&&i.refresh():"binding"==t.generalComp?i.modelControl.binding():"rollback"==t.generalComp&&i.rollback()}}}if(WebSquare.DataCollection.attributeMapInfo[this.id])for(var s=0;s<WebSquare.DataCollection.attributeMapInfo[this.id].length;s++){var r=WebSquare.DataCollection.attributeMapInfo[this.id][s];b.D.getComponentById(r).syncWithAttributeMap()}}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.synchronize=function(){try{var t=WebSquare.DataCollection.parentToChildRelation[this.id];if(t)for(var e in t)t[e]&&(this.childCompHash[e]=b.D.getComponentById(e))}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.synchronizeRef=function(){try{var t=WebSquare.DataCollection.parentToChildRef[this.id];if(t)for(var e in t)t[e]&&(this.refCompHash[e]=b.D.getComponentById(e));this.broadcast({generalComp:["binding"]})}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype._addRelation=function(t){try{if(!this.childCompHash)return;var e=b.D.getComponentById(t);if(!e)return;this.childCompHash[t]=e}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype._addRefRelation=function(t){try{if(!this.refCompHash)return;var e=b.D.getComponentById(t);if(!e)return;this.refCompHash[t]=e,"stop"==e.activeStatus&&"function"==typeof e.preActivate&&e.preActivate(),e.modelControl.binding()}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.addChild=function(t){try{this.childCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.removeChild=function(t){try{this.childCompHash&&delete this.childCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.addRefComp=function(t){try{this.refCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.removeRefComp=function(t){try{this.refCompHash&&delete this.refCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.syncWithAttributeMap=function(t,e){try{if(this.options.attributeMap&&this.options.attributeMap!=this.id){var i=b.D.getComponentById(this.options.attributeMap);if(i)for(var o=i.getCount(),s=0;s<o;s++){t=i.getKey(s),e=i.get(s);this.options[t]=e}}}catch(t){h.w.printStackTrace(t)}},ft.prototype.hasKey=function(t){try{return t=this.getKey(t),this._dataList.hasColumn(t)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getID=function(){try{return this.id}catch(t){h.w.printStackTrace(t)}},ft.prototype.getOption=function(t){try{var e=t in this.options,i=this.options.attributeMap;if(e)return this.options[t];if(i){var o=b.D.getComponentById(i);if(o.hasKey(t))return o.get(t)}return}catch(t){h.w.printStackTrace(t)}},ft.prototype.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e="");t in this.options&&(this.options[t]=e,this._dataList&&this._dataList.options&&!{bind:!0,id:!0,pluginName:!0,pluginType:!0}[t]&&(this._dataList.options[t]=e));var i=this.options.attributeMap;if(i){var o=b.D.getComponentById(i);o.hasKey(t)&&o.set(t,e)}}catch(t){h.w.printStackTrace(t)}},ft.prototype.getKey=function(t){try{return this._dataList.getColumnID(t)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getIndex=function(t){try{return this._dataList.getColumnIndex(t)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getCount=function(){try{return this._dataList.getTotalCol()}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.get=function(t){try{return t=this.getKey(t),this._dataList.getCellData(0,t)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getOriginal=function(t){try{var e
;return(t=this.getKey(t))&&(e=this._dataList.getOriginalCellData(0,t)),e}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getArray=function(t){try{return this._dataList.getRowData(0,t)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getXML=function(t){try{t=t||{};var e=this._dataList.getRowXML(0,t);return t.id&&(null!=e.documentElement?e.documentElement.setAttribute("id",t.id):e.setAttribute("id",t.id)),e}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getJSON=function(t){try{var e=this._dataList.getRowJSON(0,t);if(!0===this.options.jsonArray&&(e=[e]),null!=this.options.customFormatter){var i=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof i&&(e=i(this,e))}return e}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getRefJSON=function(t){try{var e=this._dataList.getRefRowJSON(0,t);if(!0===this.options.jsonArray&&(e=[e]),null!=this.options.customFormatter){var i=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=i&&(e=i(this,e))}return e}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getType=function(t){try{t=this.getKey(t);var e=this._dataList.getCellInfo(t);if(e)return e.options?e.options.dataType:""}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getDefaultValue=function(t){try{t=this.getKey(t);var e=this._dataList.getCellInfo(t);if(e)return e.options?e.options.defaultValue:""}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getName=function(t){try{t=this.getKey(t);var e=this._dataList.getCellInfo(t);if(e)return e.name?e.name:""}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getInitializeType=function(){try{return this.getObjectType()}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.set=function(t,e,i){try{var o;if(null!=(t=this.getKey(t))&&null!=t){var s=this._dataList.getCellData(0,t);if(s!==e){if(!1===O.B.fireEvent(this,"onbeforemodelchange",{key:t,oldValue:s,newValue:e}))return void this.broadcast({key:t,linkedDataList:["refresh"],generalComp:"rollback"});this._dataList.setCellData(0,t,e),!this.firstSetting[t]&&this.options.firstSet?this.setOriginal(t,s):this.setOriginal(t,e);var r=!0;"undo"!=(o=null!=i&&null!=i?i:"")&&"redo"!=o||(r=!1),r&&this.options.maxHistoryCount>0&&("undo"!=this.undoRedo&&"redo"!=this.undoRedo||this.commandList.splice(this.commandPosition,this.commandList.length-this.commandPosition+1),this.commandList.length>=this.options.maxHistoryCount&&this.commandList.shift(),this.commandList.push({key:t,oldValue:s,value:e}),this.commandPosition=this.commandList.length-1,this.undoRedo=""),O.B.fireEvent(this,"onmodelchange",{key:t,oldValue:s,newValue:e})}O.B.fireEvent(this,"onkeyset",{key:t,oldValue:s,newValue:e}),this.broadcast({key:t,linkedDataList:["refresh"],generalComp:"both"})}}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.setArray=function(t,e){try{this._dataList.setRowData(0,t,!0,e,this.options.keepValue);for(var i=0;i<this.getCount();i++)this.setOriginal(i,this.get(i));this.commandList=[],this.commandPosition=-1,this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.setXML=function(t,e,i){try{e=!1!==e,this._dataList.setRowXML(0,t,e,i,this.options.keepValue),this.options.firstSetSubmission&&(this.firstSetting={});for(var o=0;o<this.getCount();o++)this.setOriginal(o,this.get(o));this.commandList=[],this.commandPosition=-1,O.B.fireEvent(this,"onsetdata"),this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.setJSON=function(t,e,i){try{if(null!=this.options.customUnformatter){var o=b.D.getGlobalFunction(this.options.customUnformatter,this.scope_id);"function"==typeof o&&(t=o(this,t))}!0===this.options.jsonArray&&t&&t.constructor==Array&&1===t.length&&(t=t[0]);var s=this._dataList.getRowCount()>0;this._dataList.setRowJSON(0,t,s,i,this.options.keepValue);var r=this.getCount();this.options.firstSetSubmission&&(this.firstSetting={})
;for(var a=0;a<r;a++)this.setOriginal(a,this.get(a));this.commandList=[],this.commandPosition=-1,O.B.fireEvent(this,"onsetdata"),this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.setOriginal=function(t,e){try{t=this.getKey(t),this.firstSetting[t]||(this._dataList.setOriginalCellData(0,t,e),this.firstSetting[t]=!0),this.firstSetting[t]&&t&&(this.statusHash[t]=this.getOriginal(t)==this.get(t))}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.addColumn=function(t){try{var e=this.getCount(),i=this._dataList.elementType;this._dataList.elementType="JSON";var o=new WebSquare.DataCollection.dataListCellInfo(t,this._dataList,e);this._dataList.elementType=i,this._dataList.cellIdList.push(t.id),this._dataList.bodyIdColIndexMap[o.id]=e,this._dataList.cellInfoHash[o.id]=o,this._dataList.oneRowDataLength=++e;var s=o.options.defaultValue||"";""!=s&&(this.firstSetting[o.options.id]=!0,this.statusHash[o.options.id]=!0),this._dataList.dataArr.push(s)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.reform=function(){try{for(var t in this._dataList.reform(),this.statusHash)this.statusHash[t]=!0;this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.undo=function(){try{for(var t=this.getCount(),e=0;e<t;e++){var i=this.getKey(e),o=this.getOriginal(i);this.set(i,o)}this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.restore=function(){try{if("undo"==this.undoRedo&&this.commandPosition--,this.commandPosition<0)return void(this.commandPosition=0);var t=this.commandList[this.commandPosition];this.set(t.key,t.oldValue,"undo"),this.undoRedo="undo"}catch(t){h.w.printStackTrace(t)}},ft.prototype.redo=function(){try{if("redo"==this.undoRedo&&this.commandPosition++,this.commandList.length-1<this.commandPosition)return void(this.commandPosition=this.commandList.length-1);var t=this.commandList[this.commandPosition];this.set(t.key,t.value,"redo"),this.undoRedo="redo"}catch(t){h.w.printStackTrace(t)}},ft.prototype.getConfiguredOptions=function(){try{var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions={},this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.x.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],xmlEvents:null,value:"",model:"",bind:"",style:"",useConfig:!1},this.defaultOptions);if(s.useConfig||b.D.getBoolean(l.v.getConfiguration("/WebSquare/DataCollection/"+i+"/useConfig/@value"))){var r=l.v.getConfig(i);s=a.x.extendKeepingType(s,r)}for(var n in t=[],e=[],s)t.push(n),e.push(s[n]);this.configuredOptions[i]={keys:t,values:e}}for(var d=0;d<t.length;d++)o[t[d]]=e[d];return o}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getModifiedKey=function(){try{var t=[];for(var e in this.statusHash)this.statusHash[e]||t.push(e);return t}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getModifiedIndex=function(){try{var t,e=[];t=this.getModifiedKey();for(var i=0;i<t.length;i++)e.push(this.getIndex(t[i]));return e}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getModifiedData=function(){try{for(var t=[],e=this.getModifiedIndex(),i=0;i<e.length;i++)t.push(this.get(e[i]));return t}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getModifiedXML=function(){try{for(var t=this.getModifiedKey(),e=-1,i=function t(i){var o=i[++e],s="<"+o+">";return e<i.length-1&&(s+=t(i)),s+="</"+o+">"}(this.getOption("baseNode").split()),o=WebSquare.xml.parse(i).documentElement,s=0;s<t.length;s++){var r=WebSquare.xml.parse("<"+t[s]+"></"+t[s]+">").documentElement;this.getOption("valueAttribute")?r.setAttribute(this.getOption("valueAttribute"),this.get(t[s])):r=WebSquare.xml.parse("<"+t[s]+">"+this.get(t[s])+"</"+t[s]+">").documentElement,WebSquare.xml.appendChild(o,r)}return o}catch(t){h.w.printStackTrace(t)}},
ft.prototype.getModifiedJSON=function(){try{for(var t={},e=this.getModifiedIndex(),i=0;i<e.length;i++){t[this.getKey(e[i])]=this.get(e[i])}if(null!=this.options.customFormatter){var o=b.D.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof o&&(t=o(this,t))}return t}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getModifiedArray=function(){try{var t={};return t.key=this.getModifiedKey(),t.value=this.getModifiedData(),t}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.initRowStatus=function(){try{for(var t in this.statusHash)this.statusHash[t]||(this.statusHash[t]=!0)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.modifyKeyStatus=function(t,e){try{if(null==e||!this.hasKey(t))return;this.statusHash[t]=!b.D.getBoolean(e)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getObjectType=function(){try{var t=this.initializeType;if("dataMap"==t)return t}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.reset=function(){try{if("dataMap"==this.initializeType){if(this.statusHash={},this.firstSetting={},this._dataList.removeAll(),"XML"==this.elementType){var t=WebSquare.xml.getElementsByTagName(this.element,"data",l.v._XML_NAMESPACE.W2)[0];t&&this.useData?(this._dataList.allowTextNode=!0,this.setXML(t,!1),this._dataList.allowTextNode=!1):(this._dataList.allowTextNode=!0,this.setEmpty(),this._dataList.allowTextNode=!1)}else"JSON"==this.elementType&&this.useData&&this.element.data&&this.setJSON(this.element.data);if(0==this._dataList.getRowCount()){this._dataList.insertRow(0);for(var e=this.getCount(),i=0;i<e;i++){var o=this._dataList.getCellInfo(i);""!=o.options.defaultValue&&(this.firstSetting[o.options.id]=!0,this.statusHash[o.options.id]=!0)}}}}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.setEmpty=function(){try{0==this._dataList.getRowCount()&&this._dataList.insertRow(0);for(var t=this.getCount(),e=0;e<t;e++){var i=this.getKey(e),o=this._dataList.getCellInfo(e).options.defaultValue;this.set(i,o),this.setOriginal(i,o)}this._clearHistory()}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype._clearHistory=function(){try{this._dataList._undoRedoMultiHistoryClear(),this.commandList=[],this.commandPosition=-1,this.undoRedo=""}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.setEmptyValue=function(){try{this.setEmpty()}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getKeyInfo=function(t,e){try{return this._dataList.getColumnInfo(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getInfo=function(t,e){try{return this._dataList.getInfo(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},ft.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}};var bt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};a.x.extend(bt.prototype,ft.prototype),bt.prototype.defaultOptions={useConfig:!0,pluginType:"DataCollection.dataMap",pluginName:"dataMap",userEvents:["onmodelchange","onvalidatekey","onsetdata","onkeyset","onbeforemodelchange"],baseNode:"map",repeatNode:"",valueNode:"",valueAttribute:"",idAttribute:"",JSONPath:"",firstSet:!1,firstSetSubmission:!1,keepValue:!1,jsonArray:!1,maxHistoryCount:10},bt.prototype.initialize=function(t,e,i,o,s){try{if(this.elementType=i.elementType?i.elementType:"XML",this.initializeType="dataMap",this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.options=this.getConfiguredOptions(),this._broadCastFlag=!0,i)switch(this.elementType){case"XML":this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),this.options.xmlEvents=WebSquare.Parser.parseEvent(i);break
;case"JSON":this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id}var r;if(e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,u=r.id;t=(u?u+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var c=WebSquare.componentsCache,p=c.dataMap;p||(p=c.dataMap=[]),p.push(this.uuid)}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var g=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"dataMap")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 dataMap을 삭제하고 새로 생성합니다.";d.k.printLog(g);var m=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=m}catch(t){m=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.event=new it.U,this.initializeDataMap(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},this.options.xmlEvents&&(this.options.xmlEvents=this.event.addUserEvents(this,this.options.xmlEvents,this.options.userEvents),this.options.xmlEvents.length>0&&this.event.addEvents(this,this.options.xmlEvents)),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.initializeDataMap=function(t){try{this.childCompHash={},this.refCompHash={},this.statusHash={},this.firstSetting={},this.activated=!1,this.commandList=[],this.commandPosition=-1,this.options.attributeMap&&this.id!=this.options.attributeMap&&(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]||(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]=[]),WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap].push(this.id),this.syncWithAttributeMap()),"$none"==this.options.valueAttribute.wq_trim()&&(this.options.valueAttribute="");var e=""==this.options.valueNode?this.options.valueAttribute:this.options.valueNode;if(e=""==this.options.valueAttribute?this.options.valueNode:this.options.valueAttribute,this.options.valueNode=e,this.options.valueAttribute=e,this.options.repeatNode=this.options.baseNode,this.element=t,"JSON"==this.elementType&&(t.columnInfo=t.keyInfo),this._dataList=new WebSquare.DataCollection.dataList(this.id+"??dataList",this.options,t,"dataMap"),this._dataList.parent=this,"dataMap"==this.initializeType){if(WebSquare.DataCollection.api.addChild(this),this.synchronize(),this.synchronizeRef(),"XML"==this.elementType){var i=WebSquare.xml.getElementsByTagName(t,"data",l.v._XML_NAMESPACE.W2)[0];i&&(this.useData=b.D.getBoolean(i.getAttribute("use")),this.useData&&(this._dataList.allowTextNode=!0,this.setXML(i,!1),this._dataList.allowTextNode=!1))}else"JSON"==this.elementType&&(this.useData=this.element.option.useData,this.useData&&this.element.data&&this.setJSON(this.element.data));if(0==this._dataList.getRowCount()){this._dataList.insertRow(0);for(var o=this.getCount(),s=0;s<o;s++){var r=this._dataList.getCellInfo(s);""!=r.options.defaultValue&&(this.firstSetting[r.options.id]=!0,this.statusHash[r.options.id]=!0)}}}if(WebSquare.DataCollection.attributeMapInfo[this.id])for(s=0;s<WebSquare.DataCollection.attributeMapInfo[this.id].length;s++){
var a=WebSquare.DataCollection.attributeMapInfo[this.id][s];b.D.getComponentById(a).syncWithAttributeMap()}}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.finalize=function(){try{this.activated=!1,this._dataList.id&&WebSquare.DataCollection.api.remove(this._dataList.id)}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.activate=function(){try{if(!this.activated){for(var t in this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),this.event.addUserEvents(this,[o],this.options.userEvents)}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.bind=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),this.addEvent(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.trigger=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t);var i=!1;if(null!=this.options.userEvents)for(var o=0;o<this.options.userEvents.length;o++)if(this.options.userEvents[o]===t){i=!0;break}if(!i&&O.B.isEventSupported(this.render,t))e&&e.constructor==Array?O.B.fireSystemEvent(this,t,e[0]):O.B.fireSystemEvent(this,t);else{var s=[this,t];s=s.concat(e),O.B.fireEvent.apply(O.B.fireEvent,s),s[0]=null}}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t&&"function"==typeof e)for(var i=0;i<this.userEventList.length;i++)t===this.userEventList[i].name&&e===this.userEventList[i].param.handler&&(this.userEventList.splice(i,1),"object"===(0,T.Z)(this.systemEventList[t])&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(i=this.userEventList.length-1;i>=0;i--)t===this.userEventList[i].name&&this.userEventList.splice(i,1);"object"===(0,T.Z)(this.systemEventList[t])&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var o in this.systemEventList)this.event.removeListener(this.render,o,this.systemEventList[o].handler);this.userEventList=[],this.systemEventList={}}this.options.xmlEvents=this.userEventList.slice()}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},bt.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},bt.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){h.w.printStackTrace(t,null,this)}},bt.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){h.w.printStackTrace(t,null,this)}};var yt=function(){};yt.prototype.getBroadcast=function(){return!1!==this._broadCastFlag},yt.prototype.setBroadcast=function(t,e,i){if(!1===t)this._broadCastFlag=t;else if(this._broadCastFlag=!0,!0===e){var o={gridView:[{refreshInstance:!0}],pivot:[{type:"render",refresh:!0}]};if("object"===(0,T.Z)(i))for(var s in i)"object"===(0,T.Z)(i[s])&&i[s].constructor===Array&&(o[s]=i[s].slice(0));var r={linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],
pivot:["refreshItemset"],generalComp:"both"};for(var s in o)r[s].push(o[s]);this.broadcast(r)}},yt.prototype.broadcast=function(t){try{if(WebSquare.DataCollection.stopBroadCast&&WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid),WebSquare.DataCollection.stopBroadCast||!this.getBroadcast())return;for(var e in this.childCompHash){if(null!=(i=this.childCompHash[e])&&WebSquare.idCache[i.uuid]&&null!=i.render)switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.options.pluginName){case"gridView":t.gridView&&i[t.gridView[0]].apply(i,t.gridView[1]||[]);break;case"fusionchart":t.fusionChart&&i[t.fusionChart[0]].apply(i,t.fusionChart[1]||[]);break;case"checkcombobox":if(t.checkcombobox){i[t.checkcombobox[0]].apply(i,t.checkcombobox[1]||[]);break}default:"refreshItemset"==t.generalComp||"both"==t.generalComp?i.modelControl.useItemset&&i.refreshItemset(t.mode||"keepIndex"):t.generalComp&&i[t.generalComp[0]].apply(i,t.generalComp[1]||[])}}for(var e in this.refCompHash){var i;if(null!=(i=this.refCompHash[e])&&WebSquare.idCache[i.uuid])switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.options.pluginName){case"linkedDataList":if(t.linkedDataList){i.refresh();break}case"fusionchart":t.fusionChart&&i[t.fusionChart[0]].apply(i,t.fusionChart[1]||[]);break;default:"refresh"!=t.generalComp&&"both"!=t.generalComp||i.modelControl.useRef&&i.refresh()}}}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.synchronize=function(){try{var t=WebSquare.DataCollection.parentToChildRelation[this.id];if(t)for(var e in t)t[e]&&(this.childCompHash[e]=b.D.getComponentById(e));this.broadcast({gridView:["setDataList"],generalComp:["refreshItemArr"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype._addRelation=function(t){try{if(!this.childCompHash)return;var e=b.D.getComponentById(t);if(!e)return;switch(this.childCompHash[t]=e,"stop"!=e.activeStatus||"function"!=typeof e.preActivate||e.skipPreActivate||e.preActivate(),e.options.pluginName||e.initializeType){case"linkedDataList":case"grid":case"gridView":e.setDataList()}}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype._addRefRelation=function(t){try{if(!this.refCompHash)return;var e=b.D.getComponentById(t);if(!e)return;switch(this.refCompHash[t]=e,"stop"==e.activeStatus&&"function"==typeof e.preActivate&&e.preActivate(),e.options.pluginName||e.initializeType){case"grid":case"gridView":e.drawData(0,0);break;default:e.modelControl.useRef&&e.refresh()}}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.syncWithParent=function(){try{if(this._dataList){if(this.conditionInfo.targetInfo={},this.conditionInfo.keyArray=[],this.conditionInfo.columnArray=[],this.initialRowIndexArr=[],this.initialFilterList=[],this.filteredRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this.initialRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this.filterManager.clear(),this.filterManager.runFilter(this.conditionInfo.filterInfo.condition),this.filterManager.runSort(this.conditionInfo.sortInfo.condition),this.initialRowIndexArr=this.filteredRowIndexArr.slice(0),this.initialFilterList=this.filterManager.filterArr.slice(0),""==this.conditionInfo.sortInfo.condition&&this.sortStatusInfo)for(var t in this.sortStatusInfo)if(this.sortStatusInfo[t]){var e=this.sortStatusInfo[t].colID,i=this.sortStatusInfo[t].sortOrder;1==i?this.sort(e,0):-1==i&&this.sort(e,1)}this.broadcast({generalComp:["refreshItemArr"]})}}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.addChild=function(t){try{this.childCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.removeChild=function(t){try{this.childCompHash&&delete this.childCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.addRefComp=function(t){try{this.refCompHash[t.id]=t}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.removeRefComp=function(t){try{this.refCompHash&&delete this.refCompHash[t]}catch(t){h.w.printStackTrace(t,null,this)}},
yt.prototype.refresh=function(t){try{this.successBinding&&(this.syncWithParent(),this.broadcast({gridView:["refresh"],generalComp:"both",mode:t}))}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.refreshRef=function(t){try{this.successBinding&&this.conditionInfo.filterInfo.useRef&&(this.syncWithParent(),this.broadcast({gridView:["refresh"],generalComp:"both",mode:t}))}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getConfiguredOptions=function(){try{var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions={},this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.x.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],xmlEvents:null,value:"",model:"",bind:"",style:"",useConfig:!1},this.defaultOptions);if(s.useConfig||b.D.getBoolean(l.v.getConfiguration("/WebSquare/"+i+"/useConfig/@value"))){var r=l.v.getConfig(i);s=a.x.extendKeepingType(s,r)}for(var n in t=[],e=[],s)t.push(n),e.push(s[n]);this.configuredOptions[i]={keys:t,values:e}}for(var d=0;d<t.length;d++)o[t[d]]=e[d];return o}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getOption=function(t){try{var e=t in this.options,i=this.options.attributeMap;if(e)return this.options[t];if(i){var o=b.D.getComponentById(i);if(o&&o.hasKey(t))return o.get(t)}return}catch(t){h.w.printStackTrace(t)}},yt.prototype.getID=function(){try{return this.id}catch(t){h.w.printStackTrace(t)}},yt.prototype.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e=""),t in this.options&&(this.options[t]=e);var i=this.options.attributeMap;if(i){var o=b.D.getComponentById(i);o&&o.hasKey(t)&&o.set(t,e)}}catch(t){h.w.printStackTrace(t)}},yt.prototype.getRealRowIndex=function(t){return this.filteredRowIndexArr[t]},yt.prototype.getLinkedRowIndex=function(t){return this.getRealRowIndex(t)},yt.prototype.getParentRealRowIndex=function(t){return this.initialRowIndexArr[t]},yt.prototype.getLinkedRealRowIndex=function(t){var e=this.filteredRowIndexArr[t];if("number"==typeof e)for(var i=0;i<this.initialRowIndexArr.length;i++)if(this.initialRowIndexArr[i]===e)return i;return null},yt.prototype.getFilteredRowIndex=function(t){if(this.filteredRowIndexArr[this.filteredRowIndexMap[t]]!==t){this.filteredRowIndexMap={};for(var e=0;e<this.filteredRowIndexArr.length;e++)this.filteredRowIndexMap[this.filteredRowIndexArr[e]]=e}return this.filteredRowIndexMap[t]},yt.prototype.getTotalRow=function(){try{return this.initialRowIndexArr.length}catch(t){h.w.printStackTrace(t)}},yt.prototype.getTotalCol=function(){try{return this._dataList.getTotalCol()}catch(t){h.w.printStackTrace(t)}},yt.prototype.getRowCount=function(){try{return this.getDataLength()}catch(t){h.w.printStackTrace(t)}},yt.prototype.getCellData=function(t,e){try{var i=this.getRealRowIndex(t);return this._dataList.getCellData(i,e)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getOriginalCellData=function(t,e){try{var i=this.getRealRowIndex(t);return this._dataList.getOriginalCellData(i,e)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getDataLength=function(){return this.filteredRowIndexArr.length},yt.prototype.getColCnt=function(){try{return this._dataList.getColCnt()}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getRowPosition=function(){try{return this.getFilteredRowIndex(this._dataList.getRowPosition())}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.setRowPosition=function(t){try{return this._dataList.setRowPosition(this.getRealRowIndex(t))}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getColSum=function(t){try{var e=this.getColData(t);return b.D.sum(e)}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getColAvg=function(t){try{var e="",i=this.getColData(t);if(i.length>0){for(var o=0;o<i.length;o++)""==i[o].replace(/^\s+|\s+$/g,"")&&(i[o]="0");e=b.D.sum(i)}return""==e?"":e/i.length}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getColMax=function(t){try{
for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e<s)&&(e=s)}return e=null==e?"":e,e=b.D.setPrecision(e)}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getColMin=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e>s)&&(e=s)}return e=null==e?"":e,e=b.D.setPrecision(e)}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getRealRowIndexArr=function(){return this.filteredRowIndexArr.slice(0)},yt.prototype.getColData=function(t){try{for(var e=[],i=0;i<this.filteredRowIndexArr.length;i++)e.push(this.getCellData(i,t));return e}catch(t){h.w.printStackTrace(t)}},yt.prototype.getRowData=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowData(e)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getDataRow=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getDataRow(e)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getMatchedData=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getMatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowData(l))}return r}catch(t){h.w.printStackTrace(t)}},yt.prototype.getUnmatchedData=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getUnmatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowData(l))}return r}catch(t){h.w.printStackTrace(t)}},yt.prototype.getMatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getMatchedIndex(t,e,o,s,r),l=0;l<n.length;l++){var d=this.getFilteredRowIndex(n[l]);a.push(this.getCellData(d,i))}return a}catch(t){h.w.printStackTrace(t)}},yt.prototype.getUnmatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,o,s,r),l=0;l<n.length;l++){var d=this.getFilteredRowIndex(n[l]);a.push(this.getCellData(d,i))}return a}catch(t){h.w.printStackTrace(t)}},yt.prototype.getFilteredColData=function(t){for(var e=[],i=0;i<this.getDataLength();i++)e.push(this.getCellData(i,t));return e},yt.prototype.getMatchedIndex=function(t,e,i,o,s){try{i=void 0===i||null==i||i,0!=(i=b.D.getBoolean(i))&&(i=!0);var r=this._dataList.getColumnIndex(t),a=this.getFilteredColData(r),n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l],u=this.getRealRowIndex(l);1==i?(d===e||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase()===e.toLowerCase())&&n.push(u):(d.indexOf(e)>-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(u)}return n}catch(t){h.w.printStackTrace(t)}},yt.prototype.getUnmatchedIndex=function(t,e,i,o,s){try{0!=i&&(i=!0);var r=this._dataList.getColumnIndex(t),a=this.getFilteredColData(r),n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l],u=this.getRealRowIndex(l);1==i?d!==e&&(this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d?d.toLowerCase()!==e.toLowerCase()&&n.push(l):n.push(u)):(d.indexOf(e)<=-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())<=-1)&&n.push(u)}return n}catch(t){h.w.printStackTrace(t)}},yt.prototype.getRangeData=function(t,e){try{var i=[];if(t>e){var o=e;e=t,t=o}t<0&&(t=0),e>this.getDataLength()-1&&(e=this.getDataLength()-1);for(var s=t;s<=e;s++){var r=this.getRealRowIndex(s);i=i.concat(this.getRowData(r))}return i}catch(t){h.w.printStackTrace(t)}},yt.prototype.getAllData=function(t){try{this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.initialRowIndexArr.length;i++)e=e.concat(this._dataList.getRowData(this.initialRowIndexArr[i],t));return e}catch(t){
h.w.printStackTrace(t)}},yt.prototype.getAllFilteredData=function(t){this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.filteredRowIndexArr.length;i++)e=e.concat(this._dataList.getRowData(this.filteredRowIndexArr[i],t));return e},yt.prototype.getColumnDistinctDataArray=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=[],i=[];"string"==typeof t&&(t=this._dataList.bodyIdColIndexMap[t]);for(var o=this._dataList.getCellInfo(t),s=this.getColData(t),r=0;r<s.length;r++){i[s[r]]=1}for(var a in i)e.push(a);return"text"==o.options.dataType?e.sort():e.sort(this.comparator),e}catch(t){h.w.printStackTrace(t)}},yt.prototype.getRangeXML=function(t,e){try{if(t>e){var i=e;e=t,t=i}t<0&&(t=0),e>this.getDataLength()-1&&(e=this.getDataLength()-1);for(var o=[],s=t;s<=e;s++){var r=this.getRealRowIndex(s);o.push(r)}return this._dataList.getArrXML(o)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getMatchedXML=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});var r=this.getMatchedIndex(t,e,i,o,s);return this._dataList.getArrXML(r)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getUnmatchedXML=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});var r=this.getUnmatchedIndex(t,e,i,o,s);return this._dataList.getArrXML(r)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getRowXML=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowXML(e,{rowStatusNodeName:this.options.rowStatusNodeName})}catch(t){h.w.printStackTrace(t)}},yt.prototype.getAllXML=function(t){try{this.broadcast({gridView:["_endEdit"]});var e={id:this.id,initializeType:this.initializeType,baseNode:this.options.baseNode,repeatNode:this.options.repeatNode,idAttribute:this.options.idAttribute,valueAttribute:this.options.valueAttribute,rowStatusNodeName:this.options.rowStatusNodeName};return t&&(e={id:t.id||this.id,initializeType:this.initializeType,baseNode:t.baseNode||this.options.baseNode,repeatNode:""==t.repeatNode||t.repeatNode?t.repeatNode:this.options.repeatNode,idAttribute:""==t.idAttribute||t.idAttribute?t.idAttribute:this.options.idAttribute,valueAttribute:""==t.valueAttribute||t.valueAttribute?t.valueAttribute:this.options.valueAttribute,rowStatusNodeName:""==t.rowStatusNodeName||t.rowStatusNodeName?t.rowStatusNodeName:this.options.rowStatusNodeName}),this._dataList.getArrXML(this.initialRowIndexArr,e)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getAllFilteredXML=function(t){this.broadcast({gridView:["_endEdit"]});var e={id:(t=t||{}).id||this.id,initializeType:this.initializeType,baseNode:t.baseNode||this.options.baseNode,repeatNode:""==t.repeatNode||t.repeatNode?t.repeatNode:this.options.repeatNode,idAttribute:""==t.idAttribute||t.idAttribute?t.idAttribute:this.options.idAttribute,valueAttribute:""==t.valueAttribute||t.valueAttribute?t.valueAttribute:this.options.valueAttribute,rowStatusNodeName:""==t.rowStatusNodeName||t.rowStatusNodeName?t.rowStatusNodeName:this.options.rowStatusNodeName};return this._dataList.getArrXML(this.filteredRowIndexArr,e)},yt.prototype.getRowJSON=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowJSON(e,{rowStatusNodeName:this.options.rowStatusNodeName})}catch(t){h.w.printStackTrace(t)}},yt.prototype.getAllJSON=function(t){try{this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.initialRowIndexArr.length;i++)e.push(this._dataList.getRowJSON(this.initialRowIndexArr[i],t));return e}catch(t){h.w.printStackTrace(t)}},yt.prototype.getAllFilteredJSON=function(t){try{this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.filteredRowIndexArr.length;i++)e=e.concat(this._dataList.getRowJSON(this.filteredRowIndexArr[i],t));return e}catch(t){h.w.printStackTrace(t)}},yt.prototype.getRangeJSON=function(t,e){try{var i=[];if(t>e){var o=e;e=t,t=o}t<0&&(t=0),
e>this.getDataLength()-1&&(e=this.getDataLength()-1);for(var s=t;s<=e;s++)i.push(this.getRowJSON(s));return i}catch(t){h.w.printStackTrace(t)}},yt.prototype.getMatchedJSON=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getMatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowJSON(l))}return r}catch(t){h.w.printStackTrace(t)}},yt.prototype.getUnmatchedJSON=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getUnmatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowJSON(l))}return r}catch(t){h.w.printStackTrace(t)}},yt.prototype.getFusionChartData=function(t,e,i){try{var o={},s=(e=e,i.wq_replaceAll("'",'"'));i=(s=JSON.parse(s))[0];switch(this._singleSerises=function(){for(var t=[],s=this.getAllJSON(),r=0;r<s.length;r++){var a={label:s[r][e],value:s[r][i]};t.push(a)}return o.data=t,o},this._multiSerises=function(){(o=this._getFusionChartCategory()).dataset=[];for(var t=0;t<i.length;t++){var e=this._getFusionChartSeriesDate(t);o.dataset.push(e)}return o},this._msStacked=function(){(o=this._getFusionChartCategory()).dataset=[];for(var t=0;t<s.length;t++){i=s[t];for(var e={dataset:[]},r=0;r<i.length;r++){var a=this._getFusionChartSeriesDate(r);e.dataset.push(a)}o.dataset.push(e)}return o},this._msStackedColumn2DLineDY=function(){(o=this._getFusionChartCategory()).dataset=[];for(var t=0;t<s.length-1;t++){i=s[t];for(var e={dataset:[]},r=0;r<i.length;r++){var a=this._getFusionChartSeriesDate(r);e.dataset.push(a)}o.dataset.push(e)}o.lineset=[];var n=s.length-1;i=s[n];for(t=0;t<i.length;t++){a=this._getFusionChartSeriesDate(t);o.lineset.push(a)}return o},this._scatter=function(){o.dataset=[];for(var s=this._getUniqueArr(this.getColData(e)),r=0;r<s.length;r++){for(var a={data:[]},n=0;n<this.getRowCount();n++)if(s[r]==this.getCellData(n,e)){var l={};"scatter"==t.toLowerCase()?l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1])}:"bubble"==t.toLowerCase()&&(l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1]),z:this.getCellData(n,i[2])}),a.data.push(l)}a.seriesname=this.getColumnName(s[r]),o.dataset.push(a)}return o},this._zoomLine=function(){if(1==this.getRowCount()){(o={categories:[{category:this.getCellData(0,e)}]}).dataset=[];for(var t=0;t<i.length;t++){var s={};s.seriesname=this.getColumnName(i[t]),s.data=this.getCellData(0,i[t]),o.dataset.push(s)}return o}return this._multiSerises()},this._getFusionChartCategory=function(){for(var t=[],i=this.getColData(e),o=0;o<i.length;o++){var s={label:i[o]};t.push(s)}return{categories:[{category:t}]}},this._getFusionChartSeriesDate=function(t){var e,o={};o.data=[];var s=[];if("string"!=typeof i[t]){for(var r in e=i[t].id,o.seriesname=this.getColumnName(e),i[t])if(i[t].hasOwnProperty(r))if(this.hasColumn(i[t][r])&&"id"!=r.toLowerCase()){var a={};a[r]=i[t][r],s.push(a)}else o[r]=i[t][r]}else e=i[t],o.seriesname=this.getColumnName(e);for(var n=0;n<this.getRowCount();n++){for(var l={value:this.getCellData(n,e)},h=0;h<s.length;h++)for(var d in s[h])l[d]=this.getCellData(n,s[h][d]);o.data.push(l)}return o},this._getUniqueArr=function(t){for(var e={},i=[],o=0;o<t.length;o++)void 0===e[t[o]]&&(e[t[o]]=1);for(var o in e)i.push(o);return i},t.toLowerCase()){case"column2d":case"column3d":case"bar2d":case"bar3d":case"pie2d":case"pie3d":case"doughnut2d":case"doughnut3d":case"pareto2d":case"pareto3d":case"line2d":case"area":case"ssgrid":return this._singleSerises();case"mscolumn2d":case"mscolumn3d":case"msline":case"msarea":case"msbar2d":case"msbar3d":case"marimekko":return this._multiSerises();case"stackedcolumn2d":case"stackedcolumn3d":case"stackedarea2d":case"stackedbar2d":case"stackedbar3d":case"mscombi3d":case"mscombi2d":case"mscolumnline3d":case"stackedcolumn2dline":case"stackedcolumn3dline":case"mscombidy2d":case"mscolumn3dlinedy":case"stackedcolumn3dlinedy":return this._multiSerises();case"scrollcolumn2d":case"scrollline2d":
case"scrollArea2d":case"scrollstackedcolumn2d":case"scrollcombi2d":case"scrollcombidy2d":case"stackedcolumn3dlinedy":return this._multiSerises();case"scatter":case"bubble":return this._scatter();case"zoomline":return this._zoomLine();case"msstackedcolumn2d":return this._msStacked();case"msstackedcolumn2dlinedy":return this._msStackedColumn2DLineDY()}}catch(t){h.w.printStackTrace(t)}},yt.prototype.getRowArray=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowArray(e)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getRowStatusValue=function(t){try{var e=this.getRealRowIndex(t);return this._dataList._getRowStatusValue(e)}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getRowStatus=function(t){try{var e=this.getRealRowIndex(t);return this._dataList._getRowStatus(e)}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getRowIndexByStatus=function(t){try{for(var e=[],i=0;i<this.getDataLength();i++){var o=this.getRealRowIndex(i);t.indexOf(this._dataList.getRowStatus(o))>-1&&e.push(o)}return e}catch(t){h.w.printStackTrace(t)}},yt.prototype.getInsertedIndex=function(){try{return this.getRowIndexByStatus("C")}catch(t){h.w.printStackTrace(t)}},yt.prototype.getUpdatedIndex=function(){try{return this.getRowIndexByStatus("U")}catch(t){h.w.printStackTrace(t)}},yt.prototype.getDeletedIndex=function(){try{return this.getRowIndexByStatus("DV")}catch(t){h.w.printStackTrace(t)}},yt.prototype.getOnlyDeletedIndex=function(){try{return this.getRowIndexByStatus("D")}catch(t){h.w.printStackTrace(t)}},yt.prototype.getModifiedIndex=function(){try{return this.getRowIndexByStatus("CUD")}catch(t){h.w.printStackTrace(t)}},yt.prototype.getInsertedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getInsertedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.w.printStackTrace(t)}},yt.prototype.getInsertedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getInsertedIndex();return this._dataList.getArrXML(t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getInsertedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getInsertedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.w.printStackTrace(t)}},yt.prototype.getDeletedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getDeletedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.w.printStackTrace(t)}},yt.prototype.getDeletedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getDeletedIndex();return this._dataList.getArrXML(t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getDeletedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getDeletedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.w.printStackTrace(t)}},yt.prototype.getUpdatedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.w.printStackTrace(t)}},yt.prototype.getUpdatedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getUpdatedIndex();return this._dataList.getArrXML(t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getUpdatedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.w.printStackTrace(t)}},yt.prototype.getModifiedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getModifiedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.w.printStackTrace(t)}},yt.prototype.getModifiedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getModifiedIndex();return this._dataList.getArrXML(t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.getModifiedJSON=function(){try{this.broadcast({gridView:["_endEdit"]})
;for(var t=[],e=this.getModifiedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.w.printStackTrace(t)}},yt.prototype.setCondition=function(t,e){try{switch(t.toLowerCase()){case"filter":this.setFilterCondition(e);break;case"sort":this.setSortCondition(e)}}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getFilterCondition=function(){try{return this.conditionInfo.filterInfo.orgCondition}catch(t){h.w.printStackTrace(t,null,this)}return""},yt.prototype.setFilterCondition=function(t){try{"string"==typeof t&&(this.conditionInfo.filterInfo.parse=!1,this.conditionInfo.filterInfo.useRef=!1,this.conditionInfo.filterInfo.condition=t,this.conditionInfo.filterInfo.orgCondition=t,this.conditionInfo.filterInfo.checkVal=!0,this.syncWithParent()),this.broadcast({generalComp:"both",mode:"replace"})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.setSortCondition=function(t){try{"string"==typeof t&&(this.conditionInfo.sortInfo.parse=!1,this.conditionInfo.sortInfo.condition=t,this.conditionInfo.sortInfo.orgCondition=t,this.syncWithParent()),this.broadcast({generalComp:"both",mode:"replace"})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getSortCondition=function(){try{return this.conditionInfo.sortInfo.orgCondition}catch(t){h.w.printStackTrace(t,null,this)}return""},yt.prototype.getObjectType=function(){try{var t=this.initializeType;if("linkedDataList"==t)return t}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.setColumnFilter=function(t,e,i,o){try{var s=this._dataList.getColumnIndex(t);if(this.broadcast({gridView:["notifyBeforeSettedColumnFilter"]}),"object"!==(0,T.Z)(arguments[0])||b.D.isString(arguments[0]))this.setFilter({type:"row",colIndex:s,key:e,condition:i,exactMatch:o});else{if("row"!==arguments[0].type&&"func"!==arguments[0].type&&"regExp"!==arguments[0].type)throw new Error("type does not support.[type:"+arguments[0].type+"]");this.setFilter({type:arguments[0].type,colIndex:"string"==typeof arguments[0].colIndex&&"rowstatus()"==arguments[0].colIndex.toLowerCase()?"@rowStatus":arguments[0].colIndex,key:arguments[0].key,condition:arguments[0].condition,exactMatch:arguments[0].exactMatch,param:arguments[0].param,noRefresh:arguments[0].noRefresh,keepTop:arguments[0].keepTop,internal:arguments[0].internal})}this.broadcast({gridView:["notifyAfterSettedColumnFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.removeColumnFilter=function(t,e){try{var i=this.getColumnID(t);this.broadcast({gridView:["notifyBeforeRemovedColumnFilter"]}),this.removeFilter({type:"row",colIndex:"rowstatus()"==t.toLowerCase()?"@rowStatus":i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"func",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"regExp",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!0),this.broadcast({gridView:["notifyAfterRemovedColumnFilter"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.clearSortFilter=function(){try{this.sortStatusInfo={},this.sortStatusArr=[],this.setSortCondition("")}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.removeColumnFilterAll=function(){try{this.clearFilter()}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getAllNoFilteredData=function(){try{return this._dataList.getAllData()}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.setFilter=function(t){try{if(t&&t.noRefresh||this.broadcast({gridView:["notifySaveFocusedCell"]}),"@rowStatus"!=(t=a.x.extend({type:"",colIndex:-1,key:"",condition:"and",bodyIdColIndexMap:this.bodyIdColIndexMap,internal:!1},t||{})).colIndex){"string"==typeof t.colIndex&&(t.colIndex=this._dataList.bodyIdColIndexMap[t.colIndex]);var e=(d=this._dataList.getCellInfo(t.colIndex)).options.dataType;t.columnDataType=e}var i=!1;if(t.sortIndex){this.sortStatusInfo={},this.sortStatusArr=[];var o=[],s=[],r=[]
;o="string"==typeof t.sortIndex?t.sortIndex.wq_trim().split(" "):t.sortIndex,t.sortOrder&&"string"==typeof t.sortOrder?s=t.sortOrder.wq_trim().split(" "):"object"==(0,T.Z)(t.sortOrder)&&(s=t.sortOrder),t.dataType&&(r=t.dataType.wq_trim().split(" ")),t.sortIndexArr=[],t.sortOrderArr=[],t.dataTypeArr=[],t.sortIdArr=[],t.numberExtractionValueArr=[];for(var n=0;n<o.length;n++){isNaN(o[n])?t.sortIndexArr.push(this._dataList.bodyIdColIndexMap[o[n]]):t.sortIndexArr.push(parseInt(o[n],10));var l=parseInt(s[n]);isNaN(l)&&(l=1),t.sortOrderArr.push(l),t.dataTypeArr.push(r[n]||"text"),t.sortIdArr.push(this._dataList.getColumnID(t.sortIndexArr[n]));var d,u={},c="true"==(d=this._dataList.getCellInfo(t.sortIdArr[n])).options.numberExtraction;t.numberExtractionValueArr.push(c);var p="number"==d.options.dataType?"number":"text";u.colID=t.sortIdArr[n],u.sortOrder=t.sortOrderArr[n],u.dataType=p,t.dataType!=p&&(t.dataType=p,t.dataTypeArr[n]=p),this.sortStatusInfo[u.colID]=u,this.sortStatusArr.push(u),this.sortStatusArr[u.colID]=u}i=!0}t.numberExtraction=this._dataList.options.numberExtraction;var g=JSON.stringify(this.filteredRowIndexArr),m=t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.addFilter(m,t),t.noRefresh||(this.broadcast({gridView:["notifySettedFilter",[{isSort:i}]],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:g,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]}))}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.removeFilter=function(t,e){try{t=a.x.extend({type:"",colIndex:-1,key:"",condition:"and",internal:!1},t||{}),e=void 0===e||e,"@rowStatus"!=t.colIndex&&"string"==typeof t.colIndex&&(t.colIndex=this.getColumnIndex(t.colIndex));var i=JSON.stringify(this.filteredRowIndexArr),o=t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.deleteFilter(o,t,e),this.broadcast({gridView:["notifyRemovedFilter"],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:i,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.clearFilter=function(t){try{this.filterManager.filterArr=this.initialFilterList.slice(0),this.filteredRowIndexArr=this.initialRowIndexArr.slice(0),t||this.broadcast({gridView:["notifyClearFilter"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.sort=function(t,e){try{switch(e){case 0:this.setFilter({type:"sort",sortIndex:t,sortOrder:"1",dataType:"text",internal:!0});break;case 1:this.setFilter({type:"sort",sortIndex:t,sortOrder:"-1",dataType:"text",internal:!0});break;case 2:this.clearSortFilter()}}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.clearSort=function(){try{this.broadcast({gridView:["clearHeaderSort"]}),this.clearSortFilter(),this.broadcast({gridView:["notifySetFocusedCell"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.multisort=function(t){try{var e,i;t.type="sort",t.sortOrder=t.sortOrder||[];var o=(0,T.Z)(t.sortIndex),s=(0,T.Z)(t.sortOrder);"object"==o?e=t.sortIndex:"string"==o&&(e=t.sortIndex.split(" ")),"object"==s?i=t.sortOrder:"string"==s&&(i=t.sortOrder.split(" "));for(var r=0;r<e.length-i.length;r++)i.push(1);var a=[];this.sortStatusInfo={},this.sortStatusArr=[];for(r=0;r<e.length;r++){var n,l={};"string"==(o=(0,T.Z)(e[r]))?n=this._dataList.getCellInfo(e[r]):"number"==o&&(n=this._dataList.getCellInfo(this.getColumnID(e[r]))),l.colID=e[r],l.sortOrder=parseInt(i[r]),l.dataType="number"!=n.options.dataType?"text":"number",a.push(l.dataType),this.sortStatusInfo[l.colID]=l,this.sortStatusArr.push(l),this.sortStatusArr[l.colID]=l}t.dataType=a.join(" "),t.internal=!0,this.setFilter(t),this.broadcast({gridView:["drawHeaderSortImages"],generalComp:"both"})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getCellInfo=function(t){var e=""
;return"string"==typeof t?e=t:"number"==typeof t&&(e=this.cellIdList[t]),this.cellInfoHash[e]||{options:{}}},yt.prototype.getColumnCount=function(){return this.cellIdList.length},yt.prototype.getColumnID=function(t){if("string"==typeof t)return t;var e=this.cellIdList[t];return e||null},yt.prototype.getColumnIndex=function(t){return"number"==typeof t?t:this.bodyIdColIndexMap[t]},yt.prototype.hasColumn=function(t){try{"number"==typeof t&&(t=this.getColumnID(t));var e=!1;return"number"==typeof this.bodyIdColIndexMap[t]&&(e=!0),e}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getColumnName=function(t){"number"==typeof t&&(t=this.getColumnID(t));var e=this.getCellInfo(t);return e?e.name:""},yt.prototype.getParentRowIndex=function(t){try{if(this.options.depthColumn)for(var e=this.options.depthColumn,i=this.getColumnID(e),o=parseInt(this._getData(this.initialRowIndexArr[t],i)),s=this.getLinkedRealRowIndex(t)-1;s>=0;s--){var r=this.initialRowIndexArr[s];if(this._getData(r,i)<o)return r}return-1}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyDataChanged=function(){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyCellChanged=function(t,e,i){try{for(var o=!1,s=0;s<this.conditionInfo.columnArray.length;s++)if(this.conditionInfo.columnArray[s]===e){o=!0;break}if(o)this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]});else{var r=this.getFilteredRowIndex(t);"number"==typeof r&&this.broadcast({gridView:["notifySettedCellData",[r,e,i]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"})}}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyRowChanged=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyRowRemoved=function(t){try{var e="notifySettedFilter";0==this.getRowCount()&&(e="notifyRemovedAll"),this.broadcast({generalComp:"both",gridView:[e]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyRowInserted=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyRowMoveUp=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyRowMoveDown=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyRemoveAll=function(t){try{this.broadcast({generalComp:"both",gridView:["notifyRemovedAll"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyReformed=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyDeleteRow=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.notifyRowPositionChanged=function(t){try{this.broadcast({linkedDataList:["refresh"]})}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.restartFilter=function(){try{this.filterManager.restartFilter()}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.restartFilterByCellChanged=function(t,e,i){try{for(var o=!1,s=0;s<this.conditionInfo.columnArray.length;s++)if(this.conditionInfo.columnArray[s]===e){o=!0;break}o&&this.filterManager.restartFilter()}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.setMatchIgnoreCase=function(t){try{this.options.matchIgnoreCase=b.D.getBoolean(t)}catch(t){h.w.printStackTrace(t)}},yt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},yt.prototype.getUserData=function(t){try{
return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}};var vt=function(t){this.parent=t,this.filterArr=[],this.colArr=[];for(var e=0;e<this.parent._dataList.cellIdList.length;e++){var i=this.parent._dataList.cellIdList[e];this.colArr[i]=i}};vt.prototype.runFilter=function(t){try{this.evaluateFilterCondition(t)}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.runSort=function(t){try{this.evaluateSortCondition(t)}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.evaluateFilterCondition=function(t){try{if("string"!=typeof t||""==t.trim())return void this.parent.broadcast({gridView:["notifySettedFilter",[{isSort:!1}]]});var e;if(this.parent.conditionInfo.filterInfo.parse)e=this.parent.conditionInfo.filterInfo.condition;else{var i=function(t,e){t[t.length]=e},o=function(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e},s=function(t){return!r(t)&&"("!=t&&")"!=t},r=function(t){return"&"===t||"|"===t},a=function(t){return t[t.length-1]},n=function(t){return 0==t.length},l=function(t){return"|"==t?4:"&"==t?3:"("==t?2:")"==t?1:void 0},d=function(t){for(var e=t.split(""),i=new String(""),o=new Array,a=0,n=0;n<e.length;n++)s(e[n])&&(i+=e[n]),(r(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(o[a]=i,a++),i="",o[a]=e[n],a++),n==e.length-1&&""!=i&&(o[a]=i);return o},u=t;e="_this.executeLinkedFilter({condition:'and'",""!=t&&(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=function(t){for(var e=new Array,r="",a=0;a<t.length;a++)if(s(t[a]))i(e,t[a]);else{var n=o(e),l="&"===t[a]?"&&":"|"===t[a]?"||":t[a];r+=""===r?o(e)+l+n:l+n}return""===r?o(e):r}(function(t,e,h){e=new Array;var u=new Array,c=0;t=d(t);for(var p=0;p<t.length;p++){if(s(t[p])&&(e[c]=t[p],c++),r(t[p])){if("^"!=t[p])for(;!n(u)&&l(t[p])<=l(a(u));)e[c]=a(u),o(u),c++;else for(;!n(u)&&l(t[p])<l(a(u));)e[c]=a(u),o(u),c++;i(u,t[p])}if("("==t[p]&&i(u,t[p]),")"==t[p]){for(;"("!=a(u);)e[c]=o(u),c++;o(u)}}for(;!n(u);)"("==a(u)?o(u):e[e.length]=o(u);var g="";for(p=0;p<e.length;p++)g+=e[p];return 0==h?g:e}(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.trim()).replaceAll('"',"'")).replace(/[\s]*[&][&][\s]*/g,"&")).replace(/[\s]*[|][|][\s]*/g,"|")).replace(/[cC][oO][lL][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[vV][aA][lL][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[rR][eE][fF][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,"#LIKE#")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,"$LIKE$")).replace(/[rR][oO][wW][sS][tT][aA][tT][uU][sS][\s]*[(][\s]*[)]/g,"@rowStatus")))).wq_replaceAll("!_!","(").wq_replaceAll("_!_",")")).wq_replaceAll("#LIKE#"," NOTLIKE ")).wq_replaceAll("$LIKE$"," LIKE ")).replace(/[\s]*[=][=][\s]*/g,",operator:'E', key:")).replace(/[\s]*[!][=][\s]*/g,",operator:'IE', key:")).replace(/[\s]*[>][=][\s]*/g,",operator:'GTE', key:")).replace(/[\s]*[<][=][\s]*/g,",operator:'LTE', key:")).replace(/[\s]*[>][\s]*/g,",operator:'GT', key:")).replace(/[\s]*[<][\s]*/g,",operator:'LT', key:")).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,",operator:'NOTLIKE', key:")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,",operator:'LIKE', key:")).replace(/[cC][oO][lL][\s]*[(]/g,",colID:_this.getColumnID(")).replace(/[rR][oO][wW][sS][tT][aA][tT][uU][sS][\s]*[(][\s]*[)]/g,",colID:'@rowStatus'")).replace(/[\s]*[&][&][\s]*/g," });_this.executeLinkedFilter({condition:'and'")).replace(/[\s]*[|][|][\s]*/g," });_this.executeLinkedFilter({condition:'or'")).replace(/[vV][aA][lL][\s]*[(]/g,"_this.getComponentValue(")).replace(/[rR][eE][fF][\s]*[(]/g,"_this.getRefValue(")),e=e+t+"});"}try{new Function("_this",e)(this),this.parent.conditionInfo.filterInfo.parse=!0,this.parent.conditionInfo.filterInfo.condition=e}catch(t){try{this.deprecatedEvaluateFilterCondition(u)}catch(t){
this.parent.conditionInfo.filterInfo.parse=!1,$l(" filter error "),this.parent.broadcast({gridView:["notifySettedFilter",[{isSort:!1}]]})}}}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.deprecatedEvaluateFilterCondition=function(t){function e(t,e){t[t.length]=e}function i(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function o(t){return!s(t)&&"("!=t&&")"!=t}function s(t){return"&"===t||"|"===t}function r(t){return t[t.length-1]}function a(t){return 0==t.length}function n(t){return"|"==t?4:"&"==t?3:"("==t?2:")"==t?1:void 0}var l="_this.executeLinkedFilter{ 'and', _this.colArr['";""!=t&&(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=function(t){for(var s=new Array,r="",a=0;a<t.length;a++)if(o(t[a]))e(s,t[a]);else{var n=i(s),l="&"===t[a]?"&&":"|"===t[a]?"||":t[a];r+=""==r?i(s)+l+n:l+n}return""===r?i(s):r}(function(t,l,h){l=new Array;var d=new Array,u=0;t=function(t){for(var e=t.split(""),i=new String(""),r=new Array,a=0,n=0;n<e.length;n++)o(e[n])&&(i+=e[n]),(s(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(r[a]=i,a++),i="",r[a]=e[n],a++),n==e.length-1&&""!=i&&(r[a]=i);return r}(t);for(var c=0;c<t.length;c++){if(o(t[c])&&(l[u]=t[c],u++),s(t[c])){if("^"!=t[c])for(;!a(d)&&n(t[c])<=n(r(d));)l[u]=r(d),i(d),u++;else for(;!a(d)&&n(t[c])<n(r(d));)l[u]=r(d),i(d),u++;e(d,t[c])}if("("==t[c]&&e(d,t[c]),")"==t[c]){for(;"("!=r(d);)l[u]=i(d),u++;i(d)}}for(;!a(d);)"("==r(d)?i(d):l[l.length]=i(d);var p="";for(c=0;c<l.length;c++)p+=l[c];return 0==h?p:l}(t=(t=(t=(t=(t=(t=(t=(t=t.trim()).replace(/[\s]*[&][&][\s]*/g,"&")).replace(/[\s]*[|][|][\s]*/g,"|")).replace(/[vV][aA][lL][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[rR][eE][fF][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,"#LIKE#")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,"$LIKE$")).replace(/[rR][oO][wW][sS][tT][aA][tT][uU][sS][\s]*[(][\s]*[)]/g,"@rowStatus")))).wq_replaceAll("!_!","(").wq_replaceAll("_!_",")")).wq_replaceAll("#LIKE#"," NOTLIKE ")).wq_replaceAll("$LIKE$"," LIKE ")).replace(/[vV][aA][lL][\s]*[(]/g,"_this.getComponentValue{")).replace(/[rR][eE][fF][\s]*[(]/g,"_this.getRefValue{")).replace(/[\s]*[=][=][\s]*/g,"'], 'E', ")).replace(/[\s]*[!][=][\s]*/g,"'], 'IE', ")).replace(/[\s]*[>][=][\s]*/g,"'], 'GTE', ")).replace(/[\s]*[<][=][\s]*/g,"'], 'LTE', ")).replace(/[\s]*[>][\s]*/g,"'], 'GT', ")).replace(/[\s]*[<][\s]*/g,"'], 'LT', ")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,"'], 'LIKE', ")).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,"'], 'NOTLIKE', ")).replace(/[\s]*[&][&][\s]*/g,"); _this.executeLinkedFilter{ 'and', _this.colArr['")).replace(/[\s]*[|][|][\s]*/g,"); _this.executeLinkedFilter{ 'or', _this.colArr['"));var h=(l=(l=(l=l+t+");").replace(/[\s]*[(][\s]*/g,"")).wq_replaceAll("_this.colArr['@rowStatus']","'@rowStatus'")).split(";");l="";for(var d=0;d<h.length;d++)if(""!=h[d]){h[d]=h[d].replace(/[{][\s]*/g,"(");var u=h[d].match(/[(]/g).length;if(u<=h[d].match(/[)]/g).length){h[d]=h[d].replace(/[)][\s]*/g,"");for(var c=0;c<u;c++)h[d]=c==u-1?h[d]+");":h[d]+")"}l+=h[d]}new Function("_this",l)(this),this.parent.conditionInfo.filterInfo.parse=!0,this.parent.conditionInfo.filterInfo.condition=l},vt.prototype.executeLinkedFilter=function(t){try{var e,i,o,s;arguments.length>1?(s=arguments[0],i=arguments[1],o=arguments[2],e=arguments[3]):(s=t.condition,i=t.colID,o=t.operator,e=t.key);var r={type:"row"};switch(r.colIndex=i,r.condition=s,o){case"GT":r.operator=">";break;case"GTE":r.operator=">=";break;case"LT":r.operator="<";break;case"LTE":r.operator="<=";break;case"E":r.operator="==";break;case"IE":r.operator="!=";break;case"LIKE":r.operator="LIKE";break;case"NOTLIKE":r.operator="NOTLIKE"}"*"===e||e===WebSquare.allValue?r.key="":(r.key=e||"",r.exactMatch=!0),this.parent.conditionInfo.keyArray.push(r.key),this.parent.conditionInfo.columnArray.push(r.colIndex),this.parent.setFilter(r)}catch(t){
h.w.printStackTrace(t,null,this)}},vt.prototype.evaluateSortCondition=function(t){try{if("string"!=typeof t||""==t.trim())return;var e;this.parent.conditionInfo.sortInfo.parse?e=this.parent.conditionInfo.sortInfo.condition:(e="_this.executeLinkedSort([",""!=t&&(t=(t=(t=(t=(t=(t=t.trim()).replace(/[aA][sS][cC][\s]*[(]/g,"{ order: 1, columns: ")).replace(/[dD][eE][sS][cC][\s]*[(]/g,"{ order: -1, columns: ")).replace(/[)]/g,"")).replace("&&","}, ")).replace("||","}, ")),e=e+t+"}]);");try{new Function("_this",e)(this),this.parent.conditionInfo.sortInfo.parse=!0,this.parent.conditionInfo.sortInfo.condition=e}catch(t){this.parent.conditionInfo.sortInfo.parse=!1,$l(" sort error ")}}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.executeLinkedSort=function(t){try{for(var e={sortIndex:[],sortOrder:[]},i=0;i<t.length;i++)for(var o=t[i],s=o.columns.split(","),r=0;r<s.length;r++)e.sortIndex.push(s[r].trim()),e.sortOrder.push(o.order);e.sortIndex.length>0&&this.parent.multisort(e)}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.getRefValue=function(t){try{var e=(t=t.replace("data:","")).split("."),i=b.D.getComponentById(e[0],this.parent.scope_id);if(i)switch(this.parent.conditionInfo.targetInfo[e[0]]||(this.parent.conditionInfo.targetInfo[e[0]]=[]),this.parent.conditionInfo.targetInfo[e[0]].push(e[1]),i.addRefComp(this.parent),this.parent.conditionInfo.filterInfo.useRef=!0,i.initializeType){case"linkedDataList":case"dataList":return i.getCellData(i.getRowPosition(),e[1])||"";case"dataMap":return i.get(e[1])}}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.getComponentValue=function(t){try{var e=b.D.getComponentById(t,this.parent.scope_id);if(e)return this.parent.conditionInfo.targetInfo[t]=!0,this.parent.conditionInfo.filterInfo.checkVal=!0,e.dataObjInfo[this.parent.id]=this.parent,e.getValue();this.parent.conditionInfo.filterInfo.checkVal=!1}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.getColumnID=function(t){try{return t}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.getKey=function(t){try{return t}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.useFilter=function(){return 0!=this.filterArr.length},vt.prototype.clear=function(){this.filterArr=[]},vt.prototype.executeAllFilter=function(){for(var t=0;t<this.filterArr.length;t++)this.executeFilter(this.filterArr[t])},vt.prototype.restartFilter=function(){this.parent.initialRowIndexArr=this.parent._dataList.filteredRowIndexArr.slice(0),this.parent.filteredRowIndexArr=this.parent._dataList.filteredRowIndexArr.slice(0);for(var t=0;t<this.parent.initialFilterList.length;t++)this.executeFilter(this.parent.initialFilterList[t]),this.deleteFilterById(this.parent.initialFilterList[t].id,!1);this.parent.initialRowIndexArr=this.parent.filteredRowIndexArr.slice(0);for(t=0;t<this.filterArr.length;t++)this.executeFilter(this.filterArr[t]);this.filterArr=this.parent.initialFilterList.concat(this.filterArr)},vt.prototype.executeFilter=function(t){try{var e=!1;if(">"!=t.options.operator&&">="!=t.options.operator&&"<"!=t.options.operator&&"<="!=t.options.operator&&"!="!=t.options.operator&&"LIKE"!=t.options.operator&&"NOTLIKE"!=t.options.operator||(e=!0),"and"==t.options.condition)this.parent.filteredRowIndexArr=e?t.executeCondition(this.parent.uuid,"and"):t.execute(this.parent.uuid,"and");else if("or"==t.options.condition){var i=e?t.executeCondition(this.parent.uuid,"or"):t.execute(this.parent.uuid,"or");this.parent.filteredRowIndexArr=this.mergeArray(this.parent.filteredRowIndexArr,i)}}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.addFilter=function(t,e){try{if(e.sortIndexArr){for(var i=[],o=0;o<e.sortIdArr.length;o++)i.push(this.parent._dataList.getColumnIndex(e.sortIdArr[o]));e.sortIndexArr=i}var s=null
;"row"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedRowFilter(t,e):"user"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedUserFilter(t,e):"cell"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedCellFilter(t,e):"sort"==e.type?(s=new WebSquare.DataCollection.linkedDataList.filter.linkedSortFilter(t,e),this.deleteFilterById("sort^@",!1)):"func"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedFuncFilter(t,e):"regExp"==e.type&&(s=new WebSquare.DataCollection.linkedDataList.filter.linkedRegExpFilter(t,e)),this.executeFilter(s),this.filterArr.push(s)}catch(t){h.w.printStackTrace(t,null,this)}},vt.prototype.deleteFilter=function(t,e,i){void 0===i&&(i=!0);for(var o=[],s=0;s<this.filterArr.length;s++)-1==this.filterArr[s].id.indexOf(t)&&o.push(this.filterArr[s]);if(this.filterArr=o,this.parent.filteredRowIndexArr=this.parent.initialRowIndexArr.slice(0),1==i)for(s=0;s<this.filterArr.length;s++)this.executeFilter(this.filterArr[s])},vt.prototype.mergeArray=function(t,e){for(var i=[],o=[],s=0;s<t.length;s++)i[t[s]]=1;for(s=0;s<e.length;s++)i[e[s]]=1;for(s=0;s<i.length;s++)1===i[s]&&o.push(s);return o},vt.prototype.deleteFilterById=function(t,e){void 0===e&&(e=!0);for(var i=[],o=0;o<this.filterArr.length;o++)-1==this.filterArr[o].id.indexOf(t)&&i.push(this.filterArr[o]);this.filterArr=i},vt.prototype.replacechar=function(t){return"^"==t||"$"==t||"."==t||"["==t||"]"==t||"{"==t||"}"==t||"+"==t||"("==t||")"==t||"|"==t||"\\"==t?"\\"+t:void 0};var wt={linkedRowFilter:function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and",exactMatch:!1},e||{})}};wt.linkedRowFilter.prototype.execute=function(t,e){for(var i=[],o=WebSquare.idCache[t],s=o._dataList.getColumnIndex(this.options.colIndex),r=o._dataList.cellIdList.length,a="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,n=0;n<a.length;n++){var l=a[n],h="@rowStatus"==this.options.colIndex?o._dataList.rowStatusArr[l]:o._dataList.dataArr[l*r+s];null==h&&(h=""),this.options.exactMatch?h==this.options.key&&i.push(l):h.indexOf(this.options.key)>-1&&i.push(l)}return i},wt.linkedRowFilter.prototype.executeCondition=function(t,e){for(var i=[],o=WebSquare.idCache[t],s=o._dataList.getColumnIndex(this.options.colIndex),r=o._dataList.cellIdList.length,a="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,n=0;n<a.length;n++){var l,h,d=a[n];if("number"==this.options.columnDataType){var u=o._dataList.dataArr[d*r+s];1==this.options.numberExtraction&&(u=(u+="").replace(/[^\+\-\.0-9]/g,"")),l=parseFloat(u,10)||0,h=parseFloat(this.options.key)}else l="@rowStatus"==this.options.colIndex?o._dataList.rowStatusArr[d]:o._dataList.dataArr[d*r+s],h=this.options.key;">"==this.options.operator?l>h&&i.push(d):">="==this.options.operator?l>=h&&i.push(d):"<"==this.options.operator?l<h&&i.push(d):"<="==this.options.operator?l<=h&&i.push(d):"!="==this.options.operator?l!=h&&i.push(d):"LIKE"==this.options.operator?null!=l.match("^(?:"+h.wq_replaceAll("_",".").wq_replaceAll("%",".*")+"$)")&&i.push(d):"NOTLIKE"==this.options.operator&&null==l.match("^(?:"+h.wq_replaceAll("_",".").wq_replaceAll("%",".*")+"$)")&&i.push(d)}return i},wt.linkedUserFilter=function(t,e){this.id=t,this.options=a.x.extend({key:"",condition:"and"},e||{})},wt.linkedUserFilter.prototype.getColumnData=function(t,e,i){var o=WebSquare.idCache[t],s=(i=o._dataList.getColumnIndex(i),o._dataList.cellIdList.length);return o._dataList.dataArr[e*s+i]},wt.linkedUserFilter.prototype.execute=function(t,e){for(var i=this.options.key.replace(/col[\s]*\(/g,"_this.getColumnData(uuid, realRow, "),o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=[],a=0;a<s.length;a++){var n=s[a];new Function("_this","uuid","realRow","return "+i)(this,t,n)&&r.push(n)}return r},wt.linkedCellFilter=function(t,e){this.id=t,this.options=a.x.extend({key:""},e||{})},wt.linkedCellFilter.prototype.execute=function(t,e){
for(var i=[],o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=o._dataList.oneRowDataLength,a=0;a<s.length;a++)for(var n=s[a],l=0;l<r;l++){var h=o._dataList._getData(n,l);null==h&&(h=""),h.indexOf(this.options.key)>-1&&i.push(n)}return i},wt.linkedSortFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:"",sortIndex:"",sortOrder:"",dataType:"",sortIndexArr:[],sortOrderArr:[],dataTypeArr:[],sortFuncArr:[],sortIdArr:[]},e||{})},wt.linkedSortFilter.prototype.execute=function(t,e){for(var i=WebSquare.idCache[t],o="and"===e?i.filteredRowIndexArr:i.initialRowIndexArr,s=i._dataList.oneRowDataLength,r=o.slice(0).sort((function(t,e){return t-e})),a=this.options,n=i._dataList.dataArr,l=[],h=0;h<r.length;h++)l[h]=r[h]*s;var d=[];for(h=0;h<a.sortIndexArr.length;h++)if(d[h]={},a.sortFuncArr[h])for(var u=0;u<l.length;u++)d[h][r[u]]=n[l[u]+a.sortIndexArr[h]];else if("number"==a.dataTypeArr[h])for(u=0;u<l.length;u++){var c=n[l[u]+a.sortIndexArr[h]];1==a.numberExtractionValueArr[h]&&(c=(c+="").replace(/[^\+\-\.0-9]/g,"")),d[h][r[u]]=Number(c)}else for(u=0;u<l.length;u++)d[h][r[u]]=n[l[u]+a.sortIndexArr[h]]||"";if(1==d.length)if(a.sortFuncArr[0]){var p=a.sortFuncArr[0];m=d[0];r.sort((function(t,e){return p(m[t],m[e])}))}else{var g=a.sortOrderArr[0],m=d[0];r.sort((function(t,e){return m[t]==m[e]?0:m[t]>m[e]?g:-g}))}else r.sort((function(t,e){for(var i=0;i<d.length;i++){var o;if(0!=(o=a.sortFuncArr[i]?a.sortFuncArr[i](d[i][t],d[i][e]):d[i][t]==d[i][e]?0:d[i][t]<d[i][e]?-a.sortOrderArr[i]:a.sortOrderArr[i]))return o}return 0}));return r},wt.linkedFuncFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{})},wt.linkedFuncFilter.prototype.execute=function(t,e){if("function"!=typeof this.options.key)throw new Error("This key is not a Function.[key:"+this.options.key+"]");for(var i=[],o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=0;r<s.length;r++){var a=s[r];this.options.key(o._dataList._getData(a,this.options.colIndex),this.options.param,a)&&i.push(a)}return i},wt.linkedRegExpFilter=function(t,e){this.id=t,this.options=a.x.extend({colIndex:-1,key:"",condition:"and"},e||{}),this.regExp=this.options.key},wt.linkedRegExpFilter.prototype.execute=function(t,e){if(!b.D.isRegExp(this.regExp))throw new Error("This key is not a regular expression.[key:"+this.regExp+"]");for(var i=[],o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=0;r<s.length;r++){var a=s[r];(o._dataList._getData(a,this.options.colIndex)+"").match(this.regExp)&&i.push(a)}return i};var St=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};a.x.extend(St.prototype,yt.prototype),St.filter=wt,St.linkedFilterController=vt,St.prototype.defaultOptions={useConfig:!0,pluginType:"DataCollection.linkedDataList",pluginName:"linkedDataList",baseNode:"list",repeatNode:"map",valueAttribute:"",idAttribute:"",rowStatusNodeName:"rowStatus",JSONPath:""},St.prototype.initialize=function(t,e,i,o,s){try{if(this.elementType=i.elementType?i.elementType:"XML",this.initializeType="linkedDataList",this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.options=this.getConfiguredOptions(),this._broadCastFlag=!0,i)switch(this.elementType){case"XML":this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),"linkedDataList"==this.initializeType&&(this.options.xmlEvents=WebSquare.Parser.parseEvent(i));break;case"JSON":this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id}var r;if(e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,u=r.id;t=(u?u+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,
this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var c="linkedDataList",p=WebSquare.componentsCache,g=p[c];g||(g=p[c]=[]),g.push(this.uuid)}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){d.k.printLog("id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 linkedDataList를 삭제하고 새로 생성합니다.");var m=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=m}catch(t){m=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),window[WebSquare.noConflict].data[this.id]=this,this.event=new it.U,this.initializeLinkedDataList(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.initializeLinkedDataList=function(t){try{if(this.element=t,"$none"==this.options.valueAttribute.wq_trim()&&(this.options.valueAttribute=""),this.options.valueNode=this.options.valueAttribute,this.initialRowIndexArr=[],this.initialFilterList=[],this.filteredRowIndexArr=[],this.filteredRowIndexMap={},this.childCompHash={},this.refCompHash={},this.activated=!1,this.conditionInfo={targetInfo:{},sortInfo:{parse:!1,set:!1},filterInfo:{parse:!1,set:!1,useRef:!1,checkVal:!0}},"XML"==this.elementType)for(var e=WebSquare.xml.getElementsByTagName(t,"condition",l.v._XML_NAMESPACE.W2),i=0;i<e.length;i++){var o=e[i];switch(o.getAttribute("type")){case"sort":this.conditionInfo.sortInfo.set||(this.conditionInfo.sortInfo.set=!0,this.conditionInfo.sortInfo.condition=WebSquare.xml.getCDataNodeValue(o),this.conditionInfo.sortInfo.orgCondition=this.conditionInfo.sortInfo.condition);break;case"filter":this.conditionInfo.filterInfo.set||(this.conditionInfo.filterInfo.set=!0,this.conditionInfo.filterInfo.condition=WebSquare.xml.getCDataNodeValue(o),this.conditionInfo.filterInfo.orgCondition=this.conditionInfo.filterInfo.condition)}}else this.conditionInfo.sortInfo.set=!0,this.conditionInfo.filterInfo.set=!0,this.conditionInfo.sortInfo.condition=this.element.option.sortCondition,this.conditionInfo.filterInfo.condition=this.element.option.filterCondition,this.conditionInfo.sortInfo.orgCondition=this.conditionInfo.sortInfo.condition,this.conditionInfo.filterInfo.orgCondition=this.conditionInfo.filterInfo.condition;var s=this.options.bind;s=s.replace(/^data:/,""),this.scope_obj&&(this.scope_obj.scope[s]?s=this.scope_obj.scope[s].id:WebSquare.strictMode&&(s=this.scope_id+"_"+s)),this._dataList=b.D.getComponentById(s),this._dataList&&WebSquare.DataCollection.api.isAliasDataCollection(this._dataList)&&(this._dataList=this._dataList.getObj()),WebSquare.DataCollection.api.addChild(this),WebSquare.DataCollection.api.addRelation(this.id,s),this._dataList?this.successBinding||(this.successBinding=!0,this.parent=this._dataList,this.columnPosition=null,this.rowPosition=null,this.oneRowDataLength=this._dataList.oneRowDataLength,this.bodyIdColIndexMap=this._dataList.bodyIdColIndexMap,this.cellInfoHash=this._dataList.cellInfoHash,this.cellIdList=this._dataList.cellIdList,this.structure=this._dataList.structure,this.initialRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this._dataList.addChild(this),this.filterManager=new WebSquare.DataCollection.linkedDataList.linkedFilterController(this),this.synchronize(),WebSquare.DataCollection.activated&&this.activate()):($l(this.id+" has been ignored because dataList is null. "),this.successBinding=!1,
this._dataList={})}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.finalize=function(){try{this.activated=!1}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.activate=function(){try{if(!this.activated){for(var t in this.refresh(),this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.setDataList=function(){try{if(!this.successBinding){var t=this.options.bind;t=t.replace(/^data:/,""),this.scope_obj&&(this.scope_obj.scope[t]?t=this.scope_obj.scope[t].id:WebSquare.strictMode&&(t=this.scope_id+"_"+t)),this._dataList=b.D.getComponentById(t),this._dataList&&WebSquare.DataCollection.api.isAliasDataCollection(this._dataList)&&(this._dataList=this._dataList.getObj()),this._dataList?(this.successBinding=!0,this.parent=this._dataList,this.columnPosition=null,this.rowPosition=null,this.oneRowDataLength=this._dataList.oneRowDataLength,this.bodyIdColIndexMap=this._dataList.bodyIdColIndexMap,this.cellInfoHash=this._dataList.cellInfoHash,this.cellIdList=this._dataList.cellIdList,this.structure=this._dataList.structure,this.initialRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this._dataList.addChild(this),this.filterManager=new WebSquare.DataCollection.linkedDataList.linkedFilterController(this),this.synchronize(),WebSquare.DataCollection.activated&&(this.refresh(),!0===this.conditionInfo.filterInfo.checkVal&&(this.activated=!0))):($l(this.id+" has been ignored because dataList is null. "),this.successBinding=!1,this._dataList={})}}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),this.event.addUserEvents(this,[o],this.options.userEvents)}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.bind=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"===t&&(t=t.toLowerCase()),this.addEvent(t,e)}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.trigger=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t);var i=!1;if(null!=this.options.userEvents)for(var o=0;o<this.options.userEvents.length;o++)if(this.options.userEvents[o]===t){i=!0;break}if(!i&&O.B.isEventSupported(this.render,t))e&&e.constructor==Array?O.B.fireSystemEvent(this,t,e[0]):O.B.fireSystemEvent(this,t);else{var s=[this,t];s=s.concat(e),O.B.fireEvent.apply(O.B.fireEvent,s),s[0]=null}}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t&&"function"==typeof e)for(var i=0;i<this.userEventList.length;i++)t===this.userEventList[i].name&&e===this.userEventList[i].param.handler&&(this.userEventList.splice(i,1),"object"===(0,T.Z)(this.systemEventList[t])&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(i=this.userEventList.length-1;i>=0;i--)t===this.userEventList[i].name&&this.userEventList.splice(i,1);"object"===(0,T.Z)(this.systemEventList[t])&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var o in this.systemEventList)this.event.removeListener(this.render,o,this.systemEventList[o].handler);this.userEventList=[],this.systemEventList={}}this.options.xmlEvents=this.userEventList.slice()}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},St.prototype.setEventPause=function(t,e){var i={},o=!1
;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},St.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){h.w.printStackTrace(t,null,this)}},St.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){h.w.printStackTrace(t,null,this)}};var Ct=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};Ct.prototype.defaultOptions={pluginType:"DataCollection.aliasDataList",pluginName:"aliasDataList",scope:""},Ct._initImport=function(){WebSquare.DataCollection.aliasDataList.linkFunction()},a.x._initImportList.push("DataCollection.aliasDataList"),Ct.prototype.initialize=function(t,e,i,o,s){try{var r;if(this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.options=a.x.extend({},this.defaultOptions),i&&(l.v.isXML(i)?this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)):i.option&&(this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id)),e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,u=r.id;t=(u?u+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var c="aliasDataList",p=WebSquare.componentsCache,g=p[c];g||(g=p[c]=[]),g.push(this.uuid)}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"aliasDataList")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 aliasDataList를 삭제하고 새로 생성합니다.";d.k.printLog(m),alert(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.childCompHash={},this.refCompHash={},this.initializeType="dataList",WebSquare.DataCollection.api.addChild(this),this._empty=new WebSquare.DataCollection.dataList(this.id+"??emptyDataList",{},{elementType:"JSON",option:{}},"dataList"),this.refresh(),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},Ct.prototype.refresh=function(t){try{var e=this.options.scope?b.D.getComponentByPath(this.options.scope,this.scope_id):null;this._dataComp=e||this._empty,this.synchronize(t),this.synchronizeRef(t)}catch(t){h.w.printStackTrace(t,null,this)}},Ct.prototype.getObj=function(){try{return this._dataComp}catch(t){h.w.printStackTrace(t,null,this)}},Ct.prototype.setScope=function(t){try{if("string"==typeof t&&t&&"dataList"===b.D.getComponentByPath(t,this.scope_id).initializeType){for(var e in this.childCompHash){delete this._dataComp.childCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}for(var e in this.refCompHash){var i;delete this._dataComp.refCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}
this.options.scope=t,this.refresh({reset:!0})}}catch(t){h.w.printStackTrace(t,null,this)}},Ct.prototype.synchronize=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRelation[this.id];if(e)for(var i in e)if(e[i]){this.childCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.childCompHash[i]=o,!0===t.reset&&o&&o.modelControl&&(o.modelControl.dataCollectionBinding(o.modelControl.ref),o.modelControl.isDataCollectionItemsetBinded=!0)}this.broadcast({gridView:["resetDataList"],linkedDataList:["setDataList"],generalComp:["refreshItemset"]})}catch(t){h.w.printStackTrace(t)}},Ct.prototype.synchronizeRef=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRef[this.id];if(e)for(var i in e){if(e[i]){this.refCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.refCompHash[i]=o}!0===t.reset&&o&&o.modelControl&&o.modelControl.dataCollectionBinding(o.modelControl.ref)}this.broadcast({gridView:["drawData",[0,0]],generalComp:["refresh"]})}catch(t){h.w.printStackTrace(t)}},Ct.prototype._addRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.childCompHash[t]=e,this._dataComp._addRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},Ct.prototype._addRefRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.refCompHash[t]=e,this._dataComp._addRefRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},Ct.prototype.addChild=function(t){try{return this.childCompHash[t.id]=t.uuid,this._dataComp.addChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},Ct.prototype.removeChild=function(t){try{return delete this.childCompHash[t],this._dataComp.removeChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},Ct.prototype.addRefComp=function(t){try{return this.refCompHash[t.id]=t.uuid,this._dataComp.addRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},Ct.prototype.removeRefComp=function(t){try{return delete this.refCompHash[t],this._dataComp.removeRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},Ct.prototype.getOption=function(t){try{return this.options[t]}catch(t){h.w.printStackTrace(t)}},Ct.prototype.finalize=function(){try{this.options.scope="",this.refresh(),this.activated=!1,WebSquare.DataCollection.api.remove(this._empty.id)}catch(t){h.w.printStackTrace(t,null,this)}},Ct.prototype.activate=function(){try{this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},Ct.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},Ct.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},Ct.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}},Ct.linkFunction=function(){try{for(var t in WebSquare.DataCollection.dataList.prototype)"function"!=typeof WebSquare.DataCollection.dataList.prototype[t]||WebSquare.DataCollection.aliasDataList.prototype[t]||(WebSquare.DataCollection.aliasDataList.prototype[t]=function(t){return function(){var e=this.getObj();return e[t].apply(e,arguments)}}(t))}catch(t){h.w.printStackTrace(t,null,this)}};var xt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};xt.prototype.defaultOptions={pluginType:"DataCollection.aliasDataMap",pluginName:"aliasDataMap",scope:""},xt._initImport=function(){WebSquare.DataCollection.aliasDataMap.linkFunction()},a.x._initImportList.push("DataCollection.aliasDataMap"),xt.prototype.initialize=function(t,e,i,o,s){try{var r;if(this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,
this.options=a.x.extend({},this.defaultOptions),i&&(l.v.isXML(i)?this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)):i.option&&(this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id)),e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,u=r.id;t=(u?u+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var c="aliasDataMap",p=WebSquare.componentsCache,g=p[c];g||(g=p[c]=[]),g.push(this.uuid)}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"aliasDataMap")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 aliasDataMap를 삭제하고 새로 생성합니다.";d.k.printLog(m),alert(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.childCompHash={},this.refCompHash={},this.initializeType="dataMap",WebSquare.DataCollection.api.addChild(this),this._empty=new WebSquare.DataCollection.dataList(this.id+"??emptydataMap",{},{elementType:"JSON",option:{}},"dataMap"),this.refresh(),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.refresh=function(t){try{var e=this.options.scope?b.D.getComponentByPath(this.options.scope,this.scope_id):null;this._dataComp=e||this._empty,this.synchronize(t),this.synchronizeRef(t)}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.getObj=function(){try{return this._dataComp}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.setScope=function(t){try{if("string"==typeof t&&t&&"dataMap"===b.D.getComponentByPath(t,this.scope_id).initializeType){for(var e in this.childCompHash){delete this._dataComp.childCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}for(var e in this.refCompHash){var i;delete this._dataComp.refCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}this.options.scope=t,this.refresh({reset:!0})}}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.synchronize=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRelation[this.id];if(e)for(var i in e)if(e[i]){this.childCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.childCompHash[i]=o,!0===t.reset&&o&&o.modelControl&&(o.modelControl.dataCollectionBinding(o.modelControl.ref),o.modelControl.isDataCollectionItemsetBinded=!0)}}catch(t){h.w.printStackTrace(t)}},xt.prototype.synchronizeRef=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRef[this.id];if(e)for(var i in e){if(e[i]){this.refCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.refCompHash[i]=o}!0===t.reset&&o&&o.modelControl&&o.modelControl.dataCollectionBinding(o.modelControl.ref)}this.broadcast({generalComp:["refresh"]})}catch(t){h.w.printStackTrace(t)}},
xt.prototype._addRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.childCompHash[t]=e,this._dataComp._addRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},xt.prototype._addRefRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.refCompHash[t]=e,this._dataComp._addRefRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},xt.prototype.addChild=function(t){try{return this.childCompHash[t.id]=t.uuid,this._dataComp.addChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},xt.prototype.removeChild=function(t){try{return delete this.childCompHash[t],this._dataComp.removeChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},xt.prototype.addRefComp=function(t){try{return this.refCompHash[t.id]=t.uuid,this._dataComp.addRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},xt.prototype.removeRefComp=function(t){try{return delete this.refCompHash[t],this._dataComp.removeRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},xt.prototype.getOption=function(t){try{return this.options[t]}catch(t){h.w.printStackTrace(t)}},xt.prototype.finalize=function(){try{this.options.scope="",this.refresh(),this.activated=!1,WebSquare.DataCollection.api.remove(this._empty.id)}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.activate=function(){try{this.activated=!0}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},xt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},xt.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}},xt.linkFunction=function(){try{for(var t in WebSquare.DataCollection.dataMap.prototype)"function"!=typeof WebSquare.DataCollection.dataMap.prototype[t]||WebSquare.DataCollection.aliasDataMap.prototype[t]||(WebSquare.DataCollection.aliasDataMap.prototype[t]=function(t){return function(){var e=this.getObj();return e[t].apply(e,arguments)}}(t))}catch(t){h.w.printStackTrace(t,null,this)}};var _t=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.w.printStackTrace(t,null,this)}};_t.prototype.defaultOptions={pluginType:"DataCollection.aliasLinkedDataList",pluginName:"aliasLinkedDataList",scope:""},_t._initImport=function(){WebSquare.DataCollection.aliasLinkedDataList.linkFunction()},a.x._initImportList.push("DataCollection.aliasLinkedDataList"),_t.prototype.initialize=function(t,e,i,o,s){try{var r;if(this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.options=a.x.extend({},this.defaultOptions),i&&(l.v.isXML(i)?this.options=a.x.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)):i.option&&(this.options=a.x.extendKeepingType(this.options,i.option),this.options.id=i.id)),e&&(this.options=a.x.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,u=r.id;t=(u?u+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var c="aliasLinkedDataList",p=WebSquare.componentsCache,g=p[c];g||(g=p[c]=[]),g.push(this.uuid)}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"aliasLinkedDataList")||"id["+this.id+"] 가 중복사용되었습니다. 기존에 있던 aliasLinkedDataList를 삭제하고 새로 생성합니다.";d.k.printLog(m),alert(m)
;var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.v.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.childCompHash={},this.refCompHash={},this.initializeType="linkedDataList",WebSquare.DataCollection.api.addChild(this),this._empty=new WebSquare.DataCollection.dataList(this.id+"??emptyDataList",{},{elementType:"JSON",option:{}},"dataList"),this.refresh(),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.w.printStackTrace(t,null,this)}},_t.prototype.refresh=function(t){try{var e=this.options.scope?b.D.getComponentByPath(this.options.scope,this.scope_id):null;this._dataComp=e||this._empty,this.synchronize(t)}catch(t){h.w.printStackTrace(t,null,this)}},_t.prototype.getObj=function(){try{return this._dataComp}catch(t){h.w.printStackTrace(t,null,this)}},_t.prototype.setScope=function(t){try{if("string"==typeof t&&t&&"linkedDataList"===b.D.getComponentByPath(t,this.scope_id).initializeType){for(var e in this.childCompHash){delete this._dataComp.childCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}for(var e in this.refCompHash){var i;delete this._dataComp.refCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}this.options.scope=t,this.refresh({reset:!0})}}catch(t){h.w.printStackTrace(t,null,this)}},_t.prototype.synchronize=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRelation[this.id];if(e)for(var i in e)if(e[i]){this.childCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.childCompHash[i]=o,!0===t.reset&&o&&o.modelControl&&(o.modelControl.dataCollectionBinding(o.modelControl.ref),o.modelControl.isDataCollectionItemsetBinded=!0)}this.broadcast({gridView:["resetDataList"],generalComp:["refreshItemset"]})}catch(t){h.w.printStackTrace(t)}},_t.prototype._addRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.childCompHash[t]=e,this._dataComp._addRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},_t.prototype._addRefRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.refCompHash[t]=e,this._dataComp._addRefRelation.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},_t.prototype.addChild=function(t){try{return this.childCompHash[t.id]=t.uuid,this._dataComp.addChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},_t.prototype.removeChild=function(t){try{return delete this.childCompHash[t],this._dataComp.removeChild.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},_t.prototype.addRefComp=function(t){try{return this.refCompHash[t.id]=t.uuid,this._dataComp.addRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},_t.prototype.removeRefComp=function(t){try{return delete this.refCompHash[t],this._dataComp.removeRefComp.call(this._dataComp,t)}catch(t){h.w.printStackTrace(t)}},_t.prototype.getOption=function(t){try{return this.options[t]}catch(t){h.w.printStackTrace(t)}},_t.prototype.finalize=function(){try{this.options.scope="",this.refresh(),this.activated=!1,WebSquare.DataCollection.api.remove(this._empty.id)}catch(t){h.w.printStackTrace(t,null,this)}},_t.prototype.activate=function(){try{this.activated=!0}catch(t){
h.w.printStackTrace(t,null,this)}},_t.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},_t.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.w.printStackTrace(t,null,this)}},_t.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.w.printStackTrace(t,null,this)}},_t.linkFunction=function(){try{for(var t in WebSquare.DataCollection.linkedDataList.prototype)"function"!=typeof WebSquare.DataCollection.linkedDataList.prototype[t]||WebSquare.DataCollection.aliasLinkedDataList.prototype[t]||(WebSquare.DataCollection.aliasLinkedDataList.prototype[t]=function(t){return function(){var e=this.getObj();return e[t].apply(e,arguments)}}(t))}catch(t){h.w.printStackTrace(t,null,this)}};var It=__webpack_require__(9166),Tt=__webpack_require__(6249),kt=__webpack_require__(7632),Dt=function(t,e,i){rt.s.call(this,t,e,i)};a.x.extend(Dt.prototype,rt.s.prototype),Dt.prototype.defaultOptions={pluginType:"uiplugin.body",pluginName:"body",userEvents:["onpageload","onpageunload"],parseChild:!0,useConfig:!0,toolTipSec:10,toolTipNoEffect:!1,tooltipSec:10,tooltipNoEffect:!1,useExternalClass:!1},Dt.prototype.initialize=function(t){this.wmodeFrameHash={},this.modal=null,this.toolTipId="",this.toolTip=null,this.toolTipTimer=null,this.tooltipSec=this.options.tooltipSec||this.options.toolTipSec,this.tooltipNoEffect=this.options.tooltipNoEffect||this.options.toolTipNoEffect,this.forceClose=l.v.getConfiguration("/WebSquare/body/layerForceClose/@value"),this.layerListener=new Dt.bodyLayerListener,this.modalStack=[]},Dt.prototype.setRender=function(){if(!this.parentControl||"wframe"!=this.parentControl.options.pluginName&&"pageInherit"!=this.parentControl.options.pluginName){this.render=document.body,this.options.useExternalClass&&this.render.className?this.render.className=(this.render.className+" "+this.options.className).wq_trim():this.render.className=this.options.className,WebSquare.w2xTheme&&this.addClass("w5_"+WebSquare.w2xTheme);for(var t=l.v.getChildConfiguration("/WebSquare/browserSelector",{singleMode:!0}),e=0;e<t.length;e++)"className"==t[e]["@tagName"]&&new RegExp(t[e]["@pattern"]).test(navigator.userAgent)&&this.addClass(t[e]["@value"])}else this.render=this.parentControl.render},Dt.prototype.setAction=function(){null==this.parentControl&&this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(){for(var t=self,e=0;e<1e3;e++)try{if(t.parent===t)break;(0,T.Z)(t.parent.WebSquare),t=t.parent}catch(t){break}var i=[t];for(e=0;e<1e4&&!(i.length<=0);e++)for(var o=i.length,s=0;s<o;s++)try{for(var r=i.shift(),a=0;a<r.window.length;a++)i.push(r.frames[a]);try{r.WebSquare&&r!==self&&r.WebSquare.body&&r.WebSquare.body.layerListener.frameClick()}catch(t){h.w.crossOrigin({message:t.message,name:"frameClick"})}r=null}catch(t){h.w.crossOrigin({message:t.message,name:"frameClick"})}for(s=0;s<i.length;s++)i[s]=null;i=null,t=null})))},Dt.prototype.toHTML=function(){for(var t=[],e=this.getChildren(),i=0;i<e.length;i++)t.push(e[i].toHTML());return t.join("")},Dt.prototype.parseDomToRender=function(t){if(t)for(var e=t.firstChild;null!=e;e=e.nextSibling)1==e.nodeType&&this.parseDomToRender(e)},Dt.prototype.showWModeFrame=function(t,e){try{if(!this.render||!e)return;if("menu"==t){if(0==e.childNodes.length)return;var i=e.childNodes,o=i[0].className.split(" ")[0];if(this.wmodeFrameHash[o]=document.getElementById(o+"_wmode_frame"),this.wmodeFrameHash[o]||(this.wmodeFrameHash[o]=document.createElement("iframe"),this.wmodeFrameHash[o].id=o+"_wmode_frame",this.wmodeFrameHash[o].className="w2wmode_frame w2wmode_menuFrame",this.wmodeFrameHash[o].style.position="absolute",this.wmodeFrameHash[o].frameBorder="no",
"https:"==location.protocol&&(this.wmodeFrameHash[o].src=WebSquare.net.getSSLBlankPage(!0))),this.wmodeFrameHash[o]){var s=this;setTimeout((function(){s.wmodeFrameHash[o].controlID=o,s.wmodeFrameHash[o].style.top=WebSquare.style.getAbsoluteTop(i[0])+"px",s.wmodeFrameHash[o].style.width=i[0].offsetWidth+"px",s.wmodeFrameHash[o].style.height=i[0].offsetHeight+"px",s.wmodeFrameHash[o].style.display="block",s.wmodeFrameHash[o].style.left=WebSquare.style.getAbsoluteLeft(i[0])+"px",s.render.insertBefore(s.wmodeFrameHash[o],e.parentElement)}),1)}}else if(this.wmodeFrameHash[t]=document.getElementById(this.id+"_"+t+"_wmode_frame"),this.wmodeFrameHash[t]||(this.wmodeFrameHash[t]=document.createElement("iframe"),this.wmodeFrameHash[t].id=this.id+"_"+t+"_wmode_frame",this.wmodeFrameHash[t].className="w2wmode_frame",this.wmodeFrameHash[t].style.position="absolute",this.wmodeFrameHash[t].frameBorder="no","https:"==location.protocol&&(this.wmodeFrameHash[t].src=WebSquare.net.getSSLBlankPage(!0))),this.wmodeFrameHash[t]){s=this;setTimeout((function(){s.wmodeFrameHash[t].controlID=e.id,s.wmodeFrameHash[t].style.left=e.offsetLeft+"px",s.wmodeFrameHash[t].style.top=e.offsetTop+"px",s.wmodeFrameHash[t].style.width=e.offsetWidth+"px",s.wmodeFrameHash[t].style.height=e.offsetHeight+"px",s.wmodeFrameHash[t].style.display="block",s.render.insertBefore(s.wmodeFrameHash[t],e)}),1)}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.hideWModeFrame=function(t,e){try{"menu"==t?this.wmodeFrameHash[e]&&this.wmodeFrameHash[e].controlID==e&&(this.wmodeFrameHash[e].style.display="none"):this.wmodeFrameHash[t]&&this.wmodeFrameHash[t].controlID==e&&(this.wmodeFrameHash[t].style.display="none")}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.removeWModeFrame=function(t,e){try{"menu"==t&&this.wmodeFrameHash[e]&&this.wmodeFrameHash[e].controlID==e&&(document.body.removeChild(this.wmodeFrameHash[e]),delete this.wmodeFrameHash[e])}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.showModal=function(t,e,i){try{return 1===arguments.length&&"object"===(0,T.Z)(arguments[0])?this._showModal(arguments[0]):this._showModal({className:t,popupComponents:e,stackComponents:i})}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype._showModal=function(t){try{var e=t.className||"",i=t.popupComponents||void 0,o=t.stackComponents||void 0,s=t.popupModal;if(this.modal||(this.modal=document.createElement("div"),this.modal.id="_modal",this.modalStack=[],this.modalStackPopupLayer=[],this.stackComponents=null),e?(this.modalStack[this.modalStack.length]=e,this.modal.className=e):(this.modalStack[this.modalStack.length]="w2modal",this.modal.className="w2modal"),this.modal){if(!1!==s&&(this.render.appendChild(this.modal),this.modal.style.display="block"),o)for(var r in null==this.stackComponents&&(this.stackComponents={}),o)if(null==this.stackComponents[r])this.stackComponents[r]=[o[r]];else{if("popup"===r){if((f=this.stackComponents[r].length-1)>=0)for(var a=f;a>=0;a--){if(!(y=WebSquare.idCache[this.stackComponents[r][a].id])&&this.stackComponents[r][a].id&&(y=b.D.getPopup(this.stackComponents[r][a].id).popupWin),y&&y.render&&!0===s){if((u=parseInt(y.getStyleProperty("z-index"),10))==(c=parseInt(b.D.getStyleProperty(this.modal,"z-index"),10)-1))break;y.zIndex=u,y.setStyle("z-index",c)}}}else{var n=this.stackComponents[r].length-1;if(!(y=WebSquare.idCache[this.stackComponents[r][n]])&&this.stackComponents[r][n]){var d=b.D.getPopup(this.stackComponents[r][n]);d&&(y=d.popupWin)}if(y&&y.render){var u=parseInt(y.getStyleProperty("z-index"),10),c=parseInt(b.D.getStyleProperty(this.modal,"z-index"),10)-1;y.zIndex=u,y.setStyle("z-index",c)}}this.stackComponents[r].push(o[r])}if(this.wframeSubPopup&&this.wframeSubPopup.length>0)for(var p=0;p<this.wframeSubPopup.length;p++){if((m=WebSquare.idCache[this.wframeSubPopup[p]])&&"visible"===m.getStyle("visibility"))for(var r in m.stackComponents){
if(void 0!==m.stackComponents[r])if((f=m.stackComponents[r].length-1)>=0)for(a=f;a>=0;a--){if(!(y=WebSquare.idCache[m.stackComponents[r][a].id])&&m.stackComponents[r][a].id&&(y=b.D.getPopup(m.stackComponents[r][a].id).popupWin),y&&y.render&&this.modal.style.display){if(!((u=parseInt(y.getStyleProperty("z-index"),10))>=(c=parseInt(b.D.getStyleProperty(this.modal,"z-index"),10)-1)))break;y.wframePopupZIndex=u,y.setStyle("z-index",c)}}}}var g=b.D.getPopupList(!0);if(g.length>0)for(p=g.length-1;p>=0;p--){var m;if((m=WebSquare.idCache[g[p]._targetFrameObjUUID])&&"visible"===m.getStyle("visibility")){for(var r in m.stackComponents){var f;if(void 0!==m.stackComponents[r])if((f=m.stackComponents[r].length-1)>=0)for(a=f;a>=0;a--){var y;if(!(y=WebSquare.idCache[m.stackComponents[r][a].id])&&m.stackComponents[r][a].id&&(y=b.D.getPopup(m.stackComponents[r][a].id).popupWin),y&&y.render&&s){if(!((u=parseInt(y.getStyleProperty("z-index"),10))>=(c=parseInt(b.D.getStyleProperty(this.modal,"z-index"),10)-1))||y.wframePopupZIndex)break;y.wframePopupZIndex=u,y.setStyle("z-index",c)}}}if(m._wframePopupModal&&"block"===m._wframePopupModal.render.style.display)break}}var v=!1;try{this.modal.setActive&&(this.modal.setActive(),v=!0)}catch(t){}if(v||(document.activeElement?document.activeElement.blur():this.modal.focus()),b.D.isIE(6)&&(this.modal.style.top=document.documentElement.scrollTop+"px",this.modal.style.left=document.documentElement.scrollLeft+"px",this.modal.style.width=document.documentElement.scrollWidth+"px",this.modal.style.height=document.documentElement.scrollHeight+"px"),b.D.isMobile()||this.addClass(document.documentElement,"w2modalopenedbody"),i&&i.length>0){for(a=0;a<i.length;a++){var w=i[a];w&&b.D.getComponentById(w).options.pluginName?b.D.getComponentById(w).addClass("w2modal_popupLayer"):$l("[body.showModal]존재하지 않는 WebSquare Component입니다.("+w+")")}this.modalStackPopupLayer[this.modalStackPopupLayer.length]=i}b.D.isMobile()&&"true"==l.v.getConfiguration("/WebSquare/modal/@preventTouch")&&O.B.addListener(this.modal,"ontouchmove",this.handleTouchMove)}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.handleTouchMove=function(t){O.B.preventDefault(t)},Dt.prototype.modalEvent=function(t){try{this.modal&&t&&(O.B.addListener(this.modal,"onclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()})),O.B.addListener(this.modal,"ondblclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()})))}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.hideModal=function(t,e){try{if(this.modal){var i,o=!1;if(null!=this.stackComponents&&!0!==t)for(var s in this.stackComponents){var r=this.stackComponents[s];if(e)for(var a=this.stackComponents[s].length-1;a>=0;a--)r[a].id===e&&r.splice(a,1);else r.pop();for(a=f=r.length-1;a>=0;a--){0!=a||0!==r.length&&!1!==r[a].modal||(o=!0);var n=r[r.length-1];if("popup"===s&&(n=r[a].id),(y=WebSquare.idCache[n])||(y=b.D.getComponentById(n)),y&&y.render){var d=y.zIndex;isNaN(d)&&(d=""),y.setStyle("z-index",d)}if("popup"!=s||!0===r[a].modal)break}}if(this.wframeSubPopup&&this.wframeSubPopup.length>0)for(var u=0;u<this.wframeSubPopup.length;u++){if((m=WebSquare.idCache[this.wframeSubPopup[u]])&&"visible"===m.getStyle("visibility"))for(var s in m.stackComponents){if(void 0!==m.stackComponents[s])if((f=m.stackComponents[s].length-1)>=0)for(a=f;a>=0;a--){if(!(y=WebSquare.idCache[m.stackComponents[s][a].id])&&m.stackComponents[s][a].id&&(y=b.D.getPopup(m.stackComponents[s][a].id).popupWin),y&&y.render&&y&&y.render){d=y.wframePopupZIndex;isNaN(d)||(y.setStyle("z-index",d),y.wframePopupZIndex=0)}}}}if(this.modalStack.pop(),this.wframeSubPopup&&this.wframeSubPopup.pop(),0==this.modalStack.length||!0===o)this.modal.style.display="none",b.D.isMobile()||this.removeClass(document.documentElement,"w2modalopenedbody");else{var c=this.modalStack[this.modalStack.length-1];this.modal.className=c}if(this.modalStackPopupLayer.length>0){
var p=this.modalStackPopupLayer[this.modalStackPopupLayer.length-1];for(a=0;a<p.length;a++){var g=p[a];b.D.getComponentById(g)&&b.D.getComponentById(g).removeClass("w2modal_popupLayer")}this.modalStackPopupLayer.splice(this.modalStackPopupLayer.length-1,1)}if(b.D.isMobile()&&"true"==l.v.getConfiguration("/WebSquare/modal/@preventTouch")&&O.B.removeListener(this.modal,"ontouchmove",this.handleTouchMove),"block"!==this.modal.style.display&&(i=b.D.getPopupList(!0)),i&&i.length>0)for(u=i.length-1;u>=0;u--){var m;if((m=WebSquare.idCache[i[u]._targetFrameObjUUID])&&"visible"===m.getStyle("visibility")){for(var s in m.stackComponents){var f;if(void 0!==m.stackComponents[s])if((f=m.stackComponents[s].length-1)>=0)for(a=f;a>=0;a--){var y;if(!(y=WebSquare.idCache[m.stackComponents[s][a].id])&&m.stackComponents[s][a].id&&(y=b.D.getPopup(m.stackComponents[s][a].id).popupWin),y&&y.render&&y.wframePopupZIndex&&y&&y.render){d=y.wframePopupZIndex;isNaN(d)||(y.setStyle("z-index",d),y.wframePopupZIndex=0)}}}if(!0===m._modal)break}}}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.setToolTip=function(t,e){try{b.D.isMobile()?(O.B.addListener(t,"ontouchstart",this.event.bindAsEventListener(this,(function(i){WebSquare.getBody().showToolTip(i,t,e)}))),O.B.addListener(t,"ontouchend",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTip(t)})))):(O.B.addListener(t,"onmouseover",this.event.bindAsEventListener(this,(function(i){WebSquare.getBody().showToolTip(i,t,e)}))),O.B.addListener(t,"onmouseout",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTip(t)}))))}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.setToolTipComp=function(t,e){try{if(void 0===e||""==e)return;b.D.isMobile()?(O.B.addListener(t,"ontouchstart",this.event.bindAsEventListener(this,(function(i){WebSquare.getBody().showToolTipComp(i,t,e)}))),O.B.addListener(t,"ontouchend",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTipComp(t,e)})))):(O.B.addListener(t,"onmouseover",this.event.bindAsEventListener(this,(function(i){WebSquare.getBody().showToolTipComp(i,t,e)}))),O.B.addListener(t,"onmouseout",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTipComp(t,e)}))))}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.showToolTip=function(t,e,i){try{if(0==e.tooltipShow||!i)return;if(b.D.isFF()&&e.getAttribute("disabled"))return;if(i.indexOf("javascript:")>-1){var o=i.substring(11,i.length);"function"==typeof(a=b.D.getGlobalFunction(o,this.scope_id))&&(i=a())}if(""==i)return;if(this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null),this.toolTip||(this.toolTip=new WebSquare.uiplugin.balloonTip(this.id+"_balloonTip"),this.toolTip.writeTo(this),this.toolTip.activate()),this.toolTip){for(var s=this.event.getTargetIterator(t,this.render),r=null;s.next();)if((r="idToUUID"in WebSquare?WebSquare.idCache[WebSquare.idToUUID[s.getElement().getAttribute("id")]]:WebSquare.componentIdCache[s.getElement().getAttribute("id")])&&r.render==s.getElement()||(r=null),r&&r.options&&""!=r.options.tooltip){if((i=r.options.tooltip).indexOf("javascript:")>-1){var a;o=i.substring(11,i.length);"function"==typeof(a=b.D.getGlobalFunction(o,this.scope_id))&&(i=a())}else r.options.useLocale&&r.options.tooltipLocaleRef&&(i=this.getLocaleValue(r.options.tooltipLocaleRef));break}s=null,this._compID=this.uuid,r&&(O.B.fireEvent(r,"ontooltipshow"),this._compID=r.uuid);var n=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,l=WebSquare.style.getAbsoluteLeft(e),d=WebSquare.style.getAbsoluteTop(e),u=WebSquare.style.getSize(e,"height"),c="",p=this.tooltipSec;r&&r.options&&r.options.tooltipSec&&(p=parseInt(r.options.tooltipSec));var g=r&&r.options&&r.options.tooltipFormatter?b.D.getGlobalFunction(r.options.tooltipFormatter,r.scope_id):null;c="function"==typeof g?g.call(r,r.id,i):i,this.toolTip.setValue(c);var m=this;this.toolTipTimer=setTimeout((function(){
m.toolTip.show();var t=m.toolTip.render.offsetWidth,e=m.toolTip.render.offsetHeight;l+t>document.documentElement.scrollLeft/n+document.documentElement.clientWidth/n-10&&(l=document.documentElement.scrollLeft/n+document.documentElement.clientWidth/n-t-10);var i=d-e;i<document.documentElement.scrollTop/n+10&&(i=i<0?d+u+5:document.documentElement.scrollTop/n+10),m.toolTip.setPosition(l,i),WebSquare.style.adjustZIndex(m._compID,m.toolTip.uuid,"toolTip")}),p)}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.showToolTipComp=function(t,e,i){try{if(void 0===i||""==i)return;this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null);var o=b.D.getComponentById(i);if(o){var s=WebSquare.style.getAbsoluteLeft(e),r=WebSquare.style.getAbsoluteTop(e),a=WebSquare.style.getSize(e,"height"),n=WebSquare.style.getSize(e,"width");this.toolTipTimer=setTimeout((function(){o.show();var t=o.render.offsetWidth,e=o.render.offsetHeight;s>document.documentElement.scrollLeft+document.documentElement.clientWidth-s-10&&(s=s+n-t);var i=r-e;i<document.documentElement.scrollTop+10&&(i=i<0?r+a+5:document.documentElement.scrollTop+10),o.setPosition(s,i)}),this.toolTipSec)}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.hideToolTip=function(t){try{if(this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null),this.toolTip){this.toolTip.hide();var e=this.event.getTargetIterator(t,this.render),i=null,o=e.getElement();null!=o&&((i="idToUUID"in WebSquare?WebSquare.idCache[WebSquare.idToUUID[o.getAttribute("id")]]:WebSquare.componentIdCache[o.getAttribute("id")])&&i.render==o||(i=null)),e=null,o=null,i&&O.B.fireEvent(i,"ontooltiphide")}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.hideToolTipComp=function(t,e){try{var i=b.D.getComponentById(e);i&&(this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null),i&&i.hide())}catch(t){h.w.printStackTrace(t,null,this)}},Dt.prototype.getLayerListener=function(){try{return this.layerListener}catch(t){h.w.printStackTrace(t,null,this)}},(Dt.bodyLayerListener=function(){this.layers={},this.existShow=!1,this.useOtherComponentId={}}).prototype.addListener=function(t){try{var e=!0;for(var i in this.layers){e=!1;break}var o=t.component,s=t.component.id;if(this.layers[s]={component:t.component,show:t.fnShow,hide:t.fnHide,paramHide:t.paramHide,event:t.event,isShow:!1,otherClick:t.otherClick,frameClick:t.frameClick},e&&(b.D.isMobile()?WebSquare.getBody().event.addListener(document.documentElement,"ontouchstart",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseDownEventDocument)):(WebSquare.getBody().event.addListener(document.documentElement,"onmousedown",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseDownEventDocument)),WebSquare.getBody().event.addListener(document.documentElement,"onmousewheel",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseWheelEventDocument)),WebSquare.getBody().event.addListener(window,"onscroll",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleScrollEventDocument)),WebSquare.getBody().event.addListener(window,"onresize",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseWheelEventDocument)))),t.event)for(var r in t.event)o.event.addListener(document.documentElement,r,o.event.bindAsEventListener(o,t.event[r]))}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.show=function(t,e){try{if(this.layers[t]&&"function"==typeof this.layers[t].show){for(var i=this.layers[t].component,o={};i.parentControl;)(i=i.parentControl).id&&(o[i.id]=!0);this.hideAll(o),this.layers[t].show.call(this.layers[t].component,e),this.layers[t].isShow=!0,this.existShow=!0}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.hide=function(t,e){try{
if(this.layers[t]&&"function"==typeof this.layers[t].hide)for(var i in this.layers[t].hide.call(this.layers[t].component,e),this.layers[t].isShow=!1,this.existShow=!1,this.layers)if(this.layers[i].isShow){this.existShow=!0;break}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.hideAll=function(t){try{for(var e in this.targetHideArr=[],this.layers)if((!t||!t[e])&&this.layers[e].isShow){var i={};i.id=e,i.param=this.layers[e].paramHide,this.targetHideArr.push(i),this.hide(e,this.layers[e].paramHide)}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.isExist=function(t){try{return!!this.layers[t]}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.isShow=function(t){try{return!!this.layers[t]&&!!this.layers[t].isShow}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.remove=function(t){try{if(this.layers[t]){for(var e in this.layers[t].event)O.B.removeListener(document.documentElement,e,this.layers[t].event[e]);this.layers[t].component=null,this.layers[t].draw=null,this.layers[t].show=null,this.layers[t].hide=null,this.layers[t].event=null,delete this.layers[t]}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.removeAll=function(){try{for(var t in this.layers){for(var e in this.layers[t].event)O.B.removeListener(document.documentElement,e,this.layers[t].event[e]);this.layers[t].component=null,this.layers[t].draw=null,this.layers[t].show=null,this.layers[t].hide=null,this.layers[t].event=null,delete this.layers[t]}this.layers={}}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.handleMouseDownEventDocument=function(t){try{if(!this.layerListener.existShow)return;var e,i;b.D.isIE("6 7 8")?(e=document.documentElement.scrollTop,i=document.documentElement.scrollLeft):(e=window.pageYOffset,i=window.pageXOffset),O.B.getMouseX(t)<document.documentElement.clientWidth+i&&O.B.getMouseY(t)<document.documentElement.clientHeight+e&&this.layerListener.hideAll()}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.handleMouseWheelEventDocument=function(t){try{var e,i=l.v.getConfiguration("/WebSquare/body/blurAll/@value");if("true"!==i||function(t){for(var e=t.offsetTop,i=t.offsetLeft,o=t.offsetWidth,s=t.offsetHeight;t.offsetParent;)e+=(t=t.offsetParent).offsetTop,i+=t.offsetLeft;return e>=(window.pageYOffset||document.documentElement.scrollTop)&&i>=(window.pageXOffset||document.documentElement.scrollLeft)&&e+s<=(window.pageYOffset||document.documentElement.scrollTop)+(window.innerHeight||document.documentElement.clientHeight)&&i+o<=(window.pageXOffset||document.documentElement.scrollLeft)+(window.innerWidth||document.documentElement.clientWidth)}(document.activeElement)||"INPUT"!==document.activeElement.tagName.toUpperCase()||document.activeElement.blur(),b.D.isIE("6 7 8")&&t&&"resize"===t.type.toLowerCase())return;if(!this.layerListener.existShow)return;for(var o in this.layerListener.layers)this.layerListener.layers[o].isShow&&this.layerListener.layers[o].component&&this.layerListener.layers[o].component.render.parentNode&&(e=this.layerListener.layers[o].component.render.parentNode);var s=O.B.getTarget(t);if("true"==this.forceClose||s!=WebSquare.getBody().render&&e!=WebSquare.getBody().render)return void this.layerListener.hideAll();var r,a,n=document.documentElement;if(b.D.isIE("6 7 8")?(r=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):(r=window.pageYOffset,a=window.pageXOffset),0===r||n.scrollHeight-r===n.clientHeight||0===a||n.scrollWidth-a===n.clientWidth)return;this.useWheel=!0,this.layerListener.hideAll()}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.handleScrollEventDocument=function(t){try{var e=this.layerListener.targetHideArr;if(!e||e.length<=0||null==this.useWheel||!this.useWheel)return;for(var i=0;i<e.length;i++)this.layerListener.show(e[i].id,e[i].param);this.layerListener.targetHideArr=[],this.useWheel=!1
}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.otherClick=function(t){try{for(var e in this.layers)"function"==typeof this.layers[e].otherClick&&this.layers[e].otherClick.call(this.layers[e].component,t)}catch(t){h.w.printStackTrace(t,null,this)}},Dt.bodyLayerListener.prototype.frameClick=function(){try{for(var t in this.existShow&&this.hideAll(),this.layers)"function"==typeof this.layers[t].frameClick&&this.layers[t].frameClick.call(this.layers[t].component)}catch(t){h.w.printStackTrace(t,null,this)}};var Lt=__webpack_require__(7107),Wt=__webpack_require__(7900),At=function(t,e,i){rt.s.call(this,t,e,i)};a.x.extend(At.prototype,rt.s.prototype),At.prototype.defaultOptions={pluginType:"uiplugin.itemTable",pluginName:"itemTable",row:"5",col:"1",submenuSize:"fixed",useRowHover:"true",useColHover:"true",useKey:"true",useHotKey:"true",useCacheData:"true",w2table:"w2table",w2table_main:"w2table_main",w2table_row:"w2table_row",w2table_col:"w2table_col",w2table_col_over:"w2table_col_over",w2table_col_checkbox:"w2table_col_checkbox",w2table_col_label:"w2table_col_label",defaultStyle:"",checkbox:!1,escape:!1,tableRender:"",findItem:!1,keyBufferResetTime:1e3,wheelRows:0,visibleColNum:1},At.prototype.initialize=function(t){var e=l.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/overrideKey/@value");e&&(this.options.overrideKey=e);var i=l.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/wheelRows/@value");i&&!isNaN(i)&&(this.options.wheelRows=Number(i)),this.rowCount=this.options.row,this.colCount=this.options.col,this.selectedCell=null,this.data=[],this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"ㅁ",67:"ㅊ",68:"ㅇ",69:"ㄷ",70:"ㄹ",71:"ㅎ",81:"ㅂ",82:"ㄱ",83:"ㄴ",84:"ㅅ",86:"ㅍ",87:"ㅈ",88:"ㅌ",90:"ㅋ"},this.korCharHash2={69:"ㄸ",81:"ㅃ",82:"ㄲ",84:"ㅆ",87:"ㅉ"},this.inputBlurInside=!1,this.itemTableFocus=!1,this._keyIndex=-1,this._directionKeyPressed=!1,this.myhelper=new WebSquare.korHelper},At.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' aria-expanded='true' "+e+" class='"+this.options.w2table+" "+this.options.className+"' tabIndex='0'>"),1==this.options.checkbox&&1==this.options.navBtn&&(t.push("<div id='"+this.id+"_wrapper' aria-expanded='true' "+e+" class='"+this.options.w2table+" "+this.options.className+"' tabIndex='0'></div>"),t.push("<div id='"+this.id+"_btn_div' class='w2checkcombobox_btn_div'></div>")),t.push("</div>"),t.join("")},At.prototype.addClickEventListener=function(t){this.clickFunc=t},At.prototype.addKeyDownEventListener=function(t){this.keyDownFunc=t},At.prototype.addKeyUpEventListener=function(t){this.keyUpFunc=t},At.prototype.addMouseLeaveEventListener=function(t){this.mouseLeaveFunc=t},At.prototype.addMouseOverEventListener=function(t){this.mouseOverFunc=t},At.prototype.addOnchangeListener=function(t){this.onchangeFunc=t},At.prototype.setItemArr=function(t){var e=[],i="";i=this.options.submenuSize&&"column"!==this.options.submenuSize?"style='table-layout:"+this.options.submenuSize+"; width:0px;'":"style='width:0px'";var o=0;if("ul"===this.options.tableRender){e.push("<ul id='"+this.id+"_main' class='"+this.options.w2table_main+"'>");for(var s=0;s<t.length;++s)if(!0!==t[s]._hidden){var r="",a="";!0===t[s]._disabled&&(r=" data-wqdisabled='true'",!0!==this.options.checkbox&&(a=" w2selectbox_item_disabled")),o++;var n=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'";e.push("<li class='"+this.options.w2table_col+a+"' "+n+" index='"+s+"'"+r+">");for(var l=0;l<1;++l){
var h=this.options.escape?this._encode(t[s].label):t[s].label;e.push("<a id='"+this.id+"_"+s+"' role='listitem option' aria-setsize='"+t.length+"' aria-posinset='"+(s+1)+"' col='"+l+"' index='"+s+"' href='javascript:void(null)'>"),e.push(h),e.push("</a>")}e.push("</li>")}e.push("</ul>")}else{e.push("<table id='"+this.id+"_main' "+i+" class='"+this.options.w2table_main+"'>");var d=t.length,u=this.options.visibleColNum;1==u&&this.options.visibleColMax>1&&(u=Math.min(Math.ceil(t.length/this.options.row),this.options.visibleColMax)),u>1?d=Math.ceil(d/u):u=1;for(s=0;s<d;++s)if(!0!==t[s]._hidden){r="",a="";var c="";!0===t[s]._disabled&&(r=" data-wqdisabled='true'",!0!==this.options.checkbox&&(a=" w2selectbox_item_disabled",c=" disabled")),o++,e.push("<tr class='"+this.options.w2table_row+a+"' row='"+s+"'"+r+">");for(l=0;l<u;++l){var p=s*u+l;if(p>=t.length)e.push("<td id='"+this.id+"_"+p+"' role='listitem option' "+n+" class='"+this.options.w2table_col+"' col='"+l+"' row='"+s+"'></td>");else{h=this.options.escape?this._encode(t[p].label):t[p].label;var g=t[p].value,m=(n=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'","");if(this.options.checkbox&&this.options.editable&&(m=!0===(t[p].checked||t[p].allchecked)?"checked":""),e.push("<td id='"+this.id+"_"+p+"' role='listitem option' aria-setsize='"+t.length+"' aria-posinset='"+(p+1)+"' "+n+" class='"+this.options.w2table_col+"' col='"+l+"' row='"+s+"' index='"+p+"'>"),1==this.options.checkbox){var f=this.id+"_"+p+"_checkbox";e.push("<input type='checkbox' id='"+f+"' class='"+this.options.w2table_col_checkbox+"' value='"+g+"' "+m+c+"/>"),e.push("<label type='checkbox' for='"+f+"' class='"+this.options.w2table_col_label+"'>"),e.push(h),e.push("</label>")}else e.push(h);e.push("</td>")}}e.push("</tr>")}e.push("</table>")}var y=!1;if("none"==this.render.style.display&&(this.render.style.display="",y=!0),!0===this.options.navBtn?document.getElementById(this.id+"_wrapper").innerHTML=e.join(""):this.render.innerHTML=e.join(""),1==this.options.checkbox&&1==this.options.navBtn){this.mainTable=this.render.firstChild.firstChild;var v=document.getElementById(this.id)}else this.mainTable=this.render.firstChild;this.dom.td=null,"ul"===this.options.tableRender?this.dom.tds=this.getDomList("td","li"):this.dom.tds=this.getDomList("td","td");var w=0,S=!1;if(u>1){for(var C=this.mainTable.getElementsByTagName("tr"),x=0;x<C.length;x++){for(var _=0,I=C[x].getElementsByTagName("td"),T=0;T<I.length;T++){_+=(N=parseInt(WebSquare.style.getStyle(I[T],"padding-left").wq_replaceAll("px",""),10)||0)+(R=parseInt(WebSquare.style.getStyle(I[T],"padding-right").wq_replaceAll("px",""),10)||0);for(var k=I[T].childNodes,D=0;D<k.length;D++){var L=k[D];if(1===L.nodeType){var W=WebSquare.style.getStyle(L,"margin-left").wq_replaceAll("px",""),A=WebSquare.style.getStyle(L,"margin-right").wq_replaceAll("px","");W="auto"===W?2:parseInt(W,10),A="auto"===A?2:parseInt(W,10),_+=L.offsetWidth+W+A+N+R}else _+=L.offsetWidth}}w=Math.max(w,_)}this.mainTable.style.width=w+"px",S=!0}else if(this.dom.tds&&this.dom.tds.length>0){var E=this.dom.tds[0].offsetHeight,M=0,q=this.options.row>o?o:this.options.row;this.setStyle("height",q*E+"px"),1==this.options.checkbox&&1==this.options.navBtn&&(v.style.height=q*E+"px");for(T=0;T<this.dom.tds.length;T++){var R,N=parseInt(WebSquare.style.getStyle(this.dom.tds[T],"padding-left").wq_replaceAll("px",""),10)||0;M=(R=parseInt(WebSquare.style.getStyle(this.dom.tds[T],"padding-right").wq_replaceAll("px",""),10)||0)+N;for(W=0,A=0,x=0;x<this.dom.tds[T].childNodes.length;x++)this.dom.tds[T].childNodes[x].nodeType==WebSquare.Elem.type.element?(W=WebSquare.style.getStyle(this.dom.tds[T].childNodes[x],"margin-left").wq_replaceAll("px",""),A=WebSquare.style.getStyle(this.dom.tds[T].childNodes[x],"margin-right").wq_replaceAll("px",""),W="auto"===W?2:parseInt(W,10),A="auto"===A?2:parseInt(W,10),M+=this.dom.tds[T].childNodes[x].offsetWidth+W+A):M+=this.dom.tds[T].offsetWidth
;w<M&&((b.D.isIE("6")||b.D.isIE("7"))&&(M=M+R+N+W+A),w=M)}w+=17,S=!0}S&&(this.maxWidth=w,1==this.options.checkbox&&1==this.options.navBtn&&(v.style.width=w+"px",this.render.firstChild.style.width=w+"px",this.render.firstChild.firstChild.style.width=w+"px"),this.setStyle("width",w+"px"),this.options.useAccessibilityMenu&&(WebSquare.style.setStyle(this.dom.tds[0].parentNode,"padding-left","0px"),WebSquare.style.setStyle(this.dom.tds[0].parentNode,"margin-top","0px"),WebSquare.style.setStyle(this.dom.tds[0].parentNode,"margin-bottom","0px"))),y&&(this.render.style.display="none")},At.prototype.setAction=function(){this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),b.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.B.stopPropagation(t)}catch(t){}}))):(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.B.stopPropagation(t)}catch(t){}}))),1==this.options.navBtn?this.event.addListener(document.getElementById(this.id+"_wrapper"),"onmousewheel",this.event.bindAsEventListener(this,this.handleMouseWheelEvent)):this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMouseWheelEvent))),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseLeaveEvent))},At.prototype.handleMouseWheelEvent=function(t){try{var e=null;if(this.options.wheelRows>0){var i=this.dom.tds[0].offsetHeight,o=O.B.getMouseWheelDelta(t);e=i*Math.round(this.options.wheelRows*o)*-1}else t.wheelDelta?e=-1*t.wheelDelta:b.D.isNumber(t.detail)&&(e=50*t.detail);if(e)if(O.B.stopEvent(t),!0===this.options.navBtn){var s=document.getElementById(this.id+"_wrapper");s&&(s.scrollTop=e+s.scrollTop)}else this.render.scrollTop=e+this.render.scrollTop}catch(t){h.w.printStackTrace(t)}},At.prototype.handleMouseOverEvent=function(t){try{if(this._directionKeyPressed)return;O.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match(this.options.w2table_col)){if("ul"===this.options.tableRender)var i=this.getElementById(this.id).firstChild.childNodes;else i=this.getElementById(this.id).firstChild.firstChild.childNodes;for(var o=0;o<i.length;o++){if("ul"===this.options.tableRender)var s=i[o];else s=i[o].firstChild;this.removeClass(s,this.options.w2table_col_over)}this.selectedCell=e.getElement(),this.addClass(this.selectedCell,this.options.w2table_col_over),this.mouseOverFunc&&this.mouseOverFunc(this.selectedCell)}}catch(t){h.w.printStackTrace(t)}},At.prototype.handleMouseOutEvent=function(t){try{if(this._directionKeyPressed)return;O.B.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match(this.options.w2table_col)&&(this.removeClass(e.getElement(),this.options.w2table_col_over),this.selectedCell=null)}catch(t){h.w.printStackTrace(t)}},At.prototype.handleMouseLeaveEvent=function(t){try{this.mouseLeaveFunc&&this.mouseLeaveFunc(t)}catch(t){h.w.printStackTrace(t)}},At.prototype.handleClickEvent=function(t){try{O.B.stopPropagation(t);for(var e=!1,i=!1,o=this.event.getTargetIterator(t,this.render);o.next();)if(o.match(this.options.w2table_col)){if(this.selectedCell=o.getElement(),this._getCellDisabled()){o.stop();break}if(!this.options.checkbox||e||i)if(this.options.checkbox){r=this.selectedCell.index||this.selectedCell.getAttribute("index")
;!(s=document.getElementById(this.id+"_"+r+"_checkbox"))||s.disabled||i||this.fireClick(t)}else this.fireClick(t);else{var s,r=this.selectedCell.index||this.selectedCell.getAttribute("index");(s=document.getElementById(this.id+"_"+r+"_checkbox"))&&!s.disabled&&s.click()}}else o.match(this.options.w2table_col_checkbox)?e=!0:o.match(this.options.w2table_col_label)&&(i=!0)}catch(t){h.w.printStackTrace(t)}},At.prototype.focus=function(){try{this.inputBlurInside=!0,this.itemTableFocus=!0,"ul"!=this.options.tableRender&&(b.D.isIEAllVersion()||b.D.isSpartan())?b.D.isSpartan()?document.getElementById(this.id).focus():this.render.firstChild.focus():this.render.focus()}catch(t){h.w.printStackTrace(t)}},At.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getSelectedIndex(),o=i=parseInt(i);if(38==e){var s=!1;for(o>0?o--:s=!0;o>0&&this._getCellDisabled(o);)o--;o>=0&&this.setSelectedIndex(o),this._keyIndex=s?-1:o,this._directionKeyPressed=!0}else if(40==e){var r=this.getItemCount();s=!1;for(o+1<r?o++:s=!0;o+1<r&&this._getCellDisabled(o);)o++;o<r&&this.setSelectedIndex(o),this._keyIndex=s?r:o,this._directionKeyPressed=!0}else if(32==e){if(this.options.checkbox&&!this._getCellDisabled(o))document.getElementById(this.id+"_"+i+"_checkbox").click()}else if(33==e){for((o=i-this.rowCount)<0&&(o=0);o>0&&this._getCellDisabled(o);)o--;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(34==e){for((o=i+this.rowCount)>=this.getItemCount()&&(o=this.getItemCount()-1);o+1<r&&this._getCellDisabled(o);)o++;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(35==e){for(o=this.getItemCount()-1;o>0&&this._getCellDisabled(o);)o--;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(36==e){for(o=0;o+1<r&&this._getCellDisabled(o);)o++;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(13==e)this.options.checkbox||this._getCellDisabled(o)||(this._directionKeyPressed=!1,this.fireClick(t));else if(9==e){if("ul"==this.options.tableRender)if(t.shiftKey)i>0?this.setSelectedIndex(i-1):this.endReached=!0;else{r=this.getItemCount();if(document.activeElement==this.render){for(o=0;o+1<r&&this._getCellDisabled(o);)o++;this.setSelectedIndex(o)}else if(o+1<r){for(o++;o+1<r&&this._getCellDisabled(o);)o++;o<r&&this.setSelectedIndex(o)}else this.endReached=!0}}else this.findItemStartedWithKeyChar(t,e),this.options.findItem&&this._keyBuffer&&(b.D.clearTimeout(this.id+"_selectKeyBuffer"),b.D.setTimeout((function(){this._keyBuffer=""}),{key:this.id+"_selectKeyBuffer",caller:this,delay:this.options.keyBufferResetTime}));this.render.setAttribute("aria-activedescendant",this.id+"_"+this.getSelectedIndex()),this.keyDownFunc&&this.keyDownFunc(t),O.B.stopEvent(t)}catch(t){h.w.printStackTrace(t)}},At.prototype.handleKeyupEvent=function(t){try{if(this._directionKeyPressed=!1,this.keyUpFunc&&!this.options.checkbox){var e;if(this.selectedCell){if(this._getCellDisabled())return;void 0===(e=this.selectedCell.index)&&(e=this.selectedCell.getAttribute("index"))}this.keyUpFunc.call(this,t,e)}}catch(t){h.w.printStackTrace(t)}},At.prototype.setSelectedIndex=function(t,e){if(this.dom.tds&&0!==this.dom.tds.length){e=e||{};if(t=t<0?0:t>=this.dom.tds.length?this.dom.tds.length-1:t,this.removeClass(this.selectedCell,this.options.w2table_col_over),this.selectedCell=this.dom.tds[t],this.addClass(this.selectedCell,this.options.w2table_col_over),"ul"==this.options.tableRender&&this.selectedCell.childNodes[0]&&this.selectedCell.childNodes[0].focus(),this.selectedCell.offsetTop>this.render.offsetHeight/2){var i=Math.min(this.getItemCount(),this.rowCount),o=this.dom.tds[t-parseInt(i/2)];this.render.scrollTop=o.offsetTop}else this.render.scrollTop=0;this.onchangeFunc&&!0!==e.noChangeFunc&&this.onchangeFunc(t)}},At.prototype.getItemCount=function(){return this.dom.tds?this.dom.tds.length:0},At.prototype.fireClick=function(t){try{var e;if(this.selectedCell){if(this._getCellDisabled())return
;void 0===(e=this.selectedCell.index)&&(e=this.selectedCell.getAttribute("index"))}this.clickFunc.call(this,t,e)}catch(t){h.w.printStackTrace(t)}},At.prototype._getCellDisabled=function(t){try{var e;return(e=isNaN(t)?this.selectedCell:this.dom.tds[t])&&(e.getAttribute("data-wqdisabled")||e.parentNode.getAttribute("data-wqdisabled"))}catch(t){h.w.printStackTrace(t)}},At.prototype.findItemStartedWithKeyChar=function(t,e){try{var i=this.keyCharHash[e],o=-1;if(i){var s=this.selectedCell?this.selectedCell.index:-1;this.options.findItem&&(s=0),void 0===s&&this.selectedCell&&!this._getCellDisabled()&&(s=this.selectedCell.getAttribute("index"));var r=this.korCharHash[e],a=this.korCharHash2[e],n=1;for(this.options.findItem?this._keyBuffer+=i:(this._keyBuffer=i,s++);;)if(0!=(s%=this.dom.tds.length)||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=s&&1!=s||!0!==this.options.chooseOption||!0!==this.options.allOption){var l=this.dom.tds[s].innerHTML.toLowerCase(),d=!1;r&&!t.shiftKey?d=this.myhelper.startWith(l,r):a&&t.shiftKey&&(d=this.myhelper.startWith(l,a));var u=this.options.findItem?this._keyBuffer:i;if(l.startsWith(u)||d&&b.D.getBoolean(this.options.findItemKor)){o=s;break}if(l.startsWith(u)){this._keyBuffer="",o=s;break}if(n>this.dom.tds.length)break;s++,n++}else{if(this.dom.tds.length<=2)break;s++}else{if(this.dom.tds.length<=1)break;s++}o>-1?this.setSelectedIndex(o):this._keyBuffer=""}}catch(t){h.w.printStackTrace(t)}},At.prototype.getSelectedIndex=function(){try{var t=-1;try{this.selectedCell&&void 0===(t=this.selectedCell.index)&&(t=this.selectedCell.getAttribute("index"))}catch(t){}return t}catch(t){h.w.printStackTrace(t,null,this)}},At.prototype.hide=function(){try{this.itemTableFocus=!1,WebSquare.style.hide(this.render)}catch(t){h.w.printStackTrace(t)}},At.prototype.getFocusedComponentId=function(){try{return this.id.split("_")[0]}catch(t){h.w.printStackTrace(t)}},At.prototype._encode=function(t){var e=t;try{var i=WebSquare.idCache[this.options.parent_uuid];return e=i&&"function"==typeof i._encode?i._encode(t):WebSquare.xml._encode(t)}catch(t){return h.w.printStackTrace(t,null,this),e}};var Et=function(t,e,i){rt.s.call(this,t,e,i)};a.x.extend(Et.prototype,rt.s.prototype),Et.prototype.defaultOptions={pluginType:"uiplugin.gridItemTable",pluginName:"gridItemTable"},Et.prototype.initialize=function(t){try{var e=l.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/overrideKey/@value");e&&(this.options.overrideKey=e);for(var i=[],o=[],s=0;s<this.options.itemsetObj.items.length;s++)if(this.options.itemsetObj.items[s].style){for(var r=this.options.itemsetObj.items[s].style.split(";"),a=!1,n=!1,d=0;d<r.length;d++){if("width"==(c=r[d].split(":"))[0].wq_trim()?(i.push(parseInt(c[1],10)),a=!0):"text-align"==c[0].wq_trim()&&(o.push(c[1]),n=!0),a&&n)break}a||i.push(70),n||o.push("center")}else i.push(70),o.push("center");var u=[];for(s=0;s<this.options.itemsetObj.items.length;s++)if(this.options.itemsetObj.items[s].headerStyle){for(r=this.options.itemsetObj.items[s].headerStyle.split(";"),d=0;d<r.length;d++){var c;if("text-align"==(c=r[d].split(":"))[0].wq_trim()){u.push(c[1]);break}}d==r.length&&u.push("center")}var p=[];for(s=0;s<this.options.itemsetObj.items.length;s++){"true"==this.options.itemsetObj.items[s].hidden?p.push("true"):p.push("false")}for(s=0;s<this.options.itemsetObj.items.length;s++)this.options.itemsetObj.items[s].id||(this.options.itemsetObj.items[s].id=this.id+"_column_body_"+s);this.options.gridOptions.visibleRowNum||(this.options.gridOptions.visibleRowNum=this.options.visibleRowNum),this.options.gridOptions.rowNumVisible||(this.options.gridOptions.rowNumVisible=!1),this.options.gridOptions.wheelStop||(this.options.gridOptions.wheelStop=!1),this.options.gridOptions.rowStatusVisible||(this.options.gridOptions.rowStatusVisible=!1),this.options.gridOptions.selectedRowColor||(this.options.gridOptions.selectedRowColor=""),
this.options.gridOptions.rowMouseOverColor||(this.options.gridOptions.rowMouseOverColor=""),this.options.gridOptions.tooltipDisplay||(this.options.gridOptions.tooltipDisplay=!1),this.options.gridOptions.tooltipFormatter||(this.options.gridOptions.tooltipFormatter=""),this.options.gridOptions.tooltipShowAlways||(this.options.gridOptions.tooltipShowAlways=!1),this.options.gridOptions.applyAllColumnStyle||(this.options.gridOptions.applyAllColumnStyle=!0),this.options.rowNumVisible=this.options.gridOptions.rowNumVisible,this.options.rowStatusVisible=this.options.gridOptions.rowStatusVisible,this.options.wheelStop=this.options.gridOptions.wheelStop,this.options.tooltipDisplay=this.options.gridOptions.tooltipDisplay,this.options.tooltipFormatter=this.options.gridOptions.tooltipFormatter,this.options.tooltipShowAlways=this.options.gridOptions.tooltipShowAlways,this.options.applyAllColumnStyle=this.options.gridOptions.applyAllColumnStyle,this.options.initFixedHeightByRowNum=this.options.gridOptions.initFixedHeightByRowNum=-1;var g="position : absolute;";!this.options.gridOptions.width&&this.options.gridOptions.parentWidth?this.options.width=parseInt(this.options.gridOptions.parentWidth,10):this.options.width=parseInt(this.options.gridOptions.width,10),this.options.height=parseInt(this.options.gridOptions.height,10);try{isNaN(this.options.height)&&(this.options.height=20*this.options.gridOptions.visibleRowNum),isNaN(this.options.width)&&(this.options.width=b.D.sum(i)+18)}catch(t){h.w.printStackTrace(t,null,this)}g+=" width : "+this.options.width+"px;",g+=" height : "+this.options.height+"px;",this.options.style=g;var m=[];m.push('<w2:grid xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms" '),m.push('id="'+this.id+'_grid" style="'+this.options.style+'" class="w2gridItemTable_main" readOnly="true" sortable="false" '),m.push('focusMode="row" enterKeyMove="none" rowStatusVisible="'+this.options.rowStatusVisible+'" rowNumVisible="'+this.options.rowNumVisible+'" rowMouseOver="'+this.options.gridOptions.rowMouseOver+'" visibleRowNum="'+this.options.gridOptions.visibleRowNum+'" autoFit="'+this.options.gridOptions.autoFit+'" hideHeader="'+this.options.gridOptions.hideHeader+'" rowMouseOverColor="'+this.options.gridOptions.rowMouseOverColor+'" selectedRowColor="'+this.options.gridOptions.selectedRowColor+'" tooltipDisplay="'+this.options.gridOptions.tooltipDisplay+'" tooltipFormatter="'+this.options.gridOptions.tooltipFormatter+'" tooltipShowAlways="'+this.options.gridOptions.tooltipShowAlways+'" applyAllColumnStyle="'+this.options.gridOptions.applyAllColumnStyle+'" initFixedHeightByRowNum="'+this.options.gridOptions.initFixedHeightByRowNum+'" wheelStop="'+this.options.gridOptions.wheelStop+'">'),m.push('<w2:header style="height:20px;" id="header">'),m.push("<w2:row>");for(s=0;s<this.options.itemsetObj.items.length;s++)m.push('<w2:column inputType="text" style="height:20px;" width="'+i[s]+'" textAlign="'+u[s]+'" id="'+this.id+"_column_header_"+s+'" value="'+(this.options.itemsetObj.items[s].header||"")+'" sortable="false">'),m.push("</w2:column>");m.push("</w2:row>"),m.push("</w2:header>"),m.push('<w2:gBody id="gBody">'),m.push("<w2:row>");for(s=0;s<this.options.itemsetObj.items.length;s++)m.push('<w2:column inputType="text" style="height:20px;" width="'+i[s]+'" textAlign="'+o[s]+'" id="'+this.options.itemsetObj.items[s].id+'" hidden="'+p[s]+'" sortable="false">'),m.push("</w2:column>");m.push("</w2:row>"),m.push("</w2:gBody>"),m.push("</w2:grid>");var f=WebSquare.xml.parse(m.join(""),!0),y=WebSquare.xmljs.xml2json(f).E[0];this.grid=new WebSquare.uiplugin.grid(this.id+"_grid",{},y),this.addControl(this.grid),this.grid.options.isItemTable=!0,this.inputBlurInside=!1}catch(t){h.w.printStackTrace(t,null,this)}},Et.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'"
;return t.push("<div id='"+this.id+"' aria-expanded='true' "+e+" class='w2gridItemTable "+this.options.className+"'>"),t.push(this.grid.toHTML()),t.push("</div>"),t.join("")},Et.prototype.setAction=function(){this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.B.stopPropagation(t)}catch(t){}}))),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,(function(t){try{O.B.stopPropagation(t)}catch(t){}})))},Et.prototype.setFocusedCell=function(t,e){this.inputBlurInside=!0,this.itemTableFocus=!0,this.grid.setFocusedCell(t,e)},Et.prototype.setSelectedIndex=function(t,e){var i=this.grid.getDataLength();if(0!=i){t=t<0?0:t>=i?i-1:t;for(var o=0;o<this.grid._dataList.filteredRowIndexArr.length;o++)if(t==this.grid._dataList.filteredRowIndexArr[o]){t=o;break}var s=this.grid.getVisibleRowNum(),r=t-parseInt(s/2);this.grid.setTopRowIndex(r),e||this.setFocusedCell(t,0)}},Et.prototype.hide=function(){try{this.inputBlurInside=!1,this.itemTableFocus=!1,WebSquare.style.hide(this.render)}catch(t){h.w.printStackTrace(t)}};var Mt=function(t,e,i){rt.s.call(this,t,e,i)};a.x.extend(Mt.prototype,rt.s.prototype),Mt.prototype.defaultOptions={pluginType:"uiplugin.gridViewItemTable",pluginName:"gridViewItemTable"},Mt.prototype.addKeyDownEventListener=function(t){this.keyDownFunc=t},Mt.prototype.addClickEventListener=function(t){this.clickFunc=t},Mt.prototype.initialize=function(t){try{var e=l.v.getConfiguration("/WebSquare/"+this.options.pluginName+"/overrideKey/@value");e&&(this.options.overrideKey=e);var i=[],o=[];this.searchFlag=!1;var s=null;if(this.options.gridViewOptions.dataComp){for(var r=this.options.gridViewOptions.dataComp.cellIdList,a=[],n=0;n<r.length;n++){var d={};d.id=r[n],a.push(d)}var u=this.id+"_searchDataList";0==this.searchFlag&&(WebSquare.api.data.create({id:u,type:"dataList",option:{baseNode:"vactor",repeatNode:"list",valueAttribute:""},columnInfo:a}),this.searchFlag=!0),(s=b.D.getComponentById(u)).setData(this.options.gridViewOptions.dataComp.getAllData())}var c=["font-weight","font-size","font-style","background-color","text-decoration","color"];for(n=0;n<this.options.itemsetObj.items.length;n++)if(this.options.itemsetObj.items[n].style){for(var p=this.options.itemsetObj.items[n].style.split(";"),g=!1,m=!1,f=[],y=0;y<p.length;y++){if("width"==(S=p[y].split(":"))[0].wq_trim())i.push(parseInt(S[1],10)),g=!0;else if("text-align"==S[0].wq_trim())o.push(S[1]),m=!0;else{var v=S[0].wq_trim();c.indexOf(v)>-1&&f.push(p[y])}if(g&&m)break}g||i.push(70),m||o.push("center"),f||(this.options.itemsetObj.items[n].style=f.join(";"))}else i.push(70),o.push("center");var w=[];for(n=0;n<this.options.itemsetObj.items.length;n++)if(this.options.itemsetObj.items[n].headerStyle){for(p=this.options.itemsetObj.items[n].headerStyle.split(";"),f=[],y=0;y<p.length;y++){var S;if("text-align"==(S=p[y].split(":"))[0].wq_trim()){w.push(S[1]);break}v=S[0].wq_trim();c.indexOf(v)>-1&&f.push(p[y])}f||(this.options.itemsetObj.items[n].headerStyle=f.join(";")),y==p.length&&w.push("center")}else w.push("center");var C=[];for(n=0;n<this.options.itemsetObj.items.length;n++){"true"==this.options.itemsetObj.items[n].hidden?C.push("true"):C.push("false")}for(n=0;n<this.options.itemsetObj.items.length;n++)this.options.itemsetObj.items[n].id||(this.options.itemsetObj.items[n].id=this.id+"_column_body_"+n);this.options.gridViewOptions.visibleRowNum||(this.options.gridViewOptions.visibleRowNum=this.options.visibleRowNum),this.options.gridViewOptions.rowNumVisible||(this.options.gridViewOptions.rowNumVisible=!1),this.options.gridViewOptions.wheelStop||(this.options.gridViewOptions.wheelStop=!1),this.options.gridViewOptions.rowStatusVisible||(this.options.gridViewOptions.rowStatusVisible=!1),this.options.gridViewOptions.selectedRowColor||(this.options.gridViewOptions.selectedRowColor=""),
this.options.gridViewOptions.rowMouseOverColor||(this.options.gridViewOptions.rowMouseOverColor=""),this.options.gridViewOptions.tooltipDisplay||(this.options.gridViewOptions.tooltipDisplay=!1),this.options.gridViewOptions.tooltipFormatter||(this.options.gridViewOptions.tooltipFormatter=""),this.options.gridViewOptions.tooltipShowAlways||(this.options.gridViewOptions.tooltipShowAlways=!1),this.options.gridViewOptions.applyAllColumnStyle||(this.options.gridViewOptions.applyAllColumnStyle=!0),this.options.rowNumVisible=this.options.gridViewOptions.rowNumVisible,this.options.rowStatusVisible=this.options.gridViewOptions.rowStatusVisible,this.options.wheelStop=this.options.gridViewOptions.wheelStop,this.options.tooltipDisplay=this.options.gridViewOptions.tooltipDisplay,this.options.tooltipFormatter=this.options.gridViewOptions.tooltipFormatter,this.options.tooltipShowAlways=this.options.gridViewOptions.tooltipShowAlways,this.options.applyAllColumnStyle=this.options.gridViewOptions.applyAllColumnStyle,this.options.initFixedHeightByRowNum=this.options.gridViewOptions.initFixedHeightByRowNum=-1;var x="position : absolute;";!this.options.gridViewOptions.width&&this.options.gridViewOptions.parentWidth?this.options.width=this.options.gridViewOptions.parentWidth:this.options.width=this.options.gridViewOptions.width,this.options.height=this.options.gridViewOptions.height;try{isNaN(parseInt(this.options.height,10))&&(this.options.height=20*this.options.gridViewOptions.visibleRowNum),isNaN(parseInt(this.options.width,10))&&(this.options.width=b.D.sum(i)+18)}catch(t){h.w.printStackTrace(t,null,this)}this.options.width+="",this.options.height+="",x+=" width : "+(-1!==this.options.width.indexOf("%")?this.options.width+";":parseInt(this.options.width,10)+"px;"),x+=" height : "+(-1!==this.options.height.indexOf("%")?this.options.height+";":parseInt(this.options.height,10)+"px;"),this.options.style=x;var _=[];_.push('<w2:gridView xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms" '),_.push('id="'+this.id+'_gridView" style="width:100%; height:100%;" class="w2gridViewItemTable_main" readOnly="false" sortable="false" '),_.push('focusMode="row" enterKeyMove="none" rowStatusVisible="'+this.options.rowStatusVisible+'" rowNumVisible="'+this.options.rowNumVisible+'" rowMouseOver="'+this.options.gridViewOptions.rowMouseOver+'" visibleRowNum="'+this.options.gridViewOptions.visibleRowNum+'" autoFit="'+this.options.gridViewOptions.autoFit+'" hideHeader="'+this.options.gridViewOptions.hideHeader+'" rowMouseOverColor="'+this.options.gridViewOptions.rowMouseOverColor+'" selectedRowColor="'+this.options.gridViewOptions.selectedRowColor+'" tooltipDisplay="'+this.options.gridViewOptions.tooltipDisplay+'" tooltipFormatter="'+this.options.gridViewOptions.tooltipFormatter+'" tooltipShowAlways="'+this.options.gridViewOptions.tooltipShowAlways+'" applyAllColumnStyle="'+this.options.gridViewOptions.applyAllColumnStyle+'" initFixedHeightByRowNum="'+this.options.gridViewOptions.initFixedHeightByRowNum+'" wheelStop="'+this.options.gridViewOptions.wheelStop+'">'),_.push('<w2:header style="height:20px;" id="header">'),_.push("<w2:row>");for(n=0;n<this.options.itemsetObj.items.length;n++){var I=' style="height:20px;';(T=this.options.itemsetObj.items[n]).headerStyle&&(I+=this.options.itemsetObj.items[n].headerStyle),_.push('<w2:column inputType="text"'+I+'" width="'+i[n]+'" textAlign="'+w[n]+'" id="'+this.id+"_column_header_"+n+'" value="'+(this.options.itemsetObj.items[n].header||"")+'">'),_.push("</w2:column>")}_.push("</w2:row>"),_.push("</w2:header>"),_.push('<w2:gBody id="gBody">'),_.push("<w2:row>");for(n=0;n<this.options.itemsetObj.items.length;n++){var T,k="text",D="",L="";(T=this.options.itemsetObj.items[n]).inputType&&(k=T.inputType),T.depthColumn&&(D='" depthColumn = "'+T.depthColumn),T.showDepth&&(L='" showDepth = "'+T.showDepth)
;var W=parseInt(this.options.gridViewOptions.checkColumn)===n&&"checkbox"===k?"false":"true";_.push('<w2:column inputType = "'+k+D+L+'" style="height:20px;'+this.options.itemsetObj.items[n].style+'" width="'+i[n]+'" textAlign="'+o[n]+'" id="'+this.options.itemsetObj.items[n].ref+'" hidden="'+C[n]+'" readOnly="'+W+'" sortable="false">'),_.push("</w2:column>")}_.push("</w2:row>"),_.push("</w2:gBody>"),_.push("</w2:gridView>");var A=WebSquare.xml.parse(_.join(""),!0);this.gridView=new WebSquare.uiplugin.gridView(this.id+"_gridView",{dataList:null==s?"":s.id},new WebSquare.Elem(A.firstChild)),this.gridView.options.isItemTable=!0,this.addControl(this.gridView),this.inputBlurInside=!1,this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"ㅁ",67:"ㅊ",68:"ㅇ",69:"ㄷ",70:"ㄹ",71:"ㅎ",81:"ㅂ",82:"ㄱ",83:"ㄴ",84:"ㅅ",86:"ㅍ",87:"ㅈ",88:"ㅌ",90:"ㅋ"},this.korCharHash2={69:"ㄸ",81:"ㅃ",82:"ㄲ",84:"ㅆ",87:"ㅉ"},this.myhelper=new WebSquare.korHelper}catch(t){h.w.printStackTrace(t,null,this)}},Mt.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' aria-expanded='true' "+e+" class='w2gridItemTable "+this.options.className+" "+this.options.w2table+"'>"),1==this.options.navBtn?(t.push("<div id='"+this.id+"_wrapper' aria-expanded='true' "+e+"' tabIndex='0'>"),t.push(this.gridView.toHTML()),t.push("</div>"),t.push("<div id='"+this.id+"_btn_div' style='' class='w2checkcombobox_btn_div'>"),t.push("</div>")):t.push(this.gridView.toHTML()),t.push("</div>"),t.join("")},Mt.prototype.setAction=function(){this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.B.stopPropagation(t)}catch(t){}}))),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,(function(t){try{O.B.stopPropagation(t)}catch(t){}}))),b.D.isMobile()&&this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.B.stopPropagation(t)}catch(t){}}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))},Mt.prototype.setFocusedCell=function(t,e){this.inputBlurInside=!0,this.options.findItemFirstKey,this.gridView.setFocusedCell(t,e)},Mt.prototype.setSelectedIndex=function(t,e){var i=this.gridView.getDataLength();if(0!=i){this.gridView.getVisibleRowNum();e||this.setFocusedCell(t,this.options.gridViewOptions.label)}},Mt.prototype.getSelectedIndex=function(){try{return this.gridView.getFocusedRowIndex()}catch(t){h.w.printStackTrace(t)}},Mt.prototype.hide=function(){try{this.inputBlurInside=!1,WebSquare.style.hide(this.render)}catch(t){h.w.printStackTrace(t)}},Mt.prototype.finalize=function(){try{this.gridView&&this.gridView._dataList&&WebSquare.DataCollection.api.remove(this.gridView._dataList.id)}catch(t){h.w.printStackTrace(t)}},Mt.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getSelectedIndex();i=parseInt(i);var o=this.gridView.getRowCount();if(38==e)i>0&&this.setSelectedIndex(i-1),this._keyIndex=i-1,this._directionKeyPressed=!0;else if(40==e)i+1<o&&this.setSelectedIndex(i+1),this._keyIndex=i+1,this._directionKeyPressed=!0;else if(32==e){if(this.options.checkbox)document.getElementById(this.id+"_"+i+"_checkbox").click()}else if(33==e){(s=i-this.rowCount)<0&&(s=0),this.setSelectedIndex(s),this._directionKeyPressed=!0}else if(34==e){var s;(s=i+this.rowCount)>=o&&(s=o-1),this.setSelectedIndex(s),this._directionKeyPressed=!0}else 35==e?(this.setSelectedIndex(o-1),
this._directionKeyPressed=!0):36==e?(this.setSelectedIndex(0),this._directionKeyPressed=!0):13==e?this._directionKeyPressed=!1:9==e?"ul"==this.options.tableRender&&(t.shiftKey?i>0?this.setSelectedIndex(i-1):this.endReached=!0:document.activeElement==this.render?this.setSelectedIndex(0):i+1<o?this.setSelectedIndex(i+1):this.endReached=!0):(this.findItemStartedWithKeyChar(t,e,i),this.options.findItem&&this._keyBuffer&&(b.D.clearTimeout(this.id+"_selectKeyBuffer"),b.D.setTimeout((function(){this._keyBuffer=""}),{key:this.id+"_selectKeyBuffer",caller:this,delay:this.options.keyBufferResetTime})));this.render.setAttribute("aria-activedescendant",this.id+"_"+this.getSelectedIndex()),this.keyDownFunc&&this.keyDownFunc(t),O.B.stopEvent(t)}catch(t){h.w.printStackTrace(t)}},Mt.prototype.fireClick=function(t){try{var e,i=this.gridView.getLastFocusedCell();i&&(e=i.focusedRowIndex),this.clickFunc.call(this,t,e)}catch(t){h.w.printStackTrace(t)}},Mt.prototype.findItemStartedWithKeyChar=function(t,e,i){try{var o=this.keyCharHash[e],s=-1;if(o){var r=this.gridView.getLastFocusedCell(),a=r?r.focusedRowIndex:-1;this.options.findItem&&(a=0);var n=this.korCharHash[e],l=this.korCharHash2[e],d=1;this.options.findItem?this._keyBuffer+=o:(this._keyBuffer=o,a++);for(var u=this.gridView.getRowCount();;)if(0!=(a%=u)||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=a&&1!=a||!0!==this.options.chooseOption||!0!==this.options.allOption){var c=this.options.gridViewOptions.label,p=this.gridView.getCellData(a,c).toLowerCase(),g=!1;n&&!t.shiftKey?g=this.myhelper.startWith(p,n):l&&t.shiftKey&&(g=this.myhelper.startWith(p,l));var m=this.options.findItem?this._keyBuffer:o;if(p.startsWith(m)||g&&b.D.getBoolean(this.options.findItemKor)){s=a;break}if(p.startsWith(m)){this._keyBuffer="",s=a;break}if(d>u)break;a++,d++}else{if(u<=2)break;a++}else{if(u<=1)break;a++}s>-1?this.setSelectedIndex(s):this._keyBuffer=""}}catch(t){h.w.printStackTrace(t)}};var qt=__webpack_require__(8510),Rt=__webpack_require__(111),Nt=__webpack_require__(5004),Ft=function(t,e){var i=i||{};this.displayFormat="yyyyMMdd",this.dayStrArr=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],this.monthDays=[31,28,31,30,31,30,31,31,30,31,30,31],this.year=null,this.month=null,this.date=null,this.day=null,this.hour=null,this.minute=null,this.second=null,this.useUnlimitedYear=i.useUnlimitedYear,this.maxYear=i.maxYear,this.setToday(t,e)};Ft.prototype.setToday=function(t,e){if(t&&1==t){var i,o=this._getServerDate(e);if(o){var s="",r="",a="";8==o.length&&(s=o.substr(0,4),r=o.substr(4,2),a=o.substr(6,2)),i=new Date(parseInt(s),parseInt(r,10)-1,parseInt(a,10))}else i=new Date}else i=new Date;this.year=i.getFullYear(),this.month=i.getMonth()+1,this.date=i.getDate(),this.hour=i.getHours(),this.minute=i.getMinutes(),this.second=i.getSeconds()},Ft.prototype.setYear=function(t){this.year=parseInt(t)},Ft.prototype.setMonth=function(t){this.month=parseInt(t)},Ft.prototype.setDate=function(t){this.date=parseInt(t)},Ft.prototype.setDateAll=function(t,e,i,o,s,r){if(t&&this.setYear(t),t&&e)if(o){s=s||0;var a=new Date(parseInt(t),parseInt(e)-1,parseInt(i),parseInt(o),parseInt(s));this.year=a.getFullYear(),this.month=a.getMonth()+1,this.date=a.getDate(),this.hour=a.getHours(),this.minute=a.getMinutes(),r&&(a=new Date(parseInt(t),parseInt(e)-1,parseInt(i),parseInt(o),parseInt(s),parseInt(r)),this.year=a.getFullYear(),this.month=a.getMonth()+1,this.date=a.getDate(),this.hour=a.getHours(),this.minute=a.getMinutes(),this.second=a.getSeconds())}else if(i){a=new Date(parseInt(t),parseInt(e)-1,parseInt(i));this.year=a.getFullYear(),this.month=a.getMonth()+1,this.date=a.getDate()}else{a=new Date(parseInt(t),parseInt(e)-1);this.year=a.getFullYear(),this.month=a.getMonth()+1}},Ft.prototype.setDateAllByString=function(t){if(t&&8==t.length){var e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),this.setDateAll(e,s,r)
}else if(t&&12==t.length){e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),"0"==(a=t.substr(8,2)).charAt(0)&&(a=a.charAt(1)),"0"==(i=t.substr(10,2)).charAt(0)&&(i=i.charAt(1)),this.setDateAll(e,s,r,a,i)}else if(t&&6==t.length){e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),this.setDateAll(e,s)}else if(t&&14==t.length){var i;e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),"0"==(a=t.substr(8,2)).charAt(0)&&(a=a.charAt(1)),"0"==(i=t.substr(10,2)).charAt(0)&&(i=i.charAt(1));var o=t.substr(12,2);"0"==o.charAt(0)&&(o=o.charAt(1)),this.setDateAll(e,s,r,a,i,o)}else if(t&&10==t.length){var s,r,a;e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),"0"==(a=t.substr(8,2)).charAt(0)&&(a=a.charAt(1)),this.setDateAll(e,s,r,a)}else t&&4==t.length&&this.setYear(t)},Ft.prototype.getYear=function(){return this.year},Ft.prototype.getMonth=function(){return this.month},Ft.prototype.getDate=function(){return this.date},Ft.prototype.getHour=function(){return this.hour},Ft.prototype.getMinute=function(){return this.minute},Ft.prototype.getSecond=function(){return this.second},Ft.prototype.getDateAll=function(){var t=this.year+"",e=this.month+"",i=this.date+"";return 1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),t+e+i},Ft.prototype.getFormatDateAll=function(t){var e="";e=t&&""!=t?t:this.displayFormat;var i=this.getDateAll();return i=WebSquare.text.formatDate(i,e)},Ft.prototype.getDay=function(){var t=new Date(parseInt(this.year),parseInt(this.month)-1,parseInt(this.date));return this.day=t.getDay(),this.day},Ft.prototype.getDayStr=function(t,e){return(e=e||this.dayStrArr)[t]?e[t]:""},Ft.prototype.getMonthCount=function(t,e){t=t||this.getYear(),e=e||this.getMonth();return this.setLeapYear(t),this.monthDays[e-1]},Ft.prototype.getFirstDay=function(){var t=new WebSquare.uiplugin.dateHelper;return t.setDateAll(this.getYear(),this.getMonth(),1),t.getDay()},Ft.prototype.getFirstDayStr=function(t){var e=new WebSquare.uiplugin.dateHelper;return e.setDateAll(this.getYear(),this.getMonth(),1),e.getDayStr(t)},Ft.prototype.setLeapYear=function(t){this.monthDays[1]=(t%4||!(t%100))&&t%400?28:29},Ft.prototype.getLeapYear=function(t){return!(t%4)&&t%100||!(t%400)},Ft.prototype.equals=function(t){return this.getYear()==t.getYear()&&this.getMonth()==t.getMonth()&&this.getDate()==t.getDate()},Ft.prototype.setNextYear=function(){var t=this.getYear();this.useUnlimitedYear&&t==this.maxYear?this.setYear("9999"):this.setYear(t+1),this._checkValidDate()},Ft.prototype.setLastYear=function(){var t=this.getYear();this.useUnlimitedYear&&"9999"==t?this.setYear(this.maxYear):this.setYear(t-1),this._checkValidDate()},Ft.prototype.setNextMonth=function(){var t=this.getYear(),e=this.getMonth();e<12?this.setMonth(e+1):(this.useUnlimitedYear&&t==this.maxYear?this.setYear("9999"):this.setYear(t+1),this.setMonth(1)),this._checkValidDate()},Ft.prototype.setLastMonth=function(){var t=this.getYear(),e=this.getMonth();e>1?this.setMonth(e-1):(this.useUnlimitedYear&&"9999"==t?this.setYear(this.maxYear):this.setYear(t-1),this.setMonth(12)),this._checkValidDate()},Ft.prototype._checkValidDate=function(){var t=this.getDate(),e=this.getMonthCount();t>e&&this.setDate(e)},Ft.prototype.getServerDate=function(t){return WebSquare.date.getCurrentServerDate(t)},Ft.prototype._getServerDate=function(t){try{var e,i="";return t||(t="wq_main"),null==WebSquare.uiplugin.dateHelper._currentDate?WebSquare.uiplugin.dateHelper._currentDate={}:e=WebSquare.uiplugin.dateHelper._currentDate[t],"string"==typeof e&&8===e.length?i=WebSquare.uiplugin.dateHelper._currentDate[t]:(i=this.getServerDate(),WebSquare.uiplugin.dateHelper._currentDate[t]=i),i}catch(t){h.w.printStackTrace(t,null,this)}}
;var Ot=__webpack_require__(5131),Bt=__webpack_require__(897),Vt=__webpack_require__(7624),Ht=__webpack_require__(2036),Pt=__webpack_require__(4972),jt=__webpack_require__(8736),zt=__webpack_require__(9473),Gt=__webpack_require__(463),Ut=__webpack_require__(3921),Xt=__webpack_require__(6495),Kt=__webpack_require__(2105),$t=__webpack_require__(9479),Yt=__webpack_require__(9488),Zt=__webpack_require__(8491),Jt=__webpack_require__(4782),Qt=__webpack_require__(9954),te=__webpack_require__(2006),ee=__webpack_require__(9461),ie=__webpack_require__(3418),oe=__webpack_require__(1729),se=__webpack_require__(6138),re=function(t,e,i){if(this.parentControl=null,this.childControlList=[],this.element=i,this.options={},1==i.nodeType){this.id=i.getAttribute("id"),this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.element._element.A||(this.element._element.A={}),this.element.setAttribute("id",this.uuid),this.id=this.uuid,this.options.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid;var o=b.D.getBoolean(l.v.getConfiguration("/WebSquare/parseHtml/@value")||"true");this.options.parseChild="w2:tag"==this.element.getTagName()||o}this.refreshAdaptive=se.i.prototype.refreshAdaptive};a.x.extend(re.prototype,oe.$.prototype),re.idCounter=0,re.prototype.toHTML=function(){var t=this.element.getTagName(),e=l.v.getEmptyTag(),i=null;if("w2:tag"==t?i=this.setTag():"td"==t&&this.setTd(),this.options.parseChild&&!e[t.toLowerCase()]){var o,s=this.element.getAttributes();if(1==this.element.nodeType)if("w2:tag"!=t){for(var r="<"+t,a=0;a<s.length;a++)r+=" "+s[a]+"='"+this.element.getAttribute(s[a])+"'";r+=">";var n=this.element.getChildNodes()[0];null!=n&&3==n.nodeType&&(r+=n.getNodeValue())}else r=i,t=this.element.getAttribute("tagname")||"div";o="</"+t+">";var h=[r];if(0==r.toLowerCase().wq_trim().indexOf("<script ")){var d=this.setScript();0!=d&&h.push(d)}else{var u=this.getChildren();for(a=0;a<u.length;a++)h.push(u[a].toHTML())}return h.push(o),h.join("")}s=this.element.getAttributes();i="<"+t+" xmlns='"+l.v._XML_NAMESPACE.XHTML+"' ";for(a=0;a<s.length;a++)i+=s[a]+"="+this.element.getAttribute(s[a])+" ";return i+="/>",this.options.parseChild&&(i.endsWith("/>")||((i=i.substring(0,i.indexOf(">"))).endsWith(" ")?i+="/>":i+=" />")),3==this.element.nodeType?this.element.getNodeValue():i},re.prototype.setTag=function(){try{var t=null,e=this.element.getAttribute("tagname")||"div";if(this.element.getAttribute("tagname")){this.element.removeAttribute("tagname");var i=this.element.getAttributes();t="<"+e+" xmlns:w2='"+l.v._XML_NAMESPACE.W2+"' ";for(var o=0;o<i.length;o++)t+=i[o]+"='"+this.element.getAttribute(i[o])+"' ";this.element.setAttribute("tagname",e)}else{i=this.element.getAttributes();t="<div xmlns:w2='"+l.v._XML_NAMESPACE.W2+"' ";for(o=0;o<i.length;o++)t+=i[o]+"='"+this.element.getAttribute(i[o])+"' "}return t+=">",this.options.parseChild&&!this.id&&(this.id="w2tag_"+re.idCounter++,this.element.setAttribute("id",this.id)),t}catch(t){h.w.printStackTrace(t,null,this)}},re.prototype.setScript=function(){try{var t=this.getParentNode(),e=t&&t.getTagName()||"";if(!(e.indexOf("xf")<0&&e.indexOf("w2")<0))return!1;var i=this.element.getChildNodes()[0]||{};if(3===i.nodeType||4===i.nodeType){var o=i.getNodeValue(),s=WebSquare.idCache[this.parentFrame];return o=s?b.D.scopingFuncBody(o,s.id,!0):b.D.scopingFuncBody(o,null,!0),"executed"===WebSquare.scriptSectionExcuteFlag||"preExecuted"===WebSquare.scriptSectionExcuteFlag?WebSquare.BootLoader.globalEval(o):WebSquare.scriptSection+=";"+o,o}}catch(t){h.w.printStackTrace(t,null,this)}},re.prototype.setTd=function(){try{for(var t=this.element.getAttribute("id"),e=this.getSiblingNodes(),i=null,o=0;o<e.length;o++)e[o].getAttribute("id")==t&&(i=o-1);var s=null;i>-1?"th"==e[i].getTagName()&&null!=e[i]._element.E&&(s=e[i].getChildNodes()[0]):i+=1,null!=s&&s.getTagName;var r=(null==s?e[i].getNodeValue():"w2:textbox"==s.getTagName()?s.getAttribute("label"):s.getNodeValue())||""
;this.element.setAttribute("data-title",r)}catch(t){h.w.printStackTrace(t,null,this)}},re.prototype.activate=function(){if(this.options.parseChild){for(var t=this.getChildren(),e=0;e<t.length;e++)t[e].activate();if("td"==this.element.getTagName()){var i=this.element.getAttribute("id"),o=this.getSiblingNodes(),s=null;for(e=0;e<o.length;e++)if(o[e].getAttribute("id")==i){s=e-1;break}s>-1?"th"!=o[s].getLocalName()&&this.addClass(" w2tb_noTH"):this.addClass(" w2tb_noTH")}}},re.prototype.setAction=function(){},re.prototype.remove=function(){try{for(var t in this.destroy(),WebSquare.removeNode(this.render),window[this.id]&&(window[this.id]=null),WebSquare.getBody().childControlList)WebSquare.getBody().childControlList[t]==this&&WebSquare.getBody().childControlList.splice(t,1);for(var t in this)delete this[t]}catch(t){h.w.printStackTrace(t,null,this)}},re.prototype.setAdaptive=function(){try{var t=WebSquare.BootLoader.fullViewed||!1,e=b.D.fullViewed||!1;if(!t&&!e){var i=parseInt(this.element.getAttribute("adaptiveThreshold"))||480;b.D.isIE()&&parseInt(l.v.browserVersion(),10)<10||(parseInt(top.document.documentElement.clientWidth||top.document.body.clientWidth)<=i?this.addAdaptive():this.removeAdaptive())}}catch(t){h.w.printStackTrace(t)}},re.prototype.addAdaptive=function(){try{if(!(b.D.isIE()&&parseInt(l.v.browserVersion(),10)<10)){var t,e=this.element.getAttribute("adaptive");"layout"==e?t=" w2tb_adaptive_layout":"crosstab"==e&&(t=" w2tb_adaptive_crosstab"),this.addClass(t),this.removeAdaptiveHeight(e),this.setAdaptiveHeight(e)}}catch(t){h.w.printStackTrace(t)}},re.prototype.removeAdaptive=function(){try{if(!(b.D.isIE()&&parseInt(l.v.browserVersion(),10)<10)){var t,e=this.element.getAttribute("adaptive");"layout"==e?t=" w2tb_adaptive_layout":"crosstab"==e&&(t=" w2tb_adaptive_crosstab"),this.removeClass(t),this.removeAdaptiveHeight(e)}}catch(t){h.w.printStackTrace(t)}},re.prototype.addClass=function(t){try{for(var e=document.getElementById(this.id).className.wq_trim(),i=e.split(" "),o=0;o<i.length;o++){if((" "+i[o].wq_trim()+" ").indexOf(t)>-1&&o==i.length-1)return}i.length>1&&(e+=" "),e+=t,document.getElementById(this.id).className=e}catch(t){h.w.printStackTrace(t)}},re.prototype.removeClass=function(t){try{for(var e=document.getElementById(this.id).className.split(" "),i=[],o=0;o<e.length;o++){var s=e[o].wq_trim();(" "+s+" ").indexOf(t)>-1||s.length>0&&i.push(s)}document.getElementById(this.id).className=i.join(" ")}catch(t){h.w.printStackTrace(t)}},re.prototype.setDisabled=function(t){for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];i&&WebSquare.idCache[i.uuid]&&"function"==typeof i.setDisabled&&i.setDisabled(t)}},re.prototype.finalize=function(){},re.prototype.setAdaptiveHeight=function(t){try{if("crosstab"==t)for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=document.getElementById(this.id).getElementsByTagName("tbody")[0].getElementsByClassName("w2tb_tr"),o=document.getElementById(e[0].id),s=parseInt(WebSquare.style.getStyle(o,"padding-top")),r=parseInt(WebSquare.style.getStyle(o,"padding-bottom")),a=document.getElementById(document.getElementById(this.id).getElementsByClassName("w2tb_td")[0].id),n=parseInt(WebSquare.style.getStyle(a,"padding-top")),l=parseInt(WebSquare.style.getStyle(a,"padding-bottom")),d=0;d<e.length;d++){for(var u=e[d].offsetHeight,c=0,p=0;p<i.length;p++)for(var g=i[p].getElementsByClassName("w2tb_td"),m=0;m<g.length;m++){var f=g[d].offsetHeight;c=c>=f?c:f}if(u>c)for(var y=0;y<i.length;y++){g=i[y].getElementsByClassName("w2tb_td");document.getElementById(g[d].id).style.height=u-(n+l+1)+"px"}else if(u<c){document.getElementById(e[d].id).style.height=c-(s+r+1)+"px";for(y=0;y<i.length;y++){g=i[y].getElementsByClassName("w2tb_td");document.getElementById(g[d].id).style.height=c-(s+r+1)+"px"}}}else if("layout"==t)for(g=document.getElementById(this.id).getElementsByClassName("w2tb_td"),d=0;d<g.length;d++){var v=g[d].getAttribute("data-title");if(v){
var w=b.D.getRulerSpan();w.style.padding=window.getComputedStyle(g[d],":before").getPropertyValue("padding"),w.style.width=window.getComputedStyle(g[d],":before").getPropertyValue("width"),w.style["white-space"]=window.getComputedStyle(g[d],":before").getPropertyValue("white-space"),w.style["font-weight"]=window.getComputedStyle(g[d],":before").getPropertyValue("font-weight"),w.innerHTML=v,w.offsetHeight>g[d].offsetHeight&&(g[d].style.height=w.offsetHeight+"px"),w.style.top="-10000px",w.style.left="-10000px",w.style.visibility="hidden"}}}catch(t){h.w.printStackTrace(t)}},re.prototype.removeAdaptiveHeight=function(t){try{if("crosstab"==t){for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<e.length;o++)e[o].style.removeProperty("height");for(var s=0;s<i.length;s++)i[s].style.removeProperty("height")}else if("layout"==t)for(i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<i.length;o++)i[o].style.removeProperty("height")}catch(t){h.w.printStackTrace(t)}},re.prototype.onComplete=function(){if(this.completed)$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id);else{var t=this.childControlList;"wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName||null==t[0]||(t=[]);for(var e=0;e<t.length;e++)t[e].completed||"function"!=typeof t[e].onComplete||t[e].onComplete();if(this.completed=!0,!(b.D.isIE()&&parseInt(l.v.browserVersion(),10)<10)&&3!==this.element.nodeType){var i=this.element.getAttribute("adaptive");if("crosstab"==i||"layout"==i){var o=document.getElementById(this.id).getElementsByTagName("tr");for(e=0;e<o.length;e++){var s=o[e].className;-1==s.indexOf("w2selectbox_row")&&-1==s.indexOf("w2checkcombobox_row")&&-1==s.indexOf("w2tb_tr")&&(o[e].className=s+" w2tb_tr")}var r=WebSquare.BootLoader.fullViewed||!1,a=b.D.fullViewed||!1;r||a||(this.setAdaptive(),O.B.addListener(window,"onresize",O.B.bindAsEventListener(this,this.setAdaptive)));var n=document.getElementById(this.id).getElementsByClassName("w2inputCalendar_div");for(e=0;e<n.length;e++){var h=n[e].id;b.D.getComponentById(h).setSetting()}}}}},re.prototype._clone=function(t){try{var e=b.D._copyOptions(this.options);e.id=t.getAttribute("id")||null,e.g_index=t.getAttribute("g_index");var i=WebSquare.controlFactory.create(null,e,t,this.scope_obj,this.parentFrame,!1);return i.attributes=this.attributes,i.getAttributeNode=this.getAttributeNode,i.setAttributeNode=this.setAttributeNode,i.removeAttributeNode=this.removeAttributeNode,i}catch(t){h.w.printStackTrace(t,null,this)}},re.prototype._cloneRecursive=function(t){try{if(!t)return;return this._clone(t)}catch(t){h.w.printStackTrace(t,null,this)}},re.prototype.getParentNode=function(){try{if(this.parentControl&&this.parentControl.element&&this.parentControl.element.constructor===WebSquare.Elem)return this.parentControl.element}catch(t){h.w.printStackTrace(t,null,this)}},re.prototype.getSiblingNodes=function(){try{var t=[],e=this.getParentNode();return e&&(t=e.getChildNodes()),t}catch(t){h.w.printStackTrace(t,null,this)}};var ae=__webpack_require__(690),ne=__webpack_require__(6093),le=__webpack_require__(7565),he=__webpack_require__(3290),de=__webpack_require__(6280),ue=__webpack_require__(1451),ce=function(t){if(null==t.id||(this.id=t.id,null==window[WebSquare.noConflict].comp[this.id])){this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[this.id]=this,window[WebSquare.noConflict].comp[this.id]=this,this.scope_obj=WebSquare.idCache[t.scope_uuid],null!=this.scope_obj&&(this.org_id=t.org_id,this.scope_id=this.scope_obj.id,this.scope_obj.scope||(this.scope_obj.scope={}),this.scope_obj.scope[this.org_id]=this);var e={};if(null!=t.data){var i={}
;for(var o in t.data)"ev:"==o.slice(0,3)?e[o]=t.data[o]:"className"===o?e.className=t.data[o]:"style"===o?e.style=t.data[o]:"id"!==o&&(i[o]=t.data[o]);e.dataObject={type:"json",name:"param",data:i}}e.scope=!0,e.udc2Name=t.tagName||"",e.preload=!0,t.src&&(e.src=t.src),t.msaName&&(e.msaName=t.msaName),e._scope_obj_uuid=t.scope_uuid,e.pluginName="udc2",this._wqContent=new WebSquare.uiplugin.wframe("",e),this._wqContent._isUDC2=!0,this._wqContent.parentFrame=t.parentFrame,this._reservedName={property:["id","org_id","uuid","_wqContent","_reservedName"],function:["toHTML","preActivate","activate","remove","onComplete"]},this._defaultFunc=["bind","unbind","trigger","show","hide","setDisabled","setReadOnly","getDisabled","getReadOnly","getChildren"];for(var s=this._reservedName.function.concat(this._defaultFunc),r=0;r<s.length;r++){var a=s[r];this[a]=function(t){return function(){return this._wqContent[t]()}}(a)}}};ce.prototype.initAsync=(0,g.Z)(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._wqContent.makeFrameUDC2(this);case 2:case"end":return t.stop()}}),t,this)})));var pe=function(t,e,i){this.id=t,this.options=e,this.element=i};a.x.extend(pe.prototype,rt.s.prototype),pe.prototype._initImport=function(){var t=a.x.UUIDPrefix,e=a.x.UUID;a.x.UUIDPrefix="wq_popup",rt.s.call(this,this.id,this.options,this.element),a.x.UUIDPrefix=t,a.x.UUID=e},a.x._initImportList.push("uiplugin.popup"),pe.prototype.defaultOptions={pluginType:"uiplugin.popup",pluginName:"popup",useConfig:!0,popupName:""},pe.prototype.initialize=function(t){try{this.popupList=[],this.popupParams={},this._zIndex=-1,this._status="idle"}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.toHTML=function(){try{return""}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.setAction=function(){},pe.prototype.createPopup=function(t,e,i,o,s,r,a,n,l,d,u,c,p,g,m,f){try{this.openPopup(a,{id:t,type:e,popupName:i,style:o,useIFrame:s,modal:r,srcORurl:a,srcData:n,destData:l,xml:d,popupUrl:u||"popup.html",dataObject:c,frameMode:p||"iframe",useATagBtn:g,disableCloseButton:m,alwaysOnTop:f})}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.openPopup=function(t,e,i,o){try{"iframePopup"==e.type?(e.type="litewindow",e.frameMode="iframe"):"wframePopup"==e.type?(e.type="litewindow",e.frameMode="wframe"):"browserPopup"==e.type&&(e.type="browser"),e.id&&e.scope_uuid&&WebSquare.idCache[e.scope_uuid]&&(e.org_id=e.id,e.id=WebSquare.idCache[e.scope_uuid].id+"_"+e.org_id);var s=b.D.getBoolean(l.v.getConfiguration("/WebSquare/popup/denyConflictPopupId/@value"));if(e.useIFrame+""=="true"&&"browser"!=e.type||!0===s&&"litewindow"==e.type){if(window[e.id])return;window[e.id]=e.id}if("iframe"!==e.frameMode||WebSquare.uiplugin.iframe)this._openPopupAfter(t,e,i,o);else requires("uiplugin.iframe").then(function(t,e,i,o,s){return function(r,a){t._openPopupAfter(e,i,o,s)}}(this,t,e,i,o))}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype._openPopupAfter=function(t,e,i,o){try{var s=new WebSquare.uiplugin.popupWindow(e.id,e,i);t=WebSquare.BootLoader._getEncodeURL(t),s.open(t,o),this.startChkModalClosed(),b.D.setInterval(this.startChkModalClosed,{key:this.id+"_startChkModalClosed",caller:this,delay:500})}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.getPopupParam=function(){try{var t=WebSquare.net.getParameter("popupID"),e=l.v._getParentObj();if(e&&e.WebSquare.dataObject[t]){var i=e.WebSquare.dataObject[t].name;if(WebSquare.userData[i])return l.v.isXML(WebSquare.userData[i])?WebSquare.xml.serialize(WebSquare.userData[i]):JSON.stringify(WebSquare.userData[i])}else if(null!=WebSquare.net.getParameter("idx")&&""!=WebSquare.net.getParameter("idx")){var o=WebSquare.net.getParameter("idx");return e.WebSquare.uiplugin.popup.popupParams[o]}return null}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.callClose=function(t,e){try{
for(var i=0;i<this.popupList.length;i++)this.popupList[i]&&this.popupList[i].id==t&&!1!==this.popupList[i].close(e)&&("browser"===this.popupList[i].options.type&&WebSquare.getBody().hideModal(!1,this.popupList[i].id),this._deletePopup(i))}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.removeFromPopupList=function(t){try{for(var e=0;e<this.popupList.length;e++)this.popupList[e]&&this.popupList[e].id==t&&this._deletePopup(e)}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.startChkModalClosed=function(){try{for(var t=!1,e=0;e<this.popupList.length;e++)if(this.popupList[e]&&(t=!0),this.popupList[e]&&this.popupList[e].popupWin&&this.popupList[e].popupWin.closed){if(this.popupList[e]._parentFrameUUID&&this.popupList[e]._parentFrameUUID!==(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")){var i=WebSquare.idCache[this.popupList[e]._parentFrameUUID];if(i&&i.hideFrameModal(this.popupList[e].id),this.popupList[e].useWindowPopup()){var o=WebSquare.idCache[this.popupList[e].options.scope_uuid];if(o&&o.popupList)for(var s=0;s<o.popupList.length;s++)o.popupList[s].id===this.popupList[e].id&&o.popupList.splice(s)}}else WebSquare.getBody().hideModal(!1,this.popupList[e].id);this._deletePopup(e)}!1===t&&b.D.clearInterval(this.id+"_startChkModalClosed")}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.getPopupWindow=function(t,e){try{if(e&&WebSquare.idCache[e])return this.getPopupWindow(WebSquare.idCache[e].id+"_"+t)||this.getPopupWindow(t);for(var i=0;i<this.popupList.length;i++)if(this.popupList[i]&&this.popupList[i].id==t&&null!=this.popupList[i].popupWin)return this.popupList[i].getWindow()}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.getPopupWindowList=function(t,e){try{var i=[];if(e&&WebSquare.idCache[e]){for(var o=WebSquare.idCache[e].id,s=0;s<this.popupList.length;s++){var r=this.popupList[s].popupWin;this.popupList[s]&&null!=r&&(!0===t?this.popupList[s].options.frameModal&&(i.push(this.popupList[s].getWindow()),r.opener&&r.WebSquare.uiplugin.popup&&(i=i.concat(r.WebSquare.uiplugin.popup.getPopupWindowList()))):o===r.scope_id&&i.push(this.popupList[s].getWindow()))}return i}for(s=0;s<this.popupList.length;s++){r=this.popupList[s].popupWin;this.popupList[s]&&null!=r&&(!0===t?this.popupList[s].options.frameModal&&(i.push(this.popupList[s].getWindow()),r.opener&&r.WebSquare.uiplugin.popup&&(i=i.push(r.WebSquare.uiplugin.popup.getPopupWindowList()))):i.push(this.popupList[s].getWindow()))}return i}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.getPopup=function(t,e){try{if(e&&WebSquare.idCache[e])return this.getPopup(WebSquare.idCache[e].id+"_"+t)||this.getPopup(t);for(var i=0;i<this.popupList.length;i++)if(this.popupList[i]&&this.popupList[i].id==t)return this.popupList[i]}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype._deletePopup=function(t){try{var e=this.popupList[t]._idx;if(e&&(delete this.popupList[t]._idx,l.v.setTimer((function(t){delete WebSquare.uiplugin.popup.popupParams[e]}),{key:"_deletePopup_"+e,delay:1e3,args:[e]})),this.popupList[t].useWindowPopup()){var i=WebSquare.idCache[this.popupList[t].options.scope_uuid];if(i&&i.popupList)for(var o=0;o<i.popupList.length;o++)i.popupList[o].id===this.popupList[t].id&&i.popupList.splice(o)}this.popupList.splice(t,1)}catch(t){h.w.printStackTrace(t,null,this)}},pe.prototype.getPopupList=function(t,e){try{var i=[];if(e&&WebSquare.idCache[e]){for(var o=WebSquare.idCache[e].id,s=0;s<this.popupList.length;s++){var r=this.popupList[s].popupWin,a=this.popupList[s]._getTargetFrame(this.popupList[s].options.scope_uuid);this.popupList[s]&&null!=r&&(!0===t?(this.popupList[s].options.frameModal||a)&&(i.push(this.popupList[s]),r.opener&&r.WebSquare.uiplugin.popup&&(i=i.concat(r.WebSquare.uiplugin.popup.getPopupList()))):o===r.scope_id&&i.push(this.popupList[s]))}return i}for(s=0;s<this.popupList.length;s++){r=this.popupList[s].popupWin,a=this.popupList[s]._getTargetFrame(this.popupList[s].options.scope_uuid)
;this.popupList[s]&&null!=r&&(!0===t?(this.popupList[s].options.frameModal||a)&&(i.push(this.popupList[s]),r.opener&&r.WebSquare.uiplugin&&r.WebSquare.uiplugin.popup&&(i=i.concat(r.WebSquare.uiplugin.popup.getPopupList()))):i.push(this.popupList[s]))}return i}catch(t){h.w.printStackTrace(t,null,this)}},pe=new pe("w2popup_singleton");var ge=function(t,e,i){try{this.id=t,this.popupWin=null,this.options=a.x.extendKeepingType({id:"pop1",type:"browser",popupName:"WebSquarePopup",style:"",useIFrame:!1,className:"",modal:!1,srcORurl:"",srcData:null,destData:null,xml:null,popupUrl:"popup.html",left:100,top:100,width:500,height:500,resizable:!1,status:!1,menubar:!1,scrollbars:!1,title:!1,useControl:!1,controls:{minimize:!0,maximize:!0,close:!0},frameMode:"iframe",disableCloseButton:!1,fullscreen:!1,alwaysOnTop:!0,foldSize:{width:500},windowDragMove:!1,windowMoveType:"restrict",processMsgFrame:!1},e||{}),this.options.scope_uuid&&WebSquare.idCache[this.options.scope_uuid]&&(this.options.org_id?this.org_id=this.options.org_id:(this.org_id=this.id,this.id=this.options.id=WebSquare.idCache[this.options.scope_uuid].id+"_"+this.org_id)),this.params=i||{},""!=this.options.style&&(this.options.styleObj=l.v.makeStyle(this.options.style),this.options.left=this.options.styleObj.left||"0px",this.options.top=this.options.styleObj.top||"0px",this.options.width=this.options.styleObj.width||"500px",this.options.height=this.options.styleObj.height||"500px"),this.options.dataObject&&"wframe"!==this.options.frameMode&&(WebSquare.dataObject[this.id]=this.options.dataObject),this.options.srcData&&(WebSquare.srcData=this.options.srcData),this.options.destData&&(WebSquare.destData=this.options.destData),WebSquare.docTitleInfo||(WebSquare.docTitleInfo={}),"WebSquarePopup"!=this.options.popupName?WebSquare.docTitleInfo[this.options.id]=this.options.popupName:WebSquare.uiplugin.popup.options.title?WebSquare.docTitleInfo[this.options.id]=WebSquare.uiplugin.popup.options.title:WebSquare.docTitleInfo[this.options.id]=this.options.popupName}catch(t){h.w.printStackTrace(t,null,this)}};ge.prototype.open=function(t,e){try{var i=this.useWindowPopup();this._compModal=!1;var o,s=!1,r=WebSquare.idCache[this.options.scope_uuid],n=r,d=(this.options.frameModal,WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:""),u=WebSquare.getBody();if(u.modal&&"block"===u.modal.style.display&&(s=!0,this._alreadyDisplayedModal=!0),d!==this.options.scope_uuid){if(!1===s)if(this.options.frameModal){var c,p;switch((c=this._getModalOpendFrame(r))&&(p=c.uuid),this.options.frameModal){case"frame":r&&d!==r.uuid?(o=r,o=this._getModalTargetFrame(o.uuid,this.options.frameModal,p)):o=null;break;case"parent":o=d!==r.parentFrame?WebSquare.idCache[r.parentFrame]:r,o=this._getModalTargetFrame(o.uuid,this.options.frameModal,p);break;case"top":o=null;break;default:o=this._getModalTargetFrame(r.uuid,this.options.frameModal,p)}o&&(this._targetFrameObjUUID=o.uuid)}else(o=this._getTargetFrame(this.options.scope_uuid))&&("tabControl"===o.parentControl.options.pluginName||"windowContainer"===o.parentControl.options.pluginName?this.options.frameModal=o.parentControl.org_id:this.options.frameModal=o.org_id,this._targetFrameObjUUID=o.uuid);o?(this._compModal=!0,!0===this.options.modal&&(o._modal=!0),i&&(n.popupList||(n.popupList=[]),this._parentFrameUUID=o.uuid,n._parentFrameUUID=o.uuid,n.popupList.push(this))):(s=!0,this._bodyShowModal())}else s=!0,this._bodyShowModal();var g="w2xPath";b.D.getEncodeParameterOption("pathName")?g=b.D.getEncodeParameterOption("pathName"):b.D.isEncodeParameter()&&(g=b.D.encodeParameter("w2xPath"));var m=this.options.popupUrl;this.options.xml&&"string"!=typeof this.options.xml&&(this.options.xml=WebSquare.xml.serialize(this.options.xml));var f="";if("wframe"!==this.options.frameMode||i)if(0==this.options.useQueryString){WebSquare._popupInfo="";var y={};if(t)if(m=a.x.baseURI+m+(m.indexOf("?")>-1?"&":"?"),b.D.isEncodeParameter())if(b.D.getEncodeParameterOption("onlyParam")){
for(var v=t.split(/[\&\?]/),w=0;w<v.length;w++)(S=v[w].indexOf("="))>=0&&(v[w]=b.D.encodeParameter(v[w].substring(0,S))+v[w].substring(S));t=v.join("&"),m=m+g+"="+l.v.getURL(t)}else m=m+g+"="+b.D.encodeParameter(l.v.getURL(t));else m=m+g+"="+l.v.getURL(t);this.options.xml&&(f="idx10_"+(new Date).getTime()+1e4*Math.random(),WebSquare.uiplugin.popup.popupParams[f]=this.options.xml,y.idx=this.idx),y.popupID=this.id,y.w2xHome=WebSquare.w2xHome,y.w2xDocumentRoot=WebSquare.w2xDocumentRoot+this._getW2Config(),WebSquare._popupInfo=JSON.stringify(y)}else{if(t){if(m=a.x.baseURI+m+(m.indexOf("?")>-1?"&":"?"),b.D.getEncodeParameterOption("onlyParam")){var S;for(v=t.split(/[\&\?]/),w=0;w<v.length;w++)(S=v[w].indexOf("="))>=0&&(v[w]=b.D.encodeParameter(v[w].substring(0,S))+v[w].substring(S));t=v.join("&")}m=b.D.isEncodeParameter()?b.D.getEncodeParameterOption("onlyParam")?m+g+"="+l.v.getURL(t)+"&":m+g+"="+b.D.encodeParameter(l.v.getURL(t)+"&"):m+g+"="+l.v.getURL(t)+"&"}else m+=m.indexOf("?")>-1?"&":"?";this.options.xml?(f="idx10_"+(new Date).getTime()+1e4*Math.random(),WebSquare.uiplugin.popup.popupParams[f]=this.options.xml,b.D.isEncodeParameter()?b.D.getEncodeParameterOption("onlyParam")?(m=m+b.D.encodeParameter("popupID=")+this.id,m+=b.D.encodeParameter("&idx=")+f,m+=b.D.encodeParameter("&w2xHome=")+WebSquare.w2xHome,m+=b.D.encodeParameter("&w2xDocumentRoot=")+WebSquare.w2xDocumentRoot+this._getW2Config()):m+=b.D.encodeParameter("popupID="+this.id+"&idx="+f+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()):m=m+"popupID="+this.id+"&idx="+f+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()):b.D.isEncodeParameter()?b.D.isEncodeParameter()?(m=m+b.D.encodeParameter("popupID=")+this.id,m+=b.D.encodeParameter("&w2xHome=")+WebSquare.w2xHome,m+=b.D.encodeParameter("&w2xDocumentRoot=")+WebSquare.w2xDocumentRoot+this._getW2Config()):m+=b.D.encodeParameter("popupID="+this.id+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()):m=m+"popupID="+this.id+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()}else t&&(m=t);if(1==i){if(!o){var C=l.v.getConfiguration("/WebSquare/clearMemory/@closeChildPopup");n&&"wframe"===n.options.pluginName&&"false"!==C&&(n.popupList||(n.popupList=[]),!1===s&&(this._parentFrameUUID=n.uuid),n.popupList.push(this))}var x=this.makePopupString(this.options);this.popupWin=window.open(m,this.options.id,x),WebSquare.uiplugin.popup._status="busy",l.v.setTimer((function(){WebSquare.uiplugin.popup._status="idle"}),{key:j+"_preventPopupClickTimer",delay:1})}else{var _,I=!1!==this.options.useMaximize,k=this.options.className&&""!=this.options.className?" "+this.options.className:"",D=this.options.buttonInfo;if(d!==this.options.scope_uuid&&!0===this.options.frameModal&&"browser"!==this.options.type){var L=WebSquare.idCache[this.options.scope_uuid];_=b.D.getStyleProperty(L.render,"overflow")}else _=b.D.getStyleProperty(document.documentElement,"overflow");var W,A=!1;this.options.useControl&&1==(W=a.x.extend({minimize:!0,maximize:!0,close:!0},this.options.controls)).minimize&&(A=!0);var E=this.options.scope_uuid?WebSquare.idCache[this.options.scope_uuid]:null;this.popupWin=WebSquare.controlFactory.create(this.options.org_id||this.options.id,{className:"w2popup_window"+k,src:m,windowTitle:this.options.popupName,defaultWidth:this.options.width+"",defaultHeight:this.options.height+"",title:this.options.id,dragResizable:void 0===this.options.resizable||this.options.resizable,dragResizableLeft:void 0!==this.options.resizableLeft&&this.options.resizableLeft,displayParentWindowScroll:"auto"==_||"scroll"==_,useMaximize:I,frameMode:this.options.frameMode,disableCloseButton:this.options.disableCloseButton,useATagBtn:this.options.useATagBtn,useATagTitle:this.options.useATagTitle,foldOnMinimized:A,foldSize:this.options.foldSize,pluginName:"window",parseChild:!1,
windowDragMove:this.options.windowDragMove,processMsgFrame:this.options.processMsgFrame||!1,frameModal:this.options.frameModal||!1,windowMoveType:this.options.windowMoveType,modal:this.options.modal||!1},null,E,this.options.scope_uuid,!0),WebSquare.uiplugin.popup._status="busy",this.options.dataObject&&"wframe"===this.options.frameMode&&this.popupWin.setDataObject(this.options.dataObject)}if(f&&(this._idx=f),this.popupWin.options&&(this.options.closeAction&&(this.popupWin.options.closeAction=this.options.closeAction),this.options.openAction&&(this.popupWin.options.openAction=this.options.openAction),this.options.clickAction&&(this.popupWin.options.clickAction=this.options.clickAction)),b.D.getBoolean(this.options.parentPopupDisabled)&&window.self!==window.top){var M=window.parent;if(M.WebSquare&&M.WebSquare.uiplugin.popup&&M.WebSquare.uiplugin.popup.popupList&&M.WebSquare.uiplugin.popup.popupList.length>0)for(w=0;w<M.WebSquare.uiplugin.popup.popupList.length;w++)M.WebSquare.uiplugin.popup.popupList[w].popupWin.setDisabled(!0)}if("browser"==this.options.type)for(var q=0;q<WebSquare.uiplugin.popup.popupList.length;q++)this.options.id===WebSquare.uiplugin.popup.popupList[q].id&&WebSquare.uiplugin.popup.popupList.splice(q,1);if(WebSquare.uiplugin.popup.popupList.push(this),1==i){if(null!=this.popupWin&&this.popupWin.focus(),null!=this.popupWin){var R=WebSquare.getBody();if(o){if((R=o).stackComponents&&R.stackComponents.popup)for(q=0;q<R.stackComponents.popup.length;q++)this.options.id===R.stackComponents.popup[q].id&&(R.stackComponents.popup.splice(q,1),R.modalStack.splice(q,1));(G={}).popup={id:this.id,modal:this.options.modal};y={className:"w2modal_popup",isPopup:!0,useWindowPopup:i,popupModal:this.options.modal,stackComponents:G};R.showFrameModal(y)}R.modalEvent(this.id)}}else{var N=0,F=0;if("wframe"===this.options.frameMode){var B={};if(null!=this.options.dataObject){var V=this.options.dataObject.type||"s",H=this.options.dataObject.name;"string"==typeof H&&H.length>0&&(this.popupWin.options.popupParam=V.charAt(0)+H)}else if(null!=this.options.xml){var P="idx_"+this.popupWin.popupIdx++;B.idx="s"+P,B[P]="d"+this.options.xml,this.popupWin.options.popupParam="d"+P}B.popupID="s"+this.id,B.w2xHome="s"+WebSquare.w2xHome,B.w2xDocumentRoot="s"+WebSquare.w2xDocumentRoot,this.popupWin.options.params=JSON.stringify(B),o&&(this.popupWin._targetFrameObjUUID=this._targetFrameObjUUID),this.popupWin._isWframePopup=!0;var j=this.popupWin.id;this.popupWin.bind("onwindowload",(function(){WebSquare.uiplugin.popup._status="done",l.v.setTimer((function(){WebSquare.uiplugin.popup._status="idle"}),{key:j+"_preventPopupClickTimer",delay:10})}))}else this.popupWin.bind("onwindowload",(function(){WebSquare.uiplugin.popup._status="done",WebSquare.uiplugin.popup._status="idle"})),N=document.documentElement.scrollTop||document.body.scrollTop,F=document.documentElement.scrollLeft||document.body.scrollLeft;D&&(this.popupWin.hasButtons=!0,this.popupWin.buttonInfo=D);var z=this;this.popupWin.addEvent("onbeforeclose",(function(){if(WebSquare.uiplugin.popup.removeFromPopupList(z.options.id),!0===z._compModal&&(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")!==this.scope_obj.uuid)if(this.options.frameModal)this.parentControl.hideFrameModal(this.id);else{var t=z._getTargetFrame(this.scope_obj.uuid);t&&t.hideFrameModal(this.id)}else z.options.useModalStack?z.hideModal(z.id):z.options.useModalDisable?WebSquare.layer.hideModal():1==z.options.modal&&WebSquare.getBody().hideModal();if(b.D.getBoolean(z.options.parentPopupDisabled)&&window.self!==window.top){var e=window.parent;if(e.WebSquare&&e.WebSquare.uiplugin.popup&&e.WebSquare.uiplugin.popup.popupList&&e.WebSquare.uiplugin.popup.popupList.length>0)for(var i=0;i<e.WebSquare.uiplugin.popup.popupList.length;i++)e.WebSquare.uiplugin.popup.popupList[i].popupWin.setDisabled(!1)}}));R=WebSquare.getBody();if(o?(o.wframeSubPopup||(o.wframeSubPopup=[]),
o.wframeSubPopup.indexOf(this.id)&&o.wframeSubPopup.push(this.id),R=o):n&&!0!==n._isWframePopup&&"wframe"===n.options.pluginName&&(R.wframeSubPopup||(R.wframeSubPopup=[]),R.wframeSubPopup.indexOf(n.uuid)&&R.wframeSubPopup.push(n.uuid)),this.popupWin.writeTo(R,null,this.parentFrame),o){var G;(G={}).popup={id:this.id,modal:this.options.modal};y={className:"w2modal_popup",isPopup:!0,useWindowPopup:i,popupModal:this.options.modal,stackComponents:G};o.showFrameModal(y)}var U=this.options.left,X=this.options.top,K=parseInt(this.options.width)-2,$=parseInt(this.options.height)-2;if(o){var Y=R.render.clientWidth||R.render.style.width||WebSquare.style.getComputedStyle(R.render,"width"),Z=R.render.clientHeight||R.render.style.height||WebSquare.style.getComputedStyle(R.render,"height");if(0===Y||"100%"===Y||"auto"===Y){for(var J,Q=R.render.parentElement;Q&&(0===(J=Q.clientWidth||Q.style.width||WebSquare.style.getComputedStyle(Q,"width"))||"100%"===J||"auto"===J);)Q=Q.parentElement;Y=0===J||"100%"===J||"auto"===J?document.documentElement.clientWidth||document.body.clientWidth||0:J}if(0===Z||"100%"===Z||"auto"===Z){var tt;for(Q=R.render.parentElement;Q&&(0===(tt=Q.clientHeight||Q.style.width||WebSquare.style.getComputedStyle(Q,"height"))||"100%"===tt||"auto"===tt);)Q=Q.parentElement;Z=0===tt||"100%"===tt||"auto"===tt?document.documentElement.clientHeight||document.body.clientHeight||0:tt}U+K>Y&&(U=Y-K-2),X+$>Z&&(X=Z-$-2),K>Y&&(K=Y-2),$>Z&&($=Z-2),"relative"!==WebSquare.style.getStyle(R.render,"position")&&(X+=R.render.offsetTop,U+=R.render.offsetLeft)}var et=b.D.getBoolean(l.v.getConfiguration("/WebSquare/popup/lazyPopup/@value"));if(et||(this.popupWin.setPosition(U+F,X+N),this.popupWin.setSize(K,$)),this.popupWin.activate(),(o||this.options.frameModal||n&&!0===n.options.popupAutoClose)&&(this.popupWin.frame.options.popupAutoClose=!0),et&&(this.popupWin.setPosition(U,X),this.popupWin.setSize(K,$)),"wframe"===this.options.frameMode){O.B.fireEvent(this.popupWin.frame,"onsetsize");for(var it=!1,ot=document.activeElement;null!=ot&&ot!==document.body;ot=ot.parentElement)if(this.popupWin.hasClass(ot,"w2popup_window")){it=!0;break}it||this.popupWin._focus()}if(b.D.isIE(6),this.options.useControl){var st=document.getElementById(this.popupWin.id+"_header_control"),rt=st.getElementsByTagName("div");WebSquare.style.addClass(st,"w2window_header_control_inline");for(var at=0,nt=rt.length;at<nt;at++)WebSquare.style.addClass(rt[at],"w2window_btn_header_control");var lt=document.getElementById(this.id+"_minimize"),ht=document.getElementById(this.id+"_restore"),dt=document.getElementById(this.id+"_close");W.minimize||(WebSquare.style.setStyle(lt,"display","none"),WebSquare.style.removeClass(lt,"w2window_btn_header_control")),W.maximize||(WebSquare.style.setStyle(ht,"display","none"),WebSquare.style.removeClass(ht,"w2window_btn_header_control")),W.close||(WebSquare.style.setStyle(dt,"display","none"),WebSquare.style.removeClass(dt,"w2window_btn_header_control"))}if(this.popupWin.movable(!0),this.options.alwaysOnTop){var ut=this.popupWin.getStyle("z-index");WebSquare.uiplugin.popup._zIndex<ut?WebSquare.uiplugin.popup._zIndex=ut:this.popupWin.setStyle("z-index",WebSquare.uiplugin.popup._zIndex)}this.popupWin.addEvent("onclick",(function(){if(z.options.alwaysOnTop&&"idle"===WebSquare.uiplugin.popup._status&&(WebSquare.uiplugin.popup._zIndex++,this.setStyle("z-index",WebSquare.uiplugin.popup._zIndex)),this.options.clickAction){var t=b.D.getGlobalFunction(this.options.clickAction,this.scope_id);"function"==typeof t&&t.call(this,WebSquare.uiplugin.popup._zIndex)}})),this.popupWin.addEvent("ondragstart",(function(){z.options.alwaysOnTop&&"idle"===WebSquare.uiplugin.popup._status&&(WebSquare.uiplugin.popup._zIndex++,this.setStyle("z-index",WebSquare.uiplugin.popup._zIndex))})),this.popupWin.addEvent("onwindowmousedown",(function(){if(z.options.alwaysOnTop&&"idle"===WebSquare.uiplugin.popup._status&&(WebSquare.uiplugin.popup._zIndex++,
this.setStyle("z-index",WebSquare.uiplugin.popup._zIndex)),this.options.clickAction){var t=b.D.getGlobalFunction(this.options.clickAction,this.scope_id);"function"==typeof t&&t.call(this,WebSquare.uiplugin.popup._zIndex)}}));try{switch((0,T.Z)(this.options.openAction)){case"function":this.options.openAction.apply(this,this);break;case"string":var ct=b.D.getGlobalFunction(this.options.openAction,this.scope_id);"function"==typeof ct&&(this.options.openAction=ct,ct.apply(this,this))}}catch(t){h.w.printStackTrace(t,null,this)}}}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype._getModalOpendFrame=function(t){try{for(var e,i=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";t&&i!==t.uuid;)t._wframePopupModal&&(e=t),t=WebSquare.idCache[t.parentFrame];return e}catch(t){h.w.printStackTrace(t)}},ge.prototype._getTargetFrame=function(t,e){try{for(var i,o=WebSquare.idCache[t];null!=o&&o!==WebSquare.strictModeFrame;o=WebSquare.idCache[o.parentFrame])if(o.options&&!0===o.options.frameModal){i=o;break}return i}catch(t){h.w.printStackTrace(t)}},ge.prototype._getModalTargetFrame=function(t,e,i){try{var o=WebSquare.idCache[t],s=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"",r=o,a=o,n=!1;for(i||(n=!0);r&&s!==r.uuid&&("frame"!==this.options.frameModal||0!==WebSquare.uiplugin.popup.popupList.length);)if(r._wframePopupModal&&(a=r),i&&r.uuid===i&&(n=!0),e){if(n&&(e===r.id||r.parentControl&&0===r.parentControl.org_id.indexOf(e)))break;r=WebSquare.idCache[r.parentFrame]}else{if(r.parentFrame===s)break;r=WebSquare.idCache[r.parentFrame]}return"frame"===this.options.frameModal?a:e&&r.uuid===s?a||null:r}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype._bodyShowModal=function(){try{this.options.useModalStack?this.showModal():1==this.options.modal&&(this.options.useModalDisable?WebSquare.layer.showModal():WebSquare.getBody().showModal())}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype.makeParamString=function(t){try{var e=[];for(var i in t)e.push(i+"="+t[i]);return"?"+e.join("&")}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype.getWebsquareUrl=function(t,e,i){try{if(i||(i=window),i&&i.location){e.w2xPath=l.v.getURL(t),e.w2xHome=WebSquare.w2xHome,e.w2xDocumentRoot=WebSquare.w2xDocumentRoot;var o=this.makeParamString(e);return a.x.baseURI+"popup.html"+o}return""}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype.getHTMLUrl=function(t,e,i){try{if(i||(i=window),i&&i.location){var o=this.makeParamString(e);return t.replace(/\?.*/,o)}return""}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype.makePopupString=function(t){try{var e="width height resizable status menubar scrollbars title left top"+(!0===this.options.fullscreen?"fullscreen":""),i="";for(var o in t){if(e.indexOf(o)>-1)if("width"==o||"height"==o||"left"==o||"top"==o)i+=o+"="+parseInt(t[o])+"px,";else i+=o+"="+(1==t[o]?"yes":"no")+","}return i}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype.close=function(t){try{if(this.popupWin){var e=this.popupWin.close(t);if(!1!==e){if(1==this.options.modal&&this.useWindowPopup()){var i=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";if(this._parentFrameUUID&&this._parentFrameUUID!==i){var o=WebSquare.idCache[this._parentFrameUUID];o&&o.hideFrameModal(this.id)}else WebSquare.getBody().hideModal()}this.popupWin=null,WebSquare.dataObject[this.id]&&delete WebSquare.dataObject[this.id]}return e}}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype.getWindow=function(){try{return 1==this.useWindowPopup()?this.popupWin:this.popupWin.frame.getWindow()}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype.useWindowPopup=function(){try{var t=!1;return"browser"==this.options.type&&(t=!0),"window"==this.options.type&&(t=!0),"window"==this.options.type&&1==this.options.useIFrame&&(t=!1),t}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype.setSize=function(t,e){try{1==this.useWindowPopup()?this.popupWin.resizeTo(t,e):(this.popupWin.setSize(parseInt(t)-2,parseInt(e)-2),
b.D.isIE(6))}catch(t){h.w.printStackTrace(t)}},ge.prototype.setCloseButtonStatus=function(t){try{this.popupWin.setCloseButtonStatus(t)}catch(t){h.w.printStackTrace(t)}},ge.prototype._getW2Config=function(){try{var t="",e=-1;if(b.D.isEncodeParameter()){if((e=location.toString().indexOf(b.D.encodeParameter("w2Config")))>=0)(o=(i=location.toString().slice(e+"w2Config=".length)).slice(0,i.indexOf(b.D.encodeParameter("config.xml"))+"config.xml".length))&&(t=b.D.encodeParameter("&w2Config=")+o);else if(b.D.getBoolean(l.v.getConfiguration("/WebSquare/encodeParameter/@fallback"))){var i,o;if((e=location.toString().indexOf("w2Config"))>=0)(o=(i=location.toString().slice(e+"w2Config=".length)).slice(0,i.indexOf("config.xml")+"config.xml".length))&&(t=b.D.getEncodeParameterOption("onlyParam")?b.D.encodeParameter("&w2Config=")+o:b.D.encodeParameter("&w2Config="+o))}}else if((e=location.toString().indexOf("w2Config"))>=0)(o=(i=location.toString().slice(e+"w2Config=".length)).slice(0,i.indexOf("config.xml")+"config.xml".length))&&(t="&w2Config="+o);return t}catch(t){h.w.printStackTrace(t,null,this)}},ge.prototype.showModal=function(){var t=WebSquare.getBody();if(b.D.getBoolean(this.options.useModalStack)){if("browser"===this.options.type&&t.stackComponents&&t.stackComponents.popup)for(var e=0;e<t.stackComponents.popup.length;e++)this.options.id===t.stackComponents.popup[e].id&&(t.stackComponents.popup.splice(e,1),t.modalStack.splice(e,1));var i={};i.popup={id:this.id,modal:this.options.modal};var o={className:"w2modal_popup",isPopup:!0,popupModal:this.options.modal,stackComponents:i};t.showModal(o)}else t.showModal("w2modal_popup")},ge.prototype.hideModal=function(t){WebSquare.getBody().hideModal(null,t)};var me=__webpack_require__(183),fe=__webpack_require__(4816);r.C.init(window),a.x.BootLoader=n.d,a.x.core=l.v,a.x.exception=h.w,a.x.logger=d.k,a.x.debug=d.f,a.x.xml=u.L,a.x.xmljs=c,a.x.collection=p.h,a.x.Parser=x,a.x.Model=_,a.x.ModelUtil=I.z,a.x.DataCollection=D,a.x.Events=w,a.x.net=L,a.x.session=W,a.x.util=b.D,a.x.date=A.h,a.x.text=E.f,a.x.numberFormatter=E.V,a.x.layer=M,a.x.cookie=q,a.x.effect=R,a.x.targetIterator=F,a.x.event=O.B,a.x.skin=C,a.x.language=B.d,a.x.cssStyleSheet=H,a.x.styleSheet=V,a.x.dragdrop=P,a.x.style=j,a.x.validator=z.s,a.x.IValidate=z.z,a.x.json=k,a.x.jsonUtil=y.h,a.x.jsonParser=G,a.x.pageInfo=U,a.x.jsLoader=K,a.x.format=Y,a.x.bigDecimal=Z,a.x.bigDecimalObj=J,a.x.api=Q,a.x.Elem=v.D,a.x.korHelper=tt,a.x.MessageBroker=et,a.x.eventControl=it.U,a.x.cssManager=S,a.x.cssCustomizer=ot.g,a.x.modelControl=st,a.x.xfControl=rt.s,a.x.controlFactory=X.D,a.x.historyManager=at,a.x.itemsetControl=nt.E,a.x.DataCollection.dataList=mt,a.x.DataCollection.filterController=dt,a.x.DataCollection.dataListCellInfo=pt,a.x.DataCollection.dataMap=bt,a.x.DataCollection.linkedDataList=St,a.x.DataCollection.aliasDataList=Ct,a.x.DataCollection.aliasDataMap=xt,a.x.DataCollection.aliasLinkedDataList=_t,a.x.uiplugin={},a.x.uiplugin.balloonTip=It.balloonTip,a.x.uiplugin.group=Tt.group,a.x.uiplugin.wframe=kt.wframe,a.x.uiplugin.body=Dt,a.x.uiplugin.textbox=Lt.textbox,a.x.uiplugin.anchor=Wt.anchor,a.x.uiplugin.itemTable=At,a.x.uiplugin.gridItemTable=Et,a.x.uiplugin.gridViewItemTable=Mt,a.x.uiplugin.selectbox=qt.selectbox,a.x.uiplugin.selectbox_native=qt.selectbox_native,a.x.uiplugin.input=Rt.input,a.x.uiplugin.span=Nt.span,a.x.uiplugin.dateHelper=Ft,a.x.uiplugin.calendar=Ot.calendar,a.x.uiplugin.inputCalendar=Bt.inputCalendar,a.x.uiplugin.textarea=Vt.textarea,a.x.uiplugin.checkcombobox=Ht.checkcombobox,a.x.uiplugin.autoComplete=Pt.autoComplete,a.x.uiplugin.list=jt.list,a.x.uiplugin.floatingLayer=zt.floatingLayer,a.x.uiplugin.radio=Gt.radio,a.x.uiplugin.spinner=Ut.spinner,a.x.uiplugin.gridView=Xt.gridView,a.x.uiplugin.drilldown=Xt.drilldown,a.x.uiplugin.mappingController=Xt.mappingController,a.x.uiplugin.linkedMappingController=Xt.linkedMappingController,a.x.uiplugin.cellInfo=Xt.cellInfo,a.x.uiplugin.headerInfo=Xt.headerInfo,
a.x.uiplugin.trigger=Kt.trigger,a.x.uiplugin.image=$t.image,a.x.uiplugin.pageList=Yt.pageList,a.x.uiplugin.tabControl=Zt.tabControl,a.x.uiplugin.content=Zt.content,a.x.uiplugin.generator=Jt.generator,a.x.uiplugin.upload=Qt.upload,a.x.uiplugin.treeview=te.treeview,a.x.uiplugin.treeview_virtual=ee.treeview_virtual,a.x.uiplugin.checkbox=ie.checkbox,a.x.tag=re,a.x.uiplugin.output=ae.output,a.x.uiplugin.window=ne.wq_window,a.x.uiplugin.windowContainer=le.windowContainer,a.x.uiplugin.accordion=he.accordion,a.x.uiplugin.panels=he.panels,a.x.uiplugin.widgetContainer=de.widgetContainer,a.x.uiplugin.widget=de.widget,a.x.uiplugin.panelContainer=ue.panelContainer,a.x.uiplugin.panel=ue.panel,a.x.uiplugin.udc=ce,a.x.uiplugin.popup=pe,a.x.uiplugin.popupWindow=ge,a.x.uiplugin.scrollView=me.scrollView,a.x.uiplugin.gridLayout=fe.gridLayout,window.WebSquare=a.x}()})();