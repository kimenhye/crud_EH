(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[4782],{4782:function(e,t,i){"use strict";i.r(t),i.d(t,{generator:function(){return d}});var r=i(2137),n=i(7757),s=i.n(n),o=i(1974),a=i(5052),h=i(5948),l=i(8683),c=i(1),d=function(e,t,i){c.s.call(this,e,t,i)};d.prototype.initAsync=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._parse();case 2:case"end":return e.stop()}}),e,this)}))),o.x.extend(d.prototype,c.s.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.generator",pluginName:"generator",tagname:"div"},d.prototype.initialize=function(e){this.idCounter=0,this.dynamicCreateHash=l.D.isIE()&&parseInt(a.v.browserVersion(),10)<10?{tbody:!0,thead:!0,tfoot:!0,tr:!0}:{},this.passHash={script:!0,label:!0,value:!0,choices:!0,item:!0,itemset:!0,attributes:!0},e&&1==e.nodeType&&!this.id&&(this.id=e.getAttribute("id")),this.tagName=this.options.tagname},d.prototype.toHTML=function(){try{var e=[],t=WebSquare.Parser.parseAttribute(this.element);for(var i in e.push("<"+this.options.tagname),t)if("id"==i){var r=this.id?" id='"+this.id+"'":" id='"+t[i]+"'";e.push(r)}else if("tagname"!=i){"className"==i&&(t[i="class"]=t.className,delete t.className);r=t[i]?" "+i+"='"+t[i]+"'":"";e.push(r)}return e.push(">"),e.push("</"+this.options.tagname+">"),e.join("")}catch(e){h.w.printStackTrace(e,null,this)}},d.prototype.setAction=function(){try{this.itemCnt=0,this.insertItemCnt=0,this.generatedIndexSet=[],this.generatedElementSet=[]}catch(e){h.w.printStackTrace(e,null,this)}},d.prototype.setChildElement=function(e,t){try{if(1==e.nodeType){var i=e.getLocalName();if(!this.passHash[i]){var r="";r=this.scope_obj&&null!=this.org_id?this.org_id+"_"+t+"_":this.id+"_"+t+"_";var n=e.getAttribute("id")||"",s=e.getAttribute("label"),o=e.getTagName();if(e.setAttribute("g_index",t),"w2:tag"==o&&""==n&&(n="w2generator_"+this.idCounter++),n&&(e.setAttribute("original_id",n),"w2:listColumn"!=o&&e.setAttribute("id",r+n)),s&&"w2:textbox"!==o&&"w2:span"!==o&&(e.setAttribute("org_label",s),e.setAttribute("label",WebSquare.xml.encode(s))),"w2:generator"!=o)for(var a=e.getChildNodes(),l=0;l<a.length;l++)this.setChildElement(a[l],t)}}}catch(e){h.w.printStackTrace(e)}},d.prototype.restoreChildElement=function(e){try{if(1==e.nodeType){var t=e.getLocalName();if(!this.passHash[t]){var i=e.getAttribute("original_id"),r=e.getAttribute("original_ref"),n=e.getAttribute("org_label");if(e.removeAttribute("g_index"),i&&(e.setAttribute("id",i),e.removeAttribute("original_id")),r&&(e.setAttribute("ref",r),e.removeAttribute("original_ref")),n&&(e.setAttribute("label",n),e.removeAttribute("original_label")),"w2:generator"==e.getTagName()){var s=e.getAttribute("original_nodeset");s&&(e.setAttribute("nodeset",s),e.removeAttribute("original_nodeset"))}else for(var o=e.getChildNodes(),a=0;a<o.length;a++)this.restoreChildElement(o[a])}}}catch(e){h.w.printStackTrace(e)}},d.prototype.getLength=function(){return this.generatedIndexSet.length},d.prototype.getChild=function(e,t){var i=this.generatedIndexSet[e],r=this.id+"_"+i+"_"+t;return l.D.getComponentById(r)||document.getElementById(r)},d.prototype.insertChild=function(e){return this.insert(e)},d.prototype.insert=function(e){try{if("number"==typeof e&&null!=this.generatedElementSet[e]){for(var t=0,i=0;i<e;i++)t+=this.generatedElementSet[i].length;this.targetNode=this.render.childNodes[t]}var r=[],n=[],s=[],o=this.dynamicCreateHash[this.options.tagname],a=this.element.cloneNode(!0),l=0,c=a.getChildNodes();for(i=0;i<c.length;i++){var d=c[i];this.setChildElement(d,this.insertItemCnt);var p=null;1===d.nodeType?(p=this._compHash[l]._cloneRecursive(d),l++):(3!==d.nodeType||o)&&(p=WebSquare.controlFactory.createByJSON(null,null,d._element,this.scope_obj,this.parentFrame)),p&&(this.addControl(p),o?this.dynamicAppend(this.render,p,e):3==d.nodeType?n.push(d.nodeValue):(n.push(p.toHTML()),s.push(p))),o&&this.restoreChildElement(d),p&&r.push(p)}
if(WebSquare.controlFactory.initAsync(!0),!o){var u=document.createElement(this.options.tagname);for(u.innerHTML=n.join("");u.childNodes.length>0;)this.targetNode?this.targetNode=this.render.insertBefore(u.childNodes[u.childNodes.length-1],this.targetNode):this.render.appendChild(u.childNodes[0]);for(;s.length>0;){var m=s.shift();m.activate(),m.onComplete()}}var g=this.itemCnt;return"number"==typeof e?(this.generatedIndexSet.splice(e,0,this.insertItemCnt),this.generatedElementSet.splice(e,0,r),g=e):(this.generatedIndexSet.push(this.insertItemCnt),this.generatedElementSet.push(r)),this.targetNode=null,this.itemCnt++,this.insertItemCnt++,g}catch(e){h.w.printStackTrace(e,null,this)}},d.prototype.dynamicAppend=function(e,t,i){try{var r=t.toHTML(),n=r.match(/(<)([^ >\/]*)/),s=n&&n[2]?n[2]:null;if(s){var o=document.createElement(s),a=WebSquare.xml.parse(r),l=WebSquare.WebSquareparser.parseAttribute(a.documentElement);try{for(var d in l)"style"==d?o.style.cssText=l[d]:"className"==d?o.className=l[d]:o.setAttribute(d,l[d])}catch(e){h.w.printStackTrace(e,null,this)}if("number"==typeof i&&this.targetNode?(e.insertBefore(o,this.targetNode),t.activate(),t.onComplete()):(e.appendChild(o),t.activate(),t.onComplete()),0==t.childControlList.length)for(var p=0;p<a.documentElement.childNodes.length;p++){var u=a.documentElement.childNodes[p];(m=WebSquare.controlFactory.create(null,null,u))&&t.addControl(m)}for(p=0;p<t.childControlList.length;p++){var m;3==(m=t.childControlList[p]).element.nodeType?o.appendChild(document.createTextNode(m.element.data)):this.dynamicCreateHash[s]?this.dynamicAppend(o,m):(c.s.prototype.writeTo.call(m,o),m.activate(),m.onComplete())}}}catch(e){h.w.printStackTrace(e,null,this)}},d.prototype._clone=function(e){try{var t=c.s.prototype._clone.call(this,e);return t._compHash=this._compHash.slice(0),t}catch(e){h.w.printStackTrace(e,null,this)}},d.prototype.removeChild=function(e){return null==e&&(e=this.generatedElementSet.length-1),this.remove(e)},d.prototype.remove=function(e){if(null!=e){if("number"==typeof e&&this.generatedElementSet[e]){for(var t=0;t<this.generatedElementSet[e].length;t++){var i=this.generatedElementSet[e][t];i.remove&&i.remove()}var r=this.generatedIndexSet.splice(e,1);return this.generatedElementSet.splice(e,1),this.itemCnt--,r}}else c.s.prototype.remove.call(this)},d.prototype.removeAll=function(){for(var e=this.childControlList.length-1;e>=0;e--)this.childControlList[e].remove&&this.childControlList[e].remove();WebSquare.removeChildren(this.render),this.generatedIndexSet=[],this.generatedElementSet=[],this.itemCnt=0,this.insertItemCnt=0},d.prototype.getIndexArray=function(){return this.generatedIndexSet.slice(0)},d.prototype.setStyle=function(e,t){try{if(!this.render)return;if(WebSquare.style.setStyle(this.render,e,t),"width"==e||"height"==e)for(var i=this.getChildren(),r=this.getChildrenCount(),n=0;n<r;n++)i[n].render.style[e]=t}catch(e){h.w.printStackTrace(e)}},d.prototype.finalize=function(){try{if(c.s.prototype.finalize.call(this),this._compHash)for(var e=0;e<this._compHash.length;e++)this._compHash[e].remove();this.removeAll()}catch(e){h.w.printStackTrace(e)}},d.prototype._parse=(0,r.Z)(s().mark((function e(){var t,i,r,n,o,a,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{for(this._compHash=[],t=this.dynamicCreateHash[this.options.tagname],i=this.element.cloneNode(!0),r=i.getChildNodes(),n=0;n<r.length;n++)o=r[n],this.setChildElement(o,"_base_"),a=null,(3!==o.nodeType||t)&&(a=WebSquare.controlFactory.createByJSON(null,null,o._element,this.scope_obj,this.parentFrame)),a&&(!0===a._wqAsync?(l=this.uuid,c=this._compHash.length,a.then((function(e,t){WebSquare.idCache[l]._compHash.splice(c,0,e)}))):this._compHash.push(a))}catch(e){h.w.printStackTrace(e,null,this)}case 2:case"end":return e.stop()}}),e,this)})))}}]);