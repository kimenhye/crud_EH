(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[7607],{7607:(e,t,i)=>{"use strict";i.r(t),i.d(t,{checkcombobox:()=>c});var s=i(5405),o=i(465),r=i(5130),n=i(6146),a=i(209),l=i(6247),h=i(4582),d=i(9544),c=function(e,t,i){l.s.call(this,e,t,i)};s.x.extend(c.prototype,l.s.prototype),s.x.extend(c.prototype,h.E.prototype),s.x.extend(c.prototype,d.z.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.checkcombobox",pluginName:"checkcombobox",renderType:"component",userEvents:["onchange","onclose","onviewchange","oncheckboxclick","oncellclick"],systemEvents:["onblur","onclick","ondblclick","onfocus"],serializable:!0,useConfig:!0,separator:" ",value:"",sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,visibleColNum:1,visibleColMax:1,displayMode:"0",delimiter:"\t",textAlign:"",chooseOption:!1,chooseOptionLabel:"",allOption:!1,tooltipMode:"none",defaultStyle:"",activeStyle:"",defaultClass:"w2checkcombobox_default",activeClass:"w2checkcombobox_active",useLocale:!1,submenuSize:"auto",direction:"auto",checkboxClickSync:!1,mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",title:"",setDataRemoveAll:!0,escape:!0,closeonmouseleave:!1,animation:"",customLabelFormatter:"",navBtn:!1,displayAllOptionLabel:!1,checkDisabledOnAllCheck:!0,search:"start",searchTarget:"label",editable:!1,editType:"select",editModeEvent:"onclick",handleOtherClick:!0,noResult:"previous",interactionMode:!1,ignoreBlankOnNoResult:!1,useKeywordHighlight:!1,wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",visibleColumnAutoClear:!1,useDrag:!1,useEdit:!1,rangeSeparator:"",validateOnInput:!1},c.prototype.initialize=function(e){try{if(this.itemTable=null,this.isOpen=!1,this.statusSubLayer=!1,this.separator=this.options.separator=this.options.separator||" ",this.selectedInfo={},this.editable=this.options.editable,this.search=this.options.search,this.myhelper=new WebSquare.korHelper,this.viewArr=[],this.mytime=null,this.hideTime=null,this.noResult="previous"===this.options.noResult||"clear"===this.options.noResult||"noEnd"===this.options.noResult||"useData"===this.options.noResult||"first"===this.options.noResult?this.options.noResult:"previous",this.interactionMode=this.options.interactionMode,this.mozTrickBuffer="",this.trickBuffer="",this.findStop=!1,this.displayFormatter=null,this.labelColumn=-1,this._currentTarget=null,this._dragGhost=null,this.defaultAllOptionLabel=WebSquare.language.getMessage("CheckCombobox_all"),e&&"$blank"==e.getAttribute("chooseOptionLabel")?this.defaultChooseOptionLabel="":this.defaultChooseOptionLabel=WebSquare.language.getMessage("CheckCombobox_choose"),this._initDisplayMode(),e){var t="xf"==e.getTagName().split(":")[0]?o.v._XML_NAMESPACE.XFORMS:o.v._XML_NAMESPACE.W2,i=WebSquare.Elem.api.getElementsByTagName(e,"choices",t)[0];if(i){var s=WebSquare.Elem.api.getElementsByTagName(i,"gridItemset",o.v._XML_NAMESPACE.W2)[0];null==s&&(s=WebSquare.Elem.api.getElementsByTagName(i,"gridViewItemset",o.v._XML_NAMESPACE.W2)[0]),s&&"w2:gridItemset"==s.getTagName()?this.itemTableMode="grid":s&&"w2:gridViewItemset"==s.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView")}"grid"==this.itemTableMode?this.initializeGridItemArr(e):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(e):this.initializeItemArr(e),this.itemDisabledArray=new Array;for(var n=0;n<this.itemArr.length;n++)this.itemDisabledArray.push(!1);this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.options.customLabelFormatter&&(this.customLabelFormatter=a.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id))}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.finalize=function(){try{
l.s.prototype.finalize.call(this),this.itemTable&&(this.itemTable.remove(),this.itemTable=null),this._dragGhost&&this._dragGhost.remove(),this.labelRuler=null}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.toHTML=function(){try{var e=[],t=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.title?"":"title='"+this.options.title+"'",s=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+'"',o=""==this.options.textAlign?"":"style= 'text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'",n="";return n=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'",e.push("<div id='"+this.id+"' role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='none' "+t+" class='w2checkcombobox "+this.options.className+"' "+n+i+">"),e.push("<table class='w2checkcombobox_table_main'>"),e.push("<tbody id='"+this.id+"_main_tbody'>"),e.push("<tr class='w2checkcombobox_row w2checkcombobox_row_main'>"),this.options.editable||this.options.useEdit?(e.push("<td class='w2checkcombobox_col_label' "+s+">"),e.push("<div class='w2checkcombobox_label'>"),e.push("<span id='"+this.id+"_label' class='w2checkcombobox_label' "+o+"></span>"),e.push("<input id='"+this.id+"_input' class='w2checkcombobox_input' style='border-width:0px; width:100%; padding:0px; display:none;' type='text' "+i+" />"),e.push("</div></td>"),e.push("<td class='w2checkcombobox_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>")):(e.push("<td class='w2checkcombobox_col_label' "+s+"><div id='"+this.id+"_label' role='document' aria-live='assertive' aria-automatic='true' class='w2checkcombobox_label' "+o+"></div></td>"),e.push("<td class='w2checkcombobox_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>")),e.push("</tr></tbody>"),e.push("</table>"),e.push("</div>"),e.join("")}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setPreAction=function(){try{this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),this.dom.input=this.getElementById(this.id+"_input"),this.dom.tbody=this.getElementById(this.id+"_main_tbody")}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.useOtherComponentId?o.v.setTimer((function(){this.otherComponent=a.D.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(e){n.B.stopPropagation(e)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:this.options.editable||this.options.useEdit?{onmousedown:this.handleClickEventDocument}:{}}),
this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),a.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(e){n.B.stopPropagation(e)}))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(e){n.B.stopPropagation(e)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.useEdit&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),(this.options.editable||this.options.useEdit)&&(this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleblurEventInput)),this.options.validateOnInput&&this.event.addListener(this.dom.input,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator))),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),this.modelControl.isItemsetBinded()?(this.refreshItemArr(),this.componentRedraw()):!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),this.modelControl.isBinded()){var e=this.modelControl.getData();this.setValueNM(e)}if(1==this.options.chooseOption){var t=this._getChooseOptionLabel();t=WebSquare.xml.decode(t).replace("&nbsp;"," "),this.dom.label.innerHTML=t}this.options.mandatory&&this.onPropertyChange("mandatory",a.D.getBoolean(this.options.mandatory)),this.options.visibleColumnAutoClear&&this.bind("onviewchange",this._clearVisibleColumnChecked)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){this.itemDisabledArray=new Array;for(var e=0;e<this.itemArr.length;e++)this.itemDisabledArray.push(!1);if(this.refreshItemArr(),this.componentRedraw(),"grid"==this.itemTableMode)this.refreshGridItemArr(),null!=this.itemTable&&null!=this.itemTable.grid&&(this.itemTable.grid.clearFilter(),this.setGridData(),this.options.allOption&&this.gridItemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr)));else if("gridView"==this.itemTableMode){if(this.refreshGridViewItemArr(),null!=this.itemTable&&null!=this.itemTable.gridView)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).setData(this.gridViewItemArr,!1),this.setGridViewData()}if(this.options.editable&&this.itemArr.length<=0&&this.initCheckCombobox(),this.modelControl.isBinded())this.refresh();else{var t=[];for(e=0;e<this.itemArr.length;e++)this.itemArr[e].value!=WebSquare.allValue&&t.push({index:e,checked:!1});this.setSelectedInfoNM(t)}}this.isOpen?this.setItemTable():this.options.useEdit&&this.itemTable&&(this.itemTable.show(),this.setItemTable(),this.itemTable.hide())}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var e=this.getValue(),t=this.modelControl.getData();1==this.setValueNM(t)&&e!=this.getValue()&&n.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.componentRedraw=function(){try{!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.setSelectOptions(),(this.options.editable||this.options.useEdit)&&this.showEditMode(!1),this.setValueNM("")}catch(e){r.w.printStackTrace(e,null,this)}},
c.prototype.setLabelWidthByItemLength=function(){try{this.labelRuler&&document.getElementById("checkcombobox_ruler")||(this.labelRuler=document.createElement("div"),this.labelRuler.style.position="absolute",this.labelRuler.style.top="-1000px",this.labelRuler.style.left="-1000px",this.labelRuler.style.visibility="hidden",this.labelRuler.id="checkcombobox_ruler",document.body.appendChild(this.labelRuler));for(var e=0,t=0;t<this.itemArr.length;t++)this.labelRuler.innerHTML=this.itemArr[t].label,this.labelRuler.offsetWidth>e&&(e=this.labelRuler.offsetWidth);if(this.render){var i=document.getElementById(this.id+"_button");this.render.style.width=e+i.offsetWidth+10+"px"}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setSubLayer=function(){try{var e=this;if(null==this.itemTable)if("grid"==this.itemTableMode){if(this.gridItemArr.length<=0)return;this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(t,i){e.focus(),"dataList"===e.gridViewOptions.dataComp.initializeType&&(t=this.getRealRowIndex(t)),e.setSelectedIndex1(t)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(t){var i=t.charCode?t.charCode:t.keyCode;if(13==i){e.focus();var s=this.getFocusedRowIndex();"dataList"===e.gridViewOptions.dataComp.initializeType&&(s=this.getRealRowIndex(s)),e.setSelectedIndex1(s)}else 27==i&&(e._closeSubLayer(),e.focus())}))),this.setGridData()}else if("gridView"==this.itemTableMode){if(this.gridViewItemArr.length<=0)return;"auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,submenuSize:this.options.submenuSize,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,navBtn:this.options.navBtn,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(t,i,s,o){e.focus(),o=o||{},"dataList"===e.gridViewOptions.dataComp.initializeType&&(t=this.getRealRowIndex(t));var r=parseInt(e.itemTable.options.gridViewOptions.checkColumn);if("checkbox"===this.getCellInputType(t,i)&&i===r){var a="";if(!0===o.checked){if(0===t&&this.getCellData(t,e.labelColumn)===e.defaultAllOptionLabel){for(var l=1;l<e.itemArr.length;l++)e.addSelectedInfo({index:l,checked:!0});this.checkAll(r,!0),e.checkAll(r,!0)}else e.itemArr[t].checked=!0,e.addSelectedInfo({index:t,checked:!0}),this.setCellChecked(t,i,!0);a=!0}else{if(0===t&&this.getCellData(t,e.labelColumn)===e.defaultAllOptionLabel){for(l=1;l<e.itemArr.length;l++)e.addSelectedInfo({index:l,checked:!1});this.checkAll(r,!1),e.checkAll(r,!1)}else e.itemArr[t].checked=!1,e.addSelectedInfo({index:t,checked:!1}),this.setCellChecked(t,i,!1);a=!1}if(e.options.allOption&&t>0){var h=!0;if(!0===o.checked){for(l=1;l<e.itemArr.length;l++)if(!e.itemArr[l].checked){h=!1;break}}else e.itemArr[t].checked=!1,h=!1;this.setCellChecked(0,i,h)}n.B.fireEvent(e,"oncellclick",t,i,a)}})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(t){27==(t.charCode?t.charCode:t.keyCode)&&(e._closeSubLayer(),e.focus())})));for(var t=parseInt(this.itemTable.options.gridViewOptions.checkColumn),i=this.itemTable.gridView.getRowCount(),s=1==this.options.allOption?1:0,l=s;l<i;l++)"1"===this.itemTable.gridView.getCellData(l,t)?this.addSelectedInfo({index:l+s,checked:!0}):this.addSelectedInfo({index:l+s,
checked:!1});this.setGridViewData()}else{this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"position:absolute;",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_ccb",w2table_main:"w2table_ccb_main",w2table_row:"w2table_ccb_row",w2table_col:"w2table_ccb_col",w2table_col_over:"w2table_ccb_col_over",w2table_col_checkbox:"w2table_ccb_col_checkbox",w2table_col_label:"w2table_ccb_col_label",checkbox:!0,navBtn:this.options.navBtn,escape:this.options.escape,editable:this.options.editable,wheelRows:this.options.wheelRows,parent_uuid:this.uuid,visibleColNum:this.options.visibleColNum,visibleColMax:this.options.visibleColMax}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate();e=this;this.itemTable.addClickEventListener((function(t,i){var s=document.getElementById(e.id+"_itemTable_"+i+"_checkbox");if(s&&s.value==WebSquare.allValue){for(var o=a.D.getBoolean(s.checked),r=1;r<e.itemArr.length;r++)if(a.D.getBoolean(e.options.checkDisabledOnAllCheck)||!e.itemDisabledArray[r]){var l=document.getElementById(e.id+"_itemTable_"+r+"_checkbox");l&&l.checked!=o&&(l.checked=o),e.addSelectedInfo({index:r,checked:o})}}else e.options.editable&&(e.mozTrickBuffer="",i=e.viewArr[i].index),e.addSelectedInfo({index:i,checked:s.checked});if(e.options.allOption)if(i>0){var h=!0;if(s.checked)if(e.options.editable&&e.editmode){e.itemArr[i].checked=!0;for(r=1;r<e.itemArr.length;r++)if(!e.itemArr[r].checked){h=!1;break}}else for(r=1;r<e.itemArr.length;r++){var d=document.getElementById(e.id+"_itemTable_"+r+"_checkbox");if(d&&!d.checked){h=!1;break}}else h=!1;document.getElementById(e.id+"_itemTable_0_checkbox").checked=h,e.options.editable&&(e.itemArr[0].allchecked=h)}else e.options.editable&&(e.itemArr[0].allchecked=s.checked);if(e.options.checkboxClickSync){var c=e.getValue(),u=e.getInfoArray(),m=e.convertInfoHash2Array(e.selectedInfo);m.length>0&&e.setSelectedInfo(m);var b=e.getValue();if(c!=b){var p={oldInfo:u,newInfo:e.getInfoArray(),oldValue:c,newValue:b};n.B.fireEvent(e,"onviewchange",p)}}n.B.fireEvent(e,"oncheckboxclick",i,s.checked,s.value)})),this.itemTable.addKeyDownEventListener((function(t){var i=t.charCode?t.charCode:t.keyCode;(13==i||27==i)&&(e.focus(),e.closeSubLayer())})),1==this.options.closeonmouseleave&&this.itemTable.addMouseLeaveEventListener((function(t){var i=e.render.offsetHeight,s=e.getAbsolutePosition("top");t.clientY>=s&&t.clientY<=s+i||e.closeSubLayer()})),this.options.useDrag&&(this.itemTable.event.addListener(this.itemTable.render,"onmousedown",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousedown)),this._dragGhost||(this._dragGhost=new WebSquare.uiplugin.group(this.id+"_dragGhost",{className:"w2checkcombobox_ghost"}),this._dragGhost.writeTo(WebSquare.getBody(),null,this.parentFrame),this._dragGhost.activate(),this._dragGhost.onComplete())),this.setSelectOptions(),this.setItemTable();var h=!0;for(l=0;l<this.getItemCount();l++)if(this.itemArr[l].checked){var d=document.getElementById(this.id+"_itemTable_"+l+"_checkbox");null!=d&&(d.checked=!0),this.addSelectedInfo({index:l,checked:null==d||d.checked})}else 1==this.options.allOption?(1==this.getItemCount()||this.itemArr[l].value!=WebSquare.allValue)&&(h=!1):h=!1;1==h&&1==this.options.allOption&&this.getItemCount()>0&&(document.getElementById(this.id+"_itemTable_0_checkbox").checked=!0)}if(!this.options.editable)for(l=0;l<this.itemDisabledArray.length;l++)this.setItemDisabled(l,this.itemDisabledArray[l]);if(this.options.enableColumn&&this.refreshEnable(),this.options.navBtn&&!this.itemTable.getElementById(this.id+"_btnArea")){var c,u=[],m=WebSquare.language.getMessage("itemTable_cancel")||"선택해제",b=WebSquare.language.getMessage("itemTable_confirm")||"선택적용",p=document.createElement("div");if(p.className="w2checkcombobox_btnArea",
p.id=this.id+"_btnArea",p.setAttribute("role","listitem option"),p.setAttribute("aria-setsize",this.options.visibleRowNum),p.setAttribute("aria-posinset",this.options.visibleRowNum),u.push("<div id='"+this.id+"_btn_confirm' class='w2checkcombobox_btn_confirm' role='button' title='"+b+"'>"+b+"</div>"),u.push("<div id='"+this.id+"_btn_cancel' class='w2checkcombobox_btn_cancel' role='button' title='"+m+"'>"+m+"</div>"),u=u.join(""),p.innerHTML=u,a.D.isIE()&&o.v.browserVersion()<=8){var f,g=this.itemTable.render.getElementsByTagName("div");for(l=0;f=g[l++];)if("w2checkcombobox_btn_div"==f.className){c=f;break}}else c=this.itemTable.render.getElementsByClassName("w2checkcombobox_btn_div")[0];c.appendChild(p),this.dom.confirmBtn&&this.dom.cancelBtn||(this.dom.confirmBtn=this.itemTable.getElementById(this.id+"_btn_confirm"),this.dom.cancelBtn=this.itemTable.getElementById(this.id+"_btn_cancel")),this.event.addListener(this.dom.confirmBtn,"onclick",this.event.bindAsEventListener(this,(function(){this.closeSubLayer()}))),this.event.addListener(this.dom.cancelBtn,"onclick",this.event.bindAsEventListener(this,(function(){if(this.options.editable){var e=0;if(this.options.allOption)document.getElementById(this.id+"_itemTable_0_checkbox").checked=!1,this.itemArr[0].allchecked=!1,e=1;for(var t=e;t<this.viewArr.length;t++){var i=this.viewArr[t].index;if(this.itemArr[i].checked=!1,this.addSelectedInfo({index:i,checked:!1}),(u=document.getElementById(this.id+"_itemTable_"+t+"_checkbox")).checked=!1,this.options.checkboxClickSync){var s=this.getValue(),o=this.getInfoArray(),r=this.convertInfoHash2Array(this.selectedInfo);r.length>0&&this.setSelectedInfo(r);var a=this.getValue();if(s!=a){var l={oldInfo:o,newInfo:this.getInfoArray(),oldValue:s,newValue:a};n.B.fireEvent(this,"onviewchange",l)}}}}else{var h=this.getItemCount();if("gridView"===this.itemTableMode){var d=parseInt(this.itemTable.options.gridViewOptions.checkColumn);for(h=this.itemTable.gridView.getRowCount(),this.options.allOption,t=0;t<h;t++){var c=this.itemTable.gridView._getTdElem(t,d);c&&(c.getElementsByTagName("input")[0].checked=!1),this.addSelectedInfo({index:t,checked:!1})}}else for(t=0;t<h;t++){var u;(u=document.getElementById(this.id+"_itemTable_"+t+"_checkbox"))&&(u.checked=!1,this.addSelectedInfo({index:t,checked:u.checked}))}}})))}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setSelectOptions=function(){try{null!=this.itemTable&&"gridView"!=this.itemTableMode&&(this.options.editable?this.editmode?0==this.viewArr.length||this.itemTable.setItemArr(this.viewArr):null!=this.itemArr&&0!=this.itemArr.length?this.itemTable.setItemArr(this.itemArr):this.itemTable.hide():this.itemTable.setItemArr(this.itemArr))}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setItemTable=function(){try{if(this.options.editable){for(var e=0;e<this.viewArr.length;e++)this.viewArr[e].checked=!(!this.itemArr[this.viewArr[e].index].checked&&!this.itemArr[this.viewArr[e].index].allchecked)||"";this.itemTable.setItemArr(this.viewArr);for(var t=0;t<this.viewArr.length;t++)this.setItemDisabled(t,this.itemDisabledArray[t])}var i=this.render.offsetWidth-2,s=WebSquare.style.getAbsoluteLeft(this.render),n=WebSquare.style.getAbsoluteTop(this.render),a=this.getVisibleItemCount(),l=0,h=this.options.visibleColNum>1||this.options.visibleColMax>1;if(!0===this.options.navBtn)if(this.getElementById(this.id+"_btnArea"))l=WebSquare.style.getSize(this.getElementById(this.id+"_btn_confirm"),"outermarginwidth")+WebSquare.style.getSize(this.getElementById(this.id+"_btn_cancel"),"outermarginwidth");"gridView"===this.itemTableMode||"grid"===this.itemTableMode||"column"===this.options.submenuSize||h||(this.itemTable.setStyle("width",this.render.offsetWidth+"px"),this.itemTable.render.firstChild.style.width=this.render.offsetWidth+"px");var d=this.itemTable.render.getElementsByTagName("tr"),c=this.itemTable.render.getElementsByTagName("td")
;if("gridView"!==this.itemTableMode&&"grid"!==this.itemTableMode&&c&&c.length>0){var u,m=0;u=h?Math.min(d.length,this.options.visibleRowNum):this.options.editable?Math.min(c.length,this.options.visibleRowNum):Math.min(a,this.options.visibleRowNum);for(t=0;t<u;t++)m+=h?d[t].offsetHeight:c[t].offsetHeight;1==this.options.navBtn?(this.getElementById(this.itemTable.id+"_wrapper").style.height=m+"px",m+=c[0].offsetHeight):o.v.browserCheck.moz&&m<34&&1==u&&(m=34),this.itemTable.setStyle("height",m+"px")}if("column"==this.options.submenuSize){if(this.itemTable.render.scrollHeight>this.itemTable.render.offsetHeight){var b=this.itemTable.mainTable.offsetWidth+17;this.itemTable.render.offsetWidth!==b&&this.itemTable.setStyle("width",b+"px")}}else if(this.itemTableMode&&this[this.itemTableMode+"Options"].width)!0===this.options.navBtn&&this.getElementById(this.id+"_btnArea")&&(this.getElementById(this.id+"_btnArea").style.width=this.itemTable.render.offsetWidth+"px");else if("fixed"==this.options.submenuSize)this.itemTable.setStyle("width",i+"px"),!0===this.options.navBtn&&(this.itemTable.render.firstChild.firstChild.style.width=i+"px",this.getElementById(this.id+"_btnArea")&&(l>i&&l/2<i&&(m+=c[0].offsetHeight,this.itemTable.setStyle("height",m+"px")),this.getElementById(this.id+"_btnArea").style.width=i+"px")),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=i+"px":this.itemTable.render.firstChild.style.width=i-17+"px";else if("auto"==this.options.submenuSize){var p=2;"gridView"!==this.itemTableMode&&"grid"!==this.itemTableMode||(p=0);var f=this.render.offsetWidth-p,g=this.itemTable.render.clientWidth,v=this.itemTable.maxWidth,y=0;if((g=f<v?v:f)<f-2&&(g=f-2),a>this.options.visibleRowNum&&(y=17),g=Math.max(l,g),this.itemTable.setStyle("width",g+"px"),!0===this.options.navBtn&&this.getElementById(this.id+"_btnArea")&&(this.getElementById(this.id+"_btnArea").style.width=g+"px"),this.itemTable.render.clientHeight>=this.itemTable.render.scrollHeight||a<=this.options.visibleRowNum)this.itemTable.render.firstChild.style.width=g+"px",!0===this.options.navBtn&&(this.itemTable.render.firstChild.firstChild.style.width=g+"px");else{this.itemTable.render.firstChild.style.width=g-y+"px";var T=this.itemTable.render.firstChild.offsetWidth;T>g-y&&(this.itemTable.render.firstChild.style.width=T+"px",this.itemTable.setStyle("width",Math.max(l,T)+y+"px"))}}else this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1&&this.itemTable.setStyle("width",Math.max(l,this.itemTable.render.firstChild.offsetWidth)+y+"px");var w=this.options.direction;if("auto"==w){var k=document.body.scrollTop;k<document.documentElement.scrollTop&&(k=document.documentElement.scrollTop);var A=n-k,S=document.documentElement.clientHeight-(A+this.render.offsetHeight),I=this.itemTable.render.offsetHeight,_=Math.max(S,A);if(_<I&&c&&c.length>0){var C=0;for(t=0;t<c.length&&!(C+c[t].offsetHeight+2>_);t++)C+=c[t].offsetHeight;this.itemTable.rowCount=t,this.itemTable.setStyle("height",C+"px"),_!==S&&(w="up")}else S<I&&A>I&&(w="up")}"up"==w?n-=this.itemTable.render.offsetHeight:n+=this.render.offsetHeight,document.documentElement.clientWidth<s+this.itemTable.render.offsetWidth&&(s=s+this.render.offsetWidth-this.itemTable.render.offsetWidth),this.itemTableDirection=w,this.itemTable.setPosition(s,n),WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption){var e=[],t=null;"label"==this.options.sortOption?t=function(){return this.label}:"value"==this.options.sortOption&&(t=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var s=this.itemArr[i];s.toString=t,e.push(s)}e.sort(),"descending"==this.options.sortMethod&&e.reverse(),this.itemArr=e}if(this.options.editable){for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].label,
this.itemArr[i].label=this.getItemText(i);1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0,allchecked:""}].concat(this.itemArr)),this.viewArr=[];for(i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,checked:""})}else{if("0"!=this.options.displayMode)for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr))}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.openSubLayer=function(){try{WebSquare.getBody().getLayerListener().show(this.id)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype._openSubLayer=function(){try{if(this.oldValue=this.getValue(),this.setSubLayer(),!this.isOpen){if(this.itemTable.show(),this.addClass("w2checkcombobox_open"),this.itemTable.render.setAttribute("aria-expanded","true"),this.options.useEdit||this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),this.options.editable||this.itemTable.focus(),""!=this.options.animation){var e="down",t=WebSquare.style.getAbsoluteTop(this.render),i=document.body.scrollTop;i<document.documentElement.scrollTop&&(i=document.documentElement.scrollTop);var s=t-i,o=document.documentElement.clientHeight-(s+this.render.offsetHeight),n=this.itemTable.render.offsetHeight;o<n&&s>n&&(e="up"),"show"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().fadeIn("fast"):"slidedown"==this.options.animation.toLowerCase()&&"down"==e&&$("#"+this.itemTable.id).hide().slideDown("fast")}if(this.editmode&&void 0!==this.dom.input&&null!=this.dom.input&&this.setfFocus(),this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=a.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var l=this._getSelectedInfo();if(l.length>0){var h=this.customLabelFormatter.call(this,l,this.isOpen);this.dom.label&&(this.dom.label.innerHTML=h)}}}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.closeSubLayer=function(e){try{var t={documentClick:e};"grid"==this.itemTableMode&&this.gridItemArr.length>0?this.itemTable.grid.applyFocusedCellOut(this.itemTable.grid.focusedCell[0]):"gridView"==this.itemTableMode&&this.gridViewItemArr.length>0&&this.itemTable.gridView.applyFocusedCellOut(this.itemTable.gridView.focusedCell[0]),WebSquare.getBody().getLayerListener().hide(this.id,t)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.closeSubLayer1=function(e){try{var t={documentClick:e};WebSquare.getBody().getLayerListener().hide(this.id,t)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype._closeSubLayer=function(e){try{var t=(e=e||{}).documentClick,i=this.getValue(),s=this.getInfoArray();if(this.isOpen&&null!=this.itemTable){this.itemTable.hide(),this.removeClass("w2checkcombobox_open"),this.itemTable.render.setAttribute("aria-expanded","true"),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id);var o=this.convertInfoHash2Array(this.selectedInfo);if(o.length>0&&this.setSelectedInfo(o),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=a.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var l=this._getSelectedInfo(),h=this.customLabelFormatter.call(this,l,this.isOpen);""==h&&1==this.options.chooseOption&&(h=this._getChooseOptionLabel(),h=WebSquare.xml.decode(h).replace("&nbsp;"," ")),
this.dom.label&&(this.dom.label.innerHTML=h)}var d=this.getValue();if(i!=d){var c={oldInfo:s,newInfo:this.getInfoArray(),oldValue:i,newValue:d};n.B.fireEvent(this,"onviewchange",c)}!0===t?n.B.fireEvent(this,"onclose",!0):n.B.fireEvent(this,"onclose",!1),this.selectedInfo={}}this._dragGhost&&this._dragGhost.hide()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setSelectedInfo=function(e){try{if(this.modelControl.isBinded())this.modelControl.setData(this.getInfoValue(e));else{var t=this.getValue();this.setSelectedInfoNM(e)&&t!=this.getValue()&&n.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getInfoValue=function(e){try{for(var t=0;t<this.itemArr.length;t++){var i=this.itemArr[t].checked;if(i){for(var s=null,o=0;o<e.length;o++)if(t==parseInt(e[o].index,10)){s=e[o];break}s||e.push({index:t,checked:i})}}var n=[],a=this.convertInfoArray2Hash(e);for(t=0;t<this.itemArr.length;t++){(s=a[t])&&s.checked&&n.push(this.itemArr[t].value)}return n.join(this.separator)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.convertInfoArray2Hash=function(e){try{for(var t={},i=0;i<e.length;i++)t[e[i].index]=e[i];return t}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.convertInfoHash2Array=function(e){try{var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.addSelectedInfo=function(e){try{return!(!e||void 0===e.index)&&(this.selectedInfo[e.index]=e,!0)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setSelectedInfoNM=function(e){try{if(!a.D.isArray(e))return!1;for(var t=0;t<e.length;t++){var i=e[t].index,s=a.D.getBoolean(e[t].checked);i=parseInt(i);var o=document.getElementById(this.id+"_itemTable_"+i+"_checkbox");o&&(o.checked=s),this.itemArr[i].checked=s}var n="";if(1==this.options.allOption){for(var l=!0,h=document.getElementById(this.id+"_itemTable_0_checkbox"),d=1;d<this.itemArr.length;d++)if(!this.itemArr[d].checked){l=!1;break}if(h&&h.checked!=l&&(h.checked=l),1==this.options.displayAllOptionLabel)if(document.getElementById(this.id+"_itemTable_0_checkbox")){if(h)if(1==h.checked)n=WebSquare.language.getMessage("CheckCombobox_allOption_label")||"전체선택";else n=this.getText()}else n=1==l?WebSquare.language.getMessage("CheckCombobox_allOption_label")||"전체선택":this.getText();else n=this.getText()}else n=this.getText();return this.options.escape&&(n=this._encode(n)),this.options.customLabelFormatter&&(this.customLabelFormatter=a.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&""==(n=this.customLabelFormatter.call(this,this._getSelectedInfo(),this.isOpen))&&1==this.options.chooseOption&&(n=this._getChooseOptionLabel(),n=WebSquare.xml.decode(n).replace("&nbsp;"," ")),this.dom.label&&(this.dom.label.innerHTML=n),""==n&&1==this.options.chooseOption&&(n=this._getChooseOptionLabel(),n=WebSquare.xml.decode(n).replace("&nbsp;"," "),this.dom.label&&(this.dom.label.innerHTML=n)),(this.options.editable||this.options.useEdit)&&(this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=n),"title"==this.options.tooltipMode&&(document.getElementById(this.id).title=n),!0}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype._getChooseOptionLabel=function(){try{var e=this.options.chooseOptionLabel||this.defaultChooseOptionLabel;if(this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var t=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);t&&(e=t)}return e}catch(e){r.w.printStackTrace(e)}},c.prototype.getSelectedInfo=function(){try{for(var e=this.getItemCount(),t=[],i=0;i<e;i++)this.itemArr[i].checked&&t.push({index:i,label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,checked:!0});return t}catch(e){r.w.printStackTrace(e,null,this)}},
c.prototype._getSelectedInfo=function(){try{for(var e=this.getItemCount(),t=[],i=0;i<e;i++)this.itemArr[i].checked&&t.push({index:i,label:this.itemArr[i].orgLabel,value:this.itemArr[i].value});return t}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getInfo=function(e){try{var t;return this.itemArr.length>e&&((t={}).index=e,t.label=this.itemArr[e].label,t.value=this.itemArr[e].value,t.checked=a.D.getBoolean(this.itemArr[e].checked)),t}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getInfoArray=function(){try{for(var e=[],t=0;t<this.itemArr.length;t++){var i={};i.index=t,i.label=this.itemArr[t].label,i.value=this.itemArr[t].value,i.checked=a.D.getBoolean(this.itemArr[t].checked),e.push(i)}return e}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setValue=function(e){try{if(a.D.isNull(e))return;var t=this.getValue();if(this.modelControl.isBinded()?this.modelControl.setData(e):1==this.setValueNM(e)&&t!=this.getValue()&&n.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()}),"gridView"===this.itemTableMode)for(var i=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),s=parseInt(this.itemTable.options.gridViewOptions.checkColumn),o=this.itemTable.gridView.getCellInfo(0,s),l=o.options.trueValue,h=o.options.falseValue,d=1==this.options.allOption?1:0,c=this.itemTable.gridView.getRowCount()-d,u=0;u<c;u++){var m=this.itemTable.gridView._getTdElem(u+d,s);!0===this.itemArr[u+d].checked?(m&&(m.getElementsByTagName("input")[0].checked=!0),this.addSelectedInfo({index:u+d,checked:!0}),i.setCellData(u+d,s,l)):(m&&(m.getElementsByTagName("input")[0].checked=!1),this.addSelectedInfo({index:u+d,checked:!1}),i.setCellData(u+d,s,h))}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setValueNM=function(e){try{if(!a.D.isArray(e)){if(a.D.isNull(e))return;var t=e.toString();e=t.split(this.separator)}for(var i=[],s=this.getItemCount(),o=0;o<s;o++)if(this.itemArr[o].value!=WebSquare.allValue){var n={};n.index=o,n.checked=!1;for(var l=0;l<e.length;l++)if(e[l]==this.itemArr[o].value){n.checked=!0;break}i.push(n)}return this.setSelectedInfoNM(i)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getValue=function(e){try{e||(e=this.separator);for(var t=this.getItemCount(),i=[],s=0;s<t;s++)this.itemArr[s].checked&&i.push(this.itemArr[s].value);return i.join(e).wq_trim()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getValueArray=function(){try{for(var e=this.getItemCount(),t=[],i=0;i<e;i++)this.itemArr[i].checked&&t.push(this.itemArr[i].value);return t}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setText=function(e){try{for(var t=this.getItemCount(),i=[],s=this._getRangeTextArray(e),o=0;o<t;o++)for(var n=0;n<s.length;n++)if(this.itemArr[o].label==s[n]){i.push(this.itemArr[o].value);break}this.setValue(i.join(this.separator))}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getText=function(e){try{return this._getRangeText(this.itemArr,this.getItemCount(),e)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype._getRangeText=function(e,t,i,s){try{i||(i=this.separator);for(var o,n=[],a=!1,l=!1,h=0;h<t;h++){(s?!0===s[h+"_"]:e[h].checked)?this.options.rangeSeparator?(h-o==1&&h!==t-1?a||(a=!0,n.push(this.options.rangeSeparator),l=!0):(a=!1,n.push(e[h].label)),o=h):n.push(e[h].label):a&&(n.push(e[o].label),a=!1)}var d="";if(l)for(h=0;h<n.length;h++)d+=n[h],h!==n.length-1&&n[h]!==this.options.rangeSeparator&&n[h+1]!==this.options.rangeSeparator&&(d+=i);else d=n.join(i).wq_trim();return d}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getTextArray=function(e){try{for(var t=this.getItemCount(),i=[],s=0;s<t;s++)this.itemArr[s].checked&&i.push(this.itemArr[s].label);return i}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype._getRangeTextArray=function(e){try{var t=e.split(this.separator);if(this.options.rangeSeparator&&e.indexOf(this.options.rangeSeparator)>=0){
for(var i=[],s=this.getItemCount(),o=0;o<t.length;o++)if(t[o].indexOf(this.options.rangeSeparator)>=0){for(var n=t[o].split(this.options.rangeSeparator),a=NaN,l=NaN,h=0;h<s&&(this.itemArr[h].label==n[0]?a=h:this.itemArr[h].label==n[1]&&(l=h),isNaN(a)||isNaN(l));h++);for(h=a;h<=l;h++)i.push(this.itemArr[h].label)}else i.push(t[o]);return i}return t}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.addItemArr=function(e,t){try{this.itemArr.push({label:e,value:t}),this.itemDisabledArray.push(!1)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.addItem=function(e,t,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var s={value:e,label:t};if(this.itemArr.splice(i,0,s),"0"!=this.options.displayMode&&(this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i)),this.itemDisabledArray.splice(i,0,!1),this.options.editable&&this.options.interactionMode){this.viewArr=[];for(var o=0;o<this.itemArr.length;o++)this.viewArr.push({label:this.itemArr[o].label,value:this.itemArr[o].value,orgLabel:this.itemArr[o].orgLabel,index:o})}return this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.setValueNM(this.getValue()),i}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.deleteItem=function(e){try{if(e=parseInt(e,10),isNaN(e))return;var t=null;if(e>=0&&e<this.getItemCount()){if(t=this.itemArr.splice(e,1)[0],this.options.editable&&this.options.interactionMode){this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i})}this.itemDisabledArray.splice(e,1)}return this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.setValueNM(this.getValue()),t}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.removeAll=function(e){try{var t=this.getValue();this.itemArr=new Array,e&&1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr)),this.setSelectOptions(this.itemArr),this.itemDisabledArray=new Array;for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(!1);this.options.setDataRemoveAll&&(this.modelControl.isBinded()?this.modelControl.setData(""):t!=this.getValue()&&n.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()}))}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.onPropertyChange=function(e,t){try{switch(e){case"disabled":"component"==this.options.renderType?t?(this.closeSubLayer(),this.getElementById(this.id+"_label").style.color="#848684"):this.getElementById(this.id+"_label").style.color="":t?this.dom.select.setAttribute("disabled","disabled"):this.dom.select.removeAttribute("disabled");var i=this.dom.button;1==t?(this.addClass(this.render,"w2checkcombobox_disabled"),null!=i&&this.addClass(i,"w2checkcombobox_button_disabled")):(this.removeClass(this.render,"w2checkcombobox_disabled"),null!=i&&this.removeClass(i,"w2checkcombobox_button_disabled"));break;case"mandatory":1==t?this.addClass(this.render,"w2checkcombobox_mandatory"):this.removeClass(this.render,"w2checkcombobox_mandatory")}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.validate=function(){try{var e=this.validator.validate(this.getValue());return e||this.focus(),e}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.validateObject=function(){try{var e=this.validator.validate(this.getValue()),t={};return e||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(t.callerId=this.validator.obfuscator_invalidObject.callerId,t.type=this.validator.obfuscator_invalidObject.getType(),
t.value=this.validator.obfuscator_invalidObject.getValue())),t}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.hide=function(){try{this.closeSubLayer(),l.s.prototype.hide.call(this)}catch(e){r.w.printStackTrace(e)}},c.prototype.checkAll=function(e){try{void 0===e&&(e=!0);for(var t=[],i=0;i<this.itemArr.length;i++)this.itemArr[i].value!=WebSquare.allValue&&t.push({index:i,checked:e});return null!=this.itemTable&&1==this.options.allOption&&0!=t.length&&document.getElementById(this.id+"_itemTable_0_checkbox")&&(document.getElementById(this.id+"_itemTable_0_checkbox").checked=!!e),this.setSelectedInfo(t)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setRef=function(e){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=e,this.modelControl.setRef(e),this.refresh()}catch(e){r.w.printStackTrace(e)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(e){r.w.printStackTrace(e)}},c.prototype.setInitValue=function(e){try{var t=this.getValue();""===this.options.initValue&&this.itemArr&&this.itemArr[0]&&(this.options.initValue=this.itemArr[0].value),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),e.fireEvent&&t!=this.getValue()&&n.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setItemDisabled=function(e,t){try{if((e=parseInt(e))<0||e>=this.getVisibleItemCount()||"gridView"===this.itemTableMode)return;if(t=a.D.getBoolean(t),this.itemDisabledArray[e]=t,this.itemTable){var i=this.itemTable.getDomList("checkboxArr","input"),s=this.itemTable.getDomList("checkboxItemArr","td");i[e].disabled=t,i[e].itemDisabled=t,1==t?this.addClass(s[e],"w2checkcombobox_item_disabled"):this.removeClass(s[e],"w2checkcombobox_item_disabled")}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getItemDisabled=function(e){try{if((e=parseInt(e))<0||e>=this.getItemCount())return;return this.itemDisabledArray[e]}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var e=a.D.getNextTabbableComp(this.id);e&&e.focus()}}catch(e){r.w.printStackTrace(e)}},c.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var e=a.D.getPreTabbableComp(this.id);e&&e.focus()}}catch(e){r.w.printStackTrace(e)}},c.prototype.getNextTabID=function(){try{var e=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(e=WebSquare.tabOrder[this.id].nextTabID),e}catch(e){r.w.printStackTrace(e)}},c.prototype.setNextTabID=function(e,t){try{null!=e&&a.D.setNextTabID(this.id,e,t)}catch(e){r.w.printStackTrace(e)}},c.prototype.handleClickEvent=function(e){try{if(this.options.disabled)return!1;if(this.options.editable||this.options.useEdit){this._parent_uuid&&n.B.stopPropagation(e);for(var t=this.event.getTargetIterator(e,this.render);t.next();){if(t.match("w2checkcombobox_input")&&this.isOpen)return;if(t.match("w2checkcombobox_col_label"))return this.isOpen&&!this.options.useEdit?this.closeSubLayer():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),this.changeMode(),void(this.options.useEdit&&this.openSubLayer())}if(this.mozTrickBuffer="",this.editmode=!1,this.options.allOption&&this.getItemDisabled(0)&&this.setItemDisabled(0,!1),!this.options.interactionMode){this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i})}var s=this.isOpen;this.setSubLayer(),s==this.isOpen&&(this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()),t=null}else this.focus(),
this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleKeydownEvent=function(e){try{var t=e.charCode?e.charCode:e.keyCode;if(this.options.useEdit&&this.event.isMe(e,this.dom.input))return void(13===t&&this.dom.input.blur());if(this.options.editable){if(this.event.isMe(e,this.dom.input)){if(this.editmode=!0,this.inputKeyDown(e,!1),(o.v.browserCheck.moz||o.v.browserCheck.opera)&&(this.mozTrickCompare(),a.D.setInterval(this.mozTrickCompare,{key:this.id+"_mozTrickCompare",caller:this,delay:10})),9==t)if(e.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(n.B.preventDefault(e),i=a.D.getPreTabbableComp(this.id))return this.endEdit(),this.isOpen&&this.closeSubLayer(),void i.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(n.B.preventDefault(e),i=a.D.getNextTabbableComp(this.id))return this.endEdit(),this.isOpen&&this.closeSubLayer(),void i.focus();return}t=e.charCode?e.charCode:e.keyCode;if(o.v.browserCheck.opera){if(18==t&&!this.isOpen)return void this.handleClickEvent(e);if(13==t&&!this.isOpen)return void this.changeMode()}else{if(!(40!=t&&38!=t||this.isOpen))return void this.handleClickEvent(e);if(13==t&&!this.isOpen)return void this.changeMode()}if(9==t)if(e.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(n.B.preventDefault(e),i=a.D.getPreTabbableComp(this.id)))return this.isOpen&&this.closeSubLayer(),void i.focus()}else null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(n.B.preventDefault(e),(i=a.D.getNextTabbableComp(this.id))&&(this.isOpen&&this.closeSubLayer(),i.focus()));if(null!=this.itemTable&&this.viewArr.length>0)1==this.isOpen&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable.handleKeydownEvent(e),this.editmode=!1;else if(null!=this.itemTable&&""==this.itemTable.render.style.display)return;if(null!=this.itemTable&&""==this.itemTable.render.style.display)return}else{if(13==t||40==t)return void this.handleClickEvent(e);var i;if(9==t)if(e.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(n.B.preventDefault(e),i=a.D.getPreTabbableComp(this.id)))return void i.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(n.B.preventDefault(e),i=a.D.getNextTabbableComp(this.id)))return void i.focus();if(this.isOpen)return;n.B.stopPropagation(e)}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleKeyupEvent=function(e){try{if(!this.event.isMe(e,this.dom.input))return;var t;if(e.key)t=e.key;else{var i=e.charCode?e.charCode:e.keyCode;t=String.fromCharCode(i)}if(t===this.options.separator)for(var s=this._getRangeTextArray(this.dom.input.value),o=this.getItemCount(),n=0;n<o;n++)if(this.itemArr[n].value!==WebSquare.allValue&&this.itemArr[n].value!==this.options.chooseOptionValue){var a=document.getElementById(this.id+"_itemTable_"+n+"_checkbox"),l=!1;this.itemArr[n].label===s[0]&&(l=!0,s.shift()),a&&(a.checked=l),this.itemArr[n].checked=l}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleFocusEvent=function(e){try{if(n.B.stopEvent(e),(this.options.editable||this.options.useEdit)&&!this.isOpen){var t=document.getElementById(this.id+"_main_tbody");this.addClass(t,"w2checkcombobox_selected"),"onfocus"==this.options.editModeEvent&&this.changeMode()}this.addClass(this.dom.tbody,"w2checkcombobox_focus"),this.addClass("w2checkcombobox_body_focus")}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleClickEventDocument=function(e){try{!this.event.isMe(e,this.render)&&this.options.handleOtherClick&&(null!=this.itemTable&&this.itemTable.inputBlurInside&&(o.v.setTimer(this.endEdit,{key:this.id+"_handleClickEventDocument",caller:this,delay:1}),this.itemTable.inputBlurInside=!1),
this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),null!=this.itemTable&&0==this.findkeymode?WebSquare.getBody().getLayerListener().isShow(this.id)&&this.closeSubLayer():null!=this.itemTable&&1==this.findkeymode&&(this.findkeymode=!0))}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleBlurEvent=function(e){try{n.B.stopEvent(e),this.removeClass(this.dom.tbody,"w2checkcombobox_focus"),this.removeClass("w2checkcombobox_body_focus")}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleblurEventInput=function(){"none"!=this.dom.input.style.display&&this.options.handleOtherClick&&(null==this.itemTable||null!=this.itemTable&&!this.itemTable.inputBlurInside)&&(this.endEdit(),this.isOpen&&this.closeSubLayer())},c.prototype.handleMouseoverEvent=function(e){try{n.B.stopEvent(e),this.addClass(this.dom.tbody,"w2checkcombobox_over"),this.addClass("w2checkcombobox_body_over")}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleMouseoutEvent=function(e){try{n.B.stopEvent(e),this.removeClass(this.dom.tbody,"w2checkcombobox_over"),this.removeClass("w2checkcombobox_body_over")}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleMouseleaveEvent=function(e){try{var t=this.render.offsetHeight-1,i=this.render.offsetWidth-1,s=this.getAbsolutePosition("top"),o=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(e.clientX<o||e.clientX>o+i||e.clientY>s||e.clinetY>s+t)&&this.closeSubLayer():(e.clientX<o||e.clientX>o+i||e.clientY<s||e.clinetY>s+t)&&this.closeSubLayer())}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setDisplayAllOptionLabel=function(e){try{if(!this.options.allOption)return;var t=this.options.displayAllOptionLabel,i=a.D.getBoolean(e);this.options.displayAllOptionLabel=i;var s=document.getElementById(this.id+"_itemTable_0_checkbox");if(t!=i){var o=!0;if(!s||!s.checked)for(var n=1;n<this.getItemCount();n++)if(!this.itemArr[n].checked){o=!1;break}if(!1===o)return;var l="";l=1==i?WebSquare.language.getMessage("CheckCombobox_allOption_label")||"전체선택":this.getText(),this.options.escape&&(l=this._encode(l)),this.options.customLabelFormatter&&(this.customLabelFormatter=a.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&(l=this.customLabelFormatter.call(this,this._getSelectedInfo(),this.isOpen)),this.dom.label&&(this.dom.label.innerHTML=l),"title"==this.options.tooltipMode&&(document.getElementById(this.id).title=l)}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.serialize=function(){return{selectedInfo:this.getSelectedInfo()}},c.prototype.restore=function(e){try{return this.checkAll(!1),this.setSelectedInfo(e.selectedInfo),!0}catch(e){return r.w.printStackTrace(e,null,this),!1}},c.prototype.changeMode=function(){try{if(this.editmode=!0,this.findStop=!1,"block"!=this.dom.input.style.display){if(this.options.rangeSeparator)return this.dom.input.value=this.getText(),this.showEditMode(!0),void("focus"!=this.options.editType?(this.dom.input.select(),this.setfFocus()):document.activeElement!=this.dom.input&&this.setfFocus());var e="",t=this.getCheckedValue(this.options.searchTarget);t.length>0&&(e=t.join(this.separator).wq_trim());var i=e;if(this.options.useEdit||(i+=" "),"focus"==this.options.editType){this.showEditMode(!0),document.activeElement!=this.dom.input&&this.setfFocus();var s=WebSquare.xml.decode(i);this.dom.input.value=s,(a.D.isOpera()||a.D.isFF())&&this.dom.input.setSelectionRange(s.length,s.length)}else this.dom.input.value=WebSquare.xml.decode(i),this.showEditMode(!0),this.dom.input.select(),this.setfFocus()}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getCheckedValue=function(e){var t=[];e||(e="orgLabel");for(var i=0;i<this.itemArr.length;i++)this.itemArr[i].checked&&t.push(this.itemArr[i][e]);return t},c.prototype.showEditMode=function(e){e?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",
this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):o.v.setTimer((function(){try{this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible"}catch(e){}}),{key:this.id+"_showEditMode",caller:this,delay:1})},c.prototype.setfFocus=function(){try{this.dom.input.focus(),null!=this.itemTable&&(this.itemTable.inputBlurInside=!1)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setDisabled=function(e){try{e=a.D.getBoolean(e),this.options.disabled=e,this.setProperty("disabled",e),!0===e?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(e){r.w.printStackTrace(e)}return e},c.prototype.initCheckCombobox=function(){try{this.removeAll(),this.dom.input.value="",this.dummyData=null,this.isOpen&&this.closeSubLayer()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.removeAll=function(e){try{if(this.itemArr=new Array,e&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption)){var t=this._getChooseOptionLabel();this.itemArr=[{label:t,value:this.options.chooseOptionValue,orgLabel:t,noItem:!0}].concat(this.itemArr)}this.setSelectOptions(this.itemArr),this.itemArr.length>0?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[0].label):this.itemArr[0].label:this.dom.label.innerHTML=""}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.mozTrickCompare=function(){try{this.dom.input.value!=this.trickBuffer&&(this.trickBuffer=this.dom.input.value,0==this.findStop&&this.inputKeyDown({},!0))}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setInputFocus=function(){try{this.changeMode()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.inputKeyDown=function(e,t){try{if(0==t)var i=e.charCode?e.charCode:e.keyCode;if(this.interactionMode){if(this.editmode=!1,0==t)if("default"==this.options.interactionKey||this.isOpen||this.options.interactionEnterKey)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return o.v.browserCheck.chrome||o.v.browserCheck.safari||a.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(o.v.browserCheck.moz||o.v.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(e),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus());if(13==i)return void(this.options.interactionEnterKey?this.mytime=this.runSubmission(i):this.enterHandle(e));if(9==i||9==i&&e.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return this.arrowHandle(e),WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus(),o.v.browserCheck.chrome||o.v.browserCheck.safari||a.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(o.v.browserCheck.moz||o.v.browserCheck.opera)&&(this.findStop=!0),this.endEdit(),void(this.isOpen&&this.closeSubLayer())}}else;else this.options.interactionKey;if(!this.options.interactionEnterKey){var s=this;this.mytime=setTimeout((function(){s.runSubmission(i)}),100)}return}if(0==t)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return o.v.browserCheck.chrome||o.v.browserCheck.safari||a.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(o.v.browserCheck.moz||o.v.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(e),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus());if(13==i)return void this.enterHandle(e);if(9==i||9==i&&e.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return this.arrowHandle(e),o.v.browserCheck.chrome||o.v.browserCheck.safari||a.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),
this.hideTime&&clearTimeout(this.hideTime)):(o.v.browserCheck.moz||o.v.browserCheck.opera)&&(this.findStop=!0),void(this.isOpen&&this.closeSubLayer())}}else if(""==this.dom.input.value.wq_trim())return void this.render.click();if(this.itemArr.length>0){s=this;this.mytime=setTimeout((function(){s.find()}),100)}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.arrowHandle=function(e){try{var t=e.charCode?e.charCode:e.keyCode;if(null==this.itemTable)return;var i=this.findinItemArr(this.dom.input.value,this.options.searchTarget);return!this.editmode&&!this.findkeymode||""!=this.dom.input.value&&0!=this.viewArr.length?(9==t||9==t&&e.shiftKey?this.addSelectedInfo({index:i,checked:!0}):this.itemTable.handleKeydownEvent(e),void(this.mozTrickBuffer="")):void n.B.stopEvent(e)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.find=function(){try{var e=this.dom.input.value;if(""==e)return this.mozTrickBuffer=e,void(null!=this.itemTable&&this.closeSubLayer());if(this.mozTrickBuffer==e)return void(this.mozTrickBuffer=e);this.mozTrickBuffer=e,this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(e=e.toLowerCase());for(var t=0;t<this.itemArr.length;t++)if(!this.itemArr[t].noItem){var i=!1;if(this.itemArr[t].orgLabel||(this.itemArr[t].orgLabel=this.itemArr[t].label,this.itemArr[t].label=this.getItemText(t)),!i&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var s=this.options.caseSensitive?this.itemArr[t].orgLabel:this.itemArr[t].orgLabel.toLowerCase();"contain"==this.search?i=this.myhelper.containWith(s,e):"start"==this.search?i=this.myhelper.startWith(s,e):"none"==this.search&&(i=s==e)}if(!i&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var o=this.options.caseSensitive?this.itemArr[t].value:this.itemArr[t].value.toLowerCase();"contain"==this.search?i=this.myhelper.containWith(o,e):"start"==this.search?i=this.myhelper.startWith(o,e):"none"==this.search&&(i=o==e)}var n=this.itemArr[t].label;if(this.options.useKeywordHighlight){var a=n.indexOf(this.mozTrickBuffer);a>=0&&(n=n.substring(0,a)+"<span class='w2checkcombobox_keyword'>"+this.mozTrickBuffer+"</span>"+n.substring(a+this.mozTrickBuffer.length,n.length))}i&&this.viewArr.push({value:this.itemArr[t].value,label:n,orgLabel:this.itemArr[t].orgLabel,index:t})}if(this.options.disabled)return!1;this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr),this.setItemDisabled(0,!0)),this.openSubLayer({select:!1})):this.closeSubLayer()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.getFormattedValue=function(e,t){try{var i=t;if(this.options.displayFormatter){if(!this.displayFormatter){this.fixedIndex=-1,1==this.options.allOption&&this.fixedIndex++,1==this.options.chooseOption&&this.fixedIndex++;try{var s=a.D.getGlobalFunction(this.options.displayFormatter,this.scope_id);"function"==typeof s&&(this.displayFormatter=s)}catch(e){}}this.displayFormatter&&e>this.fixedIndex&&(i=this.displayFormatter(t))}return i}catch(e){r.w.printStackTrace(e)}},c.prototype.enterHandle=function(e){try{var t,i=this.dom.input.value;if(n.B.fireEvent(this,"oneditend",i),(null==this.itemTable||null==this.itemTable.selectedCell)&&(null==this.itemTable&&this.setSubLayer(),null==this.itemTable.selectedCell)){var s=this.findinItemArr(this.dom.input.value,this.options.searchTarget);if("clear"===this.noResult);else if("previous"===this.noResult)void 0===s||this.addSelectedInfo({index:s,checked:!0});else if("noEnd"===this.noResult){if(void 0===s)return;this.addSelectedInfo({index:s,checked:!0})}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==s?(this.selectedInfo={},t=this.findinItemArr(this.viewArr[0].value,"value")):t=s,this.addSelectedInfo({index:t,checked:!0
})):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(this.selectedInfo={},t=this.findinItemArr(this.itemArr[0].value,"value"),this.addSelectedInfo({index:t,checked:!0})))}if(o.v.browserCheck.opera&&n.B.stopEvent(e),this.mozTrickBuffer="",null!=this.itemTable.selectedCell)if(t=this.findinItemArr(this.dom.input.value,this.options.searchTarget),"clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode?void 0===t&&(this.selectedInfo={}):(void 0===t&&void 0===(t=this.itemTable.selectedCell.index)&&(t=this.itemTable.selectedCell.getAttribute("index")),this.addSelectedInfo({index:t,checked:!0}));else if("noEnd"===this.noResult){if(void 0===t)return;this.addSelectedInfo({index:t,checked:!0})}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==t&&(t=this.findinItemArr(this.viewArr[0].value,"value")),this.addSelectedInfo({index:t,checked:!0})):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(t=this.findinItemArr(this.itemArr[0].value,"value"),this.selectedInfo={},this.addSelectedInfo({index:t,checked:!0})));this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.focus(),this.closeTable()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.findinItemArr=function(e,t){try{for(var i=t||"label",s=0;s<this.itemArr.length;s++)if("value"===i){if(e==this.itemArr[s].value)return s}else if("label"===i){if(1==this.options.displayMode||2==this.options.displayMode){if(e==this.itemArr[s].orgLabel)return s}else if(e==this.itemArr[s].label)return s}else if("both"===i){if(e==this.itemArr[s].orgLabel||e==this.itemArr[s].value)return s}else if("all"===i&&e==this.itemArr[s].orgLabel+"|"+this.itemArr[s].value)return s;if(this.dummyData&&("value"===i&&this.dummyData.value||"label"===i&&e===this.dummyData.label||"all"===i&&e===this.dummyData.label+"|"+this.dummyData.value))return NaN}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.runSubmission=function(e){try{var t=!0,i=this.dom.input.value,s=a.D.getStringByteSize(i);if(this.options.interactionMinByteLength>0&&this.options.interactionMinByteLength>s&&(t=!1),"false"!=this.options.allowEmptySubmission&&""==i||"default"==this.options.interactionKey&&this.mozTrickBuffer==i&&(t=!1),t)if(this.mozTrickBuffer=i,""!=this.options.submissionFunc.wq_trim()){var o=a.D.getGlobalFunction(this.options.submissionFunc,this.scope_id);"function"==typeof o&&o(i,e)}else if(""!=this.options.submission.wq_trim()){var n="<key>"+WebSquare.xml.encode(i)+"</key>";WebSquare.WebSquaredoc.models[0].rebuild(WebSquare.xml.parse(n),this.options.keyInputRef),WebSquare.WebSquaredoc.models[0].refresh(),WebSquare.ModelUtil.executeSubmission(this.options.submission)}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setItemSet=function(e,t,i){try{void 0===this.itemsetObj&&(this.itemsetObj={});var s=!1;t==this.itemsetObj.label&&i==this.itemsetObj.value||(s=!0),this.itemsetObj.nodeset=e,s&&(this.itemsetObj.label=t,this.itemsetObj.value=i),this.buildItemArr();for(var n=0;n<this.itemArr.length;n++)this.itemArr[n].orgLabel=this.itemArr[n].label,this.itemArr[n].label=this.getItemText(n);if(this.options.interactionMode){if(o.v.clearTimer(this.id+"_showEditMode",!0),1==this.options.allOption&&this.itemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption){t=this._getChooseOptionLabel();this.itemArr=[{label:t,value:this.options.chooseOptionValue,orgLabel:t,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(n=0;n<this.itemArr.length;n++){var a=this.itemArr[n].label;if(this.options.useKeywordHighlight){var l=a.indexOf(this.mozTrickBuffer)
;l>=0&&(a=a.substring(0,l)+"<span class='w2checkcombobox_keyword'>"+this.mozTrickBuffer+"</span>"+a.substring(l+this.mozTrickBuffer.length,a.length))}this.viewArr.push({label:a,orgLabel:this.itemArr[n].orgLabel,value:this.itemArr[n].value,index:n})}}else{if(1==this.options.chooseOption){t=this._getChooseOptionLabel();this.itemArr=[{label:t,value:this.options.chooseOptionValue,orgLabel:t,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(n=0;n<this.itemArr.length;n++)this.viewArr.push({label:this.itemArr[n].label,value:this.itemArr[n].value,orgLabel:this.itemArr[n].orgLabel,index:n})}var h=this.getCheckedValue(this.options.searchTarget),d="";h.length>0&&(d=h.join(this.separator).wq_trim()),this.itemArr.length>0?this.dom.label.innerHTML=d:this.dom.label.innerHTML=""}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.buildItemArr=function(){try{this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.itemArr=[],this.itemsetObj.nodeset.match("data:")?(this.itemArr=this.modelControl.getDataCollectionItemsetData(this.id),this.allItemArr=this.modelControl.getDataCollectionItemsetData(this.id,{allData:!0})):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr))}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.closeTable=function(){try{this.closeSubLayer()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.openTable=function(){try{this.showTable()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.endEdit=function(){try{var e=this.dom.input.value;if(n.B.fireEvent(this,"oneditend",e),this.options.useEdit)return void this.setText(e);this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.mozTrickBuffer="",(o.v.browserCheck.moz||o.v.browserCheck.opera)&&(this.findStop=!0,a.D.clearInterval(this.id+"_mozTrickCompare"))}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.showTable=function(){try{this.openSubLayer({select:!1})}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.setGridViewData=function(){try{var e=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),t=this.gridViewOptions.dataComp.filterManager.filterArr;if(t)for(var i=0;i<t.length;i++)e.setColumnFilter({type:t[i].options.type,colIndex:t[i].options.colIndex,key:t[i].options.key,condition:t[i].options.condition});if(this.options.allOption){var s=e.getAllData(),o=WebSquare.language.getMessage("CheckCombobox_all")||"-전체-";if(s[0]!=o){for(var n=[],a=-1,l=0;l<e.cellIdList.length;l++)-1==a&&e.cellIdList[l]==this.itemsetObj.label&&(a=l),n.push("");this.labelColumn=-1==a?0:a,n[this.labelColumn]=this.defaultAllOptionLabel,e.setRowData(0,n,!1)}}var h=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;h&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),h&&this.itemTable.hide()}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype._closeOtherLayer=function(e){try{var t=(e=e||{}).documentClick,i=this.otherComponent;if("grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i){i.hide(),this.removeClass("w2checkcombobox_open");var s=this.getValue(),o=this.getInfoArray(),a=this.convertInfoHash2Array(this.selectedInfo);a.length>0&&this.setSelectedInfo(a),this.isOpen=!1;var l=this.getValue();if(s!=l){var h={oldInfo:o,newInfo:this.getInfoArray(),oldValue:s,newValue:l};n.B.fireEvent(this,"onviewchange",h)}this.isOpen=!1,!0===t?n.B.fireEvent(this,"onclose",!0):n.B.fireEvent(this,"onclose",!1),this.selectedInfo={}}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype._openOtherLayer=function(){try{if("gridView"==this.itemTableMode&&this.gridViewItemArr.length<=0)return;var e=this.otherComponent
;if("grid"==this.itemTableMode?(this.setSubLayer(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),e=this.itemTable):"gridView"==this.itemTableMode&&(this.setSubLayer(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.style.height),e=this.itemTable),!this.isOpen){e.show(),this.addClass("w2checkcombobox_open");var t=WebSquare.style.getAbsoluteLeft(this.render),i=WebSquare.style.getAbsoluteTop(this.render),s=this.options.direction;if("auto"==s){var o=document.body.scrollTop;o<document.documentElement.scrollTop&&(o=document.documentElement.scrollTop);var n=i-o,a=document.documentElement.clientHeight-(n+this.render.offsetHeight),l=e.render.offsetHeight;a<l&&n>l&&(s="up")}"up"==s?i-=e.render.offsetHeight:i+=this.render.offsetHeight,document.documentElement.clientWidth<t+e.render.offsetWidth&&(t=t+this.render.offsetWidth-e.render.offsetWidth),"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(t=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(e.render.style.width=this.render.offsetWidth+"px")),e.setPosition(t,i),this.isOpen=!0,this.itemTableDirection=s,WebSquare.style.adjustZIndex(this.uuid,e.uuid,"itemTable")}if("grid"==this.itemTableMode)null!=this.targetFocusedIndex?h=this.targetFocusedIndex:-1==(h=this.itemTable.grid.getFocusedRowIndex())&&(h=0),this.itemTable.grid.setFocusedCell(h,0),this.targetFocusedIndex=null;else if("gridView"==this.itemTableMode){var h;null!=this.targetFocusedIndex?h=this.targetFocusedIndex:-1==(h=this.itemTable.gridView.getFocusedRowIndex())&&(h=0),this.itemTable.gridView.setFocusedCell(h,0),this.targetFocusedIndex=null}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype._clearVisibleColumnChecked=function(){try{for(var e=!1,t=0;t<this.itemArr.length;t++){var i=this.itemArr[t];!0===i._hidden&&!1!==i.checked&&(i.checked=!1,e=!0)}if(e){var s=this.getValue();this.modelControl.isBinded()&&this.modelControl.setData(s),this.setValueNM(s)}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype._encode=function(e){var t=e;try{var i="<span class='w2checkcombobox_keyword'>",s="</span>",o=e.indexOf(s,i.length);return t=this.options.useKeywordHighlight&&o>=0&&e.slice(0,i.length)===i&&e.slice(o,o+s.length)===s?i+WebSquare.xml._encode(e.slice(i.length,o))+s+WebSquare.xml._encode(e.slice(o+s.length)):WebSquare.xml._encode(e)}catch(e){return r.w.printStackTrace(e,null,this),t}},c.prototype.handleItemtableMousedown=function(e){try{for(var t=this.itemTable.event.getTargetIterator(e);t.next();)if(t.match(this.itemTable.options.w2table_col,null,"td")){var i=t.getElement(),s=n.B.getMouseX(e),o=n.B.getMouseY(e);this._currentTarget={row:parseInt(i.getAttribute("row"),10),col:parseInt(i.getAttribute("col"),10),mouseX:s,mouseY:o,selectedIndex:{},shiftKey:e.shiftKey},this._dragGhost.setPosition(s,o),this._dragGhost.show();var l={passive:!1};return a.D.emptySelection(),n.B.preventDefault(e),void(1==a.D.isMobile()?(this.itemTable.event.addListener(document.documentElement,"ontouchmove",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousemove),l),this.itemTable.event.addListener(document.documentElement,"ontouchend",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMouseup),l)):(this.itemTable.event.addListener(document.documentElement,"onmousemove",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousemove),l),this.itemTable.event.addListener(document.documentElement,"onmouseup",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMouseup),l)))}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleItemtableMousemove=function(e){try{if(!this._currentTarget)return;var t=n.B.getMouseX(e),i=n.B.getMouseY(e),s=t-this._currentTarget.mouseX,o=i-this._currentTarget.mouseY,a=s>0?0:s,l=o>0?0:o;(a<0||l<0)&&this._dragGhost.setPosition(this._currentTarget.mouseX+a,this._currentTarget.mouseY+l),
this._dragGhost.setSize(Math.abs(s),Math.abs(o));for(var h=n.B.getTarget(e),d=this.itemTable.event.getTargetIterator(e);d.next();)if(d.match(this.itemTable.options.w2table_col,null,"td")){h=d.getElement();for(var c=parseInt(h.getAttribute("row"),10),u=parseInt(h.getAttribute("col"),10),m=h.parentNode.childNodes.length,b=c-this._currentTarget.row,p=u-this._currentTarget.col,f=Math.abs(b),g=Math.abs(p),v={},y=0;y<=f;y++)for(var T=0;T<=g;T++){var w=(b>0?this._currentTarget.row+y:this._currentTarget.row-y)*m+(p>0?this._currentTarget.col+T:this._currentTarget.col-T);if(v[w]=!0,!this._currentTarget.selectedIndex[w])(A=document.getElementById(this.itemTable.id+"_"+w))&&A.firstChild&&A.firstChild.checked===this._currentTarget.shiftKey&&A.click()}for(var k in this._currentTarget.selectedIndex){var A;if(!v[k])(A=document.getElementById(this.itemTable.id+"_"+k))&&A.click()}this._currentTarget.selectedIndex=v,d.stop()}}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleItemtableMouseup=function(e){try{this._currentTarget=null,this._dragGhost.setSize(0,0),this._dragGhost.hide(),1==a.D.isMobile()?(this.itemTable.event.removeEvent(document.documentElement,"ontouchmove"),this.itemTable.event.removeEvent(document.documentElement,"ontouchend")):(this.itemTable.event.removeEvent(document.documentElement,"onmousemove"),this.itemTable.event.removeEvent(document.documentElement,"onmouseup"))}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.handleInputValidator=function(e){try{var t=this.dom.input.value,i=this.validator.validateKeyInput(this.dom.input,t,e);if(i.valid){if(t!==i.str){var s=WebSquare.text.getCaretPos(this.dom.input);a.D.isIEAllVersion()||(s-=t.length-i.str.length),this.dom.input.value=i.str,WebSquare.text.setCaretPos(this.dom.input,s)}}else n.B.stopEvent(e)}catch(e){r.w.printStackTrace(e,null,this)}},c.prototype.refreshEnable=function(){try{for(var e=this.getItemCount(),t=0;t<e;t++)this.itemArr[t]&&!0===this.itemArr[t]._disabled?this.setItemDisabled(t,!0):this.setItemDisabled(t,!1)}catch(e){r.w.printStackTrace(e,null,this)}}}}]);