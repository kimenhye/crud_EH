(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[6315],{6315:(t,e,i)=>{"use strict";i.r(e),i.d(e,{floatingLayer:()=>h});var r=i(5405),s=i(465),o=i(5130),n=i(6146),a=i(209),d=i(6247),h=function(t,e,i){d.s.call(this,t,e,i)};r.x.extend(h.prototype,d.s.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.floatingLayer",pluginName:"floatingLayer",parseChild:!0,userEvents:["onclose","onlayermove","onlayerclick","onbeforeclose","onlayerresize"],useConfig:!0,bodyComplex:!0,dragAlwaysView:!1,title:"",titleClass:"",useResizeDrag:!1,modal:!1,closeButtonSrc:"",closeButtonClass:"",headerLeftClass:"",headerCenterClass:"",headerRightClass:"",bodyLeftClass:"",bodyCenterClass:"",bodyRightClass:"",bodyLeftBottomClass:"",bodyBottomClass:"",bodyRightBottomClass:"",useModal:!1,useModalStack:"",useAnchor:!1,dragAutoPosition:!1,movable:!0,documentTitle:!0,closeTitle:"close",ghostLayer:!1,headerHTML:"",dragResizable:!1,fixed:!1},h.prototype.initialize=function(t){try{this.zIndex=0,""==this.options.useModalStack&&(this.options.useModalStack=s.v.getConfiguration("/WebSquare/floatingLayer/@useModalStack")),this.modalStack=0}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{var t=[],e=this.options.title?"title='"+this.options.title.wq_replaceAll("'","&#39;")+"'":"",i=""==this.options.style?"":"style='"+this.options.style+"'",r=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'";if(t.push("<div role='application' id='"+this.id+"' "+i+" class='w2floatingLayer "+this.options.className+"' "+r+">"),t.push("<table class='w2floatingLayer_table'>"),t.push("<tr class='w2floatingLayer_dragArea'>"),t.push("<td class='w2floatingLayer_topleft "+this.options.headerLeftClass+"'></td>"),t.push("<td id='"+this.id+"_headerHTML' class='w2floatingLayer_topcenter "+this.options.headerCenterClass+"' "+e+" >"),this.options.headerHTML){var s=this.options.headerHTML;try{var n=a.D.getGlobalFunction(this.options.headerHTML,this.scope_id);s="function"==typeof n?n():n}catch(t){s=this.options.headerHTML}t.push(s)}else t.push("<div id='"+this.id+"_titleDiv' class='w2floatingLayer_title "+this.options.titleClass+"' >"+this.options.title+"</div>"),a.D.getBoolean(this.options.useATagBtn)?t.push("<a id='"+this.id+"_closeButton' class='w2floatingLayer_close_button "+this.options.closeButtonClass+"' "+r+"' href='javascript:void(null);' title='"+this.options.closeTitle+"' ></a></div>"):t.push("<div id='"+this.id+"_closeButton' class='w2floatingLayer_close_button "+this.options.closeButtonClass+"' "+r+" title='"+this.options.closeTitle+"' ></div>");if(t.push("</td>"),t.push("<td class='w2floatingLayer_topright "+this.options.headerRightClass+"'></td>"),t.push("</tr>"),a.D.getBoolean(this.options.fullContentArea)){t.push("<tr>"),t.push("<td class='w2floatingLayer_fullContentArea' colSpan=3>"),t.push("<div id='"+this.id+"_contents' class='w2floatingLayer_contents "+this.options.bodyCenterClass+"'>"),t.push("<div id='"+this.id+"_innerLink' class='w2floatingLayer_innerLink' tabIndex='0'>"+this.options.title+"</div>");for(var d=this.getChildren(),h=0;h<d.length;h++)t.push(d[h].toHTML());t.push("</div>"),t.push("</td>"),t.push("</tr>")}else{t.push("<tr>"),t.push("<td class='w2floatingLayer_dragArea w2floatingLayer_centerleft "+this.options.bodyLeftClass+"'></td>"),t.push("<td class='w2floatingLayer_centercenter'>"),t.push("<div id='"+this.id+"_contents' class='w2floatingLayer_contents "+this.options.bodyCenterClass+"'>"),t.push("<div id='"+this.id+"_innerLink' class='w2floatingLayer_innerLink' "+r+">"+this.options.title+"</div>");for(d=this.getChildren(),h=0;h<d.length;h++)t.push(d[h].toHTML());t.push("</div>"),t.push("</td>"),t.push("<td class='w2floatingLayer_dragArea w2floatingLayer_centerright "+this.options.bodyRightClass+"'></td>"),t.push("</tr>"),t.push("<tr class='w2floatingLayer_dragArea'>"),t.push("<td class='w2floatingLayer_bottomleft "+this.options.bodyLeftBottomClass+"'></td>"),
t.push("<td class='w2floatingLayer_bottomcenter "+this.options.bodyBottomClass+"'></td>"),t.push("<td class='w2floatingLayer_bottomright "+this.options.bodyRightBottomClass+"'></td>"),t.push("</tr>")}return t.push("</table>"),this.options.dragResizable&&(t.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize_right'></div>"),t.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize'></div>"),t.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize_bottom'></div>")),t.push("</div>"),t.join("")}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.setPreAction=function(){try{if(this.dom.contents=this.getElementById(this.id+"_contents"),this.dom.closeButton=this.getElementById(this.id+"_closeButton"),1==this.options.useModal){var t=a.D.getStyleProperty(this.render,"z-index");t&&"auto"!=t||(t=4500),this.render.style.zIndex=t,this.zIndex=t}}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{if(this.dom.contents=this.getElementById(this.id+"_contents"),this.dom.closeButton=this.getElementById(this.id+"_closeButton"),1==this.options.useModal){var t=a.D.getStyleProperty(this.render,"z-index");a.D.getStyleProperty(this.render,"z-index")&&"auto"!=t||(this.render.style.zIndex=4500)}this.resetContentSize(),a.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStart)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent))}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.handleKeydownEvent=function(t){try{if(13!=(t.charCode?t.charCode:t.keyCode))return;this.handleClickEvent(t)}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.handleFocusEvent=function(t){try{this.dom.titleDiv||(this.dom.titleDiv=this.getElementById(this.id+"_titleDiv")),this.dom.titleDiv&&this.options.documentTitle&&(document.title=this.dom.titleDiv.innerHTML)}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.handleBlurEvent=function(t){try{this.options.documentTitle&&(document.title=WebSquare.docTitle)}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.focus=function(){try{this.render.focus()}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.handleClickEvent=function(t){try{n.B.fireEvent(this,"onlayerclick"),n.B.stopPropagation(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2floatingLayer_close_button")){if(!1===n.B.fireEvent(this,"onbeforeclose"))break;this.hide(),this.options.useModal,n.B.fireEvent(this,"onclose")}e=null}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.handleMousedownEvent=function(t){try{if(!this.options.movable)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2floatingLayer_dragArea")&&!this.options.fixed){var i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:10,mode:"move",makeGhostLayer:function(t){t.setSize(i.render.offsetWidth,i.render.offsetHeight);var e=WebSquare.style.getAbsoluteLeft(i.render),r=WebSquare.style.getAbsoluteTop(i.render);return t.setPosition(e,r),t},handleStart:function(){
1==i.options.useModal&&WebSquare.getBody().showModal("w2modal_onmove")},handleFinish:function(t,e,r,s){var o,a,d=/matrix\((-?\d*\.?\d+),\s*0,\s*0,\s*(-?\d*\.?\d+),\s*0,\s*0\)/,h=WebSquare.style.getStyle(document.body,"transform");h?(o=null==(o=h.match(d))?1:parseFloat(o[1])||1,a=null==(a=h.match(d))?1:parseFloat(a[2])||1):(o=1,a=1),WebSquare.idCache[i.parentFrame]?i.setPosition((t+r-WebSquare.style.getAbsoluteLeft(WebSquare.idCache[i.parentFrame].render))/o,(e+s-WebSquare.style.getAbsoluteTop(WebSquare.idCache[i.parentFrame].render))/a):i.setPosition((t+r-WebSquare.style.getAbsoluteLeft(document.body))/o,(e+s-WebSquare.style.getAbsoluteTop(document.body))/a),1==i.options.useModal&&WebSquare.getBody().hideModal(!0),n.B.fireEvent(i,"onlayermove",t+r,e+s)}})}if(e.match("w2floatingLayer_resize")){n.B.stopEvent(t);i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),r=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),o=s.width,n=s.height;return o=o-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),n=n-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(o,n),t.setPosition(e,r),t},handleStart:function(){i.showModal.call(i)},handleFinish:function(t,e,r,s,o){i.hideModal.call(i);var n=parseInt(i.getStyle("width"),10)+r,a=parseInt(i.getStyle("height"),10)+s;i.setSize(n,a)}})}if(e.match("w2floatingLayer_resize_right")){n.B.stopEvent(t);i=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize_right",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),r=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),o=s.width,n=s.height;return o=o-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),n=n-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(o,n),t.setPosition(e,r),t},handleStart:function(){i.showModal.call(i)},handleFinish:function(t,e,r,s,o){i.hideModal.call(i);var n=parseInt(i.getStyle("width"),10),a=parseInt(i.getStyle("height"),10),d=n+r;i.setSize(d,a)}})}if(e.match("w2floatingLayer_resize_bottom")){n.B.stopEvent(t);i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize_bottom",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),r=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),o=s.width,n=s.height;return o=o-(parseInt(a.D.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-right-width"),10)||0),n=n-(parseInt(a.D.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(o,n),t.setPosition(e,r),t},handleStart:function(){i.showModal.call(i)},handleFinish:function(t,e,r,s,o){i.hideModal.call(i);var n=parseInt(i.getStyle("width"),10),a=parseInt(i.getStyle("height"),10)+s;i.setSize(n,a)}})}}e=null}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOverEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_close_button")&&this.addClass(this.dom.closeButton,"w2floatingLayer_close_button_over");e=null}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.handleMouseOutEvent=function(t){try{
for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_close_button")&&this.removeClass(this.dom.closeButton,"w2floatingLayer_close_button_over");e=null}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.handleSelectStart=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_dragArea")&&n.B.stopEvent(t);e=null}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.setSize=function(t,e){try{if(!this.render)return;t=parseInt(t),e=parseInt(e),null!=t&&!isNaN(t)&&t>=0&&(this.render.style.width=t+"px"),null!=e&&!isNaN(e)&&e>=0&&(this.render.style.height=e+"px",this.resetContentSize()),n.B.fireEvent(this,"onlayerresize")}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.resetContentSize=function(){try{var t=a.D.getStyleProperty(this.render,"height");if(t=parseInt(t,10),isNaN(t)){var e=this.getSize("height")-42;this.dom.contents.style.height="number"==typeof e&&e>0?this.getSize("height")-42+"px":""}else this.dom.contents.style.height=t-42+"px";this.options.fullContentArea&&(this.dom.contents.style.width=this.render.style.width)}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.setTitle=function(t){try{this.dom.titleDiv||(this.dom.titleDiv=this.getElementById(this.id+"_titleDiv")),this.dom.titleDiv&&(this.dom.titleDiv.innerHTML=t,this.dom.titleDiv.parentNode.setAttribute("title",t.wq_replaceAll("'","&#39;")))}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.showModal=function(){var t=WebSquare.getBody();if(a.D.getBoolean(this.options.useModalStack)){if(this.modalStack<=0){var e={};e[this.options.pluginName]=this.uuid,t.showModal("w2modal_floatingLayer",null,e),this.modalStack++}}else t.showModal("w2modal_floatingLayer")},h.prototype.hideModal=function(){WebSquare.getBody().hideModal(),this.modalStack>0&&this.modalStack--},h.prototype.show=function(t){if(d.s.prototype.show.call(this,t),1==this.options.useModal&&this.showModal(),this.options.useAnchor){var e=this.id+"_innerLink";this.getElementById(e).setAttribute("name",e+"_name");var i=document.createElement("a");document.body.appendChild(i),i.setAttribute("href","#"+e+"_name"),i.click(),document.body.removeChild(i),i=null}},h.prototype.hide=function(){if(d.s.prototype.hide.apply(this),1==this.options.useModal&&this.hideModal(),this.options.useAnchor&&this.backlink){var t=a.D.getComponentById(this.backlink);t.render.setAttribute("name",t.id+"_backlink");var e=document.createElement("a");document.body.appendChild(e),e.setAttribute("href","#"+t.id+"_backlink"),e.click(),document.body.removeChild(e)}},h.prototype.setBackLink=function(t){"string"==typeof t?this.backlink=t:t&&"string"==typeof t.id&&(this.backlink=t.id)},h.prototype.setHeaderHTML=function(t){try{if(t){var e=t;try{var i=a.D.getGlobalFunction(t,this.scope_id);e="function"==typeof i?i():i}catch(i){e=t}var r=this.getElementById(this.id+"_headerHTML");r&&(r.innerHTML=e,this.options.headerHTML=e)}}catch(t){o.w.printStackTrace(t,null,this)}},h.prototype.getMaxSize=function(){for(var t,e,i=this.parentControl;null!=i&&null==i.render;)i=i.parentControl;(i?(t=WebSquare.style.getSize(i.render,"width"),e=WebSquare.style.getSize(i.render,"height")):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(a.D.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(a.D.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(a.D.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},h.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,
e=e-(parseInt(a.D.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-right"),10)||0),i=i-(parseInt(a.D.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(a.D.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},h.prototype.finalize=function(){try{WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){o.w.printStackTrace(t,null,this)}}}}]);