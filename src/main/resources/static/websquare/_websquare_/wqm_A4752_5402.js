(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[5402],{5402:(e,t,i)=>{"use strict";i.r(t),i.d(t,{autoComplete:()=>u});var s=i(5405),r=i(465),o=i(5130),l=i(6146),n=i(209),a=i(6247),h=i(4582),d=i(9544),u=function(e,t,i){a.s.call(this,e,t,i)};s.x.extend(u.prototype,a.s.prototype),s.x.extend(u.prototype,h.E.prototype),s.x.extend(u.prototype,d.z.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.autoComplete",pluginName:"autoComplete",userEvents:["onchange","oneditend","onviewchange","oneditkeyup","oneditenter","onselected"],useConfig:!0,serializable:!0,useOtherComponentId:"",value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,displayMode:"0",delimiter:"\t",defaultStyle:"",activeStyle:"",textAlign:"",defaultClass:"w2inputSelectDefault",activeClass:"w2inputSelectActive",useLocale:!1,submenuSize:"fixed",direction:"auto",dynamicDraw:!0,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,editable:!0,search:"start",editmode:!1,dataurl:"",interactionMode:!1,interactionKey:"default",interactionEnterKey:!1,submission:"",submissionFunc:"",keyInputRef:"",readOnly:!1,mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,interactionMinByteLength:0,title:"",noResult:"previous",noResultFirstItem:!1,ignoreBlankOnNoResult:!1,escape:!0,displayFormatter:"",useMousewheel:!0,editModeEvent:"onclick",showItemTableByFocus:!1,allowEmptySubmission:"false",searchTarget:"label",caseSensitive:!0,editType:"select",useKeywordHighlight:!1,returnValueType:"null",emptyItem:!1,emptyValue:"",emptyIndex:0,closeonmouseleave:!1,handleOtherClick:!0,animation:"",selectedData:!0,preventWheelEvent:!1,customLabelFormatter:"",disableEdit:!1,type:"text",wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",autocomplete:"off",placeholder:"",autoFocus:!1,noUseAutoFind:!1,findItemFirstKey:!1,nextTabByEnter:!1,customToggleKey:"",preventKeyList:"",setNodeSetNoOnchange:!1,hideListOnFocus:!1},u.prototype.initialize=function(e){try{if(this.itemTable=null,this.gridOptions={},this.gridViewOptions={},this.searchFlag=!1,this.isOpen=!1,this.statusSubLayer=!1,this._itemTableRedraw=!0,this.supportAutocomplete=!1,this.options.emptyItem?(this.options.noResult="clear",this.noResult="clear"):this.noResult="previous"===this.options.noResult||"clear"===this.options.noResult||"noEnd"===this.options.noResult||"useData"===this.options.noResult||"first"===this.options.noResult?this.options.noResult:"previous",this.editable=this.options.editable,this.search=this.options.search,this.orgSearchArr=[],this.selectedItem={text:"",value:"",orgLabel:""},this.selectedGridRowObj={},this.selectedGridViewRowObj={},this.myhelper=new WebSquare.korHelper,this.viewArr=[],this.itemArr=[],this.dummyItemArr=[],this.dummyGridItemArr=[],this.mytime=null,this.hideTime=null,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.editmode=this.options.editmode,this.findkeymode=!1,this.mozTrickBuffer="",this.trickBuffer="",this.findStop=!1,this.skipMatch=!1,this.defaultAllOptionLabel=WebSquare.language.getMessage("AutoComplete_all"),e&&"$blank"==e.getAttribute("chooseOptionLabel")?this.defaultChooseOptionLabel="":this.defaultChooseOptionLabel=WebSquare.language.getMessage("AutoComplete_choose"),this._initDisplayMode(),this.dataurl=this.options.dataurl,this.selectedIndex=-1,this.selectedAllIndex=-1,this.cursorIndex=-1,this.showRowIndex=0,this.displayCount=0,!this.options.interactionMode||this.options.submission||this.options.submissionFunc||(this.options.interactionMode=!1),this._showItemTableByFocus=!1,"onfocus"===this.options.editModeEvent&&this.options.showItemTableByFocus&&(this._showItemTableByFocus=!0),this.interactionMode=this.options.interactionMode,e){
var t=WebSquare.Elem.api.getElementsByTagName(e,"choices",r.v._XML_NAMESPACE.W2)[0];if(t){var i=WebSquare.Elem.api.getElementsByTagName(t,"gridItemset",r.v._XML_NAMESPACE.W2)[0];null==i&&(i=WebSquare.Elem.api.getElementsByTagName(t,"gridViewItemset",r.v._XML_NAMESPACE.W2)[0]),i&&"w2:gridItemset"==i.getTagName()?this.itemTableMode="grid":i&&"w2:gridViewItemset"==i.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView");if("grid"==this.itemTableMode?this.initializeGridItemArr(e):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(e):this.initializeItemArr(e),this.autoFinder="w2:autoFinder"==e.getTagName(),this.autoFinder){if(this.display_path=this.options.display_path,void 0!==this.display_path){this.display_path=this.display_path.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var s=this.display_path.split(" "),l=s[0],a=s[1],h=s[2];this.setItemSet(l,a,h),this.buildItemArr()}}else"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&(this.itemsetObj=WebSquare.WebSquareparser.parseItemset(e))}if(this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.displayFormatter=null,this.onchangeFlag=!1,this.otherClicked=!1,this.options.autocomplete&&WebSquare.uiplugin.autoComplete.autocomplete&&(this.supportAutocomplete=!0),this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.options.customSearchStrArrFunction&&(this.customSearchStrArrFunction=n.D.getGlobalFunction(this.options.customSearchStrArrFunction,this.scope_id)),this.beforeEditValue="",this._preventKeyObj={},this.options.preventKeyList)if("all"===this.options.preventKeyList)this._preventKeyObj.all=!0;else for(var d=this.options.preventKeyList.split(","),u=0;u<d.length;u++){var m=d[u].wq_trim();m&&(this._preventKeyObj[m]=!0)}}catch(e){o.w.printStackTrace(e,null,this)}},u.autocomplete="string"==typeof document.createElement("input").autocomplete,u.prototype.toHTML=function(){try{var e=[],t=""==this.options.title?"":"title='"+this.options.title+"'",i=""==this.options.style?"":"style='"+this.options.style+"'",s="";s=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'";var r=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'",l=""==this.options.textAlign?r:"style='text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'",n="text"==this.options.type?"type = 'text' ":"type = '"+this.options.type+"' ",a=""==this.supportAutocomplete||""==this.options.autocomplete?"":" autocomplete='"+this.options.autocomplete+"'",h=this.options.placeholder?"w2autoComplete_label w2autoComplete_placeholder":"w2autoComplete_label",d=this.options.placeholder?"data-placeholder='"+this.options.placeholder+"' ":"";return e.push("<div id='"+this.id+"' "+i+" class='w2autoComplete "+this.options.className+"' "+s+" "+t+" role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='inline' >"),e.push("<table class='w2autoComplete_table_main'>"),e.push("<tbody id='"+this.id+"_main_tbody'>"),e.push("<tr class='w2autoComplete_row w2autoComplete_row_main'>"),e.push("<td class='w2autoComplete_col_label' "+r+">"),e.push("<div class='w2autoComplete_label'>"),e.push("<span id='"+this.id+"_label' class='"+h+"' "+d+l+"></span>"),e.push("<input id='"+this.id+"_input' class='w2autoComplete_input' style='border-width:0px; width:100%; padding:0px; display:none;' "+n+t+a+" />"),e.push("</div></td>"),e.push("<td class='w2autoComplete_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>"),e.push("</tr></tbody>"),e.push("</table>"),e.push("</div>"),e.join("")}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setPreAction=function(){try{this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),
this.dom.input=this.getElementById(this.id+"_input"),""!=this.options.tabIndex&&(this.dom.input.tabIndex=this.options.tabIndex),n.D.isMobile()?"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{ontouchstart:this.handleClickEventDocument}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,event:{ontouchstart:this.handleClickEventDocument}}):this.options.useOtherComponentId?r.v.setTimer((function(){this.otherComponent=n.D.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,event:{onmousedown:this.handleClickEventDocument}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(e){l.B.stopPropagation(e)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{onmousedown:this.handleClickEventDocument}})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{onmousedown:this.handleClickEventDocument}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,event:{onmousedown:this.handleClickEventDocument}})}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleblurEventInput)),n.D.isMobile()?this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(e){l.B.stopPropagation(e)}))):this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(e){l.B.stopPropagation(e)}))),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.dom.input,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.handleInputKeyupEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.options.validateOnInput&&this.event.addListener(this.dom.input,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.bind("onviewchange",(function(e){this.onchangeFlag=!0})),
1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw()),this.modelControl.isBinded()){var e=this.modelControl.getData();this.setValueNM(e)}-1!=this.selectedIndex||0!=this.options.emptyIndex&&this.options.emptyIndex?this.options.emptyIndex&&"number"==typeof this.options.emptyIndex&&(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(0),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),this.options.readOnly&&this.onPropertyChange("readOnly",n.D.getBoolean(this.options.readOnly)),this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.refreshItemset=function(e){try{if(this.modelControl.isItemsetBinded())if(this._itemTableRedraw=!0,this.refreshItemArr(),this.componentRedraw(e),this.itemArr.length<=0&&-1!=this.selectedIndex&&this.initAutoComplete(),"grid"==this.itemTableMode?(this.refreshGridItemArr(),this.setSubLayer(),this.setGridData()):"gridView"==this.itemTableMode&&(this.refreshGridViewItemArr(),this.setSubLayer(),this.setGridViewData()),this.modelControl.isBinded())this.refresh();else if(-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult)this.setSelectedIndexNM(-1,!0);else{var t=this.options.placeholder?-1:0;this.setSelectedIndexNM(t)}this.isOpen&&this.setItemTable(),this.broadcast({linkedDataList:["refresh"]})}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.refresh=function(){try{if(this.modelControl.isBinded()&&this.getItemCount()>0){var e=this.getValue(),t=this.modelControl.getData(),i=this.setValueNM(t);if(1==i)e!=this.getValue()&&l.B.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()}),null!=this.getValue()&&t!=this.getValue()&&this.modelControl.setData(this.getValue()),this.broadcast({linkedDataList:["refresh",["replace"]]});else if(isNaN(i))null!=this.getValue()&&t!=this.getValue()&&this.modelControl.setData(this.getValue());else if("clear"===this.noResult||this.options.emptyItem)this.setSelectedIndex(-1,!0,!1);else if("previous"===this.noResult){var s=this.options.placeholder?-1:0;this.setSelectedIndex(s,!1,!1)}else{if("noEnd"===this.noResult)return;if("useData"===this.noResult)return;if("first"===this.noResult)return void(this.options.noResultFirstItem&&this.setSelectedIndex(0))}}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.componentRedraw=function(e){try{if(this.showRowIndex=0,this.setSelectOptions(),this.itemArr.length>0){var t=0;(this.options.placeholder||"useData"===this.noResult&&"gridView"===this.itemTableMode&&!1===this.options.selectedData)&&(t=-1),e&&"replace"!==e&&this.getSelectedIndex()>-1&&(t=this.getSelectedIndex()),this.itemArr&&this.itemArr[t]?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[t].label):this.itemArr[t].label:this.dom.label.innerHTML="";var i="replace"===e&&!0===this.options.setNodeSetNoOnchange;this.modelControl.isBinded()?this.setSelectedIndex(t,!1,!1,i):this.setSelectedIndex(t,void 0,void 0,i)}else this.dom.label.innerHTML="";this.showEditMode(!1),this.setValueNM("")}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setSubLayer=function(){try{if(null==this.itemTable){var e=this;"grid"==this.itemTableMode?(this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(t,i){
e.findStop=!0,(e.editmode||e.findkeymode)&&(e.mozTrickBuffer=""),e.focus(),"dataList"===e.gridOptions.dataComp.initializeType&&(t=this.getRealRowIndex(t)),e.setSelectedIndex1(e.viewArr[t].index)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(t){var i=t.charCode?t.charCode:t.keyCode;if(13==i){e.focus();var s=this.getFocusedRowIndex();"dataList"===e.gridOptions.dataComp.initializeType&&(s=this.getRealRowIndex(s)),e.setSelectedIndex1(e.viewArr[s].index)}else 27==i&&(e._closeSubLayer(),e.showEditMode(!1),e.focus())}))),0===this.itemArr.length&&this.itemTable.hide()):"gridView"==this.itemTableMode?("auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(t,i){e.findStop=!0,(e.editmode||e.findkeymode)&&(e.mozTrickBuffer=""),e.focus();var s=e.viewArr[t].orgLabel+"|"+e.viewArr[t].value,r=e.findinItemArr(s,WebSquare.allValue||"all");e.setSelectedIndex1(r)})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(t){var i=t.charCode?t.charCode:t.keyCode;if(13==i){e.focus();var s=this.getFocusedRowIndex();"dataList"===e.gridViewOptions.dataComp.initializeType&&(s=this.getRealRowIndex(s)),e.setSelectedIndex1(e.viewArr[s].index)}else 27==i&&(e._closeSubLayer(),e.showEditMode(!1),e.focus())}))),0===this.itemArr.length&&this.itemTable.hide()):(this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2input_table "+this.options.className,w2table:"w2input_table_sb",w2table_main:"w2input_table_sb_main",w2table_row:"w2input_table_sb_row",w2table_col:"w2input_table_sb_col",w2table_col_over:"w2input_table_sb_col_over",escape:this.options.escape,wheelRows:this.options.wheelRows,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.addClickEventListener((function(t,i){l.B.fireEvent(e,"onitemclick",i),e.findStop=!0;var s=e.selectedIndex,r=e.getValue();if(e.editmode||e.findkeymode){e.mozTrickBuffer="";var o=e.viewArr[i].label;e.options.useKeywordHighlight&&(o=o.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),e.dom.input.value=o,e.selectedItem={text:o,value:e.viewArr[i].value,orgLabel:e.viewArr[i].orgLabel};var n=e.selectedItem.orgLabel+"|"+e.selectedItem.value,a=e.findinItemArr(n,WebSquare.allValue||"all");e.setSelectedIndex1(a,!0),e.focus(),e.closeTable()}else{o=e.viewArr[i].label;e.options.useKeywordHighlight&&(o=o.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),e.dom.input.value=o,e.selectedItem={text:o,value:e.viewArr[i].value,orgLabel:e.viewArr[i].orgLabel},e.setSelectedIndex1(i),e.focus(),e.closeTable()}var h={oldValue:r,newValue:e.getValue(),oldSelectedIndex:s,newSelectedIndex:e.selectedIndex};l.B.fireEvent(e,"onselected",h)})),this.itemTable.addKeyDownEventListener((function(t){if(n.D.isIEAllVersion()){if(t.srcElement.parentElement!=this.render)return}else if(l.B.getTarget(t)!==this.render)return;var i=t.charCode?t.charCode:t.keyCode;if(27==i)return e._closeSubLayer(),e.showEditMode(!1),void e.focus();if(e.options.customToggleKey==i)return e._closeSubLayer(),void e.focus()
;if(!e.options.findItemFirstKey)if(1==e.interactionMode||e.editmode||e.findkeymode){for(var s=0,r=e.selectedItem.orgLabel+"|"+e.selectedItem.value,o=0;o<e.viewArr.length;o++)if(r==e.viewArr[o].orgLabel+"|"+e.viewArr[o].value){s=o;break}if(13==i){if(0==e.viewArr.lenght)return}else if(38==i||9==i&&t.shiftKey){if(0==s)return;s-=1}else if(40==i||9==i){if(s+1==e.viewArr.length)return;s+=1}else 35==i?s=e.viewArr.length-1:36==i?s=0:33==i?(s-=e.viewArr.length)<0&&(s=0):34==i&&(s+=e.viewArr.length)>=e.viewArr.length&&(s=e.viewArr.length-1);if(e.viewArr.length>s){var a=e.viewArr[s].label;e.options.useKeywordHighlight&&(a=a.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),e.dom.input.value=a,e.selectedItem={text:a,value:e.viewArr[s].value,orgLabel:e.viewArr[s].orgLabel},e.itemTable.setSelectedIndex(s)}}else{var h=-1;h=e.getSelectedIndex(),38==i||9==i&&t.shiftKey?h>0&&(h-=1):40==i||9==i?h+1<e.getItemCount()&&(h+=1):35==i?h=e.getItemCount()-1:36==i?h=0:33==i?(h-=e.itemTable.rowCount)<0&&(h=0):34==i&&(h+=e.itemTable.rowCount)>=e.itemTable.getItemCount()&&(h=e.itemTable.getItemCount()-1),e.setSelectedIndex1(h,!0),e.itemTable.setSelectedIndex(h)}})),1==this.options.closeonmouseleave&&this.itemTable.addMouseLeaveEventListener((function(t){var i=e.render.offsetHeight,s=e.getAbsolutePosition("top");t.clientY>=s&&t.clientY<=s+i||e.closeSubLayer()})),this.editmode&&this.viewArr.length>0?(this.setItemTable(),this.itemTable.setSelectedIndex(0)):null!=this.itemArr&&this.itemArr.length>0?this.setItemTable():(this.itemTable.hide(),null!=this.itemTable.mainTable&&this.itemTable.render.firstChild?this.setItemTable():$l("this.itemTable.mainTable이 null입니다.["+this.id+"]"))),this.isOpen=!0,this.closeSubLayer()}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setSelectOptions=function(){try{null!=this.itemTable&&(this.editmode?0==this.viewArr.length||"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&(this.itemTable.setItemArr(this.viewArr),this.itemTable.setSelectedIndex(0)):"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&null!=this.itemArr&&0!=this.itemArr.length?this.itemTable.setItemArr(this.itemArr):this.itemTable.hide())}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setItemTable=function(){try{(this.itemTable.render.getElementsByTagName("tr").length!==this.itemArr.length||this.viewArr.length!==this.itemArr.length||this._itemTableRedraw)&&(this._itemTableRedraw=!1,this.itemTable.setItemArr(this.viewArr));var e=this.render.offsetWidth,t=document.documentElement.clientWidth||document.body.clientWidth||0,i=WebSquare.style.getAbsoluteLeft(this.render),s=0,l=this.itemTable.render.getElementsByTagName("td");if(l&&l.length>0){var n=l[0].offsetHeight,a=Math.min(l.length,this.options.visibleRowNum);r.v.browserCheck.moz&&n<34&&1==a&&(n=34),this.itemTable.setStyle("height",a*n+"px")}"fixed"==this.options.submenuSize||parseInt(e)>=parseInt(this.itemTable.render.offsetWidth)?(this.itemTable.setStyle("width",e-2+"px"),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=e+"px":this.itemTable.render.firstChild.style.width=e-17+"px"):this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1?this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+17+"px"):this.itemTable.render.firstChild.offsetWidth>e?this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+"px"):(this.itemTable.render.firstChild.style.width=e+"px",this.itemTable.setStyle("width",e-2+"px"));var h=this.options.direction;if("auto"==h){var d=document.body.scrollTop;d<document.documentElement.scrollTop&&(d=document.documentElement.scrollTop);var u=WebSquare.style.getAbsoluteTop(this.render)-d,m=document.documentElement.clientHeight-(u+this.render.offsetHeight),c=this.itemTable.render.offsetHeight,p=Math.max(m,u);if(p<c&&l&&l.length>0){for(var b=0,f=0;f<l.length&&!(b+l[f].offsetHeight+2>p);f++)b+=l[f].offsetHeight
;this.itemTable.rowCount=f,this.itemTable.setStyle("height",b+"px"),p!==m&&(h="up")}else m<c&&u>c&&(h="up")}if(s="up"==h?WebSquare.style.getAbsoluteTop(this.render)-this.itemTable.render.offsetHeight:WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,t<i+this.itemTable.render.offsetWidth)if((i=i+this.render.offsetWidth-this.itemTable.render.offsetWidth)<0){i=WebSquare.style.getAbsoluteLeft(this.render);var g=document.body.offsetWidth-17-i;this.itemTable.setStyle("width",g+"px"),"auto"!=this.itemTable.getStyle("overflow-x")&&(n+=20),this.itemTable.setStyle("height",n+"px"),this.itemTable.setStyle("overflow-x","auto")}else this.itemTable.setStyle("overflow-x","hidden");else{g=this.itemTable.render.firstChild.offsetWidth;var v=this.itemTable.render.clientWidth;if(i+g<t&&"auto"==this.itemTable.getStyle("overflow-x")){var y=g>v?g:v;n-=20,this.itemTable.setStyle("height",n+"px"),this.itemTable.setStyle("width",y+"px"),this.itemTable.setStyle("overflow-x","hidden")}}this.itemTableDirection=h,this.itemTable.setPosition(i,s),WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.buildItemArr=function(){try{this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.itemArr=[],this.itemsetObj.nodeset.match("data:")?(this.itemArr=this.modelControl.getDataCollectionItemsetData(this.id),this.allItemArr=this.modelControl.getDataCollectionItemsetData(this.id,{allData:!0})):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption){var e=[],t=null;"label"==this.options.sortOption?t=function(){return this.label}:"value"==this.options.sortOption&&(t=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var s=this.itemArr[i];s.toString=t,e.push(s)}e.sort(),"descending"==this.options.sortMethod&&e.reverse(),this.itemArr=e}for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);if(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption){var r=this._getChooseOptionLabel();this.itemArr=[{label:r,value:this.options.chooseOptionValue,orgLabel:r,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled})}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getViewItemText=function(e){try{var t="";if(e>-1&&e<this.viewArr.length)switch(t=this.viewArr[e].label,this.options.displayMode){case"0":break;case"1":t=this.viewArr[e].value+this.options.delimiter+t;break;case"2":t=t+this.options.delimiter+this.viewArr[e].value;break;case"3":t=this.viewArr[e].value}return t}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.parseLabel=function(e){try{if(this.itemsetObj.label.indexOf("@")>-1){var t=this.itemsetObj.label.split("@");if(this.itemsetObj.label.indexOf("/")>-1){var i=t[0].split("/"),s=i[i.length-2],r=WebSquare.xml.getElementsByTagName(this.itemArr[e].xml,s);return WebSquare.WebSquareparser.getAttribute(r[0],t[1])}return WebSquare.WebSquareparser.getAttribute(this.itemArr[e].xml,t[1])}return(r=WebSquare.xml.getElementsByTagName(this.itemArr[e].xml,this.itemsetObj.label))[0].firstChild.nodeValue}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.parseValue=function(e){try{if(this.itemsetObj.label.indexOf("@")>-1){var t=this.itemsetObj.value.split("@");if(this.itemsetObj.label.indexOf("/")>-1){
var i=t[0].split("/"),s=i[i.length-2],r=WebSquare.xml.getElementsByTagName(this.itemArr[e].xml,s);return WebSquare.WebSquareparser.getAttribute(r[0],t[1])}return WebSquare.WebSquareparser.getAttribute(this.itemArr[e].xml,t[1])}return(r=WebSquare.xml.getElementsByTagName(this.itemArr[e].xml,this.itemsetObj.label))[0].firstChild.nodeValue}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setItemSet=function(e,t,i){try{void 0===this.itemsetObj&&(this.itemsetObj={});var s=!1;if(t==this.itemsetObj.label&&i==this.itemsetObj.value||(s=!0),this.itemsetObj.nodeset=e,s&&(this.itemsetObj.label=t,this.itemsetObj.value=i),"grid"==this.itemTableMode){if(this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),s)for(var l=0;l<this.itemsetObj.items.length;l++)this.itemsetObj.items[l].id==this.itemsetObj.labelId&&(this.itemsetObj.items[l].ref=t),this.itemsetObj.items[l].id==this.itemsetObj.valueId&&(this.itemsetObj.items[l].ref=i);this.refreshGridItemArr()}else"gridView"==this.itemTableMode?(this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.refreshGridViewItemArr()):this.buildItemArr();for(l=0;l<this.itemArr.length;l++)this.itemArr[l].orgLabel=this.itemArr[l].label,this.itemArr[l].label=this.getItemText(l);if(this.options.interactionMode){if(r.v.clearTimer(this.id+"_showEditMode",!0),this.interactionMode&&(this.selectedIndex=-1,this.selectedItem={text:"",value:"",orgLabel:""},"useData"===this.options.noResult&&this.dummyItemArr.length))for(l=0;l<this.dummyItemArr.length;l++)this.itemArr=[{label:this.dummyItemArr[l].label,value:this.dummyItemArr[l].value,orgLabel:this.dummyItemArr[l].orgLabel}].concat(this.itemArr);if(1==this.options.allOption&&this.itemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr),"grid"==this.itemTableMode&&this.gridOptions.dataComp)){for(var n=-1,a={},h=0;h<this.itemsetObj.items.length;h++)-1==n&&this.itemsetObj.items[h].ref==this.itemsetObj.label&&(n=h),a[this.itemsetObj.items[h].id]="";a[this.itemsetObj.items[-1==n?0:n].id]=this.defaultAllOptionLabel,this.gridRowItemArr.unshift(a)}if(1==this.options.chooseOption){t=this._getChooseOptionLabel();this.itemArr=[{label:t,value:this.options.chooseOptionValue,orgLabel:t,noItem:!0}].concat(this.itemArr),this.selectedIndex=0,this.selectedItem={text:this.itemArr[this.selectedIndex].label,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}}this.viewArr=[];for(l=0;l<this.itemArr.length;l++){var d=this.itemArr[l].label;if(this.options.useKeywordHighlight){var u=d.indexOf(this.mozTrickBuffer);u>=0&&(d=d.substring(0,u)+"<span class='w2autoComplete_keyword'>"+this.mozTrickBuffer+"</span>"+d.substring(u+this.mozTrickBuffer.length,d.length))}this.viewArr.push({label:d,orgLabel:this.itemArr[l].orgLabel,value:this.itemArr[l].value,index:l,_hidden:this.itemArr[l]._hidden,_disabled:this.itemArr[l]._disabled})}}else{if(1==this.options.chooseOption){t=this._getChooseOptionLabel();this.itemArr=[{label:t,value:this.options.chooseOptionValue,orgLabel:t,noItem:!0}].concat(this.itemArr),this.selectedIndex=0,this.selectedItem={text:this.itemArr[this.selectedIndex].label,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}}this.viewArr=[];for(l=0;l<this.itemArr.length;l++)this.viewArr.push({label:this.itemArr[l].label,value:this.itemArr[l].value,orgLabel:this.itemArr[l].orgLabel,index:l,_hidden:this.itemArr[l]._hidden,_disabled:this.itemArr[l]._disabled})}if(this.gridOptions.sortIndex&&this.gridItemArr.length>0){if(this.setSubLayer(),this.itemTable.grid.setData(this.gridItemArr.slice(0)),this.options.allOption){var m=[];for(n=-1,h=0;h<this.itemsetObj.items.length;h++)-1==n&&this.itemsetObj.items[h].ref==this.itemsetObj.label&&(n=h),m.push("");m[-1==n?0:n]=this.defaultAllOptionLabel,
this.itemTable.grid.setRowData(0,m,!1)}var c=[];if(this.options.allOption){var p=this.gridOptions.sortIndex.split(" ")[0],b=this.itemTable.grid.getCellInfo(p).options.dataType,f=parseInt(this.gridOptions.sortOrder.split(" ")[0],10);c[0]=function(e,t,i,s){return 0==i?-1:0==s?1:("number"==b?(e=Number(e),t=Number(t)):(e=e||"",t=t||""),e>t?1*f:e<t?-1*f:0)}}this.itemTable.grid.multisort({sortIndex:this.gridOptions.sortIndex,sortOrder:this.gridOptions.sortOrder,sortFuncArr:c})}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.updateTable=function(){},u.prototype.openTable=function(){try{this.showTable()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.toggle=function(){try{l.B.fireEvent(this,"ontoggleclick",this.isOpen),this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.openSubLayer=function(e){try{WebSquare.getBody().getLayerListener().show(this.id,e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._openSubLayer=function(e){try{e||(e={});var t=void 0===e.select||e.select;if(this.setSubLayer(),!this.isOpen){if(0==this.itemArr.length)return;if(this.itemTable.show(),this.addClass("w2autoComplete_open"),this.itemTable.render.setAttribute("aria-expanded","true"),this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),n.D.isMobile()||this.options.editable&&!this.options.disableEdit&&(this.editmode||!this.options.findItemFirstKey)||this.itemTable.focus(),-1!=this.selectedIndex&&t&&this.itemTable.setSelectedIndex(this.selectedIndex),""!=this.options.animation){var i="down",s=WebSquare.style.getAbsoluteTop(this.render),r=document.body.scrollTop;r<document.documentElement.scrollTop&&(r=document.documentElement.scrollTop);var l=s-r,a=document.documentElement.clientHeight-(l+this.render.offsetHeight),h=this.itemTable.render.offsetHeight;a<h&&l>h&&(i="up"),"show"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+this.itemTable.id).hide().fadeIn("slow"):"slidedown"==this.options.animation.toLowerCase()&&"down"==i&&$("#"+this.itemTable.id).hide().slideDown("fast")}this.editmode&&void 0!==this.dom.input&&null!=this.dom.input&&this.setfFocus(),this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex)}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._openOtherLayer=function(e){try{if(this.isOpen)this.setGridData();else{if(0==this.itemArr.length)return;var t=this.otherComponent;"grid"==this.itemTableMode?(this.setSubLayer(),this.setGridData(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),(t=this.itemTable).grid.removeFocusedCell(),t.show(),t.grid.handleResize()):"gridView"==this.itemTableMode?(this.setSubLayer(),this.setGridViewData(),null!=(t=this.itemTable).gridView&&null!=t.gridView._dataList&&t.gridView.removeFocusedCell(),t.show(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.offsetHeight+"px"),t.gridView.handleResize()):t.show(),this.addClass("w2autoComplete_open");var i=WebSquare.style.getAbsoluteLeft(this.render),s=WebSquare.style.getAbsoluteTop(this.render),r=this.options.direction;if("auto"==r||"fit"==r){var l=document.body.scrollTop;l<document.documentElement.scrollTop&&(l=document.documentElement.scrollTop);var a=s-l,h=document.documentElement.clientHeight-(a+this.render.offsetHeight),d=t.render.offsetHeight;h<d&&a>d&&(r="up")}if("up"==r)if("gridView"==this.itemTableMode){s-=this.getElementById(this.id+"_gridViewItemTable_gridView_body_table").offsetHeight;var u=this.getElementById(this.itemTable.id+"_gridView_main_div").style.zIndex;this.setStyle("z-index",u+1)
}else s-=t.render.offsetHeight;else s+=this.render.offsetHeight;if("fit"==this.options.direction){"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(this.itemTable.render.firstChild.style.width="100%"),i=WebSquare.style.getAbsoluteLeft(this.render),t.setPosition(i,s);var m=document.documentElement.clientWidth-i;t.setSize(m,t.render.offsetHeight)}else"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(i=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(t.render.style.width=this.render.offsetWidth+"px")),"fit"!=r&&document.documentElement.clientWidth<i+t.render.offsetWidth&&(i=i+this.render.offsetWidth-t.render.offsetWidth),i<0&&(i=0);this.itemTableDirection=r,t.setPosition(i,s),this.isOpen=!0,WebSquare.style.adjustZIndex(this.uuid,t.uuid,"itemTable"),this.options.findItemFirstKey&&(n.D.isMobile()||this.options.editable&&!this.options.disableEdit&&this.editmode||("grid"==this.itemTableMode?t.grid.render.focus():"gridView"==this.itemTableMode&&t.gridView.render.focus()))}if(-1!=this.selectedIndex)for(var c=0;c<this.viewArr.length;c++)if(this.viewArr[c].index==this.selectedIndex){this.itemTable.setSelectedIndex(c,e&&e.noFocus);break}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.closeSubLayer=function(){try{WebSquare.getBody().getLayerListener().hide(this.id)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._closeSubLayer=function(){try{this.isOpen&&null!=this.itemTable&&(this.itemTable.hide(),this.removeClass("w2autoComplete_open"),this.itemTable.render.setAttribute("aria-expanded","false"),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._closeOtherLayer=function(e){try{var t=(e=e||{}).documentClick,i=this.otherComponent;"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i&&(i.hide(),this.removeClass("w2autoComplete_open"),"grid"==this.itemTableMode?i.grid.handleResize():"gridView"==this.itemTableMode&&i.gridView.handleResize(),this.isOpen=!1,!0===t?l.B.fireEvent(this,"onclose",!0):l.B.fireEvent(this,"onclose",!1))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setSelectedIndex=function(e,t,i,s){try{if(isNaN(e))return;if(n.D.isNull(e))return;if(this.options.emptyItem&&(e<0||e>=this.getItemCount()))if(this.modelControl.isBinded())(1==this.options.selectedData||0!=i)&&this.modelControl.setData(this.options.emptyValue),this.setSelectedIndexNM(-1);else{var r=this.getSelectedIndex(),a=this.getValue();this.setSelectedIndexNM(-1),-1!=r&&!0!==s&&l.B.fireEvent(this,"onchange",{oldValue:a,newValue:this.getValue()})}else{if(e>=this.getItemCount())return;if(e<0&&!t)return;e=parseInt(e);var h="";e>-1&&(h=this.itemArr[e].value),1==this.options.selectedData||"gridView"===this.itemTableMode&&!1===this.options.selectedData&&-1===e?this.modelControl.setData(h):0!=i?this.itemArr[e].value!=WebSquare.allValue?(this.modelControl.setData(h),1==this.options.chooseOption&&0==e&&this.setSelectedIndexNM(0)):(this.modelControl.setData(""),this.setSelectedIndexNM(e)):this.setSelectedIndexNM(-1);r=this.getSelectedIndex(),a=this.getValue();this.setSelectedIndexNM(e,t),r!=this.getSelectedIndex()&&(!0!==s&&l.B.fireEvent(this,"onchange",{oldValue:a,newValue:this.getValue()}),this.broadcast({linkedDataList:["refresh"]}))}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setSelectedIndexNM=function(e,t){try{if(this.dummyData=null,e=parseInt(e),isNaN(e))return!1;if(this.options.emptyItem&&(e<0||e>=this.getItemCount()))this.selectedIndex=-1,this.dom.label.innerHTML="",this.dom.input.value="",this.itemTable&&this.itemTable.setSelectedIndex(0),this.selectedItem={text:"",value:"",orgLabel:""},
this.showEditMode(!1);else{if(isNaN(e)||e>=this.getItemCount())return!1;if(e<0&&!t)return!1;if(this.selectedIndex=e,e>-1){"grid"==this.itemTableMode?this.gridOptions.dataComp?this.selectedGridRowObj=this.gridOptions.dataComp.getRowArray(e):this.selectedGridRowObj=this.gridRowItemArr[e]:"gridView"==this.itemTableMode&&this.gridViewOptions.dataComp&&(this.selectedGridViewRowObj=this.gridViewOptions.dataComp.getRowArray(e));var i=this.itemArr[e].label;this._setLabel(e),this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=i,this.selectedItem={text:i,value:this.itemArr[e].value,orgLabel:this.itemArr[e].orgLabel},this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+e)}else-1==e&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?("gridView"==this.itemTableMode&&this.gridViewOptions.dataComp&&(this.selectedGridViewRowObj=this.gridViewOptions.dataComp.getRowArray(e)),this.dom.label.innerHTML=this._domInputValue,this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=this._domInputValue,this.selectedItem={text:this._domInputValue},this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+e)):(this.dom.label.innerHTML="",this.dom.input.value="",this.showEditMode(!1))}return!0}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._setLabel=function(e){try{if(this.dom.label){var t=this.itemArr[e].label+"";if(this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var i=this.itemArr[e].value+"",s=this.itemArr[e].orgLabel+"";(0!=e||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=e&&1!=e||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(t=this.customLabelFormatter.call(this,s,i,this.isOpen)),this.dom.label.innerHTML=t}else{var r=this.options.escape?this._encode(t):t;r=this.getFormattedValue(e,r),this.dom.label.innerHTML=r}}}catch(e){o.w.printStackTrace(e)}},u.prototype._getLabel=function(e){try{if(this.dom.label){var t=this.itemArr[e].label+"";if(this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var i=this.itemArr[e].value+"",s=this.itemArr[e].orgLabel+"";(0!=e||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=e&&1!=e||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(t=this.customLabelFormatter.call(this,s,i,this.isOpen))}return t}}catch(e){o.w.printStackTrace(e)}},u.prototype._getChooseOptionLabel=function(){try{var e=this.options.chooseOptionLabel||this.defaultChooseOptionLabel;if(this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var t=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);t&&(e=t)}return e}catch(e){o.w.printStackTrace(e)}},u.prototype.setAllSelectedIndex=function(e,t){try{return this.allItemArr[e]?(this.selectedIndex=-1,this.selectedAllIndex=e,this.setDummyData(this.allItemArr[e].value,this.allItemArr[e].label+""),t&&this.modelControl.setData(this.allItemArr[e].value),NaN):(this.selectedAllIndex=-1,!1)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setValue=function(e){try{if(n.D.isNull(e))return;var t=this.getValue(),i=this.setValueNM(e);1==i?(this.modelControl.setData(e),t!=this.getValue()&&l.B.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()
})):isNaN(i)?this.modelControl.isBinded()&&this.modelControl.setData(e):this.options.emptyItem?this.setSelectedIndex(-1):-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?(this._domInputValue=e,this.setSelectedIndex(-1,!0)):this.setSelectedIndex(0),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setValueNM=function(e){try{if(n.D.isNull(e))return;e=e.toString();var t=this.getItemCount();e&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult&&(this.selectedIndex=-1);for(var i=0;i<t;i++)if(this.itemArr[i].value==e)return this.setSelectedIndexNM(i),!0;return this.setAllValue(e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setAllValue=function(e,t){try{try{if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(e){return!1}if(n.D.isNull(e))return!1;e=e.toString();for(var i=this.allItemArr.length,s=0;s<i;s++)if(this.allItemArr[s].value==e)return this.setAllSelectedIndex(s,t);return!1}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getValue=function(){try{if(this.dummyData)return this.dummyData.value;if(this.itemArr[this.selectedIndex])return this.itemArr[this.selectedIndex].value;if(this.options.emptyItem&&-1==this.selectedIndex)return this.options.emptyValue;if("empty"==this.options.returnValueType)return"";var e=null;return"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult&&this._domInputValue&&(e=this._domInputValue),e}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setText=function(e,t){try{var i=this.getItemCount(),s="";if(t)for(var r=0;r<i;r++)this.itemArr[r].orgLabel==e&&(s=this.itemArr[r].value);else for(r=0;r<i;r++)this.itemArr[r].label==e&&(s=this.itemArr[r].value);this.setValue(s)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getText=function(e){try{return this.dummyData?this.dummyData.label:this.itemArr[this.selectedIndex]?e?this.itemArr[this.selectedIndex].orgLabel:this.itemArr[this.selectedIndex].label:null}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setItem=function(e,t,i,s){try{if(!this.itemArr)return;if(this.itemArr.length<=s)return;this.itemArr[s].label=e,this.itemArr[s].value=t,this.itemArr[s].label=this.getItemText(s),this.itemArr[s].orgLabel=e,this.itemArr[s].xml=i}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.addItem=function(e,t,i,s){try{var r,l=!0;if(e+="",t+="",null==i){var n="<DATA><label>"+WebSquare.xml.encode(e)+"</label><value>"+WebSquare.xml.encode(t)+"</value></DATA>";r=WebSquare.xml.parse(n)}var a={label:e,value:t,orgLabel:e,xml:r};s=parseInt(s,10),(isNaN(s)||s<0||s>=this.getItemCount())&&(s=this.getItemCount());for(var h=0;h<this.itemArr.length;h++)if("all"==this.options.searchTarget){if(this.itemArr[h].value==a.value&&this.itemArr[h].orgLabel==a.orgLabel){l=!1,alert(WebSquare.language.getMessage("AutoComplete_addItem_invalid",this.id,h));break}}else if(this.itemArr[h].value==a.value){l=!1,alert(WebSquare.language.getMessage("AutoComplete_addItem_invalid",this.id,h));break}if(l){void 0===s?("0"!=this.options.displayMode&&(a.label=this.getItemText(s)),this.itemArr.push(a)):(this.itemArr.splice(s,0,a),"0"!=this.options.displayMode&&(this.itemArr[s].label=this.getItemText(s)),s<=this.selectedIndex&&this.setSelectedIndexNM(this.selectedIndex+1)),this.viewArr=[];for(h=0;h<this.itemArr.length;h++)this.viewArr.push({label:this.itemArr[h].label,value:this.itemArr[h].value,orgLabel:this.itemArr[h].orgLabel,index:h,_hidden:this.itemArr[h]._hidden,_disabled:this.itemArr[h]._disabled});return!0}return!1}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getItem=function(e){try{if(void 0===e)return;if(e>=this.itemArr.length||e<0)return
;return this.itemTable&&this.gridOptions.sortIndex&&this.gridItemArr.length>0?this.itemArr[this.itemTable.grid.getRealRowIndex(e)]:this.itemArr[e]}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getItemCount=function(){try{return this.itemArr.length}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getSearchedItems=function(){try{return this.viewArr}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.getSelectedRow=function(){try{if("grid"==this.itemTableMode)return this.selectedGridRowObj;if("gridView"==this.itemTableMode)return this.selectedGridViewRowObj;var e={};return e.label=this.selectedItem.orgLabel,e.value=this.selectedItem.value,e}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.onPropertyChange=function(e,t){try{switch(e){case"disabled":var i=this.dom.button;1==t?(this.closeSubLayer(),this.addClass("w2autoComplete_disabled"),null!=i&&this.addClass(i,"w2autoComplete_button_disabled")):(this.removeClass("w2autoComplete_disabled"),null!=i&&this.removeClass(i,"w2autoComplete_disabled"));var s=this.getElementById(this.id+"_input");1==t?s.setAttribute("disabled","disabled"):s.removeAttribute("disabled");break;case"readOnly":1==t?this.addClass("w2autoComplete_readonly"):this.removeClass("w2autoComplete_readonly");s=this.getElementById(this.id+"_input");1==t?s.setAttribute("readonly","readonly"):s.removeAttribute("readonly");break;case"mandatory":1==t?this.addClass(this.render,"w2autoComplete_mandatory"):this.removeClass(this.render,"w2autoComplete_mandatory")}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setSelectedIndex1=function(e,t,i){try{var s=this.selectedIndex,r=this.getValue();if(this.setSelectedIndex(e,i),s!=this.selectedIndex){var n={oldValue:r,newValue:this.getValue(),oldSelectedIndex:s,newSelectedIndex:this.selectedIndex};l.B.fireEvent(this,"onviewchange",n)}t||this.closeSubLayer()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.validate=function(){try{var e=this.validator.validate(this.getValue());return e||this.focus(),e}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.validateObject=function(){try{var e=this.validator.validate(this.getValue()),t={};return e||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(t.callerId=this.validator.obfuscator_invalidObject.callerId,t.type=this.validator.obfuscator_invalidObject.getType(),t.value=this.validator.obfuscator_invalidObject.getValue())),t}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.showTooltip=function(e,t,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null),this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2autoComplete_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",e+"px"),this.tooltip.setStyle("top",t+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=this._encode(i)),this.tooltip.render.innerHTML=i})),1e3*this.options.tooltipTime)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.disableEdit=function(e){try{this.options.disableEdit=n.D.getBoolean(e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleClickEvent=function(e){try{if(this.options.disabled)return!1;for(var t=this.event.getTargetIterator(e,this.render);t.next();){if(t.match("w2autoComplete_input")&&this.isOpen)return void this.changeMode()
;if(t.match("w2autoComplete_col_label"))return this.isOpen?this._showItemTableByFocus||"onfocus"===this.options.editModeEvent&&this.viewArr.length<this.itemArr.length||this.closeSubLayer():(1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),!0!==this.options.disableEdit&&!1!==this.options.editable||this.openSubLayer()),void(!this.options.disableEdit&&this.options.editable&&this.changeMode({hideListOnFocus:this.options.hideListOnFocus}));t.match("w2autoComplete_col_button")&&(this.mytime&&clearTimeout(this.mytime),this.isOpen&&(this._showItemTableByFocus||this.viewArr.length<this.itemArr.length)&&this.closeSubLayer())}this.mozTrickBuffer="",this.editmode=!1,this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled});this.options.useOtherComponentId||this.options.useKeywordHighlight&&this.options.interactionMode&&(this._itemTableRedraw=!0),this.toggle(),t=null}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleClickEventDocument=function(e){try{!this.event.isMe(e,this.render)&&this.options.handleOtherClick&&(null!=this.itemTable&&this.itemTable.inputBlurInside&&(r.v.setTimer(this.endEdit,{key:this.id+"_handleClickEventDocument",caller:this,delay:1}),this.itemTable.inputBlurInside=!1),this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),null!=this.itemTable&&0==this.findkeymode?WebSquare.getBody().getLayerListener().isShow(this.id)&&this.closeSubLayer():null!=this.itemTable&&1==this.findkeymode&&(this.findkeymode=!0),this.otherClicked=!0)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.endEdit=function(e){try{var t,i=this.dom.input.value,s=e&&!0===e.noEvent;l.B.fireEvent(this,"oneditend",i),this.mytime&&window.clearTimeout(this.mytime),this.hideTime&&window.clearTimeout(this.hideTime);var a,h=this.dom.input.value,d=this.options.searchTarget,u=!1;1==this.options.displayMode?(a=h.split(this.options.delimiter),"value"==d?h=a[0]:"label"==d?null!=(h=a[1])&&""!==h||(h=a[0]):"both"==d?a[0]&&a[1]?(h=a[1]+"|"+a[0],u=!0):null!=(h=a[1])&&""!==h||(h=a[0]):"all"==d&&(null==a[1]&&1==a.length&&(a[1]=a[0],a[0]=""),h=a[1]+"|"+a[0])):2==this.options.displayMode&&(a=h.split(this.options.delimiter),"value"==d?null!=(h=a[1])&&""!==h||(h=a[0]):"label"==d||"both"==d?h=a[0]:"all"==d&&(null==a[1]&&(a[1]=""),h=a[0]+"|"+a[1]));var m=this.itemArr[this.selectedIndex];if(null!=(t=null!=m&&(("value"===d||"both"===d)&&h===m.value||("label"===d||"both"===d)&&h===m.orgLabel||"all"===d&&h===m.orgLabel+"|"+m.value)?this.selectedIndex:this.findinItemArr(h,this.options.searchTarget,u)))"useData"!==this.noResult||s?"clear"===this.noResult?s?this.setSelectedIndex(t,!0):this.setSelectedIndex1(t,!0,!0):!0===this.otherClicked?(!0===this.options.handleOtherClick&&this.setSelectedIndex1(t,!0),this.otherClicked=!1):this.setSelectedIndex(t):this.setSelectedIndex1(t,!0);else if("useData"===this.noResult){if(t=1==this.options.allOption||1==this.options.chooseOption?1:0,this.options.ignoreBlankOnNoResult&&""===this.dom.input.value)t=0;else{if("gridView"===this.itemTableMode){var c={label:this.dom.input.value,value:this.dom.input.value,orgLabel:this.dom.input.value};this.dummyGridItemArr.push(c)}"all"===d&&2===a.length?(this.options.interactionMode&&this.dummyItemArr.push({label:a[0],value:a[0],orgLabel:a[0]}),1==this.options.displayMode?this.addItem(a[1],a[0],null,t):this.addItem(a[0],a[1],null,t)):(this.options.interactionMode&&this.dummyItemArr.push({label:this.dom.input.value,value:this.dom.input.value,orgLabel:this.dom.input.value}),this.addItem(this.dom.input.value,this.dom.input.value,null,t))}s?this.setSelectedIndex(t):this.setSelectedIndex1(t,!0)}else"clear"===this.noResult&&(t=1==this.options.allOption||1==this.options.chooseOption?0:-1,
s?this.setSelectedIndex(t,!0):this.setSelectedIndex1(t,!0,!0));var p="";null!=this.dom.input&&null!=this.itemArr&&-1!=this.selectedIndex&&(this.options.customLabelFormatter&&(this.customLabelFormatter=n.D.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.selectedItem.text==this.dom.input.value&&""!=this.dom.input.value?("function"==typeof this.customLabelFormatter?p=this._getLabel(this.selectedIndex):(p=this.options.escape?this._encode(this.selectedItem.text):this.selectedItem.text,p=this.getFormattedValue(this.selectedIndex,p)),this.dom.label.innerHTML=p):this.itemArr&&this.itemArr[this.selectedIndex]?("function"==typeof this.customLabelFormatter?p=this._getLabel(this.selectedIndex):(p=this.options.escape?this._encode(this.itemArr[this.selectedIndex].label):this.itemArr[this.selectedIndex].label,p=this.getFormattedValue(this.selectedIndex,p)),this.dom.label.innerHTML=p,this.selectedItem={text:p,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}):this.dom.label.innerHTML=""),this.showEditMode(!1),this.mozTrickBuffer="",(r.v.browserCheck.moz||r.v.browserCheck.opera)&&(this.findStop=!0,n.D.clearInterval(this.id+"_mozTrickCompare"))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleblurEventInput=function(){"none"!=this.dom.input.style.display&&this.options.handleOtherClick&&(null==this.itemTable||null!=this.itemTable&&!this.itemTable.inputBlurInside)&&(this.endEdit(),this.isOpen&&this.closeSubLayer()),this.otherClicked=!1},u.prototype.handleKeypressEvent=function(e){try{var t=this.dom.input.value;this.validator.validateKeyPress(this.dom.input,t,e)||l.B.stopEvent(e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleKeydownEvent=function(e){try{var t=e.charCode?e.charCode:e.keyCode;if(!0===this._preventKeyObj[t]||!0===this._preventKeyObj.all)return;if(13==t&&(this.options.disableEdit||!this.editable))return void this.handleClickEvent(e);if(this.event.isMe(e,this.dom.input)){if(this.editmode=!0,this.inputKeyDown(e,!1),(r.v.browserCheck.moz||r.v.browserCheck.opera)&&(this.mozTrickCompare(),n.D.setInterval(this.mozTrickCompare,{key:this.id+"_mozTrickCompare",caller:this,delay:10})),9==t||13==t&&!0===this.options.nextTabByEnter){var i=l.B.fireEvent(this,"onEditEnter",e);this.tabOrderMoveStart=!1,!1!==i&&(e.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,l.B.preventDefault(e)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,l.B.preventDefault(e)))}return}t=e.charCode?e.charCode:e.keyCode;if(this.options.customToggleKey==t)return void this.toggle();if(r.v.browserCheck.opera){if(18==t&&!this.isOpen)return void this.handleClickEvent(e);if(13==t&&!this.isOpen)return void this.changeMode()}else{if(!(40!=t&&38!=t||this.isOpen))return this.handleClickEvent(e),void l.B.preventDefault(e);if(13==t&&!this.isOpen)return void this.changeMode()}if(9==t||13==t&&!0===this.options.nextTabByEnter){i=l.B.fireEvent(this,"onEditEnter",e);this.tabOrderMoveStart=!1,!1!==i&&(e.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,l.B.preventDefault(e)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,l.B.preventDefault(e)))}if(null!=this.itemTable&&this.viewArr.length>0)1==this.isOpen&&(27==t?(this._closeSubLayer(),this.showEditMode(!1),this.focus()):this.itemTable.handleKeydownEvent(e)),this.editmode=!1;else if(null!=this.itemTable&&""==this.itemTable.render.style.display)return;return void(null!=this.itemTable&&this.itemTable.render.style.display)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleKeyupEvent=function(e){try{var t,i=e.charCode?e.charCode:e.keyCode;if(!0===this._preventKeyObj[i]||!0===this._preventKeyObj.all)return
;if(9==i||13==i&&!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(e.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(t=n.D.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.isOpen&&this.closeSubLayer(),this.tabOrderMoveStart=!1,t.focus())}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(t=n.D.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.isOpen&&this.closeSubLayer(),this.tabOrderMoveStart=!1,t.focus())}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleInputKeyupEvent=function(e){try{if(this.editmode){var t=e.charCode?e.charCode:e.keyCode,i={oldValue:this.beforeEditValue,newValue:this.dom.input.value,keyCode:t};this.options.maxByteLength&&l.B.fireEvent(this,"oneditfull");l.B.fireEvent(this,"oneditkeyup",i,e)}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleInputEvent=function(e){try{var t=this.dom.input.value,i=this.validator.validateKeyInput(this.render,t,e);i.valid?this.dom.input.value=i.str:l.B.stopEvent(e)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.find=function(e,t){try{var i=this.dom.input.value;if("function"==typeof this.customSearchStrArrFunction)return void this._findInSearchStrArr();if(""==i&&!t)return this.mozTrickBuffer=i,void(null!=this.itemTable&&this.closeSubLayer());if(this.mozTrickBuffer==i)return void(this.mozTrickBuffer=i);this.mozTrickBuffer=i,this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(i=i.toLowerCase());var s=!1;if(this._showItemTableByFocus&&t)for(var r=0;r<this.itemArr.length;r++)this.viewArr.push({label:this.itemArr[r].label,value:this.itemArr[r].value,orgLabel:this.itemArr[r].orgLabel,index:r,_hidden:this.itemArr[r]._hidden,_disabled:this.itemArr[r]._disabled});else for(r=0;r<this.itemArr.length;r++)if(!this.itemArr[r].noItem){var l=!1;if(this.itemArr[r].orgLabel||(this.itemArr[r].orgLabel=this.itemArr[r].label,this.itemArr[r].label=this.getItemText(r)),!l&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var a=this.options.caseSensitive?this.itemArr[r].orgLabel:this.itemArr[r].orgLabel.toLowerCase();"all"==this.options.searchTarget&&(a=this.options.caseSensitive?this.itemArr[r].label:this.itemArr[r].label.toLowerCase()),"contain"==this.search?l=this.myhelper.containWith(a,i):"start"==this.search?l=this.myhelper.startWith(a,i):"none"==this.search&&(l=a==i),a==i&&(s=!0)}if(!l&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var h=this.options.caseSensitive?this.itemArr[r].value:this.itemArr[r].value.toLowerCase();"contain"==this.search?l=this.myhelper.containWith(h,i):"start"==this.search?l=this.myhelper.startWith(h,i):"none"==this.search&&(l=h==i),h==i&&(s=!0)}var d=this.itemArr[r].label;if(this.options.useKeywordHighlight){var u=this.options.caseSensitive?d:d.toUpperCase(),m=this.options.caseSensitive?this.mozTrickBuffer:this.mozTrickBuffer.toUpperCase(),c=u.indexOf(m);if(c>=0){var p=d.substring(c,c+this.mozTrickBuffer.length);d=d.substring(0,c)+"<span class='w2autoComplete_keyword'>"+p+"</span>"+d.substring(c+this.mozTrickBuffer.length,d.length)}}l&&this.viewArr.push({value:this.itemArr[r].value,label:d,orgLabel:this.itemArr[r].orgLabel,index:r,_hidden:this.itemArr[r]._hidden,_disabled:this.itemArr[r]._disabled})}if(this.options.disabled)return!1;1!==this.viewArr.length&&(s=!1),this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&"gridView"!=this.itemTableMode&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr)),"grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.openSubLayer({noFocus:!0}):this.openSubLayer({select:!1})):this.closeSubLayer(),this.options.autoFocus&&!0===s&&!0!==e&&n.D._autoFocus(this)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._findInSearchStrArr=function(){try{
var e=this.customSearchStrArrFunction.call(this,this.dom.input.value),t=this.dom.input.value;if(this.mozTrickBuffer=t,""==t||e&&e.lengh<1)return void(null!=this.itemTable&&this.closeSubLayer());this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(t=t.toLowerCase());for(var i=0;i<e.length;i++){t=this.options.caseSensitive?e[i]:e[i].toLowerCase();for(var s=0;s<this.itemArr.length;s++){var r=!1;if(this.itemArr[s].orgLabel||(this.itemArr[s].orgLabel=this.itemArr[s].label,this.itemArr[s].label=this.getItemText(s)),!r&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var l=this.options.caseSensitive?this.itemArr[s].orgLabel:this.itemArr[s].orgLabel.toLowerCase();"all"==this.options.searchTarget&&(l=this.options.caseSensitive?this.itemArr[s].label:this.itemArr[s].label.toLowerCase()),"contain"==this.search?r=this.myhelper.containWith(l,t):"start"==this.search?r=this.myhelper.startWith(l,t):"none"==this.search&&(r=l==t)}if(!r&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var n=this.options.caseSensitive?this.itemArr[s].value:this.itemArr[s].value.toLowerCase();"contain"==this.search?r=this.myhelper.containWith(n,t):"start"==this.search?r=this.myhelper.startWith(n,t):"none"==this.search&&(r=n==t)}var a=this.itemArr[s].label;if(this.options.useKeywordHighlight){var h=this.options.caseSensitive?a:a.toUpperCase(),d=this.options.caseSensitive?this.mozTrickBuffer:this.mozTrickBuffer.toUpperCase(),u=h.indexOf(d);if(u>=0){var m=a.substring(u,u+this.mozTrickBuffer.length);a=a.substring(0,u)+"<span class='w2autoComplete_keyword'>"+m+"</span>"+a.substring(u+this.mozTrickBuffer.length,a.length)}}r&&this.viewArr.push({value:this.itemArr[s].value,label:a,orgLabel:this.itemArr[s].orgLabel,index:s,_hidden:this.itemArr[s]._hidden,_disabled:this.itemArr[s]._disabled})}}if(this.options.disabled)return!1;this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&"gridView"!=this.itemTableMode&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr)),"grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.openSubLayer({noFocus:!0}):this.openSubLayer({select:!1})):this.closeSubLayer()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.runSubmission=function(e){try{var t=!0,i=this.dom.input.value,s=n.D.getStringByteSize(i);if(this.options.interactionMinByteLength>0&&this.options.interactionMinByteLength>s&&(t=!1),"false"!=this.options.allowEmptySubmission&&""==i||"default"==this.options.interactionKey&&this.mozTrickBuffer==i&&(t=!1),t)if(this._itemTableRedraw=!0,this.mozTrickBuffer=i,""!=this.options.submissionFunc.wq_trim()){var r=n.D.getGlobalFunction(this.options.submissionFunc,this.scope_id);"function"==typeof r&&r(i,e)}else if(""!=this.options.submission.wq_trim()){var l="<key>"+WebSquare.xml.encode(i)+"</key>";WebSquare.WebSquaredoc.models[0].rebuild(WebSquare.xml.parse(l),this.options.keyInputRef),WebSquare.WebSquaredoc.models[0].refresh(),WebSquare.ModelUtil.executeSubmission(this.options.submission)}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.inputKeyDown=function(e,t){try{if(0==t)var i=e.charCode?e.charCode:e.keyCode;if(this.interactionMode){if(this.editmode=!1,0==t)if("default"==this.options.interactionKey||this.isOpen||this.options.interactionEnterKey)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return r.v.browserCheck.chrome||r.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(r.v.browserCheck.moz||r.v.browserCheck.opera)&&(this.findStop=!0),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.arrowHandle(e),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&("grid"==this.itemTableMode?this.itemTable.setFocusedCell(0,0):this.itemTable.focus()))
;if(13==i)return void(this.options.interactionEnterKey?this.mytime=this.runSubmission(i):this.enterHandle(e));if(9==i||9==i&&e.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.arrowHandle(e),WebSquare.getBody().getLayerListener().isShow(this.id)&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.itemTable.setFocusedCell(0,0):this.itemTable.focus()),r.v.browserCheck.chrome||r.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(r.v.browserCheck.moz||r.v.browserCheck.opera)&&(this.findStop=!0),this.endEdit(),void(this.isOpen&&this.closeSubLayer())}}else;else this.options.interactionKey;if(!this.options.interactionEnterKey){var s=this;this.mytime=setTimeout((function(){s.runSubmission(i)}),100)}return}if(0==t)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return r.v.browserCheck.chrome||r.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(r.v.browserCheck.moz||r.v.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(e),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable.focus());if(13==i)return void this.enterHandle(e);if(9==i||9==i&&e.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length||this.viewArr.length!=this.itemArr.length)return;return this.arrowHandle(e),r.v.browserCheck.chrome||r.v.browserCheck.safari||n.D.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(r.v.browserCheck.moz||r.v.browserCheck.opera)&&(this.findStop=!0),void(this.isOpen&&this.closeSubLayer())}if(27===i)return this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.focus(),void this.closeTable()}else if(""==this.dom.input.value.wq_trim())return void this.render.click();if(this.selectedItem={text:"",value:"",orgLabel:""},this.selectedGridRowObj={},this.beforeEditValue=this.dom.input.value,this.itemArr.length>0){s=this;this.mytime=setTimeout((function(){s.find()}),100)}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.arrowHandle=function(e){try{var t=e.charCode?e.charCode:e.keyCode;if(null==this.itemTable)return;if((this.editmode||this.findkeymode)&&(""==this.dom.input.value||0==this.viewArr.length))return void l.B.stopEvent(e);for(var i=0,s=0;s<this.viewArr.length;s++)if(this.selectedItem.orgLabel==this.viewArr[s].orgLabel){i=s;break}if(9==t||9==t&&e.shiftKey?this.setSelectedIndex1(this.viewArr[i].index):this.itemTable.handleKeydownEvent(e),this.viewArr.length>0){var r="";r="value"==this.options.searchTarget?this.viewArr[i].value:this.viewArr[i].label,this.options.useKeywordHighlight&&(r=r.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),this.dom.input.value=r,this.selectedItem={text:r,value:this.viewArr[i].value,orgLabel:this.viewArr[i].orgLabel},this.itemTable.setSelectedIndex(i)}return void(this.mozTrickBuffer="")}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.enterHandle=function(e){try{var t,i=this.dom.input.value;if(l.B.fireEvent(this,"oneditend",i),(null==this.itemTable||null==this.itemTable.selectedCell)&&(null!=this.itemTable||this.options.useOtherComponentId||this.setSubLayer(),null==this.itemTable.selectedCell)){var s=this.findinItemArr(this.dom.input.value,this.options.searchTarget);if("clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode&&void 0===s&&(s=-1),this.setSelectedIndex1(s,!0,!0);else if("noEnd"===this.noResult){if(void 0===s)return;this.setSelectedIndex1(s,!0)}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(t=null==s?this.findinItemArr(this.viewArr[0].value,"value"):s,
this.setSelectedIndex1(t,!0)):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(t=this.findinItemArr(this.itemArr[0].value,"value"),this.setSelectedIndex1(t,!0)))}if(r.v.browserCheck.opera&&l.B.stopEvent(e),this.mozTrickBuffer="",null!=this.itemTable.selectedCell)if(t=this.findinItemArr(this.dom.input.value,this.options.searchTarget),"clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode?(void 0===t&&(t=-1),this.setSelectedIndex1(t,!0,!0)):(void 0===t&&void 0===(t=this.itemTable.selectedCell.index)&&(t=this.itemTable.selectedCell.getAttribute("index")),this.setSelectedIndex1(t,!0));else if("noEnd"===this.noResult){if(void 0===t)return;this.setSelectedIndex1(t,!0)}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==t&&(t=this.findinItemArr(this.viewArr[0].value,"value")),this.setSelectedIndex1(t,!0)):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(t=this.findinItemArr(this.itemArr[0].value,"value"),this.setSelectedIndex1(t,!0)));this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.closeTable(),this.focus()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.findinItemArr=function(e,t,i,s){try{var r=t||"label";function o(e,t){return t&&"string"==typeof e?e.toLowerCase():e}for(var l=s&&!0===s.ignoreCaseSensitive,n=o(e,l),a=0;a<this.itemArr.length;a++)if(!0!==this.itemArr[a]._disabled){var h=o(this.itemArr[a].value,l),d=o(this.itemArr[a].label,l),u=o(this.itemArr[a].orgLabel,l);if("value"===r){if(n==h)return a}else if("label"===r){if(1==this.options.displayMode||2==this.options.displayMode){if(n==u)return a}else if(n==d)return a}else if("both"===r){if(1==i){if(n==u+"|"+h)return a}else if(n==u||n==h)return a}else if("all"===r&&n==u+"|"+h)return a}if(!this.options.caseSensitive&&!l)return this.findinItemArr(e,t,i,{ignoreCaseSensitive:!0});if(this.dummyData&&(("value"===r||"both"===r)&&this.dummyData.value||("label"===r||"both"===r)&&e===this.dummyData.label||"all"===r&&e===this.dummyData.label+"|"+this.dummyData.value))return NaN}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.closeTable=function(){try{this.closeSubLayer()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.showTable=function(){try{this.openSubLayer({select:!1})}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleMousewheelEvent=function(e){try{if(this.options.preventWheelEvent)return;if(l.B.stopEvent(e),!this.options.useMousewheel)return;for(var t=this.event.getTargetIterator(e,this.render);t.next();)if(t.match("w2autoComplete_selected"))if(this.isOpen){if("grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode){if(this.itemTable.selectedCell)void 0===(i=this.itemTable.selectedCell.index)&&(i=this.itemTable.selectedCell.getAttribute("index"),this.dom.input.value=this.viewArr[i].label),this.itemTable.setSelectedIndex(i)}}else{var i=this.getSelectedIndex();e.wheelDelta>0||e.detail<0?this.setSelectedIndex1(i-1):this.setSelectedIndex1(i+1)}t=null}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleFocusEvent=function(e){try{if(l.B.stopEvent(e),!this.isOpen){var t=document.getElementById(this.id+"_main_tbody");this.addClass(t,"w2autoComplete_selected"),this.addClass("w2autoComplete_body_selected"),"onfocus"==this.options.editModeEvent&&(!0===this.options.disableEdit||!1===this.options.editable||this.changeMode())}this.onchangeFlag&&(this.onchangeFlag=!1,l.B.fireEvent(this,"onafteredit"))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleBlurEvent=function(e){try{if(l.B.stopEvent(e),!this.isOpen){var t=document.getElementById(this.id+"_main_tbody");this.removeClass(t,"w2autoComplete_selected"),this.removeClass("w2autoComplete_body_selected")}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleMouseoverEvent=function(e){try{if(l.B.stopEvent(e),!n.D.isIE(6)&&!this.isOpen){
var t=document.getElementById(this.id+"_main_tbody");this.addClass(t,"w2autoComplete_selected"),this.addClass("w2autoComplete_body_selected")}if(!this.isOpen){for(var i=this.event.getTargetIterator(e,this.render);i.next();)if(i.match("w2autoComplete")&&1==this.options.tooltipDisplay&&!this.editmode){var s=i.getElement(),r=WebSquare.style.getAbsoluteLeft(s)+20,a=WebSquare.style.getAbsoluteTop(s)+this.render.offsetHeight+3,h=this.dom.label.innerHTML;this.showTooltip(r,a,h)}i=null}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleMouseoutEvent=function(e){try{if(l.B.stopEvent(e),1==this.options.tooltipDisplay&&this.hideTooltip(),!this.isOpen){var t=document.getElementById(this.id+"_main_tbody");this.removeClass(t,"w2autoComplete_selected"),this.removeClass("w2autoComplete_body_selected")}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.handleMouseleaveEvent=function(e){try{var t=this.render.offsetHeight-1,i=this.render.offsetWidth-1,s=this.getAbsolutePosition("top"),r=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(e.clientX<r||e.clientX>r+i||e.clientY>s||e.clinetY>s+t)&&this.closeSubLayer():(e.clientX<r||e.clientX>r+i||e.clientY<s||e.clinetY>s+t)&&this.closeSubLayer())}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.changeMode=function(e){try{if(!1===this.options.editable)return;if(void 0!==e&&null!=e||(e={}),this.editmode=!0,this.findStop=!1,"block"!=this.dom.input.style.display){var t="";if(t=-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?this.selectedItem.text:"value"==this.options.searchTarget?this.selectedItem.value:"label"==this.options.searchTarget||"both"==this.options.searchTarget?this.selectedItem.orgLabel:"all"==this.options.searchTarget?this.selectedItem.text:this.selectedItem.orgLabel,"focus"==this.options.editType){this.showEditMode(!0),document.activeElement!=this.dom.input&&this.setfFocus();var i=WebSquare.xml.decode(t+"");this.dom.input.value=i,(n.D.isOpera()||n.D.isFF())&&this.dom.input.setSelectionRange(i.length,i.length)}else this.dom.input.value=WebSquare.xml.decode(t+""),this.showEditMode(!0),this.dom.input.select(),this.setfFocus()}if(!this.interactionMode&&this.itemArr.length>0&&!0!==e.hideListOnFocus){var s=this;(this._showItemTableByFocus||this.dom.input.value&&this.dom.input.value!==this.defaultAllOptionLabel&&this.dom.input.value!==this._getChooseOptionLabel())&&(this.mytime&&clearTimeout(this.mytime),this.mytime=setTimeout((function(){s.find(!0,!0)}),100))}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.showEditMode=function(e){e?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):r.v.setTimer((function(){try{this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible"}catch(e){}}),{key:this.id+"_showEditMode",caller:this,delay:1})},u.prototype.setfFocus=function(){try{this.dom.input.focus(),null!=this.itemTable&&(this.itemTable.inputBlurInside=!1)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setDisabled=function(e){try{e=n.D.getBoolean(e),this.options.disabled=e,this.setProperty("disabled",e),!0===e?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(e){o.w.printStackTrace(e)}return e},u.prototype.mozTrickCompare=function(){try{this.dom.input.value!=this.trickBuffer&&(this.trickBuffer=this.dom.input.value,0==this.findStop&&this.inputKeyDown({},!0))}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setInputFocus=function(){try{this.changeMode()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.setEditMode=function(){try{this.setInputFocus()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.removeAll=function(e){try{if(this.selectedItem={text:"",value:"",orgLabel:""},
this.itemArr=new Array,e&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption)){var t=this._getChooseOptionLabel();this.itemArr=[{label:t,value:this.options.chooseOptionValue,orgLabel:t,noItem:!0}].concat(this.itemArr)}if(this.setSelectOptions(this.itemArr),this.itemArr.length>0?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[0].label):this.itemArr[0].label:this.dom.label.innerHTML="","grid"==this.itemTableMode)this.viewArr=[],this.gridItemArr=[],this.gridRowItemArr=[],this.selectedGridRowObj={},this.itemTable&&this.itemTable.grid.removeAll();else if("gridView"==this.itemTableMode){if(this.viewArr=[],this.gridViewItemArr=[],this.gridViewRowItemArr=[],this.selectedGridViewRowObj={},this.itemTable)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).removeAll()}}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.initAutoComplete=function(){try{this.removeAll(),this.selectedIndex=-1,this.selectedItem={text:"",value:"",orgLabel:""},this.dom.input.value="",this.dummyData=null,this._itemTableRedraw=!0,this.isOpen&&this.closeSubLayer(),this.broadcast({linkedDataList:["refresh"]})}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.hide=function(){try{this.closeSubLayer(),a.s.prototype.hide.call(this)}catch(e){o.w.printStackTrace(e)}},u.prototype.getFormattedValue=function(e,t){try{var i=t;return this.options.displayFormatter&&(this.displayFormatter||(this.fixedIndex=-1,1==this.options.allOption&&this.fixedIndex++,1==this.options.chooseOption&&this.fixedIndex++,this.displayFormatter=n.D.getGlobalFunction(this.options.displayFormatter,this.scope_id)),"function"==typeof this.displayFormatter&&e>this.fixedIndex&&(i=this.displayFormatter(t))),i}catch(e){o.w.printStackTrace(e)}},u.prototype.setRef=function(e){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=e,this.modelControl.setRef(e),this.refresh()}catch(e){o.w.printStackTrace(e)}},u.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var e=n.D.getNextTabbableComp(this.id);e&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),e.focus())}}catch(e){o.w.printStackTrace(e)}},u.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var e=n.D.getPreTabbableComp(this.id);e&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),e.focus())}}catch(e){o.w.printStackTrace(e)}},u.prototype.getNextTabID=function(){try{var e=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(e=WebSquare.tabOrder[this.id].nextTabID),e}catch(e){o.w.printStackTrace(e)}},u.prototype.setNextTabID=function(e,t){try{null!=e&&n.D.setNextTabID(this.id,e,t)}catch(e){o.w.printStackTrace(e)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(e){o.w.printStackTrace(e)}},u.prototype.setGridData=function(){this.itemTable.grid.clearFilter(),this.itemTable.grid.setTopRowIndex(0);var e=this.itemsetObj.labelId,t=this.itemsetObj.valueId;if(!this.options.interactionMode)if(this.gridItemArr=[],this.gridOptions.dataComp){var i=this.itemTable.grid.getColCnt();if(this.gridOptions.dataComp.getColumnCount()!=i){var s,r=[],o={},l=[];for(var n in this.itemTable.grid.cellInfoHash)r.push(this.itemTable.grid.cellInfoHash[n].id);if(s=this.gridOptions.dataComp.getColData(r[0]).length,null==this.gridOptions.dataComp.sortStatusArr){for(var a=0;a<r.length;a++)o[r[a]]=this.gridOptions.dataComp.getColData(r[a]);for(var h=0;h<s;h++)for(var n in l[h]={},o)l[h][n]=o[n][h];for(n=0;n<this.viewArr.length;n++)for(a=0;a<l.length;a++)if(this.viewArr[n].orgLabel===l[a][this.itemsetObj.label]&&this.viewArr[n].value===l[a][this.itemsetObj.value]){var d=[]
;for(var u in l[a])d.push(l[a][u]);this.gridItemArr=this.gridItemArr.concat(d);break}}}else for(n=0;n<this.viewArr.length;n++)for(a=0;a<this.itemArr.length;a++)if(this.viewArr[n].orgLabel===this.itemArr[a].label&&this.viewArr[n].value===this.itemArr[a].value){this.gridItemArr=this.gridItemArr.concat(this.gridOptions.dataComp.getRowData(a));break}}else for(n=0;n<this.viewArr.length;n++)for(a=0;a<this.gridRowItemArr.length;a++)if(this.viewArr[n].orgLabel===this.gridRowItemArr[a][e]&&this.viewArr[n].value===this.gridRowItemArr[a][t]){for(var m in this.gridRowItemArr[a])this.gridItemArr.push(this.gridRowItemArr[a][m]);break}if(this.itemTable.grid.setData(this.gridItemArr.slice(0)),this.options.allOption){var c=[],p=-1;for(a=0;a<this.itemsetObj.items.length;a++)-1==p&&this.itemsetObj.items[a].ref==this.itemsetObj.label&&(p=a),c.push("");c[-1==p?0:p]=this.defaultAllOptionLabel,this.itemTable.grid.setRowData(0,c,!1)}if(this.gridOptions.sortIndex&&this.gridItemArr.length>0){var b=[];if(this.options.allOption){var f=this.gridOptions.sortIndex.split(" ")[0],g=this.itemTable.grid.getCellInfo(f).options.dataType,v=parseInt(this.gridOptions.sortOrder.split(" ")[0],10);b[0]=function(e,t,i,s){return 0==i?-1:0==s?1:("number"==g?(e=Number(e),t=Number(t)):(e=e||"",t=t||""),e>t?1*v:e<t?-1*v:0)}}this.itemTable.grid.multisort({sortIndex:this.gridOptions.sortIndex,sortOrder:this.gridOptions.sortOrder,sortFuncArr:b})}else{var y=this.gridItemArr.length>0&&this.itemTable.grid.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;y&&this.itemTable.show(),this.itemTable.grid.notifyDataChanged({keepTop:!0}),y&&this.itemTable.hide()}},u.prototype.setGridViewData=function(){this.itemTable.gridView.setTopRowIndex(0);var e=null;e=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),0==this.searchFlag&&(this.orgSearchArr=e.getAllData(),this.searchFlag=!0),this.gridViewOptions.dataComp.sortStatusArr?e.setData(this.orgSearchArr):e.setData(this.gridViewOptions.dataComp.getAllData());var t=this.gridViewOptions.dataComp.filterManager.filterArr;if(t)for(var i=0;i<t.length;i++)e.setColumnFilter({type:t[i].options.type,colIndex:t[i].options.colIndex,key:t[i].options.key,condition:t[i].options.condition});if(this.options.allOption&&"-전체-"!=e.getAllData()[0]){for(var s=[],r=-1,o=0;o<this.itemsetObj.items.length;o++)-1==r&&this.itemsetObj.items[o].ref==this.itemsetObj.label&&(r=e.bodyIdColIndexMap[this.itemsetObj.label]),s.push("");s[-1==r?0:r]=this.defaultAllOptionLabel,e.setRowData(0,s,!1)}if(1==this.options.chooseOption&&"-선택-"!=e.getAllData()[0]){for(s=[],r=-1,o=0;o<this.itemsetObj.items.length;o++)-1==r&&this.itemsetObj.items[o].ref==this.itemsetObj.label&&(r=e.bodyIdColIndexMap[this.itemsetObj.label]),s.push("");s[-1==r?0:r]=this.options.chooseOptionLabel,e.setRowData(0,s,!1)}if(this.dummyGridItemArr.length>0){var l=0;1!=this.options.chooseOption&&1!=this.options.allOption||(l=1);s=[],r=-1;var n=e.bodyIdColIndexMap[this.itemsetObj.value];for(o=0;o<this.itemsetObj.items.length;o++)-1==r&&this.itemsetObj.items[o].ref==this.itemsetObj.label&&(r=e.bodyIdColIndexMap[this.itemsetObj.label]),s.push("");for(i=0;i<this.dummyGridItemArr.length;i++)s[-1==r?0:r]=this.dummyGridItemArr[i].label,s[-1==n?1:n]=this.dummyGridItemArr[i].value,e.setRowData(l,s,!1)}if(!this.options.interactionMode){if(this.viewArr&&0==this.viewArr.length)for(i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled});if(this.gridViewItemArr=[],this.gridViewOptions.dataComp)if(this.viewArr.length!==this.itemArr.length||t){for(i=0;i<this.viewArr.length;i++)for(o=0;o<this.itemArr.length;o++)if(this.viewArr[i].orgLabel===this.itemArr[o].orgLabel&&this.viewArr[i].value===this.itemArr[o].value){for(var a=e.getRowData(o),h=0;h<a.length;h++)this.gridViewItemArr.push(a[h]);break}
}else this.gridViewItemArr=this.gridViewItemArr.concat(e.dataArr)}if(e.setData(this.gridViewItemArr.slice(0)),this.itemTable.gridView.setDataList(),this.gridViewOptions.sortIndex&&this.gridViewItemArr.length>0){var d=[];if(this.options.allOption){var u=this.gridViewOptions.sortIndex.split(" ")[0],m=this.itemTable.gridView.getCellInfo(u).options.dataType,c=parseInt(this.gridViewOptions.sortOrder.split(" ")[0],10);d[0]=function(e,t,i,s){return 0==i?-1:0==s?1:("number"==m?(e=Number(e),t=Number(t)):(e=e||"",t=t||""),e>t?1*c:e<t?-1*c:0)}}this.itemTable.gridView._dataList.multisort({sortIndex:this.gridViewOptions.sortIndex,sortOrder:this.gridViewOptions.sortOrder,sortFuncArr:d})}else{var p=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;p&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),p&&this.itemTable.hide()}},u.prototype.setDummyData=function(e,t){this.dummyData={value:e,label:t},this.selectedIndex=-1,this.showEditMode(!1),this.selectedItem={text:t,value:e,orgLabel:t};var i=this.options.escape?this._encode(t):t;this.dom.label.innerHTML=i,this.dom.input.value=t},u.prototype.setStyle=function(e,t){try{if(!this.render)return;WebSquare.style.setStyle(this.render,e,t),"font-size"==e&&(this.dom.label.style[e]=t)}catch(e){o.w.printStackTrace(e)}},u.prototype.changeChooseOption=function(e,t){try{var i=-2;if(!0===this.options.chooseOption){i=-1;for(var s=this.getItemCount(),r=0;r<s;r++)if(this.itemArr[r].value===this.options.chooseOptionValue){i=r;break}i>-1&&this.itemArr.splice(i,1)}this.options.chooseOption=!0,this.options.chooseOptionValue=e,this.options.chooseOptionLabel=t,this.itemArr=[{label:t,value:e,orgLabel:t}].concat(this.itemArr),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr);var l=this.getSelectedIndex();i!==l&&-1!==l||this.setSelectedIndex(0)}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},u.prototype.restore=function(e){try{return this.setSelectedIndex(e.selectedIndex),!0}catch(e){return o.w.printStackTrace(e,null,this),!1}},u.prototype.setItemTableFocus=function(){try{WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus()}catch(e){o.w.printStackTrace(e,null,this)}},u.prototype._encode=function(e){var t=e;try{var i="<span class='w2autoComplete_keyword'>",s="</span>",r=e.indexOf(i),l=e.indexOf(s,i.length);return t=this.options.useKeywordHighlight&&r>=0&&l>=0&&e.slice(r,r+i.length)===i&&e.slice(l,l+s.length)===s?e.slice(0,r)+i+WebSquare.xml._encode(e.slice(r+i.length,l))+s+WebSquare.xml._encode(e.slice(l+s.length)):WebSquare.xml._encode(e)}catch(e){return o.w.printStackTrace(e,null,this),t}},u.prototype.stopRefreshItemTable=function(e){try{this.refreshStopItemTable=n.D.getBoolean(e)}catch(e){o.w.printStackTrace(e,null,this)}}}}]);