(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[275],{8275:(t,e,i)=>{"use strict";i.r(e),i.d(e,{multiselect:()=>c});var r=i(5405),s=i(5130),a=i(6146),n=i(209),o=i(6247),l=i(4582),h=i(9544),c=function(t,e,i){o.s.call(this,t,e,i)};r.x.extend(c.prototype,o.s.prototype),r.x.extend(c.prototype,l.E.prototype),r.x.extend(c.prototype,h.z.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.multiselect",pluginName:"multiselect",userEvents:["onchange","onviewchange"],systemEvents:["onclick","ondblclick","onfocus","onblur"],initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,separator:" ",title:"",escape:!0,maxItemNum:-1,dataListAutoRefresh:!1},c.prototype.initialize=function(t){try{this.lastSelectedIndex=-1,this.initializeItemArr(t),this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.separator=this.options.separator=this.options.separator||" "}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=""==this.options.disabled?"":"disabled='true'",e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'",r=""==this.options.title?"":"title='"+this.options.title+"'",a=[];a.push("<div "+t+" id='"+this.id+"' "+e+" class='w2multiselect_div "+this.options.className+"' "+i+" "+r+" >"),(n.D.isIE(6)||n.D.isIE(7)||n.D.isOpera())&&a.push("<div style='overflow:visible;position:relative;height:0px'>"),a.push("<table id='"+this.id+"_table' class='w2multiselect_table'>");for(var o=0;o<this.itemArr.length;o++){var l=this.options.escape?WebSquare.xml._encode(this.itemArr[o].label):this.itemArr[o].label;a.push("<tr class='w2multiselect_tr' index='"+o+"' checked='false'>"),a.push("<td class='w2multiselect_td'>"+l+"</td>"),a.push("</tr>")}return a.push("</table>"),(n.D.isIE(6)||n.D.isIE(7)||n.D.isOpera())&&a.push("</div>"),a.push("</div>"),a.join("")}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw()),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}this.options.mandatory&&this.onPropertyChange("mandatory",n.D.getBoolean(this.options.mandatory)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onselectstart",(function(t){a.B.stopEvent(t)})),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=this.getValue();this.refreshItemArr(),this.componentRedraw(t)}}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.B.fireEvent(this,"onchange")}}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(t){try{this.redraw(),this.setValueNM(t)}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex=function(t){try{for(var e=t.split(this.separator),i=0;i<e.length;i++){var r=e[i];r=parseInt(r),this.setSelectedIndexNM(r)&&this.setInstanceValue()}}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.setSelectedIndexNM=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;var i=this.getMultiselectList()[t];return e=null==e||e,i.setAttribute("checked",e),
e?this.addClass(i,"w2multiselect_tr_over"):this.removeClass(i,"w2multiselect_tr_over"),!0}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.getText=function(t){try{t||(t=this.separator);for(var e=[],i=this.getMultiselectList(),r=0;r<i.length;r++)n.D.getBoolean(i[r].getAttribute("checked"))&&e.push(this.itemArr[r].label);return e.join(t).wq_trim()}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.getValue=function(t){try{t||(t=this.separator);for(var e=[],i=this.getMultiselectList(),r=0;r<i.length;r++)n.D.getBoolean(i[r].getAttribute("checked"))&&e.push(this.itemArr[r].value);return e.join(t).wq_trim()}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.getAllValue=function(){try{for(var t=[],e=this.getMultiselectList(),i=0;i<e.length;i++)t.push(this.itemArr[i].value);return t.join(this.separator).wq_trim()}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.getIdxValue=function(t){try{return!(t<0||t>=this.getItemCount())&&this.itemArr[t].value}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{if(n.D.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t){try{if(n.D.isNull(t))return;for(var e=(t=t.toString()).split(this.separator),i=[],r=0;r<e.length;r++)i[e[r]+""]="";var a=this.getItemCount();for(r=0;r<a;r++){null!=i[t=this.itemArr[r].value]?this.setSelectedIndexNM(r,!0):this.setSelectedIndexNM(r,!1)}}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.setText=function(t){try{for(var e=t.split(this.separator),i=this.getItemCount(),r=[],a=0;a<e.length;a++)for(var n=0;n<i;n++)this.itemArr[n].label==e[a]&&r.push(this.itemArr[n].value);var o=r.join(this.separator).wq_trim();this.setValue(o)}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.getSelectedIndex=function(t){try{t||(t=this.separator);for(var e=[],i=this.getMultiselectList(),r=0;r<i.length;r++)n.D.getBoolean(i[r].getAttribute("checked"))&&e.push(r);return e.join(t).wq_trim()}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.deleteItem=function(t,e){try{if(t=parseInt(t),null==e&&(e=this.options.dataListAutoRefresh),this.itemsetObj.nodeset.match("data:")&&e){var i=this.modelControl.getDataComp();if(i&&WebSquare.idCache[i.uuid]){var r=i.removeRow(t-1);return{label:r[i.getColumnIndex(this.itemsetObj.label)],value:r[i.getColumnIndex(this.itemsetObj.value)]}}}for(var a=this.getTbodyDom(),n=null,o=a.firstChild;null!=o;o=o.nextSibling)o.getAttribute("index")==t&&(n=this.itemArr.splice(t,1)[0],o.parentNode.removeChild(o),this.refreshIndex());return n}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.deleteSelectedItems=function(t){try{var e=this.getTbodyDom();null==t&&(t=this.options.dataListAutoRefresh);for(var i=e.firstChild;null!=i;i=i.nextSibling)if(n.D.getBoolean(i.getAttribute("checked"))){var r=i.getAttribute("index");if(this.itemsetObj.nodeset.match("data:")&&t){var a=this.modelControl.getDataComp();if(a&&WebSquare.idCache[a.uuid]){a.removeRow(r),this.deleteSelectedItems(t);continue}}this.itemArr.splice(r,1),i.parentNode.removeChild(i),this.refreshIndex(),this.deleteSelectedItems()}}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.refreshIndex=function(){try{for(var t=this.getTbodyDom(),e=0,i=t.firstChild;null!=i;i=i.nextSibling)i.setAttribute("index",e+""),++e}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.setInstanceValue=function(){try{var t=this.getValue();this.modelControl.setData(t),this.fireOnchange()}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.getMultiselectList=function(){try{return this.getDomList("multiselectArr","tr")}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":this.options.disabled=e,e?this.addClass(this.render,"w2multiselect_disabled"):this.removeClass(this.render,"w2multiselect_disabled");break;case"readOnly":break
;case"mandatory":1==e?this.addClass(this.render,"w2multiselect_mandatory"):this.removeClass(this.render,"w2multiselect_mandatory")}}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{var e=this.getValue();this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.B.fireEvent(this,"onchange")}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){s.w.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){s.w.printStackTrace(t)}},c.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=n.D.getNextTabbableComp(this.id);t&&t.focus()}}catch(t){s.w.printStackTrace(t)}},c.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=n.D.getPreTabbableComp(this.id);t&&t.focus()}}catch(t){s.w.printStackTrace(t)}},c.prototype.getNextTabID=function(){try{var t=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(t=WebSquare.tabOrder[this.id].nextTabID),t}catch(t){s.w.printStackTrace(t)}},c.prototype.setNextTabID=function(t,e){try{null!=t&&n.D.setNextTabID(this.id,t,e)}catch(t){s.w.printStackTrace(t)}},c.prototype.handleClickEvent=function(t){try{if(a.B.stopEvent(t),this.options.disabled)return!1;var e=this.event.getTargetIterator(t,this.render),i=this.getTbodyDom();if(!t.ctrlKey&&i.childNodes)for(var r=0;r<i.childNodes.length;r++)this.setSelectedIndexNM(r,!1);for(var o=this.getValue(),l=this.getSelectedIndex();e.next();)if(e.match("w2multiselect_tr")){var h=e.getElement().getAttribute("index");if(t.shiftKey){var c,u=parseInt(h,10),d=parseInt(this.lastSelectedIndex,10),p=-1,m=-1,f=[];if(d<u)if(p=d,this.options.maxItemNum>-1)m=d+(p>-1?this.options.maxItemNum-1:this.options.maxItemNum);else m=u;else if(m=d,this.options.maxItemNum>-1)p=d-(this.options.maxItemNum-1);else p=u;for(r=p;r<=m;r++)f.push(r);c=f.join(this.separator).wq_trim(),this.setSelectedIndex(c)}else if(t.ctrlKey&&n.D.getBoolean(e.getElement().getAttribute("checked")))this.lastSelectedIndex=h,this.setSelectedIndexNM(h,!1),this.setInstanceValue();else{var b=this.getValue();if((""==b?0:b.split(" ").length)>=this.options.maxItemNum&&this.options.maxItemNum>-1)break;this.lastSelectedIndex=h,this.setSelectedIndex(h)}}e=null;var v=this.getValue(),y=this.getSelectedIndex();if(o!=v){var g={oldValue:o,newValue:v,oldSelectedIndex:l,newSelectedIndex:y};a.B.fireEvent(this,"onviewchange",g)}this.focus()}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(a.B.preventDefault(t),e=n.D.getPreTabbableComp(this.id))return void e.focus()}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(a.B.preventDefault(t),e=n.D.getNextTabbableComp(this.id))return void e.focus()}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.fireOnchange=function(){try{a.B.fireEvent(this,"onchange")}catch(t){
s.w.printStackTrace(t,null,this)}},c.prototype.setStyle=function(t,e){try{if(!this.render)return;if(WebSquare.style.setStyle(this.render,t,e),"font-size"==t)for(var i=this.getTbodyDom().firstChild;null!=i;i=i.nextSibling){i.firstChild.style[t]=e}}catch(t){s.w.printStackTrace(t)}},c.prototype.addItem=function(t,e,i,r){try{if(i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount()),null==r&&(r=!0),this.itemsetObj.nodeset.match("data:")&&r){var a=this.modelControl.getDataComp();if(a&&WebSquare.idCache[a.uuid]){var n={};return n[this.itemsetObj.value]=t,n[this.itemsetObj.label]=e,a.insertJSON(i,[n]),i}}var o={};return o.value=t,o.label=e,this.itemArr.splice(i,0,o),this.redraw(),i}catch(t){s.w.printStackTrace(t,null,this)}},c.prototype.getTbodyDom=function(){try{var t=document.getElementById(this.id+"_table");return t.childNodes.length>0?t.childNodes[0]:[]}catch(t){s.w.printStackTrace(t,null,this)}}}}]);